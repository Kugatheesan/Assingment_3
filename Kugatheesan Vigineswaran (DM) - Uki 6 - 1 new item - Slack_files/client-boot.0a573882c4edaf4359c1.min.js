(()=>{var gl=Object.defineProperty;var u=(z,A)=>gl(z,"name",{value:A,configurable:!0});(globalThis.webpackChunkwebapp=globalThis.webpackChunkwebapp||[]).push([["client-boot"],{983107878:(z,A,e)=>{z.exports=e.p+"ava_0002-192-0ddd598.png"},2256285620:(z,A,e)=>{z.exports=e.p+"ava_0002-24-f65dddc.png"},6906793909:(z,A,e)=>{z.exports=e.p+"ava_0002-32-798f043.png"},1060768686:(z,A,e)=>{z.exports=e.p+"ava_0002-48-d3ba4ec.png"},2979422297:(z,A,e)=>{z.exports=e.p+"ava_0002-72-c702398.png"},3224273568:(z,A,e)=>{z.exports=e.p+"ava_0022-192-0cc433a.png"},2316786074:(z,A,e)=>{z.exports=e.p+"ava_0022-24-21468d4.png"},3708998647:(z,A,e)=>{z.exports=e.p+"ava_0022-32-7779579.png"},5098468056:(z,A,e)=>{z.exports=e.p+"ava_0022-48-93db11d.png"},4923972147:(z,A,e)=>{z.exports=e.p+"ava_0022-72-5a52d67.png"},7752974446:(z,A,e)=>{z.exports=e.p+"emoji_missing-39b2f0a.png"},5908540923:(z,A,e)=>{z.exports=e.p+"No_Background-ad3fcdb.png"},4553218033:(z,A,e)=>{z.exports=e.p+"beach-preview-33d7acf.jpg"},9679390338:(z,A,e)=>{z.exports=e.p+"beach-33258eb.jpg"},7000154057:(z,A,e)=>{z.exports=e.p+"gym-preview-cfff9c8.jpg"},553949882:(z,A,e)=>{z.exports=e.p+"gym-4d948fc.jpg"},9631995895:(z,A,e)=>{z.exports=e.p+"home-preview-8baaf03.jpg"},3342291988:(z,A,e)=>{z.exports=e.p+"home-9e29930.jpg"},1779488764:(z,A,e)=>{z.exports=e.p+"huddle-in-thread-da71b0e.png"},3607863955:(z,A,e)=>{z.exports=e.p+"living_room-preview-1b54428.jpg"},5738074488:(z,A,e)=>{z.exports=e.p+"living_room-a4fba85.jpg"},7485089530:(z,A,e)=>{z.exports=e.p+"office-preview-de46de4.jpg"},5475210953:(z,A,e)=>{z.exports=e.p+"office-98668ce.jpg"},8514307482:(z,A,e)=>{z.exports=e.p+"remote_work-preview-5fbbc32.jpg"},4136357865:(z,A,e)=>{z.exports=e.p+"remote_work-f8cd791.jpg"},7234375712:(z,A,e)=>{z.exports=e.p+"tokyo_sight-preview-3554da9.jpg"},1672115571:(z,A,e)=>{z.exports=e.p+"tokyo_sight-285d851.jpg"},2527471159:(z,A,e)=>{z.exports=e.p+"slack-salesforce-211570d.png"},7972463975:(z,A,e)=>{z.exports=e.p+"slack-salesforce@2x-06b5868.png"},2301861866:(z,A,e)=>{z.exports=e.p+"slack_logo-ebd02d1.svg"},9994038664:(z,A,e)=>{z.exports=e.p+"slack_logo_white_text-3cffbf2.svg"},3431559584:(z,A,e)=>{z.exports=e.p+"slackbot_fancy_1024-9020761.png"},2200759559:(z,A,e)=>{z.exports=e.p+"slackbot_fancy_192-fc3f24d.png"},8390767423:(z,A,e)=>{z.exports=e.p+"slackbot_fancy_20-e2d1dcb.png"},1957386787:(z,A,e)=>{z.exports=e.p+"slackbot_fancy_24-e726b64.png"},4245237474:(z,A,e)=>{z.exports=e.p+"slackbot_fancy_32-176771b.png"},7523979550:(z,A,e)=>{z.exports=e.p+"slackbot_fancy_36-d921f9d.png"},7272988726:(z,A,e)=>{z.exports=e.p+"slackbot_fancy_360-29e9a8a.png"},77360885:(z,A,e)=>{z.exports=e.p+"slackbot_fancy_48-8220eaf.png"},2261459203:(z,A,e)=>{z.exports=e.p+"slackbot_fancy_512-8ab1a43.png"},451984622:(z,A,e)=>{z.exports=e.p+"slackbot_fancy_72-9db8807.png"},7428983508:(z,A,e)=>{z.exports=e.p+"slackbot_frowny_1024-f558ba5.png"},669259003:(z,A,e)=>{z.exports=e.p+"slackbot_frowny_192-a0b99ba.png"},4165874747:(z,A,e)=>{z.exports=e.p+"slackbot_frowny_20-96acbec.png"},1023719767:(z,A,e)=>{z.exports=e.p+"slackbot_frowny_24-2246c7b.png"},3710970638:(z,A,e)=>{z.exports=e.p+"slackbot_frowny_32-8a50a23.png"},4814900690:(z,A,e)=>{z.exports=e.p+"slackbot_frowny_36-a7f6cbd.png"},7331486018:(z,A,e)=>{z.exports=e.p+"slackbot_frowny_360-1cb4740.png"},7183565897:(z,A,e)=>{z.exports=e.p+"slackbot_frowny_48-fdccd8c.png"},1001408479:(z,A,e)=>{z.exports=e.p+"slackbot_frowny_512-955a74f.png"},1889110914:(z,A,e)=>{z.exports=e.p+"slackbot_frowny_72-6d65a0f.png"},9948433110:(z,A,e)=>{z.exports=e.p+"slackbot_neutral_1024-b58a548.png"},4948097913:(z,A,e)=>{z.exports=e.p+"slackbot_neutral_192-e5cd9a1.png"},350135845:(z,A,e)=>{z.exports=e.p+"slackbot_neutral_20-00a116e.png"},474239361:(z,A,e)=>{z.exports=e.p+"slackbot_neutral_24-9a05991.png"},1302153452:(z,A,e)=>{z.exports=e.p+"slackbot_neutral_32-44a4c24.png"},9825918216:(z,A,e)=>{z.exports=e.p+"slackbot_neutral_36-c6ff0eb.png"},5908867676:(z,A,e)=>{z.exports=e.p+"slackbot_neutral_360-7309dbd.png"},3333214639:(z,A,e)=>{z.exports=e.p+"slackbot_neutral_48-9906623.png"},2295488157:(z,A,e)=>{z.exports=e.p+"slackbot_neutral_512-dcb310c.png"},5156772208:(z,A,e)=>{z.exports=e.p+"slackbot_neutral_72-79b9eaa.png"},4063699741:(z,A,e)=>{z.exports=e.p+"slackbot_sad_surprise_1024-337ff51.png"},9241168512:(z,A,e)=>{z.exports=e.p+"slackbot_sad_surprise_192-3c6a8ea.png"},3963460214:(z,A,e)=>{z.exports=e.p+"slackbot_sad_surprise_20-5bfbe5a.png"},9267813754:(z,A,e)=>{z.exports=e.p+"slackbot_sad_surprise_24-d519530.png"},2981982679:(z,A,e)=>{z.exports=e.p+"slackbot_sad_surprise_32-5479e94.png"},9833689275:(z,A,e)=>{z.exports=e.p+"slackbot_sad_surprise_36-6982f8c.png"},4840951141:(z,A,e)=>{z.exports=e.p+"slackbot_sad_surprise_360-aff835a.png"},9777215928:(z,A,e)=>{z.exports=e.p+"slackbot_sad_surprise_48-7871f8b.png"},7129884748:(z,A,e)=>{z.exports=e.p+"slackbot_sad_surprise_512-c8291ff.png"},9602720019:(z,A,e)=>{z.exports=e.p+"slackbot_sad_surprise_72-ffaf19c.png"},5672691263:z=>{z.exports={container:"container__oDwNj",primaryIcon:"primaryIcon__aDIDO",secondaryIcon:"secondaryIcon__KuIYv"}},7573583373:z=>{z.exports={proBadge:"proBadge__a6OQu",container:"container__lJGtV",alertBanner:"alertBanner__xNhoq",cta:"cta__tEXdP"}},3416652175:z=>{z.exports={spaceNameContainer:"spaceNameContainer__Up4ES",spaceName:"spaceName__e2eNG",notificationName:"notificationName__PLxJo",notificationList:"notificationList__K7YI_",formError:"formError__RF0wt",textArea:"text-area__GqSis",alert:"alert__gmI86",alertText:"alertText__WNqBZ"}},397939223:z=>{z.exports={dispatcherViewer:"dispatcherViewer__MqLHN",container:"container__JbqvN",dispatcherViewerIcon:"dispatcherViewerIcon__TTCBH",xDispatcher__viewer_iconPulse:"x-dispatcher__viewer_icon--pulse__rzHrs",dispatcherViewerDetails:"dispatcherViewerDetails__HF2Tz"}},3346098136:(z,A,e)=>{"use strict";e.d(A,{A:()=>T,T:()=>m});var t=e(3134334389),n=e(9391594207),s=e(2322735331),a=e(735940183),c=e(6839188756),o=e(3677514771),r=e(8847766420),l=e(581167618),_=e(5536692738),d=e(6117529990);const i=new a.Ay("enterprise_calls");var m;(function(I){I.GLOBAL="GLOBAL",I.US="US"})(m||(m={}));const h=[{label:i.t("Global",{fallbackHash:"5f1184f7df96c5928092ad9c6b550699bf887826",fallbackHashNs:"enterprise_dashboard"}),value:m.GLOBAL},{label:i.t("US",{fallbackHash:"aa3093554472fd113135bed5b63e12f84c2e9fe8",fallbackHashNs:"enterprise_dashboard"}),value:m.US}];let v=u(class extends t.Component{render(){const{appsState:p,featureCallsLocationLock:g,isLockedByOrgAdmin:E,selectedCallLocation:f,isFreeTeam:O}=this.props,C=p&&p.video&&Object.keys(p.video).find(F=>F==="A00");if(!g||!C||O)return null;const M=h.find(F=>F.value===f),D=g?i.t("Slack Calls will be restricted and routed through selected regions only."):"Slack Calls will be restricted and routed through selected regions only.",P=g?i.t("Call location options"):"Call location options",k=g?i.t("Limiting to certain regions may reduce call performance or block joining calls in some circumstances."):"Limiting to certain regions may reduce call performance or block joining calls in some circumstances.",x=g?i.t("Slack calls are restricted by Org admin"):"Slack calls are restricted by Org admin";return t.createElement(t.Fragment,null,t.createElement("div",{"data-qa":"calls-location-container",className:"border_top padding_top_100 p-calls_location_lock__container"},t.createElement("span",{className:"p-calls_location_lock__title"},g?i.t("Calls location"):"Calls location"),t.createElement("span",{className:"p-calls_location_lock__description"},D),t.createElement("div",{className:"p-calls_location_lock__options_container"},t.createElement(_.Ay,{className:"p-calls_location_lock__options",size:"medium",isDisabled:E,options:h,selectedOption:M,onOptionSelected:this.handleOptionSelected,ariaLabel:P}),E&&t.createElement("span",{className:"p-calls_location_lock__options_disable_reason"},x))),f===m.US&&t.createElement(l.Ay,{type:l.QE.boxed,level:l.A_.warning,icon:"warning",align:l.AO.left,className:"p-calls_location_lock__alert"},t.createElement("span",null,k)))}handleOptionSelected(p){this.props.setSelectedCallLocation(p.value)}constructor(p){super(p),(0,s.v)(this,["handleOptionSelected"])}},"CallsRegionLockOptions");v.displayName="CallsRegionLockOptions";const y=u(I=>{const p=(0,r.jV)(I);return{isFreeTeam:!(0,c.qR)((0,o.H7)(I))&&!p,featureCallsLocationLock:(0,d.XY)(I)}},"mapStateToProps"),T=(0,n.N)(y)(v)},1223723593:(z,A,e)=>{"use strict";e.d(A,{wl:()=>ve,JG:()=>G,uy:()=>_e,bM:()=>ae,Ox:()=>he,A9:()=>Q,fD:()=>Ae});var t=e(3134334389),n=e(9391594207),s=e(3783303734),a=e(9113979368),c=e(3867135795),o=e(45851552),r=e(1649982175),l=e(6244014364),_=e(5795074931),d=e(8462077367),i=e(7138682671),m=e(3165300465),h=e(581167618),v=e(1610251172),y=e(3989454579),T=e(1743656885),I=e(5597672932),p=e(6117529990);const g=u(b=>!(0,p.BD)(b),"isOrgCallsAppsSettingsEnabled");var E=e(766806),f=e(56548687);const O=u(b=>{let{callsApps:R,allowCalls:K,clogger:B,action:$,stepVariant:Z}=b;const re={allow_calls:K};R&&R.video&&R.video.length>0&&(re.video_call_app_ids=R.video.map(Te=>Te.id)),R&&R.audio&&R.audio.length>0&&(re.audio_call_app_ids=R.audio.map(Te=>Te.id)),R&&R.profile_field_options&&R.profile_field_options.length>0&&(re.profile_field_option_ids=R.profile_field_options.map(Te=>Te.id)),B.track(l.EventId.CALLS_ADMIN_PHONE_INTEGRATION,{...re,contexts:{ui_context:{step:l.UiStep.CALLS_ADMIN_SAVE_CALLS_APPS,action:$,entry_point:"calls-workspace-admin",step_variant:Z}}})},"clogCallsApps"),C=u(b=>{let{clogger:R}=b;R.track(l.EventId.CALLS_ADMIN_PHONE_INTEGRATION,{contexts:{ui_context:{step:l.UiStep.CALLS_ADMIN_SAVE_CALLS_APPS,action:l.UiAction.LEARN_MORE,is_primary_cta:!0,ui_properties:{element_type:l.ElementType.LINK,element_name:"calls-admin-save-multiple-call-apps"}}}})},"clogLinkToPaidPlans");var M=e(1031947056);const D=(0,M.Ay)("Clog a standardized click event when a workspace setting is saved",(b,R,K)=>{let{eventId:B,uiStep:$,stepVariant:Z}=K;(0,f.e)({getState:R}).track(B,{contexts:{ui_context:{ui_step:$,step_variant:Z,ui_properties:{element_type:l.ElementType.BUTTON,element_name:"submit_button"},action:l.UiAction.CLICK,is_primary_cta:!0}}})});D.meta={name:"createThunk",key:"createThunkclogWorkspaceSettingSubmit",description:"Clog a standardized click event when a workspace setting is saved"};const P=D;var k=e(3677514771),x=e(6839188756),F=e(6323355797),W=e(980293773),Y=e(735940183),S=e(3346098136),L=e(462591818);const w=new Y.Ay("calls_admin"),J="only_available_for_paid_teams";var G;(function(b){b.Video="video",b.Audio="audio",b.ProfileFieldOptions="profile_field_options"})(G||(G={}));const X=u(b=>{let{type:R,app:K,isChecked:B,onChangeCallApp:$,isLocked:Z}=b;const re=(0,t.useCallback)(()=>$(R,K.id),[$,R,K]),Te=`${R}_${K.id}`;return t.createElement(i.A,{text:K.name,type:"inline",cursor:"pointer"},t.createElement(y.A,{id:Te,name:K.name,checked:B,onChange:re,disabled:Z,"data-qa":Te}))},"AppCheckbox");X.displayName="AppCheckbox";const te=u(b=>{let{appsState:R,isLocked:K,type:B}=b;return!K||!R?!1:B===G.Video&&(0,s.A)(R.video)>0&&(0,s.A)(R.audio)===0||(B===G.Audio&&(0,s.A)(R.audio)>0&&(0,s.A)(R.video))===0},"disableTypeCheckbox"),le=u(b=>{let{appsState:R,isLocked:K,appId:B,type:$}=b;if(!K||!R)return!1;const Z=R.video?Object.keys(R.video):[],re=R.audio?Object.keys(R.audio):[],Te=Z.length+re.length;if(B&&Te===1){let Ce,Pe;return Z.length===1?(Ce=Z[0],Pe=G.Video):re.length===1&&(Ce=re[0],Pe=G.Audio),B===Ce&&$===Pe}return!1},"disableAppCheckbox"),ve=u(b=>{let{type:R,sectionTitle:K,appsState:B,installedCallApps:$,onChangeCallType:Z,onChangeCallApp:re,isLocked:Te,dataQa:Ce}=b;if(!$||!B||!$[R])return null;const Pe=`enable_${R}_calls`;return t.createElement("div",{className:`p-calls_workspace_settings__${R}_container`,"data-qa":Ce},t.createElement(i.A,{text:K,type:"inline",cursor:"pointer"},t.createElement(y.A,{checked:!(0,a.A)(B[R]),id:Pe,name:Pe,onChange:Z,disabled:te({appsState:B,isLocked:Te,type:R})})),t.createElement("p",{className:"p-calls_workspace_settings__options_title"},w.t("Calling options:")),t.createElement("div",{className:"p-calls_workspace_settings__calls_apps"},[...$[R]].map(fe=>t.createElement(X,{app:fe,isChecked:(0,c.A)(B[R],fe.id),key:`${R}_${fe.id}`,onChangeCallApp:re,type:R,isLocked:le({appsState:B,isLocked:Te,appId:fe.id,type:R})}))))},"CallSection");ve.displayName="CallSection";const Q=u(b=>{let{installedCallApps:R,appsState:K,appId:B,type:$,setAppsState:Z}=b;if(!R||!K)return;const re={...K[$]};if((0,c.A)(re,B))delete re[B],Z({...K,[$]:re});else{const Te=(0,o.A)(R[$],Ce=>Ce.id===B);Te>-1&&(re[B]=Te,Z({...K,[$]:re}))}},"toggleCallApp"),Ae=u(b=>{let{installedCallApps:R,appsState:K,type:B,setAppsState:$}=b;if(!(!K||!R))if(!(0,a.A)(K[B]))$({...K,[B]:{}});else{var Z;const re={};(Z=R[B])===null||Z===void 0||Z.forEach((Te,Ce)=>{re[Te.id]=Ce}),$({...K,[B]:re})}},"toggleCallType"),ae=u((b,R)=>{const K={video:{},audio:{},profile_field_options:{}};return!R||!b||[G.Video,G.Audio,G.ProfileFieldOptions].forEach(B=>{R[B]&&[...R[B]].forEach(Z=>{const re=(0,o.A)(b[B],Te=>Te.id===Z.id);re>-1&&(K[B][Z.id]=re)})}),K},"reduceTeamPrefApps"),he=u(function(){let{installedCallApps:b,appsState:R}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const K={video:[],audio:[]};return!b||!R||[G.Video,G.Audio].forEach(B=>{if(b[B]){const $=[...b[B]],Z=R[B];$.forEach(re=>{if((0,c.A)(Z,re.id)){var Te;(Te=K[B])===null||Te===void 0||Te.push((0,r.A)(re,"preselected"))}})}}),K},"setCallsAppsPayloadToSave"),_e=u(b=>{if(!b||!b.video)return;const R=b.video.findIndex(K=>K.id===L.rq);R>=0&&b.video.splice(R,1)},"filterNativeCallsApp"),ee=u(b=>{let{isOpen:R,closeModal:K,errorMessage:B,buttonLabel:$}=b;return t.createElement(W.dW,{centered:!0,isOpen:R,closeModal:K},t.createElement(W.$m,{className:"p-calls_workspace_settings__error_modal"},t.createElement(W.qf,null,t.createElement("p",null,B))),t.createElement(W.jl,null,t.createElement(W.ox,null,t.createElement(W.s_,{type:"outline",onClick:K},$))))},"ErrorModal");ee.displayName="ErrorModal";const de=u(b=>{let{installedCallApps:R,teamPrefCallsApps:K,setMultipleTeamPrefsByApi:B,clogWorkspaceSettingSubmit:$,isLocked:Z,isCallsSelectorDisabled:re,clogger:Te,isOrgCallsAppsSettingsEnabled:Ce,team:Pe,isCallsLocationLockedByOrgAdmin:fe,callsLocationLocked:pe}=b;const[q,se]=(0,t.useState)(!1),[ge,Oe]=(0,t.useState)(""),Le=w.t("Save"),We=w.t("Saved"),Re=w.t("Sorry! Something went wrong. Please try again."),we=w.t("Allow third-party calls in Slack"),Je=w.t("Allow phone number calls in Slack (only in direct messages)"),it=w.t("Ok"),et=w.t("Sorry, call selection is currently managed by your organization admin."),lt=w.rt("First install a <a>calling app from our app directory</a> then come back here to enable it as a default calling app.",{},Ht=>{let{text:Bt}=Ht;return t.createElement(T.A,{articleId:208492868},Bt)}),nt=(0,t.useCallback)(()=>{C({clogger:Te}),(0,x.gC)(Pe,(0,F.hZ)({entryPoint:"calls-admin-workspace-settings"}))},[Te,Pe]),at=w.rt("Sorry, this feature is only available to <a>paid teams</a>.",{fallbackHash:"48faa2ac6ac6d273cd7dacbe15a5b6f7e1822087"},Ht=>{let{text:Bt}=Ht;return t.createElement("a",{href:"#",onClick:nt,"data-qa":"paid_plan_page_link"},Bt)}),ze=K?ae(R,K):{video:{},audio:{},profile_field_options:{}},[Ke,He]=(0,t.useState)(ze),[Ye,_t]=(0,t.useState)(!1),[vt,Tt]=(0,t.useState)(!1),Lt=pe&&pe.length>0?S.T.US:S.T.GLOBAL,[ft,mt]=(0,t.useState)(Lt);(0,t.useEffect)(()=>{const Ht=ae(R,K);He(Ht)},[He,R,K]);const Yt=(0,t.useCallback)(Ht=>{Tt(!1),Ae({installedCallApps:R,appsState:Ke,type:Ht,setAppsState:He})},[R,Ke,He]),nn=(0,t.useCallback)(()=>Yt(G.Video),[Yt]),jt=(0,t.useCallback)(()=>Yt(G.Audio),[Yt]),gn=(0,t.useCallback)(()=>se(!1),[se]),on=(0,t.useCallback)((Ht,Bt)=>{Tt(!1),Q({installedCallApps:R,appsState:Ke,appId:Bt,type:Ht,setAppsState:He})},[R,Ke,He]),Xt=(0,t.useCallback)(Ht=>{mt(Ht),Tt(!1)},[mt]),rn=u(()=>{_t(!0),$({eventId:l.EventId.ADMIN_TEAM_SETTINGS,uiStep:"change_enable_calls"});const Ht=!(0,a.A)(Ke.video)||!(0,a.A)(Ke.audio),Bt=he({installedCallApps:R,appsState:Ke}),Qt={calls_apps:Bt};(0,x.r7)(Pe)||(Qt.allow_calls=Ht),fe||(Qt.calls_locations=ft===S.T.US?[ft]:[]),B({prefs:Qt}).then(()=>{Tt(!0),O({callsApps:Bt,allowCalls:Ht,clogger:Te,action:l.UiAction.SAVE})}).catch(sn=>{var Mn;se(!0),(sn==null||(Mn=sn.data)===null||Mn===void 0?void 0:Mn.error)===J?(Oe(at),O({callsApps:Bt,allowCalls:Ht,clogger:Te,action:l.UiAction.ERROR,stepVariant:J})):(Oe(Re),O({callsApps:Bt,allowCalls:Ht,clogger:Te,action:l.UiAction.ERROR}))}).finally(()=>_t(!1))},"onSubmit"),Zt=R&&(R.video&&R.video.length>0||R.audio&&R.audio.length>0);return t.createElement("div",{key:"calls_workspace_settings",className:"p-calls_workspace_settings"},re&&Ce?t.createElement(h.Ay,{type:"boxed",level:"info",icon:"info",align:"left","data-qa":"org_calls_apps_alert_selector_disabled"},t.createElement("span",null,et)):t.createElement(t.Fragment,null,!Zt&&t.createElement(h.Ay,{type:"boxed",level:"info",icon:"info",align:"left"},t.createElement("span",null,lt)),t.createElement("div",{className:"p-calls_workspace_settings__call_options"},R&&R.video&&R.video.length>0&&t.createElement(ve,{type:G.Video,sectionTitle:we,appsState:Ke,installedCallApps:R,onChangeCallType:nn,onChangeCallApp:on,isLocked:Z}),R&&R.audio&&R.audio.length>0&&t.createElement(ve,{type:G.Audio,sectionTitle:Je,appsState:Ke,installedCallApps:R,onChangeCallType:jt,onChangeCallApp:on,isLocked:Z})),t.createElement(S.A,{appsState:Ke,isLockedByOrgAdmin:fe,selectedCallLocation:ft,setSelectedCallLocation:Xt}),t.createElement(ee,{closeModal:gn,isOpen:q,errorMessage:ge,buttonLabel:it}),Zt&&t.createElement(m.A,{onClick:rn,loading:Ye,"data-qa":"call_save_button"},vt&&t.createElement(v.A,{type:"check-circle-o",className:"p-calls_workspace_settings_check_icon"}),vt?We:Le)))},"CallsWorkspaceSettings");de.displayName="CallsWorkspaceSettings";const Ie=u(b=>{const R=(0,_.tV)(b,"calls_apps");_e(R);const K=(0,I.x)(b,"calls_apps"),B=(0,E.SI)(b,"calls_locations");return{installedCallApps:R,teamPrefCallsApps:K,clogger:(0,f.e)({state:b}),isOrgCallsAppsSettingsEnabled:g(b),team:(0,k.H7)(b),isCallsLocationLockedByOrgAdmin:!!B&&B.length>0,callsLocationLocked:(0,I.x)(b,"calls_locations")}},"mapStateToProps"),ce={setMultipleTeamPrefsByApi:d.hz,clogWorkspaceSettingSubmit:P},j={toggleCallApp:Q,toggleCallType:Ae,AppCheckbox:X,reduceTeamPrefApps:ae,setCallsAppsPayloadToSave:he,disableTypeCheckbox:te,disableAppCheckbox:le},N=(0,n.N)(Ie,ce)(de)},6909784049:(z,A,e)=>{"use strict";e.d(A,{o:()=>at});var t=e(3134334389),n=e(9391594207),s=e(166097325),a=e(3300324857),c=e(462591818),o=e(8869734951),r=e(1641606663);function l(){return l=Object.assign||function(ze){for(var Ke=1;Ke<arguments.length;Ke++){var He=arguments[Ke];for(var Ye in He)Object.prototype.hasOwnProperty.call(He,Ye)&&(ze[Ye]=He[Ye])}return ze},l.apply(this,arguments)}u(l,"_extends");let _=u(class extends t.PureComponent{componentDidMount(){var Ke;(Ke=this.context.windowRef.deref())===null||Ke===void 0||Ke.document.addEventListener("mouseup",this.onMouseUp)}componentWillUnmount(){var Ke;this.isDragging&&this.onMouseUp(),(Ke=this.context.windowRef.deref())===null||Ke===void 0||Ke.document.removeEventListener("mouseup",this.onMouseUp)}onMouseDown(Ke){var He;Ke.button===0&&(this.isDragging=!0,(He=this.context.windowRef.deref())===null||He===void 0||He.document.addEventListener("mousemove",this.onMouseMove),this.props.onDragStart(Ke))}onMouseMove(Ke){Ke.button===0&&this.isDragging&&this.props.onDragMove(Ke)}onMouseUp(Ke){if(Ke&&Ke.button!==0)return;const He=this.isDragging;if(this.isDragging=!1,He){var Ye;(Ye=this.context.windowRef.deref())===null||Ye===void 0||Ye.document.removeEventListener("mousemove",this.onMouseMove),this.props.onDragEnd(Ke)}}render(){const{children:Ke,refToForward:He,onDragStart:Ye,onDragMove:_t,onDragEnd:vt,...Tt}=this.props,Lt=t.Children.only(this.props.children);return t.cloneElement(Lt,{...Tt,onMouseDown:mt=>this.onMouseDown(mt),ref:(0,o.N)(He,Lt)})}constructor(Ke){super(Ke),this.isDragging=!1,this.onMouseMove=this.onMouseMove.bind(this),this.onMouseUp=this.onMouseUp.bind(this)}},"BaseDragTarget");_.displayName="BaseDragTarget",_.contextType=r.M;const d=t.forwardRef((ze,Ke)=>t.createElement(_,l({},ze,{refToForward:Ke})));var i=e(387328355),m=e(1031947056),h=e(2825968873);const v=(0,h.tZ)("USER-ACTIONS"),y=(0,m.Ay)("Logs user interaction with call window",(ze,Ke,He)=>{v.info(He)});y.meta={name:"createThunk",key:"createThunklogUserAction",description:"Logs user interaction with call window"};var T=e(1975685771),I=e(8405076696);function p(ze){E=J(he(ze))}u(p,"startCurve");function g(ze){const Ke=he(ze),He=G(E,Ke);return He.update_status==F.SUCCESS?He:G(E,Ke)}u(g,"addToCurve");let E;const f=2,O=9,C=9,M=50,D=80,P=1,k=!0,x=!0,F={SUCCESS:1,FAIL_CORNER:2,FAIL_MAXED:3},W=u(()=>({segments:[],vdmap:[]}),"initCurve"),Y=u((ze,Ke)=>({c0:{x:ze,y:Ke},c1:{x:ze,y:Ke},c2:{x:ze,y:Ke},c3:{x:ze,y:Ke}}),"initCurveSegment"),S=u(ze=>ze.segments[ze.segments.length-1],"getLastSegment"),L=u(ze=>ze.c3,"getLastPoint"),w=u(function(ze){return{c0:{x:ze.c0.x,y:ze.c0.y},c1:{x:ze.c1.x,y:ze.c1.y},c2:{x:ze.c2.x,y:ze.c2.y},c3:{x:ze.c3.x,y:ze.c3.y},constrain_to:ze.constrain_to==null?void 0:{x:ze.constrain_to.x,y:ze.constrain_to.y},error:ze.error||0,update_status:ze.update_status}},"copySegment"),J=u(function(ze){let{x:Ke,y:He}=ze;const Ye=W();return Ye.segments.push(Y(Ke,He)),Ye},"createCurve"),G=u(function(ze,Ke){const He=S(ze),Ye=L(He);if(R(Ke,L(He))<P)return He;if(F.SUCCESS!=He.update_status&&He.update_status!==void 0){let _t;F.FAIL_CORNER==He.update_status?_t=Y(Ye.x,Ye.y):F.FAIL_MAXED==He.update_status&&(_t=Y(Ye.x,Ye.y),_t.constrain_to=Z(le(He))),ze.vdmap=[],ze.segments.push(_t)}return X(ze,Ke)},"addToCurveImpl"),X=u(function(ze,Ke){const He=S(ze),{x:Ye,y:_t}=Ke;let vt=L(He);const Tt=w(He);if(ve(He,Ke))return He.update_status=F.FAIL_CORNER,He;He.c3={x:Ye,y:_t},He.c2={x:He.c2.x+Ye-vt.x,y:He.c2.y+_t-vt.y};const Lt=$(vt,Ke),ft=Ae(Lt),mt=de(vt,ft),Yt=de(Ke,ft),nn=ae(ce(ft,2)),jt=B(nn),gn=j(nn,jt),on=Ie(Yt,mt),Xt=B(on),rn=j(on,Xt);let Zt=mt;for(let sn=0;sn<Xt;sn++){let Mn=Zt,ct=ft;for(let yt=0;yt<jt;yt++){const{x:Rt,y:xe}=he(Mn);ze.vdmap[Rt]||(ze.vdmap[Rt]=[]),ze.vdmap[Rt][xe]==null?ze.vdmap[Rt][xe]=he(ct):ze.vdmap[Rt][xe]=_e(ze.vdmap[Rt][xe])<_e(he(ct))?ze.vdmap[Rt][xe]:he(ct),ct=de(ct,gn),Mn=de(Mn,gn)}Zt=de(Zt,rn)}const Ht=Ie(Ke,{x:O,y:O}),Bt=de(Ke,{x:O,y:O});for(let sn=Ht.x;sn<Bt.x;sn++)for(let Mn=Ht.y;Mn<Bt.y;Mn++){ze.vdmap[sn]||(ze.vdmap[sn]=[]);const ct=Ie({x:sn,y:Mn},Ke);ze.vdmap[sn][Mn]==null?ze.vdmap[sn][Mn]=ct:ze.vdmap[sn][Mn]=_e(ze.vdmap[sn][Mn])<_e(ct)?ze.vdmap[sn][Mn]:ct}let Qt=0;for(;;){let sn={x:0,y:0},Mn={x:0,y:0};for(let Rt=0;Rt<C;Rt++){const xe=Rt/C,Nt=he(re(He,xe)),Ft=te(ze,Nt),qt=ee(Ft),un=Ft.x,tt=Ft.y;let pt=1;x&&(xe<.1||xe>.9)&&(pt=10),sn.x+=xe*Math.pow(1-xe,2)*qt*un*pt,sn.y+=xe*Math.pow(1-xe,2)*qt*tt*pt,Mn.x+=Math.pow(xe,2)*(1-xe)*qt*un*pt,Mn.y+=Math.pow(xe,2)*(1-xe)*qt*tt*pt}if(x){const Rt=Ie(Q(He),He.c2),xe=Ie(Q(He),He.c1);sn=Ie(sn,ce(xe,.03)),Mn=Ie(Mn,ce(Rt,.03))}He.constrain_to&&(sn=ce(He.constrain_to,b(He.constrain_to,sn)));const ct=1;He.c1.x-=ct*sn.x*6/C,He.c1.y-=ct*sn.y*6/C,He.c2.x-=ct*Mn.x*6/C,He.c2.y-=ct*Mn.y*6/C;let yt=0;for(let Rt=0;Rt<C;Rt++){const xe=Rt/C,Nt=re(He,xe),Ft=te(ze,he(Nt));yt+=Math.pow(Ft.x,2)+Math.pow(Ft.y,2)}if(yt=yt/C,Qt++,He.error=yt,He.steps=Qt,yt<f||Qt>M)break}return Qt>M?(He.c0=Tt.c0,He.c1=Tt.c1,He.c2=Tt.c2,He.c3=Tt.c3,He.error=Tt.error,He.constrain_to=Tt.constrain_to,He.update_status=F.FAIL_MAXED,He):(He.update_status=F.SUCCESS,He)},"updateDistanceField"),te=u(function(ze,Ke){let{x:He,y:Ye}=Ke;if(ze.vdmap[He]){const _t=ze.vdmap[He][Ye],vt=ze.vdmap[He][Ye+1];let Tt=_t!=null?{x:_t.x,y:_t.y}:{x:O,y:O};return vt&&vt.x!=null&&Math.abs(Tt.x)>Math.abs(vt.x)&&(Tt.x=vt.x),vt&&vt.y!=null&&Math.abs(Tt.y)>Math.abs(vt.y)&&(Tt.y=vt.y),Tt}else return{x:O,y:O}},"getDistanceFromPolyline"),le=u(function(ze){const Ke=ze.c3,He=ze.c2;return{x:3*(He.x-Ke.x),y:3*(He.y-Ke.y)}},"getCurveEndTangent"),ve=u(function(ze,Ke){if(N(ze.c0,ze.c3))return!1;let He;k?He=Z(Ie(re(ze,.95),ze.c3)):He=Z(le(ze));const Ye=Z({x:Ke.x-ze.c3.x,y:Ke.y-ze.c3.y}),_t=b(He,Ye);if(K(Math.acos(_t))<D)return!0},"checkCorner"),Q=u(ze=>de(j(Ie(ze.c3,ze.c0),2),ze.c0),"getSegmentMidpoint"),Ae=u(ze=>({x:ze.x*O,y:ze.y*O}),"getScaledVectorDifference"),ae=u(ze=>({x:-ze.x,y:-ze.y}),"negateVec"),he=u(ze=>({x:Math.round(ze.x),y:Math.round(ze.y)}),"roundVec"),_e=u(ze=>Math.pow(ze.x,2)+Math.pow(ze.y,2),"sumOfSquaresVec"),ee=u(ze=>Math.sqrt(_e(ze)),"magnitudeVec"),de=u((ze,Ke)=>({x:ze.x+Ke.x,y:ze.y+Ke.y}),"addVec"),Ie=u((ze,Ke)=>de(ze,ae(Ke)),"subVec"),ce=u((ze,Ke)=>({x:ze.x*Ke,y:ze.y*Ke}),"multVec"),j=u((ze,Ke)=>ce(ze,1/Ke),"divVec"),N=u((ze,Ke)=>ze.x==Ke.x&&ze.y==Ke.y,"equalVec"),b=u((ze,Ke)=>ze.x*Ke.x+ze.y*Ke.y,"dotProduct"),R=u(function(ze){let{x:Ke,y:He}=ze,Ye=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{x:0,y:0};return Math.sqrt(Math.pow(Ke-Ye.x,2)+Math.pow(He-Ye.y,2))},"getMagnitude"),K=u(ze=>ze*180/Math.PI,"radiansToDegrees"),B=u(ze=>Math.max(Math.abs(ze.x),Math.abs(ze.y)),"getDDASteps"),$=u((ze,Ke)=>{const He=Ke.x-ze.x,_t=Ke.y-ze.y,vt=-He;return Z({x:_t,y:vt})},"getPerpindicularUnitVector"),Z=u(function(ze){let{x:Ke,y:He}=ze;const Ye=R({x:Ke,y:He});return{x:Ke/Ye,y:He/Ye}},"getUnitVector"),re=u(function(ze,Ke){const He=Te(Ke,ze.c0.x,ze.c1.x,ze.c2.x,ze.c3.x),Ye=Te(Ke,ze.c0.y,ze.c1.y,ze.c2.y,ze.c3.y);return{x:He,y:Ye}},"getPointAlongCurve"),Te=u(function(ze,Ke,He,Ye,_t){return Ke*Math.pow(1-ze,3)+He*3*ze*Math.pow(1-ze,2)+Ye*3*Math.pow(ze,2)*(1-ze)+_t*Math.pow(ze,3)},"singleComponentBezier");function Ce(ze,Ke){return{a:ze,b:Ke}}u(Ce,"makeLineSegment");function Pe(ze,Ke){let[He,Ye]=ze,[_t,vt]=Ke;return Math.sqrt((He-_t)**2+(Ye-vt)**2)}u(Pe,"magnitude");class fe{add(Ke){return this.current?Pe(this.current.a,Ke)>.05?(this.current=Ce(this.current.b,Ke),{type:DrawMessageType.New,segment:this.current}):(this.current=Ce(this.current.a,Ke),{type:DrawMessageType.Edit,segment:this.current}):(this.current=Ce(Ke,Ke),{type:DrawMessageType.New,segment:this.current})}}u(fe,"ProgressiveEqualLengthMultilineTransformer");class pe{setTargetRect(Ke){this.targetRect=Ke}add(Ke){if(!(0,T.Z)(this.targetRect,"Need size to transform point to curve"))throw Error();const{top:He,left:Ye,width:_t,height:vt}=this.targetRect,[Tt,Lt]=[Ke[0]-Ye,Ke[1]-He];if(!this.current){p({x:Tt,y:Lt});const gn=[Tt/_t,Lt/vt];return this.current={a:gn,b:gn,c:gn,d:gn},{type:c.Sl.New,segment:this.current}}const ft=this.current,{c0:mt,c1:Yt,c2:nn,c3:jt}=g({x:Tt,y:Lt});return this.current={a:[mt.x/_t,mt.y/vt],b:[Yt.x/_t,Yt.y/vt],c:[nn.x/_t,nn.y/vt],d:[jt.x/_t,jt.y/vt]},this.current.a[0]!==ft.a[0]||this.current.a[1]!==ft.a[1]?{type:c.Sl.New,segment:this.current}:{type:c.Sl.Edit,segment:this.current}}}u(pe,"ProgressiveCurveTransformer");var q=e(5950652755),se=e(3107743571);const ge=2e3,Oe=50,Le=u(ze=>{const{onDragStart:Ke,onDragMove:He,onDragEnd:Ye,onCursorMoveStart:_t,onCursorMove:vt,onCursorMoveEnd:Tt,children:Lt}=ze,[ft,mt]=(0,t.useState)(!1),[Yt,nn]=(0,t.useState)(!1),[jt,gn]=(0,t.useState)(0),[on,Xt]=(0,t.useState)(0),rn=(0,t.useCallback)(ct=>{ct.button===0&&(mt(!0),Ke(ct))},[Ke]),Zt=(0,t.useCallback)(()=>{nn(!1),Tt()},[nn,Tt]);(0,se.Z)(()=>{Zt()},ge,[jt,on]);const Ht=(0,t.useCallback)(ct=>{if(ct.button===0){if(ft){He(ct);return}Yt||(_t(ct),nn(!0)),vt(ct),gn(ct.movementX),Xt(ct.movementY)}},[Yt,ft,vt,_t,He]),Bt=(0,q.A)(Ht,Oe,{leading:!0}),Qt=(0,t.useCallback)(ct=>{Bt(ct)},[Bt]),sn=(0,t.useCallback)(ct=>{if(ct&&ct.button!==0)return;const yt=ft;mt(!1),yt&&Ye(ct)},[ft,Ye]),Mn=(0,t.useCallback)(ct=>{const yt=ft;mt(!1),yt?Ye(ct):Yt&&Tt()},[ft,Ye,Yt,Tt]);return t.createElement("div",{onMouseDown:rn,onMouseMove:Qt,onMouseUp:sn,onMouseLeave:Mn,"aria-hidden":"true"},Lt)},"HuddlesCursorTarget");Le.displayName="HuddlesCursorTarget";const We=t.memo(Le);var Re=e(8558782493),we=e(6244014364);function Je(){return Je=Object.assign||function(ze){for(var Ke=1;Ke<arguments.length;Ke++){var He=arguments[Ke];for(var Ye in He)Object.prototype.hasOwnProperty.call(He,Ye)&&(ze[Ye]=He[Ye])}return ze},Je.apply(this,arguments)}u(Je,"target_extends");let it=u(class extends t.Component{componentDidMount(){this.onResize()}shouldComponentUpdate(Ke,He){return!(0,s.A)(this.props,Ke)||!(0,s.A)(this.state,He)}componentDidUpdate(Ke){(0,s.A)(Ke.targetRect,this.props.targetRect)||this.onResize()}onResize(){var Ke;if(!(!((Ke=this.props.refToForward)===null||Ke===void 0)&&Ke.current))return;const He=(0,I.n)(this.props.targetRect);this.props.refToForward.current.style.height=He.height,this.props.refToForward.current.style.width=He.width,this.props.refToForward.current.style.top=He.top,this.props.refToForward.current.style.left=He.left,this.props.refToForward.current.style.position=He.position}getCursorCoordinates(Ke){return this.props.useHuddlesDragTarget?[Ke.nativeEvent.offsetX,Ke.nativeEvent.offsetY]:[Ke.pageX,Ke.pageY]}onDragStart(Ke){this.multilineTransformer=new pe,this.props.useHuddlesDragTarget?this.multilineTransformer.setTargetRect({top:0,left:0,width:this.props.targetRect.width,height:this.props.targetRect.height}):this.multilineTransformer.setTargetRect(this.props.targetRect),a.A.publish({id:"self",type:c.Sl.ChangeHue,hue:this.props.hue,...this.props.itemId&&{itemId:this.props.itemId}}),a.A.publish({id:"self",...this.multilineTransformer.add(this.getCursorCoordinates(Ke)),...this.props.itemId&&{itemId:this.props.itemId}}),this.props.logDrawingAction("Draw start"),this.setState(()=>({showCursor:!1}))}onDragMove(Ke){(0,T.Z)(this.multilineTransformer,"Need transformer to draw")&&a.A.publish({id:"self",...this.multilineTransformer.add(this.getCursorCoordinates(Ke)),...this.props.itemId&&{itemId:this.props.itemId}})}onDragEnd(Ke){a.A.publish({id:"self",type:c.Sl.End,...this.props.itemId&&{itemId:this.props.itemId}}),this.props.logDrawingAction("Draw stop"),this.setState(()=>({showCursor:!0})),this.props.useHuddlesDragTarget&&(0,Re.k)(we.EventId.HUDDLES_SCREENSHARE_INTERACTION,{contexts:{ui_context:{action:we.UiAction.CLICK,ui_properties:{element_name:"screenshare_draw"}}}})}onCursorMoveStart(){a.A.publish({id:"self",type:c.Sl.ChangeHue,hue:this.props.hue,...this.props.itemId&&{itemId:this.props.itemId}})}onCursorMove(Ke){const He=this.getCursorCoordinates(Ke),Ye=He[0]/this.props.targetRect.width,_t=He[1]/this.props.targetRect.height;a.A.publish({id:"self",type:c.Sl.Position,x:Ye,y:_t,...this.props.itemId&&{itemId:this.props.itemId}}),this.setState(()=>({showCursor:!0}))}onCursorMoveEnd(){a.A.publish({id:"self",type:c.Sl.End,...this.props.itemId&&{itemId:this.props.itemId}}),this.setState(()=>({showCursor:!1}))}render(){return this.props.useHuddlesDragTarget?t.createElement(We,{onDragStart:this.onDragStart,onDragMove:this.onDragMove,onDragEnd:this.onDragEnd,onCursorMoveStart:this.onCursorMoveStart,onCursorMove:this.onCursorMove,onCursorMoveEnd:this.onCursorMoveEnd},t.createElement("div",{ref:this.props.refToForward,className:"p-calls_draw__target_none",style:{...(0,I.n)(this.props.targetRect)}})):t.createElement(d,{onDragStart:Ke=>this.onDragStart(Ke),onDragMove:Ke=>this.onDragMove(Ke),onDragEnd:Ke=>this.onDragEnd(Ke)},t.createElement("div",{ref:this.props.refToForward,className:this.state.showCursor?"p-calls_draw__target":"p-calls_draw__target_none",style:{...(0,I.n)(this.props.targetRect)}}))}constructor(Ke){super(Ke),this.onResize=this.onResize.bind(this),this.onDragStart=this.onDragStart.bind(this),this.onDragMove=this.onDragMove.bind(this),this.onDragEnd=this.onDragEnd.bind(this),this.onCursorMoveStart=this.onCursorMoveStart.bind(this),this.onCursorMove=this.onCursorMove.bind(this),this.onCursorMoveEnd=this.onCursorMoveEnd.bind(this),this.state={showCursor:!0}}},"BaseDrawTarget");it.displayName="BaseDrawTarget";const et=u((ze,Ke)=>({hue:(0,i.Ng)(ze).drawHue}),"mapStateToProps"),lt=u(ze=>({logDrawingAction:Ke=>ze(y(Ke))}),"mapDispatchToProps"),nt=(0,n.N)(et,lt)(it),at=t.forwardRef((ze,Ke)=>t.createElement(nt,Je({refToForward:Ke},ze)))},5956851410:(z,A,e)=>{"use strict";e.d(A,{u:()=>N});var t=e(3134334389),n=e(166097325),s=e(1649982175),a=e(8571983633),c=e(8840779375),o=e(3300324857),r=e(462591818),l=e(1641606663),_=e(9391594207),d=e(5795074931),i=e(4775127335),m=e(387328355),h=e(735940183);const v=new h.Ay("calls"),y=u(b=>{let{displayName:R,id:K,userId:B,color:$}=b;return t.createElement("div",{className:"p-huddles_draw__name_tag",style:$?{background:$}:{}},t.createElement(i.Ay,{className:"p-huddles_draw__name_tag_avatar",key:K,size:24,userId:B,isInteractive:!1,tabIndex:-1}),t.createElement("div",{className:"p-huddles_draw__name_tag_text"},R))},"NameTag"),T=u((b,R)=>{let{id:K}=R;return{displayName:K==="self"?v.t("You"):(0,m.iU)(b,K),userId:K==="self"?(0,d.WR)(b):(0,m.C1)(b,K).userId}},"mapStateToProps"),I=(0,_.N)(T)(y),p=-21,g=-15,E=u(b=>{let{peerId:R,width:K,height:B,leftOffset:$,topOffset:Z,color:re,renderNameTag:Te=!0,isWindowDrawMode:Ce=!1,xWindowPosition:Pe=0,yWindowPosition:fe=0}=b;const pe=(0,t.useRef)(null);let q,se;const ge=$*K,Oe=Z*B;q=Math.round(ge+g),se=Math.round(Oe+p),Ce&&(q+=Pe,se+=fe);const Le=(0,t.useMemo)(()=>[q,se],[q,se]),We=u(Re=>{const we=pe.current;we&&(we.style.setProperty("transform",`translate(${Re[0]}px, ${Re[1]}px)`),we.style.setProperty("visibility","initial"))},"updateCursorPosition");return(0,t.useEffect)(()=>{We(Le)},[Le]),t.createElement("div",{className:"p-huddles_cursor_tracking__cursor_container"},t.createElement("div",{key:`cursor-${R}`,className:"p-huddles_cursor_tracking__cursor",ref:pe},Te&&t.createElement(I,{key:`name-tag-${R}`,id:R,color:re})))},"HuddlesCursor");E.displayName="HuddlesCursor";const f=t.memo(E,n.A);var O=e(2825968873),C=e(8405076696),M=e(8193414630);function D(b,R,K,B){return`hsla(${b}, ${R}%, ${K}%, ${B})`}u(D,"makeColorString");const P=u((b,R)=>D(b,100,75,R),"makeBaseColorString"),k=u(b=>D(b,80,50,1),"makeShadowColorString"),x=3;class F{static renderBaseStyle(R){R.lineJoin="round",R.lineCap="round",R.shadowBlur=5}startFade(){this.startedFadingTimestamp=performance.now(),this.observer.requestRenderOnNextFrame()}resetFade(){this.startedFadingTimestamp&&(delete this.startedFadingTimestamp,this.width=F.initialWidth,this.opacity=1,this.color=P(this.hue,this.opacity))}setHue(R){this.hue=R,this.color=P(this.hue,this.opacity),this.shadowColor=k(this.hue),this.observer.requestRenderOnNextFrame()}render(R){this.fade(),R.lineWidth=this.width,R.strokeStyle=this.color,R.shadowColor=this.shadowColor}fade(){if(!this.startedFadingTimestamp)return;const R=Math.min(1,(performance.now()-this.startedFadingTimestamp)/F.fadeDuration);this.width=F.initialWidth-R*x,this.opacity=1-R/1,this.color=P(this.hue,this.opacity),R<1?this.observer.requestRenderOnNextFrame():this.observer.onFadeCompleted()}getColor(){return this.color}constructor(R){this.observer=R,this.width=F.initialWidth,this.opacity=1,this.hue=0,this.color=P(this.hue,this.opacity),this.shadowColor=k(this.hue)}}u(F,"LineStyle"),F.displayName="LineStyle",F.initialWidth=7,F.fadeDuration=3e3;let W=u(class{getSegments(){return this.segments}addNewSegment(R){this.segments.push(R)}editLastSegment(R){this.segments.pop(),this.segments.push(R)}constructor(){this.segments=[]}},"ProgressivePlotter");class Y extends null{draw(R){let K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,B=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;const $=this.getSegments();R.beginPath();for(let Z=0;Z<$.length;Z++){const re=$[Z];R.moveTo(re.a[0]*K,re.a[1]*B),R.lineTo(re.b[0]*K,re.b[1]*B)}R.stroke()}}u(Y,"ProgressiveLineSegmentPlotter");class S extends W{draw(R){let K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,B=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;const $=this.getSegments();R.beginPath();for(let Z=0;Z<$.length;Z++){const re=$[Z];R.moveTo(re.a[0]*K,re.a[1]*B),R.bezierCurveTo(re.b[0]*K,re.b[1]*B,re.c[0]*K,re.c[1]*B,re.d[0]*K,re.d[1]*B)}R.stroke()}}u(S,"ProgressiveBezierCurvePlotter");const L=700,w=5e3;class J{onFadeCompleted(){this.plotter=new S,this.observer.onLineVisibilityChanged(!1),this.setLineVisibility({isFading:!1,isLineVisible:!1}),this.style.resetFade()}resetVestigialLineTimeout(){this.vestigialLineTimeout&&clearTimeout(this.vestigialLineTimeout),this.vestigialLineTimeout=window.setTimeout(this.onInactivity,w)}resetInactivityTimeout(){this.inactivityTimeout&&clearTimeout(this.inactivityTimeout),this.inactivityTimeout=window.setTimeout(this.onInactivity,L)}update(R){if(this.resetVestigialLineTimeout(),R.type===r.Sl.New)this.visibilityState.isLineVisible||this.observer.onLineVisibilityChanged(!0),this.setLineVisibility({isFading:!1,isLineVisible:!0}),this.plotter.addNewSegment(R.segment),this.style.resetFade(),clearTimeout(this.inactivityTimeout);else if(R.type===r.Sl.Edit)this.plotter.editLastSegment(R.segment);else if(R.type===r.Sl.End)this.resetInactivityTimeout();else if(R.type===r.Sl.ChangeHue)this.style.setHue(R.hue);else{if(R.type===r.Sl.Position)return;(0,M.Kh)(R.type)}this.observer.requestRenderOnNextFrame()}render(R,K,B){this.style.render(R),this.plotter.draw(R,K,B)}setLineVisibility(R){Object.assign(this.visibilityState,R)}getColor(){return this.style.getColor()}constructor(R){this.observer=R,this.plotter=new S,this.visibilityState={isLineVisible:!1,isFading:!1},this.onInactivity=()=>{this.inactivityTimeout&&clearTimeout(this.inactivityTimeout),this.vestigialLineTimeout&&clearTimeout(this.vestigialLineTimeout),!(this.visibilityState.isFading||!this.visibilityState.isLineVisible)&&(this.setLineVisibility({isFading:!0}),this.style.startFade())},this.style=new F({onFadeCompleted:()=>this.onFadeCompleted(),requestRenderOnNextFrame:()=>this.observer.requestRenderOnNextFrame()})}}u(J,"DrawLine"),J.displayName="DrawLine";const G=u(b=>{let{refToForward:R,isHidden:K,numVisibleLines:B,top:$,left:Z,width:re,height:Te,doNotApplyTargetRect:Ce}=b;if(Ce){const fe={display:K||B===0?"none":"block"};return t.createElement("canvas",{ref:R,style:fe,"data-qa":"huddles-drawing-canvas"})}const Pe={display:K||B===0?"none":"block",...(0,C.n)({left:Z,top:$,width:re,height:Te})};return t.createElement("canvas",{ref:R,style:Pe,"data-qa":"huddles-drawing-canvas"})},"Canvas");G.displayName="Canvas";const X=t.memo(G,n.A),te=new h.Ay("calls"),le=10,ve=10,Q=u(b=>{let{displayName:R,coord:[K,B]}=b;return t.createElement("div",{className:"p-calls_draw__name_tag",style:{left:`${K+le}px`,top:`${B+ve}px`}},R)},"name_tag_NameTag"),Ae=u((b,R)=>{let{id:K}=R;return{displayName:K==="self"?te.t("You"):(0,m.iU)(b,K)}},"name_tag_mapStateToProps"),ae=(0,_.N)(Ae)(Q),he=-33,_e=-9,ee=u(b=>{let{top:R,left:K,width:B,height:$,leftOffset:Z,topOffset:re,id:Te}=b;const Ce=K+Z*B,Pe=R+re*$,fe={left:`${Ce+_e}px`,top:`${Pe+he}px`},pe=(0,t.useMemo)(()=>[Ce,Pe],[Ce,Pe]);return t.createElement(t.Fragment,null,Te!=="self"&&t.createElement("div",{key:`cursor-${Te}`,className:"p-calls_draw__pencil_cursor",style:fe}),t.createElement(ae,{key:`name-tag-${Te}`,id:Te,coord:pe}))},"Cursor");ee.displayName="Cursor";const de=t.memo(ee,n.A);function Ie(){return Ie=Object.assign||function(b){for(var R=1;R<arguments.length;R++){var K=arguments[R];for(var B in K)Object.prototype.hasOwnProperty.call(K,B)&&(b[B]=K[B])}return b},Ie.apply(this,arguments)}u(Ie,"_extends");var ce;class j extends(ce=t.Component){shouldComponentUpdate(R,K){return!(0,n.A)(this.props,R)||!(0,n.A)(this.state,K)}getOrCreatePeerLine(R){return this.peerLines[R]=this.peerLines[R]||new J({requestRenderOnNextFrame:()=>this.requestRenderOnNextFrame(),onLineVisibilityChanged:K=>this.setState(B=>({numVisibleLines:B.numVisibleLines+(K?1:-1)}))}),this.peerLines[R]}onIncomingPeerLine(R){if(this.props.itemId&&R.itemId&&R.itemId!==this.props.itemId)return;const K=this.getOrCreatePeerLine(R.id);switch(K.update(R),R.type){case r.Sl.New:{this.setState(B=>{let{tagCoords:$,userColors:Z}=B;return{tagCoords:{...$,[R.id]:R.segment.d},userColors:{...Z,[R.id]:K.getColor()}}});break}case r.Sl.Edit:{this.setState(B=>{let{tagCoords:$}=B;return{tagCoords:{...$,[R.id]:R.segment.d}}});break}case r.Sl.ChangeHue:{this.setState(B=>{let{userColors:$}=B;return{userColors:{...$,[R.id]:K.getColor()}}});break}case r.Sl.End:{this.setState(B=>{let{tagCoords:$}=B;return{tagCoords:(0,s.A)($,R.id)}});break}case r.Sl.Position:{const B=[R.x,R.y];this.setState($=>{let{tagCoords:Z}=$;return{tagCoords:{...Z,[R.id]:B}}});break}default:break}}componentDidMount(){o.A.subscribe(this.onIncomingPeerLine),this.ctx=this.props.refToForward.current.getContext("2d"),this.onResize()}componentDidUpdate(R,K){R.targetRect!==this.props.targetRect&&this.onResize(),this.state.numVisibleLines<0&&(0,O.tZ)("DRAW-RENDERER").warn("Should not have a negative number of lines"),this.props.onRendererIsActive&&(this.state.numVisibleLines===0&&K.numVisibleLines>0||this.state.numVisibleLines>0&&K.numVisibleLines===0)&&this.props.onRendererIsActive(this.state.numVisibleLines!==0)}componentWillUnmount(){if(!(0,a.A)(this.rafId)){var R;(R=this.context.windowRef.deref())===null||R===void 0||R.cancelAnimationFrame(this.rafId)}o.A.unsubscribe(this.onIncomingPeerLine)}onResize(){this.ctx&&(this.ctx.canvas.width=this.props.targetRect.width,this.ctx.canvas.height=this.props.targetRect.height,F.renderBaseStyle(this.ctx),this.requestRenderOnNextFrame())}requestRenderOnNextFrame(){this.dirty||(this.dirty=!0,this.rafId=this.context.windowRef.deref().requestAnimationFrame(this.draw))}draw(){if(this.rafId=void 0,!this.ctx)return;const R=this.props.targetRect.width,K=this.props.targetRect.height;this.dirty=!1,this.ctx.clearRect(0,0,R,K);const B=Object.values(this.peerLines);for(let $=0;$<B.length;$++)B[$].render(this.ctx,R,K)}renderCursor(R,K,B){const{targetRect:$,useHuddlesCursor:Z,itemId:re,isHostDrawWindow:Te,isWindowDrawing:Ce}=this.props;if(Z){const Pe=this.state.userColors[R],fe=re!=="self",pe=Te&&Ce;return t.createElement(f,{key:R,peerId:R,topOffset:K,leftOffset:B,width:$.width,height:$.height,color:Pe,renderNameTag:fe,isWindowDrawMode:pe,xWindowPosition:$.left,yWindowPosition:$.top})}return t.createElement(de,Ie({key:R,id:R,topOffset:K,leftOffset:B},$))}render(){if(this.props.setPositionToMatchTargetRect){const{targetRect:R}=this.props,K={...(0,C.n)({left:R.left,top:R.top,width:R.width,height:R.height})};return t.createElement("div",{className:"p-calls_draw__renderer",style:K},t.createElement(X,Ie({refToForward:this.props.refToForward,isHidden:this.props.isHidden,numVisibleLines:this.state.numVisibleLines},this.props.targetRect,{doNotApplyTargetRect:!0})),(0,c.A)(this.state.tagCoords,(B,$)=>{let[Z,re]=B;return this.renderCursor($,re,Z)}))}return t.createElement("div",{className:"p-calls_draw__renderer"},t.createElement(X,Ie({refToForward:this.props.refToForward,isHidden:this.props.isHidden,numVisibleLines:this.state.numVisibleLines},this.props.targetRect)),(0,c.A)(this.state.tagCoords,(R,K)=>{let[B,$]=R;return this.renderCursor(K,$,B)}))}constructor(R){super(R),this.dirty=!1,this.peerLines={},this.onResize=this.onResize.bind(this),this.onIncomingPeerLine=this.onIncomingPeerLine.bind(this),this.draw=this.draw.bind(this),this.renderCursor=this.renderCursor.bind(this),this.state={tagCoords:{},numVisibleLines:0,userColors:{}}}}u(j,"BaseDrawRenderer"),j.displayName="BaseDrawRenderer",j.contextType=l.M;const N=t.forwardRef((b,R)=>t.createElement(j,Ie({refToForward:R},b)))},1429018002:(z,A,e)=>{"use strict";e.d(A,{A:()=>f});var t=e(3134334389),n=e(9391594207),s=e(387328355),a=e(5255740490),c=e(4096483543),o=e(8869734951),r=e(6533394955),l=e(6839101721),_=e(3395259576),d=e(2615100822),i=e(4761125736);function m(){return m=Object.assign||function(O){for(var C=1;C<arguments.length;C++){var M=arguments[C];for(var D in M)Object.prototype.hasOwnProperty.call(M,D)&&(O[D]=M[D])}return O},m.apply(this,arguments)}u(m,"_extends");let h=u(class extends t.PureComponent{componentDidMount(){this.setUpMedia(),this.updateVideoState(),this.setupInteractionObserver()}componentDidUpdate(){this.setUpMedia(),this.updateVideoState()}componentWillUnmount(){var C;const M=this.videoRef.current,{shouldAttachStream:D,tileId:P,peerId:k}=this.props;!P||!M||(this.props.unbindVideo({tileId:P,videoRef:this.videoRef,shouldDetachStream:!!D,peerId:k}),M.removeEventListener("resize",this.onResize),(C=this.interactionObserver)===null||C===void 0||C.disconnect())}setUpMedia(){const C=this.videoRef.current,{shouldAttachStream:M,tileId:D,peerId:P}=this.props;!D||!C||(this.props.bindVideo({tileId:D,videoRef:this.videoRef,shouldAttachStream:!!M,peerId:P}),C.addEventListener("resize",this.onResize))}setupInteractionObserver(){var C;if(window!=null&&window.IntersectionObserver&&this.props.unbindNonVisibleVideos&&((C=this.interactionObserver)===null||C===void 0||C.disconnect(),this.interactionObserver=new IntersectionObserver(this.interactionObserverCallback,{root:null,threshold:this.intersectionCheckThresholds}),this.videoRef.current)){var M;(M=this.interactionObserver)===null||M===void 0||M.observe(this.videoRef.current)}}interactionObserverCallback(C){const M=C[0];if(!M)return;const D=this.videoRef.current,{shouldAttachStream:P,tileId:k,peerId:x}=this.props;!k||!D||(M.intersectionRatio>this.intersectionVisibleThreshold?this.props.bindVideo({tileId:k,videoRef:this.videoRef,shouldAttachStream:!!P,peerId:x}):this.props.unbindVideo({tileId:k,videoRef:this.videoRef,shouldDetachStream:!!P,peerId:x}))}onResize(){const C=this.videoRef.current;C&&(this.props.isSharingScreen?C.style.objectFit="contain":C.style.objectFit=C.videoWidth>C.videoHeight?"cover":"contain")}updateVideoState(){const{experimentCallsPauseVideoOnScreenshareGroupTreatment:C,peerId:M,tileId:D,isActivePeerSharingScreen:P,isShroudVisible:k}=this.props;!C||!D||(M!=="self"&&P&&!k?this.props.pauseVideo({tileId:D}):this.props.unpauseVideo({tileId:D}))}render(){const{refToForward:C,shouldFlip:M,peerId:D,className:P,width:k,height:x,onLoadedData:F}=this.props;return t.createElement("video",m({className:(0,a.A)("p-calls_video",P,{flipped:M}),ref:(0,o.P)(this.videoRef,C),key:D,"data-qa":"free-willy-video-element",style:{width:k,height:x}},F?{onLoadedData:F}:{}))}constructor(C){super(C),this.videoRef=(0,t.createRef)(),this.intersectionVisibleThreshold=0,this.intersectionCheckThresholds=[0],this.onResize=C.onResize?C.onResize:this.onResize.bind(this),this.interactionObserverCallback=this.interactionObserverCallback.bind(this)}},"VideoElement");h.displayName="VideoElement";const v=u((O,C)=>{var M;const D=(0,i._Z)(O,"calls_pause_video_on_screenshare")==="treatment",P=(0,s.vz)(O),k=C.peer?(0,s.Bf)(C.peer):!1;let x;if(P)x=C.tileId;else{var F,W,Y,S,L,w;x=k?(F=C.peer)===null||F===void 0||(W=F.tileIds)===null||W===void 0||(Y=W.screenshare)===null||Y===void 0?void 0:Y.tileId:(S=C.peer)===null||S===void 0||(L=S.tileIds)===null||L===void 0||(w=L.camera)===null||w===void 0?void 0:w.tileId}return{tileId:x,peerId:(M=C.peer)===null||M===void 0?void 0:M.id,isSharingScreen:k,isShroudVisible:D&&(0,d.A)()?(0,_.pI)(O):!1,isActivePeerSharingScreen:(0,s.$Q)(O),experimentCallsPauseVideoOnScreenshareGroupTreatment:D}},"mapStateToProps"),y=u(O=>({bindVideo:C=>(0,c.A)()?(0,r.dispatchForClientStore)((0,l.d2)(C)):O((0,l.d2)(C)),unbindVideo:C=>(0,c.A)()?(0,r.dispatchForClientStore)((0,l.gJ)(C)):O((0,l.gJ)(C)),pauseVideo:C=>(0,c.A)()?(0,r.dispatchForClientStore)((0,l.WY)(C)):O((0,l.WY)(C)),unpauseVideo:C=>(0,c.A)()?(0,r.dispatchForClientStore)((0,l.D8)(C)):O((0,l.D8)(C))}),"mapDispatchToProps"),T=(0,n.N)(v,y)(h),I=t.forwardRef((O,C)=>t.createElement(T,m({refToForward:C},O)));function p(){return p=Object.assign||function(O){for(var C=1;C<arguments.length;C++){var M=arguments[C];for(var D in M)Object.prototype.hasOwnProperty.call(M,D)&&(O[D]=M[D])}return O},p.apply(this,arguments)}u(p,"peer_video_element_extends");const g=u((O,C)=>{const M=(0,s.vz)(O),D=(0,s.JZ)(O,C.id);let P;const k=C.tileId;if(!M)P=(0,s.fy)(D)&&!D.isScreenshareEnabled;else{var x,F;const W=((x=D.tileIds)===null||x===void 0||(F=x.screenshare)===null||F===void 0?void 0:F.tileId)===k;P=(0,s.fy)(D)&&!W}return{peer:D,tileId:k,shouldFlip:P}},"peer_video_element_mapStateToProps"),E=(0,n.N)(g)(I),f=t.forwardRef((O,C)=>t.createElement(E,p({},O,{refToForward:C})))},1337358413:(z,A,e)=>{"use strict";e.d(A,{Ay:()=>i,Ft:()=>l});var t=e(3134334389),n=e(5255740490),s=e(9391594207),a=e(3328068409),c=e(9009528296),o=e(9853754481);const r=15;function l(m){return Math.min(1,Math.max(0,o.Ep*m))}u(l,"getClampedAudioLevel");let _=u(class extends t.PureComponent{componentDidMount(){c.A.subscribe(this.onLevelUpdated)}componentWillUnmount(){c.A.unsubscribe(this.onLevelUpdated)}onLevelUpdated(h){const v=Math.floor(this.numBubbles*l(h));this.setState(()=>({numActiveBubbles:v,numInactiveBubbles:this.numBubbles-v}))}renderBubbles(){const{numActiveBubbles:h,numInactiveBubbles:v}=this.state,{bubbleClassname:y}=this.props,T=(0,n.A)("p-audio_levels__bubble","p-audio_levels__bubble--active",y,{"p-audio_levels__bubble--dark":this.props.clientTheme==="dark"}),I=(0,n.A)("p-audio_levels__bubble","p-audio_levels__bubble--inactive",y,{"p-audio_levels__bubble--dark":this.props.clientTheme==="dark"}),p=Array.from({length:h},(E,f)=>t.createElement("span",{key:`active${f}`,className:T})),g=Array.from({length:v},(E,f)=>t.createElement("span",{key:f,className:I}));return p.concat(g)}render(){return t.createElement("div",{className:(0,n.A)("p-audio_levels",this.props.containerClassName),"data-qa":"audio-levels-bubbles"},this.renderBubbles())}constructor(h){super(h);var v;this.numBubbles=(v=this.props.initNumBubbles)!==null&&v!==void 0?v:r;var y;this.state={numInactiveBubbles:(y=h.initNumBubbles)!==null&&y!==void 0?y:r,numActiveBubbles:0},this.onLevelUpdated=this.onLevelUpdated.bind(this)}},"AudioMeter");_.displayName="AudioMeter";const d=u(m=>({clientTheme:(0,a.to)(m)}),"mapStateToProps"),i=(0,s.N)(d)(_)},610288365:(z,A,e)=>{"use strict";e.d(A,{Ay:()=>l});var t=e(9706240641),n=e.n(t),s=e(6696292586),a=e(3398586081);class c{constructor(){this.isInitialized=!1,this.isUsingBattery=null,this.batteryLevel=null,this.isSupported=!1,this.registerListeners=()=>{var m,h;(m=this.battery)===null||m===void 0||m.addEventListener("chargingchange",this.handleBatteryUpdate),(h=this.battery)===null||h===void 0||h.addEventListener("levelchange",this.handleBatteryUpdate)},this.removeEventListeners=()=>{var m,h;(m=this.battery)===null||m===void 0||m.removeEventListener("chargingchange",this.handleBatteryUpdate),(h=this.battery)===null||h===void 0||h.removeEventListener("levelchange",this.handleBatteryUpdate)},this.handleBatteryUpdate=()=>{this.isSupported&&this.updateBatteryState()},this.updateBatteryState=()=>{this.battery&&(this.isUsingBattery=!this.battery.charging,this.batteryLevel=this.battery.level)};var d=this;this.initialize=(0,t.coroutine)(function*(){yield d.setUp(),d.updateBatteryState()});var i=this;this.setUp=(0,t.coroutine)(function*(){if(!i.isInitialized)try{if(navigator.getBattery){const m=yield navigator.getBattery();i.battery=m,i.battery&&(i.isSupported=!0,i.updateBatteryState(),i.registerListeners())}else i.isSupported=!1}catch{i.isSupported=!1}finally{i.isInitialized=!0}}),this.cleanup=()=>{this.isSupported&&this.removeEventListeners()},this.isUsingBatteryPower=()=>{if(this.isSupported)return!!this.isUsingBattery},this.getLevel=()=>{if(!(!this.isSupported||!(0,s.A)(this.batteryLevel)))return this.batteryLevel*100},this.setUp()}}u(c,"HuddleBatteryManager");const o=(0,a.A)(()=>new c),r={getHuddleBatteryManager:o,HuddleBatteryManager:c},l=o},6664301844:(z,A,e)=>{"use strict";e.d(A,{$H:()=>se,$b:()=>T,$s:()=>q,E9:()=>p,Es:()=>l,I8:()=>h,KK:()=>K,Ll:()=>te,Ls:()=>et,QJ:()=>w,Q_:()=>Le,RM:()=>fe,VW:()=>lt,XL:()=>y,Xw:()=>r,ZT:()=>Z,_R:()=>Ce,b9:()=>I,dQ:()=>_,gi:()=>O,i3:()=>R,j3:()=>it,jp:()=>S,jq:()=>Re,kM:()=>we,mn:()=>v,of:()=>Oe,px:()=>Je,uL:()=>m,vB:()=>N,w2:()=>We,wV:()=>ee,xY:()=>d,xc:()=>L,z2:()=>i,zF:()=>ve,zg:()=>Pe});var t=e(9706240641),n=e.n(t),s=e(7164668892),a=e.n(s),c=e(3305135794),o=e.n(c);let r=s.CheckAudioConnectivityFeedback,l=s.CheckAudioInputFeedback,_=s.CheckAudioOutputFeedback,d=s.CheckCameraResolutionFeedback,i=s.CheckContentShareConnectivityFeedback,m=s.CheckNetworkTCPConnectivityFeedback,h=s.CheckNetworkUDPConnectivityFeedback,v=s.CheckVideoConnectivityFeedback,y=s.CheckVideoInputFeedback,T=s.LogLevel,I=s.MeetingSessionStatusCode,p=s.TranscriptItemType,g=null;const E=null;let f=null;const O=s.AllHighestVideoBandwidthPolicy;let C,M=null,D=null;const P=s.DefaultDeviceController;let k;const x=s.DefaultMeetingReadinessChecker;let F;const W=s.DefaultMeetingSession;let Y,S=s.DefaultModality,L=s.DefaultVideoTile,w=s.MeetingSessionConfiguration,J=null,G=null,X=null,te=s.PermissionDeniedError,le=null,ve=s.Versioning,Q=null,Ae=null,ae=null,he=null,_e=null,ee=s.VoiceFocusDeviceTransformer,de=null,Ie=s.DefaultVideoTransformDevice,ce=s.BackgroundBlurVideoFrameProcessor,j=null,N=s.CSPMonitor;const b=null;let R=s.VideoFxProcessor,K=s.VideoCodecCapability,B=!1,$=!1;function Z(nt){return re.apply(this,arguments)}u(Z,"setUseExpSDK");function re(){return re=(0,t.coroutine)(function*(nt){if(B=nt,!B||$)return;const at=yield Promise.resolve().then(e.t.bind(e,3305135794,23));r=at.CheckAudioConnectivityFeedback,l=at.CheckAudioInputFeedback,_=at.CheckAudioOutputFeedback,d=at.CheckCameraResolutionFeedback,i=at.CheckContentShareConnectivityFeedback,m=at.CheckNetworkTCPConnectivityFeedback,h=at.CheckNetworkUDPConnectivityFeedback,v=at.CheckVideoConnectivityFeedback,y=at.CheckVideoInputFeedback,f=at.ClientVideoStreamReceivingReport,M=at.ConnectionHealthData,D=at.DataMessage,k=at.DefaultDeviceController,F=at.DefaultMeetingReadinessChecker,Y=at.DefaultMeetingSession,S=at.DefaultModality,L=at.DefaultVideoTile,T=at.LogLevel,w=at.MeetingSessionConfiguration,J=at.MeetingSessionStatus,I=at.MeetingSessionStatusCode,G=at.MeetingSessionVideoAvailability,X=at.MutableVideoPreferences,te=at.PermissionDeniedError,le=at.TargetDisplaySize,p=at.TranscriptItemType,g=at.TranscriptionStatusType,ve=at.Versioning,Q=at.VideoPreference,Ae=at.VideoPreferences,ae=at.VideoPriorityBasedPolicy,he=at.VideoPriorityBasedPolicyConfig,_e=at.VideoTileState,C=at.AudioProfile,ee=at.VoiceFocusDeviceTransformer,de=at.DefaultBrowserBehavior,Ie=at.DefaultVideoTransformDevice,ce=at.BackgroundBlurVideoFrameProcessor,j=at.BackgroundReplacementVideoFrameProcessor,N=at.CSPMonitor,R=at.VideoFxProcessor,K=at.VideoCodecCapability,$=!0}),re.apply(this,arguments)}u(re,"_setUseExpSDK");function Te(){return B}u(Te,"isUsingExpSDK");function Ce(){return k||P}u(Ce,"getDefaultDeviceController");function Pe(){return P}u(Pe,"getDefaultDeviceControllerDefault");function fe(){return k}u(fe,"getDefaultDeviceControllerExp");function pe(){return F||x}u(pe,"getDefaultMeetingReadinessChecker");function q(){return x}u(q,"getDefaultMeetingReadinessCheckerDefault");function se(){return F}u(se,"getDefaultMeetingReadinessCheckerExp");function ge(){return Y||W}u(ge,"getDefaultMeetingSession");function Oe(){return W}u(Oe,"getDefaultMeetingSessionDefault");function Le(){return Y}u(Le,"getDefaultMeetingSessionExp");function We(){return ee}u(We,"getVoiceFocusDeviceTransformer");function Re(){return Ie}u(Re,"getDefaultVideoTransformDevice");function we(){return ce}u(we,"getBackgroundBlurVideoFrameProcessor");function Je(){return c.BackgroundReplacementVideoFrameProcessor}u(Je,"getBackgroundReplacementVideoFrameProcessor");function it(){return s.AudioProfile}u(it,"getAudioProfileDefault");function et(){return C}u(et,"getAudioProfileExp");function lt(nt){return!!nt.type}u(lt,"isTranscriptEventTranscriptionStatus")},252549317:(z,A,e)=>{"use strict";e.d(A,{LD:()=>o,MS:()=>r,Vd:()=>_,k0:()=>l});var t=e(8571983633),n=e(571104883),s=e(9042410435);const a="4.30.79",c=[s.R.DesktopScreen,s.R.DesktopWindow];function o(){return!!(0,n.dY)(a)}u(o,"isWindowDrawingSupported");function r(d){return(0,t.A)(d)?s.f.None:d.startsWith("screen:")?s.f.Screen:d.startsWith("window:")?s.f.Window:s.f.Other}u(r,"determineContentShareTypeFromSourceId");function l(d){if(!(0,n.y3)())return s.R.BrowserContent;const i=r(d);if((0,n.y3)())switch(i){case s.f.Screen:return s.R.DesktopScreen;case s.f.Window:return s.R.DesktopWindow;default:return s.R.DesktopUnknown}return s.R.Unknown}u(l,"determineFullContentShareSourceType");function _(d){return c.includes(d)}u(_,"doesContentShareTypeSupportDrawing")},9042410435:(z,A,e)=>{"use strict";e.d(A,{R:()=>n,f:()=>t});var t;(function(s){s.Screen="screen",s.Window="window",s.Other="other",s.None="none"})(t||(t={}));var n;(function(s){s.DesktopScreen="desktop:screen",s.DesktopWindow="desktop:window",s.DesktopUnknown="desktop:unknown",s.BrowserContent="browser:content",s.MobileScreen="mobile:screen",s.Unknown="unknown"})(n||(n={}))},416787925:(z,A,e)=>{"use strict";e.d(A,{Bm:()=>_,LL:()=>r,On:()=>v,Zy:()=>o,dx:()=>c,my:()=>l,tk:()=>i});var t=e(2208015175),n=e(7174777686),s=e(8736071954),a=e(336376314);const c="default",o="communications",r=[s.lW.Microphone,s.lW.Camera,s.Q4];function l(y,T){let I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:r;(0,t.A)(T,(p,g)=>{if(!(0,n.A)(I,g))return;if(!p.length){y.warn(`No ${g} devices available`);return}const E=new a.M(["id","label"]);p.forEach(f=>{E.add([f.id,f.label].map(String))}),y.info(`${g} devices:
${E.report()}`)})}u(l,"logDevices");function _(){return{camera:[],microphone:[],output:[]}}u(_,"createEmptyDevices");const d={audioinput:s.lW.Microphone,videoinput:s.lW.Camera,audiooutput:s.Q4};function i(y){const T=d[y.kind],I={id:y.deviceId,label:y.label||void 0,groupId:y.groupId||void 0};return m(T)?{...I,type:T}:{...I,type:T}}u(i,"makeDevice");function m(y){return y!==s.Q4}u(m,"isInputDeviceType");function h(y){return m(y.type)}u(h,"isInputDevice");function v(y){return y.replace(/ *?\([^)]*?\) *?/g,"")}u(v,"removeDeviceIdFromDeviceLabel")},1473609332:(z,A,e)=>{"use strict";e.d(A,{t3:()=>r,Bh:()=>m,i4:()=>y});var t=e(9706240641),n=e(4103274853);function s(){return"0.1"}u(s,"getDevicePrefsVersion");var a=e(416787925),c=e(2825968873);const o="devicePrefs";function r(p){return(0,n.A)(p,g=>g[0])}u(r,"getPreferredDevices");function l(){return{camera:[],microphone:[a.dx,a.Zy],output:[a.dx,a.Zy]}}u(l,"createDefaultDevicePriority");function _(){return{camera:[],microphone:[],output:[]}}u(_,"createDefaultDeviceExtendedPriority");function d(){return{enableAGC:!0,enableNoiseSuppression:!0}}u(d,"createDefaultAudioPrefs");function i(){return{enableHD:!1,mirrorVideo:!1,effect:void 0}}u(i,"createDefaultVideoPrefs");function m(){const p=localStorage.getItem(o),g={version:s(),deviceIdPriorities:l(),deviceIdPrioritiesExtended:_(),video:i(),audio:d()};if(!p)return g;try{const E=JSON.parse(p);return E.version!==s()?g:{...g,...E}}catch(E){return(0,c.tZ)("DEVICES").error("Could not read device preferences from localStorage: ",E.message),g}}u(m,"readDevicePrefs");function h(p){return v.apply(this,arguments)}u(h,"updateDeviceIdPrioritiesExtended");function v(){return v=(0,t.coroutine)(function*(p){const g={},E=yield navigator.mediaDevices.enumerateDevices();for(const f of Object.keys(p)){const O=[],C=f;for(let M=0;M<p[C].length;M++){const D=p[C][M],P=E.find(k=>k.deviceId===D);P&&O.push({id:P.deviceId,groupId:P.groupId,label:P.label,labelWithoutId:(0,a.On)(P.label)})}g[f]=O}return g}),v.apply(this,arguments)}u(v,"_updateDeviceIdPrioritiesExtended");function y(p){return T.apply(this,arguments)}u(y,"writeDevicePrefs");function T(){return T=(0,t.coroutine)(function*(p){try{const g=yield h(p.deviceIdPriorities),E={...p,deviceIdPrioritiesExtended:g};localStorage.setItem(o,JSON.stringify(E))}catch(g){(0,c.tZ)("DEVICES").error("Could not write device preferences to localStorage: ",g.message)}}),T.apply(this,arguments)}u(T,"_writeDevicePrefs");function I(p,g){let E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];const f=zipObject(g,range(g.length)),O=zipObject(E.map(C=>C.labelWithoutId),range(E.length));return sortBy(p,C=>{const M=removeDeviceIdFromDeviceLabel(C.label);return isUndefined(f[C.deviceId])?isUndefined(O[M])?1/0:O[M]:f[C.deviceId]})}u(I,"sortDevicesByPriorityWithFallback")},8736071954:(z,A,e)=>{"use strict";e.d(A,{Q4:()=>t,eJ:()=>n,lW:()=>a,uT:()=>s});const t="output";var n;(function(c){c.Denied="denied",c.Granted="granted",c.NotDetermined="not-determined",c.Prompt="prompt",c.Unknown="unknown"})(n||(n={}));var s;(function(c){c.NONE="none",c.Blur="blur",c.Both="both"})(s||(s={}));var a;(function(c){c.Camera="camera",c.Microphone="microphone"})(a||(a={}))},9195837907:(z,A,e)=>{"use strict";e.d(A,{t:()=>t});var t;(function(n){n.Blur="blur",n.Background="bg"})(t||(t={}))},7149946954:(z,A,e)=>{"use strict";e.d(A,{Ay:()=>D});var t=e(9706240641),n=e(8736071954),s=e(9804928153),a=e(5387083734),c=e(462591818),o=e(571104883),r=e(796111729),l;(function(P){P.Granted="granted",P.Denied="denied",P.Prompt="prompt",P.NotDetermined="not-determined",P.Restricted="restricted",P.Unknown="unknown"})(l||(l={}));var _;(function(P){P.CAMERA="camera",P.MICROPHONE="microphone",P.SCREEN="display-capture"})(_||(_={}));const d={[c.mT.MICROPHONE]:_.MICROPHONE,[c.mT.CAMERA]:_.CAMERA,[c.mT.SCREEN]:_.SCREEN},i={[c.mT.MICROPHONE]:null,[c.mT.CAMERA]:null,[c.mT.SCREEN]:null},m=u(()=>({...i}),"getInitialPermissionsState");var h=e(6998663753),v=e(6422693406);let y=u(class{constructor(k){this.config=k,this.canAccessMediaResource=Y=>{const S=this.wasPermissionGranted(Y);return this.logger.info(`${Y} permissions granted: ${S}`),{isAvailable:this.config.isElectronApiAvailable,status:this.permissions[Y]}};var x=this;this.requestMediaAccess=function(){var Y=(0,t.coroutine)(function*(S){return x.updatePermissionsState(S,x.getDefaultAccessResult().status),x.logger.error("Requesting media access is not implemented for this device, but it is being called. This is likely a bug."),v.S.resolve({isAvailable:x.config.isElectronApiAvailable,isGranted:!0})});return function(S){return Y.apply(this,arguments)}}();var F=this;this.refreshAllPermissions=(0,t.coroutine)(function*(){try{yield F.refreshDevicePermissionStatus(c.mT.MICROPHONE),yield F.refreshDevicePermissionStatus(c.mT.CAMERA),yield F.refreshDevicePermissionStatus(c.mT.SCREEN)}catch(Y){F.logger.warn("An error occurred while refreshing device permissions",Y)}});var W=this;this.refreshDevicePermissionStatus=function(){var Y=(0,t.coroutine)(function*(S){W.updatePermissionsState(S,W.getDefaultAccessResult().status)});return function(S){return Y.apply(this,arguments)}}(),this.getDefaultAccessResult=()=>({isAvailable:this.config.isElectronApiAvailable,status:n.eJ.Granted}),this.updatePermissionsState=(Y,S)=>{this.permissions[Y]!==S&&(this.logger.info(`permission state for ${Y} changed to ${S}`),this.permissions[Y]=S,this.config.onPermissionsChange(this.permissions))},this.wasPermissionGranted=Y=>{let S=!1;return this.permissions[Y]&&(S=this.permissions[Y]===n.eJ.Granted),S},this.hasNoKnownPermissions=Y=>this.permissions[Y]===null,this.logger=this.config.logger,this.permissions=this.config.initialState}},"DefaultDevicePermissions");var T=e(3245843483);let I=u(class extends y{constructor(k){super(k);var x=this;this.refreshDevicePermissionStatus=function(){var W=(0,t.coroutine)(function*(Y){const{status:S}=yield(0,T.XBC)(Y);x.logger.info(`Received ${Y} access status for desktop app: ${S}`),x.updatePermissionsState(Y,S)});return function(Y){return W.apply(this,arguments)}}();var F=this;this.requestMediaAccess=function(){var W=(0,t.coroutine)(function*(Y){const{isAvailable:S,isGranted:L}=yield(0,T.Nin)(Y);return F.updatePermissionsState(Y,L?n.eJ.Granted:n.eJ.Denied),{isAvailable:S,isGranted:!!L}});return function(Y){return W.apply(this,arguments)}}()}},"DesktopDevicePermissions"),p=u(class extends y{constructor(k){super(k);var x=this;this.refreshDevicePermissionStatus=function(){var F=(0,t.coroutine)(function*(W){if(W===c.mT.SCREEN)return;const Y=W===c.mT.MICROPHONE?"audioinput":"videoinput";try{const L=(yield navigator.mediaDevices.enumerateDevices()).filter(J=>J.kind===Y),w=L.length>0&&L.some(J=>J.label.trim()!=="");x.updatePermissionsState(W,w?n.eJ.Granted:n.eJ.NotDetermined)}catch{x.logger.error('An error occurred enumerating devices. Setting access status to "granted"'),x.updatePermissionsState(W,n.eJ.NotDetermined)}});return function(W){return F.apply(this,arguments)}}()}},"FirefoxDevicePermissions"),g=u(class extends y{constructor(...k){super(...k),this.changeHandlers=m();var x=this;this.refreshDevicePermissionStatus=function(){var F=(0,t.coroutine)(function*(W){const Y=yield navigator.permissions.query({name:d[W]});x.updatePermissionsState(W,Y.state),x.logger.info(`Received ${W} access status for browser: ${x.permissions[W]}`),x.maybeRegisterPermissionChangeListener(W,Y)});return function(W){return F.apply(this,arguments)}}(),this.maybeRegisterPermissionChangeListener=(F,W)=>{if(!this.changeHandlers[F]){const Y=u(()=>this.onPermissionChangeEvent(F,W==null?void 0:W.state),"handler");W.addEventListener("change",Y),this.changeHandlers[F]=Y}},this.onPermissionChangeEvent=(F,W)=>{this.updatePermissionsState(F,W)}}},"BrowserDevicePermissions");var E=e(2001112473);const f="device-permissions-state",O=7*24*60*60*1e3,C=5*1e3;class M{isPersistedStateTrustworthy(k){return!(!k||Date.now()-k>O)}savePermissionsToLocalStorage(k){try{const x={permissions:k,timestamp:Date.now()},F=JSON.stringify(x);localStorage.setItem(f,F),this.logger.info(`Permissions saved to local storage: ${F}`)}catch(x){this.logger.error("Error saving permissions to local storage",x)}}readPermissionsFromLocalStorage(){try{const k=localStorage.getItem(f);if(k){this.logger.info(`Permissions loaded from local storage ${k}`);const x=JSON.parse(k);return this.isPersistedStateTrustworthy(x==null?void 0:x.timestamp)?x.permissions:(this.logger.warn("Permissions not considered trustworthy. Requiring refresh"),null)}}catch(k){this.logger.error("Error reading permissions from local storage",k)}return null}constructor(){this.isSSB=(0,o.y3)(),this.logger=(0,r.Wo)({label:"DEVICE-PERMISSIONS-MANAGER"}),this.initialized=!1;var k=this;this.init=(0,h.A)((0,t.coroutine)(function*(){k.logger.info("Initializing media device permissions manager"),k.initialized=!0,k.permissionsStrategy=k.getStrategy(),setTimeout(k.refreshAllPermissions,C),k.logger.info("Scheduled permissions refresh")})),this.canAccessMediaResource=Y=>{var S,L;return!((S=this.permissionsStrategy)===null||S===void 0)&&S.canAccessMediaResource?this.permissionsStrategy.canAccessMediaResource(Y):{isAvailable:!!(!((L=this.config)===null||L===void 0)&&L.isElectronApiAvailable),status:n.eJ.Granted}};var x=this;this.requestMediaAccess=function(){var Y=(0,t.coroutine)(function*(S){var L;return!((L=x.config)===null||L===void 0)&&L.isElectronApiAvailable?x.permissionsStrategy.requestMediaAccess(S):(x.logger.warn("Permissions strategy not available"),{isAvailable:!1,isGranted:!0})});return function(S){return Y.apply(this,arguments)}}(),this.getStrategy=()=>{const Y={initialState:this.readPermissionsFromLocalStorage()||m(),isElectronApiAvailable:this.isSSB,onPermissionsChange:this.onPermissionsChange,logger:this.logger};return this.config=Y,(0,o.y3)()?(this.logger.info("Using desktop device permissions strategy"),new I(Y)):(0,o.gm)()?(this.logger.info("Using Firefox device permissions strategy"),new p(Y)):this.shouldUsePermissionsApi()?(this.logger.info("Using browser device permissions strategy"),new g(Y)):(this.logger.info("Using default device permissions strategy"),new y(Y))},this.onPermissionsChange=Y=>{this.logger.info("Permissions changed",Y),(0,E.pq)(),this.savePermissionsToLocalStorage(Y)};var F=this;this.refreshAllPermissions=(0,t.coroutine)(function*(){F.logger.info("Refreshing all permissions");try{yield navigator.mediaDevices.enumerateDevices(),yield F.refreshPermissions(c.mT.MICROPHONE),yield F.refreshPermissions(c.mT.CAMERA),yield F.refreshPermissions(c.mT.SCREEN)}catch(Y){F.logger.warn("An error occurred while refreshing device permissions",Y)}});var W=this;this.refreshPermissions=function(){var Y=(0,t.coroutine)(function*(S){return W.logger.debug(`Refreshing ${S} permissions`),(0,a.IE)("media-access-update",(0,t.coroutine)(function*(){return W.permissionsStrategy.refreshDevicePermissionStatus(S)})).catch(L=>{W.logger.warn(`An error occurred while trying to check ${S} permissions`,L)})});return function(S){return Y.apply(this,arguments)}}(),this.shouldUsePermissionsApi=()=>!this.isSSB&&!(0,o.gm)()&&"permissions"in s.J.navigator,this.clearAllPermissions=()=>{this.initialized&&this.savePermissionsToLocalStorage(m())}}}u(M,"DevicePermissionsManager");const D=new M},2001112473:(z,A,e)=>{"use strict";e.d(A,{_o:()=>pe,Nj:()=>fe,T5:()=>Te,Zy:()=>$,G0:()=>q,pq:()=>Ce,cT:()=>re,i_:()=>Z});var t=e(9706240641),n=e(8736071954),s;(function(se){se.Microphone="audioinput",se.Camera="videoinput",se.Speakers="audiooutput"})(s||(s={}));const a=u(se=>({[n.lW.Microphone]:s.Microphone,[n.lW.Camera]:s.Camera,[n.Q4]:s.Speakers})[se],"adapter_mapDeviceTypeToDeviceKind"),c=u(se=>({[s.Microphone]:n.lW.Microphone,[s.Camera]:n.lW.Camera,[s.Speakers]:n.Q4})[se],"mapDeviceKindToDeviceType"),o=u(se=>{const ge=c(se.kind);return ge===n.Q4?{id:se.deviceId,label:se.label,groupId:se.groupId,type:n.Q4}:{id:se.deviceId,label:se.label,groupId:se.groupId,type:ge,track:void 0}},"adapter_mapMediaDeviceInfoToDevice");var r=e(4423055085),l=e(9804928153),_=e(9113979368),d=e(8289365785),i=e(9268023148),m=e(2208015175),h=e(235108050),v=e(4103274853),y=e(796111729);const I=(0,y.Wo)({label:"DEVICE-PREFS"});var p=e(571104883),g=e(3078252698),E=e(3783723764),f=e(6217320234);const O=["ZoomAudioDevice (Virtual)"],D=["default","communications"],P=u(se=>D.includes(se),"isOSDefaultDeviceId"),k=u((se,ge)=>{if(P(se.deviceId))return!1;const Oe=ge.find(Le=>P(Le.deviceId)&&Le.kind===se.kind);return(Oe==null?void 0:Oe.groupId)===se.groupId&&(Oe==null?void 0:Oe.label.includes(se.label))},"isOSDefaultDeviceForType"),x=u(se=>{const ge=/iphone/,Oe=se.label;if(!(0,g.A)(Oe))return!1;const Le=(0,p.cX)()&&Oe&&ge.test(Oe.toLowerCase()),We=(Oe==null?void 0:Oe.toLowerCase().includes("display audio"))||Oe.toLowerCase().includes("displayport");return Le||We},"shouldDeprioritizeDevice"),F=u(se=>!se.label||O.includes(se.label),"shouldRemoveDevice"),W=u(se=>se&&se.replace(/ *?\([a-zA-Z0-9]{4}:[a-zA-Z0-9]{4}\) *?/g,""),"removeDeviceFingerprintFromLabel"),Y=u(se=>se.filter(ge=>ge.label).map(ge=>({deviceId:ge.deviceId,kind:ge.kind,label:W(ge.label)||"",groupId:ge.groupId})),"scrubAvailableDevices"),S=u((se,ge)=>(0,E.A)(se,Oe=>{var Le;return(Le=ge[Oe.deviceId])===null||Le===void 0?void 0:Le.selected},"desc"),"sortDevicesByLastSelection"),L=u((se,ge)=>(0,E.A)(se,Oe=>{var Le;return(Le=ge[Oe.deviceId])===null||Le===void 0?void 0:Le.used},"desc"),"sortDevicesByLastUsed"),w=u(se=>(0,f.A)(se,ge=>ge.label),"sortDevicesByLabel");var J=e(6696292586),G=e(6313685253),X=e(8086952004);const te="version",le=3,ve={1:se=>se,2:se=>(0,v.A)(se,ge=>{if((0,J.A)(ge))return ge;const Oe={...ge},Le=W(ge.deviceLabel);return Le&&Le!==ge.deviceLabel&&(Oe.deviceLabel=Le),Oe}),3:se=>(0,G.A)(se,(ge,Oe,Le)=>{if(!P(Le)&&Le!==te){const We=(0,X.A)(se,(Re,we)=>P(we)&&Re.deviceInfo.kind===Oe.deviceInfo.kind&&Re.deviceInfo.groupId===Oe.deviceInfo.groupId&&Re.deviceInfo.label.includes(Oe.deviceInfo.label));We&&((!Oe.used&&We.used||Oe.used&&We.used&&Oe.used<We.used)&&(Oe.used=We.used),(!Oe.selected&&We.selected||Oe.selected&&We.selected&&Oe.selected<We.selected)&&(Oe.selected=We.selected)),ge[Le]=Oe}return ge},{})},Q=u(se=>se[te]!==le,"isMigrationNeeded"),Ae=u(se=>{if(!ve[le])throw new Error(`No migration found for version ${le}`);const ge=se[te]||0;if(ge===le)return se;let Oe={...se};for(let Le=ge;Le<le;Le++){const We=Le+1,Re=ve[We];Oe=Re(Oe),Oe[te]=We}return Oe},"maybeMigrateDeviceHistory");var ae=e(1649982175);const he="device-selection-records",_e=I,ee=u(()=>{let se;try{const ge=localStorage.getItem(he);ge?(se=JSON.parse(ge),Q(se)?(_e.debug(`Migration needed for device selection history from ${se[te]} to ${le}`),se=Ae(se)):_e.debug("No migration needed for device selection history")):se=void 0}catch(ge){_e.error("Failed to read device selection history from local storage",ge),se=void 0}return _e.debug("Reading device selection history from local storage",se),se?(0,ae.A)(se,te):void 0},"readSelectionHistoryFromLocalStorage"),de=u(se=>{if(se){_e.debug("Writing device selection history to local storage",se);try{const ge={...se,[te]:le};localStorage.setItem(he,JSON.stringify(ge))}catch(ge){_e.error("Failed to write device selection history to local storage",ge)}}},"saveDeviceSelectionRecordsToLocalStorage");var Ie=e(700984029),ce=e(6533394955),j=e(1473609332);class N{constructor(){this.logger=I,this.availableDevices=[],this.deviceSelectionRecords={},this.currentTeamId=null,this.isFirstRun=!1,this.useDevicesExp=!1,this.osDefaultDevices={[s.Microphone]:null,[s.Camera]:null,[s.Speakers]:null},this.prioritizedDeviceLists={[s.Microphone]:[],[s.Camera]:[],[s.Speakers]:[]};var ge=this;this.init=function(){var Re=(0,t.coroutine)(function*(we){let{teamId:Je,useDevicesExp:it}=we;if(Je!==ge.currentTeamId){ge.useDevicesExp=it,ge.useDevicesExp&&ge.logger.info("Initializing device preferences manager with experimental features"),ge.currentTeamId=Je,ge.dispatch=(0,ce.getStoreInstanceByTeamId)(Je).dispatch;try{ge.deviceSelectionRecords=ee()||{},ge.isFirstRun=(0,_.A)(ge.deviceSelectionRecords),ge.logger.info("Initializing device preferences manager from local storage",ge.deviceSelectionRecords),yield ge.updateAvailableDevices(),ge.maybeApplyLegacyDevicePrefs(),navigator.mediaDevices.addEventListener("devicechange",ge.handleDeviceListChange)}catch(et){ge.logger.error("Error initializing device preferences manager",et)}}});return function(we){return Re.apply(this,arguments)}}();var Oe=this;this.refreshAvailableDevices=(0,t.coroutine)(function*(){yield Oe.updateAvailableDevices()}),this.getPreferredDeviceOfType=Re=>this.getPrioritizedDeviceListOfType(Re)[0],this.getPrioritizedDeviceListOfType=Re=>this.prioritizedDeviceLists[Re],this.recordDeviceSelected=(Re,we)=>{try{const{deviceId:Je,deviceLabel:it}=this.lookupDeviceDetailsById(Re,we);if(!Je){this.logger.warn("Device record not found for selected device id",Re);return}if(!this.deviceSelectionRecords[Je]){this.logger.warn("No device selection record found for device id",Je);return}this.logger.info(`Reporting ${we} device selected, label: ${it}, id: ${Je}`),this.deviceSelectionRecords[Je].selected=Date.now(),this.propagateUpdateToExternalStores()}catch(Je){this.logger.error("Error reporting device selected",Je)}},this.recordDeviceUsed=(Re,we)=>{try{const{deviceId:Je,deviceLabel:it}=this.lookupDeviceDetailsById(Re,we);if(!Je){this.logger.warn("Device record not found for used device id",Re);return}this.logger.info(`Reporting ${we} device used, label: ${it}, id: ${Je}`),this.deviceSelectionRecords[Je].used=Date.now(),this.propagateUpdateToExternalStores()}catch(Je){this.logger.error("Error reporting device used",Je)}},this.getOSDefaults=()=>this.osDefaultDevices,this.getDeviceSelectionRecords=()=>this.deviceSelectionRecords,this.clearDeviceSelectionRecords=()=>{de({})},this.lookupDeviceDetailsById=(Re,we)=>{var Je;(0,_.A)(this.prioritizedDeviceLists[we])&&this.updateAvailableDevices();const it={deviceId:null,deviceLabel:null},et=P(Re)?this.osDefaultDevices[we]:Re;if(et&&P(et)&&this.logger.warn(`OS default device id (${Re}) used for details. This should not happen`),!et)return this.logger.warn("Device record not found for device id",et),it;it.deviceId=et;const lt=(Je=this.deviceSelectionRecords[et])===null||Je===void 0?void 0:Je.deviceLabel,nt=W(lt);return nt?(it.deviceLabel=nt,it):(this.logger.warn("Device record not found for device id",et),it)},this.createEmptyDeviceSelectionRecord=Re=>({deviceInfo:Re,deviceLabel:Re.label,selected:null,used:null});var Le=this;this.updateAvailableDevices=(0,t.coroutine)(function*(){const Re=yield l.J.navigator.mediaDevices.enumerateDevices();try{Le.logger.info(`Available devices ${JSON.stringify(Re,null,2)}`)}catch(we){Le.logger.error("Error logging available devices",we)}Le.availableDevices=Y(Re),Le.updateDeviceRecords(Le.availableDevices),Le.propagateUpdateToExternalStores()}),this.maybeApplyLegacyDevicePrefs=()=>{try{if(!this.isFirstRun)return;const Re=(0,j.Bh)(),{deviceIdPriorities:we}=Re,Je=(0,d.A)(we==null?void 0:we[n.lW.Microphone]),it=(0,d.A)(we==null?void 0:we[n.lW.Camera]),et=(0,d.A)(we==null?void 0:we[n.Q4]);Je&&!P(Je)?(this.logger.info("Recording preferred microphone from legacy preferences",Je),this.recordDeviceSelected(Je,s.Microphone)):this.logger.info("No preferred microphone found in legacy preferences"),it&&!P(it)?(this.logger.info("Recording preferred camera from legacy preferences",it),this.recordDeviceSelected(it,s.Camera)):this.logger.info("No preferred camera found in legacy preferences"),et&&!P(et)?(this.logger.info("Recording preferred speakers from legacy preferences",et),this.recordDeviceSelected(et,s.Speakers)):this.logger.info("No preferred speakers found in legacy preferences"),this.isFirstRun=!1}catch(Re){this.logger.error("Error applying legacy device preferences",Re)}},this.updatePrioritizedDeviceLists=()=>{this.logger.debug("Updating prioritized device lists"),this.updatePrioritizedDeviceListOfType(s.Microphone),this.logger.debug("Updated mics",this.prioritizedDeviceLists[s.Microphone]),this.updatePrioritizedDeviceListOfType(s.Camera),this.logger.debug("Updated cameras",this.prioritizedDeviceLists[s.Camera]),this.updatePrioritizedDeviceListOfType(s.Speakers),this.logger.debug("Updated speakers",this.prioritizedDeviceLists[s.Speakers])};var We=this;this.handleDeviceListChange=(0,i.A)((0,t.coroutine)(function*(){try{We.logger.info(`Device list change event received at ${Date.now()}`),We.updateAvailableDevices()}catch(Re){We.logger.error("Error handling device list change event",Re)}}),1e3,{leading:!0,trailing:!0,maxWait:2e3}),this.updateDeviceRecords=Re=>{(0,m.A)(Re,we=>{if(!we.deviceId||P(we.deviceId))return;const Je=this.deviceSelectionRecords[we.deviceId],it=!!Je;if(it&&we.label&&Je.deviceLabel!==we.label&&(Je.deviceLabel=we.label,Je.deviceInfo.label=we.label,this.logger.info(`Device label updated from ${Je.deviceLabel} to ${we.label}`)),it)this.deviceSelectionRecords[we.deviceId].deviceInfo=we;else{this.logger.info(`Creating new device history record for ${we.label} ${we.deviceId}`);const nt=this.createEmptyDeviceSelectionRecord(we);if(nt.deviceLabel){const at=Object.values(this.deviceSelectionRecords).find(ze=>ze.deviceInfo.kind===we.kind&&ze.deviceLabel===nt.deviceLabel);at?(this.logger.info(`Matching device record found for label: ${at.deviceLabel} ${at.deviceInfo.deviceId}`),this.deviceSelectionRecords[we.deviceId]=at):this.deviceSelectionRecords[we.deviceId]=nt}}if(k(we,Re)&&this.osDefaultDevices[we.kind]!==we.deviceId){var lt;const at=((lt=this.getPreferredDeviceOfType(we.kind))===null||lt===void 0?void 0:lt.deviceId)===this.osDefaultDevices[we.kind];this.osDefaultDevices[we.kind]=we.deviceId,this.logger.info(`OS default device updated for ${we.kind}: ${we.label} ${we.deviceId}`),at&&(this.logger.info(`Preferred ${we.kind} OS default has changed to: ${we.label} ${we.deviceId}. Recording as selected.`),this.recordDeviceSelected(we.deviceId,we.kind))}})},this.updatePrioritizedDeviceListOfType=Re=>{let we=null;const Je=[],it=[],et=[],lt=[];this.availableDevices.forEach(ze=>{const Ke=ze.deviceId===this.osDefaultDevices[ze.kind];if(ze.kind!==Re||P(ze.deviceId))return;const He=this.deviceSelectionRecords[ze.deviceId];if(!He){this.logger.error("No selection record found for device",ze);return}if(!F(He.deviceInfo)){if(He.selected){Je.push(He.deviceInfo);return}if(He.used){it.push(He.deviceInfo);return}if(x(He.deviceInfo)){et.push(He.deviceInfo);return}if(Ke){we=He.deviceInfo;return}lt.push(He.deviceInfo)}});const nt=[];nt.push(...S(Je,this.deviceSelectionRecords)),nt.push(...L(it,this.deviceSelectionRecords)),nt.push(we),nt.push(...w(lt)),nt.push(...et);const at=(0,h.A)(nt).filter(Boolean);return this.prioritizedDeviceLists[Re]=at,at},this.propagateUpdateToExternalStores=()=>{de(this.deviceSelectionRecords),this.updatePrioritizedDeviceLists(),this.logger.info("Propagating device selection history update"),this.dispatch((0,Ie.Fb)(void 0))}}}u(N,"DevicePreferencesManager");const b=new N,R={printDeviceSelectionRecords:()=>{const se=b.getDeviceSelectionRecords(),ge=(0,v.A)(se,Oe=>{var Le;return{deviceId:Oe.deviceInfo.deviceId,label:Oe.deviceLabel,type:Oe.deviceInfo.kind,"is preferred":((Le=b.getPreferredDeviceOfType(Oe.deviceInfo.kind))===null||Le===void 0?void 0:Le.deviceId)===Oe.deviceInfo.deviceId,"last selected":Oe.selected?Oe.selected.toString():"Never selected","last used":Oe.used?Oe.used.toString():"Never used","is available":!!b.getPrioritizedDeviceListOfType(Oe.deviceInfo.kind).find(We=>We.deviceId===Oe.deviceInfo.deviceId),"is OS default":Oe.deviceInfo.deviceId===b.getOSDefaults()[Oe.deviceInfo.kind],groupId:Oe.deviceInfo.groupId}});console.log("Device selection records"),console.table(ge)},printPreferredMicrophone:()=>{const se=b.getPreferredDeviceOfType(s.Microphone);console.log("Preferred microphone",se)},printPreferredCamera:()=>{const se=b.getPreferredDeviceOfType(s.Camera);console.log("Preferred camera",se)},printPreferredSpeakers:()=>{const se=b.getPreferredDeviceOfType(s.Speakers);console.log("Preferred speakers",se)},printPrioritizedDeviceLists:()=>{const se=(0,v.A)(b.getOSDefaults(),(ge,Oe)=>b.getPrioritizedDeviceListOfType(Oe));(0,m.A)(se,(ge,Oe)=>{const Le=ge.map(We=>({deviceId:We.deviceId,label:We.label,groupId:We.groupId}));console.log(`Prioritized list for ${Oe}`),console.table(Le)})},printRawDeviceList:(0,t.coroutine)(function*(){const se=yield l.J.navigator.mediaDevices.enumerateDevices();console.log("Available devices"),se.forEach(ge=>{console.log(ge)})}),printDebugInfo:()=>{R.printDeviceSelectionRecords(),R.printPrioritizedDeviceLists(),R.printPreferredMicrophone(),R.printPreferredCamera(),R.printPreferredSpeakers(),R.printRawDeviceList()},clearDeviceSelectionRecords:()=>{b.clearDeviceSelectionRecords(),l.J.location.reload()}};(0,r.ul)("devices",R);const K=b;let B=null;const $=function(){var se=(0,t.coroutine)(function*(ge){let{teamId:Oe,useDevicesExp:Le}=ge;!Oe||B===Oe||(B=Oe,yield K.init({teamId:Oe,useDevicesExp:Le}))});return u(function(Oe){return se.apply(this,arguments)},"initializeDevicePreferences")}(),Z=u((se,ge)=>{if(!B)return;const Oe=a(ge);K.recordDeviceUsed(se,Oe)},"reportDeviceUsed"),re=u((se,ge)=>{if(!B)return;const Oe=a(ge);K.recordDeviceSelected(se,Oe)},"reportDeviceSelected"),Te=u(()=>{if(!B)return;const se=K.getPrioritizedDeviceListOfType(s.Microphone)||[],ge=K.getPrioritizedDeviceListOfType(s.Camera)||[],Oe=K.getPrioritizedDeviceListOfType(s.Speakers)||[];return{[n.lW.Microphone]:se.map(o),[n.lW.Camera]:ge.map(o),[n.Q4]:Oe.map(o)}},"getPrioritizedDeviceLists"),Ce=function(){var se=(0,t.coroutine)(function*(){B&&(yield K.refreshAvailableDevices())});return u(function(){return se.apply(this,arguments)},"refreshDeviceListsOnDevicePermissionsUpdate")}(),Pe=u(se=>{if(!B)return;const ge=mapDeviceTypeToDeviceKind(se);return devicePreferencesManager.getPrioritizedDeviceListOfType(ge).map(mapMediaDeviceInfoToDevice)},"getPrioritizedDeviceListOfType"),fe=u(se=>{if(!B)return;const ge=a(se),Oe=K.getPreferredDeviceOfType(ge);if(Oe)return o(Oe)},"getPreferredDeviceOfType"),pe=u(()=>{var se;return((se=fe(n.Q4))===null||se===void 0?void 0:se.id)||"default"},"getPreferredAudioSinkId"),q=u(()=>!!B,"isDevicePreferencesManagerInitialized")},63202349:(z,A,e)=>{"use strict";e.d(A,{k:()=>o});var t=e(6664301844),n=e(2825968873),s=e(6926388022),a=e(4423055085);const c={debug:0,info:1,warn:2,error:3,action:0};class o{debug(l){if(!(this.level>t.$b.DEBUG||!o.debugLogsEnabled))if(typeof l=="string"){const _=l;this.consoleLogger.debug(_)}else{const _=l();this.consoleLogger.debug(_)}}info(l){this.level>t.$b.INFO||this.consoleLogger.info(l)}warn(l){this.level>t.$b.WARN||this.consoleLogger.warn(l)}error(l){this.level>t.$b.ERROR||this.callLogger.error(l)}setLogLevel(l){this.level=l}getLogLevel(){return this.level}getName(){return this.name}constructor(l,_){this.name=l,this.level=_||c[(0,s.XM)()],this.consoleLogger=(0,n.Cc)(l),this.callLogger=(0,n.Jt)(l)}}u(o,"FreeWillyLogger"),o.debugLogsEnabled=!1,(0,a.ul)("toggleChimeDebugLogs",()=>{o.debugLogsEnabled=!o.debugLogsEnabled})},4103673490:(z,A,e)=>{"use strict";e.d(A,{Y:()=>bt});var t=e(9706240641),n=e(1649982175),s=e(3750057149),a=e(6664301844),c=e(5741354339),o=e(8848660647),r=e(2825968873),l=e(8736071954),_=e(7561130599),d=e(4708000837),i=e(462591818),m=e(9268023148),h=e(3078252698),v=e(2003990933),y=e(571104883),T=e(8872167513),I=e(2709531527),p=e(6246464105),g=e(9853754481);let E=u(class{getLevel(){return this.analyserNode.getByteTimeDomainData(this.data),(0,g.n2)(this.data)/g.Ep}constructor(U){this.analyserNode=U,this.data=new Uint8Array(this.analyserNode.fftSize)}},"AudioAnalyser");var f=e(9009528296);const O=300;class C{stop(){this.previewAudioAnalyser=void 0,clearTimeout(this.timeoutId)}setPreviewAudioAnalyser(U){this.previewAudioAnalyser=U}constructor(){this.timeoutId=-1,this.monitorAudioLevel=()=>{this.previewAudioAnalyser&&f.A.subscriberCount>0&&f.A.publish(this.previewAudioAnalyser.getLevel()),this.timeoutId=window.setTimeout(this.monitorAudioLevel,O)},this.monitorAudioLevel()}}u(C,"AudioLevelMonitor");function M(be,U){let{skipIntermediatePendingRuns:V=!0}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},ne=!1,ie=[];const Ue=function(){var Qe=(0,t.coroutine)(function*(){for(var je=arguments.length,ht=new Array(je),ot=0;ot<je;ot++)ht[ot]=arguments[ot];if(ne){V&&(ie=[]);const Dn=(0,c.u)();return ie.push({args:ht,deferred:Dn}),Dn}ne=!0;const gt=yield U.call(be,...ht);ne=!1;const wt=ie.shift();return wt&&Ue(...wt.args).then(wt.deferred.resolve).catch(wt.deferred.reject),gt});return u(function(){return Qe.apply(this,arguments)},"run")}();return Ue}u(M,"serialGuard");var D=e(3496486794),P=e(2001112473);class k{initialize(U){let{preferredDeviceId:V}=U;var ne,ie,Ue,Qe,je,ht,ot,gt,wt,Dn,Nn,Sn,Bn,pn;if(!(!((ne=this.defaultDeviceController)===null||ne===void 0||(ie=ne.activeDevices)===null||ie===void 0||(Ue=ie.audio)===null||Ue===void 0||(Qe=Ue.stream)===null||Qe===void 0)&&Qe.getAudioTracks))return;const yn=this.defaultDeviceController;if(!(!((je=this.defaultDeviceController)===null||je===void 0||(ht=je.activeDevices)===null||ht===void 0||(ot=ht.audio)===null||ot===void 0||(gt=ot.stream)===null||gt===void 0)&&gt.getAudioTracks)){this.logger.warn("Unable to retrieve audio tracks from the default device controller");return}const jn=yn.activeDevices.audio.stream.getAudioTracks();if(jn.length===1)this.audioInputTrack=jn[0];else{this.logger.warn("No audio input tracks where found for the current audio device. Audio input tracks amount: {tracks.length}");return}(wt=this.audioInputTrack)===null||wt===void 0||wt.addEventListener("mute",this.onMute),(Dn=this.audioInputTrack)===null||Dn===void 0||Dn.addEventListener("unmute",this.onUnmute),(Nn=this.audioInputTrack)===null||Nn===void 0||Nn.addEventListener("ended",this.onEnded),!((Sn=this.audioInputTrack)===null||Sn===void 0)&&Sn.muted?this.onMute():this.onUnmute();const Zn=(pn=(Bn=this.audioInputTrack)===null||Bn===void 0?void 0:Bn.getSettings())===null||pn===void 0?void 0:pn.deviceId;if(!Zn){this.logger.warn("No deviceId found for audio input track");return}Zn!==V?this.logger.warn(`Used audio input track device id (${Zn}) does not match the preferred device id (${V}). 
				Preferred device is unavailable. User may report issues with other participants hearing them.`):this.logger.info(`Used audio input track device id matches the preferred device id (${V})`),(0,P.cT)(Zn,l.lW.Microphone)}tearDown(){var U,V,ne;(U=this.audioInputTrack)===null||U===void 0||U.removeEventListener("mute",this.onMute),(V=this.audioInputTrack)===null||V===void 0||V.removeEventListener("unmute",this.onUnmute),(ne=this.audioInputTrack)===null||ne===void 0||ne.removeEventListener("ended",this.onEnded)}onMute(){this.isAudioInputTrackMuted=!0,this.logger.warn("Audio input track is muted. Alerting the user"),this.observer.onAudioInputTrackMuted()}onUnmute(){this.isAudioInputTrackMuted&&this.logger.info("Audio input track is unmuted. Removing alert if there is one"),this.observer.onAudioInputTrackUnMuted(),this.isAudioInputTrackMuted=!1}onEnded(){this.logger.warn("Audio input track was ended.")}constructor(U,V,ne){this.defaultDeviceController=U,this.observer=V,this.logger=ne,this.isAudioInputTrackMuted=!1,this.onMute=this.onMute.bind(this),this.onUnmute=this.onUnmute.bind(this),this.onEnded=this.onEnded.bind(this)}}u(k,"AudioInputTrackHandler");var x;(function(be){be.Blur="BLUR",be.Image="IMAGE",be.None="NONE"})(x||(x={}));class F{constructor({backgroundEffect:U}){this.filterCPUUtilizationHigh=V=>{const{cpuUtilization:ne,filterMillis:ie,periodMillis:Ue}=V;this.callLogger.warn(`CPU utilization by video background processor is high - cpuUtilization: ${ne} - spent ${ie}ms of last ${Ue}ms processing video background`)},this.filterFrameDurationHigh=V=>{const{framesDropped:ne,avgFilterDurationMillis:ie,framerate:Ue,periodMillis:Qe}=V;this.callLogger.warn(`Frame duration by video background processor is high. framerate: ${Ue}, frames dropped: ${ne}, spent ${ie}ms of last ${Qe}ms processing video background`)},this.callLogger=(0,r.Jt)(`VIDEO-BACKGROUND-${U}`)}}u(F,"VideoBackgroundObserver");const W=F;var Y=e(5071086688),S=e(5470425448),L=e(1473609332),w=e(9195837907),J=e(416787925),G=e(7149946954);class X{load(){var U=this;return(0,t.coroutine)(function*(){if(U.url.origin===window.location.origin)return new Worker(U.url,U.options);const ne=yield(yield fetch(U.url)).text(),ie=new Blob([ne],{type:"application/javascript"}),Ue=URL.createObjectURL(ie);return new Worker(Ue,U.options)})()}constructor(U,V){this.url=U,this.options=V}}u(X,"CORSWorker");class te{intrinsicDevice(){var U=this;return(0,t.coroutine)(function*(){return U.device})()}stop(){var U=this;return(0,t.coroutine)(function*(){var V;U.generatorVideoTrack.stop(),(V=U.inputMediaStream)===null||V===void 0||V.getTracks().forEach(ne=>ne.stop()),(yield U.worker).terminate()})()}onOutputStreamDisconnect(){if(this.generatorVideoTrack.stop(),!(this.device instanceof MediaStream)){var U;(U=this.inputMediaStream)===null||U===void 0||U.getTracks().forEach(V=>V.stop())}}transformStream(U){var V=this;return(0,t.coroutine)(function*(){if(V.inputMediaStream=U,U){const ne=new MediaStreamTrackProcessor({track:U.getVideoTracks()[0]});(yield V.worker).postMessage({type:"init",input:ne.readable,output:V.generatorVideoTrack.writable,width:U.getVideoTracks()[0].getSettings().width,height:U.getVideoTracks()[0].getSettings().height,bgImg:V.bgImg},[ne.readable,V.generatorVideoTrack.writable,...V.bgImg?[V.bgImg]:[]])}return V.outputMediaStream})()}constructor(U,V){this.device=U,this.bgImg=V,this.worker=new X(new URL(e.p+e.u("js_modern_app_free-willy_free-willy-sdk_filter-worker_background-worker_ts"),e.b)).load(),this.generatorVideoTrack=new MediaStreamTrackGenerator({kind:"video"}),this.outputMediaStream=new MediaStream([this.generatorVideoTrack])}}u(te,"BackgroundWorkerVideoTransformDevice");var le=e(5221945366),ve;(function(be){be.START_PREVIEW="start-preview",be.STOP_PREVIEW="stop-preview",be.ENABLE="enable",be.DISABLE="disable"})(ve||(ve={}));const Q=1e4,Ae=30,ae="medium",he=!0,_e=50;let ee=u(class{shutdown(){var U=this;return(0,t.coroutine)(function*(){var V,ne,ie;if(U.isShuttingDown=!0,U.voiceFocusDevice){var Ue;yield U.voiceFocusDevice.stop(),yield(Ue=U.voiceFocusManager)===null||Ue===void 0?void 0:Ue.tearDown(),U.voiceFocusDevice=void 0}U.audioVideoFacade.removeDeviceChangeObserver(U),U.audioVideoFacade.stopLocalVideoTile(),yield U.audioVideoFacade.stopVideoInput(),yield U.audioVideoFacade.stopAudioInput(),U.audioVideoFacade.unbindAudioElement(),U.removeAudioElementErrorHandler(),yield U.clearVideoTransformDeviceRefs(),U.audioInputDeviceRefreshTimer&&(clearTimeout(U.audioInputDeviceRefreshTimer),U.audioInputDeviceRefreshTimer=null),U.videoInputDeviceRefreshTimer&&(clearTimeout(U.videoInputDeviceRefreshTimer),U.videoInputDeviceRefreshTimer=null),U.cameraMetricsTimeout&&(clearTimeout(U.cameraMetricsTimeout),U.cameraMetricsTimeout=null),yield(ne=(V=(0,a._R)())===null||V===void 0?void 0:V.getAudioContext())===null||ne===void 0?void 0:ne.suspend(),U.callLogger.info("Audio context suspended"),(ie=U.audioLevelMonitor)===null||ie===void 0||ie.stop(),delete U.audioLevelMonitor,U.callLogger.info("Device manager shutdown complete")})()}init(){var U=this;return(0,t.coroutine)(function*(){yield U.refreshMediaDeviceInfo(),yield U.determineInitialMicrophonePermissionState(),U.enumerateDevices(),U.logDevices(),yield U.updateMicrophone(),yield U.updateSpeaker(),U.isCameraEnabled&&(yield U.updateCamera())})()}determineInitialMicrophonePermissionState(){var U=this;return(0,t.coroutine)(function*(){if((0,y.y3)()){yield U.determineInitialMicrophonePermissionStateForDesktop();return}yield U.determineInitialMicrophonePermissionStateForBrowser()})()}determineInitialMicrophonePermissionStateForBrowser(){var U=this;return(0,t.coroutine)(function*(){const{status:V}=G.Ay.canAccessMediaResource(i.mT.MICROPHONE);let ne;(V===l.eJ.Prompt||V===l.eJ.NotDetermined||V===l.eJ.Unknown)&&(yield U.audioVideoFacade.listAudioInputDevices(!0),ne=G.Ay.canAccessMediaResource(i.mT.MICROPHONE).status),(V===l.eJ.Denied||ne===l.eJ.Denied)&&(U.observer.onBrowserMediaDeviceAccessDenied(i.mT.MICROPHONE),U.callLogger.warn("setting microphone to muted as microphone permission was not available during initialization"),U.isStartMutedBarrierActive=!0)})()}determineInitialMicrophonePermissionStateForDesktop(){var U=this;return(0,t.coroutine)(function*(){const V=yield U.maybeCheckSystemMediaAccess(i.mT.MICROPHONE);(0,y.j9)()||(0,y.uF)()&&!U.options.useGetMediaAccessCheckForWindows||V&&(V==null?void 0:V.status)!==l.eJ.Granted&&(U.callLogger.warn("setting microphone to muted as microphone permission was not available during initialization"),U.isStartMutedBarrierActive=!0)})()}setAGC(U){var V=this;return(0,t.coroutine)(function*(){V.prefs.audio&&V.prefs.audio.enableAGC!==U&&(V.callLogger.info(`AGC setting changed: ${U}`),V.prefs.audio.enableAGC=U,(0,L.i4)(V.prefs),yield V.updateMicrophone())})()}setPreferredDevice(U,V){var ne=this;return(0,t.coroutine)(function*(){switch((0,P.cT)(U,V),V){case l.lW.Microphone:yield ne.updateMicrophone();break;case l.Q4:yield ne.updateSpeaker();break;case l.lW.Camera:ne.isCameraEnabled&&(yield ne.updateCamera());break;default:break}})()}setPreferredCameraDeviceForPreview(U){var V=this;return(0,t.coroutine)(function*(){V.enumerateDevices(),yield V.updateCamera()})()}setVideoBackgroundEffect(U){let{effect:V,effectBgKey:ne}=U;var ie=this;return(0,t.coroutine)(function*(){ie.prefs.video&&(ie.callLogger.info(`Video background effect changed: ${V}`),ie.prefs.video.effect=V,ie.prefs.video.effectBgKey=ne,(0,L.i4)(ie.prefs),ie.isCameraEnabled&&(yield ie.updateCamera()))})()}setNoiseSuppression(U){var V=this;return(0,t.coroutine)(function*(){V.prefs.audio&&V.prefs.audio.enableNoiseSuppression!==U&&(V.callLogger.info(`Noise suppression setting changed: ${U}`),V.prefs.audio.enableNoiseSuppression=U,(0,L.i4)(V.prefs),yield V.updateMicrophone())})()}setStartMutedBarrier(U){var V=this;return(0,t.coroutine)(function*(){V.isStartMutedBarrierActive=U})()}setMicrophone(U){var V=this;return(0,t.coroutine)(function*(){var ne;if(V.voiceFocusManager&&(yield V.voiceFocusManager.setMute(U)),!U){var ie;V.audioVideoFacade.realtimeMuteLocalAudio(),(ie=V.huddleEventsTrace)===null||ie===void 0||ie.update({name:I.p.MICROPHONE,type:I.G.STOP});return}V.isStartMutedBarrierActive&&(V.callLogger.info("Releasing start muted barrier"),V.isStartMutedBarrierActive=!1),V.audioVideoFacade.realtimeUnmuteLocalAudio(),(ne=V.huddleEventsTrace)===null||ne===void 0||ne.update({name:I.p.MICROPHONE,type:I.G.START})})()}requestPreviewStreamForDeviceId(U,V,ne){V===l.lW.Camera&&this.handleCameraChanges({type:ve.START_PREVIEW,deviceId:U,videoElement:ne})}stopVideoPreviewForVideoInput(U){this.handleCameraChanges({type:ve.STOP_PREVIEW,videoElement:U||this.cameraPreviewVideoElement})}setCamera(U){U!==this.isCameraEnabled&&(this.isCameraEnabled=U,this.isCameraEnabled?(this.handleCameraChanges({type:ve.ENABLE}),this.maybeCheckSystemMediaAccess(i.mT.CAMERA)):this.handleCameraChanges({type:ve.DISABLE}))}setCameraQuality(U,V,ne,ie){this.audioVideoFacade.chooseVideoInputQuality(U,V,ne),this.audioVideoFacade.setVideoMaxBandwidthKbps(ie)}audioVideoDidStart(){return(0,t.coroutine)(function*(){})()}localVideoTileDidUpdate(U){(!U.boundVideoStream||!U.boundVideoStream.active)&&this.callLogger.info(`DeviceManager::localVideoTileDidUpdate ${U.boundVideoStream?"boundVideoStream is not active":"there is no boundVideoStream"}`),!U.isContent&&!this.isCameraEnabled?this.waitForCameraReady.reject(new Error("Camera disabled")):this.waitForCameraReady.resolve()}maybeBindAudioOutputElement(){var U=this;return(0,t.coroutine)(function*(){if(!U.isAudioOutputElementBound&&U.audioOutputElement){try{yield U.audioVideoFacade.bindAudioElement(U.audioOutputElement)}catch(V){U.callLogger.info(`bindAudioElement failed: error: ${V.name}, message: ${V.message}`);return}U.isAudioOutputElementBound=!0}})()}maybeCheckSystemMediaAccess(U){var V=this;return(0,t.coroutine)(function*(){if(!(0,y.y3)()){const{status:ne}=G.Ay.canAccessMediaResource(U);if(ne===l.eJ.Granted)return{isAvailable:!1,status:l.eJ.Granted}}if((0,y.cX)()||V.options.useGetMediaAccessCheckForWindows&&(0,y.uF)())try{const ne=G.Ay.canAccessMediaResource(U);if(V.callLogger.info(`DeviceManager::getMediaAccessStatus ${U} electron API available: ${ne.isAvailable} and status: ${ne.status}`),!ne.isAvailable)return{isAvailable:!1,status:l.eJ.NotDetermined};if(ne.status===l.eJ.Granted)return V.observer.onDeviceAccessApproved(U),ne;let ie;return ne.status===l.eJ.NotDetermined&&(ie=U==="screen"?null:yield G.Ay.requestMediaAccess(U),V.callLogger.info(`DeviceManager::askForMediaAccess ${U} electron API available: ${!!(ie!=null&&ie.isAvailable)} and isConsentGranted: ${ie==null?void 0:ie.isGranted}`),U!=="screen"&&(ie!=null&&ie.isGranted))?(V.observer.onDeviceAccessApproved(U),{status:l.eJ.Granted,isAvailable:!0}):((ne.status===l.eJ.Denied||ie&&!ie.isGranted)&&(V.micPermissionDenied=!0,V.observer.onCheckSystemMediaAccess(U)),ne)}catch(ne){V.callLogger.info(`DeviceManager::Error retrieving system access for ${U}: ${ne}`)}return{isAvailable:!1,status:l.eJ.NotDetermined}})()}audioInputsChanged(){this.callLogger.info("DeviceManager::audioInputsChanged"),this.logDevices([l.lW.Microphone]),this.updateMicrophone(),this.observer.onClearNoMediaInput(i.mT.MICROPHONE)}audioInputMuteStateChanged(U,V){this.callLogger.info(`DeviceManager::audioInputMuteStateChanged: device: ${U}, ${V?"muted":"unmuted"}`)}audioInputStreamEnded(U){var V;U&&(this.callLogger.info("DeviceManager::audioInputStreamEnded"),((V=(0,P.Nj)(l.lW.Microphone))===null||V===void 0?void 0:V.id)===U&&(this.callLogger.warn("Call audio stream ended unexpectedly"),this.observer.onSetNoMediaInput(i.mT.MICROPHONE)))}audioOutputsChanged(){this.callLogger.info("DeviceManager::audioOutputsChanged"),this.updateSpeaker(),this.logDevices([l.Q4]),this.observer.onClearNoAudioOutput(i.NS.AUDIO_ELEMENT_ERROR)}videoInputsChanged(){const U=this.getPreferredDevice(l.lW.Camera);this.callLogger.info("DeviceManager::videoInputsChanged"),this.logDevices([l.lW.Camera]),!U&&this.isCameraEnabled?(this.callLogger.info("DeviceManager::triggering camera stop due to active camera no longer being available"),this.observer.onSetNoMediaInput(i.mT.CAMERA)):this.observer.onClearNoMediaInput(i.mT.CAMERA)}videoInputStreamEnded(U){var V=this;return(0,t.coroutine)(function*(){U&&(V.callLogger.info("DeviceManager::videoInputStreamEnded"),V.observer.onSetNoMediaInput(i.mT.CAMERA))})()}logDevices(){let U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:J.LL;const V=(0,P.T5)();if(!V){this.callLogger.error("No devices found");return}(0,J.my)(this.callLogger,V,U)}getPreferredDevice(U){return(0,P.Nj)(U)}enumerateDevices(){const U=(0,P.T5)();if(!U){this.callLogger.error("No devices found in v2 device manager");return}this.callLogger.info("V2 devices found. Updating device store"),this.observer.onDevicesUpdated(U)}handleCameraChanges(U){var V=this;return(0,t.coroutine)(function*(){switch(U.type){case ve.START_PREVIEW:yield V.runCameraActivityStartPreview(U);break;case ve.STOP_PREVIEW:yield V.runCameraActivityStopPreview(U);break;case ve.ENABLE:yield V.runCameraActivityEnable();break;case ve.DISABLE:yield V.runCameraActivityDisable();break;default:break}})()}updateMicrophone(){var U=this;return(0,t.coroutine)(function*(){const V=U.getPreferredDevice(l.lW.Microphone);if(!V){U.callLogger.info("No audio input device found");return}const{id:ne,label:ie}=V;if(U.micPermissionDenied&&(U.callLogger.error("Microphone permission is denied. The user must grant permissions and fully quit and restart Slack to join the Huddle"),U.hasRetriedAudioInit))return;U.callLogger.info(`Selected audio input device: ${V.label||V.id}, deviceId: ${ne}, deviceLabel: ${ie}`);const Qe={autoGainControl:U.prefs.audio?U.prefs.audio.enableAGC:!0,deviceId:ne};let je=!0;if(U.voiceFocusManager&&U.voiceFocusManager.isAvailable()&&(U.prefs.audio&&U.prefs.audio.enableNoiseSuppression)){if(U.voiceFocusDevice||(U.voiceFocusDevice=yield U.voiceFocusManager.getTransformDevice()),U.voiceFocusDevice){const ht=yield U.voiceFocusDevice.chooseNewInnerDevice(Qe);U.voiceFocusDevice=ht}U.voiceFocusDevice||(je=!1)}else je=!1;U.voiceFocusDevice&&(0,p.Y)({name:p.R1.VoiceFocusDevice,ref:U.voiceFocusDevice}),U.callLogger.info("Noise suppression:",je?"enabled":"disabled");try{if(U.isStartMutedBarrierActive&&(U.callLogger.info("Start muted barrier active"),U.audioVideoFacade.realtimeMuteLocalAudio()),je)if(U.voiceFocusDevice)yield U.initAudioInput(U.voiceFocusDevice);else throw new Error("Trying noise suppression with no voice focus transform device");else navigator.mediaDevices&&navigator.mediaDevices.getSupportedConstraints&&Object.prototype.hasOwnProperty.call(navigator.mediaDevices.getSupportedConstraints(),"noiseSuppression")&&(Qe.noiseSuppression=!0),yield U.initAudioInput(Qe)}catch(ht){U.callLogger.error(`chooseAudioInputDevice failed: error: ${ht.name}, message: ${ht.message}`),yield U.handleAudioInitError(ht);return}U.hasRetriedAudioInit&&(U.callLogger.info("Microphone initialized successfully after retry"),U.hasRetriedAudioInit=!1),U.initAudioAnalyserForPreview(),U.setupAudioInputTrackHandler({preferredDeviceId:ne}),!(yield U.isMediaPermissionDeniedOnWindows(i.mT.MICROPHONE))&&(U.observer.onSelfPermissionUpdated(U.micPermissionDenied,l.lW.Microphone),U.attemptToInitMicrophoneNative(V.label))})()}updateSpeaker(){var U=this;return(0,t.coroutine)(function*(){const V=U.getPreferredDevice(l.Q4);if(!V){U.callLogger.info("No audio output device found");return}const{id:ne,label:ie}=V;U.callLogger.info(`Selected audio output device id: ${V.label||V.id}, deviceId: ${ne}, deviceLabel: ${ie}`),yield U.audioVideoFacade.chooseAudioOutput(ne),U.observer.onOutputDeviceChanged({id:V.id,type:l.Q4}),(0,P.i_)(ne,l.Q4)})()}updateCamera(){var U=this;return(0,t.coroutine)(function*(){const V=U.getPreferredDevice(l.lW.Camera);if(!V){U.callLogger.info("No video input device found");return}U.callLogger.info(`Selected video input device id: ${V.label||V.id}`);try{yield U.setCameraVideoInputDevice(V)}catch(ne){U.callLogger.info(`chooseVideoInputDevice failed: error: ${ne.name}, message: ${ne.message}`),ne instanceof a.Ll?U.observer.onSelfPermissionUpdated(!0,l.lW.Camera):U.observer.onSelfPermissionUpdated(!1,l.lW.Camera);return}(yield U.isMediaPermissionDeniedOnWindows(i.mT.CAMERA))||U.observer.onSelfPermissionUpdated(!1,l.lW.Camera)})()}setCameraVideoInputDevice(U){var V=this;return(0,t.coroutine)(function*(){if(yield V.clearVideoTransformDeviceRefs(),V.options.backgroundVideoFilteringSetting===l.uT.NONE){yield V.initVideoInput(U.id);return}switch(V.prefs.video.effect){case w.t.Blur:{yield V.setCameraVideoInputDeviceWithBackgroundBlurFilter(U);break}case w.t.Background:{V.options.backgroundVideoFilteringSetting!==l.uT.Both?yield V.initVideoInput(U.id):yield V.setCameraVideoInputDeviceWithBackgroundReplacementImageFilter({videoDevice:U,selectedBackgroundImageKey:V.prefs.video.effectBgKey});break}default:{yield V.initVideoInput(U.id);break}}})()}setCameraVideoInputDeviceWithBackgroundReplacementImageFilter(U){let{videoDevice:V,selectedBackgroundImageKey:ne}=U;var ie=this;return(0,t.coroutine)(function*(){const Ue=V.label||V.id;if(ne===void 0){ie.callLogger.info(`No background image key provided id: ${Ue}`),yield ie.initVideoInput(V.id);return}const je=D.g.find(Bn=>Bn.key===ne);if(je===void 0)return ie.handleErrorApplyVideoEffects("Image could not be found, switching to default input for device",V);ie.callLogger.info(`Enabling video input device with background image filter id: ${Ue}`);const ot=yield(yield fetch(je.url)).blob();if(ie.options.useHuddlesFilterWorker){const Bn=yield createImageBitmap(ot),pn=new te(V.id,Bn);ie.setVideoTransformDeviceRefs({transformDevice:pn,processors:[]}),yield ie.initVideoInput(pn),yield ie.cleanupTransformDevicesAndCameraIfShuttingdown();return}const gt=(0,a.jq)(),wt=(0,a.px)(),Dn=[];if(!(yield a.i3.isSupported(ie.chimeLogger))&&he)return ie.handleErrorApplyVideoEffects("VideoFxProcessor is not supported on host device. Defaulting to non image replaced background",V);if(!(yield wt.isSupported())&&!he)return ie.handleErrorApplyVideoEffects("BackgroundReplacementVideoFrameProcessor is not supported on host device. Defaulting to non image replaced background",V);if(ie.isShuttingDown)return;const Nn={...ie.defaultVideoProcessorOptions,imageBlob:ot};if(he){if(ie.videoFxConfig={backgroundBlur:{isEnabled:!1,strength:ae},backgroundReplacement:{isEnabled:!0,backgroundImageURL:je.url,defaultColor:void 0}},ie.videoFxProcessor=yield a.i3.create(ie.chimeLogger,ie.videoFxConfig,_e),!ie.videoFxProcessor)return ie.handleErrorApplyVideoEffects("VideoFxProcessor could not be created defaulting to normal input for device",V);ie.callLogger.info(`VideoFxProcessor background image replacement enabled for device id: ${Ue}`),Dn.push(ie.videoFxProcessor)}else{const Bn=yield wt.create(void 0,Nn);if(Bn)ie.setupVideoBackgroundFrameProcessor({processor:Bn,backgroundEffect:x.Image}),Dn.push(Bn);else return ie.handleErrorApplyVideoEffects("BackgroundReplacementVideoFrameProcessor could not be created defaulting to normal input for device",V)}ie.callLogger.info(`Enabling video input device with background image replacement id: ${Ue}`);const Sn=new gt(ie.chimeLogger,V.id,Dn);ie.setVideoTransformDeviceRefs({transformDevice:Sn,processors:Dn}),yield ie.initVideoInput(Sn),yield ie.cleanupTransformDevicesAndCameraIfShuttingdown()})()}handleErrorApplyVideoEffects(U,V){var ne=this;return(0,t.coroutine)(function*(){const ie=V.label||V.id;ne.callLogger.info(`${U}: ${ie}`),yield ne.initVideoInput(V.id)})()}setCameraVideoInputDeviceWithBackgroundBlurFilter(U){var V=this;return(0,t.coroutine)(function*(){const ne=(0,a.jq)(),ie=(0,a.kM)(),Ue=U.label||U.id;if(V.callLogger.info(`Enabling video input device with background blur filter id: ${Ue}`),V.options.useHuddlesFilterWorker){const ht=new te(U.id);V.setVideoTransformDeviceRefs({transformDevice:ht,processors:[]}),yield V.initVideoInput(ht),yield V.cleanupTransformDevicesAndCameraIfShuttingdown();return}const Qe=[];if(he){if(!(yield a.i3.isSupported(V.chimeLogger)))return V.handleErrorApplyVideoEffects("VideoFxProcessor is not supported on host device. Defaulting to non blurred background",U);if(V.videoFxConfig={backgroundBlur:{isEnabled:!0,strength:ae},backgroundReplacement:{isEnabled:!1,backgroundImageURL:"",defaultColor:void 0}},V.videoFxProcessor=yield a.i3.create(V.chimeLogger,V.videoFxConfig,_e),!V.videoFxProcessor)return V.handleErrorApplyVideoEffects("VideoFxProcessor could not be created defaulting to normal input for device",U);V.callLogger.info(`VideoFxProcessor background blur enabled for device id: ${Ue}`),Qe.push(V.videoFxProcessor)}else{if(!(yield ie.isSupported()))return V.handleErrorApplyVideoEffects("BackgroundBlurVideoFrameProcessor is not supported on host device. Defaulting to non blurred background",U);const ht={...V.defaultVideoProcessorOptions,blurStrength:15},ot=yield ie.create(void 0,ht);if(!ot)return V.handleErrorApplyVideoEffects("BackgroundBlurVideoFrameProcessor could not be created defaulting to normal input for device",U);V.setupVideoBackgroundFrameProcessor({processor:ot,backgroundEffect:x.Blur}),Qe.push(ot)}V.callLogger.info(`Enabling video input device with background blur filter id: ${Ue}`);const je=new ne(V.chimeLogger,U.id,Qe);V.setVideoTransformDeviceRefs({transformDevice:je,processors:Qe}),yield V.initVideoInput(je),yield V.cleanupTransformDevicesAndCameraIfShuttingdown()})()}cleanupTransformDevicesAndCameraIfShuttingdown(){var U=this;return(0,t.coroutine)(function*(){U.isShuttingDown&&(U.callLogger.info("Cleaning up background video frame processor and video input because huddle has ended"),yield U.audioVideoFacade.stopVideoInput(),yield U.clearVideoTransformDeviceRefs())})()}initVideoInputDevices(){var U=this;return(0,t.coroutine)(function*(){const ne=(yield U.audioVideoFacade.listVideoInputDevices()).length>0;return ne||U.observer.onSelfPermissionUpdated(!0,l.lW.Camera),U.prefs=(0,L.Bh)(),U.enumerateDevices(),ne})()}runCameraActivityStartPreview(U){var V=this;return(0,t.coroutine)(function*(){const ne=U.deviceId,ie=U.videoElement;!ne||!ie||(V.cameraPreviewVideoElement=ie,yield V.setPreferredCameraDeviceForPreview(ne),yield V.startCameraPreview())})()}runCameraActivityStopPreview(U){var V=this;return(0,t.coroutine)(function*(){const ne=U.videoElement;ne&&(ne!==V.cameraPreviewVideoElement&&V.callLogger.warn("Mismatch in preview video element"),V.audioVideoFacade.hasStartedLocalVideoTile()?V.detachStreamFromCameraPreview():V.stopCameraPreview(),delete V.cameraPreviewVideoElement)})()}runCameraActivityEnable(){var U=this;return(0,t.coroutine)(function*(){var V;!U.audioVideoFacade.hasStartedLocalVideoTile()&&U.cameraPreviewVideoElement&&U.stopCameraPreview(),yield U.updateCamera(),U.audioVideoFacade.hasStartedLocalVideoTile()||(U.waitForCameraReady=(0,c.u)(),U.audioVideoFacade.startLocalVideoTile(),yield U.waitForCameraReady.catch(()=>{U.callLogger.info("Camera disabled before self video stream was properly bound. Explicitly disabling camera."),U.runCameraActivityDisable()})),U.attachStreamToCameraPreview(),(V=U.huddleEventsTrace)===null||V===void 0||V.update({name:I.p.VIDEO,type:I.G.START})})()}runCameraActivityDisable(){var U=this;return(0,t.coroutine)(function*(){var V;U.detachStreamFromCameraPreview(),yield U.audioVideoFacade.stopVideoInput(),U.audioVideoFacade.stopLocalVideoTile(),(V=U.huddleEventsTrace)===null||V===void 0||V.update({name:I.p.VIDEO,type:I.G.STOP}),U.cameraPreviewVideoElement&&(yield U.updateCamera(),yield U.startCameraPreview())})()}startCameraPreview(){var U=this;return(0,t.coroutine)(function*(){U.cameraPreviewVideoElement&&(U.waitForCameraReady=(0,c.u)(),U.audioVideoFacade.startVideoPreviewForVideoInput(U.cameraPreviewVideoElement),U.cameraPreviewVideoElement.addEventListener("canplay",V=>{U.waitForCameraReady.resolve()}),yield U.waitForCameraReady)})()}stopCameraPreview(){var U=this;return(0,t.coroutine)(function*(){U.cameraPreviewVideoElement&&(U.audioVideoFacade.stopVideoPreviewForVideoInput(U.cameraPreviewVideoElement),yield U.audioVideoFacade.stopVideoInput())})()}attachStreamToCameraPreview(){var U;if(!this.cameraPreviewVideoElement)return;const V=(U=this.audioVideoFacade.getLocalVideoTile())===null||U===void 0?void 0:U.state();V&&V.boundVideoStream&&a.xc.connectVideoStreamToVideoElement(V.boundVideoStream,this.cameraPreviewVideoElement,!0)}detachStreamFromCameraPreview(){this.cameraPreviewVideoElement&&a.xc.disconnectVideoStreamFromVideoElement(this.cameraPreviewVideoElement,!0)}addAudioElementErrorHandler(){this.audioOutputElement.addEventListener("error",this.audioElementErrorHandler)}removeAudioElementErrorHandler(){this.audioOutputElement.removeEventListener("error",this.audioElementErrorHandler)}audioElementErrorHandler(U){var V,ne,ie,Ue;const Qe=((V=U.target)===null||V===void 0||(ne=V.error)===null||ne===void 0?void 0:ne.code)||"unavailable",je=((ie=U.target)===null||ie===void 0||(Ue=ie.error)===null||Ue===void 0?void 0:Ue.message)||U.message;this.callLogger.warn(`HTML_AUDIO_ELEMENT_ERROR code: ${Qe}, message: ${je}`),this.observer.onSetNoAudioOutput(i.NS.AUDIO_ELEMENT_ERROR)}isMediaPermissionDeniedOnWindows(U){var V=this;return(0,t.coroutine)(function*(){if(V.options.useGetMediaAccessCheckForWindows&&(0,y.uF)()&&(0,y.dY)("4.9.0")){const ne=yield V.maybeCheckSystemMediaAccess(U);if(ne&&ne.status==="denied")return!0}return!1})()}initAudioAnalyserForPreview(){const U=(0,a._R)().getAudioContext();if(!U){this.callLogger.warn("Unable to get AudioContext");return}U.resume();const V=this.audioVideoFacade.createAnalyserNodeForAudioInput();if(V){var ne;const ie=new E(V);(ne=this.audioLevelMonitor)===null||ne===void 0||ne.setPreviewAudioAnalyser(ie)}}setupAudioInputTrackHandler(U){let{preferredDeviceId:V}=U;this.audioInputTrackHandler&&(this.callLogger.info("Tearing down previous Audio Input Track Handler"),this.audioInputTrackHandler.tearDown(),this.audioInputTrackHandler=void 0),this.callLogger.info("Setting up new audio input track handler"),this.audioInputTrackHandler=new k(this.defaultDeviceController,this.observer,this.callLogger),this.audioInputTrackHandler.initialize({preferredDeviceId:V})}constructor(U,V,ne,ie,Ue=!1,Qe,je,ht){this.audioVideoFacade=U,this.audioOutputElement=V,this.observer=ne,this.options=ie,this.isStartMutedBarrierActive=Ue,this.chimeLogger=Qe,this.defaultDeviceController=je,this.voiceFocusManager=ht,this.callLogger=(0,r.Jt)("DEVICES"),this.waitForCameraReady=(0,c.u)(),this.isAudioOutputElementBound=!1,this.videoFxConfig={backgroundBlur:{isEnabled:!1,strength:ae},backgroundReplacement:{isEnabled:!1,backgroundImageURL:"",defaultColor:void 0}},this.isShuttingDown=!1,this.cameraMetricsTimeout=null,this.micPermissionDenied=!1,this.hasRetriedAudioInit=!1;var ot=this;this.attemptToInitMicrophoneNative=(0,m.A)(function(){var pn=(0,t.coroutine)(function*(yn){try{if(!yn||!ot.options.useDevicesExp)return;const jn=yield(0,le.Lh)(yn),{error:Zn,canInit:Es}=jn;(0,h.A)(Zn)?Zn.includes("Method not available")||Zn.includes("only supported on Windows")?ot.callLogger.info("Microphone init test not supported on this client"):Es||ot.callLogger.warn(`ALERT! Possible init failure for microphone with device: ${yn}: ${Zn}`):ot.callLogger.info(`Successfully initialized microphone with device: ${yn}`)}catch(jn){ot.callLogger.error("Error attempting to init audio device",jn)}});return function(yn){return pn.apply(this,arguments)}}(),1e3);var gt=this;this.refreshMediaDeviceInfo=(0,t.coroutine)(function*(){gt.enumerateDevices()});var wt=this;this.handleAudioInitError=function(){var pn=(0,t.coroutine)(function*(yn){let jn=!wt.hasRetriedAudioInit;switch(yn.name){case"NotReadableError":wt.callLogger.warn("Either a hardware error (such as an OS/program/webpage lock) is preventing access to the microphone or the selected device is no longer available. Trying again");break;case"NotFoundError":wt.callLogger.warn("No audio input devices are available. Trying again");break;case"OverconstrainedError":wt.callLogger.warn("The specified constraints resulted in no devices being found. Trying again");break;case"PermissionDeniedError":wt.callLogger.error("User denied permission to access microphone.");break;case"TypeError":wt.callLogger.error("An unexpected TypeError occured during audio input initialization",yn),jn=!1;break;case"GetUserMediaError":wt.callLogger.error("An unexpected GetUserMediaError occured during audio input initialization",yn),jn=!1;break;default:wt.callLogger.error("Unknown error during audio input initialization"),jn=!1}const Zn=yn instanceof a.Ll;Zn||wt.observer.onSelfPermissionUpdated(!1,l.lW.Microphone),jn?(wt.hasRetriedAudioInit=!0,wt.callLogger.info("Retrying audio input initialization"),yield wt.updateMicrophone(),yield wt.updateSpeaker()):(Zn&&wt.observer.onSelfPermissionUpdated(!0,l.lW.Microphone),wt.callLogger.error("Audio input initialization failed. Not retrying"))});return function(yn){return pn.apply(this,arguments)}}(),this.setVideoTransformDeviceRefs=pn=>{let{transformDevice:yn,processors:jn}=pn;this.currentVideoTransformDevice=yn,this.currentVideoFrameProcessors=jn,(0,p.Y)({name:p.R1.VideoTransformDevice,ref:yn})},this.setupVideoBackgroundFrameProcessor=pn=>{let{processor:yn,backgroundEffect:jn}=pn;var Zn;this.clearVideoBackgroundFrameProcessor(),!he&&(this.currentVideoFrameProcessor=yn,this.currentVideoFrameProcessorObserver=new W({backgroundEffect:jn}),(Zn=this.currentVideoFrameProcessor)===null||Zn===void 0||Zn.addObserver(this.currentVideoFrameProcessorObserver),(0,p.Y)({name:p.R1.VideoFrameProcessor,ref:yn}))},this.clearVideoBackgroundFrameProcessor=()=>{he||this.currentVideoFrameProcessor&&this.currentVideoFrameProcessorObserver&&(this.currentVideoFrameProcessor.removeObserver(this.currentVideoFrameProcessorObserver),this.currentVideoFrameProcessorObserver=void 0,this.currentVideoFrameProcessor=void 0)};var Dn=this;this.clearVideoTransformDeviceRefs=(0,t.coroutine)(function*(){Dn.clearVideoBackgroundFrameProcessor(),Dn.currentVideoFrameProcessors&&(Dn.currentVideoFrameProcessors.forEach(pn=>{pn.destroy()}),Dn.currentVideoFrameProcessors.length=0,Dn.currentVideoFrameProcessors=void 0),Dn.currentVideoTransformDevice&&(yield Dn.currentVideoTransformDevice.stop(),Dn.currentVideoTransformDevice=void 0)});var Nn=this;this.initAudioInput=function(){var pn=(0,t.coroutine)(function*(yn){yn&&(yield Nn.audioVideoFacade.startAudioInput(yn))});return function(yn){return pn.apply(this,arguments)}}();var Sn=this;this.initVideoInput=function(){var pn=(0,t.coroutine)(function*(yn){if(!yn)return;yield Sn.audioVideoFacade.startVideoInput(yn),Sn.recordCameraResolution();const jn=(0,v.A)(yn,"device",yn);typeof jn=="string"&&(0,P.i_)(jn,l.lW.Camera)});return function(yn){return pn.apply(this,arguments)}}(),this.recordCameraResolution=()=>{this.cameraMetricsTimeout=setTimeout(()=>{try{var pn,yn,jn,Zn,Es;if(this.isShuttingDown||!((pn=this.audioVideoFacade)===null||pn===void 0?void 0:pn.hasStartedLocalVideoTile()))return;const bs=this.audioVideoFacade.getLocalVideoTile(),Ss=(yn=bs==null?void 0:bs.state())===null||yn===void 0?void 0:yn.boundVideoStream,rs=Ss==null?void 0:Ss.getVideoTracks()[0];if(rs instanceof CanvasCaptureMediaStreamTrack){Y.A.publish({type:S.lx.CameraResolution,update:{isCanvasStream:!0}});return}const H=rs==null?void 0:rs.getSettings(),me=rs==null?void 0:rs.getCapabilities(),Fe=H==null?void 0:H.width,ut=H==null?void 0:H.height,An=H==null?void 0:H.frameRate,vn=me==null||(jn=me.width)===null||jn===void 0?void 0:jn.max,Hn=me==null||(Zn=me.height)===null||Zn===void 0?void 0:Zn.max,Kt=me==null||(Es=me.frameRate)===null||Es===void 0?void 0:Es.max;vn&&Hn&&Y.A.publish({type:S.lx.CameraResolution,update:{cameraWidth:Fe,cameraHeight:ut,cameraFrameRate:An,cameraMaxWidth:vn,cameraMaxHeight:Hn,cameraMaxFrameRate:Kt,isCanvasStream:!1}})}catch{}},5e3)},this.callLogger.info("Using device manager v2"),this.updateMicrophone=M(this,this.updateMicrophone,{skipIntermediatePendingRuns:!1}),this.updateSpeaker=M(this,this.updateSpeaker,{skipIntermediatePendingRuns:!1}),this.updateCamera=M(this,this.updateCamera,{skipIntermediatePendingRuns:!1}),this.handleCameraChanges=M(this,this.handleCameraChanges,{skipIntermediatePendingRuns:!1}),this.audioElementErrorHandler=this.audioElementErrorHandler.bind(this),this.audioVideoFacade.addDeviceChangeObserver(this),this.prefs=(0,L.Bh)(),this.addAudioElementErrorHandler(),this.audioLevelMonitor=new C,this.voiceFocusManager&&this.callLogger.info(`Voice Focus available?: ${this.voiceFocusManager.isAvailable()}`),this.prefs.audio&&this.callLogger.info(`Noise suppression setting: ${this.prefs.audio.enableNoiseSuppression}`),this.defaultVideoProcessorOptions={filterCPUUtilization:Ae,reportingPeriodMillis:Q,logger:this.chimeLogger};const{huddleEventsTrace:Bn}=(0,T.A)().getAllTraceHandlers();this.huddleEventsTrace=Bn}},"DeviceManager");var de=e(63202349),Ie=e(3390261877),ce=e(3320454392);let j=u(class{constructor(U,V,ne){this.sequenceNumber=U,this.message=V,this.timestampMs=ne}},"MeetingEvent"),N=u(class Yo{getEventCaptureSize(){return this.eventCapture.length}startEventPublishScheduler(U){var V=this;this.intervalScheduler.start((0,t.coroutine)(function*(){if(V.getEventCaptureSize()===0)return;const ne=V.eventCapture.slice(0,U);try{V.postEvents(ne),V.eventCapture=V.eventCapture.slice(ne.length)}catch(ie){V.log.error(ie.message)}}))}stop(){let U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this.stopped||(this.intervalScheduler.stop(),this.postEvents(this.eventCapture,U,!0),this.eventCapture=[],this.stopped=!0,this.observer=void 0)}logEvent(U,V){const{meetingHistory:ne,...ie}=V;try{const Ue=JSON.stringify({name:U,attributes:ie});this.eventCapture.push(new j(this.sequenceNumber,Ue,Date.now())),this.sequenceNumber+=1}catch(Ue){this.log.error(Ue.message)}}postEvents(U){let V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,ne=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;var ie;U.length===0&&!V&&!ne||(ie=this.observer)===null||ie===void 0||ie.onMeetingEvents(this.meetingId,this.mediaRegion,this.attendeeId,this.callId,U,V,ne)}constructor(U,V,ne,ie,Ue,Qe=Yo.DEFAULT_BATCH_SIZE,je=Yo.DEFAULT_INTERVAL_MS){this.observer=U,this.meetingId=V,this.mediaRegion=ne,this.attendeeId=ie,this.callId=Ue,this.batchSize=Qe,this.intervalMs=je,this.eventCapture=[],this.sequenceNumber=0,this.log=(0,r.tZ)("MEETING-EVENT-LOGGER"),this.stopped=!1,this.intervalScheduler=new Ie.A(this.intervalMs),this.startEventPublishScheduler(this.batchSize);var ht=this;(0,ce.A)((0,t.coroutine)(function*(){ht.stop(!0)}))}},"MeetingEventLogger");N.DEFAULT_BATCH_SIZE=100,N.DEFAULT_INTERVAL_MS=65*60*1e3;var b=e(3245843483),R=e(1033764764),K=e(9372409576),B=e(7299481592);const $=1e4,Z=3e4;class re{observe(U){this.connections.push(U),this.intervalHandle||(this.intervalHandle=window.setInterval(()=>{this.collect()},this.collectionIntervalMs))}stopObserving(U){remove(this.connections,U),this.connections.length===0&&clearInterval(this.intervalHandle)}collect(){var U=this;this.connections.forEach(function(){var V=_bluebirdCoroutine(function*(ne){const ie=ne.getPeerConnection();if(!ie)return;const Ue=Te(yield ie.getStats());Pe(ne,Ue);const Qe={...se(Ue),send:Ue.sendTracks.map(je=>ge(je,Ue)),recv:Ue.recvTracks.map(je=>({...Oe(je,Ue),peerId:ne.getPeerIdFromRemoteStreamId(Ue.trackIdToStreamId[je.id])}))};U.observer.onStats(Qe)});return function(ne){return V.apply(this,arguments)}}())}constructor(U,V=$){this.observer=U,this.collectionIntervalMs=V,this.connections=[]}}u(re,"StatsManager");function Te(be){const U=Array.from(be.entries()),V=reduce(U,(ne,ie)=>{let[Ue,Qe]=ie;return Je(Qe)?Qe.remoteSource===!0?ne.recvTracks.push(Qe):ne.sendTracks.push(Qe):we(Qe)||Re(Qe)?Qe.trackId&&(ne.rtpStats[Qe.trackId]=Qe):it(Qe)?ne.transports[Qe.id]=Qe:et(Qe)?ne.candidates[Qe.id]=Qe:lt(Qe)?ne.candidatePairs[Qe.id]=Qe:nt(Qe)?ne.codecs[Qe.id]=Qe:at(Qe)?Qe.trackIds&&Qe.trackIds.forEach(je=>{ne.trackIdToStreamId[je]=Qe.streamIdentifier}):ze(Qe)&&Qe.trackIdentifier&&(ne.mediaSources[Qe.trackIdentifier]=Qe),ne},{trackIdToStreamId:{},sendTracks:[],recvTracks:[],candidates:{},candidatePairs:{},rtpStats:{},codecs:{},transports:{},mediaSources:{}});return V.recvTracks=V.recvTracks.filter(ne=>V.trackIdToStreamId[ne.id]!==void 0),V}u(Te,"groupStatsByType");function Ce(be){const U=filter(be.candidatePairs,je=>!!je.nominated),V=maxBy(U,je=>je.priority);if(!V)return;const ne=find(be.candidates,(je,ht)=>ht===V.localCandidateId);if(!ne)return;let ie=ne.candidateType==="relay"?ne.relayProtocol:ne.protocol;ne.candidateType==="prflx"&&(ie+=" (unreliable)");const Ue="unknown";return{candidateType:ne.candidateType||Ue,networkType:ne.networkType||Ue,transportType:ie||Ue}}u(Ce,"getConnectionNetworkInfo");function Pe(be,U){const V=Ce(U);V&&be.maybeLogNetworkInfo(V)}u(Pe,"reportConnectionNetworkInfo");const fe={nominal:1,fair:2,serious:3,critical:4};function pe(){return q.apply(this,arguments)}u(pe,"makeAppMetricsStats");function q(){return q=(0,t.coroutine)(function*(){var be;if(!(0,y.y3)())return;let U,V,ne;if(b.vkf.isAvailable()){var ie;const ot=yield(0,b.vkf)();if(!ot)return;U=ot.processMetrics,V=fe[ot.thermalState],ne=(ie=ot.speedLimit)===null||ie===void 0?void 0:ie.limit}else U=yield(0,b.rc_)();if(!U)return;let Ue=null;const Qe=U.reduce((ot,gt)=>{var wt,Dn,Nn;return gt.type==="GPU"&&(Ue=gt),{cpu:ot.cpu+((gt==null||(wt=gt.cpu)===null||wt===void 0?void 0:wt.percentCPUUsage)||0),memory:{workingSetSize:ot.memory.workingSetSize+(0,R.UK)((gt==null||(Dn=gt.memory)===null||Dn===void 0?void 0:Dn.workingSetSize)||0),peakWorkingSetSize:ot.memory.peakWorkingSetSize+(0,R.UK)((gt==null||(Nn=gt.memory)===null||Nn===void 0?void 0:Nn.peakWorkingSetSize)||0)}}},{cpu:0,memory:{workingSetSize:0,peakWorkingSetSize:0}}),je=Ue==null||(be=Ue.cpu)===null||be===void 0?void 0:be.percentCPUUsage,ht=je?Qe.cpu-Ue.cpu.percentCPUUsage:Qe.cpu;return{...Qe,cpuWithoutGpu:ht,gpu:je,thermalState:V,speedLimit:ne}}),q.apply(this,arguments)}u(q,"_makeAppMetricsStats");function se(be){const[U,...V]=Object.values(be.transports);debugCheck(!V.length,"Can there be more than one transport stat in a report?");const ne=U&&U.selectedCandidatePairId,ie=be.candidatePairs[ne];if(!ne||!ie)return;const Ue=be.candidates[ie.remoteCandidateId]||{};return{availableOutgoingBitrate:ie.availableOutgoingBitrate||0,availableIncomingBitrate:ie.availableIncomingBitrate||0,totalBytesSent:ie.bytesSent,totalBytesReceived:ie.bytesReceived,currentRoundTripTime:ie.currentRoundTripTime,totalRoundTripTime:ie.totalRoundTripTime,protocol:Ue.protocol==="udp"?slack.calls.analytics.Protocol.UDP:slack.calls.analytics.Protocol.TCP,pathType:Ue.candidateType==="host"?slack.calls.analytics.PathType.DIRECT:slack.calls.analytics.PathType.RELAY,clientTime:Date.now()}}u(se,"makeConnectionStats");function ge(be,U){const V=U.rtpStats[be.id]||{},ne={codec:Le(V,U),bytesSent:V.bytesSent,packetsSent:V.packetsSent};if(be.kind==="audio"){const ie=be.trackIdentifier?U.mediaSources[be.trackIdentifier]:null;return ie?{...ne,audioStats:{audioLevel:ie.audioLevel,totalAudioEnergy:ie.totalAudioEnergy,totalSamplesDuration:ie.totalSamplesDuration,echoReturnLoss:ie.echoReturnLoss,echoReturnLossEnhancement:ie.echoReturnLossEnhancement}}:{...ne,audioStats:{audioLevel:be.audioLevel,echoReturnLoss:be.echoReturnLoss,echoReturnLossEnhancement:be.echoReturnLossEnhancement}}}return{...ne,videoStats:{frameHeight:be.frameHeight,frameWidth:be.frameWidth,framesSent:be.framesSent,hugeFramesSent:be.hugeFramesSent,framesPerSecond:V.framesPerSecond,framesEncoded:V.framesEncoded}}}u(ge,"makeOutboundMediaStats");function Oe(be,U){const V=U.rtpStats[be.id]||{},ne={codec:Le(V,U),bytesReceived:V.bytesReceived,packetsReceived:V.packetsReceived,packetsLost:V.packetsLost,fractionLost:V.fractionLost,jitter:V.jitter};return be.kind==="audio"?{...ne,audioStats:{audioLevel:be.audioLevel,jitterBufferDelay:be.jitterBufferDelay,concealedSamples:be.concealedSamples,concealmentEvents:be.concealmentEvents}}:{...ne,videoStats:{firCount:V.firCount,nackCount:V.nackCount,pliCount:V.pliCount,sliCount:V.sliCount,frameHeight:be.frameHeight,frameWidth:be.frameWidth,framesPerSecond:be.framesPerSecond,framesCorrupted:be.framesCorrupted,framesDecoded:be.framesDecoded,framesDropped:be.framesDropped,framesReceived:be.framesReceived}}}u(Oe,"makeInboundMediaStats");function Le(be,U){const V=be.codecId,ne=get(U.codecs,V),ie=get(ne,"mimeType");return We(ie)}u(Le,"getCodecForRtpStat");function We(be){switch(be){case"video/VP8":return slack.calls.analytics.Codec.VP8;case"video/VP9":return slack.calls.analytics.Codec.VP9;case"video/H264":return slack.calls.analytics.Codec.H264;case"audio/opus":return slack.calls.analytics.Codec.OPUS;default:return slack.calls.analytics.Codec.UNKNOWN}}u(We,"parseCodec");function Re(be){return be.type==="inbound-rtp"}u(Re,"isRecvRtpStat");function we(be){return be.type==="outbound-rtp"}u(we,"isSendRtpStat");function Je(be){return be.type==="track"}u(Je,"isTrackStat");function it(be){return be.type==="transport"}u(it,"isTransportStat");function et(be){return be.type==="local-candidate"||be.type==="remote-candidate"}u(et,"isIceCandidateStat");function lt(be){return be.type==="candidate-pair"}u(lt,"isIceCandidatePairStat");function nt(be){return be.type==="codec"}u(nt,"isCodecStat");function at(be){return be.type==="stream"}u(at,"isStreamStat");function ze(be){return be.type==="media-source"}u(ze,"isMediaSourceStat");const Ke=5e3;let He=u(class{constructor(U,V){this.audioVideoFacade=U,this.observer=V,this.callLogger=(0,r.Jt)("HUDDLES-STATS-MANAGER"),this.isDisconnected=!1;var ne=this;this.onMetricsDidReceive=function(){var Qe=(0,t.coroutine)(function*(je){if(!je)return;const ht=yield ne.collectScreenshareStats();ne.reportAppMetrics({clientMetricReport:je,screenshareRtcStats:ht})});return function(je){return Qe.apply(this,arguments)}}(),this.reportDisconnect=()=>{this.isDisconnected=!0,this.callLogger.info("Disconnect reported. Resuming app metrics collection without client metric report."),this.reportAppMetrics();const Qe=setInterval(()=>{if(!this.isDisconnected){clearInterval(Qe);return}this.callLogger.info("User still disconnected. Reporting app metrics without client metric report."),this.reportAppMetrics()},Ke)},this.cleanup=()=>{};var ie=this;this.collectScreenshareStats=(0,t.coroutine)(function*(){let Qe;try{var je;const ht=(je=ie.audioVideoFacade.contentShareController.contentAudioVideo)===null||je===void 0?void 0:je.rtcPeerConnection;return ht?(Qe=yield ht.getStats(),Qe):void 0}catch(ht){ie.callLogger.error("Failed to collect screenshare stats",ht)}});var Ue=this;this.reportAppMetrics=(0,t.coroutine)(function*(){let{clientMetricReport:Qe,screenshareRtcStats:je}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!Qe&&!Ue.isDisconnected)return;Ue.isDisconnected&&Qe&&(Ue.isDisconnected=!1);const ht=yield Ue.collectAppMetrics();Ue.observer.onAppMetrics({appMetrics:ht,clientMetricReport:Qe,screenshareRtcStats:je})}),this.collectAppMetrics=(0,t.coroutine)(function*(){const Qe=yield pe();if(!Qe)return;let je=Qe;return Qe&&(je=(0,n.A)({...Qe,cpu:Qe.cpuWithoutGpu},"cpuWithoutGpu")),je})}},"HuddlesStatsManager"),Ye=u(class{start(){var U;this.isSignallingOnly=!1,(U=this.videoStreamsManager)===null||U===void 0||U.addObserver(this),this.audioVideoFacade.addObserver(this),this.audioVideoFacade.start(),this.observer.onStart()}startWithSignalingOnly(){this.audioVideoFacade.start({signalingOnly:!0}),this.isSignallingOnly=!0}stop(){var U=this;return(0,t.coroutine)(function*(){U.isSignallingOnly?(U.waitForStart.resolve(),U.waitForStop.resolve(!0)):yield U.waitForStart,U.isStopRequested=!0,U.audioVideoFacade.stop()})()}audioVideoDidStartConnecting(U){if(!U)this.callLogger.info("Starting Chime session"),this.observer.onStartSessionTimeout(),this.observer.onAudioVideoDidStartConnecting(),this.isReconnecting=!1;else{var V,ne,ie;this.callLogger.info("Reconnecting Chime session"),this.observer.onSelfDisconnected(),(V=this.statsManager)===null||V===void 0||(ne=V.reportDisconnect)===null||ne===void 0||ne.call(V),(ie=this.huddleReconnectTracer)===null||ie===void 0||ie.traceReconnectAttempt(),this.isReconnecting=!0}}audioVideoDidStart(){if(this.callLogger.info("Chime audio video session started"),this.isReconnecting){var U;this.callLogger.info("Successfully re-connected to Huddle"),(U=this.huddleReconnectTracer)===null||U===void 0||U.traceReconnectAttemptOutcome({isSuccess:!0}),this.isReconnecting=!1}this.observer.onAudioVideoDidStart(),this.deviceManager.audioVideoDidStart(),this.dataChannelSubscribers.forEach(V=>V.onConnectDatachannel(this.audioVideoFacade)),this.waitForStart.resolve()}audioVideoDidStop(U){var V,ne,ie,Ue;const Qe=a.b9[U.statusCode()],je=`Chime session stopped. StatusCode: ${Qe}`;if(this.callLogger.info(je),this.isReconnecting&&U.isFailure()){var ht;this.callLogger.info("Failed to re-connect to Huddle"),(ht=this.huddleReconnectTracer)===null||ht===void 0||ht.traceReconnectAttemptOutcome({isSuccess:!1})}this.audioVideoFacade.removeObserver(this),this.observer.onScreenShareStopped(),this.observer.onAudioVideoDidStop(),(V=this.videoStreamsManager)===null||V===void 0||V.removeObserver(this),(ne=this.meetingEventLogger)===null||ne===void 0||ne.stop(),delete this.meetingEventLogger,(Ue=(ie=this.statsManager).cleanup)===null||Ue===void 0||Ue.call(ie),delete this.statsManager,this.dataChannelSubscribers.forEach(ot=>ot.onDisconnectDataChannel()),!this.isStopRequested&&U.isTerminal()&&(this.observer.onClogError(je),this.observer.onError(i.uZ.CallEnded,Qe)),this.waitForStop.resolve(this.isStopRequested)}videoTileDidUpdate(U){if(!U.boundVideoStream||!U.boundAttendeeId){U.tileId&&this.observer.onVideoTileRemoved(U.tileId);return}const V=new a.jp(U.boundAttendeeId).base();this.selfAttendeeId===V?(this.deviceManager.localVideoTileDidUpdate(U),this.observer.onSelfVideoTileUpdate(U)):this.observer.onPeerVideoTileUpdate(V,U)}videoTileWasRemoved(U){this.consoleLog.info(`Video tile removed: tileId=${U}`),this.observer.onVideoTileRemoved(U)}videoAvailabilityDidChange(U){this.consoleLog.debug(`Video availability: RemoteVideoAvailable=${U.remoteVideoAvailable}, CanStartLocalVideo=${U.canStartLocalVideo}`)}metricsDidReceive(U){var V=this;return(0,t.coroutine)(function*(){var ne;(ne=V.statsManager)===null||ne===void 0||ne.onMetricsDidReceive(U)})()}connectionDidBecomePoor(){this.callLogger.warn("SDK detected poor connection")}connectionDidSuggestStopVideo(){this.callLogger.warn("SDK suggested stop video, maybe poor connection")}videoSendDidBecomeUnavailable(){this.callLogger.warn("Video send is unavailable")}remoteVideoSourcesDidChange(U){var V;(V=this.videoStreamsManager)===null||V===void 0||V.remoteVideoSourcesDidChange(U)}tileWillBePausedByDownlinkPolicy(U){this.observer.onVideoTileWillPause(U)}tileWillBeUnpausedByDownlinkPolicy(U){this.observer.onVideoTileWillUnpause(U)}constructor(U,V,ne,ie,Ue,Qe,je,ht,ot,gt,wt=[]){this.selfAttendeeId=U,this.meetingId=V,this.mediaRegion=ne,this.callId=ie,this.audioVideoFacade=Ue,this.observer=Qe,this.deviceManager=je,this.videoStreamsManager=ht,this.dataChannelSubscribers=wt,this.callLogger=(0,r.tZ)("FREE-WILLY-AV"),this.consoleLog=(0,r.Cc)("FREE-WILLY-AV"),this.waitForStart=(0,c.u)(),this.waitForStop=(0,c.u)(),this.isStopRequested=!1,this.isSignallingOnly=!1,this.isReconnecting=!1,ot&&(this.waitForStart=ot),gt&&(this.waitForStop=gt),this.statsManager=new He(Ue,Qe),this.meetingEventLogger=new N(Qe,this.meetingId,this.mediaRegion,this.selfAttendeeId,this.callId),{reconnectTrace:this.huddleReconnectTracer}=(0,T.A)().getAllTraceHandlers()}},"AudioVideoObserverImpl");var _t=e(8571983633),vt=e(489015593),Tt=e(2671711178),Lt=e(5954792826),ft=e(9240258658),mt=e(8193414630),Yt=e(1990810649);function nn(){switch((0,b.IXB)()){case-3:return 1/.7;case-2:return 1/.8;case-1:return 1/.9;case 0:return 1;case 1:return 1/1.1;case 2:return 1/1.25;case 3:return 1/1.5;case 4:return 1/1.75;case 5:return 1/2;default:return 1}}u(nn,"getScaleFactorForCurrentZoomLevel");function jt(be,U){const[V,ne]=be;return[V*U,ne*U]}u(jt,"getScaledCoordinates");function gn(be,U){var V;const ie=(0,y.y3)()&&!(0,y.dY)("4.18.0")?1/nn():1,Ue=((V=be.itemId)===null||V===void 0?void 0:V.toString())||null,Qe=be.itemId==="self"?U:Ue;switch(be.type){case i.Sl.New:case i.Sl.Edit:{const[je,ht]=jt(be.segment.a,ie),[ot,gt]=jt(be.segment.b,ie),[wt,Dn]=jt(be.segment.c,ie),[Nn,Sn]=jt(be.segment.d,ie);return{itemId:Qe,type:be.type===i.Sl.New?ft.Y.Draw.Type.NEW:ft.Y.Draw.Type.EDIT,segment:{a:{x:je,y:ht},b:{x:ot,y:gt},c:{x:wt,y:Dn},d:{x:Nn,y:Sn}}}}case i.Sl.End:return{itemId:Qe,type:ft.Y.Draw.Type.END};case i.Sl.ChangeHue:return{itemId:Qe,type:ft.Y.Draw.Type.CHANGE_HUE,hue:be.hue};case i.Sl.Position:return{itemId:Qe,type:ft.Y.Draw.Type.POSITION,x:be.x,y:be.y};default:return(0,mt.Kh)(be)}}u(gn,"convertDrawMessageToPeerMessage");function on(be,U){const V=be.itemId===U?"self":be.itemId;switch(be.type){case ft.Y.Draw.Type.NEW:case ft.Y.Draw.Type.EDIT:{const ie=(0,y.y3)()&&!(0,y.dY)("4.18.0")?nn():1;return{itemId:V,type:be.type===ft.Y.Draw.Type.NEW?i.Sl.New:i.Sl.Edit,segment:{a:[(be.segment.a.x||0)*ie,(be.segment.a.y||0)*ie],b:[(be.segment.b.x||0)*ie,(be.segment.b.y||0)*ie],c:[(be.segment.c.x||0)*ie,(be.segment.c.y||0)*ie],d:[(be.segment.d.x||0)*ie,(be.segment.d.y||0)*ie]}}}case ft.Y.Draw.Type.END:return{itemId:V,type:i.Sl.End};case ft.Y.Draw.Type.CHANGE_HUE:return{itemId:V,type:i.Sl.ChangeHue,hue:be.hue};case ft.Y.Draw.Type.POSITION:return{itemId:V,type:i.Sl.Position,x:be.x,y:be.y};default:(0,B.M)("Unhandled draw message case");return}}u(on,"convertPeerMessageToDrawMessage");function Xt(be){let U=Yt.o.Standard;return be.type&&be.type===ft.Y.Reacji.Type.Effect&&(U=Yt.o.Effect),be.type&&be.type===ft.Y.Reacji.Type.Gif&&(U=Yt.o.Gif),U}u(Xt,"convertFromPeerReactionType");function rn(be){let U=ft.Y.Reacji.Type.Standard;return be===Yt.o.Effect&&(U=ft.Y.Reacji.Type.Effect),be===Yt.o.Gif&&(U=ft.Y.Reacji.Type.Gif),U}u(rn,"convertToPeerReactionType");var Zt=e(1975685771);let Ht=u(class Ga{updatePresence(U,V){V?this.attendeesStates.set(U,this.initializeState()):this.attendeesStates.delete(U)}calculateScore(U,V,ne){const ie=this.attendeesStates.get(U);if(!ie||(ne!==null&&(ie.muted=ne),ie.muted))return 0;const Ue=Date.now();if(V){ie.noiseFloor=this.updateNoiseFloor(ie,V);const Qe={timestamp:Ue,volume:V};ie.volumeSamples.push(Qe)}return this.pruneVolumeSamples(ie),this.getScore(ie,Ue)}prioritizeVideoSendBandwidthForActiveSpeaker(){return!0}initializeState(){return{muted:!1,noiseFloor:0,volumeSamples:[]}}updateNoiseFloor(U,V){let ne=U.noiseFloor;return V>ne?ne=(1-this.params.slowAttackFactor)*ne+this.params.slowAttackFactor*V:ne=(1-this.params.fastDecayFactor)*ne+this.params.fastDecayFactor*V,Math.min(ne,this.params.noiseFloorMax)}pruneVolumeSamples(U){const V=Date.now()-this.params.analysisWindowMs,ne=U.volumeSamples;for(;ne.length&&ne[0].timestamp<V;)ne.shift()}getScore(U,V){return U.volumeSamples.reduce((ne,ie)=>{const Ue=Math.max(1,Math.ceil((V-ie.timestamp)/1e3));return ne+Math.max(0,ie.volume-U.noiseFloor)/Ue},0)}constructor(){this.attendeesStates=new Map,this.params=Ga.FAST_SWITCHING_PARAMS}},"WindowedActiveSpeakerPolicy");Ht.DAMPED_SWITCHING_PARAMS={slowAttackFactor:.05,fastDecayFactor:.5,noiseFloorMax:.03,analysisWindowMs:3e3},Ht.FAST_SWITCHING_PARAMS={slowAttackFactor:.05,fastDecayFactor:.5,noiseFloorMax:.03,analysisWindowMs:300};let Bt=u(class{shutdown(){window.clearTimeout(this.timerHandle),delete this.timerHandle}addDisconnectedAttendee(U){new a.jp(U).hasModality(a.jp.MODALITY_CONTENT)||this.disconnectedAttendees.has(U)||(this.disconnectedAttendees.set(U,Date.now()+this.timeoutMs),this.maybeStartTimer())}deleteDisconnectedAttendee(U){this.disconnectedAttendees.delete(U),this.disconnectedAttendees.size===0&&(window.clearTimeout(this.timerHandle),delete this.timerHandle)}hasDisconnectedAttendee(U){return this.disconnectedAttendees.has(U)}maybeStartTimer(){if(this.timerHandle||this.disconnectedAttendees.size===0)return;const U=this.disconnectedAttendees.get([...this.disconnectedAttendees.keys()][0]);U&&(this.timerHandle=window.setTimeout(this.runTimer,Math.max(U-Date.now(),10)))}runTimer(){window.clearTimeout(this.timerHandle),delete this.timerHandle;const U=[],V=Date.now();this.disconnectedAttendees.forEach((ne,ie)=>{V>ne&&(this.observer.onStalePeer(ie),U.push(ie))}),U.forEach(ne=>{this.disconnectedAttendees.delete(ne)}),this.maybeStartTimer()}constructor(U,V){this.timeoutMs=U,this.observer=V,this.runTimer=this.runTimer.bind(this),this.disconnectedAttendees=new Map}},"StaleAttendeeChecker");var Qt=e(4075246222),sn=e(2208015175),Mn=e(8403493408),ct=e(2604971659),yt=e(2462761869);let Rt=u(class{addSelf(U){this.selfId=U,this.addPeer(U)}removeSelf(U){(0,B.M)(U===this.selfId,"Bad attendeeId when removing self"),delete this.selfId,this.removePeer(U)}addPeer(U){this.ids=(0,Qt.A)(this.ids,[U]),(0,sn.A)(this.cachedPeerStates[U],(ne,ie)=>{this.peerStateForwarder[ie]&&!(0,_t.A)(ne)&&this.peerStateForwarder[ie](U,ne)}),delete this.cachedPeerStates[U];const V=[];(0,sn.A)(this.cachedCallState,(ne,ie)=>{this.callStateForwarder[ie]&&!(0,_t.A)(ne)&&this.callStateForwarder[ie].getPeerIdFn(ne)===U&&(this.callStateForwarder[ie].forwardFn(ne),this.callStateForwarder[ie].isCached||V.push(ie))}),this.cachedCallState=(0,n.A)(this.cachedCallState,V)}removePeer(U){(0,Mn.A)(this.ids,U),(0,sn.A)((0,ct.A)(this.cachedCallState),V=>{if(this.callStateForwarder[V]){const ne=this.callStateForwarder[V].removeFn(this.cachedCallState[V],U);if(!ne){delete this.cachedCallState[V];return}this.cachedCallState[V]=ne}})}getPeers(){return this.ids}hasPeer(U){return this.ids.includes(U)}hasAttendee(U){return this.hasPeer(U)||U===this.selfId}updateCallState(U){const V=U;(0,sn.A)(U,(ne,ie)=>{this.callStateForwarder[ie]&&(V[ie]=this.callStateForwarder[ie].updateFn(this.cachedCallState[ie],ne))}),(0,sn.A)(this.callStateForwarder,(ne,ie)=>{this.forwardOrCacheCallState([V],ie,ne)})}updatePeerStates(U){(0,sn.A)(this.peerStateForwarder,(V,ne)=>{this.forwardOrCachePeerState(U,ne,V)})}setIncludeSelfAndNoneActiveSpeaker(U,V){U===this.includeSelf&&V===this.includeNone||(this.includeSelf=U,this.includeNone=V,(0,sn.A)(this.cachedCallState,(ne,ie)=>{this.callStateForwarder[ie]&&!(0,_t.A)(ne)&&this.callStateForwarder[ie].forwardFn(ne)}))}forwardOrCachePeerState(U,V,ne){U.filter(Ue=>!(0,_t.A)(Ue.state[V])).map(Ue=>({id:Ue.peerId,value:Ue.state[V]})).forEach(Ue=>{let{id:Qe,value:je}=Ue;this.ids.includes(Qe)?ne(Qe,je):this.cachedPeerStates[Qe]={...this.cachedPeerStates[Qe],[V]:je}})}forwardOrCacheCallState(U,V,ne){U.filter(Ue=>!(0,_t.A)(Ue[V])).map(Ue=>({value:Ue[V]})).forEach(Ue=>{let{value:Qe}=Ue;const je=ne.getPeerIdFn(Qe);let ht=!1;je&&(this.ids.includes(je)||je===this.NO_ACTIVE_SPEAKER)?ne.forwardFn(Qe):ht=!0,(ht||ne.isCached)&&(this.cachedCallState={...this.cachedCallState,[V]:Qe})})}getAttendeeId(U){return new a.jp(U).base()}constructor(U){this.observer=U,this.NO_ACTIVE_SPEAKER="none",this.ids=[],this.includeSelf=!1,this.includeNone=!1,this.cachedCallState={},this.cachedPeerStates={},this.callStateForwarder={activeSpeakerList:{updateFn:(V,ne)=>{const ie=V||[],Ue=ne&&ne.length?ne[0]:this.NO_ACTIVE_SPEAKER;return(0,yt.A)(ie,[Ue,this.NO_ACTIVE_SPEAKER]),ie.unshift(Ue),ie},removeFn:(V,ne)=>{if(V)return(0,Mn.A)(V,ne),V},getPeerIdFn:V=>{const ne=V.filter(ie=>ie===this.NO_ACTIVE_SPEAKER?this.includeNone:this.includeSelf||this.selfId!==this.getAttendeeId(ie));if(ne.length)return ne[0]},forwardFn:V=>{const ne=V.filter(ie=>ie===this.NO_ACTIVE_SPEAKER&&this.includeNone?!0:this.includeSelf||this.selfId!==this.getAttendeeId(ie));!ne.length||ne[0]===this.NO_ACTIVE_SPEAKER?this.observer.onNewActiveSpeaker(void 0):this.observer.onNewActiveSpeaker(this.selfId===ne[0]?"self":ne[0])},isCached:!0}},this.peerStateForwarder={isDrawEnabled:(V,ne)=>{this.observer.onPeerDrawEnabled(V,ne)}}}},"PeerCache");var xe=e(252549317);let Nt=u(class{destroy(){var U,V,ne;(U=this.peerCache)===null||U===void 0||U.getPeers().forEach(ie=>this.audioVideoFacade.realtimeUnsubscribeFromVolumeIndicator(ie)),delete this.peerCache,(V=this.staleAttendeeChecker)===null||V===void 0||V.shutdown(),delete this.staleAttendeeChecker,this.audioVideoFacade.realtimeUnsubscribeToAttendeeIdPresence(this.realtimeAttendeeIdPresenceCallback),this.audioVideoFacade.realtimeUnsubscribeToFatalError(this.realtimeFatalErrorCallback),this.audioVideoFacade.realtimeUnsubscribeToLocalSignalStrengthChange(this.realtimeLocalSignalStrengthChangeCallback),this.audioVideoFacade.realtimeUnsubscribeToMuteAndUnmuteLocalAudio(this.realtimeMuteAndUnmuteLocalAudioCallback),this.audioVideoFacade.realtimeUnsubscribeToSetCanUnmuteLocalAudio(this.realtimeSetCanUnmuteLocalAudioCallback),this.audioVideoFacade.unsubscribeFromActiveSpeakerDetector(this.activeSpeakerDetectorCallback),delete this.windowedActiveSpeakerPolicy,this.audioVideoFacade.realtimeUnsubscribeFromReceiveDataMessage(this.dataChannelTopic),(ne=this.audioVideoFacade.transcriptionController)===null||ne===void 0||ne.unsubscribeFromTranscriptEvent(this.realtimeReceiveTranscriptEventCallback),this.attendeeMuteRequests={}}selfDrawEnabled(U){this.sendPeerMessageOverDataChannel(new ft.Y({capabilities:{isDrawEnabled:U},fromPeerIdString:this.selfAttendeeId}))}sendReacji(U,V){let ne;V?ne={emoji:U,type:rn(V)}:ne={emoji:U},this.sendPeerMessageOverDataChannel(new ft.Y({reacji:ne,fromPeerIdString:this.selfAttendeeId}))}sendBackground(U){this.sendPeerMessageOverDataChannel(new ft.Y({background:{url:U},fromPeerIdString:this.selfAttendeeId}))}sendMuteRequest(U){this.sendPeerMessageOverDataChannel(new ft.Y({muteRequest:{peerId:U},fromPeerIdString:this.selfAttendeeId}))}sendJukeboxRequest(U){this.sendPeerMessageOverDataChannel(new ft.Y({jukeboxRequest:{songKey:U},fromPeerIdString:this.selfAttendeeId}))}sendJukeboxStopRequest(){this.sendPeerMessageOverDataChannel(new ft.Y({jukeboxRequest:{stop:!0},fromPeerIdString:this.selfAttendeeId}))}sendDrawMessage(U){this.sendPeerMessageOverDataChannel(new ft.Y({draw:gn(U,this.selfAttendeeId),fromPeerIdString:this.selfAttendeeId}))}sendContentShareDetails(U){this.sendPeerMessageOverDataChannel(new ft.Y({contentShareDetails:{sourceType:U,itemId:this.selfAttendeeId},fromPeerIdString:this.selfAttendeeId}))}sendRecordingStartNotification(){this.sendPeerMessageOverDataChannel(new ft.Y({recordingStartNotification:{type:ft.Y.RecordingStartNotification.Type.SUMMARY},fromPeerIdString:this.selfAttendeeId}))}onStalePeer(U){this.callLogger.info(`Removing stale peer: ${U}`),this.attendeeLeft(U),this.observer.onPeerDisconnected(U),this.observer.onPeerLeft(U)}setIncludeSelfAndNoneActiveSpeaker(U,V){var ne;(ne=this.peerCache)===null||ne===void 0||ne.setIncludeSelfAndNoneActiveSpeaker(U,V)}attendeeJoined(U){if(U===this.selfAttendeeId){var V;(V=this.peerCache)===null||V===void 0||V.addSelf(U)}else{var ne;(ne=this.peerCache)===null||ne===void 0||ne.addPeer(U)}this.audioVideoFacade.realtimeSubscribeToVolumeIndicator(U,this.realtimeVolumeIndicatorCallback),this.consoleLog.info(`Subscribed to attendee=${U} volume indicator`)}attendeeLeft(U){if(U===this.selfAttendeeId){var V;(V=this.peerCache)===null||V===void 0||V.removeSelf(U)}else{var ne;(ne=this.peerCache)===null||ne===void 0||ne.removePeer(U)}this.audioVideoFacade.removeVideoTilesByAttendeeId(U),this.audioVideoFacade.realtimeUnsubscribeFromVolumeIndicator(U),this.consoleLog.info(`Unsubscribed from attendee=${U} volume indicator`)}sendPeerMessageOverDataChannel(U){this.isDataChannelReady()?this.audioVideoFacade.realtimeSendDataMessage(this.dataChannelTopic,ft.Y.encode(U).finish()):this.logFailureToSendPeerMessage(U)}isAttendeeOfTypeContent(U){return new a.jp(U).hasModality(a.jp.MODALITY_CONTENT)}realtimeAttendeeIdPresenceCallback(U,V,ne,ie){var Ue;if(this.consoleLog.info(`Attendee presence: attendeeId=${U}, isSelf=${this.selfAttendeeId===new a.jp(U).base()}, present=${V}, externalUserId=${ne}, dropped=${ie}`),(Ue=this.windowedActiveSpeakerPolicy)===null||Ue===void 0||Ue.updatePresence(U,V),this.isAttendeeOfTypeContent(U)){V||this.audioVideoFacade.removeVideoTilesByAttendeeId(U);return}if(!ne){this.callLogger.error(`Attendee presence: no externalUserId for attendee=${U}`),this.observer.onClogError("MissingExternalUserId");return}let Qe=null;if(V){var je;ie===!1&&!(!((je=this.peerCache)===null||je===void 0)&&je.hasAttendee(U))?Qe="joined":Qe="reconnected"}else ie===!0?Qe="disconnected":Qe="left";if(Qe===null){this.callLogger.error("Presence callback event is null");return}if(this.selfAttendeeId===U)switch(Qe){case"joined":this.observer.onSelfJoined(),this.observer.onSelfConnected();break;case"left":this.observer.onSelfDisconnected(),this.observer.onSelfLeft();break;case"disconnected":this.observer.onSelfDisconnected();break;case"reconnected":this.observer.onSelfConnected();break;default:this.callLogger.error(`unknown self event ${Qe}`);return}else{const wt=(0,Lt.l)(ne);if(!wt){this.callLogger.error(`No externalUserId for ${U}`);return}switch(Qe){case"joined":{var ht;(ht=this.staleAttendeeChecker)===null||ht===void 0||ht.deleteDisconnectedAttendee(U),this.observer.onPeerJoined(U,wt),this.observer.onPeerConnected(U),this.updatePeerVideoTile(U);break}case"left":this.observer.onPeerDisconnected(U),this.observer.onPeerLeft(U);break;case"disconnected":var ot;(ot=this.staleAttendeeChecker)===null||ot===void 0||ot.addDisconnectedAttendee(U),this.observer.onPeerDisconnected(U);break;case"reconnected":{var gt;(gt=this.staleAttendeeChecker)===null||gt===void 0||gt.deleteDisconnectedAttendee(U),this.observer.onPeerConnected(U),this.updatePeerVideoTile(U);break}default:this.callLogger.error(`unknown peer event ${Qe}`);return}}Qe==="joined"&&this.attendeeJoined(U),Qe==="left"&&this.attendeeLeft(U)}realtimeFatalErrorCallback(U){this.callLogger.error(`Chime session fatal error: name=${U.name}, message=${U.message}`),this.observer.onClogError(`FatalError: ${U.name} - ${U.message}`)}realtimeLocalSignalStrengthChangeCallback(U){this.consoleLog.debug(`Local attendee signalStrength=${U}`)}realtimeMuteAndUnmuteLocalAudioCallback(U){this.callLogger.debug(`Local attendee mute=${U}`),this.observer.onPeerMuted("self",U)}realtimeSetCanUnmuteLocalAudioCallback(U){this.consoleLog.debug(`Local attendee can unmute = ${U}`)}realtimeVolumeIndicatorCallback(U,V,ne,ie,Ue){this.consoleLog.debug(`Attendee volume indicator: attendeeId=${U}, volume=${V}, muted=${ne}, signalStrength=${ie}, externalUserId=${Ue}`),this.selfAttendeeId!==U&&(ne?this.observer.onPeerMuted(U,!0):ne!==null&&ne===!1&&this.observer.onPeerMuted(U,!1)),ie!==null&&(this.selfAttendeeId===U?this.observer.onSelfConnectionQualityChanged("uplink",(0,i.MK)(ie)):this.observer.onPeerConnectionQualityChanged(U,"uplink",(0,i.MK)(ie)))}activeSpeakerDetectorCallback(U){var V;(V=this.peerCache)===null||V===void 0||V.updateCallState({activeSpeakerList:U})}realtimeReceiveDataMessageCallback(U){if(this.selfAttendeeId===U.senderAttendeeId){if(!U.throttled)return;this.callLogger.info(`Data message throttled: size=${U.data.length} bytes`);return}let V;try{V=ft.Y.decode(U.data)}catch(ne){this.callLogger.error(`Peer Message failed during decode, ignoring peer message.
				| Error: ${ne}
				| Data Sender Attendee ID: ${U.senderAttendeeId}
				| Data Sender External Attendee ID: ${U.senderExternalUserId}
				| Topic: ${U.topic}`);return}this.handlePeerMessageFromDataMessage(V,U.senderAttendeeId)}handlePeerMessageFromDataMessage(U,V){const ne=V;if(U.jukeboxRequest){var ie;if(!(0,Zt.Z)(ne,"senderAttendeeId is not populated")||!(0,Zt.Z)(U.jukeboxRequest,"message.jukeboxRequest is required in the jukebox request message"))return;if(!this.peerCache||!(!((ie=this.peerCache)===null||ie===void 0)&&ie.hasPeer(ne))){this.callLogger.info(`Dropping jukeboxRequest from unknown peer: ${ne}`);return}U.jukeboxRequest.songKey&&!U.jukeboxRequest.stop&&this.observer.onJukeboxRequest(U.jukeboxRequest.songKey),U.jukeboxRequest.stop&&this.observer.onJukeboxStopRequest()}else if(U.reacji){var Ue;if(!(0,Zt.Z)(ne,"senderAttendeeId is not populated")||!(0,Zt.Z)(U.reacji.emoji,"reacji.emoji is required in the reacji message"))return;if(!((Ue=this.peerCache)===null||Ue===void 0)&&Ue.hasPeer(ne)){const gt=Xt(U.reacji);this.observer.onPeerReacji(ne,U.reacji.emoji,!0,gt)}else this.callLogger.info(`Dropping reacji from unknown peer: ${ne}`)}else if(U.draw){var Qe;const gt=on(U.draw,this.selfAttendeeId);if(!(0,Zt.Z)(ne,"senderAttendeeId is not populated")||!(0,Zt.Z)(gt,"Draw message must be correctly formed"))return;!((Qe=this.peerCache)===null||Qe===void 0)&&Qe.hasPeer(ne)?this.observer.onPeerDrawMessage(ne,gt):this.callLogger.info(`Dropping draw message from unknown peer: ${ne}`)}else if(U.capabilities){if(!(0,Zt.Z)(ne,"senderAttendeeId is not populated"))return;if(!(0,_t.A)(U.capabilities.isDrawEnabled)){var je;(je=this.peerCache)===null||je===void 0||je.updatePeerStates([{peerId:ne,state:{isDrawEnabled:U.capabilities.isDrawEnabled}}])}}else if(U.muteRequest){var ht;if(!(0,Zt.Z)(ne,"senderAttendeeId is not populated")||!(0,Zt.Z)(U.muteRequest.peerId,"muteRequest.peerId is required in the background message"))return;if(!((ht=this.peerCache)===null||ht===void 0)&&ht.hasPeer(ne)){if(U.muteRequest.peerId===this.selfAttendeeId){var ot;const gt=this.attendeeMuteRequests[V],wt=gt==null?void 0:gt.lastRequestTime,Dn=Date.now();if(gt?(gt.lastRequestTime=Dn,gt.count+=1):this.attendeeMuteRequests[V]={lastRequestTime:Dn,count:1},wt&&Dn-wt<=this.attendeeMuteRequestThrottleMs){this.callLogger.info(`Throttled mute request from attendee: ${V} peer: ${ne}`);return}if(((ot=this.attendeeMuteRequests[V])===null||ot===void 0?void 0:ot.count)>=this.attendeeMuteRequestMaxAllowed){this.callLogger.info(`Dropped mute request from attendee: ${V} peer: ${ne}`);return}}this.observer.onPeerMuteRequest(ne,U.muteRequest.peerId)}else this.callLogger.info(`Dropping mute request from unknown peer: ${ne}`)}else if(U.contentShareDetails){if(!(0,Zt.Z)(ne,"senderAttendeeId is not populated")||!(0,Zt.Z)(U.contentShareDetails.itemId,"contentShareDetails.itemId is required in the contentShareDetails message")||!(0,Zt.Z)(U.contentShareDetails.sourceType,"contentShareDetails.sourceType is required in the contentShareDetails message"))return;this.callLogger.info(`Received content share details for item: ${U.contentShareDetails.itemId}, type: ${U.contentShareDetails.sourceType}`);const gt=(0,xe.Vd)(U.contentShareDetails.sourceType);this.observer.onContentShareDetailsUpdate(ne,gt,U.contentShareDetails.sourceType)}}realtimeReceiveTranscriptEventCallback(U){this.observer.onTranscriptionEvent(U)}updatePeerVideoTile(U){this.audioVideoFacade.getAllVideoTiles().filter(ie=>{const Ue=ie.state();return!Ue||!Ue.boundAttendeeId?!1:new a.jp(Ue.boundAttendeeId).base()===new a.jp(U).base()}).forEach(ie=>{const Ue=(ie==null?void 0:ie.state())||null;Ue&&this.observer.onPeerVideoTileUpdate(U,Ue)})}constructor(U,V,ne){var ie;this.selfAttendeeId=U,this.audioVideoFacade=V,this.observer=ne,this.callLogger=(0,r.Jt)("AUDIO-VIDEO-FACADE-SUBS"),this.consoleLog=(0,r.Cc)("AUDIO-VIDEO-FACADE-SUBS"),this.dataChannelTopic="data-channel",this.staleAttendeeTimeoutMs=60*1e3,this.attendeeMuteRequestThrottleMs=10*1e3,this.attendeeMuteRequestMaxAllowed=50,this.attendeeMuteRequests={},this.isDataChannelReady=()=>{var Ue,Qe,je;return(Ue=this.audioVideoFacade.audioVideoController)===null||Ue===void 0||(Qe=Ue.meetingSessionContext)===null||Qe===void 0||(je=Qe.signalingClient)===null||je===void 0?void 0:je.ready()},this.logFailureToSendPeerMessage=Ue=>{const Qe=Ue.draw?"draw":"reacji",je=u(()=>this.callLogger.error(`Failed to send ${Qe} peer message. Data channel is not ready to use.`),"logError");return(0,Tt.A)(Qe,je)},(0,vt.A)(this,["realtimeAttendeeIdPresenceCallback","realtimeFatalErrorCallback","realtimeLocalSignalStrengthChangeCallback","realtimeMuteAndUnmuteLocalAudioCallback","realtimeSetCanUnmuteLocalAudioCallback","activeSpeakerDetectorCallback","realtimeVolumeIndicatorCallback","realtimeReceiveDataMessageCallback","realtimeReceiveTranscriptEventCallback"]),this.audioVideoFacade.realtimeSubscribeToAttendeeIdPresence(this.realtimeAttendeeIdPresenceCallback),this.audioVideoFacade.realtimeSubscribeToFatalError(this.realtimeFatalErrorCallback),this.audioVideoFacade.realtimeSubscribeToLocalSignalStrengthChange(this.realtimeLocalSignalStrengthChangeCallback),this.audioVideoFacade.realtimeSubscribeToMuteAndUnmuteLocalAudio(this.realtimeMuteAndUnmuteLocalAudioCallback),this.audioVideoFacade.realtimeSubscribeToSetCanUnmuteLocalAudio(this.realtimeSetCanUnmuteLocalAudioCallback),this.windowedActiveSpeakerPolicy=new Ht,this.audioVideoFacade.subscribeToActiveSpeakerDetector(this.windowedActiveSpeakerPolicy,this.activeSpeakerDetectorCallback),this.audioVideoFacade.realtimeSubscribeToReceiveDataMessage(this.dataChannelTopic,this.realtimeReceiveDataMessageCallback),(ie=this.audioVideoFacade.transcriptionController)===null||ie===void 0||ie.subscribeToTranscriptEvent(this.realtimeReceiveTranscriptEventCallback),this.peerCache=new Rt(this.observer),this.staleAttendeeChecker=new Bt(this.staleAttendeeTimeoutMs,this)}},"AudioVideoFacadeSubscriber");var Ft=e(3867135795),qt=e(6696292586);const un=15,tt=2560,pt=1e3,Dt="text";let Wt=u(class{stopMusic(U){let{cleanObserver:V}=U;this.huddlesJukeboxEnabled&&this.isMusicEnabled&&(this.isMusicEnabled=!1,this.audioVideoFacade.stopContentShare(),V&&this.audioVideoFacade.removeContentShareObserver(this))}stop(){var U=this;return(0,t.coroutine)(function*(){U.isScreenshareEnabled&&(U.isStopRequested=yield U.stopContentShare()),U.huddlesJukeboxEnabled&&U.stopMusic({cleanObserver:!0}),U.isStopRequested||(U.observer.onScreenShareStopped(),U.audioVideoFacade.removeContentShareObserver(U))})()}contentShareDidStart(){this.log.info("Chime content share started"),this.waitForStart.resolve(!0),this.observer.onScreenShareStarted()}contentShareDidStop(){this.log.info("Chime content share stopped"),this.isScreenshareEnabled&&this.log.info("Screenshare stop: stream ended"),this.isScreenshareEnabled=!1,this.observer.onScreenShareStopped(),this.isStopRequested&&this.audioVideoFacade.removeContentShareObserver(this)}contentShareDidPause(){this.log.info("Chime content share paused")}contentShareDidUnpause(){this.log.info("Chime content share unpaused")}setSongStream(U){var V=this;return(0,t.coroutine)(function*(){V.huddlesJukeboxEnabled&&(V.waitForStart=(0,c.u)(),yield V.audioVideoFacade.startContentShare(U),V.isMusicEnabled=!0)})()}setScreenshare(U,V,ne){var ie=this;return(0,t.coroutine)(function*(){if(U===ie.isScreenshareEnabled)return;const{huddleEventsTrace:Ue}=(0,T.A)().getAllTraceHandlers();if(U){let Qe=V;if(V){const ht=V.split(":");ht.length===3&&ht[2]!=="0"&&(ht[2]="0",Qe=ht.join(":"),ie.log.warn(`Munging screen share media source id, before: ${V}, after: ${Qe}`))}let je;try{ie.waitForStart=(0,c.u)();const ht=u(ot=>{throw ie.log.error(`getUserMedia error during huddle screenshare attempt: ${ot.name} ${ot.message}`),ot},"logGetUserMediaError");if((0,b.g9M)()&&ie.log.info(`Starting screen share with zoomLevel = ${(0,b.IXB)()}`),(0,b.g9M)()&&ne){const{screenHeight:ot,screenWidth:gt,selectedDisplayId:wt}=ne;if(je={video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:Qe,maxFrameRate:un}}},gt&&ot){const Sn=je.video.mandatory,Bn=gt/ot,pn=tt;Sn.maxWidth=gt<pn?gt:pn,Sn.maxHeight=ot<pn?ot:pn;const yn=navigator.mediaDevices.getSupportedConstraints();(0,Ft.A)(yn,"aspectRatio")&&!!yn.aspectRatio&&(0,qt.A)(Bn)&&(Sn.minAspectRatio=Bn,Sn.maxAspectRatio=Bn),ie.log.info(`Starting screen share with resolution constraints: ${Sn.maxWidth} x ${Sn.maxHeight} | resolution provided: ${gt} x ${ot}`)}else ie.log.info("Starting application window share without proposed resolution");const Nn=yield navigator.mediaDevices.getUserMedia(je).catch(ht);(Nn==null?void 0:Nn.getVideoTracks().length)>0?(ie.log.debug(`Applying content hint to content share stream. Content Hint ${Dt}`),Nn.getVideoTracks()[0].contentHint=Dt):ie.log.warn("No video tracks where available when starting constrained content share"),setTimeout(()=>{const Sn=Nn.getVideoTracks()[0].getSettings(),Bn=(0,xe.MS)(Sn==null?void 0:Sn.deviceId);Y.A.publish({type:S.lx.ScreenshareContentType,update:{screenshareContentType:Bn}}),ie.log.info(`Created video track with resolution: ${Sn.width} x ${Sn.height} framerate: ${Sn.frameRate} aspect ratio: ${Sn.aspectRatio}`),wt&&ie.log.info(`Sharing from selected display: ${wt}`)},500),yield ie.audioVideoFacade.startContentShare(Nn),setTimeout(()=>ie.applyContentShareConstraints(Nn),pt),Ue==null||Ue.update({name:I.p.SCREENSHARE,type:I.G.START})}else{ie.log.info("Starting unconstrained content share with chime API's startContentShareFromScreenCapture");const ot=yield ie.audioVideoFacade.startContentShareFromScreenCapture(Qe).catch(ht);if(Ue==null||Ue.update({name:I.p.SCREENSHARE,type:I.G.START}),setTimeout(()=>ie.applyContentShareConstraints(ot),pt),(ot==null?void 0:ot.getVideoTracks().length)>0){ie.log.debug(`Applying content hint to content share stream. Content Hint ${Dt}`),ot.getVideoTracks()[0].contentHint=Dt;const gt=ot.getVideoTracks()[0].getSettings(),wt=(0,xe.MS)(gt==null?void 0:gt.deviceId);Y.A.publish({type:S.lx.ScreenshareContentType,update:{screenshareContentType:wt}})}else ie.log.warn("No video tracks where available when starting unconstrained content share")}}catch(ht){const ot=u(()=>{delete ie.waitForStart,ie.isScreenshareEnabled=!1,ie.observer.onScreenShareStopped()},"exitScreenshare");if(ht.name==="NotAllowedError"){ot(),ht.message==="Permission denied by system"&&ie.observer.onCheckSystemMediaAccess(i.mT.SCREEN);return}if(ht.name==="OverconstrainedError"){ot(),je&&ie.log.error(`Invalid stream constraints prevented screenshare from succeeding: ${JSON.stringify(je)}`);return}if(["TypeError","AbortError","Error"].includes(ht.name)){ot(),ie.observer.onScreenShareError(i.lD.ERROR);return}if(ht.name==="NotReadableError"){ot(),ie.observer.onScreenShareError(i.lD.NOT_READABLE_ERROR);return}throw ht.name==="NotFoundError"&&(ot(),ie.observer.onScreenShareError(i.lD.NOT_FOUND_ERROR)),ie.log.error(`Encountered an uncaught error attempting to start screen share: ${ht.name} ${ht.message}`),ie.waitForStart.resolve(!1),ot(),ht}ie.lastEnableTimeMs=Date.now(),ie.isScreenshareEnabled=U}else ie.isScreenshareEnabled&&(yield ie.stopContentShare())})()}applyContentShareConstraints(U){var V=this;return(0,t.coroutine)(function*(){if(!V.isExperimentalSDK)return;const ne=U.getVideoTracks()[0];if(!ne){V.log.info("Constraints not re-applied no video track available");return}ne.getSettings()||V.log.info("Constraints not re-applied no video track settings available");const Ue={width:{ideal:tt},height:{ideal:tt},frameRate:{ideal:un}};yield ne.applyConstraints(Ue),V.log.info("Constraints re-applied to content share (resolution overwrite applied)")})()}isScreenShareEnabled(){return this.isScreenshareEnabled||!1}stopContentShare(){var U=this;return(0,t.coroutine)(function*(){let V=!1;if(U.waitForStart.isPending()?Date.now()-U.lastEnableTimeMs>1e4?(V=!0,U.log.info(`Stop screen share, force: ${Date.now()-U.lastEnableTimeMs} ms since start`)):(U.log.info("Stop screen share, waiting for content share start to resolve"),V=yield U.waitForStart,U.log.info(`Stop screen share, wait for content share start resolve finished: ${V}`)):(V=U.waitForStart.value(),U.log.info(`Stop screen share, promise resolved: ${V}`)),V){U.audioVideoFacade.stopContentShare(),U.isScreenshareEnabled=!1;const{huddleEventsTrace:ne}=(0,T.A)().getAllTraceHandlers();ne==null||ne.update({name:I.p.SCREENSHARE,type:I.G.STOP}),Y.A.publish({type:S.lx.ScreenshareContentType,update:null})}else U.log.warn("Screen share disable ignored as screen share was not started successfully");return V})()}constructor(U,V,ne,ie){this.audioVideoFacade=U,this.observer=V,this.huddlesJukeboxEnabled=ne,this.isExperimentalSDK=ie,this.log=(0,r.tZ)("FREE-WILLY-CONTENT-SHARE"),this.isStopRequested=!1,this.lastEnableTimeMs=0,this.audioVideoFacade.addContentShareObserver(this),this.setScreenshare=M(this,this.setScreenshare,{skipIntermediatePendingRuns:!1})}},"ContentShareManager"),zt=u(class{addObserver(U){var V,ne;(V=this.videoDownlinkPolicy)===null||V===void 0||(ne=V.addObserver)===null||ne===void 0||ne.call(V,U)}removeObserver(U){var V,ne;(V=this.videoDownlinkPolicy)===null||V===void 0||(ne=V.removeObserver)===null||ne===void 0||ne.call(V,U)}remoteVideoSourcesDidChange(U){this.videoSources=U,this.updateChimeVideoPreferences()}updateChimeVideoPreferences(){if(!this.videoSources||!this.videoDownlinkPolicy)return;const U=[];this.videoSources.forEach(V=>{var ne;const ie=(ne=V.attendee)===null||ne===void 0?void 0:ne.attendeeId;ie===this.selfAttendeeId||!ie||(ie.includes("#content")||!this.isAudioOnlyMode)&&U.push(V)}),this.sendChimeVideoPreferences(U)}constructor({selfAttendeeId:U,videoDownlinkPolicy:V}){this.logger=new de.k("Huddles Video Streams Manager"),this.isAudioOnlyMode=!1,this.toggleAllIncomingVideo=ne=>{this.isAudioOnlyMode=ne,this.updateChimeVideoPreferences()},this.sendChimeVideoPreferences=ne=>{var ie;try{this.logger.debug(`Sending updated video preferences to chime: ${JSON.stringify(ne)}`)}catch{}(ie=this.videoDownlinkPolicy)===null||ie===void 0||ie.chooseRemoteVideoSources(ne)},this.videoDownlinkPolicy=V,this.selfAttendeeId=U}},"HuddlesVideoStreamsManager");const ln=null;var Tn=e(3146858537),cn=e(3398586081),hn=e(1829947126);let Cn=u(class{initialize(U,V){this.gainNode=V,this.audioContext=U}onAudioLevelUpdated(U){isNaN(U.value)||U.value<this.audioLevelActivationThreshold||(this.currentDuckingEndTimeout&&clearTimeout(this.currentDuckingEndTimeout),this.startDucking())}startDucking(){if(!this.gainNode||!this.audioContext)return;const U=this.defaultVolume*this.duckingAudioAdjustmentLevel;this.gainNode.gain.cancelScheduledValues(this.audioContext.currentTime),this.gainNode.gain.exponentialRampToValueAtTime(U,this.audioContext.currentTime+this.fadeInTimeLocal),this.currentDuckingEndTimeout=setTimeout(()=>{this.endDucking()},this.waitForFadeOutTime)}endDucking(){var U;this.gainNode&&this.audioContext&&((U=this.gainNode)===null||U===void 0||U.gain.exponentialRampToValueAtTime(this.defaultVolume,this.audioContext.currentTime+this.fadeOutTime))}constructor(U){this.defaultVolume=U,this.fadeOutTime=20,this.fadeInTimeLocal=.2,this.waitForFadeOutTime=3e3,this.duckingAudioAdjustmentLevel=.2,this.audioLevelActivationThreshold=.04,this.onAudioLevelUpdated=this.onAudioLevelUpdated.bind(this),hn.A.subscribeAll(this.onAudioLevelUpdated)}},"JukeboxDucker");const _n="HUDDLE-JUKEBOX";let Vn=u(class{startLocalJukebox(U){let{song:V,volume:ne}=U;var ie=this;return(0,t.coroutine)(function*(){var Ue;const Qe=ie.getSongUrl({song:V});if(Qe===ie.localAudioUrl)return;ie.callLogger.info(`Starting local jukebox song key: ${V.key}.`),ie.audioContext||(ie.audioContext=new AudioContext),ie.cleanup(),ie.localAudioUrl=Qe;const ht=yield(yield window.fetch(Qe)).arrayBuffer(),ot=yield ie.audioContext.decodeAudioData(ht);ie.audioBufferSourceNode=ie.audioContext.createBufferSource(),ie.audioBufferSourceNode.buffer=ot,ie.localAudio=new Audio,ie.localAudio.volume=ne,yield ie.localAudio.setSinkId((0,P._o)()),ie.localMediaStreamAudioDestinationNode=ie.audioContext.createMediaStreamDestination(),ie.gainNode=ie.audioContext.createGain(),(Ue=ie.jukeboxDucker)===null||Ue===void 0||Ue.initialize(ie.audioContext,ie.gainNode),ie.gainNode.gain.value=ie.defaultVolume,ie.audioBufferSourceNode.connect(ie.gainNode),ie.gainNode.connect(ie.localMediaStreamAudioDestinationNode),ie.localAudio.srcObject=ie.localMediaStreamAudioDestinationNode.stream,ie.audioBufferSourceNode.loop=!0,ie.audioBufferSourceNode.start(),ie.localAudio.play()})()}startContentShareJukebox(U){let{song:V}=U;var ne=this;return(0,t.coroutine)(function*(){var ie,Ue;ne.audioContext||(ne.audioContext=new AudioContext),ne.audioDestination||(ne.audioDestination=ne.audioContext.createMediaStreamDestination()),ne.callLogger.info(`Starting jukebox song key: ${V.key}`),ne.cleanup();const Qe=ne.getSongUrl({song:V}),ht=yield(yield window.fetch(Qe)).arrayBuffer(),ot=yield ne.audioContext.decodeAudioData(ht);return ne.audioBufferSourceNode=ne.audioContext.createBufferSource(),ne.audioBufferSourceNode.buffer=ot,ne.localAudio=new Audio,yield ne.localAudio.setSinkId((0,P._o)()),ne.localMediaStreamAudioDestinationNode=ne.audioContext.createMediaStreamDestination(),ne.gainNode=ne.audioContext.createGain(),(ie=ne.jukeboxDucker)===null||ie===void 0||ie.initialize(ne.audioContext,ne.gainNode),ne.gainNode.gain.value=ne.defaultVolume,ne.audioBufferSourceNode.connect(ne.gainNode),ne.gainNode.connect(ne.audioDestination),ne.gainNode.connect(ne.localMediaStreamAudioDestinationNode),ne.localAudio.srcObject=ne.localMediaStreamAudioDestinationNode.stream,ne.audioBufferSourceNode.loop=!0,ne.audioBufferSourceNode.start(),ne.localAudio.play(),(Ue=ne.audioDestination)===null||Ue===void 0?void 0:Ue.stream})()}stopJukebox(){this.callLogger.info(`Stopping jukebox for song: ${this.localAudioUrl||""}`),this.cleanup(),this.audioContext=void 0,this.audioDestination=void 0}cleanup(){var U,V,ne,ie;(U=this.audioBufferSourceNode)===null||U===void 0||U.stop(),this.audioBufferSourceNode=void 0,(V=this.localAudio)===null||V===void 0||V.pause(),this.localAudio=void 0,this.localAudioUrl=void 0,(ne=this.gainNode)===null||ne===void 0||ne.disconnect(),this.gainNode=void 0,(ie=this.audioDestination)===null||ie===void 0||ie.disconnect()}hasAudio(){return!!this.localAudio}getVolume(){var U;return(U=this.localAudio)===null||U===void 0?void 0:U.volume}getSongUrl(U){let{song:V}=U;return V.url}constructor(){this.defaultVolume=.3,this.callLogger=(0,r.Jt)(_n),this.callLogger.info("Huddle Jukebox Manager created."),this.jukeboxDucker=new Cn(this.defaultVolume)}},"JukeboxManager");const kn=(0,cn.A)(()=>new Vn),Pn={connectionWaitTimeMs:5*1e3,connectionUnhealthyThreshold:10,sendingAudioFailureSamplesToConsider:2,sendingAudioFailureInitialWaitTimeMs:3*1e3},$t={connectionWaitTimeMs:10*1e3,connectionUnhealthyThreshold:25,sendingAudioFailureSamplesToConsider:5,sendingAudioFailureInitialWaitTimeMs:10*1e3},De=u(class{constructor({enableExperimentalConfig:U}){this.enableExperimentalConfig=!1,this.getConfiguration=()=>this.enableExperimentalConfig?$t:Pn,this.enableExperimentalConfig=!!U}},"ConnectionHealthPolicyManager");var Ne=e(610288365),Me=e(1921074781),Be=e(796111729),ue;(function(be){be.Control="control",be.Vp8="vp8",be.Vp8Svc="vp8_svc",be.Vp9="vp9",be.Vp9Svc="vp9_svc",be.Av1="av1",be.Av1Svc="av1_svc"})(ue||(ue={}));const ke=(0,Be.Wo)({label:"HUDDLE-VIDEO-CODECS"}),Xe=function(){var be=(0,t.coroutine)(function*(U){let{audioVideoFacade:V,h264BaselineProfileEnabled:ne,disableVp9:ie}=U;var Ue,Qe;const je=[];!(0,y.gm)()&&!ie&&je.push(a.KK.vp9()),ne&&je.push(a.KK.h264BaselineProfile()),je.push(a.KK.h264()),ke.info(`Setting preferred camera video codec to ${(Ue=je[0])===null||Ue===void 0?void 0:Ue.codecName}`),ke.debug("Setting camera video codec preferences",je),(Qe=V.setVideoCodecSendPreferences)===null||Qe===void 0||Qe.call(V,je)});return u(function(V){return be.apply(this,arguments)},"setCameraVideoCodec")}(),dt=function(){var be=(0,t.coroutine)(function*(U){let{useAv1:V,audioVideoFacade:ne,h264BaselineProfileEnabled:ie}=U;var Ue,Qe;const je=[];V&&je.push(a.KK.av1()),ie&&je.push(a.KK.h264BaselineProfile()),je.push(a.KK.h264()),ke.info(`Setting preferred content share video codec to ${(Ue=je[0])===null||Ue===void 0?void 0:Ue.codecName}`),ke.debug("Setting content share video codec preferences",je),(Qe=ne.setContentShareVideoCodecPreferences)===null||Qe===void 0||Qe.call(ne,je)});return u(function(V){return be.apply(this,arguments)},"setScreenshareVideoCodec")}();class bt{initialize(U,V,ne,ie,Ue,Qe){var je=this;return(0,t.coroutine)(function*(){var ht,ot,gt,wt,Dn,Nn,Sn,Bn;Ue&&(je.waitForStop=Ue),Qe&&(je.dataChannelSubscribers=Qe),je.observer.onInit(),je.options=U;const{serverConfig:pn,useChimeSdkExp:yn,useSimulcast:jn,useGetMediaAccessCheckForWindows:Zn,useHuddlesFilterWorker:Es}=je.options;yield(0,a.ZT)(yn),je.chimeLogger=new de.k(je.loggerName),je.callLogger=(0,r.Jt)(je.loggerName),(ht=je.callLogger)===null||ht===void 0||ht.info(`user agent: ${navigator.userAgent}`);const Us=(0,o.HF)();(ot=je.callLogger)===null||ot===void 0||ot.info(`Version TS: ${Us}`);const bs=(document==null||(gt=document.documentElement)===null||gt===void 0||(wt=gt.dataset)===null||wt===void 0?void 0:wt.versionHash)||"unknown";(Dn=je.callLogger)===null||Dn===void 0||Dn.info(`Version Hash: ${bs}`),(Nn=je.callLogger)===null||Nn===void 0||Nn.info(`Chime SDK Version: ${a.zF.sdkVersion}${yn?" (Experimental)":""}`),je.meeting=pn.meeting,je.attendee=pn.attendee,je.selfAttendeeId=je.attendee.AttendeeId;const Ss=(0,d.Y)(pn.attendee.ExternalUserId);try{var rs;const is=JSON.stringify((0,n.A)(U,"serverConfig"),null,2);(rs=je.callLogger)===null||rs===void 0||rs.debug(`Huddle SDK [${Ss}] initialized with options: ${is}`)}catch(is){var H;(H=je.callLogger)===null||H===void 0||H.error("Error stringifying options",is)}if(je.transportProtocols=pn.transportProtocols,je.isPrejoin=je.options.isPrejoin,je.meetingSessionConfiguration=new a.QJ(je.meeting,je.attendee),jn&&je.meetingSessionConfiguration){var me;(me=je.callLogger)===null||me===void 0||me.info("Simulcast enabled"),je.meetingSessionConfiguration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!0}if(je.options.usePriorityDownlinkPolicy&&(je.videoDownlinkPolicy=new a.gi(je.selfAttendeeId),je.meetingSessionConfiguration.videoDownlinkBandwidthPolicy=je.videoDownlinkPolicy,je.meetingSessionConfiguration.keepLastFrameWhenPaused=!0,je.videoStreamsManager=new zt({selfAttendeeId:je.selfAttendeeId,videoDownlinkPolicy:je.videoDownlinkPolicy})),je.meetingSessionConfiguration.urls&&(je.meetingSessionConfiguration.urls.urlRewriter=je.urlRewriter.bind(je)),je.meetingSessionConfiguration&&je.meetingSessionConfiguration.connectionHealthPolicyConfiguration&&(0,s.A)(je.options.enableExperimentalConnectionHealthPolicyConfig)){const is=new De({enableExperimentalConfig:je.options.enableExperimentalConnectionHealthPolicyConfig});Object.assign(je.meetingSessionConfiguration.connectionHealthPolicyConfiguration,is.getConfiguration())}je.meetingSessionConfiguration.disablePeriodicKeyframeRequestOnContentSender=!0,yield je.initVoiceFocus();const Fe={audio:V.includes(i.mT.MICROPHONE),video:V.includes(i.mT.CAMERA)};a.vB.disable();let ut;const An=!!(!((Sn=je.voiceFocusManager)===null||Sn===void 0)&&Sn.isAvailable()),vn=je.options.disableAudioRedundancy||!1;if(yn){const is=(0,a.Q_)(),Is=(0,a.RM)();if(je.defaultDeviceController=new Is(je.chimeLogger,{enableWebAudio:An}),je.defaultDeviceController.setDeviceLabelTrigger(()=>navigator.mediaDevices.getUserMedia(Fe)),je.sessionExp=new is(je.meetingSessionConfiguration,je.chimeLogger,je.defaultDeviceController),ut=je.sessionExp.audioVideo,vn){const Ge=(0,a.Ls)();ut.setAudioProfile(new Ge(null,!1)),ut.setContentAudioProfile(new Ge(null,!1))}}else{const is=(0,a.of)(),Is=(0,a.zg)();if(je.defaultDeviceController=new Is(je.chimeLogger,{enableWebAudio:An}),je.defaultDeviceController.setDeviceLabelTrigger(()=>navigator.mediaDevices.getUserMedia(Fe)),je.session=new is(je.meetingSessionConfiguration,je.chimeLogger,je.defaultDeviceController),ut=je.session.audioVideo,vn){const Ge=(0,a.j3)();ut.setAudioProfile(new Ge(null,!1)),ut.setContentAudioProfile(new Ge(null,!1))}}yield je.populateDeviceInfoCache();const Hn=je.options.useH264Baseline||!1;Xe({audioVideoFacade:ut,h264BaselineProfileEnabled:Hn,disableVp9:!!je.options.disableVp9});const Kt=je.options.useH264BaselineScreenshare||!1,ts=je.options.useAv1Screenshare;dt({useAv1:ts,audioVideoFacade:ut,h264BaselineProfileEnabled:Kt});const _s={useGetMediaAccessCheckForWindows:Zn,useHuddlesFilterWorker:Es,backgroundVideoFilteringSetting:l.uT.Both,useDevicesExp:je.options.useDevicesExp},ps=ee;je.deviceManager=new ps(ut,je.audioOutputElement,je.observer,_s,ne,je.chimeLogger,je.defaultDeviceController,je.voiceFocusManager),(Bn=je.dataChannelSubscribers)===null||Bn===void 0||Bn.forEach(is=>is.onInitializeDataChannelSubscriber()),je.audioVideoObserver=new Ye(je.selfAttendeeId,je.meeting.MeetingId,je.meeting.MediaRegion,Ss,ut,je.observer,je.deviceManager,je.videoStreamsManager,ie,je.waitForStop,je.dataChannelSubscribers);const Rs=je.options.huddlesJukeboxEnabled;if(Rs){var gs;(gs=je.callLogger)===null||gs===void 0||gs.info("Huddles Jukebox experiment enabled (prototype)")}je.contentShareManager=new Wt(ut,je.observer,!!Rs,yn),je.audioVideoFacadeSubscriber=new Nt(je.selfAttendeeId,ut,je.observer),(0,Ne.Ay)().initialize(),je.connect(),je.screenManager=new _.A,je.observer.onMeetingSessionInitialized(),je.waitForInit.resolve()})()}shutdown(U){var V=this;return(0,t.coroutine)(function*(){var ne,ie,Ue,Qe,je,ht;if((ne=V.callLogger)===null||ne===void 0||ne.info("Huddles SDK shutdown initiated"),yield V.waitForInit,V.cleanupDataChannelSubscribers(),(ie=V.contentShareManager)===null||ie===void 0||ie.stop(),(Ue=V.audioVideoObserver)===null||Ue===void 0||Ue.stop(),yield(Qe=V.deviceManager)===null||Qe===void 0?void 0:Qe.shutdown(),Me.F.doesInstanceExist()){var ot;(ot=Me.F.getInstance())===null||ot===void 0||ot.release()}(je=V.audioVideoFacadeSubscriber)===null||je===void 0||je.destroy(),yield V.waitForStop,delete V.session,delete V.sessionExp,delete V.meetingSessionConfiguration,yield V.cleanupDefaultDeviceControllerRefs(),(ht=V.callLogger)===null||ht===void 0||ht.info("Huddles SDK shutdown completed"),delete V.chimeLogger,delete V.callLogger,delete V.deviceManager,delete V.audioVideoFacadeSubscriber,delete V.audioVideoObserver,delete V.contentShareManager,delete V.screenManager,delete V.voiceFocusManager,delete V.videoStreamsManager,delete V.videoDownlinkPolicy,U&&U()})()}selfMicrophoneEnabled(U){var V;(V=this.deviceManager)===null||V===void 0||V.setMicrophone(U)}selfVideoEnabled(U,V,ne,ie){var Ue,Qe;(Ue=this.deviceManager)===null||Ue===void 0||Ue.setCamera(U),(Qe=this.contentShareManager)===null||Qe===void 0||Qe.setScreenshare(V,ne,ie)}startContentShareJukebox(U){let{song:V}=U;var ne=this;return(0,t.coroutine)(function*(){var ie;const Ue=yield kn().startContentShareJukebox({song:V});Ue&&((ie=ne.contentShareManager)===null||ie===void 0||ie.setSongStream(Ue))})()}selfStopJukebox(){var U=this;return(0,t.coroutine)(function*(){var V;kn().stopJukebox(),(V=U.contentShareManager)===null||V===void 0||V.stopMusic({cleanObserver:!1})})()}setCameraQuality(U,V,ne,ie){var Ue;(Ue=this.deviceManager)===null||Ue===void 0||Ue.setCameraQuality(U,V,ne,ie)}setAGC(U){var V;(V=this.deviceManager)===null||V===void 0||V.setAGC(U)}setNewPreferredDevice(U,V){var ne;(ne=this.deviceManager)===null||ne===void 0||ne.setPreferredDevice(U,V)}setNoiseSuppression(U){var V;(V=this.deviceManager)===null||V===void 0||V.setNoiseSuppression(U)}setVideoBackgroundEffect(U){var V;(V=this.deviceManager)===null||V===void 0||V.setVideoBackgroundEffect(U)}requestPreviewStreamForDeviceId(U,V,ne){var ie;(ie=this.deviceManager)===null||ie===void 0||ie.requestPreviewStreamForDeviceId(U,V,ne)}stopVideoPreviewForVideoInput(U){var V;(V=this.deviceManager)===null||V===void 0||V.stopVideoPreviewForVideoInput(U)}getScreenThumbnails(U){var V=this;return(0,t.coroutine)(function*(){var ne;return yield(ne=V.screenManager)===null||ne===void 0?void 0:ne.getScreenThumbnails(U==null?void 0:U.thumbnailDimensions,U==null?void 0:U.isRefetch)})()}selfDrawEnabled(U){var V;(V=this.audioVideoFacadeSubscriber)===null||V===void 0||V.selfDrawEnabled(U)}sendReacji(U,V){var ne;(ne=this.audioVideoFacadeSubscriber)===null||ne===void 0||ne.sendReacji(U,V)}sendBackground(U){var V;(V=this.audioVideoFacadeSubscriber)===null||V===void 0||V.sendBackground(U)}sendMuteRequest(U){var V;(V=this.audioVideoFacadeSubscriber)===null||V===void 0||V.sendMuteRequest(U)}sendJukeboxRequest(U){var V;(V=this.audioVideoFacadeSubscriber)===null||V===void 0||V.sendJukeboxRequest(U)}sendJukeboxStopRequest(){var U;(U=this.audioVideoFacadeSubscriber)===null||U===void 0||U.sendJukeboxStopRequest()}sendDrawMessage(U){var V;(V=this.audioVideoFacadeSubscriber)===null||V===void 0||V.sendDrawMessage(U)}sendContentShareDetails(U){var V;(V=this.audioVideoFacadeSubscriber)===null||V===void 0||V.sendContentShareDetails(U)}sendRecordingStartNotification(){var U;(U=this.audioVideoFacadeSubscriber)===null||U===void 0||U.sendRecordingStartNotification()}maybeBindAudioOutputElement(){var U;(U=this.deviceManager)===null||U===void 0||U.maybeBindAudioOutputElement()}maybeCheckSystemMediaAccess(U){var V;return(V=this.deviceManager)===null||V===void 0?void 0:V.maybeCheckSystemMediaAccess(U)}setIncludeSelfAndNoneActiveSpeaker(U,V){var ne;(ne=this.audioVideoFacadeSubscriber)===null||ne===void 0||ne.setIncludeSelfAndNoneActiveSpeaker(U,V)}bindVideo(U,V,ne){var ie;const Ue=this.session||this.sessionExp;if(!Ue)return;const Qe=(ie=Ue.audioVideo.getVideoTile(U))===null||ie===void 0?void 0:ie.state();ne?Qe!=null&&Qe.boundVideoStream&&a.xc.connectVideoStreamToVideoElement(Qe.boundVideoStream,V,!1):(this.videoDownlinkPolicy&&(Qe!=null&&Qe.paused)&&Ue.audioVideo.unpauseVideoTile(U),Ue.audioVideo.bindVideoElement(U,V))}unbindVideo(U,V,ne){const ie=this.session||this.sessionExp;ie&&(ne?a.xc.disconnectVideoStreamFromVideoElement(V,!0):ie.audioVideo.getVideoTile(U)&&ie.audioVideo.unbindVideoElement(U))}pauseVideo(U){const V=this.session||this.sessionExp;if(!V)return;const ne=V.audioVideo.getVideoTile(U),ie=ne==null?void 0:ne.state();!(ie!=null&&ie.isContent)&&(ie!=null&&ie.active)&&(ne==null||ne.pause())}unpauseVideo(U){const V=this.session||this.sessionExp;if(!V)return;const ne=V.audioVideo.getVideoTile(U),ie=ne==null?void 0:ne.state();ie!=null&&ie.paused&&(ne==null||ne.unpause())}videoTileHasStream(U){const V=this.session||this.sessionExp;if(!V)return!1;const ne=V.audioVideo.getVideoTile(U);if(!ne)return!1;const ie=ne.state();return ie?!!ie.boundVideoStream:!1}getMeetingMediaRegion(){var U;return(U=this.meeting)===null||U===void 0?void 0:U.MediaRegion}completePrejoin(U){var V=this;return(0,t.coroutine)(function*(){const{isStartMuted:ne}=U;if(V.isPrejoin){var ie,Ue;return ne&&((ie=V.deviceManager)===null||ie===void 0||ie.setStartMutedBarrier(ne)),(Ue=V.audioVideoObserver)===null||Ue===void 0||Ue.start(),V.maybeBindAudioOutputElement(),V.setIncludeSelfAndNoneActiveSpeaker(!0,!0),V.isPrejoin=!1,!0}return!1})()}urlRewriter(U){if(!U)return U;if(this.transportProtocols){const Ue=this.transportProtocols;if(U.includes("?transport=udp")&&!Ue.includes("udp")){var V;return(V=this.callLogger)===null||V===void 0||V.info("Dropping UDP transport"),""}if(U.includes("?transport=tcp")){if(U.includes("turns:")){if(!Ue.includes("tls")){var ne;return(ne=this.callLogger)===null||ne===void 0||ne.info("Dropping TLS transport"),""}}else if(!Ue.includes("tcp")){var ie;return(ie=this.callLogger)===null||ie===void 0||ie.info("Dropping TCP transport"),""}}}return U.replace(`:${this.TURN_PORT_UDP}`,`:${this.OVERRIDE_TURN_PORT_UDP}`)}hasSession(){return!!this.session||!!this.sessionExp}setupVideoDeviceLabelTrigger(){var U,V=this;const ne=function(){var ie=(0,t.coroutine)(function*(){try{var Ue;V.videoDevicePermissionStatus="IN_PROGRESS";const je=yield navigator.mediaDevices.getUserMedia({video:!0});return(Ue=V.callLogger)===null||Ue===void 0||Ue.info("Video device permissions granted"),V.videoDevicePermissionStatus="GRANTED",je}catch(je){var Qe;throw V.videoDevicePermissionStatus="DENIED",V.observer.onSetNoMediaInput(i.mT.CAMERA),(Qe=V.callLogger)===null||Qe===void 0||Qe.info("Video device permissions denied"),je}});return u(function(){return ie.apply(this,arguments)},"callback")}();(U=this.defaultDeviceController)===null||U===void 0||U.setDeviceLabelTrigger(ne)}maybeEnableSelfCamera(){let{isScreenshareEnabled:U}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};var V=this;return(0,t.coroutine)(function*(){if((yield V.initVideoPermission())&&(V.videoDevicePermissionStatus==="INITIAL"||V.videoDevicePermissionStatus==="GRANTED")){var ie;V.selfVideoEnabled(!0,!!U),V.observer.onPeerCameraActive("self",!0),(ie=V.callLogger)===null||ie===void 0||ie.info("maybeEnableSelfCamera:: enabling camera function executed")}})()}initVideoPermission(){var U=this;return(0,t.coroutine)(function*(){var V;return U.setupVideoDeviceLabelTrigger(),yield(V=U.deviceManager)===null||V===void 0?void 0:V.initVideoInputDevices()})()}getSelfAttendeeId(){return this.selfAttendeeId}constructor(U,V,ne="FREE-WILLY-SDK"){this.observer=U,this.audioOutputElement=V,this.loggerName=ne,this.TURN_PORT_UDP=3478,this.OVERRIDE_TURN_PORT_UDP=22466,this.waitForInit=(0,c.u)(),this.waitForStop=(0,c.u)();var ie=this;this.initVoiceFocus=(0,t.coroutine)(function*(){let ht=0;const ot=Date.now();ie.voiceFocusManager=new Tn.A(ie.chimeLogger),yield ie.voiceFocusManager.init({configOnly:!1}),ht=Date.now()-ot,ie.observer.onMaybeVoiceFocusInitialized(ht)});var Ue=this;this.populateDeviceInfoCache=(0,t.coroutine)(function*(){var ht,ot,gt,wt;const Dn=Date.now(),Nn=yield(ht=Ue.defaultDeviceController)===null||ht===void 0?void 0:ht.listAudioInputDevices(),Sn=yield(ot=Ue.defaultDeviceController)===null||ot===void 0?void 0:ot.listAudioOutputDevices(),Bn=yield(gt=Ue.defaultDeviceController)===null||gt===void 0?void 0:gt.listVideoInputDevices(),pn=Date.now()-Dn;(wt=Ue.callLogger)===null||wt===void 0||wt.info(`Populated device info cache in ${pn}ms with ${Nn==null?void 0:Nn.length} microphones, ${Sn==null?void 0:Sn.length} speakers, and ${Bn==null?void 0:Bn.length} cameras`)}),this.cleanupDataChannelSubscribers=()=>{this.dataChannelSubscribers&&(this.dataChannelSubscribers.forEach(ht=>ht.onShutdownDataChannelSubscriber()),this.dataChannelSubscribers=void 0)};var Qe=this;this.cleanupDefaultDeviceControllerRefs=(0,t.coroutine)(function*(){var ht;if(!Qe.defaultDeviceController)return;yield Qe.defaultDeviceController.destroy();const ot=(ht=Qe.defaultDeviceController)===null||ht===void 0?void 0:ht.eventController;if(ot){var gt;const wt=(gt=ot.configuration)===null||gt===void 0?void 0:gt.urls;wt&&(wt.urlRewriter=void 0)}Qe.defaultDeviceController.deviceLabelTrigger=void 0,delete Qe.defaultDeviceController}),this.handleClientOffline=()=>{var ht;(ht=this.audioVideoObserver)===null||ht===void 0||ht.audioVideoDidStartConnecting(!0)},this.toggleAllIncomingVideo=ht=>{var ot;(ot=this.videoStreamsManager)===null||ot===void 0||ot.toggleAllIncomingVideo(ht)};var je=this;this.connect=(0,t.coroutine)(function*(){var ht,ot;if((ht=je.audioVideoObserver)===null||ht===void 0||ht.startWithSignalingOnly(),yield(ot=je.deviceManager)===null||ot===void 0?void 0:ot.init(),!je.isPrejoin){var gt;if(!G.Ay.canAccessMediaResource(i.mT.MICROPHONE)){var wt;(wt=je.callLogger)===null||wt===void 0||wt.error("Missing microphone permissions. Not connecting to huddle");return}(gt=je.audioVideoObserver)===null||gt===void 0||gt.start()}}),this.videoDevicePermissionStatus="INITIAL"}}u(bt,"FreeWillySdk")},5016574668:(z,A,e)=>{"use strict";e.d(A,{An:()=>a,Kp:()=>l,Nb:()=>s,RN:()=>_,Sq:()=>r,ZT:()=>t,jt:()=>d,tz:()=>c,w4:()=>o,yz:()=>n});const t=10*1e3,n=1e3,s="2.5",a=450*450,c=25,o=15,r="huddles_perf",l="app_metrics",_="client_metrics",d=5},2205899741:(z,A,e)=>{"use strict";e.d(A,{$c:()=>O,h7:()=>C,t5:()=>y,e7:()=>i,KG:()=>D,q4:()=>T,_N:()=>v,sI:()=>F,Ap:()=>h,kq:()=>S,ik:()=>E,No:()=>x,fB:()=>Y,Ye:()=>I,RI:()=>_,Fq:()=>k,oj:()=>m,qf:()=>P,Tg:()=>p});const t=30,n=300,s=300,a=30,c=10,o=30,r=1,l=u(L=>function(w){for(var J=arguments.length,G=new Array(J>1?J-1:0),X=1;X<J;X++)G[X-1]=arguments[X];if(!(typeof w!="string"&&typeof w!="number"))return L(w,...G)},"makeDeduction"),_=l(L=>L>a?L/5:void 0),d=l(L=>L>400?L/20:void 0),i=l(L=>L>1?L:void 0),m=l(L=>L>s?L/7.5:void 0),h=l(L=>L>1?L*10:void 0),v=l(L=>L>t?L/2:void 0),y=l(L=>L>o?L*1.25:void 0),T=l(L=>L>n?L/10:void 0),I=l(L=>L>o?L*1.5:void 0),p=l(L=>L>c?L*1.5:void 0),g=l(L=>L*2),E=l(L=>L&&L!=="udp"?40:void 0),f=l(L=>L&&L>500?L/100:void 0),O=l(L=>L>150?L/5:void 0),C=l(L=>L>15?L*2:void 0),M=l(L=>L>5?L:void 0),D=l(L=>L>20?L/5:void 0),P=l(L=>L>1?L*2.5:void 0),k=l(L=>!L||L==="none"?void 0:25),x=l(L=>L>0?L*20:void 0),F=l(L=>L>1?L*1.25:void 0),W=l(L=>L>300?L/10:void 0),Y=l(L=>L&&L>o?L*1.5:void 0),S=l(L=>L>r?Math.round(L*7.5):void 0)},8634352961:(z,A,e)=>{"use strict";e.d(A,{Zr:()=>g,gR:()=>T,kB:()=>p,oB:()=>E,ws:()=>y,zT:()=>I});var t=e(7578217447),n=e(3852424459),s=e(796111729),a=e(9101533895),c=e(5795074931),o=e(3078252698);const r=(0,s.Wo)({label:"HUDDLE-RTM-FILTER"}),l=new Set(["file_shared","file_created","file_unshared","file_change"]),_=new Set(["sh_room_join","huddle_invite_cancel","update_thread_state","thread_subscribed","huddle_postcompute_complete"]);let d=u(class{constructor(O){this.skippedCount=0,this.allowedCount=0,this.allowedTypes={},this.updateSubscribedChannels=()=>{const M=this.getState();this.mutedChannels=(0,n.m)(M);const D=(0,a.D5)(M);this.joinedChannelIds=new Set(D.map(P=>P.id)),r.info(`Huddle RTM filter initialized. XWS joined channel count: ${this.joinedChannelIds.size} - Muted channel count: ${this.mutedChannels?Object.keys(this.mutedChannels).length:0}`)},this.getTopAllowedTypes=()=>this.allowedCount?Object.entries(this.allowedTypes).sort((M,D)=>{let[,P]=M,[,k]=D;return k-P}).slice(0,5).map(M=>{let[D]=M;return D}).join(" "):"",this.getPercentSkipped=()=>Math.round(this.skippedCount/(this.skippedCount+this.allowedCount)*100),this.isChannelDm=M=>M.startsWith("D"),this.isChannelMuted=M=>!M||!this.mutedChannels?!1:!!this.mutedChannels[M],this.isChannelJoined=M=>!M||!this.joinedChannelIds?!1:!!this.joinedChannelIds.has(M),this.skipRtm=()=>(this.skippedCount+=1,!0),this.allowRtm=M=>{this.allowedCount+=1;const D=M.type==="message"?`${M.type}/${M.subtype}`:M.type;return this.allowedTypes[M.type]=(this.allowedTypes[D]||0)+1,r.debug(`Allowed RTM type: ${M.type} - subtype: ${M.subtype}`,M),!1},this.shouldSkipRtm=M=>{var D,P;if(_.has(M.type))return this.allowRtm(M);if(((D=M.user)===null||D===void 0?void 0:D.id)===this.currentUserId||M.user===this.currentUserId||M.user_id===this.currentUserId)return this.allowRtm(M);if(M.type==="channel_joined"||M.type==="mpim_joined"||M.type==="im_open"||M.type==="member_joined_channel"||M.type==="message"&&M.subtype==="channel_join"||M.type==="desktop_notification"&&M.is_channel_invite)return r.info("Received IM/MPDM/channel join RTM. Updating channel references",M),this.updateSubscribedChannels(),this.allowRtm(M);const k=M.channel||((P=M.item)===null||P===void 0?void 0:P.channel)||M.channel_id,x=(0,o.A)(k)?k:void 0;return x&&this.isChannelDm(x)?this.allowRtm(M):x&&this.isChannelMuted(x)?this.skipRtm():x&&!this.isChannelJoined(x)?this.skipRtm():t.Sj.has(M.type)&&!l.has(M.type)?this.skipRtm():M.type==="dnd_invalidated"?this.skipRtm():M.type==="bot_added"||M.type==="bot_changed"||M.type==="hermes_trigger_updated"||M.type==="apps_changed"||M.type==="apps_installed"||M.type==="apps_uninstalled"?this.skipRtm():this.allowRtm(M)};const C=O();this.getState=O,this.currentUserId=(0,c.WR)(C),this.updateSubscribedChannels()}},"HuddleRtmFilter"),i,m,h=0;const v=u(()=>{h=0,m=Date.now()},"clearRtmsSinceLastReport"),y=u(f=>{try{r.info("initializing Huddle RTM filter"),i||(i=new d(f),v())}catch(O){r.error("Error in initHuddleRtmFilter",O)}},"initHuddleRtmFilter"),T=u(()=>{r.info("destroying Huddle RTM filter"),i=void 0,v()},"destroyHuddleRtmFilter"),I=u(()=>{if(i)return i.getPercentSkipped()},"getRtmFilterPercentSkipped"),p=u(()=>{if(i)return i.getTopAllowedTypes()},"getRtmFilterTopAllowedTypes"),g=u(f=>{try{return h+=1,m||(m=Date.now()),i?i.shouldSkipRtm(f):!1}catch(O){return r.error("Error in shouldSkipRtmDuringHuddle",O),!1}},"shouldSkipRtmDuringHuddle"),E=u(()=>{try{if(!m||!h)return 0;const f=Date.now()-m,O=Math.round(h/(f/1e3));return v(),O}catch(f){return r.error("Error in getRtmsPerSecond",f),0}},"getRtmsPerSecond")},7645722292:(z,A,e)=>{"use strict";e.d(A,{Gl:()=>C,Pk:()=>f,TK:()=>O,V_:()=>D,nu:()=>M});var t=e(4404059078),n=e(9268023148),s=e(6696292586),a=e(862210999),c=e(3398586081),o=e(5387083734),r=e(796111729);const l=1e3,_=500,d=3*1e3,i=250,m=1,h=5,v=100,y=20,T=5e3,I=5,p=(0,r.Ay)({label:"HUDDLE-RTM-SCHEDULER"});let g=u(class{reportMetrics(x){const{cpuCompetitionScore:F}=x;if(!F)return;const W=v-F;if(W<y)this.decreaseDelay();else{const Y=(0,t.A)(Math.floor(W/y),m,h);this.increaseDelayWithMultiplier(Y)}}constructor(){var x=this;this.currentDelay=l,this.taskQueueLength=0,this.resetSchedulerState=()=>{this.currentDelay=l,this.currentQueueDrainFn=void 0,this.taskQueueLength=0},this.increaseDelayWithMultiplier=function(){const W=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:1)*i,Y=x.currentDelay+W;x.setNextDelay(Y)},this.decreaseDelay=()=>{if(this.currentDelay===_)return;const F=this.currentDelay-i;this.setNextDelay(F)},this.setNextDelay=(0,n.A)(F=>{if(!(0,s.A)(F))return;const W=this.currentDelay;this.currentDelay=(0,t.A)(F,_,d),W!==this.currentDelay&&p.debug(`Updated current RTM processing delay to ${this.currentDelay}`)},T,{leading:!0,maxWait:T}),this.scheduleQueueDrain=F=>{if(!(0,a.A)(F))return;if(this.taskQueueLength>I){p.info("too many RTM tasks enqueued, executing queue drain immediately"),F(),this.taskQueueLength=0;return}p.debug(`scheduling RTM queue drain with delay of ${this.currentDelay}`);const W=Date.now();return this.taskQueueLength+=1,this.currentQueueDrainFn=F,(0,o.IE)("huddle-rtm",F,{delay:this.currentDelay}).then(()=>{p.debug(`successfully executed rtm queue drain after ${Date.now()-W}ms`)}).catch(Y=>{(0,a.A)(this.currentQueueDrainFn)?this.currentQueueDrainFn():(p.error("queue drain function not defined. Attempting queue drain function in scope"),(0,a.A)(F)&&F()),p.warn(`an error occurred while processing rtm queue drain: ${Y.toString()}`)}).finally(()=>{this.taskQueueLength-=1})},this.onHuddleEnd=()=>{var F,W;(W=(F=this).currentQueueDrainFn)===null||W===void 0||W.call(F),p.info("Huddle ended. Drained queue and returned scheduling control to base RTM processor"),this.resetSchedulerState()},this.getCurrentDelay=()=>this.currentDelay,this.getTaskQueueLength=()=>this.taskQueueLength,p.info(`Initialized Huddle RTM scheduler with initial delay of ${this.currentDelay}`)}},"HuddleRtmScheduler");const E=(0,c.A)(()=>new g),f=u((k,x)=>{(x||E()).reportMetrics(k)},"reportMetricsToRtmScheduler"),O=u(k=>{(k||E()).onHuddleEnd()},"reportHuddleEndToRtmScheduler"),C=u((k,x)=>{(x||E()).scheduleQueueDrain(k)},"scheduleHuddleRtmQueueDrain"),M=u(k=>(k||E()).getTaskQueueLength(),"getCurrentRtmTaskQueueLength"),D=u(k=>(k||E()).getCurrentDelay(),"getCurrentRtmSchedulerDelay"),P=null},415910655:(z,A,e)=>{"use strict";e.d(A,{ZR:()=>a,jm:()=>n,s2:()=>s});let t;const n=u(c=>{t||(t={}),Object.assign(t,c)},"updateJoinTimingMetrics"),s=u(()=>t,"getJoinTimingMetrics"),a=u(()=>{t=void 0},"resetJoinTimingMetrics")},5470425448:(z,A,e)=>{"use strict";e.d(A,{lx:()=>l,zu:()=>r});var t;(function(_){_.UDP="udp",_.TCP="tcp"})(t||(t={}));var n;(function(_){_.RELAY="relay",_.DIRECT="direct"})(n||(n={}));var s;(function(_){_.UPLINK="uplink",_.DOWNLINK="downlink"})(s||(s={}));var a;(function(_){_.GOOD="good",_.FAIR="fair",_.BAD="bad",_.WORST="worst"})(a||(a={}));var c;(function(_){_.GOOD="good",_.FAIR="fair",_.BAD="bad",_.WORST="worst"})(c||(c={}));var o;(function(_){_[_.UPSTREAM=0]="UPSTREAM",_[_.DOWNSTREAM=1]="DOWNSTREAM"})(o||(o={}));var r;(function(_){_[_.AUDIO=0]="AUDIO",_[_.VIDEO=1]="VIDEO"})(r||(r={}));var l;(function(_){_.RtmMetrics="rtm-metrics",_.RenderTiming="render-timing",_.BluetoothDevices="bluetooth-devices",_.MemoryLeaks="memory-leaks",_.SelectedMediaRegion="selected-media-region",_.PreferredMediaRegion="preferred-media-region",_.VoiceFocusConfig="voice-focus-config",_.NetworkDisconnect="network-disconnect",_.CallId="call-id",_.ScreenshareContentType="screenshare-content-type",_.AppMetrics="app-metrics",_.NoAudio="no-audio",_.CameraResolution="max-camera-resolution",_.SetIsDebugApp="set-is-debug-app",_.TroubleshootingContactUsClicked="troubleshooting-contact-us-clicked",_.TroubleshootingEntryPoint="troubleshooting-entry-point",_.TroubleshootingExitHealthSnapshot="troubleshooting-exit-health-snapshot"})(l||(l={}))},5071086688:(z,A,e)=>{"use strict";e.d(A,{A:()=>n});var t=e(6267571562);const n=new t.G},5403856613:(z,A,e)=>{"use strict";e.d(A,{U:()=>a,p:()=>o});var t=e(7091646278),n=e(2205899741);const s=20,a=80,c=60,o=u(r=>{const{audioDownstreamQualityScore:l,networkQualityScore:_,networkType:d,networkProtocol:i,networkRelayProtocol:m,networkAvailableOutgoingBitrate:h,networkJitterMs:v,audioDownstreamJitterBufferDelay:y,networkCurrentRoundTripTimeMs:T,mediaRegionSelected:I,mediaRegionPreferred:p,cpuUse:g,cpuUseRelative:E,cpuCompetitionScore:f,gpuUse:O,batteryIsUsing:C,selectedMicrophone:M,selectedCamera:D,selectedSpeakers:P,cameraIsBlocked:k,cameraIsAvailable:x,microphoneIsBlocked:F,microphoneIsAvailable:W,isMicrophoneBluetooth:Y,isSpeakerBluetooth:S,isMicrophoneAndSpeakerOnSameDevice:L,isHardwareAccelerationEnabled:w,isDisconnected:J,noAudioInput:G,osIsThrottlingCpu:X,networkPacketLossPercent:te}=r;let le;switch(!0){case _<=0:le=t.bz.Bad;break;case _<=a:le=t.bz.Warn;break;default:le=t.bz.Good}return{metrics:{stable:{mediaRegionSelected:I,mediaRegionPreferred:p,selectedMicrophone:M,selectedCamera:D,selectedSpeakers:P},unstable:{cpuCompetitionScore:f,cpuUse:g,gpuUse:O,cpuUseRelative:E,audioQualityScore:l,jitterMs:v,audioDelayMs:y,roundTripTimeMs:T,packetLossPercent:te,incomingBandwidth:h,networkQualityScore:_}},warnings:{stable:{isVpnEnabled:d==="vpn",isSuboptimalProtocol:!!(0,n.ik)(i)||!!(0,n.ik)(m),isMediaRegionSuboptimal:!!I&&!!p&&I!==p,isUsingBatteryPower:C,isMicrophoneBluetooth:Y,isMicrophoneAndSpeakerOnSameDevice:L,isSpeakerBluetooth:S,isCameraProbablyIphone:/iphone/.test(D==null?void 0:D.toLowerCase()),isHardwareAccelerationDisabled:w===!1,isOSThrottlingCpu:!!X},unstable:{isCpuUsePoor:!!(0,n.$c)(g),isCpuUseRelativePoor:!!(0,n.h7)(E),isGpuUsePoor:!!(0,n.KG)(O),isJitterPoor:!!(0,n._N)(v),isRTTPoor:!!(0,n.oj)(T),isAudioDelayPoor:!!(0,n.q4)(y),isPacketLossPoor:!!(0,n.kq)(te)}},alerts:{stable:{isCameraBlocked:k||!x,isMicrophoneBlocked:F||!W,isMicrophoneNotSendingAudio:!!G,isDisconnected:J},unstable:{networkQualityHealth:le,isNetworkQualityPoor:_<=a,isAudioQualityPoor:l<=s,isCpuCompetitionPoor:f<=c}}}},"getTroubleshootingMetricsFromTags")},6246464105:(z,A,e)=>{"use strict";e.d(A,{N5:()=>_,R1:()=>c,Y:()=>l});var t=e(6455766380),n=e(2825968873),s=e(5470425448),a=e(5071086688),c;(function(d){d.HuddlesSdk="huddles-sdk",d.ChimeChannelListener="chime-channel-listener",d.ChimeChannelBroadcaster="chime-channel-broadcaster",d.VoiceFocusDevice="voice-focus-device",d.VideoTransformDevice="video-transform-device",d.VideoFrameProcessor="video-frame-processor"})(c||(c={}));const o=new Map([[c.HuddlesSdk,t.Y.create({name:c.HuddlesSdk})],[c.ChimeChannelListener,t.Y.create({name:c.ChimeChannelListener})],[c.ChimeChannelBroadcaster,t.Y.create({name:c.ChimeChannelBroadcaster})],[c.VoiceFocusDevice,t.Y.create({name:c.VoiceFocusDevice})],[c.VideoTransformDevice,t.Y.create({name:c.VideoTransformDevice})],[c.VideoFrameProcessor,t.Y.create({name:c.VideoFrameProcessor})]]),r=(0,n.Jt)("HUDDLE-LEAK-MONITOR"),l=u(d=>{let{name:i,ref:m}=d;const h=o.get(i);if(!h)return;const v=h.getMetrics();if(v){const{numberOfObjects:y,numberOfExpiredObjects:T}=v,I=y-T;T>3&&(r.warn(`Detected ${T} memory leak(s) for ${i}${I?` (with another ${I} instances in memory)`:""}`),a.A.publish({type:s.lx.MemoryLeaks,update:{name:i,leakCount:T}}))}h.watch(m)},"monitorObjectForMemoryLeaks"),_=u(()=>{for(const[,d]of o)d.expectGCAll()},"detectMemoryLeaks")},8872167513:(z,A,e)=>{"use strict";e.d(A,{A:()=>bt});var t=e(3398586081),n=e(4724591729),s=e(796111729),a=e(3855029223),c=e(169770637),o=e(9680914051);let r=u(class{initializeHuddleReconnectTracer(){var U,V,ne;this.reconnectSpan=(U=this.trace)===null||U===void 0?void 0:U.startSpan(o.xN),this.reconnectSuccessSpan=(V=this.trace)===null||V===void 0?void 0:V.startSpan(o.xx),this.reconnectFailureSpan=(ne=this.trace)===null||ne===void 0?void 0:ne.startSpan(o.cJ)}traceReconnectAttemptOutcome(U){let{isSuccess:V}=U;var ne;V?this.reconnectSuccessCount+=1:this.reconnectFailureCount+=1,(ne=this.logger)===null||ne===void 0||ne.info(`Registered huddle reconnect attempt outcome - isSuccess: ${V}`)}traceReconnectAttempt(){var U;this.reconnectCount+=1,(U=this.logger)===null||U===void 0||U.info("Counted huddle reconnect attempt")}report(){var U,V,ne,ie,Ue;(U=this.reconnectSpan)===null||U===void 0||U.addTags({metric_value:this.reconnectCount}).close(),(V=this.reconnectSuccessSpan)===null||V===void 0||V.addTags({metric_value:this.reconnectSuccessCount}).close(),(ne=this.reconnectFailureSpan)===null||ne===void 0||ne.addTags({metric_value:this.reconnectFailureCount}).close(),(ie=this.tracer)===null||ie===void 0||ie.reportSpans([this.reconnectSpan,this.reconnectSuccessSpan,this.reconnectFailureSpan]),(Ue=this.logger)===null||Ue===void 0||Ue.info("Reported reconnect attempt metric trace")}constructor({tracer:U,trace:V,logger:ne}){this.reconnectCount=0,this.reconnectSuccessCount=0,this.reconnectFailureCount=0,this.tracer=U,this.trace=V,this.logger=ne,this.initializeHuddleReconnectTracer()}},"HuddleReconnectTracer"),l=u(class{addTTIMetaTags(U){let{entryPoint:V,preferredMediaRegion:ne,isPrejoin:ie,isCreate:Ue}=U;var Qe;(Qe=this.trace)===null||Qe===void 0||Qe.addTags({entry_point:V,preferred_media_region:ne,is_prejoin:ie,is_create:Ue,success:!1})}createFetchCredentialsSpan(){var U;this.fetchCredentialsSpan=(U=this.trace)===null||U===void 0?void 0:U.startSpan(o.xl)}setCachedTag(U){let{cached:V}=U;var ne;(ne=this.trace)===null||ne===void 0||ne.addTags({cached:V})}closeFetchCredentialsSpan(){var U;(U=this.fetchCredentialsSpan)===null||U===void 0||U.close()}createConnectToMediaServiceSpan(){var U;this.connectToMediaServiceSpan=(U=this.trace)===null||U===void 0?void 0:U.startSpan(o.xA)}closeConnectToMediaServiceSpan(){var U,V,ne,ie;(U=this.connectToMediaServiceSpan)===null||U===void 0||U.close(),(V=this.trace)===null||V===void 0||V.addTags({success:!0}),(ne=this.tracer)===null||ne===void 0||ne.reportTrace(this.trace),this.traceReported=!0,(ie=this.logger)===null||ie===void 0||ie.info("Reported TTI metric trace")}getTTITraceId(){var U;return(U=this.trace)===null||U===void 0?void 0:U.getTraceId()}getFetchCredentialsSpanId(){var U;return(U=this.fetchCredentialsSpan)===null||U===void 0?void 0:U.getId()}setMediaRegionTag(U){var V,ne;const ie=(V=this.trace)===null||V===void 0?void 0:V.getTags().preferred_media_region;(ne=this.trace)===null||ne===void 0||ne.addTags({media_region:U,media_region_matches:U===ie})}report(){var U,V;if(!this.traceReported){var ne,ie;(ne=this.tracer)===null||ne===void 0||ne.reportTrace(this.trace),this.traceReported=!0,(ie=this.logger)===null||ie===void 0||ie.info("Reported TTI metric trace in final clean up")}(U=this.tracer)===null||U===void 0||U.clearTrace(this.trace),(V=this.logger)===null||V===void 0||V.info("Cleaned up TTI metric trace")}constructor({teamId:U,logger:V}){this.traceReported=!1,this.tracer=(0,a.E)({teamOrEnterpriseId:U}),this.trace=this.tracer.createTrace({traceName:o.bQ,samplingOptions:{sampleRate:(0,n.Cu)()?1:.05,sampleType:c.tS.SESSION}}),this.logger=V}},"HuddleTTITracer");var _=e(6696292586),d=e(7542104324),i=e(5470425448),m=e(9706240641),h=e(5016574668),v=e(1616072515);let y=u(class{recordAppMetrics(U){var V=this;return(0,m.coroutine)(function*(){const ne=Date.now();if(ne-V.lastRecordedSpanTs<V.reportingInterval)return;V.logger.debug(`Adding new ${h.Sq}:${h.Kp} span`);const Ue=V.trace.startSpan(h.Kp),Qe=(0,v.tT)(U),je=Object.keys(Qe).length;Ue.addTags(Qe),Ue.close(),V.logger.debug(`Added new ${h.Sq}:${h.Kp} span with ${je} tags`),V.getSpanCount()>h.jt&&V.report(),V.lastRecordedSpanTs=ne})()}constructor({teamId:U,logger:V,callLogger:ne,enableMaxReportingFrequency:ie}){var Ue=this;this.traceReported=!1,this.lastRecordedSpanTs=0,this.getMetricsCollectionInterval=()=>(0,n.Cu)()||this.enableMaxReportingFrequency?h.yz:h.ZT,this.createNewTrace=()=>(this.trace=this.tracer.createTrace({traceName:h.Sq,tags:{__dataset:h.RN},samplingOptions:{sampleType:c.tS.ALWAYS}}),this.trace),this.getSpanCount=()=>{var Qe;const je=(Qe=this.trace)===null||Qe===void 0?void 0:Qe.getSpans();return je?Object.keys(je).length:0},this.report=function(){let Qe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(Qe&&Ue.callLogger.debug(`Huddle ${Ue.callId} is ending. Reporting ${Ue.getSpanCount()} remaining spans`),!Ue.traceReported&&Ue.getSpanCount()>0){var je,ht;(je=Ue.tracer)===null||je===void 0||je.reportTrace(Ue.trace),(ht=Ue.tracer)===null||ht===void 0||ht.clearTrace(Ue.trace),Ue.logger.debug(`Cleared ${h.Sq}:${h.Kp} event trace`),Qe?Ue.traceReported=!0:Ue.createNewTrace()}else Ue.logger.debug(`Attempted to report ${h.Sq}:${h.Kp} trace but there was nothing to report`)},this.tracer=(0,a.E)({teamOrEnterpriseId:U}),this.enableMaxReportingFrequency=!!ie,this.reportingInterval=this.getMetricsCollectionInterval(),this.createNewTrace(),this.logger=V,this.callLogger=ne}},"HuddlePerfTracer");const T=null;var I=e(4103274853),p=e(166097325),g=e(8478954380),E=e(5403856613);const f=10*1e3,O=30*1e3;class C{constructor(U){this.logger=U,this.currentUnstableAlerts={},this.currentAlerts={networkQualityHealth:[],isNetworkQualityPoor:[],isAudioQualityPoor:[],isCpuCompetitionPoor:[]},this.updateInterval=f,this.updateIntervalIncrements=0,this.maybeIncrementUpdateInterval=()=>{this.updateIntervalIncrements+=1,this.updateIntervalIncrements%3===0&&(this.updateInterval=Math.min(O,this.updateInterval+1e3))},this.getStableAlerts=(V,ne)=>{const ie=u(Ue=>{const Qe=V[Ue];let je=this.currentAlerts[Ue];const ht=Date.now();je.push({timestamp:ht,value:Qe}),je=je.filter(Nn=>{let{timestamp:Sn}=Nn;return ht-Sn<=O}),this.currentAlerts[Ue]=je,je=je.filter(Nn=>{let{timestamp:Sn}=Nn;return ht-Sn<=ne.interval});const ot=new Map;for(const Nn of je)ot.has(Nn.value)||ot.set(Nn.value,0),ot.set(Nn.value,ot.get(Nn.value)+1);const gt=Array.from(ot.entries());let[wt,Dn]=gt[0];for(const[Nn,Sn]of gt.slice(1))Sn>Dn&&(Dn=Sn,wt=Nn);return gt.length?wt:this.currentUnstableAlerts[Ue]},"nextAlert");return{isAudioQualityPoor:ie("isAudioQualityPoor"),isCpuCompetitionPoor:ie("isCpuCompetitionPoor"),isNetworkQualityPoor:ie("isNetworkQualityPoor"),networkQualityHealth:ie("networkQualityHealth")}},this.getStabilityConfig=()=>({interval:this.updateInterval}),this.getAlertUpdates=V=>{let{alerts:ne}=V;const ie=this.getStableAlerts(ne,this.getStabilityConfig()),Ue=!(0,p.A)(ie,this.currentUnstableAlerts);if(this.maybeIncrementUpdateInterval(),Ue)return this.currentUnstableAlerts=ie,this.logger.debug("Updated alerts and metrics will be dispatched to redux"),ie}}}u(C,"AlertUpdater");const M=null,D="https://slack.com/help/articles/115003538426-Troubleshoot-audio-and-video-issues-in-Slack",P={isMicrophoneBluetooth:"The user is using a Bluetooth microphone, which could cause audio delays, reduce audio quality, or cause audio and video to fall out of sync. If these problems occur, suggest they switch to a wired or built-in microphone.",isCameraProbablyIphone:'The user might be unknowingly using their iPhone camera, which could lead to issues like a black screen or missing video. To prevent this, they can disable the "Continuity Camera" feature on their device. Guide them to go to Settings > Camera > Continuity and turn off the option.',isVpnEnabled:`The user is connected via a VPN, which can increase latency or cause connectivity issues if the VPN isn't optimized for video conferencing. Suggest they disable the VPN or ask their IT team to allow Slack traffic to bypass it. More details can be found here: ${D}`,isSuboptimalProtocol:`The user's connection protocol is TLS, not TCP, which may be due to a VPN, proxy, or firewall not configured for video conferencing. Suggest they disable their VPN or proxy, or ask their IT team to allow Slack traffic to bypass it. More details can be found here: ${D}`,isHardwareAccelerationDisabled:"Hardware acceleration seems to be disabled on the user's device, which could degrade performance. Suggest they re-enable hardware acceleration in their Slack preferences. They can do this by going to Preferences > Advanced > Enable hardware acceleration.",isUsingBatteryPower:"The user's device is running on battery power, which could limit device performance and cause audio, video, or application lag. If they report such issues, suggest they connect their device to a power source.",isMediaRegionSuboptimal:"The user is in a different region from the Huddle host, potentially causing increased latency and instability. This geographical disparity can't be controlled by users but network stability and connectivity can be improved. Suggest that they move closer to their Wi-Fi router, switch to a wired connection if possible, limit other bandwidth-intensive activities on their computer or network, or try connecting with a different network.",isOSThrottlingCpu:"The operating system is throttling CPU to manage heat or conserve battery power, which could lead to degraded audio or video quality and/or a general sense that Slack is slow or unresponsive. This might manifest as video freezing frequently, audio cutting out frequently, or audio-video sync issues. In more extreme cases, it can even trigger disconnections from the Chime media server. To mitigate this, ensure the user's device is well-ventilated, that they avoid running unnecessary applications during the call, and, if they are on a laptop, they should connect it to a power source. Adjusting power settings to prefer maximum performance (even when battery is being used) can also help. For detailed steps, please refer to your device's power management settings."},F={...{isNetworkQualityPoor:"The user's network quality is poor, which can cause delays or degraded audio or video, drops in connectivity, and audio/video desynchronization. Guide them through improving network stability, for instance, moving closer to their Wi-Fi router, switching to a wired connection if possible, limiting other bandwidth-intensive activities, or trying to connect with a different network.",isCpuCompetitionPoor:"The user\u2019s device is experiencing high CPU usage, causing audio or video delays, connectivity drops, or desynchronization. Suggest they close unnecessary applications, tabs, limit other CPU-intensive activities, ensure their computer has adequate airflow around it, and check if their hardware meets the recommended specifications."},...{isDisconnected:"The user is disconnected from the Huddle and can't send or receive audio or video. This might be due to network instability, incorrect configurations, hardware issues, or connectivity problems. Guide them through checking their network connection, suggest they limit other bandwidth-intensive activities, try connecting with a different network, move closer to their router, and suggest restarting the call.",isMicrophoneBlocked:"Slack can't access the user's microphone, possibly due to permission or settings issues. Verify that Slack has been granted permission to use the microphone, and ensure no other application is using it. They can check this by going to System Preferences (on macOS) or Sound settings (on Windows) and ensuring that Slack is checked.",isMicrophoneNotSendingAudio:"The user's microphone is connected, but isn't sending any audio, possibly due to another application using it, being muted, or system-level settings. Suggest they unplug and replug their device, restart Slack, limit other CPU-intensive activities, ensure their computer has adequate airflow around it, close unnecessary applications or tabs, and check for conflicting settings.",isCameraBlocked:"Slack can't access the user's camera, likely due to settings or permissions issues. Verify that Slack has permission to use their camera, and ensure no other application is using it. They can check this by going to System Preferences (on macOS) or Camera Privacy Settings (on Windows) and ensuring that Slack is checked."},...P},W={isNetworkQualityPoor:"networkQualityScoreReasons",isCpuCompetitionPoor:"cpuCompetitionScoreReasons"};class Y{constructor({callLogger:U,logger:V,dispatch:ne}){this.isDev=(0,n.Cu)(),this.isJsPath=(0,n.b3)(),this.loggedHuddleConfigInfo=!1,this.lastProcessedTagsTs=null,this.lastProcessedStats=null,this.lastUnstableMetricsUpdateTs=0,this.lastLoggedTagsTs=Date.now(),this.logHuddleConfigInfo=ie=>{if(this.loggedHuddleConfigInfo||!this.lastProcessedTagsTs)return;const{isIA4Prod:Ue,isUnifiedGrid:Qe,visibleSidebarItemCount:je,networkType:ht,networkProtocol:ot,networkRelayProtocol:gt,isHardwareAccelerationEnabled:wt,batteryIsUsing:Dn}=ie;this.callLogger.info(`Initial Huddle Config: Network Type=${ht}; Network Protocol=${ot}; Network Relay Protocol=${gt}; IA4=${Ue}; Unified Grid=${Qe}; Hardware Acceleration=${wt??"unknown (browser)"}; Using Battery Power=${Dn}; Sidebar Size=${je};`),this.loggedHuddleConfigInfo=!0},this.logWarningAndAlertUpdates=(ie,Ue)=>{Object.entries(ie).forEach(Qe=>{let[je,ht]=Qe;if(ht&&this.isRelevantWarning(je,ie)&&F[je]){let ot;if(je in W){const wt=W[je];wt&&(Ue!=null&&Ue[wt])&&(ot=Ue[wt])}this.logger.warn(`\u{1F6A8} WARNING! ${F[je]}${ot?` reasons: (${ot})`:""}`)}})},this.isRelevantWarning=(ie,Ue)=>ie==="isNetworkQualityPoor"||ie==="isCpuCompetitionPoor"?"isAudioQualityPoor"in Ue&&!!Ue.isAudioQualityPoor:!0,this.logTags=ie=>{const Ue=Date.now();this.isJsPath||this.isDev?this.logger.info(`Recorded ${h.Sq}:${h.Kp} event span tags`,ie):Ue-this.lastLoggedTagsTs>10*1e3&&(this.logger.debug(`Recorded ${h.Sq}:${h.Kp} event span tags`,ie),this.lastLoggedTagsTs=Ue)},this.getStatsDiff=ie=>{const Ue=this.lastProcessedStats;return(0,I.A)(ie,(Qe,je)=>{var ht,ot;return{stable:Ue?!(0,p.A)((ht=Ue[je])===null||ht===void 0?void 0:ht.stable,Qe==null?void 0:Qe.stable):null,unstable:Ue?!(0,p.A)((ot=Ue[je])===null||ot===void 0?void 0:ot.unstable,Qe==null?void 0:Qe.unstable):null}})},this.maybeUpdateTroubleshootingPanel=ie=>{var Ue,Qe,je,ht,ot,gt,wt,Dn,Nn;const Sn=Date.now(),Bn=(0,E.p)(ie),pn=this.getStatsDiff(Bn);if(this.lastProcessedStats=Bn,(!((Ue=pn.alerts)===null||Ue===void 0)&&Ue.stable||((Qe=pn.alerts)===null||Qe===void 0?void 0:Qe.stable)===null)&&Bn.alerts.stable&&(this.dispatch((0,g._6)(Bn.alerts.stable)),pn.alerts.stable&&this.logWarningAndAlertUpdates(Bn.alerts.stable)),(!((je=pn.metrics)===null||je===void 0)&&je.stable||((ht=pn.metrics)===null||ht===void 0?void 0:ht.stable)===null)&&Bn.metrics.stable&&this.dispatch((0,g.qO)(Bn.metrics.stable)),(!((ot=pn.warnings)===null||ot===void 0)&&ot.stable||((gt=pn.warnings)===null||gt===void 0?void 0:gt.stable)===null)&&Bn.warnings.stable&&(this.dispatch((0,g.it)(Bn.warnings.stable)),this.logWarningAndAlertUpdates(Bn.warnings.stable)),!((wt=Bn.alerts)===null||wt===void 0)&&wt.unstable){const yn=this.alertUpdater.getAlertUpdates({alerts:Bn.alerts.unstable});yn&&(this.dispatch((0,g.Li)(yn)),this.logWarningAndAlertUpdates(yn,ie))}Bn.metrics.unstable&&Bn.warnings.unstable&&(!this.lastUnstableMetricsUpdateTs||Sn-this.lastUnstableMetricsUpdateTs>1e4&&(!((Dn=pn.warnings)===null||Dn===void 0)&&Dn.unstable||!((Nn=pn.metrics)===null||Nn===void 0)&&Nn.unstable))&&(this.dispatch((0,g.bW)({metrics:Bn.metrics.unstable,warnings:Bn.warnings.unstable})),this.lastUnstableMetricsUpdateTs=Sn)},this.processTags=ie=>{this.maybeUpdateTroubleshootingPanel(ie),this.logHuddleConfigInfo(ie),this.logTags(ie),this.lastProcessedTagsTs=Date.now()},this.callLogger=U,this.logger=V,this.dispatch=ne,this.alertUpdater=new C(V),this.callLogger.info("huddle perf observer initialized")}}u(Y,"HuddlePerfObserver");const S=null,L=Y;var w=e(2825968873),J=e(5238395322),G=e(2208015175),X=e(9137897911),te=e(9113979368),le=e(8872403767),ve=e(6313685253),Q=e(1687672245);const Ae=u(be=>{if((0,te.A)(be))return;const U=(0,ve.A)(be,(V,ne)=>(0,Q.A)(V,ne,(ie,Ue)=>(ie||0)+Ue),{});return(0,I.A)(U,V=>V/be.length)},"calculateIncomingVideoStatsAverages"),ae=u(be=>{if(typeof be=="string"||typeof be=="boolean")return be;if(!isNaN(be)&&!(typeof be>"u"||be===null))return Math.round(be)},"getScrubbedMetricValue"),he=u(be=>{let{clientMetricReport:U,direction:V}=be;const ne=Object.keys(U.streamMetricReports);let ie;return ne.forEach(Ue=>{const Qe=Number(Ue),je=U.streamMetricReports[Qe];je.direction===V&&je.mediaType===i.zu.AUDIO&&(ie=Qe)}),ie},"getAudioSsrcId"),_e=u((be,U,V,ne,ie)=>{const Ue=be==null?void 0:be.getMetricMap(U,V)[ne];if(Ue!=null&&Ue.transform)return Ue.transform(ne,ie)},"getNonObservedMetric"),ee=u((be,U)=>{const V=U?be.replace(U,""):be;return V.charAt(0).toUpperCase()+V.slice(1)},"removeSubstringAndCapitalize"),de=u(function(be){let U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:50,V=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;if(!(0,_.A)(U)||!(0,_.A)(be))return 0;const ne=isNaN(V)?0:V;if(be===U||be>U)return 0;const Ue=(U-be)/U*100-ne;return Math.round(Ue)},"calculateNonNetworkPacketLoss");var Ie=e(2568070692),ce;(function(be){be[be.UPSTREAM=0]="UPSTREAM",be[be.DOWNSTREAM=1]="DOWNSTREAM"})(ce||(ce={}));var j;(function(be){be[be.AUDIO=0]="AUDIO",be[be.VIDEO=1]="VIDEO"})(j||(j={}));let N,b;const R=u(function(be,U,V){let ne=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!be||!U)return;const ie=(U.timestamp-be.timestamp)/1e3,Ue=U[V]-be[V];return ne?Ue/ie:Ue},"getNextStat"),K=u(be=>{let{clientMetricReport:U,selfAttendeeId:V}=be;const ne=U.getObservableVideoMetrics();if(!ne||!V)return;let ie=0;const Ue={},Qe=[];return(0,G.A)(ne,(je,ht)=>{var ot;const gt=Number((ot=Object.keys(je))===null||ot===void 0?void 0:ot[0]);if(!gt)return;const wt=je[gt];if(ht.endsWith("#content")){var Dn,Nn;ie+=1,(0,G.A)(wt,(Zn,Es)=>{Ue[(0,X.A)(`screenshare_${(0,v._3)(Es)}${ie>1?`${ie}_`:""}`)]=ae(Zn)}),Object.assign(Ue,{screenshareVideoDownstreamDecoderImplementation:(Dn=U.streamMetricReports[gt])===null||Dn===void 0||(Nn=Dn.currentStringMetrics)===null||Nn===void 0?void 0:Nn.decoderImplementation,screenshareVideoDownstreamFramesReceivedPerSecond:U.countPerSecond("framesReceived",gt),screenshareVideoDownstreamFramesDroppedPerSecond:_e(U,j.VIDEO,ce.DOWNSTREAM,"framesDropped",gt),screenshareVideoDownstreamFreezeCount:_e(U,j.VIDEO,ce.DOWNSTREAM,"freezeCount",gt),screenshareVideoDownstreamTotalDecodeTime:_e(U,j.VIDEO,ce.DOWNSTREAM,"totalDecodeTime",gt),screenshareVideoDownstreamTotalFreezesDuration:_e(U,j.VIDEO,ce.DOWNSTREAM,"totalFreezesDuration",gt)});return}if(V===ht){if(wt.videoUpstreamBitrate!==0){var Sn,Bn;(0,G.A)(wt,(Zn,Es)=>{Ue[`self${ee(Es,"Upstream")}`]=ae(Zn)}),Object.assign(Ue,{selfVideoHardwareEncoder:_e(U,j.VIDEO,ce.UPSTREAM,"encoderImplementation",gt),selfVideoEncoderImplementation:(Sn=U.streamMetricReports[gt])===null||Sn===void 0||(Bn=Sn.currentStringMetrics)===null||Bn===void 0?void 0:Bn.encoderImplementation,selfVideoTotalEncodeTime:_e(U,j.VIDEO,ce.UPSTREAM,"totalEncodeTime",gt)})}}else{var pn,yn;const Zn=_e(U,j.VIDEO,ce.DOWNSTREAM,"totalDecodeTime",gt);if(Zn){var jn;Ue.videoDownstreamTotalDecodeTime=((jn=Ue.videoDownstreamTotalDecodeTime)!==null&&jn!==void 0?jn:0)+Zn}Object.assign(Ue,{videoDownstreamDecoderImplementation:(pn=U.streamMetricReports[gt])===null||pn===void 0||(yn=pn.currentStringMetrics)===null||yn===void 0?void 0:yn.decoderImplementation}),Qe.push({...wt,videoDownstreamFramesReceivedPerSecond:U.countPerSecond("framesReceived",gt),videoDownstreamFramesDroppedPerSecond:_e(U,j.VIDEO,ce.DOWNSTREAM,"framesDropped",gt)})}}),(0,te.A)(Qe)||Object.assign(Ue,Ae(Qe)),Ue},"getVideoMetricTags"),B=["nackCountReceivedPerSecond","currentRoundTripTimeMs","availableOutgoingBitrate","availableIncomingBitrate"],$=u(be=>{let{clientMetricReport:U}=be;const{audioDecoderLoss:V,audioPacketLossPercent:ne,audioPacketsReceived:ie,audioPacketsReceivedFractionLoss:Ue,audioPacketsSent:Qe,audioSpeakerDelayMs:je,audioDownstreamJitterMs:ht,videoUpstreamBitrate:ot,videoPacketSentPerSecond:gt,currentRoundTripTimeMs:wt,availableIncomingBitrate:Dn,availableOutgoingBitrate:Nn,nackCountReceivedPerSecond:Sn,audioUpstreamRoundTripTimeMs:Bn,audioUpstreamJitterMs:pn}=U.getObservableMetrics(),yn=50,jn=de(ie,yn,Ue),Zn=de(Qe,yn,ne),Es={audioDownstreamDecoderLoss:V,audioUpstreamPacketLossPercent:ne,audioDownstreamPacketsReceived:ie,audioDownstreamPacketLossPercent:Ue,audioDownstreamJitterMs:ht,audioUpstreamPacketsSent:Qe,audioDownstreamNonNetworkPacketLossPercent:jn,audioUpstreamNonNetworkPacketLossPercent:Zn,audioDownstreamJitterBufferDelay:je,selfVideoBitrate:ot,selfVideoPacketsSentPerSecond:gt,audioUpstreamRoundTripTimeMs:Bn,audioUpstreamJitterMs:pn,networkCurrentRoundTripTimeMs:wt,networkAvailableIncomingBitrate:Dn,networkAvailableOutgoingBitrate:Nn,networkNackCountReceivedPerSecond:Sn},Us=(0,le.A)(Es,(Fe,ut)=>B.indexOf(ut)>-1?(0,X.A)(`network_${ut}`):ut),Ss={networkSocketPacketsDiscardedOnSend:U.globalMetricReport.currentMetrics.packetsDiscardedOnSend},rs=he({clientMetricReport:U,direction:ce.DOWNSTREAM});let H;if(rs){const Fe=_e(U,j.AUDIO,ce.DOWNSTREAM,"concealedSamples",rs);H={audioDownstreamTotalSamplesReceived:_e(U,j.AUDIO,ce.DOWNSTREAM,"totalSamplesReceived",rs),audioDownstreamConcealedSamples:Fe}}return(0,I.A)({...Us,...Ss,...H},Fe=>ae(Fe))},"getAudioMetricTags"),Z=u(be=>{const U={},V=[];let ne;if(!be)return N=void 0,U;be.forEach(Ue=>{Ue.type==="local-candidate"&&V.push(Ue),Ue.type==="media-source"&&Ue.kind==="audio"&&(U.audioUpstreamTotalSamplesDuration=Ue.totalSamplesDuration,U.audioUpstreamAudioLevel=Ue.audioLevel,U.audioUpstreamTotalAudioEnergy=Ue.totalAudioEnergy),Ue.type==="candidate-pair"&&Ue.state==="succeeded"&&Ue.nominated&&Ue.localCandidateId&&(ne=Ue.localCandidateId),Ue.type==="inbound-rtp"&&Ue.kind==="audio"&&(U.audioDownstreamLevel=Ue.audioLevel),Ue.type==="outbound-rtp"&&Ue.kind==="video"&&(U.selfVideoQualityLimitationDurations=Ue.qualityLimitationDurations&&(0,Ie.Zf)(Ue.qualityLimitationDurations),U.selfVideoOutboundFramesPerSecond=Ue.framesPerSecond,U.selfVideoPacketSendDelay=R(N,Ue,"totalPacketSendDelay"),N=Ue),Ue.type==="media-source"&&Ue.kind==="video"&&(U.selfVideoSourceFramesPerSecond=Ue.framesPerSecond)});const ie=V.find(Ue=>Ue.id===ne);if(ie){const{networkType:Ue,protocol:Qe,relayProtocol:je}=ie;U.networkType=Ue,U.networkProtocol=Qe,U.networkRelayProtocol=je}return U},"getRtcStatsTags"),re=u(be=>{if(!be){b=void 0;return}const U={};return be.forEach(V=>{if(V.type==="remote-inbound-rtp"&&V.kind==="video"){const{fractionLost:ne,jitter:ie,roundTripTime:Ue}=V;Object.assign(U,{screenshareUpstreamJitter:ie*1e3,screenshareUpstreamPacketLossPercent:ne*100,screenshareUpstreamRoundTripTime:Ue*1e3})}if(V.type==="outbound-rtp"&&V.kind==="video"){const{frameHeight:ne,frameWidth:ie,framesPerSecond:Ue,targetBitrate:Qe,encoderImplementation:je,scalabilityMode:ht,powerEfficientEncoder:ot}=V;if(Object.assign(U,{screenshareUpstreamTargetBitrate:Qe,screenshareUpstreamFrameWidth:ie,screenshareUpstreamFrameHeight:ne,screenshareUpstreamFramesPerSecond:Ue,screenshareUpstreamEncoderImplementation:je,screenshareUpstreamPowerEfficientEncoder:ot,screenshareUpstreamScalabilityMode:ht}),!b){b=V;return}const gt=R(b,V,"totalEncodeTime",!0),wt=gt&&gt*1e3;Object.assign(U,{screenshareUpstreamPacketsSent:R(b,V,"packetsSent"),screenshareUpstreamPacketSendDelay:R(b,V,"totalPacketSendDelay"),screenshareUpstreamKeyFramesEncoded:R(b,V,"keyFramesEncoded"),screenshareUpstreamBitrate:R(b,V,"bytesSent",!0),screenshareUpstreamTotalEncodeTime:wt}),b=V}}),(0,I.A)(U,V=>ae(V))},"getScreenshareRtcStatsTags"),Te=u(be=>{let{clientMetricReport:U,selfAttendeeId:V}=be;const ne=K({clientMetricReport:U,selfAttendeeId:V}),ie=$({clientMetricReport:U});return{...ne,...ie}},"getClientMetricReportTags"),Ce={getVideoMetricTags:K,getAudioMetricTags:$,getClientMetricReportTags:Te,getScreenshareRtcStatsTags:re,getRtcStatsTags:Z};var Pe=e(4404059078),fe=e(6890312250),pe=e(2205899741);const q=0,se=100;function ge(be){return be.endsWith(",")?be.slice(0,-1):be}u(ge,"trimComma");const Oe=u(()=>{let be=100,U="";return{deductFromScoreForReason:(V,ne)=>{V&&(be-=V,U+=`${ne},`)},getScore:()=>(0,Pe.A)(be,q,se),getReasons:()=>ge(U)}},"trackScoreAndReasons"),Le=u(be=>{const{deductFromScoreForReason:U,getScore:V,getReasons:ne}=Oe(),{screenshareUpstreamBitrate:ie,screenshareUpstreamPacketLossPercent:Ue,screenshareUpstreamJitter:Qe,screenshareUpstreamRoundTripTime:je,screenshareUpstreamFramesPerSecond:ht,screenshareUpstreamPacketSendDelay:ot,screenshareUpstreamQualityLimitationReason:gt}=be;if(ie)return U((0,pe.Tg)(Ue),"screenshareUpstreamPacketLossPercent"),U((0,pe._N)(Qe),"screenshareUpstreamJitter"),U((0,pe.oj)(je),"screenshareUpstreamRoundTripTime"),U((0,pe.RI)(ot),"screenshareUpstreamPacketSendDelay"),U((0,pe.qf)(h.w4-ht),"screenshareUpstreamFramesPerSecond"),U((0,pe.Fq)(gt),"screenshareUpstreamQualityLimitationReason"),{screenshareUpstreamQualityScore:V(),screenshareUpstreamQualityScoreReasons:ne()}},"getScreenshareUpstreamQualityScore"),We=u(be=>{const{selfVideoPacketLossPercent:U,selfVideoFrameHeight:V,selfVideoFrameWidth:ne,selfVideoRoundTripTime:ie,selfVideoJitterMs:Ue,selfVideoFramesEncodedPerSecond:Qe,isSelfVideoEnabled:je}=be;if(!je||!ne)return;const{deductFromScoreForReason:ht,getScore:ot,getReasons:gt}=Oe();ht((0,pe.Tg)(U),"selfVideoPacketLossPercent");const wt=V*ne;return ht((0,pe.e7)(100-wt/h.An*100),"selfVideoFrameHeight,selfVideoFrameWidth"),ht((0,pe._N)(Ue),"selfVideoJitterMs"),ht((0,pe.oj)(ie),"selfVideoRoundTripTime"),ht((0,pe.qf)(h.tz-Qe),"selfVideoFramesEncodedPerSecond"),{selfVideoQualityScore:ot(),selfVideoQualityScoreReasons:gt()}},"getSelfVideoQualityScore"),Re=u(be=>{const{videoDownstreamPacketLossPercent:U,videoDownstreamFramesDecodedPerSecond:V,videoDownstreamFrameHeight:ne,videoDownstreamFrameWidth:ie,videoDownstreamJitterMs:Ue,videoDownstreamDelayMs:Qe}=be;if(!ie)return;const{deductFromScoreForReason:je,getScore:ht,getReasons:ot}=Oe();je((0,pe.Tg)(U),"videoDownstreamPacketLossPercent");const gt=ne*ie;return je((0,pe.e7)(h.An/gt),"videoDownstreamFrameHeight,videoDownstreamFrameWidth"),je((0,pe.q4)(Qe),"videoDownstreamDelayMs"),je((0,pe._N)(Ue),"videoDownstreamJitterMs"),je((0,pe.qf)(h.tz-V),"videoDownstreamFramesDecodedPerSecond"),{videoDownstreamQualityScore:ht(),videoDownstreamQualityScoreReasons:ot()}},"getVideoDownstreamQualityScore"),we=u(function(be){let U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const{deductFromScoreForReason:V,getScore:ne,getReasons:ie}=Oe();if(U){const{screenshareVideoDownstreamPacketLossPercent2:ot,screenshareVideoDownstreamJitterMs2:gt,screenshareVideoDownstreamDelayMs2:wt,screenshareVideoDownstreamFrameHeight2:Dn}=be;return Dn?(V((0,pe.Tg)(ot),"screenshareVideoDownstreamPacketLossPercent2"),V((0,pe._N)(gt),"screenshareVideoDownstreamJitterMs2"),V((0,pe.q4)(wt),"screenshareVideoDownstreamDelayMs2"),{screenshareVideoDownstreamQualityScore2:ne(),screenshareVideoDownstreamQualityScoreReasons2:ie()}):void 0}const{screenshareVideoDownstreamPacketLossPercent:Ue,screenshareVideoDownstreamJitterMs:Qe,screenshareVideoDownstreamDelayMs:je,screenshareVideoDownstreamFrameHeight:ht}=be;if(ht)return V((0,pe.Tg)(Ue),"screenshareVideoDownstreamPacketLossPercent"),V((0,pe._N)(Qe),"screenshareVideoDownstreamJitterMs"),V((0,pe.q4)(je),"screenshareVideoDownstreamDelayMs"),{screenshareVideoDownstreamQualityScore:ne(),screenshareVideoDownstreamQualityScoreReasons:ie()}},"getScreenshareDownstreamQualityScore"),Je=u(be=>{const{audioUpstreamPacketLossPercent:U,audioUpstreamRoundTripTimeMs:V,audioUpstreamJitterMs:ne,audioUpstreamNonNetworkPacketLossPercent:ie}=be;if(!V)return;const{deductFromScoreForReason:Ue,getScore:Qe,getReasons:je}=Oe();return Ue((0,pe.Ye)(U),"audioUpstreamPacketLossPercent"),Ue((0,pe.oj)(V),"audioUpstreamRoundTripTimeMs"),Ue((0,pe._N)(ne),"audioUpstreamJitterMs"),Ue((0,pe.fB)(ie),"audioUpstreamNonNetworkPacketLossPercent"),{audioUpstreamQualityScore:Qe(),audioUpstreamQualityScoreReasons:je()}},"getAudioUpstreamQualityScore"),it=u(be=>{const U={};return be.screenshareVideoDownstreamFrameHeight2&&Object.assign(U,we(be,!0)),{...we(be),...U}},"getScreenshareDownstreamQualityScores"),et=u(be=>{const{cpuUse:U,gpuUse:V,cpuUseRelative:ne,longTasksPercentage:ie}=be,{deductFromScoreForReason:Ue,getScore:Qe,getReasons:je}=Oe();return Ue((0,pe.sI)(ie),"longTasksPercentage"),Ue((0,pe.$c)(U),"cpuUse"),Ue((0,pe.KG)(V),"gpuUse"),Ue((0,pe.h7)(ne),"cpuUseRelative"),{cpuCompetitionScore:Qe(),cpuCompetitionScoreReasons:je()}},"getCpuCompetitionScoreTags"),lt=u(function(){for(var be=arguments.length,U=new Array(be),V=0;V<be;V++)U[V]=arguments[V];const ne=U.filter(_.A);return ne.length?Math.round((0,fe.A)(ne)):0},"getMetricAverage"),nt=u(be=>{const{networkCurrentRoundTripTimeMs:U,networkNackCountReceivedPerSecond:V,networkSocketPacketsDiscardedOnSend:ne,networkProtocol:ie,networkRelayProtocol:Ue,audioDownstreamJitterMs:Qe,audioDownstreamPacketLossPercent:je,audioUpstreamPacketLossPercent:ht,audioUpstreamJitterMs:ot,videoDownstreamPacketLossPercent:gt,screenshareDownstreamPacketLossPercent:wt,screenshareUpstreamPacketLossPercent:Dn,selfVideoPacketLossPercent:Nn}=be,{deductFromScoreForReason:Sn,getScore:Bn,getReasons:pn}=Oe();Sn((0,pe.ik)(ie),"networkProtocol"),Sn((0,pe.ik)(Ue),"networkRelayProtocol"),Sn((0,pe.No)(ne),"networkSocketPacketsDiscardedOnSend"),Sn((0,pe.oj)(U),"networkCurrentRoundTripTimeMs");const yn=lt(Qe,ot);Sn((0,pe._N)(yn),"networkJitterMs"),Sn((0,pe.Ap)(V),"networkNackCountReceivedPerSecond");const jn=lt(je,gt,wt,ht,Nn,Dn);return Sn((0,pe.kq)(jn),"networkPacketLossPercent"),{networkJitterMs:yn,networkPacketLossPercent:jn,networkQualityScore:Bn(),networkQualityScoreReasons:pn()}},"getNetworkQualityScoreTags"),at=u(be=>{const{audioDownstreamDecoderLoss:U,audioDownstreamJitterBufferDelay:V,audioDownstreamPacketLossPercent:ne}=be,{deductFromScoreForReason:ie,getScore:Ue,getReasons:Qe}=Oe();return ie((0,pe.t5)(U),"audioDownstreamDecoderLoss"),ie((0,pe.q4)(V),"audioDownstreamJitterBufferDelay"),ie((0,pe.Ye)(ne),"audioDownstreamPacketLossPercent"),{audioDownstreamQualityScore:Ue(),audioDownstreamQualityScoreReasons:Qe()}},"getAudioDownstreamQualityTags"),Ke=u(be=>({...at(be),...nt(be),...Je(be),...We(be),...it(be),...Le(be),...et(be),...Re(be),qualityScoringVersion:h.Nb}),"getQualityScoreTags"),He=u((be,U)=>{let{type:V,update:ne}=be;switch(V){case i.lx.BluetoothDevices:case i.lx.PreferredMediaRegion:case i.lx.CameraResolution:case i.lx.CallId:case i.lx.ScreenshareContentType:Object.assign(U.sharedTags,ne);break;case i.lx.MemoryLeaks:{const ie=U.sharedTags.memoryLeakCount;Object.assign(U.sharedTags,{type:"shared",tags:{[`memoryLeaks-${ne.name}`]:ne.leakCount,memoryLeakCount:ie?ie+ne.leakCount:ne.leakCount}});break}case i.lx.SelectedMediaRegion:{const{mediaRegionPreferred:ie}=U.sharedTags,Ue=ie&&ne.mediaRegionSelected?ie===ne.mediaRegionSelected:!0;Object.assign(U.sharedTags,{mediaRegionSelected:ne.mediaRegionSelected,mediaRegionMatchesPreference:Ue});break}case i.lx.VoiceFocusConfig:Object.assign(U.sharedTags,{vfSimdSupported:ne.model.simd,vfModelVariant:ne.model.variant,vfSupported:ne.supported});break;case i.lx.NetworkDisconnect:ne.peerId==="self"&&Object.assign(U.transientTags,{selfDisconnectCount:(U.transientTags.selfDisconnectCount||0)+1});break;case i.lx.NoAudio:{const ie=ne.direction==="send"?{noAudioInput:ne.noAudio}:{noAudioOutput:ne.noAudio};Object.assign(U.sharedTags,ie);break}case i.lx.SetIsDebugApp:Object.assign(U.sharedTags,{isDebugApp:!0});break;default:{(0,w.tZ)("HUDDLES-PERF").error(new Error(`Unexpected type: ${V}`));break}}},"updateState"),Ye=null;var _t=e(6267571562);const vt=(0,s.Wo)({label:"COMPUTE-PRESSURE"}),Tt={nominal:1,fair:2,serious:3,critical:4};class Lt{constructor(){this.defaultSampleRate=.5,this.pubSub=new _t.G,this.isObserving=!1,this.currentLevel=null;var U=this;this.startObserving=(0,m.coroutine)(function*(){if(!U.isObserving){try{var ne;U.isObserving=!0,yield(ne=U.pressureObserver)===null||ne===void 0?void 0:ne.observe("cpu")}catch(ie){U.isObserving=!1,vt.error("An error occurred while attempting to observe compute pressure",ie)}vt.info("Observing compute pressure")}}),this.getPressureLevelFromRecord=ne=>ne?Tt[ne.state]:void 0,this.pressureObserverCallback=ne=>{const ie=ne.pop();if(!ie)return;const Ue=this.getPressureLevelFromRecord(ie);Ue&&(this.currentLevel=Ue,Ue===1?vt.debug(`Compute pressure updated to ${ie.state} (${Ue} of 4)`):vt.warn(`Compute pressure updated to ${ie.state} (${Ue} of 4)`),this.pubSub.publish(Ue))};var V=this;this.subscribe=function(){var ne=(0,m.coroutine)(function*(ie){V.pubSub.subscribe(ie),yield V.startObserving()});return function(ie){return ne.apply(this,arguments)}}(),this.unsubscribe=ne=>{if(this.pubSub.unsubscribe(ne),!this.pubSub.subscriberCount)try{var ie;(ie=this.pressureObserver)===null||ie===void 0||ie.disconnect(),vt.debug("No longer observing compute pressure.")}catch(Ue){vt.error("An error occurred attempted to disconnect from the compute pressure observer",Ue)}},this.getCurrentLevel=()=>{if(this.currentLevel)return this.currentLevel;let ne;try{var ie;ne=(ie=this.pressureObserver)===null||ie===void 0?void 0:ie.takeRecords()}catch(Qe){vt.error("An error occurred attempting to get latest compute pressure reports",Qe)}const Ue=ne?this.getPressureLevelFromRecord(ne.pop()):void 0;return Ue&&(this.currentLevel=Ue),Ue},vt.info("Compute Pressure API is supported. Initializing pressure observer.");try{this.pressureObserver=new PressureObserver(this.pressureObserverCallback,{sampleRate:this.defaultSampleRate})}catch(ne){vt.error("An error occurred creating a new instance of the PressureObserver",ne)}if(!this.pressureObserver){vt.error("Compute pressure observer not created, though PressureObserver API should be supported");return}this.startObserving()}}u(Lt,"ComputePressureObserver"),Lt.isSupported=()=>"PressureObserver"in globalThis;let ft;const mt=u(()=>{if(ft)return ft;if(!Lt.isSupported()){vt.info("Compute Pressure API is not supported.");return}try{ft=new Lt}catch(be){vt.error("An error occurred while attempting to create compute pressure observer",be);return}return ft},"getComputePressureObserver"),Yt=null,nn=null,jt=mt,gn={longTasksPercentage:0,longTasksPeakDuration:0,longTasksCount:0,longTasksTotalDuration:0};let on=u(class{initializeReport(){this.report={...gn},this.lastReportTime=performance.now()}isLongTaskTimingSupported(){return typeof PerformanceObserver<"u"&&PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes("longtask")}start(){this.observer||!this.isSupported||(this.observer=new PerformanceObserver(this.onReceiveLongTaskList),this.observer.observe({entryTypes:["longtask"]}),this.observer.takeRecords())}stop(){this.observer&&(this.observer.disconnect(),this.observer=null)}getReportSinceLastCall(){if(!this.observer||!this.isSupported)return;const V=performance.now()-this.lastReportTime;this.report.longTasksCount>0&&(this.report.longTasksPercentage=Math.round(this.report.longTasksTotalDuration/V*100));const ne={...this.report};return this.initializeReport(),ne}constructor(){this.report={...gn},this.lastReportTime=performance.now(),this.observer=null,this.onReceiveLongTaskList=U=>{const V=U.getEntries();let ne=0,ie=0;V.forEach(Ue=>{const Qe=Ue.duration;ne+=Qe,Qe>ie&&(ie=Qe)}),this.report.longTasksTotalDuration+=ne,this.report.longTasksCount+=V.length,ie>this.report.longTasksPeakDuration&&(this.report.longTasksPeakDuration=ie)},this.isSupported=this.isLongTaskTimingSupported()}},"LongTaskObserver");const Xt=null,rn=on;let Zt=0;const Ht={traceName:h.Sq},Bt="HUDDLES-PERF",Qt={troubleshootingEntryPoint:null,troubleshootingContactUsClicked:!1};let sn=u(class{constructor(){var U;this.callLogger=(0,w.tZ)(Bt),this.logger=(0,s.Wo)({label:Bt}),this.sharedTags=Ht,this.transientTags={},this.renderTimings=[],this.rtmProcessingTimings=[],this.troubleshootingTags={...Qt},this.lastAppMetricsRecordingTs=Date.now(),this.currentTags={},this.computePressure=null,this.longTaskObserver=new rn,this.initSharedTags=()=>{Zt+=1,this.updateSharedTags({huddlesCountSinceRefresh:Zt})},this.initComputePressureObserver=()=>{this.computePressureObserver=jt(),this.computePressureObserver&&this.computePressureObserver.subscribe(this.updateComputePressure).then(()=>{var V;const ne=(V=this.computePressureObserver)===null||V===void 0?void 0:V.getCurrentLevel();this.computePressure=ne})},this.updateSharedTags=V=>{this.sharedTags={...this.sharedTags,...V}},this.updateTransientTags=V=>{this.transientTags={...this.transientTags,...V}},this.updateComputePressure=V=>{const ne=this.computePressure;this.computePressure=V;let ie;switch(V){case 1:ie="System workload is minimal, operating at lower clock speed to conserve power.";break;case 2:ie="System is performing well but under a fair amount of pressure. Still able to take on additional workload without issues.";break;case 3:ie="System is experiencing significant pressure but remains sustainable; close to operational limits.";break;case 4:ie="System is now about to reach its operational limits; continued pressure may lead to CPU throttling.";break;default:ie="Unknown system workload condition."}V>2?this.callLogger.warn(`Compute pressure updated to level ${V} of 4. This is a measure of the strain on the user's computer's processing capacity, which may or may not be caused by Slack or Huddles, but will likely impact performance. A score of ${V} suggests that: ${ie}. If this warning is frequent, suggest that the user close unused tabs or applications on their computer, ensure their computer is not in battery-saving mode, and/or give other general advice around reducing CPU use.`):ne&&ne>2&&this.logger.debug(`Compute pressure updated to level ${V} of 4 from ${ne}. ${ie}`)},this.updateState=V=>{switch(V.type){case i.lx.RenderTiming:this.renderTimings.push(V.update);break;case i.lx.RtmMetrics:this.rtmProcessingTimings.push(V.update);break;case i.lx.AppMetrics:this.updateMetrics(V.update);break;case i.lx.TroubleshootingEntryPoint:this.troubleshootingTags.troubleshootingEntryPoint=V.update;break;case i.lx.TroubleshootingContactUsClicked:this.troubleshootingTags.troubleshootingContactUsClicked=!0;break;default:He(V,{sharedTags:this.sharedTags,transientTags:this.transientTags})}},this.updateMetrics=V=>{let{huddleStateSnapshot:ne,clientMetricReport:ie,screenshareRtcStats:Ue}=V;const Qe=ie?Te({clientMetricReport:ie,selfAttendeeId:ie.selfAttendeeId}):{},je=ie?Z(ie.getRTCStatsReport()):{},ht=re(Ue),ot={...ne,...Qe,...ht,...je,...this.sharedTags,...this.transientTags,...this.getRtmMetricTags(),...this.getRenderTimingTags(),...this.getTimestampTags(),...this.getComputePressureTags(),...this.getLongTaskTags(),...this.getTroubleshootingTags()},gt=Ke(ot);this.currentTags={...ot,...gt},this.clearTransientTags(),this.lastAppMetricsRecordingTs=Date.now()},this.getCurrentTags=()=>({...this.currentTags}),this.clearTransientTags=()=>{this.transientTags={}},this.getLongTaskTags=()=>{var V;return(V=this.longTaskObserver)===null||V===void 0?void 0:V.getReportSinceLastCall()},this.getTimestampTags=()=>{const{huddleStartTimestamp:V}=this.currentTags;return V?{secondsSinceJoining:Math.floor((Date.now()-V)/1e3)}:{}},this.getRtmMetricTags=()=>{const V=this.rtmProcessingTimings.length;return this.rtmProcessingTimings=[],{rtmMessagesProcessed:V}},this.getTroubleshootingTags=()=>{const V={...this.troubleshootingTags};return this.troubleshootingTags={...Qt},V},this.getComputePressureTags=()=>({computePressure:this.computePressure}),this.getRenderTimingTags=()=>{const V=Date.now()-this.lastAppMetricsRecordingTs,ne=(0,J.A)(this.renderTimings),ie=this.renderTimings.length;return!ne||!V?{uiRenderTimePercent:0,uiRenderTimeMs:0}:(this.renderTimings=[],{uiRenderTimePercent:Number((ne/V*100).toFixed(1)),uiRenderCount:ie})},this.cleanup=()=>{var V,ne;(V=this.computePressureObserver)===null||V===void 0||V.unsubscribe(this.updateComputePressure),delete this.computePressureObserver,(ne=this.longTaskObserver)===null||ne===void 0||ne.stop(),delete this.longTaskObserver},this.initSharedTags(),this.initComputePressureObserver(),(U=this.longTaskObserver)===null||U===void 0||U.start()}},"HuddlePerfStateInternal");const Mn=null,ct=sn;var yt=e(5071086688),Rt=e(5387083734),xe=e(7645722292),Nt=e(8634352961),Ft=e(415910655),qt=e(5332875232);const un="HUDDLES-PERF",tt=5e3,pt=1e3;let Dt=u(class{constructor({teamId:U,logger:V,dispatch:ne,getState:ie,useRtmFiltering:Ue=!1}){this.logger=(0,s.Wo)({label:un}),this.callLogger=(0,w.tZ)(un),this.errorReported=!1,this.lastRecordedMetricsTs=0,this.reportCounts={skipped:0,recorded:0},this.reportUpdate=Qe=>{Qe.type===i.lx.AppMetrics?this.recordAppMetrics(Qe):this.huddlePerfState.updateState(Qe)},this.recordAppMetrics=Qe=>{(0,Rt.IE)("huddle-perf-metrics",()=>{var je,ht;if(!this.shouldRecordAppMetrics({nextReportTimestamp:(je=Qe.update)===null||je===void 0||(ht=je.clientMetricReport)===null||ht===void 0?void 0:ht.currentTimestampMs})){this.reportCounts.skipped+=1;return}this.logger.debug("Recording app metrics",this.reportCounts.recorded),this.huddlePerfState.updateState(Qe);const ot=this.huddlePerfState.getCurrentTags();this.huddlePerfTrace.recordAppMetrics(ot),this.updateRtmScheduler(ot);try{this.huddlePerfObserver.processTags(ot)}catch(gt){this.errorReported||(this.callLogger.error("An error occurred while processing tags",gt),this.errorReported=!0)}this.lastRecordedMetricsTs=Date.now(),this.reportCounts.recorded+=1},{delay:100})},this.shouldRecordAppMetrics=Qe=>{let{nextReportTimestamp:je}=Qe;if(!je)return!1;const ht=Date.now(),ot=ht-this.lastRecordedMetricsTs;if(ot<pt)return this.logger.debug(`Not enough time has passed since last report was recorded (${ot}ms). Skipping. Total skipped: ${this.reportCounts.skipped}`),!1;const wt=ht-je;return wt>tt?(this.logger.debug(`Too much time has passed since the current report was made (${wt}ms). Skipping. Total skipped: ${this.reportCounts.skipped}`),!1):!0},this.updateRtmScheduler=Qe=>{const{cpuCompetitionScore:je}=Qe;(0,_.A)(je)&&!this.disableRtmScheduler&&(0,xe.Pk)({cpuCompetitionScore:je})},this.report=Qe=>{this.huddlePerfTrace.report(Qe),yt.A.unsubscribe(this.reportUpdate),this.huddlePerfState.cleanup(),(0,d.rH)(!1),(0,Ft.ZR)(),this.disableRtmScheduler||(0,xe.TK)(),this.useRtmFiltering&&(this.callLogger.info("RTM filtering will be disabled"),(0,Nt.gR)())},this.huddlePerfTrace=new y({teamId:U,logger:V,callLogger:this.callLogger,enableMaxReportingFrequency:(0,qt.CN)(ie())}),this.huddlePerfObserver=new L({logger:V,callLogger:this.callLogger,dispatch:ne}),this.useRtmFiltering=Ue,this.huddlePerfState=new ct,yt.A.subscribe(this.reportUpdate),this.disableRtmScheduler=(0,qt.kf)(ie()),this.disableRtmScheduler?(this.callLogger.info("RTM scheduler will be disabled"),(0,d.jQ)(!0)):this.callLogger.info("RTM queues will be drained as background priority tasks by Huddle RTM scheduler"),(0,d.rH)(!0),this.useRtmFiltering&&(0,Nt.ws)(ie)}},"HuddlePerfManager");const Wt=null,zt=Dt;var ln=e(6533394955),Tn=e(2141441167),cn=e(2709531527),hn=e(8276911661),Cn=e(5795074931),_n=e(5286203919),Vn=e(8847766420),Wn=e(7606781622),kn=e(6251210828),Pn=e(3792998666);const $t=u(be=>{let{teamId:U}=be;var V,ne;const ie=(0,ln.getStoreInstanceByTeamId)(U).getState(),Ue=(0,ln.getClientStoreInstance)().getState(),Qe=(0,_n.E9)(Ue),je=(0,_n.hc)(Ue),ht=(0,Vn.jV)(ie),ot=(0,kn.ok)(ie,{huddleId:Qe}),gt=(0,kn.Zg)(ie,{huddleId:Qe}),wt=(0,Cn.WR)(ie),Dn=gt?gt.timestamps.map(jn=>je?(0,Wn.Ld)(ie,je,jn):void 0).filter(jn=>(jn==null?void 0:jn.user)===wt):[],Nn=(V=Dn[0])===null||V===void 0?void 0:V.ts,Sn=(ne=Dn.slice(-1)[0])===null||ne===void 0?void 0:ne.ts,Bn=Dn.length,pn=(0,hn.nv)(ie,wt),yn=(0,Pn.P)(pn);return{huddleId:Qe,channelId:je,enterpriseId:ht,threadId:ot,threadReplyCnt:Bn,threadFirstReplyTs:Nn,threadLastReplyTs:Sn,isGuest:yn}},"getHuddleEventsStateSnapshot"),$n="huddle_events",De="huddle",Ne="vhq",Me={topicName:De,userAgent:navigator.userAgent,serviceName:Ne};let Be=u(class{get spansList(){var U;return(0,Tn.A)((U=this.trace)===null||U===void 0?void 0:U.getSpans())||[]}report(){var U;let V;try{V=(0,v.tT)({...this.sharedTags,...$t({teamId:this.teamId})})}catch(ie){var ne;this.logger.error(`Error while reporting huddle_events trace: ${ie}`),(ne=this.tracer)===null||ne===void 0||ne.clearTrace(this.trace);return}!this.traceReported&&this.trace&&(this.trace.addTags(V),this.logger.info(`Reporting huddle_events trace: ${this.trace.getTraceId()} with ${this.spansList.length} spans`),this.tracer.reportTrace(this.trace),this.traceReported=!0,this.logger.debug("Reported huddle_events trace with tags",V)),(U=this.tracer)===null||U===void 0||U.clearTrace(this.trace)}constructor({teamId:U,logger:V}){this.sharedTags=Me,this.traceReported=!1,this.getSpanByName=ne=>this.spansList.find(ie=>ne===ie.getOperationName()),this.getDataSet=()=>{if(!(0,n.Cu)())return"client_metrics"},this.addInitialSpans=()=>{this.update({name:cn.p.JOIN,type:cn.G.START,tags:{}}),this.update({name:cn.p.MINIPLAYER_VIEW,type:cn.G.START})},this.isSurfaceChange=ne=>ne===cn.p.MINIPLAYER_VIEW||ne===cn.p.WINDOW_COMPACT_VIEW||ne===cn.p.WINDOW_FULL_VIEW,this.handleSurfaceChange=ne=>{let{name:ie,type:Ue}=ne;Ue===cn.G.START&&this.isSurfaceChange(ie)&&this.spansList.filter(Qe=>this.isSurfaceChange(Qe.getOperationName())).forEach(Qe=>{Qe.getOperationName()!==ie&&this.closeSpan(Qe)})},this.update=ne=>{let{name:ie,type:Ue,tags:Qe}=ne;if(this.trace)if(Ue===cn.G.START||Ue===cn.G.ONCE){const je=this.trace.startSpan(ie,{parentSpanId:this.joinSpanId});Qe&&je.addTags(Qe),ie===cn.p.JOIN&&(this.joinSpanId=je.getId()),this.isSurfaceChange(ie)&&this.handleSurfaceChange({name:ie,type:Ue}),this.logger.debug(`started new span for huddle_events trace: ${ie}`),Ue===cn.G.ONCE&&this.closeSpan(je)}else{const je=this.getSpanByName(ie);this.closeSpan(je),this.logger.debug(`closed span for huddle_events trace: ${ie}`)}},this.closeSpan=ne=>{ne&&(ne.getCloseTimeMs()||ne.close())},this.recordEntryPoint=ne=>{Object.assign(this.sharedTags,{entryPoint:ne})},this.tracer=(0,a.E)({teamOrEnterpriseId:U}),this.trace=this.tracer.createTrace({traceName:$n,tags:{__dataset:this.getDataSet()},samplingOptions:{sampleRate:1,sampleType:c.tS.SESSION}}),this.teamId=U,this.logger=V,this.logger.info(`created huddle_events trace:${this.trace.getTraceId()}`),this.addInitialSpans()}},"HuddleEventsTracer");const ue="HUDDLE-TRACE-MANAGER",ke=(0,s.Wo)({label:ue});let Xe=u(class{initializeTraces(U){let{teamId:V,isTinySpeck:ne,isDebugApp:ie}=U;const Ue=(0,ln.getStoreInstanceByTeamId)(V),Qe=Ue.getState();this.teamId=V,this.tracer=(0,a.E)({teamOrEnterpriseId:this.teamId}),this.trace=this.tracer.createTrace({traceName:o.ne,samplingOptions:{sampleRate:(0,n.Cu)()||ne?1:.05,sampleType:c.tS.SESSION},tags:{__dataset:"client_metrics"}}),ie||(this.reconnectTrace=new r({tracer:this.tracer,trace:this.trace,logger:ke}),this.ttiTrace=new l({teamId:this.teamId,logger:ke}),this.huddleEventsTrace=new Be({teamId:this.teamId,logger:ke})),this.huddlePerfTraceManager=new zt({teamId:this.teamId,logger:ke,dispatch:Ue.dispatch,getState:Ue.getState,useRtmFiltering:(0,qt.DP)(Qe)})}setCallId(U){var V;this.callId=U,(V=this.trace)===null||V===void 0||V.addTags({callId:this.callId}),U&&yt.A.publish({type:i.lx.CallId,update:{callId:U}})}getAllTraceHandlers(){return{reconnectTrace:this.reconnectTrace,ttiTrace:this.ttiTrace,huddlePerfTraceManager:this.huddlePerfTraceManager,huddleEventsTrace:this.huddleEventsTrace}}cleanup(){var U,V,ne,ie,Ue,Qe;(U=this.reconnectTrace)===null||U===void 0||U.report(),(V=this.ttiTrace)===null||V===void 0||V.report(),(ne=this.huddlePerfTraceManager)===null||ne===void 0||ne.report(!0),(ie=this.huddleEventsTrace)===null||ie===void 0||ie.report(),(Ue=this.tracer)===null||Ue===void 0||Ue.reportTrace(this.trace),(Qe=this.tracer)===null||Qe===void 0||Qe.clearTrace(this.trace),ke.info("Reported and cleared huddle parent trace"),delete this.reconnectTrace,delete this.ttiTrace,delete this.huddlePerfTraceManager,delete this.huddleEventsTrace,this.callId=null}constructor(){ke.info("Huddle Trace Manager created")}},"HuddleTraceManager");const bt=(0,t.A)(()=>new Xe)},2709531527:(z,A,e)=>{"use strict";e.d(A,{G:()=>t,p:()=>n});var t;(function(s){s.START="start",s.STOP="stop",s.ONCE="once"})(t||(t={}));var n;(function(s){s.JOIN="session_join",s.VIDEO="video",s.SCREENSHARE="screenshare",s.REACTION="reaction_posted",s.MESSAGE="message_posted",s.MICROPHONE="microphone",s.MINIPLAYER_VIEW="mini_player_view",s.WINDOW_COMPACT_VIEW="window_compact_view",s.WINDOW_FULL_VIEW="window_full_view",s.THREAD_VIEW="thread_flexpane_view",s.TRANSCRIPT="trxn"})(n||(n={}))},1616072515:(z,A,e)=>{"use strict";e.d(A,{_3:()=>a,tT:()=>c});var t=e(4178261413),n=e(8872403767),s=e(6422693406);const a=u(r=>(0,t.A)(r),"formatTag"),c=u(function(r){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"peer_video";return(0,n.A)(r,(_,d)=>d.indexOf(l)>-1?d:a(d))},"formatTags"),o=u(()=>new Bluebird(r=>{setTimeout(r,0)}),"waitForNextTick")},3146858537:(z,A,e)=>{"use strict";e.d(A,{A:()=>g});var t=e(9706240641),n=e(8958249318),s=e(6422693406),a=e(56548687),c=e(6244014364),o=e(6664301844),r=e(2825968873);function l(){return 2}u(l,"getVoiceFocusCacheVersion");var _;const d="voiceFocusCache";function i(){return{userAgent:"unknown",sdkVersion:"unknown",isSupported:"unknown"}}u(i,"createDefaultVoiceFocusCapability");function m(){return{vfConfig:"unknown",lastUpdateTimeMs:0}}u(m,"createDefaultVoiceFocusCachedConfig");function h(){let E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window==null||(_=window.navigator)===null||_===void 0?void 0:_.userAgent,f=arguments.length>1?arguments[1]:void 0;const O=localStorage.getItem(d),C={version:l(),voiceFocusCapability:i(),voiceFocusCachedConfig:m()};if(!O)return C;let M;try{M=JSON.parse(O)}catch(D){return(0,r.tZ)("VOICE-FOCUS-CACHE").error("Could not parse voice focus cache from localStorage: ",D.message),C}return M.version!==l()?C:(M.voiceFocusCapability&&(M.voiceFocusCapability.userAgent!==E||M.voiceFocusCapability.sdkVersion!==f)&&(M.voiceFocusCapability=C.voiceFocusCapability,M.voiceFocusCachedConfig=C.voiceFocusCachedConfig),{...C,...M})}u(h,"readVoiceFocusCache");function v(E){try{localStorage.setItem(d,JSON.stringify(E))}catch(f){(0,r.tZ)("VOICE-FOCUS-CACHE").error("Could not write voice focus cache to localStorage: ",f.message)}}u(v,"writeVoiceFocusCache");var y=e(5470425448),T=e(5071086688);const I=1657647210615,p=1686248081659;let g=u(class{init(f){let{configOnly:O}=f;var C=this;return(0,t.coroutine)(function*(){O||C.callLogger.info(`VF cache: ${!!C.cache}`),C.isSupported=yield C.isCapable(!!O),C.isSupported&&C.prepare(O)})()}isAvailable(){return this.isSupported}getTransformDevice(){var f=this;return(0,t.coroutine)(function*(){if(f.isSupported&&(f.voiceFocusConfigPromise&&(yield f.voiceFocusConfigPromise),!!f.voiceFocusDeviceTransformerPromise)){try{yield f.voiceFocusDeviceTransformerPromise}catch{f.callLogger.error("Could not get VoiceFocusDeviceTransformer");return}if(f.voiceFocusTransformDevicePromise)try{return yield f.voiceFocusTransformDevicePromise}catch{f.callLogger.error("Could not get VoiceFocusTransformDevice")}}})()}shouldDisable(){return!1}setMute(f){var O=this;return(0,t.coroutine)(function*(){const C=yield O.getTransformDevice();C&&(yield C.mute(f))})()}isCapable(f){var O=this;return(0,t.coroutine)(function*(){if(O.isIFramed())return f||O.callLogger.warn("not supported due to IFrame"),!1;let C=!1;switch(O.cache.voiceFocusCapability.isSupported){case"yes":f||O.callLogger.info("cache says supported"),C=!0;break;case"no":f||O.callLogger.info("cache says not supported"),C=!1;break;case"unknown":{f||O.callLogger.info("cache says unknown, determining support..."),O.cache.voiceFocusCapability.userAgent=(0,n.A)(),O.cache.voiceFocusCapability.sdkVersion=o.zF.sdkVersion,C=yield(0,o.w2)().isSupported(),C?O.cache.voiceFocusCapability.isSupported="yes":O.cache.voiceFocusCapability.isSupported="no",v(O.cache),f||O.callLogger.info(`determined supported=${O.cache.voiceFocusCapability.isSupported}, writing to cache`);break}default:O.callLogger.warn(`Voice Focus capability pref bad: ${O.cache.voiceFocusCapability.isSupported}`);break}return C})()}isIFramed(){try{var f;return((f=window.frameElement)===null||f===void 0?void 0:f.nodeName)==="IFRAME"||parent!==top}catch{return!0}}isStale(f){const C=this.cache.voiceFocusCachedConfig.lastUpdateTimeMs,M=this.allowMaxModelsToBeUsed?p:I;return C===0||f-C>6048e5||C<M}prepare(){let f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const O=Date.now(),C=this.cache.voiceFocusCachedConfig.vfConfig,M=this.isStale(O),D={},P={logger:this.chimeLogger};if(C!=="unknown"&&!M){if(f)return;if(!C.supported){this.callLogger.warn("Unsupported config was returned from the cache");return}this.setupDevice(D,P,C);return}this.voiceFocusConfigPromise||(this.callLogger.info("Initializing VoiceFocusDeviceTransformer afresh"),this.voiceFocusConfigPromise=s.S.resolve((0,o.w2)().configure(D,P)),this.voiceFocusConfigPromise.then(k=>{var x;if(!k.supported){this.callLogger.error(`VF Config was provided as unsupported Reason: ${k.reason}`);return}if(!(!(k==null||(x=k.model)===null||x===void 0)&&x.simd)){this.callLogger.error("VF not enabled because device is not expected to be able to perform adequately");return}const W=k;this.callLogger.info(`Got new config, variant: ${W.model.variant}, simd: ${W.model.simd}, executionQuanta: ${W.executionQuanta}`),this.storeVfConfig(O,W),f||this.setupDevice(D,P,W)}).catch(k=>{this.callLogger.info(`Could not get configuration of voice device transformer: ${k.name}: ${k.message}`),f||this.setupDevice(D,P)}))}storeVfConfig(f,O){this.cache.voiceFocusCachedConfig.vfConfig=O,this.cache.voiceFocusCachedConfig.lastUpdateTimeMs=f,v(this.cache)}updateCacheWithUpdatedConfig(f){var O=this;return(0,t.coroutine)(function*(){O.callLogger.info("Updating VF cache with new modified model");const C={logger:O.chimeLogger},M={variant:f},D=yield(0,o.w2)().configure(M,C);D.supported&&O.storeVfConfig(Date.now(),D)})()}setupDevice(f,O,C){const M=f;let D=C,P,k;C?(P=C.model.variant,k=!0):(this.callLogger.info("No VFConfig provided defaulting base model to c10"),P="c10",k=!1);let x=!0;this.allowMaxModelsToBeUsed&&(x=!1);const F=this.chooseModelVariant(P,k,x);if(F.modelWasAdjusted&&(M.variant=F.chosenModel,D=void 0,this.callLogger.info(`VF Model was adjusted from ${C==null?void 0:C.model.variant} to ${F.chosenModel} Reason: ${F.adjustmentReason}`),this.updateCacheWithUpdatedConfig(F.chosenModel)),C){(0,a.e)().track(c.EventId.CALLS_VOICE_FOCUS_CONFIG,{model_variant_determined:C.model.variant,model_variant_override:M.variant,simd:C.model.simd,execution_quanta:C.executionQuanta,hw_concurrency:navigator==null?void 0:navigator.hardwareConcurrency});const Y={...C};Y.model.variant=F.chosenModel,T.A.publish({type:y.lx.VoiceFocusConfig,update:Y}),this.callLogger.info(`model_variant_determined: ${C.model.variant}, model_variant_override: ${F.chosenModel}, simd: ${C.model.simd}, execution_quanta: ${C.executionQuanta}, hw_concurrency: ${navigator==null?void 0:navigator.hardwareConcurrency}`)}this.voiceFocusDeviceTransformerPromise=s.S.resolve((0,o.w2)().create(M,O,D));var W=this;this.voiceFocusDeviceTransformerPromise.then(function(){var Y=(0,t.coroutine)(function*(S){W.voiceFocusTransformDevicePromise=s.S.resolve(S.createTransformDevice(null))});return function(S){return Y.apply(this,arguments)}}()).catch(Y=>{this.callLogger.info(`Could not create voice device transformer exp: ${Y.name}: ${Y.message}`)})}chooseModelVariant(f,O,C){const M={c10:1,c20:2,c50:3,c100:4},D=navigator==null?void 0:navigator.hardwareConcurrency;if(!D)return this.callLogger.info(`Hardware concurrency not available, using self-determined model variant: ${f}`),{modelWasAdjusted:!1,chosenModel:f,adjustmentReason:""};let P;return D<=4?P="c10":D<=6?P="c20":D<=8?P="c50":P="c100",M[P]<M[f]&&!C?{modelWasAdjusted:this.wasModelAdjusted(P,f,O),chosenModel:P,adjustmentReason:"Using CPU restricted model variant which is weaker"}:M[P]>M[f]&&(this.callLogger.info(`using self-determined model variant which is weaker: ${f}`),P=f,!C)?{modelWasAdjusted:!1,chosenModel:f,adjustmentReason:""}:P==="c100"?{modelWasAdjusted:this.wasModelAdjusted("c20",f,O),chosenModel:"c20",adjustmentReason:"Model selection was determined to be c100 capping the model at C20"}:{modelWasAdjusted:this.wasModelAdjusted("c10",f,O),chosenModel:"c10",adjustmentReason:"Model selection was determined to be less than c100 capping the model at C10"}}wasModelAdjusted(f,O,C){return f===O&&!C||f!==O}tearDown(){var f=this;return(0,t.coroutine)(function*(){const O=yield f.getTransformDevice();O&&(f.callLogger.info("Attempting to destroyVoiceFocus"),o.wV.destroyVoiceFocus(O))})()}constructor(f,O){this.chimeLogger=f,this.allowMaxModelsToBeUsed=O,this.callLogger=(0,r.Jt)("VOICE-FOCUS-MANAGER"),this.isSupported=!1,this.cache=h((0,n.A)(),o.zF.sdkVersion)}},"VoiceFocusManager")},8558782493:(z,A,e)=>{"use strict";e.d(A,{k:()=>c});var t=e(56548687),n=e(5795074931),s=e(3395259576),a=e(7439555287);function c(o,r){let l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,_=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;var d;const i=(d=(0,a.KA)())===null||d===void 0?void 0:d.getState();if(!i)return;const m=(0,t.e)({state:i}).setUser((0,n.WR)(i));if(l){const h={...r,room_id:(0,s.G0)(i)};m.track(o,h,{sendImmediately:_})}else m.track(o,r,{sendImmediately:_})}u(c,"trackCallsClog")},164795489:(z,A,e)=>{"use strict";e.d(A,{w:()=>p});var t=e(9706240641),n=e(6680093304),s=e(6422693406),a=e(1031947056),c=e(8276911661),o=e(3677514771),r=e(1269227002),l=e(8848660647),_=e(5046160032),d=e(4914127094),i=e(7299481592);const m="screenhero.rooms.proxyLogs",h=(0,a.Ay)("Send call logs to the server",(g,E,f)=>{let{logs:O,useSendBeacon:C=!1,callId:M}=f;const D=E();let P;if(M?P=M:D.activeCall&&D.activeCall.id&&(P=D.activeCall.id),!P)return(0,i.M)(!1,"There should be an active call in progress in order to send logs."),s.S.reject(new Error("SendLogs: no call"));const k=(0,c.cA)(D),x=(0,o.H7)(D);if(!x)return s.S.reject(new Error("SendLogs: no current team"));const F={data:{room_id:P,user_id:k.id,team_id:x.id,ua:window.navigator.userAgent,event_type:"calls_js_logs",encoding:"none",logs:O}},W={data:JSON.stringify(F.data)};return C?(0,_.A)({apiUrl:"/api/",method:m,token:(0,d.F)(D),versionTs:(0,l.HF)(),versionUid:(0,l.X3)(),args:W})?s.S.resolve():s.S.reject(new Error("SendLogs: beacon failed")):g((0,r.apiCall)({method:m,reason:"calls-logging",args:W}))});h.meta={name:"createThunk",key:"createThunksendLogs",description:"Send call logs to the server"};var v=e(7439555287),y=e(796111729),T=e(9804928153);const I=60*1e3;class p{start(E){(0,i.M)(!this.intervalHandle,"Log reporter already started."),this.callId=E,this.intervalHandle=T.J.setInterval(()=>this.report(!1),I),T.J.addEventListener("beforeunload",this.unloadHandler)}joinLogs(E){return E.map(f=>f.join(" ")).join(`
`)}constructor(E=n.tt){this.buffer=E,this.unloadHandler=()=>{T.J.Cypress||this.report(!0)};var f=this;this.stop=(0,t.coroutine)(function*(){let M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;f.intervalHandle&&T.J.clearInterval(f.intervalHandle),f.intervalHandle=void 0,T.J.removeEventListener("beforeunload",f.unloadHandler),yield f.emptyBuffer(D),f.callId=void 0});var O=this;this.emptyBuffer=(0,t.coroutine)(function*(){let M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;O.buffer.hasItems()&&(yield O.report(M),yield O.emptyBuffer(M))});var C=this;this.report=(0,t.coroutine)(function*(){let M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const{dispatch:D}=(0,v.KA)(),P=C.buffer.flush();if(!P.length)return;const k=C.joinLogs(P);yield D(h({logs:k,useSendBeacon:M,callId:C.callId})).catch(()=>{(0,y.Wo)().error("Failed to send Huddle logs")})})}}u(p,"LogReporter")},3300324857:(z,A,e)=>{"use strict";e.d(A,{A:()=>n});var t=e(6267571562);const n=new t.G},3395259576:(z,A,e)=>{"use strict";e.d(A,{G0:()=>J,jl:()=>ae,pI:()=>Ae});var t=e(2384831516),n=e(2140362605),s=e(462591818),a=e(7299481592),c=e(571104883),o=e(2024014560),r=e(3677514771),l=e(6839188756),_=e(6303366080),d=e(387328355);const i=(0,n.Ay)("Update part or all of the call");i.meta={name:"createAction",key:"createActionupdate",description:"Update part or all of the call"};const m=(0,n.Ay)("Update the active call token");m.meta={name:"createAction",key:"createActionsetServerToken",description:"Update the active call token"};const h=(0,n.Ay)("Update the elapsed call time");h.meta={name:"createAction",key:"createActiontickCallTime",description:"Update the elapsed call time"};const v=(0,n.Ay)("update state to notify active call window is closed");v.meta={name:"createAction",key:"createActioncallWindowClosed",description:"update state to notify active call window is closed"};const y=(0,n.Ay)("Show slow network alert");y.meta={name:"createAction",key:"createActionshowSlowNetworkAlert",description:"Show slow network alert"};const T=(0,n.Ay)("Hide slow network alert");T.meta={name:"createAction",key:"createActionhideSlowNetworkAlert",description:"Hide slow network alert"};const I=(0,n.Ay)("Set no media input from microphone or camera");I.meta={name:"createAction",key:"createActionsetNoMediaInput",description:"Set no media input from microphone or camera"};const p=(0,n.Ay)("Clear no media input from microphone or camera");p.meta={name:"createAction",key:"createActionclearNoMediaInput",description:"Clear no media input from microphone or camera"};const g=(0,n.Ay)("Set no audio output");g.meta={name:"createAction",key:"createActionsetNoAudioOutput",description:"Set no audio output"};const E=(0,n.Ay)("Clear no audio output");E.meta={name:"createAction",key:"createActionclearNoAudioOutput",description:"Clear no audio output"};const f=(0,n.Ay)("Set no or low input audio level");f.meta={name:"createAction",key:"createActionsetNoOrLowInputAudioLevel",description:"Set no or low input audio level"};const O=(0,n.Ay)("Clear no or low input audio level");O.meta={name:"createAction",key:"createActionclearNoOrLowInputAudioLevel",description:"Clear no or low input audio level"};const C=(0,n.Ay)("Start session timeout check");C.meta={name:"createAction",key:"createActionstartSessionTimeoutCheck",description:"Start session timeout check"};const M=(0,n.Ay)("Stop session timeout check");M.meta={name:"createAction",key:"createActionstopSessionTimeoutCheck",description:"Stop session timeout check"};const D=(0,n.Ay)("Maybe start peer joining timeout check");D.meta={name:"createAction",key:"createActionmaybeStartPeerJoinTimeoutCheck",description:"Maybe start peer joining timeout check"};const P=(0,n.Ay)("Stop peer joining timeout check");P.meta={name:"createAction",key:"createActionstopPeerJoinTimeoutCheck",description:"Stop peer joining timeout check"};const k=(0,n.Ay)("Store gleaned contextual information from the url");k.meta={name:"createAction",key:"createActionsetInitialContext",description:"Store gleaned contextual information from the url"};const x=(0,n.Ay)("Set call view mode");x.meta={name:"createAction",key:"createActionsetCallViewMode",description:"Set call view mode"};const F=(0,n.Ay)("Ends call");F.meta={name:"createAction",key:"createActionendCall",description:"Ends call"};const W=(0,t.vy)({},{hasJoined:!1,hasSelfConnected:!1,hasRemotePeerConnected:!1,hasVideoBeenEnabled:!1,hasScreenshareBeenEnabled:!1,elapsedDisplayTime:(0,o.A)(0),viewMode:s.ND.SPEAKER},{storeKey:"activeCall",persistenceEnabled:!1}).on(k,(ee,de)=>{let{viewId:Ie,inviterUserId:ce}=de,j,N,b;return(0,s.cd)(Ie)?j=Ie:(0,s.t1)(Ie)?N=Ie:(0,s.bU)(Ie)&&(b=Ie),{...ee,id:j,conversationId:N,incomingInviterUserId:ce,incomingInviteResponse:(0,c.y3)()?void 0:s.xr.Accept,virtualRoomId:b}}).on(i,(ee,de)=>{let{terminalState:Ie}=de;return ee.terminalState&&(Ie=ee.terminalState),{...ee,...de,terminalState:Ie}}).on(v,(ee,de)=>{let{isCallWindowClosed:Ie}=de;return{...ee,isCallWindowClosed:Ie}}).on(x,(ee,de)=>{let{callViewMode:Ie}=de;return{...ee,viewMode:Ie}}).on(h,ee=>ee.callStartedTimestamp?{...ee,elapsedDisplayTime:(0,o.A)(Date.now()-ee.callStartedTimestamp*1e3)}:ee).on(m,(ee,de)=>{let{token:Ie,tokenExpiry:ce}=de;return ee.server?{...ee,server:{...ee.server,token:Ie,tokenExpiry:ce}}:((0,a.M)("Cannot set server token without a server"),ee)}).on(d.kT,(ee,de)=>({...ee,hasVideoBeenEnabled:ee.hasVideoBeenEnabled||!!de.isCameraEnabled,hasScreenshareBeenEnabled:ee.hasScreenshareBeenEnabled||!!((0,d.E_)(de)&&de.isScreenshareEnabled),hasSelfConnected:ee.hasSelfConnected||!!((0,d.E_)(de)&&de.isConnected)})).on(d.BD,(ee,de)=>({...ee,hasVideoBeenEnabled:ee.hasVideoBeenEnabled||!de.isContent,hasScreenshareBeenEnabled:ee.hasScreenshareBeenEnabled||de.isContent})).on(d.E3,(ee,de)=>({...ee,hasRemotePeerConnected:ee.hasRemotePeerConnected||!!de.isConnected})).on(d.kl,(ee,de)=>({...ee,hasScreenshareBeenEnabled:ee.hasScreenshareBeenEnabled||!!de.isScreenshareEnabled}));var Y=null;const S=u(ee=>!!ee.activeCall.incomingInviterUserId&&!ee.activeCall.incomingInviteResponse,"isIncomingInvitePending"),L=u(ee=>!!ee.activeCall.incomingInviterUserId,"wasInvitedToCall"),w=u(ee=>!!ee.activeCall.conversationId&&isDm(ee.activeCall.conversationId),"wasCreatedFromDm"),J=u(ee=>{var de;return ee==null||(de=ee.activeCall)===null||de===void 0?void 0:de.id},"getActiveCallId"),G=u(ee=>ee.activeCall.server,"getActiveCallServer"),X=u(ee=>ee.activeCall.conversationId,"getActiveConversationId"),te=u(ee=>ee.activeCall&&ee.activeCall.dynamicSurvey,"getDynamicSurveyRates"),le=u(ee=>ee.activeCall.hasSelfConnected&&ee.activeCall.hasRemotePeerConnected,"didSelfAndPeerConnect"),ve=u(ee=>ee.activeCall.terminalState,"getActiveCallTerminalState"),Q=u(ee=>{if(!(!ee.activeCall||!ee.activeCall.server))return ee.activeCall.server.hostname?MediaBackendType.ORCA:MediaBackendType.FREE_WILLY},"getCallMediaBackendType"),Ae=u(ee=>ee.activeCall.isShroudVisible,"isShroudVisibleInCallWindow"),ae=u(ee=>{var de;return(de=ee.activeCall)===null||de===void 0?void 0:de.viewMode},"getCallViewMode"),he=u(ee=>{var de,Ie;return ee==null||(de=ee.activeCall)===null||de===void 0||(Ie=de.sharedInConversations)===null||Ie===void 0?void 0:Ie[0]},"getCallSharedInConversation"),_e=u(ee=>{const de=getCurrentTeam(ee),Ie=X(ee)||he(ee);return!!Ie&&isOnFreePlan(de)&&getChannelIsSponsored(ee,Ie)},"isSponsoredConnectionsChannel")},7366481123:(z,A,e)=>{"use strict";e.d(A,{Iw:()=>M,LL:()=>P,Sb:()=>D,WG:()=>k,Xs:()=>Y,eI:()=>C,mV:()=>f,vT:()=>I,xw:()=>W});var t=e(2384831516),n=e(2140362605),s=e(3385422400),a=e(387328355),c=e(3395259576),o=e(462591818),r=e(9683518026),l=e(6217320234),_=e(2101927269),d=e(166097325),i=e(8571983633),m=e(3783303734),h=e(8086952004),v=e(2825968873),y=e(700984029),T=e(9365970888),I;(function(S){S.Connecting="connecting",S.NoConnection="noConnection",S.NoUserAudioDevice="noUserAudioDevice",S.NoUserVideoDevice="noUserVideoDevice",S.NoSystemAudio="noSystemAudio",S.NoSystemVideo="noSystemVideo",S.NoSystemScreenShare="noSystemScreenShare",S.RemotePeerMuted="remotePeerMuted",S.PeerMuteRequest="peerMuteRequest",S.RemotePeerSlowConnection="remotePeerSlowConnection",S.DisplayDisconnected="displayDisconnected",S.UpdateSlack="updateSlack",S.ScreenShareFreeTeam="screenShareFreeTeam",S.NoGroupCallsForFreeTeam="noGroupCallsForFreeTeam",S.NoUserVideoStream="noUserVideoStream",S.NoUserAudioStream="noUserAudioStream",S.SlowNetwork="slowNetwork",S.NoAudioOutputAudioElementError="noAudioOutputAudioElementError",S.NoAudioOutputAudioLevelError="noAudioOutputAudioLevelError",S.NoOrLowInputAudioLevelError="noOrLowInputAudioLevelError",S.SpeakingWhenMuted="SpeakingWhenMuted",S.ScreenShareError="screenShareError",S.SSNotFoundError="ScreenShareNotFoundError",S.SSNotReadableError="ScreenShareNotReadableError",S.NoiseSuppressionCPUThrottled="NoiseSuppressionCPUThrottled",S.NoBrowserAudioPermission="NoBrowserAudioPermission",S.NoBrowserVideoPermission="NoBrowserVideoPermission",S.AudioInputTrackMuted="AudioInputTrackMuted",S.HiddenUserJoinedHuddle="HiddenUserJoinedHuddle",S.AudioOnlyModeRecommended="AudioOnlyRecommended",S.AudioOnlyModeActive="AudioOnlyModeActive",S.ExternalUsersInHuddle="ExternalUsersInHuddle"})(I||(I={}));const p=[I.RemotePeerMuted,I.SlowNetwork];function g(S,L){switch(S){case I.NoConnection:return{priority:0,type:S,icon:"cloud-offline",isWarning:!0};case I.Connecting:return{priority:0,type:S,isWarning:!0};case I.NoSystemAudio:return{priority:200,type:S,dismissible:!0,isWarning:!0};case I.SpeakingWhenMuted:return{priority:200,type:S,dismissible:!0};case I.AudioInputTrackMuted:return{priority:200,type:S,dismissible:!0,isWarning:!0};case I.NoUserAudioDevice:return{priority:201,type:S,dismissible:!0,isWarning:!0};case I.NoUserAudioStream:return{priority:202,type:S,dismissible:!0,isWarning:!0};case I.NoiseSuppressionCPUThrottled:return{priority:203,type:S,dismissible:!0,isWarning:!0};case I.NoBrowserAudioPermission:return{priority:204,type:S,dismissible:!0,isWarning:!0};case I.AudioOnlyModeActive:return{priority:205,type:S,dismissible:!0,isWarning:!0};case I.AudioOnlyModeRecommended:return{priority:206,type:S,dismissible:!0,isWarning:!0};case I.NoSystemScreenShare:return{priority:300,type:S,dismissible:!0,isWarning:!0};case I.ScreenShareError:return{priority:301,type:S,dismissible:!0,isWarning:!0};case I.SSNotFoundError:return{priority:302,type:S,dismissible:!0,isWarning:!0};case I.SSNotReadableError:return{priority:303,type:S,dismissible:!0,isWarning:!0};case I.NoSystemVideo:return{priority:400,type:S,dismissible:!0,isWarning:!0};case I.NoUserVideoDevice:return{priority:401,type:S,dismissible:!0,isWarning:!0};case I.NoUserVideoStream:return{priority:402,type:S,dismissible:!0,isWarning:!0};case I.NoBrowserVideoPermission:return{priority:403,type:S,dismissible:!0,isWarning:!0};case I.ScreenShareFreeTeam:return{priority:500,type:S,dismissible:!0};case I.NoGroupCallsForFreeTeam:return{priority:500,type:S,dismissible:!0};case I.HiddenUserJoinedHuddle:return{priority:600,type:S,dismissible:!0,isWarning:!0};case I.ExternalUsersInHuddle:return{priority:601,type:S,dismissible:!0,isWarning:!0};case I.SlowNetwork:return{priority:700,type:S,dismissible:!0,isWarning:!0,icon:"slow-network"};case I.NoAudioOutputAudioElementError:return{priority:701,type:S,dismissible:!0,isWarning:!0};case I.NoAudioOutputAudioLevelError:return{priority:701,type:S,dismissible:!0,isWarning:!0};case I.NoOrLowInputAudioLevelError:return{priority:701,type:S,dismissible:!0,isWarning:!0};case I.RemotePeerSlowConnection:return{priority:800,type:S,id:L};case I.RemotePeerMuted:return{priority:801,type:S,id:L,icon:"microphone-slash"};case I.PeerMuteRequest:return{priority:802,type:S,id:L,dismissible:!0,isWarning:!0};case I.DisplayDisconnected:return{priority:900,type:S,dismissible:!0};case I.UpdateSlack:default:return{priority:1e3,type:S,dismissible:!0}}}u(g,"makeAlertObject");const E={alerts:[]};function f(S,L,w){const J=g(L,w);return w?(0,r.A)((0,l.A)([J,...S.alerts],["priority"]),(G,X)=>G.id===X.id&&G.type===X.type):(0,r.A)((0,l.A)([J,...S.alerts],["priority"]),(G,X)=>G.id?G.id===X.id&&G.type===X.type:G.type===X.type)}u(f,"createArrayWithNewAlert");function O(S,L){return(0,_.A)(S.alerts,w=>w.type!==L)}u(O,"filterAlertType");function C(S,L){return(0,_.A)(S.alerts,w=>!L.find(J=>w.type===J))}u(C,"filterAlertTypes");const M=(0,n.Ay)("Add an alert from the alerts array");M.meta={name:"createAction",key:"createActionaddAlert",description:"Add an alert from the alerts array"};const D=(0,n.Ay)("Add an alert from the alerts array, specifying sender peer Id");D.meta={name:"createAction",key:"createActionaddPeerAlert",description:"Add an alert from the alerts array, specifying sender peer Id"};const P=(0,n.Ay)("Remove an alert from the alerts array");P.meta={name:"createAction",key:"createActionremoveAlert",description:"Remove an alert from the alerts array"};const k=u(()=>(0,t.vy)({},E,{storeKey:"alert",persistenceEnabled:!1}).on(M,(S,L)=>{const w=f(S,L);return(0,d.A)(S.alerts,w)?S:((0,v.tZ)("ALERTS").info(`Added alert type: '${L.toString()}'`),{alerts:w})}).on(D,(S,L)=>{let{alert:w,peerId:J}=L;const G=f(S,w,J);return(0,d.A)(S.alerts,G)?S:((0,v.tZ)("ALERTS").info(`Added peer alert type: '${w.toString()}'`),{alerts:G})}).on(P,(S,L)=>{const w=O(S,L);return(0,d.A)(S.alerts,w)?S:((0,v.tZ)("ALERTS").info(`Removed alert type: '${L.toString()}'`),{alerts:w})}),"createDefaultAlertReducer"),x=k().on(y.Fb,(S,L)=>{let w=S.alerts;return(0,T.yp)(L)?w=(0,_.A)(S.alerts,J=>J.type!==I.NoUserAudioDevice):w=f(S,I.NoUserAudioDevice),{alerts:w}}).on(a.Uu,(S,L)=>{let w=S.alerts;return L.isMicrophoneEnabled===!1&&(w=f(S,I.RemotePeerMuted,L.id)),L.slowNetwork&&(w=f(S,I.RemotePeerSlowConnection,L.id)),{alerts:w}}).on(a.xx,(S,L)=>({alerts:(0,_.A)(S.alerts,J=>J.id!==L)})).on(a.kT,(S,L)=>{let w=S.alerts;return(0,a.E_)(L)?(0,i.A)(L.isConnected)||(L.isConnected?w=O(S,I.Connecting):w=f(S,I.Connecting,L.id)):((0,i.A)(L.isMicrophoneEnabled)||(L.isMicrophoneEnabled?w=O(S,I.RemotePeerMuted):w=f(S,I.RemotePeerMuted,L.id)),(0,i.A)(L.slowNetwork)||(L.slowNetwork===!1?w=O(S,I.RemotePeerSlowConnection):L.slowNetwork&&(w=f(S,I.RemotePeerSlowConnection,L.id)))),{alerts:w}});var F=null;const W=(0,t.Mz)(S=>S.alert.alerts);W.meta={name:"createSelector",key:"createSelectorgetAllAlerts",description:S=>S.alert.alerts};const Y=(0,s.Mz)(W,a.EA,c.jl,(S,L,w)=>{let J=S;w===o.ND.GALLERY&&(J=(0,_.A)(S,te=>!p.includes(te.type)));let G=J[0];return(0,m.A)(L)>1&&(G=(0,h.A)(S,te=>!te.id)),G})},6839101721:(z,A,e)=>{"use strict";e.d(A,{D8:()=>i,WY:()=>d,cn:()=>m,d2:()=>l,gJ:()=>_});var t=e(2140362605);const n=(0,t.Ay)("connect to free willy media server");n.meta={name:"createAction",key:"createActionconnectToFreeWillyMediaServer",description:"connect to free willy media server"};const s=(0,t.Ay)("Set flag to indicate if experimental Chime SDK should be used");s.meta={name:"createAction",key:"createActionsetUseChimeSdkExp",description:"Set flag to indicate if experimental Chime SDK should be used"};const a=(0,t.Ay)("Set flag to indicate if simulcast should be used in a Chime call");a.meta={name:"createAction",key:"createActionsetUseSimulcast",description:"Set flag to indicate if simulcast should be used in a Chime call"};const c=(0,t.Ay)("Set flag to indicate if priority based downlink policy should be used in a Chime call");c.meta={name:"createAction",key:"createActionsetUsePriorityDownlinkPolicy",description:"Set flag to indicate if priority based downlink policy should be used in a Chime call"};const o=(0,t.Ay)("Set flag to indicate if getMediaAccess checks for Windows should be used in a Chime call");o.meta={name:"createAction",key:"createActionsetUseGetMediaAccessCheckForWindows",description:"Set flag to indicate if getMediaAccess checks for Windows should be used in a Chime call"};const r=(0,t.Ay)("Set flag to determine if a call is a readiness test call");r.meta={name:"createAction",key:"createActionsetReadinessCheck",description:"Set flag to determine if a call is a readiness test call"};const l=(0,t.Ay)("Binds video tile to a video element");l.meta={name:"createAction",key:"createActionbindVideo",description:"Binds video tile to a video element"};const _=(0,t.Ay)("Unbinds video tile from a video element");_.meta={name:"createAction",key:"createActionunbindVideo",description:"Unbinds video tile from a video element"};const d=(0,t.Ay)("Pauses video tile");d.meta={name:"createAction",key:"createActionpauseVideo",description:"Pauses video tile"};const i=(0,t.Ay)("Unpauses video tile");i.meta={name:"createAction",key:"createActionunpauseVideo",description:"Unpauses video tile"};const m=(0,t.Ay)("Returns if there in a stream associated with the tileId");m.meta={name:"createAction",key:"createActionvideoTileHasStream",description:"Returns if there in a stream associated with the tileId"}},3094144240:(z,A,e)=>{"use strict";e.d(A,{P:()=>t});const t={height:576,width:1024,useContentSize:!0,minContentWidth:704,minContentHeight:396,center:!0,frame:!0,titleBarStyle:"default"};function n(s){return!!has(s,"activeCall")}u(n,"isCallWindowContextState")},5156662944:(z,A,e)=>{"use strict";e.d(A,{Rv:()=>F,Xk:()=>x,hL:()=>k,j7:()=>J,lp:()=>W,tO:()=>Q,tw:()=>Y,uI:()=>le,vf:()=>te});var t=e(5597672932),n=e(6007206761),s=e(4630136761),a=e(9289081806),c=e(8798294025),o=e(1407713935),r=e(2350349607),l=e(6839188756),_=e(4827886670),d=e(8276911661),i=e(6728717861),m=e(8921478798),h=e(8170643398),v=e(3534324375),y=e(3677514771),T=e(735940183),I=e(9101533895),p=e(5670315214),g=e(8767621462),E=e(462591818),f=e(340763958),O=e(6470070112);const C="Slack",M=new T.Ay("calls");function D(ae){return!!(0,t.x)(ae,"allow_calls")}u(D,"isCallsAllowedByAdmin");function P(ae,he){return(0,O.pt)(ae)&&(0,O.Bn)(ae,he)}u(P,"isHuddlesAllowed");function k(ae,he,_e){const ee=(0,I.Pu)(ae,he.id);return!(!D(ae)&&!P(ae,ee)||(0,h.fy)(he)&&!_e||!(0,h._W)(he)||!(0,g.S)(ae,he.id)||(0,a.Mi)(ee))}u(k,"canCallMember");function x(ae,he){let _e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const ee=(0,d.nv)(ae,(0,c.e)(he)),de=_e&&X(ae);return!D(ae)&&!P(ae,he)&&!de||(0,s.Zz)(he)||(0,o.LI)(he)&&(!ee||!k(ae,ee))||!(0,a.Ez)(he)?!1:(0,_.c)(ae,he)}u(x,"isCallButtonVisibleForChannel");function F(ae,he){return(0,i.Pb)(ae)?((0,a.bU)(he)||(0,n.F)(he))&&!Ae(he):!0}u(F,"isCallButtonDisabledForChannel");function W(ae,he){const _e=(0,I.OL)(ae,he);return _e&&!F(ae,_e)&&x(ae,_e)}u(W,"canStartCallInChannel");function Y(ae,he,_e){const ee=(0,r.V)(he),de=(0,p.q8)(ae,ee),Ie=(0,d.nv)(ae,_e,{preferNonExistentToNull:!1,fetchIfMissing:!0}),ce=(0,h.v8)(Ie),j=(0,p.OJ)({callsApp:de,memberPhoneNumber:ce,hideVideoApps:!1}),N=j.length,b=P(ae,he);let R=N;return b&&(R+=1),R>1?M.t("{numCallApps} calling options",{numCallApps:R}):R===1?N===0?"":M.t("using {appName}",{appName:j[0].name}):""}u(Y,"getTipSubtitleForStartCall");function S(ae,he,_e){const ee=(0,m.I)(ae,(0,c.e)(he));return _e?M.rt("Huddle with {name}",{name:ee,fallbackHash:"8e987d72e71ed558e674143b7f1cde8c0e13d4aa",fallbackHashNs:"huddles"}):M.rt("Call {name}",{name:ee})}u(S,"getTipForIm");function L(ae,he,_e){const ee=(0,a.d3)(ae,he).map(Ie=>(0,v.sE)(ae,Ie)),de=(0,T.jd)(ee,{noEscape:!0}).join("");return _e?M.rt("Huddle with {listOfNamesWithConjunction}",{listOfNamesWithConjunction:de,fallbackHash:"8e987d72e71ed558e674143b7f1cde8c0e13d4aa",fallbackHashNs:"huddles"}):M.rt("Call {listOfNamesWithConjunction}",{listOfNamesWithConjunction:de})}u(L,"getTipForMpim");function w(ae,he,_e){return(0,o.LI)(he)?S(ae,he,_e):(0,o.yz)(he)?L(ae,he,_e):_e?M.t("Huddle in {channelName}",{channelName:(0,a.SB)(ae,he),fallbackHash:"2e4c8c4a478aa889a4b6fe33316b3d0a6d93301d",fallbackHashNs:"huddles"}):M.t("Start a call")}u(w,"getTipForChannel");function J(ae,he){const _e=(0,y.H7)(ae),ee=(0,l.qR)(_e),de=X(ae),Ie=ee||de,ce=P(ae,he)&&!te(ae);return(0,i.Pb)(ae)?Ie&&(0,n.F)(he)?M.t("Unarchive this channel to start a huddle"):Ie&&(0,a.bU)(he)?M.t("Join this channel to start a huddle"):(de||Ae(he),w(ae,he,ce)):M.t("Go online to start a huddle")}u(J,"getTipForStartCall");function G(ae,he){const _e=getCurrentTeam(ae),ee=isPaidTeamRule(_e),de=isMpimRule(he),Ie=X(ae),ce=ee||Ie;return!isClientOnline(ae)||ce&&isArchived(he)||ce&&isPreview(he)||Ie?!1:!!(!ee&&de||!ee&&isNonImOrMpimChannel(he))}u(G,"isFreeTeamAndInChannelOrMpim");function X(ae){const he=(0,p.wZ)(ae);for(let _e=0;_e<he.length;_e++)if(he[_e].id!==E.rq)return!0;return!1}u(X,"isThirdPartyCallEnabled");function te(ae){return(0,p.wZ)(ae).length>0}u(te,"isAnyCallAppEnabled");function le(ae){const he=M.t("Start a call?",{fallbackHash:"04d5cae8ffd5cbdfd97d6ea2c1afe3e969b3eed7"}),_e=M.t("You\u2019ll be starting a call that all {count} members of this channel can join.",{count:ae,fallbackHash:"225ecb6662087bf4b09285688dc46d8ecb5ed2aa"}),ee=M.t("Start Call",{fallbackHash:"291a0a58dfa6c640a90c1d868d2af190775ea219"});return{title:he,description:_e,confirm:ee,cancel:M.t("Cancel")}}u(le,"getCallConfirmationStrings");function ve(){return!1}u(ve,"isNativeSlackCallEnabled");function Q(){return!0}u(Q,"isSlackCallSlashCommandDisabled");function Ae(ae){return(0,f.ju)(ae)&&!(0,o.LI)(ae)}u(Ae,"shouldEnableForSponsoredConnections")},7561130599:(z,A,e)=>{"use strict";e.d(A,{A:()=>v});var t=e(9706240641),n=e(2825968873),s=e(3245843483),a=e(7299481592),c=e(571104883),o=e(8558782493),r=e(6244014364),l=e(336376314);const _=window.RTCPeerConnection,d=window.MediaStream,i=window.RTCIceCandidate,m=window.navigator,h={height:116,width:168};let v=u(class{getScreenThumbnails(I){let p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;var g=this;return(0,t.coroutine)(function*(){const E=yield(0,s.zxd)();p||y(g.log,E);const f=["screen"];f.push("window"),h.width=(I==null?void 0:I.width)||200,h.height=(I==null?void 0:I.height)||150;let O;try{O=yield(0,s.Yx3)(h,f)}catch(M){g.log.error(`Could not get screen thumbnails: ${M.message}`)}return O?O.map((M,D)=>{var P;const k=E.find(F=>parseInt(M.display_id,10)===F.id);!k&&!(0,c.tR)()&&!(0,c.cX)()&&!(!((P=M.id)===null||P===void 0)&&P.startsWith("window:"))&&g.log.error(`Could not find matching display for screen ${D} with id ${M.display_id}`);const x=k||((0,c.tR)()||(0,c.cX)()?E[D]:void 0);return{mediaSourceId:M.id,thumbnail:M.thumbnail,displayId:x&&x.id,bounds:x&&x.bounds,name:M.name}}):[]})()}getCurrentlyActiveScreenTrack(){return this.screenTrack}startCapturingScreen(I){var p=this;return(0,t.coroutine)(function*(){if((0,a.M)(!p.screenTrack,"Screen track should not already be active"),!I){if(!m.mediaDevices.getDisplayMedia)throw p.log.error("Error: getDisplayMedia unavailable while trying to screen share in browser"),new Error("browser screenshare unavailable");try{const g={audio:!1,video:{frameRate:{max:15}}},E=yield m.mediaDevices.getDisplayMedia(g);return p.screenTrack=E.getVideoTracks()[0],p.log.info(`Start screen sharing with track id: ${p.screenTrack.id} in browser`),p.screenTrack}catch(g){if(g.name!=="NotAllowedError")throw p.log.error(`Error: ${g.name} while trying to screen share in browser`),(0,o.k)(r.EventId.CALLS_GET_USER_MEDIA_ERROR_SCREEN,{error:g.name}),g;return null}}try{const g={audio:!1,video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:I,maxFrameRate:15}}};if(!(0,c.uF)()){const f=yield p.getScreenDetailsByMediaSourceId(I);f&&f.bounds&&(g.video.mandatory.maxWidth=f.bounds.width,g.video.mandatory.maxHeight=f.bounds.height)}const E=yield m.mediaDevices.getUserMedia(g);return p.screenTrack=E.getTracks()[0],p.log.info("Start screen sharing with track id:",p.screenTrack.id,"and mediaSourceId:",I),p.screenTrack}catch(g){throw p.log.error(`Error: ${g.name} for screen ${I}`),(0,o.k)(r.EventId.CALLS_GET_USER_MEDIA_ERROR_SCREEN,{error:g.name}),g}})()}stopCapturingScreen(){if(!this.screenTrack){(0,a.M)("No screenTrack to stop.");return}this.screenTrack.stop();const I=this.screenTrack.id;return delete this.screenTrack,this.log.info("Stop screen sharing track id:",I),I}clearScreenTrack(){delete this.screenTrack}getScreenDetailsByMediaSourceId(I){var p=this;return(0,t.coroutine)(function*(){let g;const E=yield p.getScreenThumbnails();return E&&(g=E.find(f=>f.mediaSourceId===I,E)),g})()}constructor(){this.log=(0,n.tZ)("SCREENS")}},"ScreenManager");function y(T,I){if(!I.length){T.error("No screens available");return}const p=new l.M(["id","width","height","x","y","scaleFactor","rotation"]);I.forEach(g=>{p.add([g.id,g.bounds.width,g.bounds.height,g.bounds.x,g.bounds.y,g.scaleFactor,g.rotation].map(String))}),T.info(`Available screens:
${p.report()}`)}u(y,"logDisplays")},4708000837:(z,A,e)=>{"use strict";e.d(A,{Y:()=>t});function t(n){const s=(n||"").split("-");return s&&(s.length===3||s.length===4)?s[1]:null}u(t,"getCallIdFromExternalId")},8405076696:(z,A,e)=>{"use strict";e.d(A,{n:()=>t});function t(n){let{width:s,height:a,top:c,left:o}=n;return{position:"absolute",width:`${s}px`,height:`${a}px`,top:`${c}px`,left:`${o}px`}}u(t,"cssForRect")},6117529990:(z,A,e)=>{"use strict";e.d(A,{BD:()=>s,OV:()=>n,XY:()=>c,wn:()=>a,zq:()=>o});var t=e(4761125736);function n(r){return(0,t._Z)(r,"calls_chime_sdk_exp")==="enabled"}u(n,"isCallsChimeSdkExpEnabled");const s=u(r=>(0,t._Z)(r,"calls_org_app_settings")==="treatment","isCallsOrgAppsSettingsExperimentEnabled"),a=u(r=>(0,t._Z)(r,"calls_tracing_disabled")==="treatment","isCallsTracingDisabled"),c=u(r=>(0,t._Z)(r,"calls_location_lock")==="treatment","isCallsLocationLockEnabled"),o=u(r=>(0,t._Z)(r,"calls_disable_screenshare_border")==="treatment","isCallsScreenShareBorderDisabled")},2004048777:(z,A,e)=>{"use strict";e.d(A,{$:()=>c,Y:()=>a});var t=e(2615100822),n=e(2825968873),s=e(796111729);function a(o){let{direction:r,type:l,payload:_}=o;const d=(0,t.A)()?"slack":"call",i="INTER-WINDOW-MESSAGE";((0,t.A)()?(0,n.tZ)(i):(0,s.Wo)({label:i})).info(`${r==="send"?"Sending":"Received"} ${l} ${r==="send"?"to":"from"} the ${d} window${_?`, with payload: ${JSON.stringify(_)}`:""}`)}u(a,"logInterWindowMessage");function c(o){function r(l,_,d){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;o(_,d,i),l.sendData({type:_,payload:d})}return u(r,"sendMessage"),r}u(c,"createInterWindowMessageSender")},1371073900:(z,A,e)=>{"use strict";e.d(A,{A:()=>n});var t=e(571104883);function n(){return!(0,t.j9)()&&(0,t.y3)()}u(n,"isDrawSupported")},6267571562:(z,A,e)=>{"use strict";e.d(A,{G:()=>n});var t=e(8403493408);class n{get subscriberCount(){return this.subscribers.length}subscribe(a){this.subscribers.push(a)}unsubscribe(a){(0,t.A)(this.subscribers,a)}publish(a){this.subscribers.forEach(c=>{c(a)})}constructor(){this.subscribers=[]}}u(n,"PubSub")},6155974509:(z,A,e)=>{"use strict";e.d(A,{X:()=>v,a:()=>y});var t=e(571104883),n=e(4387298515),s=e(2825968873),a=e(2615100822),c=e(796111729),o=e(6117529990);const r=2e3,l=6,_=0/265,d=255/265,i=53/265,m=1,h="SCREEN-SHARE",v=u((T,I)=>{!(0,t.j9)()&&(0,t.dY)("4.13.1")&&!(0,o.zq)(I)&&((0,n.$m)(T,r),(0,n.VR)(T),(0,n.D0)(l),(0,n.Mh)(_,d,i,m),(0,n.Ac)(),((0,a.A)()?(0,s.tZ)(h):(0,c.Wo)({label:h})).info("Screenshare border added"))},"showBorderForWindowOrScreenId"),y=u(()=>{!(0,t.j9)()&&(0,t.dY)("4.13.1")&&((0,n.th)(),((0,a.A)()?(0,s.tZ)(h):(0,c.Wo)({label:h})).info("Screenshare border removed"))},"hideScreenShareWindowBorder")},7304871158:(z,A,e)=>{"use strict";e.d(A,{R:()=>a});var t=e(7299481592),n=e(2615100822),s=e(2004048777);const a=(0,s.$)(function(c,o){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;(0,t.M)(!(0,n.A)(),"Expected to send message from the slack window"),(0,s.Y)({direction:"send",type:c,payload:r?o:"REDACTED"})})},336376314:(z,A,e)=>{"use strict";e.d(A,{M:()=>n});var t=e(9118672869);class n{add(a){this.rows.push(a),this.adjustPadding(a)}report(){const a=this.padding.map(o=>"-".repeat(o));return(this.columnNames?[a,this.columnNames,a]:[]).concat(this.rows).reduce((o,r)=>o+r.reduce((l,_,d)=>l+(0,t.A)(_,this.padding[d])+(d!==r.length-1?` ${this.separator} `:`
`),""),"")}adjustPadding(a){this.padding=a.map((c,o)=>Math.max(c.length,this.padding[o]||0))}constructor(a,c="|"){this.columnNames=a,this.separator=c,this.padding=[],this.rows=[],this.columnNames&&this.adjustPadding(this.columnNames)}}u(n,"StringTable")},5954792826:(z,A,e)=>{"use strict";e.d(A,{l:()=>t});function t(n){const s=(n||"").split("-");return s&&(s.length===3||s.length===4)?s[2]:null}u(t,"getUserIdFromExternalId")},92886754:(z,A,e)=>{"use strict";e.d(A,{Np:()=>T,O4:()=>h,Vr:()=>y,WT:()=>_,Wd:()=>m,we:()=>d,yh:()=>i});var t=e(5215813485),n=e(7823691483),s=e(571104883),a=e(3245843483),c=e(4096483543),o=e(735940183),r=e(228617214);const l=new o.Ay("calls_wrong_build");function _(){if(!(0,s.y3)())return!1;const p=(0,a.suT)();return v(p,{major:4,minor:13,patch:0})}u(_,"isWrongGantryHuddlesBuild");function d(){if(!(0,s.y3)())return!1;const p=(0,a.suT)();return p.major<4?p.minor<4?v(p,{major:3,minor:3,patch:7}):v(p,{major:3,minor:4,patch:0,prerelease:"alpha3"}):p.prerelease&&(p.prerelease.startsWith("sonic")||p.prerelease.startsWith("alpha2"))?!1:v(p,{major:4,minor:0,patch:0,prerelease:"alpha1190201"})}u(d,"isWrongGantryCallsBuild");const i=u(()=>{if((0,s.y3)())return!1;if((0,s.gm)()){if(!((0,s.cX)()||(0,s.uF)()))return!0;const g=87;return Number((0,s.JF)().split(".")[0])<g}return!((0,s.F2)()||(0,r.W)())},"isWrongGantryHuddlesBrowser");function m(){return(0,s.y3)()?!1:!(0,s.F2)()}u(m,"isWrongGantryCallsBrowser");function h(){return(0,c.A)()||((0,s.y3)()?!d():!m())}u(h,"useGantryCalls");function v(p,g){const E=(0,n.Z)(p,g),f=E<0,O=E>0;return f?!0:O||!p.prerelease?!1:g.prerelease?p.prerelease<g.prerelease:!0}u(v,"isPrereleaseVersionOlder");function y(p){return I(p,l.t("Unfortunately, this version of Slack is out of date. Update your Slack app for access to calls &mdash; as well as bug fixes and an all-around smoother experience.",{fallbackHash:"15f4227e116c3dce202df6486303491344a6350d",fallbackHashNs:"utility"}))}u(y,"sendEphemeralMessageWithCorrectBuildInfo");function T(p){return I(p,l.t("Unfortunately, Slack calls aren't available in this browser. We recommend downloading the Slack desktop app, or you can switch to Chrome.",{fallbackHash:"c3316caea826cdc00385e8aca03517944038abcc",fallbackHashNs:"utility"}))}u(T,"sendEphemeralMessageWithCorrectBrowserInfo");function I(p,g){return(0,t.A)({temporary:!0,message:{text:g,channel:p}})}u(I,"sendEphemeralMessage")},9910898937:(z,A,e)=>{"use strict";e.d(A,{uM:()=>de,Gf:()=>ee,lQ:()=>Ie});var t=e(6188550760),n=e(9706240641),s=e(4887323608),a=e(8737667238),c=e(6533394955),o=e(2567914105),r=e(4529239752),l=e(8628205589),_=e(3193155968),d=e(9108490430),i=e(4096483543),m=e(7213691587),h=e(109860581),v=e(3034856104),y=e(8172368937),T=e(4510819135),I=e(1031947056),p=e(5223893135);const g=(0,I.Ay)("Determine if fullscreen mode is enabled",(ce,j)=>{const N=j();return(0,p.V)(N)});g.meta={name:"createThunk",key:"createThunkgetIsFullscreenEnabled",description:"Determine if fullscreen mode is enabled"};var E=e(6527965646),f=e(8646192222);const O=(0,I.Ay)("Find view container for a specific window history entry",(ce,j,N)=>{let{id:b}=N;var R;const K=j();return(0,f.iB)(K)?(R=(0,E.G)(K).find($=>$.id===b))===null||R===void 0?void 0:R.container:void 0});O.meta={name:"createThunk",key:"createThunkfindContainerForHistoryEntry",description:"Find view container for a specific window history entry"};var C=e(3875705815),M=e(5661379004),D=e(7606925238),P=e(5925742547),k=e(9012396182);const x=u((ce,j)=>!(!(0,f.mL)(ce)||(0,C.V)(ce)||j[_.jf]!==_.k6.BBM),"shouldPreventBBMHistory"),F=u((ce,j,N)=>{if(!(0,f.iB)(ce)||(0,p.V)(ce))return!1;const b=(0,c.getStateForClientStore)();if((k.getFocusedWorkspace===null||k.getFocusedWorkspace===void 0?void 0:(0,k.getFocusedWorkspace)(b))!==N)return!1;const R=(0,r.jo)(b),K=j[_.jf],B=R[_.jf];if(K!==B)return!1;const $=j[K],Z=R[B];return!!(0,P.A)($,Z)},"shouldPreventDuplicateHistory"),W=(0,I.Ay)("Maybe prevent default handling of history on pop state",(ce,j,N)=>{let{current:b,index:R,teamId:K}=N;const B=j();if(!x(B,b)&&!F(B,b,K))return!1;const $=(0,c.getStateForClientStore)(),Z=(0,r.XG)($),re=R>Z;if(re){if((0,r.yS)($))return!0}else if((0,r.m6)($))return!0;return ce((re?M.r:D.h)()),!0});W.meta={name:"createThunk",key:"createThunkmaybePreventHistoryOnPopState",description:"Maybe prevent default handling of history on pop state"};var Y=e(2554594353);function S(ce){return L.apply(this,arguments)}u(S,"onPopState");function L(){return L=(0,n.coroutine)(function*(ce){const j=ce.state;if(!(j!=null&&j.teamId)||!(j!=null&&j.id))return;const N=(0,c.getClientStoreInstance)();if(!N)return;const b=N.getState,R=N.dispatch;if(!b||!R)return;const K=(0,r.jR)(b()),B=K.findIndex(Oe=>Oe.id===j.id);if(B<0)return;const $=(0,r.XG)(b()),Z=K[$],re=j.state[_.jf];if((0,c.dispatchForTeamId)(j.teamId,W({current:j.state,index:B,teamId:j.teamId})))return;var Ce;const Pe=(Ce=j.state[re])!==null&&Ce!==void 0?Ce:(0,_.DP)(re),fe=(0,v.H)(Z)?Z[_.jf]:void 0,pe=(0,v.H)(Z)&&fe?Z[fe]:void 0,{viewSet:q}=yield(0,c.dispatchForTeamId)(j.teamId,(0,T.F)({context:y.b.HistoryStack,prevViewSet:pe,prevTab:fe,nextViewSet:Pe,nextTab:re,windowId:_.N2}));j.state[re]=q??Pe,R((0,l.cM)({windowId:_.N2,index:B,previousIndex:$})),(0,c.dispatchForTeamId)(j.teamId,(0,d.cQ)(j.state)),(k.getFocusedWorkspace===null||k.getFocusedWorkspace===void 0?void 0:(0,k.getFocusedWorkspace)(b()))!==j.teamId&&R(Y.b===null||Y.b===void 0?void 0:(0,Y.b)({teamId:j.teamId,fromNavigation:!0}));const ge=(0,c.dispatchForTeamId)(j.teamId,g())?(0,c.dispatchForTeamId)(j.teamId,O({id:j.id})):void 0;(0,c.dispatchForTeamId)(j.teamId,(0,m.C)({prevViewSet:pe,prevTab:fe,nextViewSet:Pe,nextTab:re,windowId:_.N2,navigateParams:{destinationContainer:ge},triggerType:h.w.HISTORY_NAVIGATION}))}),L.apply(this,arguments)}u(L,"_onPopState");function w(ce){if(!isSonic())return;const j=ce.state;if(!(j!=null&&j.id))return;const N=getClientStoreInstance();if(!N)return;const b=N.getState,R=N.dispatch;if(!b||!R)return;const B=getHistoryForMainWindow(b()).findIndex(Z=>Z.id===j.id);if(B<0)return;const $=getHistoryIndexForMainWindow(b());R(updateIndexForMainWindow({windowId:MainWindowId,index:B,previousIndex:$}))}u(w,"onIA3PopState");var J=e(7893624209),G=e(8289899277),X=e(472899830),te=e(796111729);function le(ce){return ve.apply(this,arguments)}u(le,"navigateAfterPopState");function ve(){return ve=(0,n.coroutine)(function*(ce){var j;if(!(0,s.A)())return;if(!(ce==null||(j=ce.state)===null||j===void 0)&&j.isIA4){X.p.prevNavigatedTeamOrEnterpriseId=ce.state.teamId,S(ce);return}const N=(0,J.oI)(),b=(0,G.f)(),R=(0,t.A_)(),K=(0,c.getStoreInstanceByTeamId)(X.p.prevNavigatedTeamOrEnterpriseId),B=K?(0,o.oY)(K.getState()):!1,$=(0,a.A)().slice(0,8);if((0,te.Wo)().info("ROUTES",`[${$}]`,`[${b.routeName}]`,"Attempting to popstate navigate to new route",b.params),(yield(0,t.$C)({prevTeamOrEnterpriseId:X.p.prevNavigatedTeamOrEnterpriseId,nextTeamOrEnterpriseId:N,prevRouteInfo:X.p.popstatePrevRouteInfo,routeName:b.routeName,params:b.params,reason:t.GB,uuid:$}))===!1||B===!0){(0,te.Wo)().info("ROUTES",`[${$}]`,`[${b.routeName}]`,"willNavigateListener caused early exit"),window.history.forward();return}if((0,t.OX)({prevTeamOrEnterpriseId:X.p.prevNavigatedTeamOrEnterpriseId,nextTeamOrEnterpriseId:N,prevRouteInfo:X.p.popstatePrevRouteInfo,routeName:b.routeName,params:b.params,reason:t.GB,uuid:$}),(0,te.Wo)().info("ROUTES",`[${$}]`,`[${b.routeName}]`,"Navigated to new route"),X.p.prevNavigatedTeamOrEnterpriseId=N,R&&typeof R.onEnter=="function"){const re=(0,c.getStoreInstanceByTeamId)(N);R.onEnter.call(null,re.getState,null,window.location.pathname)}}),ve.apply(this,arguments)}u(ve,"_navigateAfterPopState");const Q=u(()=>{window.addEventListener("popstate",le)},"addPopStateListener");var Ae=e(9733150292),ae=e(7515251865),he=e(210422728),_e=e(3080748521);Q();function ee(){let{store:ce,shouldSetFocus:j}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const N=(0,G.f)(window.location.pathname,{throwOnNoRoute:!1});if(N&&j&&N.routeName!==ae.o)return N;if(!ce)return null;const b=(0,_e.D8)(ce.getState()),R=(0,_e.MC)(ce.getState()),K={routeName:b,params:R};return(0,t.EB)(K)?K:null}u(ee,"determineCurrentView");function de(){return(0,t.Dd)(ce=>{let{nextTeamId:j,routeName:N,params:b}=ce;(0,c.getStoreInstanceByTeamId)(j)&&(0,c.dispatchForTeamId)(j,(0,he.w)({routeName:N,params:b}))})}u(de,"configureUpdateCurrentRoute");function Ie(ce){const j=(0,Ae._z)(ce,"lastRoute");return(0,t.EB)(j)?j:null}u(Ie,"getLastRouteFromLocalConfig")},210422728:(z,A,e)=>{"use strict";e.d(A,{T:()=>s,w:()=>n});var t=e(2140362605);const n=(0,t.Ay)("Navigate to a route");n.meta={name:"createAction",key:"createActionupdateCurrentRoute",description:"Navigate to a route"};const s=(0,t.Ay)("Set a value that represents whether the user navigated during a warm boot");s.meta={name:"createAction",key:"createActionsetUserNavigatedDuringWarmBoot",description:"Set a value that represents whether the user navigated during a warm boot"}},311893736:(z,A,e)=>{"use strict";e.d(A,{A:()=>a});var t=e(6533394955),n=e(3677514771),s=e(9012396182);function a(c,o){const r=(0,t.getClientStoreInstance)();if(r){const _=r.getState(),d=(0,s.getWorkspaceMetaBySubdomain)(_,o);if(d)return d.id}const l=(0,n.lL)(c,o);if(l)return l.id}u(a,"findWorkspaceIdForSubdomain")},8204430196:(z,A,e)=>{"use strict";e.d(A,{A:()=>l});var t=e(3134334389),n=e(9113979368),s=e(9418991940),a=e(1030162945),c=e(2374999399),o=e(6818330210);function r(_){let{memberId:d,className:i,emoji:m,emojiSize:h,showTooltips:v,stopAnimations:y}=_;const T=(0,s.F3)(g=>(0,c.A)(g,d));if(!d||!m)return null;const{name:I=m,url:p=void 0}=T?(0,o.H)(m,(0,n.A)(T)?void 0:T):{};return t.createElement(a.Ay,{className:i,emojiSize:h||a.lw.SMALL,iconInTextMode:!0,isEmojiInlineWithText:!0,showTooltip:!!v,stopAnimations:!!y,text:I,url:p})}u(r,"CustomStatusEmoji"),r.displayName="CustomStatusEmoji";const l=t.memo(r)},6710730141:(z,A,e)=>{"use strict";e.d(A,{A:()=>d});var t=e(3134334389),n=e(735940183),s=e(2406011273),a=e(9391594207),c=e(1345620242),o=e(2047021170);const r=new n.Ay("current_status");function l(i){let{className:m,expiration:h,time24:v}=i;if(!h)return null;const y=h*1e3,T=r.t("Until {expirationDate}",{expirationDate:(0,s.A)(y,"{status_expiration}",{do24hrTime:v,shouldCapitalize:!1})});return t.createElement("span",{className:m,"data-qa-status-expiration":h},T)}u(l,"CustomStatusExpiration"),l.displayName="CustomStatusExpiration";function _(i,m){let{memberId:h}=m;return{expiration:(0,c.A)(i,h||"")||0,time24:!!(0,o.ty)(i,"time24")}}u(_,"mapStateToProps");const d=(0,a.N)(_)(l)},5530660703:(z,A,e)=>{"use strict";e.d(A,{A:()=>r});var t=e(3134334389),n=e(9418991940),s=e(1030162945),a=e(2374999399),c=e(7969928607);function o(l){let{memberId:_,className:d,emojiSize:i,showTooltips:m,stopAnimations:h,text:v}=l;const y=(0,n.F3)(T=>_?(0,a.A)(T,_):void 0);return v?t.createElement("span",{className:d,"data-qa":"custom_status_text"},t.createElement(c.A,{text:v,inputIsEscaped:!0,emojiSize:i||s.lw.MEDIUM,showTooltips:!!m,stopAnimations:!!h,emojiDisplayInfo:y})):null}u(o,"CustomStatusText"),o.displayName="CustomStatusText";const r=t.memo(o)},7278430876:(z,A,e)=>{"use strict";e.d(A,{A:()=>g});var t=e(3134334389),n=e(9418991940),s=e(5255740490),a=e(193084903),c=e(2312625946),o=e(1030162945),r=e(8204430196),l=e(2072540560),_=e(8276911661),d=e(8170643398),i=e(5751973043),m=e(5530660703);function h(){return h=Object.assign||function(E){for(var f=1;f<arguments.length;f++){var O=arguments[f];for(var C in O)Object.prototype.hasOwnProperty.call(O,C)&&(E[C]=O[C])}return E},h.apply(this,arguments)}u(h,"_extends");const v={noLinking:!1},y=u(E=>{let{stopAnimations:f=!1,noText:O=!1,className:C,memberId:M="",noLinking:D,showEmojiTooltip:P=!1,insertTextSpacing:k=!1,displayInMemberProfile:x=!1,emoji:F}=E;const W=(0,n.d4)(L=>(0,l.A)(L,M)),Y=(0,n.d4)(L=>(0,d.fy)((0,_.nv)(L,M)));let S=i.t0;return D===!1&&(S=v),x?t.createElement("span",{className:C},t.createElement(r.A,{memberId:M,emoji:F,stopAnimations:f,showTooltips:P,emojiSize:o.lw.MEDIUM,className:"c-custom_status__emoji_in_member_profile"}),W&&t.createElement(m.A,h({memberId:M,className:(0,s.A)("margin_left_50","padding_right_50",{margin_right_100:Y}),emojiSize:o.lw.SMALL,stopAnimations:f,text:O?"":W},S))):t.createElement("span",{className:C},t.createElement(r.A,{memberId:M,showTooltips:P,emojiSize:o.lw.SMALL,emoji:F,stopAnimations:f}),W&&t.createElement(m.A,h({memberId:M,className:k?"margin_left_50":"margin_left_25",emojiSize:o.lw.SMALL,stopAnimations:f,text:O?"":W},S)))},"CustomStatusTooltipContent");y.displayName="CustomStatusTooltipContent";const T=t.memo(y);var I=e(6710730141);const p=u(E=>{let{animated:f=!1,tooltip:O=!0,tipPosition:C,noText:M=!1,className:D,memberId:P="",noLinking:k,showEmojiTooltip:x=!1,insertTextSpacing:F=!1,displayInMemberProfile:W=!1}=E;const Y=(0,n.d4)(L=>(0,a.A)(L,P)),S=(0,t.useCallback)(()=>t.createElement(t.Fragment,null,t.createElement(T,{className:"c-custom_status__tooltip",noText:M,memberId:P,noLinking:k,showEmojiTooltip:x,insertTextSpacing:F,displayInMemberProfile:W,emoji:Y}),t.createElement(I.A,{className:"c-custom_status__expiration",memberId:P})),[P,M,k,x,F,W,Y]);return Y?O?t.createElement(c.Ay,{tip:S,position:C,zIndex:"above_fs","data-qa":"custom_status_tooltip"},t.createElement("span",{className:(0,s.A)("c-custom_status",D),"data-qa":"custom_status"},t.createElement(r.A,{memberId:P,showTooltips:!1,emojiSize:o.lw.SMALL,emoji:Y,stopAnimations:!f}))):t.createElement(T,{className:(0,s.A)(D,"c-custom_status","c-custom_status--inline",{display_flex:W}),stopAnimations:!f,noText:M,memberId:P,noLinking:k,showEmojiTooltip:x,insertTextSpacing:F,displayInMemberProfile:W,emoji:Y}):null},"CustomStatus");p.displayName="CustomStatus";const g=t.memo(p)},2486585453:(z,A,e)=>{"use strict";e.d(A,{A:()=>s,j:()=>n.A});var t=e(7278430876),n=e(6710730141);const s=t.A},9580887194:(z,A,e)=>{"use strict";e.d(A,{E:()=>c,a:()=>o});var t=e(9936232041),n=e(9609912577),s=e(1031947056),a=e(6440800009);const c=(0,s.Ay)("Opens the AddCustomEmojiModal for importing a custom emoji",(r,l,_)=>{let{emojiName:d,emojiUrl:i}=_;var m;r((0,n.A)({emojiNameSuggestion:d&&((m=(0,t.A)(d))===null||m===void 0?void 0:m.name),emojiUrl:i}))});c.meta={name:"createThunk",key:"createThunkopenImportExternalEmojiModal",description:"Opens the AddCustomEmojiModal for importing a custom emoji"};const o=(0,s.Ay)("Opens the AddCustomEmojiModal if an emoji can be imported",(r,l,_)=>{const d=l(),{event:i,emojiName:m,emojiUrl:h}=_;h&&(0,a.LU)(d,h,m)&&(i==null||i.preventDefault(),i==null||i.stopPropagation(),r(c(_)))});o.meta={name:"createThunk",key:"createThunkmaybeOpenImportExternalEmojiModal",description:"Opens the AddCustomEmojiModal if an emoji can be imported"}},8021873188:(z,A,e)=>{"use strict";e.d(A,{K:()=>o});var t=e(3134334389),n=e(735940183),s=e(8683010724),a=e(6440800009);const c=new n.Ay("import-external-emoji");function o(r){let{emojiUrl:l,emojiName:_}=r;return(0,a.tJ)(l,_)?t.createElement("div",{className:"margin_top_50"},t.createElement(s.A,{name:"right-click",inline:!0,size:"18"}),t.createElement("span",{className:"margin_left_25"},c.t("Right click to add to your organization"))):null}u(o,"ImportExternalEmojiTooltipInfo"),o.displayName="ImportExternalEmojiTooltipInfo"},6440800009:(z,A,e)=>{"use strict";e.d(A,{$N:()=>F,LU:()=>M,tJ:()=>D});var t=e(8701485242),n=e(4921059838),s=e(9936232041),a=e(5751973043),c=e(317660850),o=e(6790819894),r=e(3677514771),l=e(2757639362),_=e(6839188756),d=e(5795074931),i=e(6457401668),m=e(9418991940),h=e(2384831516),v=e(7606781622),y=e(5757070316),T=e(9608713960),I=e(6783791506),p=e(4813703725);const g=u(W=>{var Y;return Array.isArray((Y=W)===null||Y===void 0?void 0:Y.elements)},"hasElements"),E=u((W,Y)=>(0,t.Ay)(W.emojiName,Y.emojiName),"emojiNameSort"),f=new Set(["black_square","bowtie","cubimal_chick","dusty_stick","glitch_crab","piggy","pride","shipit","slack_call","slack","squirrel","thumbsup_all","white_square","simple_smile"]);function O(W){var Y;const S=(Y=(0,s.A)(W))===null||Y===void 0?void 0:Y.name;return!!S&&f.has(S)}u(O,"isBuiltInEmoji");function C(W,Y,S){return decodeURIComponent(Y).includes((0,l.w)())?!1:!(S&&((0,n.A)(W,S)||O(S)))}u(C,"isCustomEmoji");const M=(0,h.Mz)((W,Y,S)=>{if(!(Y&&(0,d.TZ)(W)&&C(W,Y,S)&&(0,c.D)(W)))return!1;const w=(0,r.Yc)(W);var J;const G=(J=w==null?void 0:w.id)!==null&&J!==void 0?J:"",X=(0,_.Ic)(w);return!!X&&Y.indexOf((0,_.k7)(G,X))===-1&&Y.indexOf(G.slice(1))===-1});M.meta={name:"createSelector",key:"createSelectorcanUserImportEmoji",description:(W,Y,S)=>{if(!(Y&&(0,d.TZ)(W)&&C(W,Y,S)&&(0,c.D)(W)))return!1;const w=(0,r.Yc)(W);var J;const G=(J=w==null?void 0:w.id)!==null&&J!==void 0?J:"",X=(0,_.Ic)(w);return!!X&&Y.indexOf((0,_.k7)(G,X))===-1&&Y.indexOf(G.slice(1))===-1}};function D(W,Y){return(0,m.d4)(S=>M(S,W,Y))}u(D,"useCanImportThisEmoji");function P(W,Y){for(const S of Y||[])(0,I.E)(S)?S.display_url&&W.set(S.display_url,{emojiName:S.name,emojiUrl:S.display_url}):g(S)&&P(W,S.elements)}u(P,"collectMessageEmojis");function k(W,Y){for(const{name:S,url:L}of Y||[])L&&W.set(L,{emojiName:S,emojiUrl:L})}u(k,"collectMessageReactjis");const x=(0,o.F)((W,Y)=>Y,(W,Y)=>(0,T.bk)(W,(0,y.J)(Y)),(W,Y)=>{const S=new Map;return k(S,Y),P(S,W.blocks),[...S.values()].sort(E)}),F=(0,p.eI)((W,Y)=>{let{channelId:S,ts:L}=Y;if(!(0,c.D)(W)||!(0,d.TZ)(W))return a.Ml;const w=(0,v.Ld)(W,S,L);return!w||(0,i.aK)(w)?a.Ml:x(W,w).filter(J=>{let{emojiName:G,emojiUrl:X}=J;return M(W,X,G)})})},5892132962:(z,A,e)=>{"use strict";e.d(A,{Ep:()=>i,sc:()=>m});var t=e(9548888903),n=e(2233365467),s=e(1407713935);const a={name:"sf-opportunity",variation:"filled"},c={name:"sf-account",variation:"filled"},o={name:"sf-case",variation:"filled"},r={name:"sf-lead",variation:"filled"},l={name:"sf-contact",variation:"filled"},_={name:"sf-cloud",variation:"filled"},d={name:"headphones",variation:"filled"};function i(h){switch(h){case t.hM.Opportunity:return a;case t.hM.Account:return c;case t.hM.Lead:return r;case t.hM.Case:return o;case t.hM.Contact:return l;case t.hM.Org:default:return _}}u(i,"getSalesforceObjectTypeIconProps");function m(h){if(!(0,s.rI)(h))return null;const v=(0,n.LJ)(h);switch((0,n.fI)(v==null?void 0:v.record_id)){case t.B4.Huddle:return d;default:return null}}u(m,"getRecordChannelOverrideIconProps")},7244076749:(z,A,e)=>{"use strict";e.d(A,{b:()=>n});var t=e(4724591729);function n(){return(0,t.b3)()}u(n,"isSlackKitPlaygroundEnabled")},5868036555:(z,A,e)=>{"use strict";e.d(A,{CC:()=>s,Fv:()=>a,NY:()=>o,P:()=>r,PG:()=>d,Qi:()=>i,Ss:()=>c,We:()=>m,n0:()=>l,zr:()=>_});var t=e(9132066222),n=e(4761125736);function s(h){return(0,n._Z)(h,"solutions")==="on"}u(s,"isSolutionsEnabled");function a(h){return(0,n._Z)(h,"workflow_composer")==="on"}u(a,"isWorkflowComposerEnabled");function c(h){return(0,n._Z)(h,"workflow_composer_multi")==="on"}u(c,"isWorkflowComposerMultiEnabled");function o(h){return(0,n._Z)(h,"workflow_file_dialog")==="on"||s(h)}u(o,"isWorfklowFileDialogEnabled");function r(h){return(0,n._Z)(h,"solutions_add_to_channel")==="on"&&s(h)&&(0,t.U6)(h)}u(r,"isSolutionsAddToChannelEnabled");function l(h){return(s(h)||(0,t.U6)(h))&&(0,n._Z)(h,"solutions_tidy_up")==="on"}u(l,"isSolutionsTidyUpEnabled");function _(h){return s(h)&&(0,n._Z)(h,"custom_solution_creation")==="on"}u(_,"isCustomSolutionCreationEnabled");function d(h){return(0,n._Z)(h,"solutions_for_sfdc")==="on"}u(d,"isSolutionsForSfdcEnabled");function i(h){return(0,n._Z)(h,"solutions_new_setup_flow")==="on"}u(i,"isSolutionNewSetupFlowEnabled");const m=u(h=>(0,n._Z)(h,"ask_slack_view")==="on","isAskSlackViewEnabled")},2664997725:(z,A,e)=>{"use strict";e.d(A,{x:()=>l});var t=e(6839188756),n=e(3677514771),s=e(9132066222),a=e(1552255081),c=e(6642124196),o=e(1737183214),r=e(5868036555);const l=u(_=>{const d=(0,n.H7)(_);return!((0,t.tc)(d)||!(0,r.CC)(_)||!(0,s.U6)(_)||!(0,a.F)(_)||!(0,c.Il)(_)||!(0,o.I)(_))},"canUserProvisionSolutions")},3121972076:(z,A,e)=>{"use strict";e.d(A,{g:()=>o});var t=e(3134334389),n=e(9132066222),s=e(5751973043),a=e(9101533895),c=e(9418991940);function o(r){const l=(0,c.d4)(d=>(0,a.OL)(d,r,!1)),_=(0,c.d4)(d=>{var i;return(0,n.xA)(d,l)?l==null||(i=l.properties)===null||i===void 0?void 0:i.tabs:s.Ml});return(0,t.useMemo)(()=>{var d;return l?[...((d=_==null?void 0:_.filter(m=>!m.is_disabled))===null||d===void 0?void 0:d.map(n._f))||[]]:[]},[_,l])}u(o,"useDynamicChannelTabs")},667891291:(z,A,e)=>{"use strict";e.d(A,{Hv:()=>_,c5:()=>l});var t=e(3134334389),n=e(7245481391),s=e(6217320234),a=e(9418991940),c=e(9374064916);const o=[n.fY.Channel,n.fY.RecordCreate,n.fY.RecordOverview,n.fY.RecordSummary,n.fY.RecordOpportunities,n.fY.ChannelCanvas,n.fY.RecordHistory];function r(i){const m=o.indexOf(i);return m===-1?Number.MAX_SAFE_INTEGER:m}u(r,"getTabOrderIndex");function l(i){return(0,s.A)(i,m=>r(m.id))}u(l,"getSortedStaticTabs");function _(i){const m=d(i);return(0,a.d4)(m)}u(_,"useStaticChannelTabs");function d(i){return(0,t.useMemo)(()=>(0,c.fZ)(i),[i])}u(d,"useMakeGetStaticTabsSelector")},5253816611:(z,A,e)=>{"use strict";e.d(A,{Y:()=>_});var t=e(3385422400),n=e(3398586081),s=e(362134992),a=e(735940183),c=e(7245481391),o=e(9548888903),r=e(1190344069);const l=new a.Ay("tabbed-channel"),_=(0,n.A)(d=>(0,t.Mz)([i=>(0,r.hm)(i),i=>(0,r.BU)(i),i=>(0,r.xw)(i),i=>(0,r.VJ)(i),i=>(0,r.dw)(i)],(i,m,h,v,y)=>!d||!i?[]:(0,s.A)([{id:c.fY.RecordOverview,type:c.Xy.RecordOverview,label:l.t("Overview")},(m||v)&&{id:c.fY.RecordSummary,type:c.Xy.RecordSummary,label:l.t("Summary")},d===o.hM.Account&&!y&&{id:c.fY.RecordOpportunities,type:c.Xy.RecordList,label:l.t("Open Opportunities",{fallbackHash:"51b7a8a4c68a8eaa403c840017fe5998f53be1da"})},h&&{id:c.fY.RecordHistory,type:c.Xy.RecordHistory,label:l.t("History")}])))},9374064916:(z,A,e)=>{"use strict";e.d(A,{fZ:()=>m});var t=e(735940183),n=e(3398586081),s=e(6217320234),a=e(3385422400),c=e(7245481391),o=e(9101533895),r=e(5253816611),l=e(2233365467),_=e(9132066222);const d=new t.Ay("tabbed-channel"),i=u(function(){let y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const I=new Set(T==null?void 0:T.map(E=>E.type)),g=[...[{id:c.fY.Channel,type:c.Xy.Channel,label:d.t("Messages")},{id:c.fY.ChannelCanvas,type:c.Xy.ChannelCanvas,label:d.t("Canvas")},{id:c.fY.Workflows,type:c.Xy.Workflows,isDisabled:!0,label:d.t("Workflows")},{id:c.fY.Bookmarks,type:c.Xy.Bookmarks,isDisabled:!0,label:d.t("Bookmarks",{fallbackHash:"ca3cddd25bd8f6bc4ce35a262e2e1398541ecf3d",fallbackHashNs:"bookmarks-bar"})},{id:c.fY.Files,type:c.Xy.Files,isDisabled:!0,label:d.t("Files")},{id:c.fY.Pins,type:c.Xy.Pins,isDisabled:!0,label:d.t("Pins")}],...y].filter(E=>!I.has(E.type));return h(g)},"getComputedStaticTabs"),m=(0,n.A)(y=>(0,a.Mz)([T=>{const I=(0,o.OL)(T,y);return(0,r.Y)((0,l.dM)(I))(T)},T=>{var I,p;return(I=(0,o.OL)(T,y))===null||I===void 0||(p=I.properties)===null||p===void 0?void 0:p.tabs}],i));function h(y){return(0,s.A)(y,T=>v(T.id))}u(h,"getSortedStaticTabs");function v(y){const T=_.s3.indexOf(y);return T===-1?Number.MAX_SAFE_INTEGER:T}u(v,"getTabOrderIndex")},8032081845:(z,A,e)=>{"use strict";e.d(A,{d:()=>C,H:()=>M});var t=e(9706240641),n=e(3134334389),s=e(7937864072),a=e(8300007136),c=e(9418991940),o=e(9132066222),r=e(7245481391),l=e(1783582283),_=e(667891291),d=e(3121972076),i=e(4427921758),m=e(4761125736),h=e(9744286524),v=e(4849735859),y=e(2580646391),T=e(3172414072),I=e(1031947056),p=e(796111729),g=e(7056498591);const E=(0,I.Ay)("Adds a new tab to a channel",function(){var D=(0,t.coroutine)(function*(P,k,x){let{channelId:F,tabId:W,data:Y,label:S,reason:L="updateTab"}=x,w={ok:!1,tabs:[]};try{w=yield P((0,g.k)({id:W,...(S||S==="")&&{label:S},...Y&&{data:Y},channelId:F,reason:L}))}catch(J){(0,p.Ay)({label:"channel_tabs"}).error("error updating tab",J)}return w});return function(P,k,x){return D.apply(this,arguments)}}());E.meta={name:"createThunk",key:"createThunkupdateTab",description:"Adds a new tab to a channel"};var f=e(1190344069),O=e(5115870218);const C=(0,n.createContext)({});function M(D){let{channelId:P,children:k,tabParams:x,currentTabId:F=r.Xy.Channel}=D;const W=(0,c.d4)(Ie=>(0,m._Z)(Ie,"unified_canvas_tabs_prototype")==="on"),Y=(0,c.d4)(o.Hy),S=(0,c.d4)(f.dw),L=(0,a.wA)(),w=(0,s.A)(),J=(0,_.Hv)(P),G=(0,d.g)(P),{channelCanvasFileId:X}=(0,h.A)({channelId:P}),[te,le]=(0,n.useState)(!1),ve=(0,n.useCallback)(()=>{le(!0),L((0,v.A)({onCreate:Ie=>{let{fileId:ce}=Ie;L((0,T.P)({channelId:P,type:"canvas",fileId:ce})).then(j=>{le(!1);const N=j.tabs,b=N==null?void 0:N.find(R=>{let{data:K}=R;return K&&K.file_id===ce});b&&L((0,l.i)({channelId:P,id:b.id,reason:"add-channel-tab"}))})},source:y.P.CREATE_CHANNEL_SPACE}))},[P,L]),Q=(0,n.useMemo)(()=>{const Ie=(0,O.L)({tabs:[...J,...G],experimentChannelTabsV5BookmarkFoldersGroupOn:Y,experimentLobRelatedListsGroupOn:S});if(W&&!X&&Ie.find(ce=>{let{type:j}=ce;return j===r.Xy.ChannelCanvas})){const ce=Ie.findIndex(j=>{let{type:N}=j;return N===r.Xy.ChannelCanvas});Ie.find(j=>{let{type:N}=j;return N===r.Xy.Canvas})?Ie.splice(ce,1):Ie.splice(ce,1,{id:te?r.fY.CreatingCanvas:r.fY.CreateCanvas,type:r.Xy.CreateCanvas,label:"Canvas",onSelected:ve})}return Ie},[J,G,Y,S,W,X,te,ve]),[Ae,ae]=(0,n.useState)(Q);(0,n.useEffect)(()=>{ae(Q)},[Q]);const he=(0,o.Fi)(Ae,F)||(0,o.Fi)(Ae,r.fY.Channel),_e=(0,n.useCallback)(function(){var Ie=(0,t.coroutine)(function*(ce){let{sourceIndex:j,destinationIndex:N}=ce;const b=[...Ae],R=[...Ae],[K]=b.splice(j,1);b.splice(N,0,K);const B=b[N-1];ae(b),(yield L((0,l.i)({channelId:P,id:K.id,...!(0,o.PN)(B)&&{after:B.id},reason:"updateTabOrder"}))).ok||ae(R)});return function(ce){return Ie.apply(this,arguments)}}(),[P,L,Ae]),ee=(0,n.useCallback)(function(){var Ie=(0,t.coroutine)(function*(ce){const j=[...Ae],N=[...Ae],b=j.findIndex(K=>K.id===F);if(b<0)return;j[b].label=ce,ae(j),(yield L(E({channelId:P,tabId:F,label:ce,reason:"updateTabLabel"}))).ok||ae(N)});return function(ce){return Ie.apply(this,arguments)}}(),[P,F,L,Ae]),de=(0,n.useMemo)(()=>({tabParams:x,tabSchema:Ae,channelId:P,currentTab:he,updateTabOrder:_e,updateTabLabel:ee}),[Ae,x,P,he,_e,ee]);return he?n.createElement(C.Provider,{value:de},n.createElement(i.j.Provider,{value:de},k)):(w.error(new Error("No current channel tab selected.")),null)}u(M,"TabbedChannelProvider"),M.displayName="TabbedChannelProvider"},4427921758:(z,A,e)=>{"use strict";e.d(A,{j:()=>n});var t=e(6152845331);const n=(0,t.Ay)("Tabbed channel",{})},3172414072:(z,A,e)=>{"use strict";e.d(A,{P:()=>c});var t=e(8786006583),n=e(1031947056),s=e(3639008527),a=e(2799479478);const c=(0,n.Ay)("Adds a tab to a channel and navigates to that tab",(o,r,l)=>{let{channelId:_,type:d,label:i,fileId:m,accessLevel:h,data:v,reason:y="add-channel-tab"}=l;const T=m||h||v?{channelId:_,type:d,label:i,data:{fileId:m,accessLevel:h,...v},reason:y}:{channelId:_,label:i,type:d,reason:y};return o((0,s.Z)(T)).then(I=>{const p=I.tabs;let g=(0,t.A)(p);return m?g=p==null?void 0:p.find(E=>{let{data:f}=E;return(f==null?void 0:f.file_id)===m}):v!=null&&v.recordRelatedListId&&(g=p==null?void 0:p.find(E=>{let{data:f}=E;return(f==null?void 0:f.record_related_list_id)===v.recordRelatedListId})),g&&o((0,a.D)({tabId:g.id,tab:g,channelId:_})),I})});c.meta={name:"createThunk",key:"createThunkaddTabToChannelAndNavigate",description:"Adds a tab to a channel and navigates to that tab"}},2799479478:(z,A,e)=>{"use strict";e.d(A,{D:()=>v});var t=e(1031947056),n=e(9132066222),s=e(5267010247),a=e(8822892075),c=e(6078549397),o=e(9101533895),r=e(5964896486),l=e(4033441523),_=e(82287009),d=e(7245481391),i=e(2522627261),m=e(36177209),h=e(8980478045);const v=(0,t.Ay)("Navigate to a channel tab",(y,T,I)=>{let{tabId:p,tab:g,channelId:E,docSource:f,sectionIdsToHighlightOverride:O}=I;const C=T(),M=g||(0,n.kt)(C,E,p),D=(0,o.OL)(C,E,!1);if(M!=null&&M.data){const P="fileId"in M.data&&M.data.fileId||"file_id"in M.data&&M.data.file_id;if(P){if(M.type===d.Xy.Canvas){const k={fileId:P,source:f??l.f.CHANNEL_TAB,isChannelCanvas:!1,channelId:E};return y((0,s.o)((0,a.sL)((0,a.mo)({id:(0,c.Lo)({id:P}),clogParams:k}),E,p)))}if(M.type===d.Xy.List)return y((0,i.w)({listId:P,source:m.B.CHANNEL_TAB,channelId:E})),y((0,s.o)((0,a.sL)((0,a.st)({listId:P}),E,p)))}}if((M==null?void 0:M.type)===d.Xy.ChannelCanvas||p===d.fY.ChannelCanvas){const{fileId:P}=(0,r.H)(D),k=(0,h.Pf)(T(),E);if(P||k){const x={fileId:P||k||"",source:f??l.f.CHANNEL_TAB,isChannelCanvas:!1,channelId:E};return y((0,s.o)((0,a.sL)((0,a.NB)({entityId:(0,c.Lo)({id:P||k}),channelId:E,clogParams:x,sectionIdsToHighlightOverride:O}),E,p)))}return y((0,_.C$)({channelId:E}))}return y((0,s.o)((0,a.id)(E,{tabId:p,tabParams:M==null?void 0:M.data})))});v.meta={name:"createThunk",key:"createThunknavigateToChannelTab",description:"Navigate to a channel tab"}},5115870218:(z,A,e)=>{"use strict";e.d(A,{L:()=>n});var t=e(7245481391);const n=u(s=>{let{tabs:a,experimentChannelTabsV5BookmarkFoldersGroupOn:c=!1,experimentLobRelatedListsGroupOn:o=!1,includeDisabled:r=!1}=s;return a.filter(l=>{let{type:_,isDisabled:d=!1}=l;return!(d&&!r||_===t.Xy.Pins||!c&&_===t.Xy.Folder||!o&&_===t.Xy.RecordRelatedList)})},"filterTabs")},7156540029:(z,A,e)=>{"use strict";e.d(A,{K8:()=>s,Q1:()=>t});const t=20,n={FETCH:"activity_fetch",VIEW_LOAD:"activity_view_load",VIEW_UPDATED:"activity_view_updated"},s={PREF:"activity_view",PAGE:"page",FLEXPANE:"flexpane"}},9509635375:(z,A,e)=>{"use strict";e.d(A,{A:()=>d});var t=e(9418991940),n=e(603616571),s=e(735940183),a=e(5255740490),c=e(3134334389),o=e(1206744593);function r(){return r=Object.assign||function(i){for(var m=1;m<arguments.length;m++){var h=arguments[m];for(var v in h)Object.prototype.hasOwnProperty.call(h,v)&&(i[v]=h[v])}return i},r.apply(this,arguments)}u(r,"_extends");const l=new s.Ay("members");function _(i){let{className:m,inverse:h=!1,isWorkflow:v=!1,isLegacyWorkflow:y=!1,...T}=i;const I=(0,t.d4)(n.TX),p=(0,t.d4)(o.x$);let g=l.t("WORKFLOW",{fallbackHash:"aa16061e7815ca19a57c9db8f84c9601b739f570"});y&&p&&(g=l.t("LEGACY WORKFLOW",{fallbackHash:"aa16061e7815ca19a57c9db8f84c9601b739f570"})),I&&v?g=l.t("BETA"):v||(g=l.t("APP"));const E=(0,a.A)(m,"c-app_badge",{"c-app_badge--inverse":h});return c.createElement("span",r({},T,{className:E,"data-stringify-suffix":" "}),g)}u(_,"AppBadge"),_.displayName="AppBadge";const d=(0,c.memo)(_)},7999544567:(z,A,e)=>{"use strict";e.d(A,{A:()=>n});var t=e(297247517);function n(s){if((0,t.P)(s)){const a=s&&s.text&&s.text.trim();if(a)return a.length}return 0}u(n,"__WEBPACK_DEFAULT_EXPORT__")},5577180258:(z,A,e)=>{"use strict";e.d(A,{A:()=>d});var t=e(45851552),n=e(5404505308),s=e(6783791506),a=e(297247517),c=e(8389327410),o=e(5305906809),r=e(7999544567);const{_EMOJI_GROUP:l}=c.Lv;function _(i,m,h,v,y,T,I){const p=i.slice(T,I),g=T+(0,t.A)(p,s.E),E=T+(0,n.A)(p,s.E)+1;i.splice(g,E-g,{type:l,name:m,size:h,displayAlias:v,skinTone:y,elements:i.slice(g,E)})}u(_,"insertEmojiGroup");function d(i){let m,h,v,y,T,I=i.length-1;for(;I>=-1;){const g=i[I];if(v=v??I,h=h??0,(0,s.E)(g))g.name===m&&g.displayAlias===y&&g.skinTone===T?h+=1:(h>=o.uz&&_(i,m,h,y,T,I+1,v+1),m=g.name,y=g.displayAlias,T=g.skinTone,v=I,h=1);else if(!(0,a.P)(g)||(0,r.A)(g)!==0){var p;h>=o.uz&&_(i,m,h,y,T,I+1,v+1),m=void 0,y=void 0,T=void 0,v=void 0,h=void 0,!((p=g)===null||p===void 0)&&p.elements&&d(g.elements)}I-=1}return i}u(d,"groupEmojis")},9744286524:(z,A,e)=>{"use strict";e.d(A,{A:()=>i});var t=e(3134334389),n=e(8300007136),s=e(1668417071),a=e(8980478045),c=e(9418991940),o=e(6403319589),r=e(82287009),l=e(9671982974),_=e(2054605226),d=e(7946439528);function i(m){let{channelId:h}=m;const v=(0,n.wA)(),{spaceFileId:y,spaceIsEmpty:T}=(0,l.A)({channelId:h}),I=(0,c.d4)(D=>h?(0,a.Pf)(D,h):void 0),p=I??y,g=(0,r.$s)(p),E=(0,o.A)(g,g==null?void 0:g.isEmpty),f=typeof E=="boolean"||typeof T=="boolean",O=T!==void 0?T===!1:E===!1,C=(0,d.A)(O),M=(0,c.d4)(D=>h?(0,s.kM)(D,h):void 0);return(0,t.useEffect)(()=>{h&&M&&C&&!O&&v((0,_.ot)({channelId:h,template:void 0}))},[h,M,O,C,v]),{channelCanvasHasContent:O||!!M&&M!=="blank_page",isLoaded:f,doc:g,templateSelected:M,channelCanvasFileId:y}}u(i,"useChannelCanvasContent")},9671982974:(z,A,e)=>{"use strict";e.d(A,{A:()=>o});var t=e(9418991940),n=e(937317117),s=e(497761763),a=e(396294106),c=e(2188787324);function o(r){let{channelId:l}=r;const{spaceFileId:_,spaceIsPrimary:d,spaceIsEmpty:i,isLinkedCanvasDeleted:m,editsRestrictedToChannelManager:h,setEditsRestrictedToChannelManager:v,hasClickedUseBlankCanvasForChannel:y}=(0,a.A)({channelId:l}),T=(0,t.d4)(p=>_&&(0,s.A)(_)?(0,n.Lp)(p,_):null),I=(0,c.ln)(T);return{spaceFileId:_,spaceIsPrimary:d,spaceIsEmpty:i,isLinkedCanvasDeleted:m,editsRestrictedToChannelManager:h,setEditsRestrictedToChannelManager:v,isChannelCanvasLocked:I,hasClickedUseBlankCanvasForChannel:y}}u(o,"useChannelSpaceForChannel")},396294106:(z,A,e)=>{"use strict";e.d(A,{A:()=>O});var t=e(9706240641),n=e(3134334389),s=e(8300007136),a=e(9418991940),c=e(8040098042),o=e(4761125736),r=e(1031947056),l=e(9101533895),_=e(3430841143),d=e(9530687876);const i=(0,r.Ay)(d.rd.SET_CHANNEL_PROPERTIES_CANVAS_IS_PRIMARY_VIEW,(C,M,D)=>{let{id:P,isPrimaryView:k}=D;var x;const F=M(),W=!1,Y=(0,l.OL)(F,P,W);if(!P||!Y)return;const S={...Y,properties:{...Y==null?void 0:Y.properties,canvas:{...Y==null||(x=Y.properties)===null||x===void 0?void 0:x.canvas,is_primary_view:k}}};C((0,_.F)({channel:S,reason:d.rd.SET_CHANNEL_PROPERTIES_CANVAS_IS_PRIMARY_VIEW}))});i.meta={name:"createThunk",key:"createThunksetChannelPropertiesCanvasIsPrimaryView",description:d.rd.SET_CHANNEL_PROPERTIES_CANVAS_IS_PRIMARY_VIEW};var m=e(4347488242),h=e(5534420337);const v=(0,r.Ay)(d.rd.SET_CHANNEL_PROPERTIES_CANVAS_IS_OPEN_BY_DEFAULT,(C,M,D)=>{let{id:P,isOpenByDefault:k}=D;const x=M(),F=!1,W=(0,l.OL)(x,P,F),Y=(0,o._Z)(x,"channel_properties_api_setter")==="on";if(!P||!W||!Y)return;let S;try{S=JSON.stringify({canvas:{is_open_by_default:k}})}catch(L){(0,h.Ay)({getState:M}).error(L,"failed serializing new properties");return}return C((0,m.D)({channelId:P,props:S,reason:"set_channel_canvas_open_by_default"})).then(()=>{var L;const w={...W,properties:{...W==null?void 0:W.properties,canvas:{...W==null||(L=W.properties)===null||L===void 0?void 0:L.canvas,is_open_by_default:k}}};C((0,_.F)({channel:w,reason:d.rd.SET_CHANNEL_PROPERTIES_CANVAS_IS_OPEN_BY_DEFAULT}))})});v.meta={name:"createThunk",key:"createThunksetChannelPropertiesCanvasIsOpenByDefault",description:d.rd.SET_CHANNEL_PROPERTIES_CANVAS_IS_OPEN_BY_DEFAULT};const y=(0,r.Ay)(d.rd.SET_CHANNEL_PROPERTIES_CANVAS_EDITS_RESTRICTED_TO_CHANNEL_MANAGER,(C,M,D)=>{let{id:P,editsRestrictedToChannelManager:k}=D;const x=M(),F=!1,W=(0,l.OL)(x,P,F),Y=(0,o._Z)(x,"channel_manager_chanvas_edits")==="on",S=(0,o._Z)(x,"channel_manager_chanvas_ui")==="on";if(!P||!W||!S||!Y)return;let L;try{L=JSON.stringify({canvas:{edits_restricted_to_channel_manager:k}})}catch(w){(0,h.Ay)({getState:M}).error(w,"failed serializing new properties");return}return C((0,m.D)({channelId:P,props:L,reason:"set_edits_restricted_to_channel_manager"})).then(()=>{var w;const J={...W,properties:{...W==null?void 0:W.properties,canvas:{...W==null||(w=W.properties)===null||w===void 0?void 0:w.canvas,edits_restricted_to_channel_manager:k}}};C((0,_.F)({channel:J,reason:d.rd.SET_CHANNEL_PROPERTIES_CANVAS_EDITS_RESTRICTED_TO_CHANNEL_MANAGER}))})});y.meta={name:"createThunk",key:"createThunksetChannelPropertiesEditsRestrictedToChannelManager",description:d.rd.SET_CHANNEL_PROPERTIES_CANVAS_EDITS_RESTRICTED_TO_CHANNEL_MANAGER};var T=e(1523378513),I=e(4079686795),p=e(1668417071),g=e(8362292758),E=e(1407713935),f=e(5964896486);function O(C){let{channelId:M}=C;const D=(0,s.wA)(),P=(0,g.A)(),k=M?(0,c.A)(M):!1,x=(0,a.d4)(Ae=>(0,l.OL)(Ae,M)),F=(0,f.H)(x),W=F==null?void 0:F.fileId,Y=F==null?void 0:F.isEmpty,S=k&&!(0,E.LI)(x)&&!(0,E.yz)(x)&&(F==null?void 0:F.isPrimaryView),L=k&&(F==null?void 0:F.isOpenByDefault),w=F==null?void 0:F.isLinkedCanvasDeleted,J=F==null?void 0:F.editsRestrictedToChannelManager,G=(0,a.d4)(Ae=>(0,o._Z)(Ae,"channel_properties_api_setter")==="on"),X=(0,a.d4)(p.As),te=M&&k?X[M]:void 0,le=(0,n.useCallback)(function(){var Ae=(0,t.coroutine)(function*(ae){if(!M||!k)return;D(i({id:M,isPrimaryView:ae})),D((0,I.z)({channelId:M,pref:"space_is_primary",value:{enabled:ae}}));let he;try{he=JSON.stringify({space_is_primary:ae})}catch(_e){P.error(_e,"failed serializing new prefs");return}return D((0,T.E)({channelId:M,newPrefs:he,reason:"use-channel-space-prefs--set-space-is-primary"}))});return function(ae){return Ae.apply(this,arguments)}}(),[M,D,P,k]),ve=(0,n.useCallback)(function(){var Ae=(0,t.coroutine)(function*(ae){if(!M||!k)return;if(G)return D(v({id:M,isOpenByDefault:ae}));D((0,I.z)({channelId:M,pref:"space_open_by_default",value:{enabled:ae}}));let he;try{he=JSON.stringify({space_open_by_default:ae})}catch(_e){P.error(_e,"failed serializing new prefs");return}return D((0,T.E)({channelId:M,newPrefs:he,reason:"use-channel-space-prefs--set-space-is-open-by-default"}))});return function(ae){return Ae.apply(this,arguments)}}(),[M,D,P,k,G]),Q=(0,n.useCallback)(function(){var Ae=(0,t.coroutine)(function*(ae){if(!(!M||!k))return D(y({id:M,editsRestrictedToChannelManager:ae}))});return function(ae){return Ae.apply(this,arguments)}}(),[M,D,k]);return{spaceFileId:W,spaceIsPrimary:S,spaceIsEmpty:Y,spaceIsOpenByDefault:L,editsRestrictedToChannelManager:J,setSpaceIsPrimary:le,setSpaceIsOpenByDefault:ve,setEditsRestrictedToChannelManager:Q,isLinkedCanvasDeleted:w,hasClickedUseBlankCanvasForChannel:te}}u(O,"useChannelSpacePrefs")},6403319589:(z,A,e)=>{"use strict";e.d(A,{A:()=>a});var t=e(9418991940),n=e(7115106069),s=e(9388275297);function a(c,o){const r=c==null?void 0:c.id.get(),l=(0,t.d4)(_=>r&&(0,n.d0)(_,r));return(0,s.A)(l?o:void 0)}u(a,"useQuipDocValueIfSubscribed")},5645915081:(z,A,e)=>{"use strict";e.d(A,{Zq:()=>o,zF:()=>n,zf:()=>r});var t=e(5244168417),n;(function(l){l.PARAGRAPH="paragraph",l.H1="h1",l.H2="h2",l.H3="h3",l.CHECK_LIST="check-list",l.CHECK_LIST_TOGGLE="check-list-toggle",l.ORDERED_LIST="ordered-list",l.BULLET_LIST="bullet-list",l.BLOCKQUOTE="blockquote",l.CODE_BLOCK="code-block"})(n||(n={}));const s=[[t.DocBlockStyle.PLAIN,n.PARAGRAPH],[t.DocBlockStyle.H1,n.H1],[t.DocBlockStyle.H2,n.H2],[t.DocBlockStyle.H3,n.H3],[t.DocBlockStyle.LIST_CHECKLIST,n.CHECK_LIST],[t.DocBlockStyle.LIST_NUMBERED,n.ORDERED_LIST],[t.DocBlockStyle.LIST_BULLET,n.BULLET_LIST],[t.DocBlockStyle.BLOCKQUOTE,n.BLOCKQUOTE],[t.DocBlockStyle.CODE,n.CODE_BLOCK]],a=new Map(s),c=new Map(s.map(l=>[l[1],l[0]]));function o(l){return a.get(l)}u(o,"blockStyleToFormat");function r(l){return c.get(l)}u(r,"formatToBlockStyle")},4843305308:(z,A,e)=>{"use strict";e.d(A,{P:()=>s});var t=e(7731278967),n=e(9084547259);const s=u(a=>{switch(a){case t.r.FILE:return{name:"attachment"};case t.r.IMAGE:return{name:"image"};case t.r.CHECK_LIST:return{name:"checkbox"};case t.r.CHECK_LIST_TOGGLE:return{name:"checkbox"};case t.r.BULLET_LIST:return{name:"bulleted-list"};case t.r.ORDERED_LIST:return{name:"numbered-list"};case t.r.VIDEO_CLIP:return{name:"video"};case t.r.AUDIO_CLIP:return{name:"microphone"};case t.r.DIVIDER:return{name:"divider"};case t.r.TABLE:return{name:"spreadsheet"};case t.r.LAYOUT_2_COLUMNS:return{name:"column-two"};case t.r.LAYOUT_3_COLUMNS:return{name:"column-three"};case t.r.PINS:return{name:"pin"};case t.r.SMART_SUMMARY:case t.r.RECENT_FILES:case t.r.ACTIVE_DISCUSSIONS:case t.r.CHANNEL_HUDDLES:return{name:"magic-wand"};case t.r.BLOCKQUOTE:return{name:"quote"};case t.r.CODE_BLOCK:return{name:"code-block"};case n.L.CODE:return{name:"code"};case t.r.PARAGRAPH:return{name:"paragraph"};case t.r.H1:return{name:"heading-1"};case t.r.H2:return{name:"heading-2"};case t.r.H3:return{name:"heading-3"};case t.r.CANVAS:return{name:"canvas"};case t.r.WORKFLOW:return{name:"play"};case t.r.LIST:return{name:"lists"};case t.r.WIDGET:return{name:"blocks"};case t.r.SALESFORCE_RECORD:return{name:"sf-cloud"};case t.r.USER_PROFILE_UNFURL:return{name:"user"};case t.r.PLACEHOLDER_CARD_SUBMENU:return{name:"add-placeholder"};case t.r.PLACEHOLDER_CARD_VIDEO:return{name:"video"};case t.r.PLACEHOLDER_CARD_PROFILE:return{name:"user"};case t.r.PLACEHOLDER_CARD_AUDIO:return{name:"microphone"};case t.r.PLACEHOLDER_CARD_WORKFLOW:return{name:"play"};case t.r.PLACEHOLDER_CARD_IMAGE:return{name:"image"};case t.r.PLACEHOLDER_CARD_CANVAS:return{name:"canvas"};case t.r.PLACEHOLDER_CARD_FILE:return{name:"attachment"};case t.r.PLACEHOLDER_CARD_LINK:return{name:"link"};case t.r.PLACEHOLDER_CARD_LIST:return{name:"lists"};case t.r.PLACEHOLDER_CARD_SALESFORCE_RECORD:return{name:"sf-cloud"};case t.r.DATE_MENTION:return{name:"calendar"};default:return{name:"help"}}},"getQuipButtonIcon")},8079225585:(z,A,e)=>{"use strict";e.d(A,{O:()=>c});var t=e(735940183),n=e(7731278967),s=e(9084547259);const a=new t.Ay("slack_docs"),c=u(function(o){let{experimentCanvasInsertWorkflowMenuGroupOn:r,experimentCanvasSmartCardsGroupOn:l,experimentWidgetsGroupOn:_,experimentCanvasSalesTemplatesGroupOn:d,experimentCanvasCalloutsGroupOn:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};switch(o){case n.r.FILE:return a.t("File");case n.r.IMAGE:return a.t("Image");case n.r.CHECK_LIST:return a.t("Check list");case n.r.CHECK_LIST_TOGGLE:return a.t("Check list");case n.r.BULLET_LIST:return a.t("Bulleted list");case n.r.ORDERED_LIST:return a.t("Ordered list");case n.r.VIDEO_CLIP:return a.t("Record video clip");case n.r.AUDIO_CLIP:return a.t("Record audio clip");case n.r.DIVIDER:return a.t("Divider");case n.r.PINS:return a.t("Pins");case n.r.SMART_SUMMARY:return l?a.t("AI Channel Summary"):"";case n.r.RECENT_FILES:return l?a.t("Recent Files"):"";case n.r.ACTIVE_DISCUSSIONS:return l?a.t("Active Discussions"):"";case n.r.CHANNEL_HUDDLES:return l?a.t("Huddles"):"";case n.r.BLOCKQUOTE:return a.t("Blockquote");case n.r.CODE_BLOCK:return a.t("Code block");case n.r.PARAGRAPH:return a.t("Paragraph");case n.r.H1:return a.t("Big heading");case n.r.H2:return a.t("Medium heading");case n.r.H3:return a.t("Small heading");case n.r.CANVAS:return a.t("Canvas");case n.r.WORKFLOW:return r?a.t("Workflow"):"";case s.L.CODE:return a.t("Code");case n.r.TABLE:return a.t("Table");case n.r.LAYOUT_2_COLUMNS:return a.t("2 columns",{fallbackHash:"8d8f0f25822179c33b917613ec2d022ef593c340",fallbackHashNs:"quip_shortcut_handlers"});case n.r.LAYOUT_3_COLUMNS:return a.t("3 columns",{fallbackHash:"b505f5f09f70ff9d216f1c3cbb5c1a8a4e82179b",fallbackHashNs:"quip_shortcut_handlers"});case n.r.LIST:return a.t("List");case n.r.WIDGET:return _?a.t("Widget"):"Widget";case n.r.USER_PROFILE_UNFURL:return a.t("Profile",{fallbackHash:"ff4fc0276e960c348647b647235f68200887c9d2",fallbackHashNs:"menu"});case n.r.SALESFORCE_RECORD:return d?a.t("Salesforce record"):"";case n.r.PLACEHOLDER_CARD_VIDEO:return a.t("Video",{fallbackHash:"bc17c1f0179a888f2a7e8389f67d4f2cf5cf4531",fallbackHashNs:"slack_kit_video"});case n.r.PLACEHOLDER_CARD_PROFILE:return a.t("Profile",{fallbackHash:"ff4fc0276e960c348647b647235f68200887c9d2",fallbackHashNs:"menu"});case n.r.PLACEHOLDER_CARD_AUDIO:return a.t("Audio",{fallbackHash:"acdac205f5e24cb75113c4b281a2c13f08b75159",fallbackHashNs:"files"});case n.r.PLACEHOLDER_CARD_WORKFLOW:return a.t("Workflow",{fallbackHash:"d7a484140f5f9f7f5427e1f2c44dbfc1d3ad9eea",fallbackHashNs:"slack_docs"});case n.r.PLACEHOLDER_CARD_IMAGE:return a.t("Image");case n.r.PLACEHOLDER_CARD_CANVAS:return a.t("Canvas");case n.r.PLACEHOLDER_CARD_FILE:return a.t("File");case n.r.PLACEHOLDER_CARD_LINK:return a.t("Link");case n.r.PLACEHOLDER_CARD_LIST:return a.t("List");case n.r.PLACEHOLDER_CARD_SALESFORCE_RECORD:return d?a.t("Salesforce record"):"";case n.r.DATE_MENTION:return a.t("Date",{fallbackHash:"eb9a4bc1c0c153e4e4b042a79113b815b7e3021d",fallbackHashNs:"calendar"});case n.r.CALLOUT:return i?a.t("Callout"):"";default:return o}},"getQuipButtonLabel")},9084547259:(z,A,e)=>{"use strict";e.d(A,{B:()=>a,L:()=>n});var t=e(5244168417),n;(function(c){c.BOLD="bold",c.STRIKE="strike",c.ITALIC="italic",c.CODE="code",c.LINK="link",c.UNDERLINE="underline"})(n||(n={}));const s=new Map([[t.DocInlineStyle.BOLD,n.BOLD],[t.DocInlineStyle.STRIKETHROUGH,n.STRIKE],[t.DocInlineStyle.ITALIC,n.ITALIC],[t.DocInlineStyle.CODE,n.CODE],[t.DocInlineStyle.LINK,n.LINK]]);function a(c){return s.get(c)}u(a,"inlineStyleToFormat")},7731278967:(z,A,e)=>{"use strict";e.d(A,{r:()=>s});var t=e(5645915081),n;(function(a){a.UNKNOWN="unknown",a.TITLE="title",a.FILE="file",a.IMAGE="image",a.VIDEO_CLIP="video-clip",a.AUDIO_CLIP="audio-clip",a.DIVIDER="divider",a.TABLE="table",a.SHORTCUT="shortcut",a.MENU_SEPARATOR="menu-separator",a.PINS="pins",a.BOOKMARKS="bookmarks",a.USER_UNFURL="user-unfurl",a.CANVAS_UNFURL="canvas-unfurl",a.MESSAGE_UNFURL="message-unfurl",a.PUBLIC_LINK_UNFURL="public-link-unfurl",a.SHORTCUT_UNFURL="shortcut-unfurl",a.USER_PROFILE_UNFURL="user-profile-unfurl",a.UNFURL="unfurl",a.CANVAS="canvas",a.GENERIC="generic",a.WORKFLOW="workflow",a.FILE_UPLOAD_BLOCKED_MESSAGE_BANNER="file-upload-blocked-message-banner",a.SMART_SUMMARY="smart-summary",a.RECENT_FILES="recent-files",a.ACTIVE_DISCUSSIONS="active-discussions",a.CHANNEL_HUDDLES="channel-huddles",a.LIST="list",a.WIDGET="widget",a.LAYOUT_2_COLUMNS="layout-2-columns",a.LAYOUT_3_COLUMNS="layout-3-columns",a.PLACEHOLDER_CARD_SUBMENU="placeholder-card-submenu",a.PLACEHOLDER_CARD_VIDEO="placeholder-card-video",a.PLACEHOLDER_CARD_PROFILE="placeholder-card-profile",a.PLACEHOLDER_CARD_AUDIO="placeholder-card-audio",a.PLACEHOLDER_CARD_WORKFLOW="placeholder-card-workflow",a.PLACEHOLDER_CARD_IMAGE="placeholder-card-image",a.PLACEHOLDER_CARD_CANVAS="placeholder-card-canvas",a.PLACEHOLDER_CARD_FILE="placeholder-card-file",a.PLACEHOLDER_CARD_LINK="placeholder-card-link",a.PLACEHOLDER_CARD_LIST="placeholder-card-list",a.PLACEHOLDER_CARD_SALESFORCE_RECORD="placeholder-card-salesforce-record",a.SALESFORCE_RECORD="salesforce-record",a.DATE_MENTION="date-mention",a.CALLOUT="callout"})(n||(n={}));const s={...t.zF,...n}},1069376685:(z,A,e)=>{"use strict";e.d(A,{D:()=>t});var t;(function(n){n.SpecificMembers="add-specific-members",n.AllMembers="add-all-members"})(t||(t={}))},8414606991:(z,A,e)=>{"use strict";e.d(A,{v:()=>o});var t=e(3134334389),n=e(5255740490),s=e(207659888),a=e(8683010724),c=e(1610251172);const o=u(r=>{let{type:l,spacing:_="medium"}=r;const d=(0,n.A)("three_fourths_opacity",{margin_right_0:_==="none",margin_right_25:_==="small",margin_right_50:_==="medium"});return l===s.VZ.Channels||l===s.VZ.OrgChannels?t.createElement(c.A,{type:"channel",size:"inherit",className:d}):l===s.VZ.DirectMessages?t.createElement(c.A,{type:"dm",size:"inherit",className:d}):l===s.VZ.RecentApps?t.createElement(c.A,{type:"gn-menu",size:"inherit",className:d}):l===s.aw||l===s.oX?t.createElement(c.A,{type:"shared-channels-outline",size:"inherit",className:d}):l===s.VH?t.createElement(c.A,{type:"star-o",size:"inherit",className:d}):l===s.VZ.UserGroup?t.createElement("div",{className:(0,n.A)("c-icon","c-icon--inherit",d)},t.createElement(a.A,{variation:"filled",name:"user-groups"})):t.createElement(c.A,{type:"star-o",size:"inherit",className:d})},"InlineChannelSectionFallbackIcon");o.displayName="InlineChannelSectionFallbackIcon"},126225536:(z,A,e)=>{"use strict";e.d(A,{A:()=>i});var t=e(3134334389),n=e(8300007136),s=e(5255740490),a=e(4308550795),c=e(1030162945),o=e(207659888),r=e(863162513),l=e(1033870301),_=e(8414606991);function d(m){let{channelSection:h,className:v,spacing:y="medium",showIcon:T=!0}=m;const p=(0,n.wA)()((0,l.i1)({channelSection:h})),g=p&&p.split(" "),E=g&&g[0],f=g&&(g.length>1?` ${g.slice(1).join(" ")}`:null),O=u(()=>{if(!T)return null;if(h.type===o.VZ.UserGroup)return t.createElement(_.v,{type:h.type,spacing:y});const C=(0,s.A)({margin_right_0:y==="none",margin_right_25:y==="small",margin_right_50:y==="medium"});return h.emoji?t.createElement(c.Ay,{className:C,shouldFallbackOnLoadError:!0,text:h.emoji,stopAnimations:!0,emojiSize:c.lw.SMALL,forceDisplay:!0,isEmojiInlineWithText:!0,renderEmojiFallback:!0}):h.type===o.VZ.ExternalWorkspace?t.createElement(a.A,{workspaceId:(0,r.de)(h.id),size:15,className:C}):t.createElement(_.v,{type:h.type,spacing:y})},"getIcon");return O.displayName="getIcon",t.createElement("span",{className:(0,s.A)("p-inline_channel_section",v)},t.createElement("span",{className:"p-inline_channel_section__lockup"},O(),E),f)}u(d,"InlineChannelSection"),d.displayName="InlineChannelSection";const i=d},4308550795:(z,A,e)=>{"use strict";e.d(A,{A:()=>I});var t=e(3134334389),n=e(5255740490),s=e(9418991940),a=e(9950739645),c=e(698013937),o=e(3391133100),r=e(5865611660),l=e(3677514771),_=e(5672691263),d=e.n(_);const i=20,m=.8,h=.2,v={width:"auto"};function y(p){let{id:g,size:E,spacing:f}=p;const O=`${Math.ceil(E/2-1)}px`,C=`${E}px`,M=`${f}px`;return t.createElement("svg",{className:"sr-only"},t.createElement("mask",{id:g},t.createElement("rect",{x:O,y:O,width:C,height:C,rx:M,ry:M,fill:"white"})))}u(y,"SecondaryIconMask"),y.displayName="SecondaryIconMask";function T(p){let{size:g=i,className:E,workspaceId:f,externalWorkspaceHostId:O}=p;const C=(0,t.useMemo)(()=>`scw-icon-mask-${(0,o.r9)()}`,[]),M=(0,t.useMemo)(()=>({mask:`url(#${C}) exclude, linear-gradient(#000 0 0)`}),[C]),D=Math.floor(g*m),P=Math.floor(g*h),k=(0,t.useMemo)(()=>({marginRight:`-${P}px`,marginBottom:`-${P}px`}),[P]);return t.createElement("span",{style:v,className:(0,n.A)(E,d().container)},t.createElement("span",{style:M,className:d().primaryIcon},t.createElement(c.A,{id:f,size:g,allowTeamInitials:!0})),t.createElement("span",{style:k,className:d().secondaryIcon},t.createElement(c.A,{id:O,size:D,allowTeamInitials:!0})),t.createElement(y,{id:C,size:D,spacing:P}))}u(T,"ExternalWorkspaceIconStack"),T.displayName="ExternalWorkspaceIconStack";function I(p){let{size:g=i,className:E,workspaceId:f}=p;const O=(0,s.d4)(M=>(0,l._J)(M,f)),C=(0,s.d4)(M=>(0,r.m)(M,O));return(0,a.N)(O)?C?t.createElement(T,{workspaceId:f,externalWorkspaceHostId:C,size:g,className:E}):t.createElement(c.A,{id:f,size:g,className:E,allowTeamInitials:!0}):null}u(I,"ExternalWorkspaceIcon"),I.displayName="ExternalWorkspaceIcon"},9399618736:(z,A,e)=>{"use strict";e.d(A,{AV:()=>l,Cu:()=>m,Gu:()=>r,g4:()=>d,qn:()=>_});var t=e(4423055085),n=e(796111729),s=e(6188550760);let a=1,c=1;const o=(0,n.Wo)({label:"HISTORY-NAVIGATION"}),r=u(()=>{c!==a&&(o.info("Incrementing the users current position in the history stack"),c+=1)},"onNavigateForward"),l=u(()=>{c!==1&&(o.info("Decrementing the users current position in the history stack"),c-=1)},"onNavigateBack"),_=u(()=>c===1,"isBackDisabled"),d=u(()=>c===a,"isForwardDisabled");function i(){o.info("Adding route to the history stack"),c+=1,a=c}u(i,"incrementHistoryLength");function m(v){let{shouldReplaceState:y,reason:T}=v;y||T!==s.GB&&i()}u(m,"maybeIncrementHistoryLength"),(0,t.ul)("history",{getHistoryLength:()=>a,getHistoryIndex:()=>c});const h={maybeIncrementHistoryLength:m}},5670315214:(z,A,e)=>{"use strict";e.d(A,{Hu:()=>h,OJ:()=>M,q8:()=>O,vU:()=>C,wZ:()=>D});var t=e(6249041335),n=e(735940183),s=e(4813703725),a=e(5597672932),c=e(462591818),o=e(6565762531),r=e(1223723593),l=e(6575028637),_=e(3677514771),d=e(6470070112),i=e(4181200404),m=e(6790819894);const h={video:"video",audio:"audio",profileFieldOptions:"profile_field_options"},v=new n.Ay("huddles"),y=u((P,k)=>({video:[...P&&P.video?P.video:[]],audio:[...!k&&P&&P.audio?P.audio:[]],profile_field_options:[]}),"getInnerCallsAppsFromTeamPref"),T=u(P=>{const k=P.reduce((F,W)=>(Object.entries(W).forEach(Y=>{let[S,L]=Y;(S==="video"||S==="audio")&&(F[S]=F[S]?[...F[S],...L]:[...L])}),F),{}),x={video:[],audio:[]};return Object.entries(k).forEach(F=>{let[W,Y]=F;(W==="video"||W==="audio")&&(x[W]=Y.filter((S,L,w)=>L===w.findIndex(J=>J.id===S.id&&J.id!==void 0)))}),x},"combineCallApps"),I=u(P=>{const x=(0,_.FR)(P).map(W=>(0,a.x)(P,"calls_apps",W.id)).filter(i.b);return T(x)},"retrieveCallsAppsForUnifiedOrg"),p=u(P=>(0,l.ss)(P)?I(P):(0,a.x)(P,"calls_apps"),"retrieveCallsAppsFromPrefs"),g=u((P,k)=>{const x=p(P);if(k){var F;const W=x==null||(F=x.video)===null||F===void 0?void 0:F.findIndex(Y=>Y.id===c.rq);W>=0&&x.video.splice(W,1)}return x},"filterCallsAppsFromTeamPref"),E=(0,s.ik)((P,k)=>g(P,k),P=>y(P,!1)),f=(0,s.ik)((P,k)=>g(P,k),P=>y(P,!0)),O=u(function(P){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)?f(P,!0):E(P,!0)},"getCallsAppsFromTeamPref"),C=(0,m.F)(O,d.pt,(P,k)=>{const x={},F=P&&P.video?P.video:[],W=P&&P.audio?P.audio:[],Y=v.t("Start a huddle"),S=k?[{id:"A01",name:Y,image:"/marketing/img/homepage/icons/huddle-icon.png"}]:[];return[...F,...W,...S].forEach(L=>{let w;L.id===c.rq?w={id:L.id,name:L.name,image:L.image}:["A5GE9BMQC","A649AA069","A5W4BRDNX","ARQS1U88Y","ARUFE7YMU"].findIndex(J=>L.id===J)!==-1?w={id:L.id,name:L.name,image:"/marketing/img/homepage/icons/zoom-icon.png"}:w=L,x[w.id]=w}),x}),M=u(P=>{let{callsApp:k,memberPhoneNumber:x,hideVideoApps:F=!1}=P;const W=[];return k&&(!F&&k.video&&W.push(...k.video.map(Y=>({...Y,type:r.JG.Video}))),k.audio&&(0,o.A)((0,t.A)(x))&&W.push(...k.audio.map(Y=>({...Y,type:r.JG.Audio})))),W},"getCallAppList"),D=u(P=>{const k=g(P,!0),x=k&&k.video?k.video:[],F=k&&k.audio?k.audio:[];return[...x,...F]},"getFlattenTeamPrefCallsApps")},4980558152:(z,A,e)=>{"use strict";e.d(A,{A:()=>i});var t=e(3134334389),n=e(4103274853),s=e(7715417323),a=e(3245843483),c=e(8737667238),o=e(3514831633),r=e(3753517560),l=e(4776067035);function _(){return _=Object.assign||function(m){for(var h=1;h<arguments.length;h++){var v=arguments[h];for(var y in v)Object.prototype.hasOwnProperty.call(v,y)&&(m[y]=v[y])}return m},_.apply(this,arguments)}u(_,"_extends");let d=u(class extends t.Component{onDesktopContextMenu(h){const{getTemplate:v,overrideDefaultMenu:y}=this.props,T=u(E=>({...E,id:(0,c.A)(),submenu:E.submenu&&E.submenu.map(T)}),"addIdsToItem"),I=v?v().map(T):[];if(!I.length)return;const{x:p,y:g}=(0,n.A)(this.getCoordinatesForContextMenu(h),E=>(0,a.xhB)()*E);(0,a.O0f)(I,{x:p,y:g,overrideDefaultMenu:y}),this.props.onClick&&this.props.onClick()}getCoordinatesForContextMenu(h){if(!this.props.hasKeyboardFocus||!h)return{};const{left:v,top:y,width:T,height:I}=h.currentTarget.getBoundingClientRect(),p=v+T/2,g=y+I/2;return{x:p,y:g}}renderMenuFromTemplate(h){const{getTemplate:v,width:y,showSlackKitContextMenuOnDesktop:T,menuAriaLabel:I}=this.props;function p(E){return E.replace(/&([\w&])/g,(f,O)=>O)}u(p,"removeKeyboardAccelerators");const g=v?v().map(E=>!E.label||T?E:{...E,label:p(E.label)}):[];return g.length?t.createElement(o.a,_({"aria-label":I,width:y},h,{template:g,isContextMenu:!0,stripTerminalSeparators:!0})):null}render(){if((0,a.g9M)()&&!this.props.showSlackKitContextMenuOnDesktop)return(0,l.A)(this.props.children,{onContextMenu:this.onDesktopContextMenu});const{forceOpen:h,onClick:v,onClose:y,isDisabled:T,renderMenu:I,preventScroll:p}=this.props;return this.props.desktopAppOnly?(0,l.A)(this.props.children):t.createElement(o.cQ,{isContextMenu:!0,position:"right-bottom",tryOppositePosition:!0,forceOpen:h,shouldFade:!1,renderMenu:I||this.renderMenuFromTemplate,onClick:v,onClose:y,isDisabled:T,preventScroll:p},this.props.children)}constructor(h){super(h),this.onDesktopContextMenu=this.onDesktopContextMenu.bind(this),this.renderMenuFromTemplate=this.renderMenuFromTemplate.bind(this)}},"ContextMenuTrigger");d.displayName="ContextMenuTrigger",d.defaultProps={overrideDefaultMenu:!1,desktopAppOnly:!0,hasKeyboardFocus:!1,showSlackKitContextMenuOnDesktop:!1,onClick:s.A,onClose:s.A,isDisabled:!1,forceOpen:!1,stripTerminalSeparators:!1};const i=(0,r.A)(d)},2837660778:(z,A,e)=>{"use strict";e.d(A,{$g:()=>E,Mo:()=>T,rp:()=>g});var t=e(6217320234),n=e(7823346015),s=e(3385422400),a=e(9829579108),c=e(735940183),o=e(3707193570),r=e(6839188756),l=e(9950739645),_=e(6536982570),d=e(8276911661),i=e(3677514771),m=e(8847766420),h=e(241752795),v=e(5962670951);const y=new c.Ay("create_channel_modal"),T=(0,a.Ay)(f=>{const O=(0,d.cA)(f),C=(0,_.HI)(O),M=(0,i.H7)(f);if(!M)return[];const D=(0,m.VO)(f)||[],P=[M.id,...C,...D],k=[...new Set(P)].filter(x=>!(0,o.JV)(x)).map(x=>(0,i._J)(f,x)).filter(x=>!!x&&!(0,r.Zx)(x));return(0,t.A)(k,x=>(0,r.F1)(x))});T.meta={name:"createSelector",key:"createSelectorgetAllInvitableWorkspaces",description:f=>{const O=(0,d.cA)(f),C=(0,_.HI)(O),M=(0,i.H7)(f);if(!M)return[];const D=(0,m.VO)(f)||[],P=[M.id,...C,...D],k=[...new Set(P)].filter(x=>!(0,o.JV)(x)).map(x=>(0,i._J)(f,x)).filter(x=>!!x&&!(0,r.Zx)(x));return(0,t.A)(k,x=>(0,r.F1)(x))}};const I=u((f,O)=>{const C=O==null?void 0:O.map(M=>M.id);return f.map(M=>{var D,P;return{label:(0,r.F1)(M),value:M,optgroup:M.enterprise_name,key:M.id,isDisabled:!!(C!==void 0&&C.includes(M.id)),displayReason:(P=(D=O==null?void 0:O.find(k=>k.id===M.id))===null||D===void 0?void 0:D.displayReason)!==null&&P!==void 0?P:""}})},"mapWorkspacesToSelectOptionItems"),p=u((f,O)=>{let{ineligibleWorkspaces:C,excludeExternalWorkspaces:M}=O;const[D,P]=(0,n.A)(f,x=>(0,l.N)(x)),k={value:void 0,label:"",type:"divider"};return[...I(P,C),...!M&&D.length>0?[k,...I(D,C)]:[]]},"mapInvitableWorkspacesToSelectOptions"),g=(0,a.Ay)(f=>{const O=(0,h.y5)(f),C=(0,v.S)(f),M=T(f),D=M.filter(P=>!O.includes(P.id)&&!C.includes(P.id)).map(P=>({id:P.id,displayReason:y.t("You don\u2019t have access to this")}));return p(M,{ineligibleWorkspaces:D})});g.meta={name:"createSelector",key:"createSelectorgetAllInvitableWorkspaceSelectOptions",description:f=>{const O=(0,h.y5)(f),C=(0,v.S)(f),M=T(f),D=M.filter(P=>!O.includes(P.id)&&!C.includes(P.id)).map(P=>({id:P.id,displayReason:y.t("You don\u2019t have access to this")}));return p(M,{ineligibleWorkspaces:D})}};const E=(0,s.Mz)(T,f=>f.length>1)},4212246463:(z,A,e)=>{"use strict";e.d(A,{D:()=>Ft,A:()=>un});var t=e(3134334389),n=e(8300007136),s=e(9418991940),a=e(5255740490),c=e(9003400431),o=e(980293773),r=e(3214129289);function l(tt){return tt&&tt.id}u(l,"getEmojiCollectionId");var _=e(370406050);function d(tt){return tt&&tt.author}u(d,"getEmojiCollectionAuthor");var i=e(6045879501);function m(tt){return tt&&tt.localEmoji}u(m,"getEmojiCollectionLocalEmoji");var h=e(735940183),v=e(4761125736),y=e(9113979368),T=e(2101927269),I=e(2141441167),p=e(6217320234),g=e(3783303734),E=e(4978843660),f=e(3297051565),O=e.n(f),C=e(3004085654),M=e(7564917982);function D(tt){return tt&&tt.date_create}u(D,"getEmojiCollectionDateCreate");var P=e(5071545805),k=e(2047021170),x=e(387484329),F=e(8840779375),W=e(5331686899),Y=e(1610251172),S=e(7420598276),L=e(2036354333);const w=new h.Ay("custom_emoji_list"),J="emoji_packs_clicked_collection_cta",G=u(tt=>{let{id:pt,name:Dt,author:Wt,emoji:zt,installed:ln,onClick:Tn}=tt;const cn=(0,n.wA)(),hn=(0,s.d4)(De=>(0,k.ty)(De,J)),Cn=(0,s.d4)(C.fl),_n=(0,s.d4)(C._J);if(!zt)return null;const Wn=l(_n)===pt&&Cn&&!hn;function kn(){Wn&&cn((0,x.AZ)({pref:J,value:!0})),Tn()}u(kn,"handleOnClick");const Pn=(0,F.A)(zt,(De,Ne)=>({name:Ne,url:De})),$t=(0,E.A)(Pn,4),$n=w.t("by {author}",{author:Wt});return t.createElement(L.A,{className:"p-emoji_pack_card p-emoji_pack_card--clickable",onClick:kn},t.createElement("div",{className:"display_flex align_items_center margin_bottom_100"},t.createElement("div",{className:"flex_one"},t.createElement("div",{className:"p-emoji_pack_card__header"},Dt,Wn&&t.createElement("span",{className:"margin_left_25"},t.createElement(S.A,null,w.t("NEW")))),t.createElement("div",{className:"p-emoji_pack_card__subheader"},$n)),ln&&!Wn&&t.createElement("div",{className:"flex_none"},t.createElement(Y.A,{size:"inherit",type:"circle-checkbox-checked",className:"p-emoji_pack_card__checkmark"}))),t.createElement("div",{className:"p-emoji_pack_card_rows"},$t.map(De=>t.createElement("div",{key:De.map(Ne=>`${Ne.name}-card-`).join(),className:"p-emoji_pack_card__row"},De.map(Ne=>t.createElement(W.Ay,{key:`emoji-pack-${Ne.name}`,showTooltip:!1,text:`:${Ne.name}:`,url:Ne.url,emojiSize:W.lw.LARGE})),[...new Array(4-De.length)].map((Ne,Me)=>`emoji-pack-spacer-${Me}`).map(Ne=>t.createElement("div",{key:Ne,className:"p-emoji_pack_card__spacer"}))))))},"EmojiPackCard");G.displayName="EmojiPackCard";const X=G,te=new h.Ay("custom_emoji_list"),le=u(()=>{const tt=te.t("STAY TUNED"),pt=te.t("More emoji packs are on the way");return t.createElement("div",{className:"p-emoji_pack_card p-emoji_pack_coming_soon"},t.createElement(S.A,{className:"p-emoji_pack_coming_soon__pill"},tt),t.createElement("div",{className:"p-emoji_pack_coming_soon__text"},pt),t.createElement("div",{className:"p-emoji_pack_coming_soon__illustrations"},t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"198",height:"30",viewBox:"0 0 198 30",fill:"none"},t.createElement("g",{opacity:"0.8"},t.createElement("g",{clipPath:"url(#clip0)"},t.createElement("path",{d:"M22.7 30C35.2 30 45.3 19.9 45.3 7.3 45.3-5.2 35.2-15.3 22.7-15.3 10.1-15.3 0-5.2 0 7.3 0 19.9 10.1 30 22.7 30Z",fill:"#FFCC4D"}),t.createElement("path",{d:"M24 20C25.5 20 26.7 18.5 26.7 16.7 26.7 14.8 25.5 13.3 24 13.3 22.5 13.3 21.3 14.8 21.3 16.7 21.3 18.5 22.5 20 24 20Z",fill:"#664500"}),t.createElement("path",{d:"M10.8 10.5C10.6 10.5 10.3 10.4 10.1 10.3 9.5 9.9 9.3 9.1 9.7 8.5 10.9 6.5 14.6 3.2 19.9 4.5 20.7 4.7 21.1 5.4 20.9 6.1 20.7 6.8 20 7.3 19.3 7.1 14.5 5.9 12 9.8 11.9 9.9 11.7 10.3 11.3 10.5 10.8 10.5V10.5ZM26.8 5.5C26.4 5.5 26 5.4 25.7 5 25.3 4.5 25.4 3.6 25.9 3.2 30.2-0.3 34.9 1.1 36.9 2.3 37.5 2.7 37.7 3.5 37.3 4.1 36.9 4.8 36.1 4.9 35.5 4.6 35.3 4.4 31.4 2.1 27.6 5.2 27.4 5.4 27.1 5.5 26.8 5.5Z",fill:"#664500"}),t.createElement("path",{d:"M17.8 23.7C17.7 23.7 17.6 23.7 17.5 23.7 17 23.5 16.7 23 16.8 22.4 17.4 20.4 17.2 18.4 16.2 17 15.5 16 14.6 15.5 13.6 15.4 13 15.4 12.6 14.9 12.7 14.3 12.7 13.8 13.2 13.3 13.7 13.4 15.3 13.5 16.8 14.4 17.8 15.8 19.2 17.7 19.5 20.3 18.8 23 18.6 23.4 18.2 23.7 17.8 23.7ZM32.5 19.6C32.3 19.6 32.1 19.6 32 19.5 30.4 18.4 29.5 16.6 29.6 14.5 29.6 12.3 30.7 10.3 32.2 9.4 32.7 9.1 33.3 9.2 33.6 9.7 33.9 10.2 33.7 10.8 33.3 11.1 32.3 11.7 31.6 13.1 31.6 14.6 31.5 16 32.1 17.1 33.1 17.8 33.5 18.1 33.6 18.7 33.3 19.2 33.2 19.5 32.8 19.6 32.5 19.6V19.6Z",fill:"#E2A62D"}),t.createElement("path",{d:"M22.9-14.4C22.8-14.4 22.8-14.5 22.7-14.5 22.7-14.5 1.4-18.5 0.5-17.7 -0.4-16.9 1 4.7 1 4.7 1 4.8 1 4.9 1.1 4.9 1.9 5.8 7.4 2.3 13.4-3.1 19.5-8.4 23.7-13.5 22.9-14.4V-14.4Z",fill:"#DD2E44"}),t.createElement("path",{d:"M0.5-17.6C0.4-17.6 0.4-17.5 0.4-17.5 0.6-15.6 2.7-0.6 4 4.1 5.9 3 7.8 1.6 10.1-0.2 8.2-3.8 1.5-17.8 0.5-17.6Z",fill:"#EA596E"}),t.createElement("path",{d:"M39.9 21L25.8 19.2C24.3 19.1 21.6 19.1 21.8 16.7 21.9 14.5 24.5 14.9 26.4 15.2L40.6 17.5 39.9 21V21Z",fill:"#3B88C3"}),t.createElement("path",{d:"M40.6 17.5L34.9 16.6C34.3 16.4 33.7 17.4 33.7 18.5 33.6 19.6 34 20.2 34.6 20.3L40.2 21 40.6 17.5V17.5Z",fill:"#88C9F9"}),t.createElement("path",{d:"M46.6 17.1L43.1 20.3 36.8 13.5 40.3 10.3C42.1 8.7 45 8.8 46.6 10.6L46.8 10.8C48.5 12.6 48.4 15.5 46.6 17.1Z",fill:"#3B88C3"}),t.createElement("path",{d:"M43.1 20.3C44.6 19 44.4 16.3 42.7 14.4 40.9 12.6 38.3 12.2 36.8 13.5 35.3 14.9 35.5 17.6 37.2 19.4 38.9 21.3 41.6 21.7 43.1 20.3Z",fill:"#88C9F9"}),t.createElement("path",{d:"M41.8 19C42.6 18.3 42.3 16.8 41.3 15.7 40.3 14.6 38.8 14.2 38.1 14.9 37.3 15.6 37.5 17.1 38.6 18.2 39.6 19.3 41.1 19.7 41.8 19Z",fill:"#269"}),t.createElement("path",{d:"M3.3 28.7C4.4 28.7 5.3 27.8 5.3 26.7 5.3 25.6 4.4 24.7 3.3 24.7 2.2 24.7 1.3 25.6 1.3 26.7 1.3 27.8 2.2 28.7 3.3 28.7Z",fill:"#55ACEE"}),t.createElement("path",{d:"M6.5 21L3.4 13.5 0.5 21.6 6.5 21ZM34.7-11.3L29.3-10 30.7-15.3 34.7-11.3Z",fill:"#EA596E"}))),t.createElement("g",{opacity:"0.8"},t.createElement("path",{d:"M123 6C123 19.3 112.3 30 99 30 85.7 30 75 19.3 75 6 75-7.3 85.7-18 99-18 112.3-18 123-7.3 123 6Z",fill:"#FFCC4D"}),t.createElement("path",{d:"M99 11.3C94.2 11.3 91 10.8 87 10 86.1 9.8 84.3 10 84.3 12.7 84.3 18 90.5 24.7 99 24.7 107.5 24.7 113.7 18 113.7 12.7 113.7 10 111.9 9.8 111 10 107 10.8 103.8 11.3 99 11.3Z",fill:"#664500"}),t.createElement("path",{d:"M87 12.7C87 12.7 91 14 99 14 107 14 111 12.7 111 12.7 111 12.7 108.3 18 99 18 89.7 18 87 12.7 87 12.7Z",fill:"white"}),t.createElement("path",{d:"M115.8 6.3C115.6 6.2 113.2 4.4 109.6 3.1 109.6 3 109.7 2.8 109.7 2.7 109.7 2.2 109.5 1.7 109.2 1.4 111.6 0.7 113.6 0.7 113.7 0.7 114.4 0.7 115 0.1 115-0.7 115-1.4 114.4-2 113.7-2 113.4-2 106.4-1.9 102.1 2.4 101.7 2.8 101.6 3.3 101.8 3.8 102 4.3 102.5 4.7 103 4.7 109.1 4.7 114.2 8.4 114.2 8.4 114.4 8.6 114.7 8.7 115 8.7 115.4 8.7 115.8 8.5 116.1 8.1 116.5 7.5 116.4 6.7 115.8 6.3V6.3ZM95.9 2.4C91.6-1.9 84.6-2 84.3-2 83.6-2 83-1.4 83-0.7 83 0.1 83.6 0.7 84.3 0.7 84.4 0.7 86.4 0.7 88.8 1.4 88.5 1.7 88.3 2.2 88.3 2.7 88.3 2.8 88.4 3 88.4 3.1 84.8 4.4 82.4 6.2 82.2 6.3 81.6 6.7 81.5 7.5 81.9 8.1 82.2 8.5 82.6 8.7 83 8.7 83.3 8.7 83.6 8.6 83.8 8.4 83.8 8.4 88.8 4.7 95 4.7 95.5 4.7 96 4.3 96.2 3.8 96.4 3.3 96.3 2.8 95.9 2.4V2.4Z",fill:"#664500"})),t.createElement("g",{opacity:"0.8"},t.createElement("path",{d:"M198 6C198 19.3 187.3 30 174 30 160.7 30 150 19.3 150 6 150-7.3 160.7-18 174-18 187.3-18 198-7.3 198 6Z",fill:"#FFCC4D"}),t.createElement("path",{d:"M188.7 19.3C192.3 19.3 195.3 16.3 195.3 12.7 195.3 9 192.3 6 188.7 6 185 6 182 9 182 12.7 182 16.3 185 19.3 188.7 19.3Z",fill:"#FF7892"}),t.createElement("path",{d:"M159.3 19.3C163 19.3 166 16.3 166 12.7 166 9 163 6 159.3 6 155.7 6 152.7 9 152.7 12.7 152.7 16.3 155.7 19.3 159.3 19.3Z",fill:"#FF7892"}),t.createElement("path",{d:"M182.7 11.3C186.7 11.3 190 8.1 190 4 190-0.1 186.7-3.3 182.7-3.3 178.6-3.3 175.3-0.1 175.3 4 175.3 8.1 178.6 11.3 182.7 11.3Z",fill:"#F5F8FA"}),t.createElement("path",{d:"M165.3 11.3C169.4 11.3 172.7 8.1 172.7 4 172.7-0.1 169.4-3.3 165.3-3.3 161.3-3.3 158-0.1 158 4 158 8.1 161.3 11.3 165.3 11.3Z",fill:"#F5F8FA"}),t.createElement("path",{d:"M165.3 7.3C167.2 7.3 168.7 5.8 168.7 4 168.7 2.2 167.2 0.7 165.3 0.7 163.5 0.7 162 2.2 162 4 162 5.8 163.5 7.3 165.3 7.3Z",fill:"#664500"}),t.createElement("path",{d:"M182.7 7.3C184.5 7.3 186 5.8 186 4 186 2.2 184.5 0.7 182.7 0.7 180.8 0.7 179.3 2.2 179.3 4 179.3 5.8 180.8 7.3 182.7 7.3Z",fill:"#664500"}),t.createElement("path",{d:"M179.3 22H168.7C167.9 22 167.3 21.4 167.3 20.7 167.3 19.9 167.9 19.3 168.7 19.3H179.3C180.1 19.3 180.7 19.9 180.7 20.7 180.7 21.4 180.1 22 179.3 22ZM190-3.3C189.6-3.3 189.2-3.5 188.9-3.9 185.4-8.6 180.9-8.7 180.7-8.7 179.9-8.7 179.3-9.3 179.3-10 179.3-10.7 179.9-11.3 180.7-11.3 180.9-11.3 186.7-11.3 191.1-5.5 191.5-4.9 191.4-4 190.8-3.6 190.6-3.4 190.3-3.3 190-3.3V-3.3ZM158-3.3C157.7-3.3 157.4-3.4 157.2-3.6 156.6-4 156.5-4.9 156.9-5.5 161.3-11.3 167.1-11.3 167.3-11.3 168.1-11.3 168.7-10.7 168.7-10 168.7-9.3 168.1-8.7 167.3-8.7 167.1-8.7 162.6-8.6 159.1-3.9 158.8-3.5 158.4-3.3 158-3.3Z",fill:"#664500"})),t.createElement("defs",null,t.createElement("clipPath",null,t.createElement("rect",{y:"-18",width:"48",height:"48",fill:"white"})))),t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"198",height:"30",viewBox:"0 0 198 30",fill:"none"},t.createElement("g",{opacity:"0.8"},t.createElement("path",{d:"M48 24C48 37.3 37.3 48 24 48 10.7 48 0 37.3 0 24 0 10.7 10.7 0 24 0 37.3 0 48 10.7 48 24Z",fill:"#DA2F47"}),t.createElement("path",{d:"M34 39.8C33.9 39.6 32.4 34 24 34 15.6 34 14.1 39.6 14 39.8 13.9 40.1 14.1 40.4 14.3 40.6 14.6 40.7 14.9 40.7 15.1 40.5 15.2 40.4 17.7 38 24 38 30.3 38 32.8 40.4 32.9 40.5 33 40.6 33.2 40.7 33.3 40.7 33.4 40.7 33.6 40.6 33.7 40.6 33.9 40.4 34.1 40.1 34 39.8V39.8ZM20.9 23.1C16.6 18.7 9.6 18.7 9.3 18.7 8.6 18.7 8 19.3 8 20 8 20.7 8.6 21.3 9.3 21.3 9.4 21.3 11.9 21.4 14.6 22.3 13.9 23.2 13.3 24.5 13.3 26 13.3 28.6 14.8 30.7 16.7 30.7 18.5 30.7 20 28.6 20 26 20 25.8 20 25.5 20 25.3 20 25.3 20 25.3 20 25.3 20.3 25.3 20.7 25.2 20.9 24.9 21.5 24.4 21.5 23.6 20.9 23.1V23.1ZM38.7 18.7C38.4 18.7 31.4 18.7 27.1 23.1 26.5 23.6 26.5 24.4 27.1 24.9 27.3 25.2 27.7 25.3 28 25.3 28 25.3 28 25.3 28 25.3 28 25.5 28 25.8 28 26 28 28.6 29.5 30.7 31.3 30.7 33.2 30.7 34.7 28.6 34.7 26 34.7 24.5 34.1 23.2 33.4 22.3 36.1 21.4 38.6 21.3 38.7 21.3 39.4 21.3 40 20.7 40 20 40 19.3 39.4 18.7 38.7 18.7V18.7Z",fill:"#292F33"})),t.createElement("g",{opacity:"0.8"},t.createElement("path",{d:"M198 24C198 37.3 187.3 48 174 48 160.7 48 150 37.3 150 24 150 10.7 160.7 0 174 0 187.3 0 198 10.7 198 24Z",fill:"#FFCC4D"}),t.createElement("path",{d:"M174 28C169.2 28 166 27.4 162 26.7 161.1 26.5 159.3 26.7 159.3 29.3 159.3 34.7 165.5 41.3 174 41.3 182.5 41.3 188.7 34.7 188.7 29.3 188.7 26.7 186.9 26.5 186 26.7 182 27.4 178.8 28 174 28Z",fill:"#664500"}),t.createElement("path",{d:"M162 29.3C162 29.3 166 30.7 174 30.7 182 30.7 186 29.3 186 29.3 186 29.3 183.3 34.7 174 34.7 164.7 34.7 162 29.3 162 29.3Z",fill:"white"}),t.createElement("path",{d:"M170.9 5.9L164.9 7 161.7 1.3C161.4 0.7 160.7 0.3 160 0.4 159.3 0.6 158.7 1.1 158.6 1.8L157.6 8.2 151.6 9.3C150.9 9.4 150.3 10 150.2 10.7 150.1 11.4 150.5 12.1 151.2 12.4L156.6 15 155.6 21.4C155.5 22.1 155.8 22.9 156.5 23.2 156.7 23.3 157 23.4 157.2 23.4 157.7 23.4 158.1 23.2 158.4 22.9L163.1 18.1 169.1 21C169.8 21.3 170.6 21.1 171.1 20.6 171.5 20.1 171.6 19.3 171.3 18.7L168.2 13 172.4 8.7C172.9 8.2 173 7.4 172.7 6.8 172.3 6.1 171.6 5.8 170.9 5.9V5.9ZM177.1 5.9L183.1 7 186.3 1.3C186.6 0.7 187.3 0.3 188 0.4 188.7 0.6 189.3 1.1 189.4 1.8L190.4 8.2 196.4 9.3C197.1 9.4 197.7 10 197.8 10.7 197.9 11.4 197.5 12.1 196.8 12.4L191.4 15 192.4 21.4C192.5 22.1 192.2 22.9 191.5 23.2 191.3 23.3 191 23.4 190.8 23.4 190.3 23.4 189.9 23.2 189.6 22.9L184.9 18.1 178.9 21C178.2 21.3 177.4 21.1 176.9 20.6 176.5 20.1 176.4 19.3 176.7 18.7L179.8 13 175.6 8.7C175.1 8.2 175 7.4 175.3 6.8 175.7 6.1 176.4 5.8 177.1 5.9V5.9Z",fill:"#E95F28"})),t.createElement("g",{opacity:"0.8"},t.createElement("path",{d:"M99 48C112.3 48 123 37.3 123 24 123 10.7 112.3 0 99 0 85.7 0 75 10.7 75 24 75 37.3 85.7 48 99 48Z",fill:"#FFCC4D"}),t.createElement("path",{d:"M98.1 22.1C97.8 22 97.5 22 97.3 22.1 97.3 22.1 95.6 23.3 92.3 23.3 89.1 23.3 87.4 22.1 87.4 22.1 87.2 22 86.8 22 86.6 22.1 86.3 22.3 86.3 22.7 86.4 22.9 86.5 23.1 88.4 27.3 92.3 27.3 96.3 27.3 98.2 23.1 98.3 22.9 98.4 22.7 98.3 22.3 98.1 22.1V22.1ZM111.4 22.1C111.2 22 110.8 22 110.6 22.1 110.6 22.1 108.9 23.3 105.7 23.3 102.4 23.3 100.7 22.1 100.7 22.1 100.5 22 100.2 22 99.9 22.1 99.7 22.3 99.6 22.7 99.7 22.9 99.8 23.1 101.7 27.3 105.7 27.3 109.6 27.3 111.5 23.1 111.6 22.9 111.7 22.7 111.7 22.3 111.4 22.1V22.1Z",fill:"#664500"}),t.createElement("path",{d:"M120.9 16.7C120.9 16.7 120.9 16.6 120.9 16.5 120.9 15.5 120.2 15 119.3 15H114.5L120.2 7C120.5 6.6 120.6 6.4 120.6 5.9 120.6 4.9 119.8 4.8 119.4 4.8H112.3L112.3 3.8C112.3 3.8 110.4 5 110.3 5 110.1 5.1 109.6 5.5 109.6 6.3 109.6 7.3 110.3 7.9 111.2 7.9H115.4L109.7 15.9C109.6 16.1 109.4 16.5 109.4 16.9 109.4 17.7 110.1 18.1 110.9 18.1H119.3C119.6 18.1 120 18 120.2 17.9L122.2 16.7H120.9V16.7Z",fill:"#FFAC33"}),t.createElement("path",{d:"M117.4 6.8H113.2C112.3 6.8 111.5 6.2 111.5 5.2 111.5 4.2 112.3 3.6 113.2 3.6H121.4C121.7 3.6 122.6 3.8 122.6 4.7 122.6 5.2 122.5 5.4 122.2 5.8L116.5 13.8H121.3C122.2 13.8 122.9 14.4 122.9 15.4 122.9 16.4 122.2 17 121.3 17H112.8C112 17 111.4 16.6 111.4 15.7 111.4 15.3 111.6 15 111.7 14.8L117.4 6.8V6.8Z",fill:"#2A6797"}),t.createElement("path",{d:"M108.2 10C108.2 9.9 108.2 9.9 108.2 9.9 108.2 9.1 107.7 8.7 107 8.7H103.4L107.7 2.7C107.9 2.4 108 2.2 108 1.9 108 1.1 107.3 1 107.1 1H101.7L101.7 0.3C101.7 0.3 100.3 1.2 100.2 1.2 100.1 1.3 99.7 1.6 99.7 2.2 99.7 3 100.2 3.4 100.9 3.4H104.1L99.8 9.4C99.7 9.5 99.6 9.8 99.6 10.1 99.6 10.7 100.1 11 100.7 11H107C107.2 11 107.5 11 107.7 10.9L109.2 10H108.2V10Z",fill:"#FFAC33"}),t.createElement("path",{d:"M105.5 2.5H102.4C101.7 2.5 101.2 2.1 101.2 1.4 101.2 0.6 101.7 0.2 102.4 0.2H108.5C108.8 0.2 109.4 0.3 109.4 1 109.4 1.4 109.3 1.5 109.1 1.8L104.9 7.8H108.4C109.1 7.8 109.7 8.2 109.7 9 109.7 9.7 109.1 10.2 108.4 10.2H102.1C101.5 10.2 101 9.9 101 9.3 101 9 101.2 8.7 101.3 8.5L105.5 2.5V2.5Z",fill:"#2A6797"}),t.createElement("path",{d:"M98.7 13.9C98.7 13.9 98.7 13.8 98.7 13.8 98.7 13.2 98.2 12.8 97.6 12.8H94.6L98.2 7.7C98.4 7.4 98.5 7.3 98.5 7 98.5 6.3 97.9 6.2 97.7 6.2H93.1L93.1 5.7 91.8 6.4C91.7 6.5 91.4 6.7 91.4 7.3 91.4 7.9 91.9 8.3 92.4 8.3H95.1L91.5 13.4C91.4 13.5 91.3 13.8 91.3 14 91.3 14.6 91.7 14.8 92.2 14.8H97.6C97.8 14.8 98.1 14.7 98.2 14.7L99.5 13.9H98.7Z",fill:"#FFAC33"}),t.createElement("path",{d:"M96.4 7.5H93.7C93.1 7.5 92.6 7.2 92.6 6.5 92.6 5.9 93.1 5.5 93.7 5.5H99C99.2 5.5 99.7 5.6 99.7 6.2 99.7 6.5 99.7 6.7 99.5 6.9L95.8 12H98.9C99.5 12 99.9 12.4 99.9 13.1 99.9 13.7 99.5 14.1 98.9 14.1H93.5C93 14.1 92.5 13.8 92.5 13.3 92.5 13 92.7 12.8 92.7 12.7L96.4 7.5V7.5Z",fill:"#2A6797"})))))},"EmojiPackComingSoon");le.displayName="EmojiPackComingSoon";const ve=le,Q=new h.Ay("custom_emoji_list");function Ae(tt){let{row:pt,className:Dt,onPackClick:Wt}=tt;return t.createElement("div",{key:pt.map(zt=>`${l(zt)}-row`).join(),className:Dt},pt.map(zt=>{if(zt.type==="coming_soon")return t.createElement(ve,{key:"emoji-pack-coming-soon"});if(zt.type==="spacer")return t.createElement("div",{key:"emoji-pack-spacer",className:"p-emoji_pack__spacer"});const ln=(0,P.j)(zt);return t.createElement(X,{key:`emoji-pack-${l(zt)}`,installed:ln,id:l(zt)||void 0,name:(0,_.M)(zt),author:d(zt),emoji:(0,i.H)(zt),onClick:()=>Wt(zt,{installed:ln})})}))}u(Ae,"Row"),Ae.displayName="Row",Ae.propTypes={row:O().arrayOf(O().object),className:O().string,onPackClick:O().func.isRequired},Ae.defaultProps={row:[],className:void 0};function ae(tt){let{orgName:pt,onPackClick:Dt}=tt;const Wt=(0,n.wA)(),zt=(0,s.d4)(C.uI);if((0,t.useEffect)(()=>{Wt((0,M.H)({reason:"emojiPack:dialog"}))},[Wt]),(0,y.A)(zt))return null;const ln=(0,T.A)(zt,Cn=>(0,P.j)(Cn)).length;let Tn=(0,I.A)(zt);Tn=(0,p.A)(Tn,Cn=>-1*D(Cn)),(0,g.A)(zt)<2&&Tn.push({type:"coming_soon"}),Tn.length%2!==0&&Tn.push({type:"spacer"});const cn=(0,E.A)(Tn,2);let hn;return pt?hn=Q.rt("Emoji packs let you add a whole set new of emoji to every {orgName} workspace. They\u2019ll appear in the custom tab of the emoji picker (the one with the Slack icon!).",{orgName:t.createElement("b",null,pt)}):hn=Q.t("Emoji packs let you add a whole set new of emoji for your team. They\u2019ll appear in the custom tab of the emoji picker (the one with the Slack icon!)."),t.createElement(o.$m,null,t.createElement(o.qf,null,t.createElement("div",null,ln>0&&t.createElement("div",{className:"p-emoji_pack__header"},Q.t("Added"),t.createElement("div",{className:"p-emoji_pack__pill"},ln)),t.createElement("div",{className:"p-emoji_pack__list"},cn.map(Cn=>t.createElement(Ae,{key:Cn.map(_n=>`${l(_n)}-rp-`).join(),className:"p-emoji_pack__pack_row",row:Cn,onPackClick:Dt}))),t.createElement("div",{className:"p-emoji_pack__help"},hn))))}u(ae,"AddEmojiPackDialogContent"),ae.displayName="AddEmojiPackDialogContent";const he=ae;var _e=e(9391594207),ee=e(2003990933),de=e(7715417323),Ie=e(9268023148),ce=e(2322735331),j=e(56548687),N=e(2219904496),b=e(1030162945),R=e(5733135148),K=e(581167618),B=e(6084388622),$=e(1563996154),Z=e(5795074931),re=e(5060694341),Te=e(3842747943),Ce=e(6244014364),Pe=e(9746734072),fe=e(7156798807),pe=e(1269227002),q=e(5257368278),se=e(330221449),ge=e(9829579108);const Oe=(0,ge.Ay)(tt=>!tt||!tt.customizeEmoji||!tt.customizeEmoji.customEmojiData||!tt.customizeEmoji.customEmojiData.length?[]:tt.customizeEmoji.customEmojiData);Oe.meta={name:"createSelector",key:"createSelectorgetCustomEmojiData",description:tt=>!tt||!tt.customizeEmoji||!tt.customizeEmoji.customEmojiData||!tt.customizeEmoji.customEmojiData.length?[]:tt.customizeEmoji.customEmojiData};const Le=(0,ge.Ay)(tt=>tt&&tt.customizeEmoji&&tt.customizeEmoji.customEmojiTotalCount?tt.customizeEmoji.customEmojiTotalCount:0);Le.meta={name:"createSelector",key:"createSelectorgetCustomEmojiTotalCount",description:tt=>tt&&tt.customizeEmoji&&tt.customizeEmoji.customEmojiTotalCount?tt.customizeEmoji.customEmojiTotalCount:0};const We=(0,ge.Ay)(tt=>tt&&tt.customizeEmoji&&tt.customizeEmoji.currentPage?tt.customizeEmoji.currentPage:0);We.meta={name:"createSelector",key:"createSelectorgetLastPageRetrieved",description:tt=>tt&&tt.customizeEmoji&&tt.customizeEmoji.currentPage?tt.customizeEmoji.currentPage:0};const Re=(0,ge.Ay)(tt=>tt&&tt.customizeEmoji&&tt.customizeEmoji.totalPages?tt.customizeEmoji.totalPages:0);Re.meta={name:"createSelector",key:"createSelectorgetTotalPages",description:tt=>tt&&tt.customizeEmoji&&tt.customizeEmoji.totalPages?tt.customizeEmoji.totalPages:0};const we=(0,ge.Ay)(tt=>tt&&tt.customizeEmoji&&tt.customizeEmoji.isLoadingNewPage?tt.customizeEmoji.isLoadingNewPage:!1);we.meta={name:"createSelector",key:"createSelectorgetIsLoadingNewPage",description:tt=>tt&&tt.customizeEmoji&&tt.customizeEmoji.isLoadingNewPage?tt.customizeEmoji.isLoadingNewPage:!1};const Je=(0,ge.Ay)(tt=>tt&&tt.customizeEmoji&&tt.customizeEmoji.isLoadingNewSearchQuery?tt.customizeEmoji.isLoadingNewSearchQuery:!1);Je.meta={name:"createSelector",key:"createSelectorgetIsLoadingNewSearchQuery",description:tt=>tt&&tt.customizeEmoji&&tt.customizeEmoji.isLoadingNewSearchQuery?tt.customizeEmoji.isLoadingNewSearchQuery:!1};const it=(0,ge.Ay)(tt=>tt&&tt.customizeEmoji&&tt.customizeEmoji.deletedEmojiList?tt.customizeEmoji.deletedEmojiList:[]);it.meta={name:"createSelector",key:"createSelectorgetDeletedEmojiList",description:tt=>tt&&tt.customizeEmoji&&tt.customizeEmoji.deletedEmojiList?tt.customizeEmoji.deletedEmojiList:[]};const et=(0,ge.Ay)(tt=>tt&&tt.customizeEmoji&&tt.customizeEmoji.disabledEmoji?tt.customizeEmoji.disabledEmoji:{});et.meta={name:"createSelector",key:"createSelectorgetDisabledEmoji",description:tt=>tt&&tt.customizeEmoji&&tt.customizeEmoji.disabledEmoji?tt.customizeEmoji.disabledEmoji:{}};const lt=(0,ge.Ay)(tt=>tt&&tt.customizeEmoji&&tt.customizeEmoji.sortDir?tt.customizeEmoji.sortDir:"asc");lt.meta={name:"createSelector",key:"createSelectorgetSortDirection",description:tt=>tt&&tt.customizeEmoji&&tt.customizeEmoji.sortDir?tt.customizeEmoji.sortDir:"asc"};const nt=(0,ge.Ay)(tt=>tt&&tt.customizeEmoji&&tt.customizeEmoji.sortBy?tt.customizeEmoji.sortBy:"name");nt.meta={name:"createSelector",key:"createSelectorgetSortBy",description:tt=>tt&&tt.customizeEmoji&&tt.customizeEmoji.sortBy?tt.customizeEmoji.sortBy:"name"};const at=(0,q.A)("Load the next page of custom emoji data",function(tt,pt){let{count:Dt=100,queries:Wt,userIds:zt,reason:ln="customize-emoji-next-page"}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const Tn=pt();tt((0,se.en)(!0));const hn={page:We(Tn)+1,count:Dt,sort_by:nt(Tn),sort_dir:lt(Tn)};return Wt&&(hn.queries=JSON.stringify(Wt)),zt&&(hn.user_ids=JSON.stringify(zt)),tt((0,pe.apiCall)({method:"emoji.adminList",reason:ln,args:hn})).then(Cn=>{tt((0,se.en)(!1));const _n=(0,Pe.A)(Cn.disabled_emoji)?(0,fe.A)(Cn.disabled_emoji,"name"):Cn.disabled_emoji;tt((0,se.X8)({newCustomEmojiData:Cn.emoji,disabledEmoji:_n,customEmojiTotalCount:Cn.custom_emoji_total_count,customEmojiSearchCount:Cn.paging.total,currentPage:Cn.paging.page,totalPages:Cn.paging.pages}))}).catch(Cn=>{throw Cn})});at.meta={name:"createFetcher",key:"createFetcherfetchCustomEmojiNextPage",description:"Load the next page of custom emoji data"},at.propTypes={queries:O().array,userIds:O().array};const ze=(0,q.A)("Load custom emoji data with a new search query",function(tt,pt){let{queries:Dt,page:Wt=1,count:zt=100,sortBy:ln,sortDir:Tn,userIds:cn,reason:hn="customize-emoji-new-query"}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};tt((0,se.d$)(!0));const Cn={page:Wt,count:zt};return Dt&&(Cn.queries=JSON.stringify(Dt)),cn&&(Cn.user_ids=JSON.stringify(cn)),ln&&Tn&&(Cn.sort_by=ln,Cn.sort_dir=Tn),tt((0,pe.apiCall)({method:"emoji.adminList",reason:hn,args:Cn})).then(_n=>{tt((0,se.d$)(!1));const Vn=(0,Pe.A)(_n.disabled_emoji)?(0,fe.A)(_n.disabled_emoji,"name"):_n.disabled_emoji;tt((0,se.Ot)({newCustomEmojiData:_n.emoji,disabledEmoji:Vn,customEmojiTotalCount:_n.custom_emoji_total_count,customEmojiSearchCount:_n.paging.total,currentPage:_n.paging.page,totalPages:_n.paging.pages,sortBy:ln,sortDir:Tn}))}).catch(_n=>{throw _n})});ze.meta={name:"createFetcher",key:"createFetcherfetchResetCustomEmoji",description:"Load custom emoji data with a new search query"},ze.propTypes={queries:O().array,page:O().number,count:O().number,sortBy:O().oneOf(["created","name"]),sortDir:O().oneOf(["asc","desc"]),userIds:O().array};const Ke=(0,q.A)("Deletes the given custom emoji",function(tt,pt){let{emojiName:Dt,isPrimaryEmoji:Wt=!1,synonyms:zt=[],reason:ln="customize-emoji-remove"}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return tt((0,se.gx)({emojiName:Dt,isPrimaryEmoji:Wt,synonyms:zt})),tt((0,pe.apiCall)({method:"emoji.remove",reason:ln,args:{name:Dt}})).then(Tn=>Tn).then(()=>{(0,j.e)({state:pt()}).track("PAGE_CUSTOMIZE_EMOJI",{contexts:{ui_context:{step:"delete",action:"remove",action_status:"success"}}})}).catch(Tn=>{throw(0,j.e)({state:pt()}).track("PAGE_CUSTOMIZE_EMOJI",{contexts:{ui_context:{step:"delete",action:"remove",action_status:"fail"}}}),Tn})});Ke.meta={name:"createFetcher",key:"createFetchersubmitRemoveCustomEmoji",description:"Deletes the given custom emoji"},Ke.propTypes={emojiName:O().string,isPrimaryEmoji:O().bool,synonyms:O().array};const He=(0,q.A)("Creates a new custom emoji or alias",function(tt,pt){let{mode:Dt,name:Wt,aliasFor:zt,image:ln,searchArgs:Tn={},reason:cn="customize-emoji-add"}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return tt((0,pe.apiCall)({method:"emoji.add",reason:cn,args:{mode:Dt,name:Wt,alias_for:zt,image:ln}})).then(hn=>hn).then(()=>{tt(ze(Tn))}).catch(hn=>{throw hn})});He.meta={name:"createFetcher",key:"createFetchersubmitAddCustomEmoji",description:"Creates a new custom emoji or alias"},He.propTypes={mode:O().string,name:O().string,aliasFor:O().string,image:O().object};const Ye=(0,q.A)("Gets the emoji data for a given emoji",function(tt,pt){let{name:Dt,reason:Wt="customize-emoji-get-info"}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return tt((0,pe.apiCall)({method:"emoji.getInfo",reason:Wt,args:{name:Dt}})).then(zt=>zt).catch(zt=>{throw zt})});Ye.meta={name:"createFetcher",key:"createFetchergetEmojiInfo",description:"Gets the emoji data for a given emoji"},Ye.propTypes={name:O().string};const _t=(0,q.A)("Renames the custom emoji with the new name",function(tt,pt){let{oldName:Dt,newName:Wt,reason:zt="customize-emoji-rename"}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return tt((0,pe.apiCall)({method:"emoji.rename",reason:zt,args:{name:Dt,new_name:Wt}})).then(ln=>ln).then(()=>{tt(ze()),tt((0,se.S9)(Dt))}).catch(ln=>{throw ln})});_t.meta={name:"createFetcher",key:"createFetchersubmitRenameEmoji",description:"Renames the custom emoji with the new name"},_t.propTypes={oldName:O().string,newName:O().string};var vt=e(3456937405),Tt=e(6247499644),Lt=e(4244379358),ft=e(4675837085);const mt=new h.Ay("custom_emoji_list"),Yt={ADD_DIALOG_INPUT:"customize_emoji_add_dialog_input",ADD_DIALOG_ERROR:"customize_emoji_add_dialog_error",ADD_DIALOG_FILE_INPUT:"customize_emoji_add_dialog_file_input",ADD_DIALOG_FILE_INFO:"customize_emoji_add_dialog_file_info",ADD_DIALOG_IMAGE_PREVIEW:"customize_emoji_add_dialog_image_preview",ADD_DIALOG_IMAGE_PREVIEW_ERROR:"customize_emoji_add_dialog_image_preview_error",ADD_DIALOG_MESSAGE:"customize_emoji_add_dialog_message",ADD_DIALOG_UPLOAD:"customize_emoji_add_dialog_upload",ADD_DIALOG_UPLOAD_IMAGE_PROMPT:"customize_emoji_add_dialog_upload_image_prompt",ADD_DIALOG_UPLOAD_PREVIEW:"customize_emoji_add_dialog_upload_preview",ADD_DIALOG:"customize_emoji_add_dialog",ADD_DIALOG_DUPLICATE_PREVIEW:"customize_emoji_add_dialog_duplicate_preview"};let nn=u(class extends t.PureComponent{componentDidMount(){const{clogger:pt}=this.props;pt.track(this.eventId,{contexts:{ui_context:{step:"add_custom_emoji",action:"impression",ui_component:"dialog",ui_properties:{element_type:"dialog",element_name:"add_custom_emoji_dialog"}}}}),this.maybeLoadEmojiPreviewFromUrl(),this.props.emojiNameSuggestion&&this.state.newEmojiName&&this.checkIfEmojiNameAlreadyExistsImmediate(this.props.emojiNameSuggestion)}shouldPreventSubmit(){const{newEmojiName:pt,uploadedImage:Dt,nameErrorText:Wt}=this.state,{emojiUrl:zt}=this.props,ln=pt.length>100;return!pt||ln||!!Wt||!zt&&!Dt}onDragOver(pt){pt.preventDefault(),pt.dataTransfer.dropEffect="copy"}onDrop(pt){pt.preventDefault();const Dt=pt.dataTransfer.files[0];if(Dt){const Wt=Dt.name,zt=URL.createObjectURL(Dt);this.updateAfterUpload({uploadedImage:Dt,fileName:Wt,previewImageUrl:zt})}else this.setState(()=>({uploadedImage:null,fileName:"",previewImageUrl:"",imagePreviewError:!1}))}onEmojiNameChange(pt){const{standardEmojiData:Dt}=this.props;let Wt="";this.setState(()=>({newEmojiName:pt})),/[A-Z]/.test(pt)||/[ .,;`\u2013~!@#$%^&*(){}=\\:"<>?|]/.test(pt)?Wt=mt.t("Names must be lowercase, and can\u2019t contain spaces, periods, or most punctuation."):pt in Dt?Wt=mt.t("An emoji with this name already exists. Check if the existing emoji is a duplicate, or try a different name."):(0,Tt.q)(pt)?this.checkIfEmojiNameAlreadyExists(pt):Wt=mt.t("Names must be lowercase, and can\u2019t contain spaces, periods, or most punctuation."),this.setState(()=>({nameErrorText:Wt}))}onImagePreviewError(){this.setState(()=>({imagePreviewError:!0}))}onSubmit(pt){pt&&pt.preventDefault();const{newEmojiName:Dt,uploadedImage:Wt}=this.state,{emojiUrl:zt,experimentAddEmojiFiletypesGroupOn:ln}=this.props;if(this.shouldPreventSubmit())return;this.setState(()=>({goButtonIsPending:!0}));const cn={...{reason:"add-custom-emoji-dialog-content",name:Dt},...zt?{mode:"url",url:zt}:{mode:"data",searchArgs:this.props.searchArgs,...Wt?{image:Wt}:{}}};this.props.addCustomEmoji(cn).then(()=>{this.props.closeModal();const hn=this.renderToastMessage();this.props.enqueueToast({element:hn}),this.setState(()=>({goButtonIsPending:!1})),this.props.clogger.track(this.eventId,{contexts:{ui_context:{step:zt?"import_custom_emoji":"add_custom_emoji",action:zt?"import":"add",action_status:"success",ui_component:"dialog",ui_properties:{element_type:"button",element_name:"save"}}}})}).catch(hn=>{let Cn;const _n=(0,ee.A)(hn,"data.error");(_n===vt.W.NoUrlProvided||_n===vt.W.NoUrlImage)&&(Cn=mt.t("Something happened that prevented the image from being imported. Try again?")),_n==="error_bad_upload"?Cn=mt.t("Something happened that prevented your file from being uploaded. Try again?"):_n==="error_bad_format"?Cn=ln?mt.t("Please make sure your file is a GIF, JPEG, PNG, or WEBP."):mt.t("Please make sure your file is a GIF, JPEG, or PNG."):_n==="resized_but_still_too_large"||_n==="too_many_frames"?Cn=mt.t("This image is a bit too big, even after resizing. A smaller file might help?"):_n==="error_too_big"?Cn=mt.t("Please choose an image smaller than 64KB."):_n==="error_name_taken_i18n"?Cn=mt.rt("Unfortunately, the international emoji set already includes an emoji named <b>{newEmojiName}</b>. Mind trying a different name?",{newEmojiName:Dt}):_n==="error_name_taken"?Cn=mt.rt("The name <b>{newEmojiName}</b> is already in use by another emoji.",{newEmojiName:Dt}):(_n==="error_bad_name"||_n==="error_bad_name_i18n")&&(Cn=mt.t("Names must be lowercase, and can\u2019t contain spaces, periods, or most punctuation.")),this.setState(()=>({apiErrorText:Cn,goButtonIsPending:!1})),this.props.clogger.track(this.eventId,{contexts:{ui_context:{step:"add_custom_emoji",action:"add",action_status:"fail",ui_component:"dialog",ui_properties:{element_type:"button",element_name:"save"}}}})})}onTextBlur(){this.setState(()=>({placeholder:!0}))}onTextFocus(){this.setState(()=>({placeholder:!1}))}onUploadChange(){var pt,Dt;const Wt=!((pt=this.fileInput)===null||pt===void 0||(Dt=pt.current)===null||Dt===void 0)&&Dt.files?this.fileInput.current.files[0]:null;if(Wt){const zt=Wt.name,ln=URL.createObjectURL(Wt);this.updateAfterUpload({uploadedImage:Wt,fileName:zt,previewImageUrl:ln})}else this.setState(()=>({uploadedImage:null,fileName:"",previewImageUrl:"",imagePreviewError:!1}))}maybeLoadEmojiPreviewFromUrl(){const{emojiUrl:pt}=this.props;pt&&this.setState(()=>({previewImageUrl:pt,imagePreviewError:!1}))}convertFileNameToEmojiName(pt){if(!pt)return null;const Dt=pt.lastIndexOf("."),Wt=Dt>0?pt.substring(0,Dt):pt;return Wt?Wt.toLowerCase().replace(/\s/g,"-").replace(/[ .,;`\u2013~!@#$%^&*(){}=\\:"<>?|]/g,""):null}updateAfterUpload(pt){let{uploadedImage:Dt,fileName:Wt,previewImageUrl:zt}=pt;const{newEmojiName:ln,fileName:Tn}=this.state;let cn=ln;(!ln||ln===this.convertFileNameToEmojiName(Tn))&&(cn=this.convertFileNameToEmojiName(Wt)||cn),this.setState(()=>({uploadedImage:Dt,fileName:Wt,previewImageUrl:zt,imagePreviewError:!1}),()=>this.onEmojiNameChange(cn))}fileUpload(){var pt;const Dt=(pt=this.props.windowRef.deref())===null||pt===void 0?void 0:pt.document.getElementById("emojiimg");Dt==null||Dt.click(),this.props.clogger.track(this.eventId,{contexts:{ui_context:{step:"add_custom_emoji",action:"click",ui_component:"dialog",ui_properties:{element_type:"button",element_name:"upload_image"}}}})}renderChooseNamePrompt(){const{newEmojiName:pt,nameErrorText:Dt}=this.state;return t.createElement("ol",{className:"black margin_bottom_0",start:2},t.createElement("li",{className:"margin_bottom_0"},t.createElement("div",null," ",mt.t("Give it a name")," "),t.createElement("div",{className:"normal sk_foreground_max p-add_custom_emoji_dialog__choose_name_container"},mt.t("This is also what you\u2019ll type to add this emoji to your messages.")),t.createElement("div",{className:"p_add_custom_emoji_dialog__name_input"},t.createElement(N.A,{id:"emojiname",name:"name",value:pt,onChange:this.onEmojiNameChange,onFocus:this.onTextFocus,onBlur:this.onTextBlur,placeholder:this.renderPlaceholderText(),prefix:":",suffix:":",maxCharacterLimit:100,counterMinimumCharacters:101,errorText:Dt,"data-qa":Yt.ADD_DIALOG_INPUT,useInlineAlert:!0}))))}maybeRenderDuplicateNameErrorPreview(){const{newEmojiName:pt,nameErrorText:Dt}=this.state,Wt=mt.t("An emoji with this name already exists. Check if the existing emoji is a duplicate, or try a different name.");return Dt===Wt?t.createElement("div",{className:"inline_flex full_width","data-qa":Yt.ADD_DIALOG_DUPLICATE_PREVIEW},t.createElement(b.Ay,{text:pt,alt:pt,emojiSize:"larger",className:"flex_shrink_none"}),t.createElement("div",{className:"padding_left_50 overflow_hidden"},t.createElement("strong",null,mt.t("Existing emoji")),t.createElement("span",{className:"block normal overflow_ellipsis"},":",pt,":"))):null}renderDialogMessage(){const{orgName:pt}=this.props;let Dt;return pt?Dt=mt.rt("Your custom emoji will be available in every <b>{orgName}</b> workspace. You\u2019ll find it in the custom tab of the emoji picker. (Hint: it\u2019s the one with the Slack icon!)",{orgName:pt}):Dt=mt.t("Your custom emoji will be available to everyone in your workspace. You\u2019ll find it in the custom tab of the emoji picker. (Hint: it\u2019s the one with the Slack icon!)"),t.createElement("div",{className:"p-add_custom_emoji_dialog","data-qa":Yt.ADD_DIALOG_MESSAGE},t.createElement("div",null,Dt),t.createElement("div",null,this.renderErrorMessage()),t.createElement("form",{className:"p-add_custom_emoji_dialog__form",onSubmit:this.onSubmit},this.renderUploadImagePrompt(),t.createElement("hr",null),this.renderChooseNamePrompt(),this.maybeRenderDuplicateNameErrorPreview()))}renderErrorMessage(){const{apiErrorText:pt}=this.state;return pt?t.createElement(K.Ay,{level:"error",className:"margin_top_50 margin_bottom_100","data-qa":Yt.ADD_DIALOG_ERROR},t.createElement("span",null," ",pt," ")):null}renderImagePreview(){const{previewImageUrl:pt}=this.state,Dt=t.createElement("img",{src:pt,alt:mt.t("image preview"),className:"p-add_custom_emoji_dialog__image",onError:this.onImagePreviewError,draggable:!1}),{imagePreviewError:Wt}=this.state;return Wt?t.createElement("div",{className:"p-add_custom_emoji_dialog__icon_container","data-qa":Yt.ADD_DIALOG_IMAGE_PREVIEW_ERROR},t.createElement($.Ay,{tip:mt.t("We couldn't preview your image. Make sure it's a GIF, JPEG, or PNG."),zIndex:"above_fs"},t.createElement(Y.A,{type:"exclamation-circle",size:"inherit",className:"p-add_custom_emoji_dialog__icon_broken block"}))):t.createElement("div",{className:"align_center p-add_custom_emoji_dialog__image_container","data-qa":Yt.ADD_DIALOG_IMAGE_PREVIEW},Dt)}renderPlaceholderText(){const{placeholder:pt}=this.state;let Dt;return pt?Dt=mt.t("avocado"):Dt="",Dt}renderToastMessage(){const{newEmojiName:pt,previewImageUrl:Dt}=this.state,Wt=t.createElement(b.Ay,{text:pt,url:Dt,emojiSize:b.lw.MEDIUM}),zt=mt.rt("{emoji} :{newEmojiName}: has been added and is ready for use.",{emoji:Wt,newEmojiName:pt});return t.createElement(R.Ay,{toastClasses:"p-customize_emoji_list__toast"},t.createElement("span",null,zt))}renderUploadImagePrompt(){const{emojiUrl:pt}=this.props,Dt=mt.t("Square images under 128KB and with transparent backgrounds work best. If your image is too large, we\u2019ll try to resize it for you."),Wt=t.createElement(t.Fragment,null,t.createElement("div",{className:"p-add_custom_emoji_dialog__upload_preview rounded bordered"},this.renderUploadPreview()),t.createElement("div",{className:"p-add_custom_emoji_dialog__upload_preview p-add_custom_emoji_dialog__upload_preview--dark rounded bordered margin_left_50"},this.renderUploadPreview())),zt=pt?mt.t("Import external emoji"):mt.t("Upload an image");return t.createElement("ol",{className:"black",onDragOver:this.onDragOver,onDrop:this.onDrop,"data-qa":Yt.ADD_DIALOG_UPLOAD_IMAGE_PROMPT},t.createElement("li",{className:"large_bottom_margin"},t.createElement("div",null," ",zt," "),!pt&&t.createElement("div",{className:"normal sk_foreground_max"},Dt),t.createElement("div",{className:"normal p-add_custom_emoji_dialog__upload_container"},Wt,!pt&&t.createElement("div",{className:"p-add_custom_emoji_dialog__upload_button margin_left_100"},this.renderUploadedFileText(),t.createElement("input",{type:"file",className:"p-add_custom_emoji_dialog__upload_input",id:"emojiimg",name:"img",accept:"image/*;capture=camera",ref:this.fileInput,onChange:this.onUploadChange,"data-qa":Yt.ADD_DIALOG_FILE_INPUT}),t.createElement(B.Ay,{type:"outline",size:"medium",onClick:this.fileUpload,"data-qa":Yt.ADD_DIALOG_UPLOAD}," ",mt.t("Upload Image")," ")))))}renderUploadPreview(){const{fileName:pt}=this.state,{emojiUrl:Dt}=this.props;let Wt;return pt||Dt?Wt=this.renderImagePreview():Wt=t.createElement("div",{className:"p-add_custom_emoji_dialog__icon_container","data-qa":Yt.ADD_DIALOG_UPLOAD_PREVIEW},t.createElement(Y.A,{type:"file-image",size:"inherit",className:"p-add_custom_emoji_dialog__icon block "})),Wt}renderUploadedFileText(){const{fileName:pt}=this.state;let Dt;return pt?Dt=t.createElement("div",{className:"margin_bottom_25 p-add_custom_emoji_dialog__filename"}," ",pt," "):Dt=t.createElement("div",{className:"sk_foreground_max margin_bottom_25"}," ",mt.t("Select an image")," "),Dt}render(){const{goButtonIsPending:pt}=this.state,Dt=this.shouldPreventSubmit();return t.createElement(t.Fragment,null,t.createElement(o.$m,null,t.createElement(o.qf,{"data-qa":`${Yt.ADD_DIALOG}_body`},this.renderDialogMessage())),t.createElement(o.jl,null,t.createElement(o.ox,null,t.createElement(o.s_,{type:"outline"},mt.t("Cancel")),t.createElement(B.lV,{type:"primary",onClick:this.onSubmit,loading:pt,disabled:Dt,"data-qa":`${Yt.ADD_DIALOG}_go`},mt.t("Save")))))}constructor(pt){super(pt),this.fileInput=t.createRef(),this.checkIfEmojiNameAlreadyExistsImmediate=Dt=>{this.props.getEmojiInfo({name:Dt}).then(()=>{this.state.newEmojiName===Dt&&this.setState(()=>({nameErrorText:mt.t("An emoji with this name already exists. Check if the existing emoji is a duplicate, or try a different name.")}))}).catch(de.A)},this.checkIfEmojiNameAlreadyExists=(0,Ie.A)(this.checkIfEmojiNameAlreadyExistsImmediate,200),this.state={uploadedImage:null,newEmojiName:this.props.emojiNameSuggestion,fileName:"",previewImageUrl:this.props.emojiUrl||"",placeholder:!0,nameErrorText:"",apiErrorText:null,imagePreviewError:!1,goButtonIsPending:!1},this.fileInput=t.createRef(),this.eventId=pt.clientApp?Ce.EventId.ADD_CUSTOM_EMOJI_IN_CLIENT:Ce.EventId.PAGE_CUSTOMIZE_EMOJI,(0,ce.v)(this,["onEmojiNameChange","onTextFocus","onTextBlur","onUploadChange","onImagePreviewError","onSubmit","renderUploadedFileText","renderUploadPreview","renderUploadImagePrompt","renderPlaceholderText","renderChooseNamePrompt","renderDialogMessage","renderToastMessage","renderErrorMessage","renderImagePreview","fileUpload","onDrop","onDragOver","maybeLoadEmojiPreviewFromUrl","maybeRenderDuplicateNameErrorPreview"])}},"AddCustomEmojiDialogContent");nn.displayName="AddCustomEmojiDialogContent",nn.defaultProps={standardEmojiData:{},addCustomEmoji:de.A,enqueueToast:de.A,clientApp:!1,closeModal:de.A,getEmojiInfo:de.A,searchArgs:{},emojiNameSuggestion:"",experimentAddEmojiFiletypesGroupOn:!1,windowRef:(0,ft.O)(window)};const jt=u(tt=>({addCustomEmoji:pt=>tt((0,vt.l)(pt)),enqueueToast:function(){for(var pt=arguments.length,Dt=new Array(pt),Wt=0;Wt<pt;Wt++)Dt[Wt]=arguments[Wt];return tt((0,re.M)(...Dt))},closeModal:()=>tt((0,c.O)()),getEmojiInfo:function(){for(var pt=arguments.length,Dt=new Array(pt),Wt=0;Wt<pt;Wt++)Dt[Wt]=arguments[Wt];return tt(Ye(...Dt))}}),"mapDispatchToProps"),gn=u(tt=>({standardEmojiData:(0,Te.O)(tt),clientApp:(0,Z.TZ)(tt),clogger:(0,j.e)({state:tt})}),"mapStateToProps"),on=(0,_e.N)(gn,jt)((0,Lt.A)(nn));var Xt=e(1194535350),rn=e(4318855015),Zt=e(5510392579),Ht=e(9236644324),Bt=e(6105929840),Qt=e(5305906809);const sn=new h.Ay("custom_emoji_list"),Mn=u(tt=>{let{adding:pt,name:Dt}=tt;const Wt=(0,n.wA)();return t.createElement(R.Ay,{onCloseComplete:()=>{pt&&Wt((0,rn.su)())}},t.createElement("span",{"data-qa":"emoji-pack-action"},pt&&sn.rt("The {name} emoji pack has been added to your workspace.",{name:t.createElement("b",null,Dt)}),!pt&&sn.rt("The {name} emoji pack has been removed from your workspace.",{name:t.createElement("b",null,Dt)})))},"InstallToast");Mn.displayName="InstallToast";const ct=u(tt=>{let{name:pt,url:Dt,index:Wt,copyToClipboard:zt,onClose:ln}=tt;const Tn=(0,n.wA)(),cn=t.createElement(W.Ay,{showTooltip:!0,text:pt,url:Dt,emojiSize:W.lw.LARGE});function hn(){(0,Ht.x3)(pt),ln&&ln(),Tn((0,c.O)()),Tn((0,re.M)({element:t.createElement(R.Ay,null,t.createElement("span",null,sn.rt("Emoji copied to clipboard",{name:pt})))}))}return u(hn,"onClick"),hn.displayName="onClick",zt&&(0,Ht.tD)()?t.createElement(L.A,{className:"p-emoji_pack_details__button","data-color-index":Wt%Qt.dX,onClick:hn},cn):cn},"EmojiButton");ct.displayName="EmojiButton";const yt=u(tt=>{let{collectionId:pt,name:Dt,author:Wt,installed:zt,emoji:ln,onCancelClick:Tn,onClose:cn}=tt;const hn=(0,n.wA)(),Cn=(0,s.d4)(Zt.h3),[_n,Vn]=(0,t.useState)(!1),Wn=(0,t.useCallback)(()=>{Vn(!0),hn((0,Xt._J)({collectionId:pt,reason:"emojiPack:dialog"})).then(()=>{Vn(!1),cn&&cn(),hn((0,c.O)()),hn((0,re.M)({element:t.createElement(Mn,{adding:!0,name:Dt})}))})},[hn,pt,Dt,cn]),[kn,Pn]=(0,t.useState)(!1),$t=(0,t.useCallback)(()=>{Pn(!0),hn((0,Xt.zx)({collectionId:pt,reason:"emojiPack:dialog"})).then(()=>{Pn(!1),cn&&cn(),hn((0,c.O)()),hn((0,re.M)({element:t.createElement(Mn,{adding:!1,name:Dt})}))})},[hn,pt,Dt,cn]);if(!ln)return null;const $n=(0,F.A)(ln,(ke,Xe)=>({name:Xe,url:ke})).map((ke,Xe)=>({...ke,index:Xe})),De=(0,E.A)($n,5),Ne=sn.t("{emojiCount, plural, =1 {# emoji} other {# emoji}}",{emojiCount:(0,g.A)(ln)}),Me=sn.t("by {author}",{author:Wt}),Be=t.createElement(t.Fragment,null,t.createElement("span",{className:"p-emoji_pack_details__subtitle_author"},Me),Ne),ue=t.createElement(Bt.A,{"aria-label":sn.t("Go back"),icon:"chevron-large-left",onClick:()=>Tn()});return t.createElement("div",{className:"p-emoji_pack_details"},t.createElement(o.rQ,null,t.createElement(o.Rc,{icon:ue,title:Dt,subtitle:Be})),t.createElement(o.$m,{className:"p-emoji_pack_details__content"},t.createElement(o.qf,null,De.map(ke=>t.createElement("div",{key:ke.map(Xe=>Xe.name).join("-details-"),className:"p-emoji_pack_details__emoji_row"},ke.map(Xe=>t.createElement(ct,{key:`emoji-pack-details-${Xe.name}`,name:`:${Xe.name}:`,url:Xe.url,index:Xe.index,copyToClipboard:zt,onClose:cn})),[...new Array(5-ke.length)].map((Xe,dt)=>`emoji-pack-details-spacer-${dt}`).map(Xe=>t.createElement("div",{key:Xe,className:"p-emoji_pack_details__emoji_spacer"})))))),t.createElement(o.jl,null,zt&&(0,Ht.tD)()&&t.createElement("span",{className:"p-emoji_pack_details__tip"},sn.t("Click an emoji to copy to clipboard")),t.createElement(o.ox,null,zt&&Cn&&t.createElement(B.lV,{autoFocus:!0,type:"danger",loading:kn,onClick:$t},sn.t("Remove pack")),!zt&&t.createElement(B.lV,{autoFocus:!0,loading:_n,onClick:Wn},sn.t("Add pack")))))},"EmojiPackDetails");yt.displayName="EmojiPackDetails";const Rt=yt;var xe=e(1655938719);const Nt=new h.Ay("custom_emoji_list"),Ft={CUSTOM:"custom",PACKS:"packs"},qt=u(tt=>{let{orgName:pt="",searchArgs:Dt={},showEmojiPacks:Wt,initialTab:zt=Ft.CUSTOM,emojiNameSuggestion:ln="",emojiUrl:Tn,megaphoneEventOnClose:cn}=tt;const hn=(0,n.wA)(),Cn=(0,s.d4)(U=>(0,v._Z)(U,"add_emoji_filetypes")==="on"),[_n,Vn]=(0,t.useState)(zt),[Wn,kn]=(0,t.useState)(!1),[Pn,$t]=(0,t.useState)(null),$n=Tn?Nt.t("Add emoji to your organization"):void 0,De=Wt?Nt.t("Add emoji"):Nt.t("Add custom emoji"),Ne=$n??De,Me=Nt.t("Emoji packs"),Be=Nt.t("Custom emoji"),ue=(0,t.useMemo)(()=>[{title:Be,id:Ft.CUSTOM,onClick:()=>Vn(Ft.CUSTOM),"data-qa":"add_emoji_dialog_tab_custom"},{title:Me,id:Ft.PACKS,onClick:()=>Vn(Ft.PACKS),"data-qa":"add_emoji_dialog_tab_packs"}],[Be,Me]),ke=(0,t.useCallback)(()=>{cn&&hn((0,xe.iR)({event:{type:cn}}))},[hn,cn]),Xe=(0,t.useCallback)(()=>{ke(),hn((0,c.O)())},[hn,ke]),dt=Wt&&_n===Ft.PACKS,bt=Wt?t.createElement(r.A,{tabs:ue,currentTabId:_n,className:"p-add_custom_emoji_dialog__tabs"}):null,be=(0,a.A)("p-add_emoji_dialog",{"p-add_emoji_dialog--without_tabs":!Wt});return Wt&&Pn?t.createElement(o.dW,{closeModal:Xe,isOpen:!0,className:be},t.createElement(Rt,{collectionId:l(Pn),name:(0,_.M)(Pn),author:d(Pn),emoji:Wn?m(Pn):(0,i.H)(Pn),installed:Wn,onCancelClick:()=>{$t(null)},onClose:ke})):t.createElement(o.dW,{overlayClassName:"p-add_emoji_dialog_overlay",closeModal:Xe,isOpen:!0,className:be},t.createElement(o.rQ,null,t.createElement(o.Rc,{title:Ne,className:"no_min_height padding_bottom_50"}),bt),dt&&t.createElement(he,{orgName:pt,onPackClick:(U,V)=>{let{installed:ne}=V;kn(ne),$t(U)}}),!dt&&t.createElement(on,{orgName:pt,searchArgs:Dt,emojiNameSuggestion:ln,emojiUrl:Tn,experimentAddEmojiFiletypesGroupOn:Cn}))},"AddEmojiDialog");qt.displayName="AddEmojiDialog";const un=qt},5331686899:(z,A,e)=>{"use strict";e.d(A,{lw:()=>F,Ay:()=>w});var t=e(7752974446),n=e.n(t),s=e(3134334389),a=e(9418991940),c=e(9391594207),o=e(5255740490),r=e(2047021170),l=e(8525228540),_=e(8847766420),d=e(3829348308),i=e(3043682041),m=e(9599231336),h=e(735940183),v=e(8556787853),y=e(5799716058),T=e(4921059838),I=e(6795568989),p=e(3695531806),g=e(1563996154),E=e(1610251172),f=e(796111729);function O(){return O=Object.assign||function(J){for(var G=1;G<arguments.length;G++){var X=arguments[G];for(var te in X)Object.prototype.hasOwnProperty.call(X,te)&&(J[te]=X[te])}return J},O.apply(this,arguments)}u(O,"_extends");function C(J){return class extends s.PureComponent{componentDidCatch(G,X){this.setState(()=>({hasError:!0})),(0,f.Wo)().error({label:"Error rendering emoji component",error:G,message:X})}render(){return this.state.hasError?s.createElement("span",{"data-qa":"missing_emoji",className:"c-emoji c-emoji__medium c-emoji--inline"},s.createElement("img",{src:n()})):s.createElement(J,O({},this.props))}constructor(G){super(G),this.state={hasError:!1}}}}u(C,"withEmojiErrorBoundary"),C.displayName="withEmojiErrorBoundary";const M=C;var D=e(9580887194),P=e(8021873188),k=e(9936232041);function x(){return x=Object.assign||function(J){for(var G=1;G<arguments.length;G++){var X=arguments[G];for(var te in X)Object.prototype.hasOwnProperty.call(X,te)&&(J[te]=X[te])}return J},x.apply(this,arguments)}u(x,"emoji_extends");const F={SMALL:"small",MEDIUM:"medium",LARGE:"large",LARGER:"larger",XLARGE:"xlarge"},W=u(J=>{const G=(0,a.d4)(X=>{if(!J.isStandard)return J.url;var te;const le=(te=J.sourceTeamId)!==null&&te!==void 0?te:(0,_.ZT)(X);return J.isStandard?(0,d.Ez)(X,{text:J.text||"",teamId:le,emojiMode:(0,i.w)(X,{forceDisplay:!!J.forceDisplay}),emojiSize:F.XLARGE}):J.url});return s.createElement(Y,{shouldFallbackOnLoadError:!0,renderAsText:!1,showTooltip:!1,emojiSize:F.LARGER,text:J.text,displayText:J.displayText,url:G||"",sourceTeamId:J.sourceTeamId,ariaLabel:J.ariaLabel,alt:J.alt,unicode:J.unicode,emojiNameFromText:J.emojiNameFromText,dispatch:J.dispatch,stopAnimations:J.stopAnimations,fallbackUrl:J.fallbackUrl,isStandard:J.isStandard})},"EmojiTooltipEmoji");W.displayName="EmojiTooltipEmoji";let Y=u(class extends s.PureComponent{onLoadError(){this.setState(()=>({isLoadError:!0}))}renderIconFallback(){return s.createElement(E.A,{legacy:!0,className:"c-emoji__text_mode_icon",type:"info-circle",align:"top",inherit:!0})}isImportable(){const{isLoadError:G}=this.state,{isImportAllowed:X,isStandard:te}=this.props;return X&&!te&&!G}renderEmojiElement(){const{text:G,displayText:X,url:te,emojiSize:le,isEmojiInlineWithText:ve,className:Q,shouldFallbackOnLoadError:Ae,fallbackUrl:ae,ariaLabel:he,alt:_e}=this.props,{isLoadError:ee}=this.state,de=(0,o.A)("c-emoji",`c-emoji__${le}`,Q,{"c-emoji--inline":ve}),Ie=he??(X&&(0,y.A)(X)),ce={"data-stringify-type":"emoji","data-stringify-emoji":G},j=this.isImportable()?this.handleEmojiImport:void 0;return ve?s.createElement("span",{className:de,"data-qa":(ee||!te)&&Ae?"emoji-fallback":"emoji"},s.createElement("img",x({src:(ee||!te)&&Ae?ae:te,onError:this.onLoadError,onContextMenu:j,"aria-label":Ie,alt:X},ce))):s.createElement("img",x({src:(ee||!te)&&Ae?ae:te,onError:this.onLoadError,"aria-label":Ie,alt:_e??X,className:de,onContextMenu:j,"data-qa":(ee||!te)&&Ae?"emoji-fallback":"emoji"},ce))}renderUnicodeAsEmoji(G){if(G&&(0,I.d)(G)){const{emojiSize:X}=this.props,te=(0,p.z)({codePointLikeString:G});return s.createElement("span",{className:(0,o.A)("c-emoji__unicode",{"c-emoji__unicode--large":X===F.LARGE})},te)}}renderTooltip(){const{renderAsText:G,displayText:X,text:te,isStandard:le,url:ve,unicode:Q,sourceTeamId:Ae,ariaLabel:ae,alt:he,emojiNameFromText:_e,stopAnimations:ee,fallbackUrl:de,forceDisplay:Ie}=this.props;if(G)return X;const ce=le?void 0:ve;return s.createElement(s.Fragment,null,s.createElement("div",{className:"c-emoji__emoji-tooltip"},s.createElement(W,{text:te,displayText:X,url:ce,sourceTeamId:Ae,ariaLabel:ae,alt:he,unicode:Q,emojiNameFromText:_e,dispatch:this.props.dispatch,stopAnimations:ee,fallbackUrl:de,isStandard:le,forceDisplay:Ie})),X,this.isImportable()&&s.createElement(P.K,{emojiName:X,emojiUrl:ve}))}render(){const{displayText:G,url:X,renderAsText:te,showTooltip:le,iconInTextMode:ve,renderEmojiFallback:Q,unicode:Ae,emojiNameFromText:ae}=this.props;if(!X&&!G&&!Ae)return null;if((te||!X)&&!Q&&!Ae)return ve?this.renderIconFallback():G;if(Ae&&!ae){var he;return(he=this.renderUnicodeAsEmoji(Ae))!==null&&he!==void 0?he:G}return le?s.createElement(g.Ay,{tip:this.renderTooltip,delay:g.PK,zIndex:"above_fs"},this.renderEmojiElement()):this.renderEmojiElement()}constructor(G){super(G),this.handleEmojiImport=X=>{if(X!=null&&X.altKey)return;const{url:te,dispatch:le,displayText:ve}=this.props;le((0,D.a)({emojiName:ve,emojiUrl:te,event:X}))},this.onLoadError=this.onLoadError.bind(this),this.renderTooltip=this.renderTooltip.bind(this),this.state={isLoadError:!1}}},"Emoji");Y.displayName="Emoji",Y.defaultProps={text:"",showTooltip:!1,className:void 0,stopAnimations:!1,iconInTextMode:!1,url:void 0,emojiSize:F.MEDIUM,isEmojiInlineWithText:!1,isImportAllowed:!1,displayText:"",sourceTeamId:void 0,shouldFallbackOnLoadError:!1,renderEmojiFallback:!1,ariaLabel:void 0,alt:void 0};const S=u((J,G)=>{const{stopAnimations:X,forceDisplay:te,emojiSize:le=F.MEDIUM,url:ve,unicode:Q}=G;let{text:Ae}=G,ae=(0,d.qJ)(J,Q??"");ae&&ae.charAt(ae.length-1)!==":"&&ae.charAt(0)!==":"&&(ae=`:${ae}:`),Ae=ae||Ae||"";let he=ve;const _e=(0,_.ZT)(J)||"",ee=!(0,r.ty)(J,"a11y_animations"),de=X||ee,Ie=(0,h.Yp)({teamOrEnterpriseId:_e,recalc:!1}),ce=(0,l.bR)({state:J,locale:Ie,name:Ae}),j=!te&&(0,m.P)(J),N=(0,k.A)(Ae),b=(0,T.R)(J,N);if(!j&&!he){const B=(0,i.w)(J,{forceDisplay:!!te});var R;const $=(R=G.sourceTeamId)!==null&&R!==void 0?R:_e;he=(0,d.Ez)(J,{text:Ae,parsedEmoji:N,teamId:$,emojiMode:B,emojiSize:le===F.LARGER?F.XLARGE:le})||void 0}if(de&&!b){var K;he=(K=(0,v.Ay)(J,{url:he,stopAnimations:de,isEmoji:!0}))!==null&&K!==void 0?K:void 0}return{text:Ae,url:he,renderAsText:j,emojiSize:le,displayText:ce||"",stopAnimations:de,fallbackUrl:n(),isStandard:b,emojiNameFromText:ae}},"mapStateToProps"),L={mapStateToProps:S},w=M((0,c.N)(S)(Y))},1030162945:(z,A,e)=>{"use strict";e.d(A,{Ay:()=>n,lw:()=>t.lw});var t=e(5331686899);const n=t.Ay},8980195295:(z,A,e)=>{"use strict";e.d(A,{A:()=>f});var t=e(3134334389),n=e(9391594207),s=e(5255740490),a=e(3879245650),c=e(4887323608),o=e(4724591729),r=e(735940183),l=e(6084388622),_=e(8739505998),d=e(796111729),i=e(2786906754),m=e(9190452268),h=e(6968387112),v=e(6220662016),y=e(2229064554),T=e(8022922400),I=e(6338445630);const p=new r.Ay("error_boundary"),g="REB";let E=u(class extends t.Component{componentDidUpdate(C){this.state.hasError&&C.id!==this.props.id&&this.resetHasError()}componentDidCatch(C,M){let D=null;try{D=`${g}${(0,a.B)((0,T.A)(C.message)).substr(0,9).toUpperCase()}`}catch{}if(this.setState(()=>({hasError:!0,errCode:D}),()=>{var P,k;return(k=(P=this.props).onError)===null||k===void 0?void 0:k.call(P,C)}),!(0,o.Cu)()){const P=M.componentStack.split(`
`).slice(0,Error.stackTraceLimit).join(`
`);this.props.logger.error("ERROR-BOUNDARY",C,D,P,{subtype:this.props.subtype||"component_error_boundary"})}}onClickReloadButton(C){C.preventDefault();let M=window.location.href;this.props.telemeter.count("react_error_boundary_reload_click"),(0,c.A)()?(M=(0,i.M6)(window.location.href,"force_cold_boot",1),this.props.logger.info("GANTRY",`Reloading at ${M} after hitting ErrorBoundary`),(0,I.Lz)().finally(()=>{window.location.href=M})):(this.props.logger.info("LEGACY",`Reloading at ${M} after hitting ErrorBoundary`),window.location.href=M)}resetHasError(){this.setState(()=>({hasError:!1,errCode:null}))}renderReloadLinkMsg(){const C=u(M=>{let{text:D,key:P}=M;return t.createElement(_.A,{href:`https://${(0,h.qF)()}/help/contact`,rel:"noopener noreferrer",key:P},D)},"renderLink");return this.state.errCode==="REBD7A8C1099"?p.rt("This particular hiccup is something we know about and are working to fix. Please reload and things should be cleared up. If this issue persists, please <a>drop us a line.</a>",{fallbackHash:"e429542887f26442dba7a085bd05bea15803edd9",fallbackHashNs:"error_boundary"},C):p.rt("Reloading Slack might clear things up. If it doesn\u2019t, <a>drop us a line.</a>",null,C)}render(){if(this.state.hasError){if(this.props.telemeter.count("react_error_boundary_rendered"),this.props.renderError)return this.props.renderError({errCode:this.state.errCode});const C=(0,s.A)("p-error_boundary",this.props.className,{"p-error_boundary--short":this.props.variant==="short"});return t.createElement("div",{className:C},t.createElement("div",{className:"p-error_boundary__content"},t.createElement("div",{className:"p-error_boundary__message"},t.createElement("h1",{className:"p-error_boundary__heading"},t.createElement("span",null,p.t("Something went wrong")),t.createElement("span",{className:"p-error_boundary__icon p-error_boundary__icon--turtle",role:"img","aria-label":p.t("Something went wrong")},"\u{1F422}")),t.createElement("p",{className:"p-error_boundary__contact_msg"},this.renderReloadLinkMsg())),this.state.errCode&&t.createElement(y.A,{errCode:this.state.errCode}),t.createElement(l.Ay,{type:"primary",className:"margin_right_50",onClick:this.onClickReloadButton,"data-qa":"error_reload"},p.t("Reload"))))}return this.props.children}constructor(C){super(C),this.state={hasError:!1,errCode:null},this.onClickReloadButton=this.onClickReloadButton.bind(this)}},"ErrorBoundary");E.displayName="ErrorBoundary";const f=(0,n.N)(O=>({logger:(0,v.A)(O)?(0,d.Ay)({state:O}):(0,d.Wo)(),telemeter:(0,v.A)(O)?(0,m.Cy)({state:O}):(0,m.rh)()}))(E)},2229064554:(z,A,e)=>{"use strict";e.d(A,{A:()=>a});var t=e(3134334389),n=e(735940183);const s=new n.Ay("error_boundary");function a(c){let{errCode:o}=c;return t.createElement("p",{className:"p-error_boundary__error_code_container"},t.createElement("span",{className:"p-error_boundary__error_code","data-qa":"error_code"},s.t("Error: "),o))}u(a,"ErrorCode")},3837503631:(z,A,e)=>{"use strict";e.d(A,{H:()=>o,A:()=>r});var t=e(8980195295),n=e(3134334389);function s(){return s=Object.assign||function(l){for(var _=1;_<arguments.length;_++){var d=arguments[_];for(var i in d)Object.prototype.hasOwnProperty.call(d,i)&&(l[i]=d[i])}return l},s.apply(this,arguments)}u(s,"_extends");const a=u(()=>null,"renderError"),o=u(l=>n.createElement(t.A,s({renderError:a},l)),"QuietErrorBoundary"),r=t.A},8022922400:(z,A,e)=>{"use strict";e.d(A,{A:()=>_});const t=/\bA[A-Z0-9]{8,}\b/g,n=/\bB[A-Z0-9]{8,}\b/g,s=/\b(C|G|D)[A-Z0-9]{8,}\b/g,a=/\bF[A-Z0-9]{8,}\b/g,c=/\b(U|W)[A-Z0-9]{8,}\b/g,o=/\b[\d]{10}\.[\d]{6}\b/g,r=/\bS[A-Z0-9]{8,}\b/g,l=/\bT[A-Z0-9]{8,}\b/g;function _(d){return String(d).replace(t,"[APP_ID]").replace(n,"[BOT_ID]").replace(s,"[CHANNEL_ID]").replace(a,"[FILE_ID]").replace(c,"[MEMBER_ID]").replace(o,"[MESSAGE_TS]").replace(r,"[USER_GROUP_ID]").replace(l,"[TEAM_ID]")}u(_,"normalizeError")},5141066605:(z,A,e)=>{"use strict";e.d(A,{A:()=>c});var t=e(735940183),n=e(5549390246),s=e(4761125736);const a=new t.Ay("files");function c(o,r){if(!o.is_external)return null;if((0,s._Z)(r,"file_consistency")==="treatment"){let _="File";switch(o.external_type){case"gdrive":switch(o.filetype){case"gsheet":_=a.t("Google Sheet");break;case"gdoc":_=a.t("Google Doc");break;case"gpres":_=a.t("Google Slide");break;case"gdraw":_=a.t("Google Drawing");break;default:_=a.t("Google {fileType}",{fileType:o.pretty_type})}break;case"dropbox":case"box":case"onedrive":case"app":_=a.t("{fileType}",{fileType:o.pretty_type});break;default:_=a.t("File")}return _}switch(o.external_type){case"gdrive":switch(o.filetype){case"gsheet":return a.t("Spreadsheet from Google Drive");case"gdoc":return a.t("Document from Google Drive");case"gpres":return a.t("Presentation from Google Drive");case"gdraw":return a.t("Drawing from Google Drive");default:return a.t("{fileType} from Google Drive",{fileType:o.pretty_type})}case"dropbox":return a.t("{fileType} from Dropbox",{fileType:o.pretty_type});case"box":return a.t("{fileType} from Box",{fileType:o.pretty_type});case"onedrive":return a.t("{fileType} from OneDrive",{fileType:o.pretty_type});case"app":return a.t("{fileType} from {appName}",{fileType:o.pretty_type,appName:(0,n.Y)(r,o)||""});default:return a.t("File")}}u(c,"getExternalFiletypeDescription")},8642919232:(z,A,e)=>{"use strict";e.d(A,{A:()=>r});var t=e(9706240641),n=e.n(t),s=e(1031947056),a=e(8950789382),c=e(8677230210);const o=(0,s.Ay)("Opens a member profile in a tile",function(){var l=(0,t.coroutine)(function*(_,d,i){(0,c.wC)(d(),i)&&_((0,a.s)({viewId:"rimeto_profile",params:{memberId:i}}))});return function(_,d,i){return l.apply(this,arguments)}}());o.meta={name:"createThunk",key:"createThunkopenProfileInWindow",description:"Opens a member profile in a tile"};const r=o},6565762531:(z,A,e)=>{"use strict";e.d(A,{A:()=>t});function t(n){return!!(n&&n!=="-")}u(t,"isValidFieldValue")},7969928607:(z,A,e)=>{"use strict";e.d(A,{A:()=>r});var t=e(3134334389),n=e(5734673180),s=e(647040695),a=e(1030162945),c=e(6818330210);function o(l){let{text:_="",inputIsEscaped:d=!1,emojiSize:i=a.lw.SMALL,showTooltips:m=!0,stopAnimations:h=!1,emojiDisplayInfo:v={}}=l;const y=[];let T=0;const I=d?(0,n.A)(_??""):_??"";if(I.replace((0,s.A)(),(p,g,E)=>{if(E>T){const C=I.slice(T,E);y.push(t.createElement(t.Fragment,{key:`${E}-${C}`},C))}const{name:f=p,url:O=void 0}=(0,c.H)(p,v);return y.push(t.createElement(a.Ay,{text:f,emojiSize:i,key:`${E}-${f}`,showTooltip:m,stopAnimations:h,isEmojiInlineWithText:!0,url:O})),T=E+p.length,""}),!y.length)return t.createElement(t.Fragment,null,I);if(T<I.length){const p=I.substr(T);y.push(t.createElement(t.Fragment,{key:`last-${p}`},p))}return t.createElement(t.Fragment,null,y)}u(o,"FormatTextWithEmoji"),o.displayName="FormatTextWithEmoji";const r=t.memo(o)},6159136815:(z,A,e)=>{"use strict";e.d(A,{A:()=>o});var t=e(3134334389),n=e(5734673180),s=e(7969928607);const a=/\ue000([^\ue001]*)\ue001/g;function c(r){let{text:l="",inputIsEscaped:_=!1,showTooltips:d=!0,stopAnimations:i=!1}=r;const m=[];let h=0;const v=_?(0,n.A)(l??""):l??"";if(v.replace(a,(y,T,I)=>{if(I>h){const p=v.slice(h,I);m.push(t.createElement(s.A,{key:`${I}-${p}`,text:p,showTooltips:d,inputIsEscaped:_,stopAnimations:i}))}m.push(t.createElement("span",{className:"c-mrkdwn__highlight",key:`${I}-${T}`},t.createElement(s.A,{text:T,showTooltips:d,inputIsEscaped:_,stopAnimations:i}))),h=I+y.length}),!m.length&&l)return t.createElement(t.Fragment,null,t.createElement(s.A,{text:l,showTooltips:d,inputIsEscaped:_,stopAnimations:i}));if(l&&h<l.length){const y=v.substr(h);m.push(t.createElement(s.A,{key:`last-${y}`,text:y,showTooltips:d,inputIsEscaped:_,stopAnimations:i}))}return t.createElement(t.Fragment,null,m)}u(c,"FormatTextWithHighlightMarkers"),c.displayName="FormatTextWithHighlightMarkers";const o=t.memo(c)},1743656885:(z,A,e)=>{"use strict";e.d(A,{A:()=>n});var t=e(8951118047);const n=t.A},8481467080:(z,A,e)=>{"use strict";e.d(A,{A:()=>h,U:()=>y});var t=e(9552526132),n=e(2927826522),s=e(796111729),a=e(3398586081);const c=u(T=>{const{functionTriggerId:I,workflowId:p,title:g,description:E,isWorkflowApp:f,salesHomeWorkflowAppType:O,owningTeamId:C,developerTraceId:M,botUserId:D,appCollaborators:P,appId:k,shareUrl:x}=(0,n.t)(T);return{triggerId:I,workflowId:p,title:g,description:E,isWorkflowApp:f,salesHomeWorkflowAppType:O,owningTeamId:C,developerTraceId:M,botUserId:D,appCollaborators:P,appId:k,shareUrl:x}},"getCommonMetadataFromBlock"),o=u(T=>T.url?{...c(T),triggerType:t.M.Shortcut,url:T.url}:{...c(T),triggerType:t.M.Shortcut,url:""},"createLinkShortcutFromBlock"),r=u(T=>({...c(T),triggerType:t.M.Webhook}),"createWebhookShortcutFromBlock"),l=u(T=>({...c(T),triggerType:t.M.External}),"createExternalShortcutFromBlock"),_=u(T=>({...c(T),triggerType:t.M.Service,serviceName:T.serviceName}),"createServiceShortcutFromBlock"),d=u(T=>{const{triggerSubtype:I}=T,p={eventType:I||""};return{...c(T),triggerType:t.M.Event,event:p}},"createEventShortcutFromBlock"),i=u(T=>c(T),"createUnknownShortcutFromBlock"),m=u(T=>{const I={startTime:""};return{...c(T),triggerType:t.M.Scheduled,schedule:I}},"createScheduledShortcutFromBlock"),h=u(T=>{switch(T.triggerType){case t.M.Event:return d(T);case t.M.Scheduled:return m(T);case t.M.Shortcut:return o(T);case t.M.Webhook:return r(T);case t.M.External:return l(T);case t.M.Service:return _(T);case void 0:return o(T);default:return i(T)}},"createShortcutFromBlock"),v=u(T=>{try{return JSON.stringify(T)}catch(I){throw(0,s.Wo)().error("stringify failed for workflow/trigger obj shortcut info"),I}},"memoizeCacheKeyResolver"),y=(0,a.A)(h,v)},3799600789:(z,A,e)=>{"use strict";e.d(A,{V:()=>I,j:()=>y});var t=e(3398586081),n=e(3126601217),s=e(9552526132),a=e(2927826522),c=e(796111729),o=e(3906734293);const r=u((p,g,E)=>{var f,O,C,M;return{triggerId:(p==null?void 0:p.id)||"",workflowId:(p==null?void 0:p.workflow.workflow_id)||(g==null?void 0:g.id),isWorkflowPublished:(p==null||(f=p.workflow_details)===null||f===void 0?void 0:f.is_published)||(g==null?void 0:g.is_published),appId:(p==null?void 0:p.workflow.app_id)||((O=p==null?void 0:p.workflow.app)===null||O===void 0?void 0:O.id),app:p==null?void 0:p.workflow.app,inputs:p==null?void 0:p.inputs,owningTeamId:p==null?void 0:p.owning_team_id,isWorkflowApp:(C=p==null?void 0:p.workflow.app)===null||C===void 0?void 0:C.is_workflow_app,salesHomeWorkflowAppType:(M=p==null?void 0:p.workflow.app)===null||M===void 0?void 0:M.sales_home_workflow_app_type,title:(p==null?void 0:p.name)||(p==null?void 0:p.workflow.title)||(g==null?void 0:g.title)||(E==null?void 0:E.title),description:(p==null?void 0:p.description)||(p==null?void 0:p.workflow.description)||(g==null?void 0:g.description)||(E==null?void 0:E.description),appCollaborators:(g==null?void 0:g.collaborators)||(E==null?void 0:E.appCollaborators),shareUrl:(p==null?void 0:p.share_url)||(E==null?void 0:E.shareUrl)}},"getCommonMetadataFromTriggerAndWorkflow"),l=u((p,g,E)=>({...r(p,g,E),triggerType:s.M.Shortcut,url:p.shortcut_url}),"createLinkShortcut"),_=u((p,g,E)=>({...r(p,g,E),triggerType:s.M.Webhook}),"createWebhookShortcut"),d=u((p,g,E)=>({...r(p,g,E),triggerType:s.M.External}),"createExternalShortcut"),i=u((p,g,E)=>{const{eventType:f,channelIds:O,teamIds:C,filter:M}=(0,a.t)(p),D={eventType:f,channelIds:O,teamIds:C,filter:M};return{...r(p,g,E),triggerType:s.M.Event,event:D}},"createEventShortcut"),m=u((p,g,E)=>{const f=(0,a.t)(p.schedule);return{...r(p,g,E),triggerType:s.M.Scheduled,schedule:f}},"createScheduledShortcut"),h=u((p,g,E)=>{var f,O,C;return{...r(p,g,E),triggerType:s.M.Service,serviceName:(C=(O=p==null||(f=p.service_config)===null||f===void 0?void 0:f.function.app)===null||O===void 0?void 0:O.name)!==null&&C!==void 0?C:""}},"createServiceShortcut"),v=u((p,g,E)=>r(p,g,E),"createUnknownShortcut"),y=u(p=>{let{passedShortcutInfo:g,trigger:E,workflow:f}=p;return(0,o.G)(E)?(0,n.BI)(E)?l(E,f,g):(0,n.QW)(E)?i(E,f,g):(0,n.uS)(E)?m(E,f,g):(0,n.A4)(E)?d(E,f,g):(0,n.cS)(E)?_(E,f,g):(0,n.O4)(E)?h(E,f,g):v(E,f,g):v(void 0,f,g)},"createShortcutFromTriggerAndWorkflow"),T=u(p=>{try{return JSON.stringify(p)}catch(g){throw(0,c.Wo)().error("stringify failed for workflow/trigger obj shortcut info"),g}},"memoizeCacheKeyResolver"),I=(0,t.A)(y,T)},8808892924:(z,A,e)=>{"use strict";e.d(A,{i:()=>P});var t=e(3134334389),n=e(7562930286),s=e(5255740490),a=e(7715417323),c=e(3391133100),o=e(9418991940),r=e(8847766420),l=e(3288846409),_=e(6533394955),d=e(6470070112),i=e(4775127335),m=e(1563996154),h=e(5286203919),v=e(1766818988),y=e(9548972574),T=e(8683010724),I=e(543174729);const p=t.memo(k=>{let{id:x}=k;return t.createElement("svg",{className:"sr-only"},t.createElement("clipPath",{id:x,clipPathUnits:"objectBoundingBox"},t.createElement("path",{d:"M0.03,1 h0.742 a0.258,0.2,0,0,0,0.258,-0.2 V0.2 a0.258,0.2,0,0,0,-0.258,-0.2 H0.03 a0.385,0.299,0,0,1,0.098,0.2 v0.6 A0.385,0.299,0,0,1,0.03,1"})))});var g=e(1407713935),E=e(9101533895),f=e(796111729);function O(){return O=Object.assign||function(k){for(var x=1;x<arguments.length;x++){var F=arguments[x];for(var W in F)Object.prototype.hasOwnProperty.call(F,W)&&(k[W]=F[W])}return k},O.apply(this,arguments)}u(O,"_extends");const C=2;function M(k){let{channelId:x,withTooltip:F,className:W,excludeIcon:Y,excludeMemberOverflowCount:S,maxMembers:L=C,avatarSize:w=i.RG.verySmall,includeChannelNameInTooltip:J=!1,excludeSelf:G=!1}=k;const X=(0,t.useMemo)(()=>`huddles-mask-${(0,c.r9)()}`,[]),te=(0,t.useMemo)(()=>({"--huddles-mask":`url(#${X})`,"--huddles-avatar-size":`${w}px`}),[X,w]),le=(0,o.d4)(R=>(0,d.pt)(R)||(0,v.s)(R)),ve=(0,o.d4)(R=>(0,E.OL)(R,x)),Q=(0,l.cw)(h.hc),Ae=(0,l.cw)(h.vO),he=Q===x&&(0,d.pZ)(Ae),_e=(0,o.Z2)(R=>(0,y.A7)(R,x,G)),ee=_e.length,de=ee>L,Ie=de?ee-2:0,ce=de?_e.slice(0,L):_e,j=(0,t.useMemo)(()=>{const R=J&&!(0,g.PC)(ve),K=t.createElement(I.A,{channelId:x,includeChannelName:R});return K||(0,f.Wo)().info("HUDDLE-FACEPILE",`channelId: ${x}, includeChannelName: ${R}`),K},[x,J,ve]);if(!le||!ee)return null;const N=t.createElement("div",{className:(0,s.A)("p-huddle_avatar_stack",W),"data-qa":"huddle_avatar_stack__avatars_container",style:te},t.createElement(p,{id:X}),!Y&&t.createElement("div",{className:"p-huddle_avatar_stack__icon_container"},t.createElement(T.A,{name:"headphones",size:"18"})),ce.map((R,K)=>t.createElement(i.Ay,{key:R,"data-qa":"huddle_avatar_stack__member",className:(0,s.A)("p-huddle_avatar_stack__avatar",{"p-huddle_avatar_stack__avatar--first":K===0}),userId:R,size:w,renderCustomBadge:a.A,isInteractive:!1})),!S&&de&&t.createElement("div",{className:"p-huddle_avatar_stack__plus-member-count","data-qa":"huddle_avatar_stack__plus_member_count"},`+${Ie}`)),b=F&&j?t.createElement(m.Ay,{tip:j},N):N;return he?null:b}u(M,"HuddleAvatarStackContent"),M.displayName="HuddleAvatarStackContent";const D=t.memo(M),P=t.memo(k=>{const{channelId:x}=k,F=(0,o.d4)(L=>(0,y.LY)(L,x)),W=(0,l.cw)(h.l4),Y=(0,l.cw)(h.hc),S=(0,o.d4)(r.ZT);if(!F)return null;if(Y===x){const L=(0,_.getStoreInstanceByTeamId)(W||S);return t.createElement(n.Kq,{store:L},t.createElement(D,O({},k)))}return t.createElement(D,O({},k))})},3496486794:(z,A,e)=>{"use strict";e.d(A,{A:()=>G,g:()=>w});var t=e(3134334389),n=e(735940183),s=e(9679390338),a=e.n(s),c=e(4553218033),o=e.n(c),r=e(5475210953),l=e.n(r),_=e(7485089530),d=e.n(_),i=e(3342291988),m=e.n(i),h=e(9631995895),v=e.n(h),y=e(5908540923),T=e.n(y),I=e(553949882),p=e.n(I),g=e(7000154057),E=e.n(g),f=e(1672115571),O=e.n(f),C=e(7234375712),M=e.n(C),D=e(4136357865),P=e.n(D),k=e(8514307482),x=e.n(k),F=e(5738074488),W=e.n(F),Y=e(3607863955),S=e.n(Y);const L=new n.Ay("huddles"),w=[{key:"NONE",preview:T()},{key:"BLUR",preview:T()},{key:"LIVING_ROOM",url:W(),preview:S()},{key:"REMOTE_WORK",url:P(),preview:x()},{key:"TOKYO_SIGHT",url:O(),preview:M()},{key:"GYM",url:p(),preview:E()},{key:"HOME",url:m(),preview:v()},{key:"OFFICE",url:l(),preview:d()},{key:"BEACH",url:a(),preview:o()}],G=u(()=>(0,t.useMemo)(()=>w.map(te=>{let le,ve;switch(te.key){case"NONE":le=L.t("No Background",{fallbackHash:"e47fc484f6e2f4bb4d93eff83f6dd16ed8da67a6",fallbackHashNs:"canvas"});break;case"BLUR":le=L.t("Blur",{fallbackHash:"900aa998d3550d438fc20a414d3938fc3a1630ab",fallbackHashNs:"canvas"});break;case"LIVING_ROOM":le=L.t("Living Room",{fallbackHash:"c7b60f3edf3318e80575d5e28c1ce24aa99a9025",fallbackHashNs:"canvas"}),ve=L.t("Art by Haley Tippmann",{fallbackHash:"e81e1f67d7c01d9dd464871bece52a2c87443190",fallbackHashNs:"canvas"});break;case"REMOTE_WORK":le=L.t("Remote Work",{fallbackHash:"42a38f6c51f22fed5086c12e2e747c90b17a2201",fallbackHashNs:"canvas"}),ve=L.t("Art by Hudson Christie",{fallbackHash:"4f5fdc61766b987aced4c5fc5854a0401f8e44ea",fallbackHashNs:"canvas"});break;case"TOKYO_SIGHT":le=L.t("Tokyo Sight",{fallbackHash:"eccff2285de126d6179c36b1fbc60c06b039a6e0",fallbackHashNs:"canvas"}),ve=L.t("Art by Luis Mendo",{fallbackHash:"4c1b393549c87100c23c7fe3e258fb7380736dfa",fallbackHashNs:"canvas"});break;case"GYM":le=L.t("Gym",{fallbackHash:"bc4359231d615dc65e372bac1bb5e0f2bf37639f",fallbackHashNs:"canvas"}),ve=L.t("Art by Hudson Christie",{fallbackHash:"4f5fdc61766b987aced4c5fc5854a0401f8e44ea",fallbackHashNs:"canvas"});break;case"HOME":le=L.t("Home",{fallbackHash:"70f8bb9a8a5393ef080507a89e4b98d139000d65",fallbackHashNs:"canvas"});break;case"OFFICE":le=L.t("Office",{fallbackHash:"6c3a72eaf6235dfa967f2bba4dfc3e431c3e1180",fallbackHashNs:"canvas"});break;case"BEACH":le=L.t("Beach",{fallbackHash:"911fbb65335023a0800e5bf4a2dcc3ff13b2f9e3",fallbackHashNs:"canvas"});break;default:le="NO_NAME",ve="NO_DESCRIPTION"}return{...te,name:le,description:ve}}),[]),"useGetVideoBackgrounds")},2457673737:(z,A,e)=>{"use strict";e.d(A,{LD:()=>a,O9:()=>c,Qs:()=>n,cg:()=>r,hX:()=>s});var t=e(4423055085);const n=450,s=450,a=25,c=500;let o;const r=u(()=>o||[s,n,a,c],"getHuddleCameraQualityConstants");(0,t.ul)("huddlesVideoConstants",{resetCameraQualityToDefaults:()=>{o=void 0},overrideCameraQuality:function(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:s,_=arguments.length>1&&arguments[1]!==void 0?arguments[1]:n,d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:a,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:c;o=[l,_,d,i]},maxOutCameraQuality:()=>{o=[1280,720,30,2500]}})},9680914051:(z,A,e)=>{"use strict";e.d(A,{$s:()=>ae,Bq:()=>C,CY:()=>M,Cu:()=>ve,K7:()=>g,Nh:()=>m,OC:()=>v,Pg:()=>le,Qp:()=>P,Rv:()=>Q,VD:()=>o,W_:()=>h,XG:()=>_e,aN:()=>I,aW:()=>a,bQ:()=>F,bW:()=>c,bv:()=>D,cJ:()=>L,cP:()=>y,ck:()=>i,dP:()=>_,dk:()=>d,iE:()=>r,ir:()=>f,ne:()=>W,oI:()=>Ae,pz:()=>p,qK:()=>l,qb:()=>T,qr:()=>s,sQ:()=>O,xA:()=>k,xN:()=>Y,xl:()=>x,xx:()=>S,yL:()=>he});var t=e(735940183);const n=new t.Ay("huddles"),s="huddle_start_mark",a="huddle_rooms_join_start_mark",c="huddle_rooms_join_end_mark",o="huddle_render_player_tti",r="huddle_time_rooms_join",l="huddle_time_audio_session_started",_="huddle_time_first_presence_received",d="huddle_time_chime_session_started_connecting",i="huddle_time_chime_session_started",m="huddle_time_audio_video_observer_start",h="huddle_time_meeting_session_initialized",v="huddle_time_you_joined_sound",y="huddle_time_free_willy_sdk_init",T="huddle_time_voice_focus_loaded",I="huddle_time_voice_focus_start_loading",p="huddle_time_voice_focus_loading_time",g="huddle_quick_join",E="huddle_quick_join_failure",f="huddle_quick_join_credentials_received",O="huddle_quick_join_credentials_cleared",C="huddle_chime_credentials_received_mark",M="huddle_chime_sdk_bootstrap_time",D="huddle_chime_voice_focus_init_time",P=150,k="connect_to_media_service",x="fetch_credentials",F="huddles:time_to_interactive",W="huddles_metrics",Y="reconnect_count",S="reconnect_count:success",L="reconnect_count:failure",w="start_attempt",J="huddles:start_attempt",G="start_huddle",X="huddles:no_audio_input",te="no_audio_input",le="A01",ve="prog_disc_huddles_explainer_tip_text",Q=u(ee=>{let{experimentHuddlesLoungeMusicPlayerGroupOn:de}=ee;return[{label:de?n.t("Right when I join"):"",value:1,key:"when_joining"},{label:de?n.t("After 30 seconds"):"",value:30,key:"after_30_secs"},{label:de?n.t("After 1 minute"):"",value:60,key:"after_1_min"}]},"getMusicTimeoutPickerOptions"),Ae=u(ee=>{let{experimentIsStandaloneHuddlesZChannelGroupOn:de}=ee;return[{label:de?n.t("Only people in your org"):"",value:"org_access",key:"org_access",subtext:de?n.t("Within your org, people in your workspace can join automatically. Other workspaces must request."):""},{label:de?n.t("By request only"):"",value:"knock_access",key:"knock_access",subtext:de?n.t("Everyone must knock, including people who are invited."):""}]},"getCalendarHuddleInvitePreferences"),ae=50,he=250,_e=50},5203103513:(z,A,e)=>{"use strict";e.d(A,{Mz:()=>s,NY:()=>a,VW:()=>n,_q:()=>t});const t="huddles_play_music_when_last",n="huddles_play_music_timeout",s="huddles_music_player_song_key",a="calendar_huddles_default_access_policy"},3622858354:(z,A,e)=>{"use strict";e.d(A,{A:()=>c});var t=e(3134334389),n=e(7969928607),s=e(1030162945);const a=u(o=>{let{text:r,emojiSize:l=s.lw.SMALL}=o;return t.createElement(t.Fragment,null,t.createElement(n.A,{text:r,emojiSize:l}))},"FormattedHuddleTopic");a.displayName="FormattedHuddleTopic";const c=a},7723800688:(z,A,e)=>{"use strict";e.d(A,{Ay:()=>i,Hi:()=>_,uV:()=>d});var t=e(3134334389),n=e(8300007136),s=e(9418991940),a=e(3288846409),c=e(6251210828),o=e(8239363237),r=e(5286203919),l=e(6470070112),_;(function(m){m.CANVAS_OPEN="canvas_open",m.CANVAS_JOIN="canvas_join",m.CANVAS_LEAVE="canvas_leave",m.CANVAS_TOOLBAR="canvas_toolbar",m.EMOJI_PICKER_OPEN="emoji_picker_open",m.EMOJI_SENT="emoji_sent",m.LINK_OPEN="link_open",m.FOCUS_OPEN="focus_open",m.FOCUS_CLOSE="focus_close",m.MINI_PLAYER_THREAD_BUTTON="mini_player_thread_button",m.MINI_PLAYER_OPEN_WINDOW_BUTTON="mini_player_open_window_button",m.MINI_PLAYER_VIEW_START="mini_player_view_start",m.MINI_PLAYER_VIEW_END="mini_player_view_end",m.SCREENSHARE_START="screenshare_start",m.SCREENSHARE_END="screenshare_end",m.THREAD_FLEXPANE_VIEW_START="thread_flexpane_view_start",m.THREAD_FLEXPANE_VIEW_END="thread_flexpane_view_end",m.THREAD_WINDOW_VIEW_START="thread_window_view_start",m.THREAD_WINDOW_VIEW_END="thread_window_view_end",m.THREAD_OPEN="thread_open",m.THREAD_CLOSE="thread_close",m.SELF_VIDEO="self_video",m.WINDOW_COMPACT_VIEW_START="window_compact_view_start",m.WINDOW_COMPACT_VIEW_END="window_compact_view_end",m.WINDOW_FULL_VIEW_START="window_full_view_start",m.WINDOW_FULL_VIEW_END="window_full_view_end",m.WINDOW_RESIZE_BUTTON="window_resize_button",m.BACKGROUND_CHANGED="background_changed",m.JUKEBOX_SONG_SELECTED="huddles_jukebox_song_selected",m.JUKEBOX_STOP_MUSIC="huddles_jukebox_stop_music",m.CAPTIONS_START="huddles_captions_start",m.CAPTIONS_STOP="huddles_captions_stop",m.INVITATION_SENT="invitation_sent",m.MUSIC_PLAYER_STARTED="huddles_music_player_start_music",m.MUSIC_PLAYER_SONG_SELECTED="huddles_music_player_song_selected",m.MUSIC_PLAYER_STOP="huddles_music_player_stop_music",m.NOTES_OPEN="notes_open",m.NOTES_CLOSE="notes_close",m.CHANNEL_SPACE_OPEN="channel_space_open",m.CHANNEL_SPACE_CLOSE="channel_space_close",m.CHANNEL_SPACE_AUTO_OPEN="channel_space_auto_open"})(_||(_={}));var d;(function(m){m.HUDDLE_MINI_PLAYER_BADGE_ICON="huddle_mini_player_badge_icon",m.HUDDLE_MINI_PLAYER_SCREENSHARE="huddle_mini_player_screenshare",m.HUDDLE_MINI_PLAYER_PEER_TILES="huddle_mini_player_peer_tiles",m.HUDDLE_MINI_PLAYER_OVERFLOW_BUTTON="huddle_mini_player_overflow_button",m.HUDDLE_MINI_PLAYER_OPEN_WINDOW_BUTTON="huddle_mini_player_open_window_button",m.HUDDLE_MINI_PLAYER_THREAD_BUTTON="huddle_mini_player_thread_button",m.CANVAS_WINDOW="canvas_window",m.LEAVE_CALL="leave_call",m.CLOSE_MODAL="close_modal",m.EMOJI_PICKER="emoji_picker",m.JUKEBOX_MENU="jukebox_menu",m.JUKEBOX_MUSIC_BANNER="jukebox_menu_banner",m.REACTION_BUBBLE="reaction_bubble",m.CHANGE_BACKGROUND_DIALOG="change_background_dialog",m.CONNECT_WITH_HUDDLES_CANVAS_EDUCATION="connect_with_huddles_canvas_education",m.HUDDLE_MINI_PLAYER_MUSIC_PLAYER="huddle_music_player",m.HUDDLE_WINDOW_MUSIC_PLAYER="huddle_window_music_player"})(d||(d={}));function i(){const m=(0,a.cw)(r.E9),h=(0,s.Z2)(g=>(0,l.$t)(g,{huddleId:m})),v=(0,a.cw)(l.kn,n.bN),y=(0,a.cw)(l.UE,n.bN),T=(0,s.d4)(g=>(0,c.Ec)(g,{huddleId:m})),I=(0,s.d4)(o.Tk);return(0,t.useMemo)(()=>({canvasThreadChannelId:h.canvas_thread_channel_id,canvasThreadId:h.canvas_thread_id,canvasHuddleSessionId:v.canvas_huddle_session_id,callsRoomId:y.room_id,callsChannelId:y.channel_id,uiPage:T?T.toString():null,fileId:I}),[h.canvas_thread_channel_id,h.canvas_thread_id,v.canvas_huddle_session_id,y.room_id,y.channel_id,T,I])}u(i,"useHuddleClogContext")},4233000497:(z,A,e)=>{"use strict";e.d(A,{A:()=>c,H:()=>a});var t=e(3134334389),n=e(9418991940),s=e(6470070112),a;(function(o){o.HUDDLES_SCHEDULED_ADD="huddles_scheduled_add",o.HUDDLES_SCHEDULED_NUX="huddles_scheduled_nux",o.HUDDLES_SCHEDULED_CANCEL="huddles_scheduled_cancel"})(a||(a={}));function c(o){const r=(0,n.Z2)(l=>o?(0,s.w1)(l,o):{});return(0,t.useMemo)(()=>({callsChannelId:r.channel_id,callsChannelType:r.channel_type,callsNumParticipants:r.num_participants,callsRoomId:r.room_id}),[r.channel_id,r.channel_type,r.num_participants,r.room_id])}u(c,"useHuddlesClogContext")},4385664584:(z,A,e)=>{"use strict";e.d(A,{A:()=>c});var t=e(3134334389),n=e(7562930286),s=e(5950652755);const a=u(o=>{let{store:r,children:l}=o;const _=(0,t.useMemo)(()=>({...r,subscribe:d=>r.subscribeImmediate((0,s.A)(d,16))}),[r]);return t.createElement(n.Kq,{store:_}," ",l," ")},"BackgroundableProvider");a.displayName="BackgroundableProvider";const c=a},543174729:(z,A,e)=>{"use strict";e.d(A,{A:()=>f,z:()=>E});var t=e(3134334389),n=e(9418991940),s=e(4394722864),a=e(9548972574),c=e(1766818988),o=e(4742719639),r=e(5795074931),l=e(4775127335),_=e(3622858354),d=e(6470070112),i=e(3534324375),m=e(8701485242),h=e(735940183),v=e(9101533895),y=e(9289081806),T=e(796111729);const I=new h.Ay("huddles"),p=5,g=8,E=u(O=>{let{channelId:C}=O;const M=(0,n.Z2)(x=>(0,a.A7)(x,C,!1)),D=M.length,P=D>p,k=P?M.slice(0,p):M;return D===0?null:t.createElement("div",{className:"p-huddle_channel_tooltip__avatar_stack"},k.map((x,F)=>{const W=F===k.length-1;return t.createElement("div",{key:x,className:"p-huddle_channel_tooltip__avatar_container",style:{width:W?"auto":l.RG.medium-g}},t.createElement(l.Ay,{className:"p-huddle_channel_tooltip__avatar",userId:x,size:l.RG.medium,renderCustomBadge:s.Q,isInteractive:!1,additionalOverlay:P&&W?D-k.length+1:void 0}))}))},"HuddleTooltipAvatarStack");E.displayName="HuddleTooltipAvatarStack";function f(O){let{channelId:C,includeChannelName:M=!1}=O;const D=(0,n.d4)(te=>(0,v.OL)(te,C)),P=(0,n.d4)(te=>{const le=(0,d.Bn)(te,D),ve=(0,c.s)(te),Q=le||ve;return Q||(0,T.Wo)().info("HUDDLE-FACEPILE",`isHuddlesEnabled: ${Q}, doesChannelSupportHuddles: ${le}, isHuddlesEnabledForSponsoredTeam: ${ve}`),Q}),k=(0,n.d4)(r.WR),x=(0,n.Z2)(te=>(0,a.ft)(te,C)),F=(0,n.d4)(d.df),W=(0,y.Mn)(D),Y=x.length,L=Y>p?x.slice(0,p):x,w=(0,n.Z2)(te=>L.map(le=>({id:le.id,name:le.id===k?I.t("you",{fallbackHash:"8af56de68279cb6f5ed022f31af18b9fcdcc2e92",fallbackHashNs:"a11y"}):(0,i.sE)(te,le)})).sort((le,ve)=>le.id===k?1:ve.id===k?-1:(0,m.Ay)(le.name,ve.name)).map(le=>{let{name:ve}=le;return ve})),J=(0,n.d4)(te=>(0,o.o)(te,C)),G=(0,t.useMemo)(()=>M?w.length===1?x[0].id===k?I.rt("Just you in the huddle #{channelName}",{fallbackHash:"9c06151657f5f165820e8137ffe359a9f128d6a4",channelName:W}):I.rt("{name} is in the huddle #{channelName}",{name:w[0],fallbackHash:"296abf823386caa202e6d84323121c5454a50ff0",channelName:W}):I.rt("{memberCount} people in the huddle #{channelName}",{memberCount:Y,fallbackHash:"d8a4c5ef1bc88840241821fced733296db51cc36",channelName:W}):w.length===1?x[0].id===k?I.rt("Just you in the huddle"):I.rt("{name} is in the huddle",{name:w[0]}):I.rt("{memberCount} people in the huddle",{memberCount:Y}),[M,w,Y,W,x,k]);let X=J!=null&&J.trim()?t.createElement(_.A,{text:J}):null;return x.length>=F&&(X=I.t("Only {maxParticipants} people can join a huddle",{maxParticipants:F})),P?t.createElement("div",{className:"p-huddle_channel_tooltip"},t.createElement(E,{channelId:C}),t.createElement("div",{className:"margin_bottom_25","data-qa":"tooltip_action_text"},X),t.createElement("div",{className:"c-tooltip__subtitle","data-qa":"tooltip_member_text"},G)):null}u(f,"HuddleChannelTooltip")},9477894139:(z,A,e)=>{"use strict";e.d(A,{A:()=>_,g:()=>l});var t=e(3134334389),n=e(8300007136),s=e(5253428843),a=e(9712681361),c=e(3837503631),o=e(2825968873);const r=(0,o.tZ)("HUDDLE-ERROR");var l;(function(d){d.Huddles="huddles",d.Sidebar="huddles_pro_max-sidebar",d.Flexpane="huddles_pro_max-flexpane",d.CompactWindow="huddles_pro_max-compact_window",d.LargeWindow="huddles_pro_max-large_window",d.WindowFooter="huddles_pro_max-window_footer",d.AlertBanner="huddles_pro_max-alert_banner",d.InviteWindow="huddles_invite_window",d.ControlStripButton="huddles_control_strip_button",d.ChannelHeader="huddles_channel_header",d.Composer="huddles_composer",d.HuddleSpecialReactions="huddle_special_reactions"})(l||(l={}));function _(d){let{children:i,onError:m,isQuiet:h=!0,shouldStopHuddle:v=!1,subtype:y=l.Huddles}=d;const T=(0,n.wA)(),I=(0,t.useCallback)(()=>{v&&T((0,s.A)({terminalState:a.M6.ClientUIError}))},[T,v]),p=(0,t.useCallback)(E=>{r.error(`${y} ${E}`),m?m():I()},[I,m,y]),g=h?c.H:c.A;return t.createElement(g,{subtype:y,onError:p},i)}u(_,"HuddleErrorBoundary")},1917715832:(z,A,e)=>{"use strict";e.d(A,{A:()=>D});var t=e(3134334389),n=e(8300007136),s=e(462591818),a=e(9418991940),c=e(825587348),o=e(8739505998),r=e(6470070112),l=e(9712681361),_=e(735940183),d=e(5363983309),i=e(9101533895),m=e(9289081806),h=e(5881236351),v=e(5286203919),y=e(3037015781),T=e(2350349607),I=e(3288846409),p=e(5332875232),g=e(3677514771),E=e(6839188756);const f=new _.Ay("huddles");function O(P){let{errorCode:k,isJoinError:x,closeModal:F}=P;var W;const Y=(0,n.wA)(),S=(W=(0,I.cw)(v.Qn))===null||W===void 0?void 0:W.channelId,L=(0,a.d4)(p.TM),w=(0,a.d4)(de=>(0,i.OL)(de,S)),J=(0,a.d4)(de=>(0,y.uz)(w)?(0,m.SB)(de,w,{publicChannelIncludeHashSign:!1,imIncludeAtSign:!1}):void 0),G=(0,a.d4)(r.df),X=f.rt("This huddle already has {maxAmount} people, which is the maximum allowed.",{maxAmount:G}),te=(0,t.useCallback)(()=>{Y((0,h.RX)())},[Y]),le=(0,t.useCallback)(()=>{Y((0,h.e$)())},[Y]),ve=(0,T.V)(w),Q=(0,a.d4)(g.H7),Ae=u(de=>t.createElement(o.A,{target:"_blank",href:`${(0,E.Zl)(Q)}help/requests/new`},de),"renderContactUsLink");if(!(0,a.d4)(r.pl)&&!L)return null;if(k===l.M6.FreemiumMaxParticipants)return te(),null;const he=(()=>{switch(k){case l.M6.MaxParticipants:return X;case l.M6.AudioJoinedFromAnotherDevice:return f.rt("To keep things nice and neat, you\u2019re no longer in the huddle here.");case l.M6.ChimeMeetingEnded:return x?f.rt("The Huddle has ended."):ve?f.rt("We ended the huddle since you were the only one there for a bit."):f.rt("We ended your huddle since you were the only one there for a bit.");case l.M6.PermissionDenied:return L?f.rt("You are unable to join the Huddle as you do not have permission to join Huddles."):null;case s.uZ.CallEnded:return f.rt("The Huddle has ended.");case l.M6.DeviceLocked:return f.rt("When your computer locks, you automatically leave any huddle you\u2019re in. You can change this in <a>Preferences</a>.",null,de=>{let{text:Ie,tag:ce}=de;return ce==="a"?t.createElement(o.A,{onClick:le},Ie):null});case l.M6.FailedStartingRecording:case l.M6.FailedResumingRecording:return f.rt("We\u2019re not sure what went wrong, but try giving it another go in a few minutes.");case l.M6.FailedStartingRecordingUser:case l.M6.FailedResumingRecordingUser:return f.rt("It looks like not everyone on this huddle has access to this feature just yet.");case l.M6.FailedPausingRecording:return f.rt("We\u2019re not sure what went wrong, but please give it another go. If this continues to be an issue, you can try deleting the notes, or <a>contact us</a> for support.",null,de=>{let{text:Ie,tag:ce}=de;return ce==="a"?Ae(Ie):null});case l.M6.FailedDeletingRecording:return f.rt("We\u2019re not sure what went wrong, but please give it another go. If this continues to be an issue, you can try ending the huddle and deleting the canvas once it\u2019s ready, or <a>contact us</a> for support.",null,de=>{let{text:Ie,tag:ce}=de;return ce==="a"?Ae(Ie):null});default:return f.rt("You\u2019ll have to go back and give it another try.")}})(),_e=(()=>x?f.t("Can\u2019t join the huddle"):k===l.M6.AudioJoinedFromAnotherDevice?f.t("You\u2019ve joined the huddle on a different device"):k===l.M6.ChimeMeetingEnded&&!x?ve?f.t("You\u2019re no longer in a huddle in #{channelDisplayName}",{channelDisplayName:J}):f.t("You\u2019re no longer in a huddle"):k===l.M6.DeviceLocked?f.t("You\u2019re no longer in a huddle"):k===l.M6.FailedStartingRecording||k===l.M6.FailedStartingRecordingUser?f.rt("Couldn\u2019t start Slack AI notes"):k===l.M6.FailedResumingRecording||k===l.M6.FailedResumingRecordingUser?f.rt("Couldn\u2019t resume Slack AI notes"):k===l.M6.FailedPausingRecording?f.rt("Couldn\u2019t stop Slack AI notes"):k===l.M6.FailedDeletingRecording?f.rt("Couldn\u2019t delete Slack AI notes"):f.t("Something went wrong with your huddle"))(),ee=(()=>k===l.M6.AudioInputStreamEnded||k===l.M6.MaxParticipants||k===l.M6.ChimeMeetingEnded&&!x?f.t("Got It"):f.t("OK"))();return t.createElement(c.A,{overlayClassName:"p-huddle_error_modal__overlay",onClose:F,onSubmit:F,showCancelButton:!1,showSubmitButton:!0,title:_e,submitButtonText:ee},he)}u(O,"HuddleErrorModal"),O.displayName="HuddleErrorModal";const C={HuddleErrorModal:O},M="huddle_error_modal",D=(0,d.A)(O,{modalName:M,allowMultiple:!1,isStackable:!0})},5933621899:(z,A,e)=>{"use strict";e.d(A,{Wx:()=>w,YM:()=>F});var t=e(2003990933),n=e(3134334389),s=e(8300007136),a=e(735940183),c=e(9418991940),o=e(825587348),r=e(5363983309),l=e(1407713935),_=e(9101533895),d=e(8661826718),i=e(8286248123),m=e(1779488764),h=e.n(m),v=e(7268021173),y=e(3677514771),T=e(6839188756),I=e(8871937520),p=e(6244014364),g=e(4481313819),E=e(7003004874),f=e(6259241484),O=e(4902318931),C=e(2938177083),M=e(1273480023);function D(){return D=Object.assign||function(J){for(var G=1;G<arguments.length;G++){var X=arguments[G];for(var te in X)Object.prototype.hasOwnProperty.call(X,te)&&(J[te]=X[te])}return J},D.apply(this,arguments)}u(D,"_extends");const P=new a.Ay("huddles"),k={elementName:"cancel",onClick:{enableClogAction:!0}},x={elementName:"start-huddle",onClick:{enableClogAction:!0}},F=u(J=>{let{channelId:G,channelType:X,channelMembersCount:te,isTeamOnTrial:le,isFreeTeam:ve,trialExpirationTS:Q,handleOnSubmit:Ae,closeModal:ae,UNSAFE_parentSelector:he,isCurrentTeamSponsoredInSlackConnectChannel:_e=!1}=J;const ee=P.t("Continue this conversation in a huddle",{fallbackHash:"e5dda045c4edc7e85d1a347f7051533c494e1904"}),de=n.createElement(d.A,{channelId:G});let Ie,ce;switch(X){case l.Cu.mpim:le?(Ie=P.rt("Use this message as a jumping off point for a huddle with anyone in this conversation. Huddles with more than 2 people are a paid feature, available with your free trial through {trialEndDate}.",{trialEndDate:(0,I.Pd)(Q),fallbackHash:"2955534d96227983f0f85447fb8f3f044131c94f"}),ce=p.UiComponentVariant.TRIAL_TEAM):ve?(Ie=P.rt("Use this message as a jumping off point for a huddle. On the free version of Slack, one other person from the conversation will be able to join."),ce=p.UiComponentVariant.FREE_TEAM):(Ie=P.rt("Use this message as a jumping off point for a huddle. All <strong>{channelMembersCount}</strong> members of this conversation will be able to join.",{channelMembersCount:te}),ce=p.UiComponentVariant.PAID_TEAM);break;case l.Cu.im:Ie=P.t("Use this message as a jumping off point for a huddle.",{fallbackHash:"563c2f46cf094d773cfedd52e582a385faea3753"});break;default:le&&!_e?(Ie=P.rt("Use this message as a jumping off point for a huddle with anyone in <strong>{channelName}</strong>. Huddles with more than 2 people are a paid feature, available with your free trial through {trialEndDate}.",{channelName:de,trialEndDate:(0,I.Pd)(Q)}),ce=p.UiComponentVariant.TRIAL_TEAM):ve&&!_e?(Ie=P.rt("Use this message as a jumping off point for a huddle. On the free version of Slack, one other person from <strong>{channelName}</strong> will be able to join.",{channelName:de}),ce=p.UiComponentVariant.FREE_TEAM):(Ie=P.rt("Use this message as a jumping off point for a huddle. All <strong>{channelMembersCount}</strong> members of <strong>{channelName}</strong> will be able to join.",{channelMembersCount:te,channelName:de}),ce=p.UiComponentVariant.PAID_TEAM)}return n.createElement(g.A,{uiComponentName:p.UiComponentName.HUDDLES_IN_THREAD_SPEEDBUMP,eventId:p.EventId.CANVAS_EVENT,uiComponentVariant:ce},n.createElement(o.A,{onClose:ae,"data-qa":"huddle_in_thread_speed_bump_modal",submitButtonText:P.t("Start Huddle",{fallbackHash:"d9a37dbb2c259a1534d34ec9a94d2e9013f7b445"}),title:ee,onSubmit:Ae,submitAutoClogProps:x,onCancel:ae,cancelAutoClogProps:k,headerImageSrc:h(),className:"p-huddle_in_thread_speed_bump_modal",headerImageAlt:P.t("Brainstorm, make decisions or have a lightweight catch-up with whoever\u2019s online."),UNSAFE_parentSelector:he},n.createElement("p",{className:"p-huddle_in_thread_speed_bump_modal__body_text",id:"huddle-in-thread-speed-bump-modal-body-text"},Ie)))},"BaseHuddleInThreadSpeedBumpModalBase");F.displayName="BaseHuddleInThreadSpeedBumpModalBase";const W=u(J=>{let{channelId:G,onConfirm:X,closeModal:te}=J;const le=(0,s.wA)(),ve=(0,c.d4)(ce=>(0,_.OL)(ce,G)),Q=(0,l.mz)(ve),Ae=(0,c.d4)(ce=>(0,i.q8)(ce,G)),ae=(0,t.A)(Ae,"counts.member_count")||0,he=(0,T.tc)((0,c.d4)(y.H7)),_e=(0,c.d4)(v.iH),ee=(0,c.d4)(v.Sk),de=(0,c.d4)(ce=>(0,M.u)(ce,ve));(0,n.useEffect)(()=>(le((0,E.A)({notificationName:f.ze.HUDDLE_FROM_THREAD_EDUCATIONAL_MODAL,action:f.hw.IMPRESSION})),()=>{le((0,C.A)({spaceName:f.xu.LAUNCH_MODAL,action:f.hw.DISMISS}))}),[le]);const Ie=(0,n.useCallback)(()=>{X(),te==null||te()},[te,X]);return n.createElement(F,{channelType:Q,channelMembersCount:ae,isFreeTeam:he,isTeamOnTrial:_e,trialExpirationTS:ee,handleOnSubmit:Ie,channelId:G,onConfirm:X,closeModal:te,isCurrentTeamSponsoredInSlackConnectChannel:de})},"HuddleInThreadSpeedBumpModalBase");W.displayName="HuddleInThreadSpeedBumpModalBase";const Y={spaceName:f.xu.LAUNCH_MODAL,notifications:{[f.ze.HUDDLE_FROM_THREAD_EDUCATIONAL_MODAL]:{component:W}}},S=u(J=>{let{channelId:G,onConfirm:X,closeModal:te}=J;return n.createElement(O.Ay,D({},Y,{channelId:G,onConfirm:X,closeModal:te}))},"HuddleInThreadSpeedBumpModal");S.displayName="HuddleInThreadSpeedBumpModal";var L=null;const w=(0,r.A)(S)},7843142872:(z,A,e)=>{"use strict";e.d(A,{D7:()=>i,Lk:()=>v,Vp:()=>y,g6:()=>h});var t=e(3134334389),n=e(1031947056),s=e(6533394955),a=e(4423055085),c=e(8300007136),o=e(9418991940),r=e(5492559860),l=e(9719951405),_=e(2832209848);let d=1;const i=u((T,I)=>{let{experimentHuddlesDiscoveryCallsGroupTreatment:p=!1,component:g=_.G7.HuddleCallNudgesBanner}=I;if(!p||!(0,l.kI)(T,g,_.X8.Click)&&!(0,l.kI)(T,g,_.X8.Dismiss))return!1;var E;const f=(E=(0,l.ky)(T,g,_.X8.Click))!==null&&E!==void 0?E:0;var O;const C=(O=(0,l.ky)(T,g,_.X8.Dismiss))!==null&&O!==void 0?O:0;return!(f>=d||C>=d)},"shouldShowHuddleDiscoveryBanner"),m=u(function(){let{experimentHuddlesDiscoveryCallsGroupTreatment:T=!1,component:I=UiComponent.HuddleCallNudgesBanner}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{experimentHuddlesDiscoveryCallsGroupTreatment:!1,component:UiComponent.HuddleCallNudgesBanner};const p=useDispatch();useEffect(()=>{T&&p(loadUserInteractions({interactions:[{component:I,type:InteractionType.Click},{component:I,type:InteractionType.Dismiss}],useCache:!0,cacheFilter:hasLoadedInteraction,reason:"huddle-discovery-calls"}))},[p,T,I])},"useHuddleDiscoveryCallsUserInteractions"),h=(0,n.Ay)("Send interaction to dismiss nudge",(T,I,p)=>{let{experimentHuddlesDiscoveryCallsGroupTreatment:g,interactionType:E}=p;if(!g)return;const f=I();(0,l.ky)(f,_.G7.HuddleCallNudgesBanner,E)>d||T((0,r.z)({component:_.G7.HuddleCallNudgesBanner,type:E,reason:"huddle-discovery-calls"}))});h.meta={name:"createThunk",key:"createThunkincrementUserInteractionCount",description:"Send interaction to dismiss nudge"};const v=u(T=>{let{component:I,type:p}=T;const g=(0,c.wA)();return(0,t.useEffect)(()=>{g((0,r.b)({interactions:[{component:I,type:p}],reason:I}))},[g,I,p]),(0,o.d4)(E=>(0,l.kI)(E,I,p)?(0,l.PU)(E,I):null)},"useTrialProBannerInteraction"),y=(0,n.Ay)("Record trial pro banner interaction",(T,I,p)=>{let{component:g,type:E}=p;return T((0,r.z)({component:g,type:E,reason:g}))});y.meta={name:"createThunk",key:"createThunkrecordTrialProBannerInteraction",description:"Record trial pro banner interaction"},(0,a.ul)("huddleInteractionUtils",{addOneMoreThanClickCount:T=>{const I=(0,s.getStateByTeamId)(T);d=(0,l.ky)(I,_.G7.HuddleCallNudgesBanner,_.X8.Click)+1},addOneMoreThanDismissCount:T=>{const I=(0,s.getStateByTeamId)(T);d=(0,l.ky)(I,_.G7.HuddleCallNudgesBanner,_.X8.Dismiss)+1}})},8330768070:(z,A,e)=>{"use strict";e.d(A,{G$:()=>P,Oe:()=>W,Y6:()=>x});var t=e(3134334389),n=e(8300007136),s=e(3037015781),a=e(9418991940),c=e(8661826718),o=e(6496493732),r=e(7138682671),l=e(3989454579),_=e(4481313819),d=e(1407713935),i=e(5363983309),m=e(5795074931),h=e(9101533895),v=e(8286248123),y=e(9289081806),T=e(8798294025),I=e(8921478798),p=e(6244014364),g=e(735940183),E=e(387484329),f=e(2047021170);function O(){return O=Object.assign||function(Y){for(var S=1;S<arguments.length;S++){var L=arguments[S];for(var w in L)Object.prototype.hasOwnProperty.call(L,w)&&(Y[w]=L[w])}return Y},O.apply(this,arguments)}u(O,"_extends");const C=new g.Ay("huddles"),M={elementName:"huddles_confirmation_dialog_ok",eventId:p.EventId.HUDDLES_JOIN_CONFIRM,onClick:{enableClogAction:!0}},D={elementName:"huddles_confirmation_dialog_cancel",eventId:p.EventId.HUDDLES_JOIN_CANCEL,onClick:{enableClogAction:!0}},P=u(Y=>{let{children:S,closeModal:L,onConfirm:w,uiComponentName:J,...G}=Y;const X=(0,t.useCallback)(()=>{w(),L==null||L()},[L,w]);return t.createElement(_.A,{uiComponentName:J,eventId:p.EventId.HUDDLES_CONFIRM_DIALOG_SHOWN,clogImpression:!0},t.createElement(o.A,O({overlayClassName:"p-huddle_join_modal__overlay","data-qa":"huddle_join_modal",onCancel:L,onClose:L,onSubmit:X,submitButtonText:C.t("OK"),submitAutoClogProps:M,cancelAutoClogProps:D},G),S))},"HuddleJoinModal");P.displayName="HuddleJoinModal";const k=u(Y=>{let{prevChannelId:S,nextChannelId:L,onConfirm:w,closeModal:J}=Y;const G=(0,a.d4)(Ae=>(0,h.OL)(Ae,S)),X=(0,a.Z2)(Ae=>{if(!G)return[];let ae=[];if((0,d.LI)(G))ae=[(0,T.e)(G)];else if((0,d.yz)(G)){const he=(0,y.Ug)(G);if(he&&he.length){const _e=(0,m.WR)(Ae);ae=he.filter(ee=>ee!==_e)}}return ae.map(he=>(0,I.I)(Ae,he))}),te=(0,a.d4)(Ae=>(0,h.OL)(Ae,L)),le=(0,a.Z2)(Ae=>{if(!te)return[];let ae=[];if((0,d.LI)(te))ae=[(0,T.e)(te)];else if((0,d.yz)(te)){const he=(0,y.Ug)(te);if(he&&he.length){const _e=(0,m.WR)(Ae);ae=he.filter(ee=>ee!==_e)}}return ae.map(he=>(0,I.I)(Ae,he))});let ve=C.rt("You\u2019re already in a huddle.");X.length?ve=C.rt("You\u2019re already in a huddle with {listOfPersons}.",{listOfPersons:(0,g.jd)(X).join("")}):G&&(0,s.uz)(G)&&(ve=C.rt("You\u2019re already in a huddle in {channel}.",{channel:t.createElement(c.A,{channel:G,channelId:S})}));let Q=C.rt("Would you like to leave it and join this one instead?");return le.length?Q=C.rt("Would you like to leave it and join a huddle with {listOfPersons} instead?",{listOfPersons:t.createElement("strong",null,(0,g.jd)(le).join(""))}):te&&(0,s.uz)(te)&&(Q=C.rt("Would you like to leave it and join a huddle in {channel} instead?",{channel:t.createElement("strong",null,t.createElement(c.A,{channel:te,channelId:L}))})),t.createElement(P,{uiComponentName:p.UiComponentName.HUDDLES_CONFIRMATION_DIALOG,title:C.t("Switch to this huddle?"),onConfirm:w,closeModal:J},t.createElement("p",null,ve," ",Q))},"HuddleSwitchModal");k.displayName="HuddleSwitchModal";const x=(0,i.A)(k),F=u(Y=>{let{channelId:S,onConfirm:L,closeModal:w}=Y;const J=(0,a.d4)(_e=>(0,h.OL)(_e,S));var G;const X=(0,a.d4)(_e=>{var ee,de;return(G=(ee=(0,v.q8)(_e,S))===null||ee===void 0||(de=ee.counts)===null||de===void 0?void 0:de.member_count)!==null&&G!==void 0?G:0}),te=(0,a.d4)(_e=>(0,f.ty)(_e,"huddles_show_shouty_rooster")),[le,ve]=(0,t.useState)(te),Q=(0,n.wA)(),Ae=J&&(0,s.uz)(J)&&t.createElement("strong",null,t.createElement(c.A,{channelId:S,channel:J})),ae=X>1?C.rt("You\u2019ll be starting a huddle that all {count} members of {channel} can join.",{count:t.createElement("strong",null,X),channel:Ae}):C.rt("You\u2019ll be starting a huddle that every member of {channel} can join.",{channel:Ae}),he=(0,t.useCallback)(()=>{const _e=!le;ve(_e),Q((0,E.AZ)({pref:"huddles_show_shouty_rooster",value:_e}))},[le,Q]);return t.createElement(P,{uiComponentName:p.UiComponentName.HUDDLES_SHOUTY_ROOSTER_DIALOG,title:C.t("Start a huddle in this channel?"),onConfirm:L,closeModal:w},t.createElement("p",null,ae),t.createElement(r.A,{text:C.t("Don\u2019t show this message again."),type:"inline",cursor:"pointer"},t.createElement(l.A,{name:"ns",checked:!le,onChange:he,"data-qa":"huddle_join_modal_show_checkbox"})))},"HuddleShoutyRoosterModal");F.displayName="HuddleShoutyRoosterModal";const W=(0,i.A)(F)},3143500799:(z,A,e)=>{"use strict";e.d(A,{A:()=>o});var t=e(3134334389),n=e(5255740490);const s=t.memo(r=>{let{className:l,iconClassName:_,allowMuteAnimation:d,wasMicEverEnabled:i,isMicStrikethroughRed:m}=r;return t.createElement("div",{className:(0,n.A)("p-huddle_mic_icon p-huddle_mic_icon__container",l),"data-qa":"huddle_mic_icon_unmute"},t.createElement("svg",{className:_,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},t.createElement("path",{d:"M5.35086 10.3436C5.12445 9.77312 5 9.15109 5 8.5V8.25C5 7.83579 4.66421 7.5 4.25 7.5C3.83579 7.5 3.5 7.83579 3.5 8.25V8.5C3.5 9.60794 3.7772 10.6511 4.26603 11.564L5.35086 10.3436ZM7.62904 14.554C8.36362 14.8419 9.16335 15 10 15C13.5899 15 16.5 12.0899 16.5 8.5V8.25C16.5 7.83579 16.1642 7.5 15.75 7.5C15.3358 7.5 15 7.83579 15 8.25V8.5C15 11.2614 12.7614 13.5 10 13.5C9.55549 13.5 9.12453 13.442 8.71427 13.3331L7.62904 14.554Z",fill:"currentColor"}),t.createElement("path",{d:"M10 14.25V17",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),t.createElement("path",{d:"M12.25 17.25L7.75 17.25",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),t.createElement("path",{d:"M12.1271 2.72031C11.5376 2.2685 10.8001 2 10 2C8.067 2 6.5 3.567 6.5 5.5V8.5C6.5 8.67302 6.51255 8.84311 6.5368 9.0094L8 7.3633V5.5C8 4.39543 8.89543 3.5 10 3.5C10.4175 3.5 10.8051 3.62793 11.1258 3.84674L12.1271 2.72031ZM9.90052 11.9986C9.93357 11.9995 9.96673 12 10 12C11.933 12 13.5 10.433 13.5 8.5V7.9492L9.90052 11.9986Z",fill:"currentColor"}),t.createElement("path",{className:(0,n.A)({"p-huddle_mic_icon__microphone--slash_animated":d&&i,"p-huddle_mic_icon__microphone--slash":m}),d:"M4 15.25L15.5 2.25",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})))}),a=t.memo(r=>{let{volumeLevel:l=0,className:_,iconClassName:d}=r;const[i,m]=(0,t.useState)(0);return(0,t.useEffect)(()=>{if(l!=="auto"){m(Math.min(1,l||0));return}const h=setInterval(()=>{const v=(Math.floor(Math.random()*100)+1)/100;m(v)},100);return()=>{clearInterval(h)}},[l]),t.createElement("div",{className:(0,n.A)("p-huddle_mic_icon p-huddle_mic_icon__container",_),"data-qa":"huddle_mic_icon_mute"},t.createElement("svg",{className:d,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},t.createElement("path",{className:"p-huddle_mic_icon__microphone--input_level",style:{transform:`scaleY(${i})`},d:"M10 11V3",stroke:"currentColor",strokeWidth:"4"}),t.createElement("path",{d:"M7.25 5.5C7.25 3.98122 8.48122 2.75 10 2.75V2.75C11.5188 2.75 12.75 3.98122 12.75 5.5V8.5C12.75 10.0188 11.5188 11.25 10 11.25V11.25C8.48122 11.25 7.25 10.0188 7.25 8.5V5.5Z",stroke:"currentColor",strokeWidth:"1.5"}),t.createElement("path",{d:"M4.25 8.25V8.5C4.25 11.6756 6.82436 14.25 10 14.25V14.25C13.1756 14.25 15.75 11.6756 15.75 8.5V8.25",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),t.createElement("path",{d:"M10 14.25V17",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),t.createElement("path",{d:"M12.25 17.25L7.75 17.25",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})))}),c=u(r=>{let{type:l,volumeLevel:_,className:d,iconClassName:i,allowMuteAnimation:m=!1,isMicStrikethroughRed:h=!1}=r;const[v,y]=(0,t.useState)(l==="unmuted");return(0,t.useEffect)(()=>{l==="unmuted"&&y(!0)},[l]),l==="unmuted"?t.createElement(a,{className:d,iconClassName:i,volumeLevel:_}):t.createElement(s,{className:d,iconClassName:i,allowMuteAnimation:m,wasMicEverEnabled:v,isMicStrikethroughRed:h})},"HuddleMicIcon");c.displayName="HuddleMicIcon";const o=t.memo(c)},5043394918:(z,A,e)=>{"use strict";e.d(A,{A:()=>o});var t=e(3134334389),n=e(7715417323),s=e(1829947126),a=e(1337358413),c=e(3143500799);function o(r){let{peerId:l,isMicrophoneEnabled:_,className:d,allowMuteIconAnimation:i=!1,isMicStrikethroughRed:m=!1}=r;const[h,v]=(0,t.useState)(0);return(0,t.useEffect)(()=>{if(!_)return n.A;const y=u(T=>{const I=(0,a.Ft)(T);v(I)},"onLevelUpdated");return s.A.subscribe(l,y),()=>{s.A.unsubscribe(l,y)}},[l,_]),t.createElement(c.A,{type:_?"unmuted":"muted",volumeLevel:h,className:d||"",allowMuteAnimation:i,isMicStrikethroughRed:m})}u(o,"HuddleMicVolumeIndicator")},438845125:(z,A,e)=>{"use strict";e.d(A,{A:()=>a});var t=e(3134334389),n=e(444524526);function s(c){let{slackId:o,displayName:r}=c;return!o&&!r?null:o?t.createElement(n.A,{isBold:!1,id:o}):t.createElement("span",null,r)}u(s,"HuddleMsgTextUser"),s.displayName="HuddleMsgTextUser";const a=s},2131614445:(z,A,e)=>{"use strict";e.d(A,{V:()=>ce});var t=e(3134334389),n=e(7120433284),s=e(9548972574),a=e(9418991940),c=e(735940183),o=e(5255740490),r=e(7914553163),l=e(1267040415),_=e(9706240641),d=e(1031947056),i=e(6323355797),m=e(2375333597),h=e(7268021173),v=e(5791262841),y=e(4761125736),T=e(9240394198),I=e(266169032),p=e(6244014364),g=e(1064007131);const E=new c.Ay("trials_highlight_paid_features"),f=u(j=>{let{isEligibleForTrial:N,promoType:b,promoSubtype:R,uiComponentVariant:K,uiPage:B}=j;const $=(0,a.d4)(Oe=>(0,y._Z)(Oe,"wfb_freemium")==="on"),Z=(0,a.d4)(Oe=>(0,g.J6)(Oe,N,!0)),re=(0,t.useMemo)(()=>$?[E.t("Automate repetitive, simple tasks"),E.t("Create code-free solutions"),E.t("Customize and share with your team")]:[],[$]),Te=(0,t.useMemo)(()=>$?[E.t("Bring tools you already use into Slack"),E.t("Use apps just for you or with your whole team"),E.t("Streamline your work right from Slack")]:[],[$]);if(!$)return null;const Ce=u(Oe=>{let{text:Le}=Oe;return t.createElement(l.A,{"data-qa":"workflow_builder_freemium_trial_offer_modal-plans_page_link",useLink:!0},Le)},"renderPlansPageLink"),Pe=K===p.UiComponentVariant.UNLIMITED_WORKFLOWS_TRIAL_OFFER_MODAL;let fe,pe,q,se,ge;return Pe?(fe=E.t("Save time with unlimited workflows"),q=E.t("With workflows, you can:"),pe=N?E.rt(" You can also install unlimited apps, and get access to other <plansPageLink>premium collaboration tools</plansPageLink> with a free, {trialLength}-day trial of Slack Pro.",{trialLength:Z,"<plansPageLink>":Ce}):E.rt("You can also install unlimited apps, and get access to other <plansPageLink>premium collaboration tools</plansPageLink> when you upgrade to a paid plan.",{"<plansPageLink>":Ce}),se=re,ge="/marketing/img/feature/workflow-builder/hero-wfb-lp.jpg"):(fe=E.t("Bring all your tools into Slack"),q=E.t("With apps, you can:"),pe=N?E.rt(" You can also publish unlimited workflows, and get access to other <plansPageLink>premium collaboration tools</plansPageLink> with a free, {trialLength}-day trial of Slack Pro.",{trialLength:Z,"<plansPageLink>":Ce}):E.rt("You can also install unlimited workflows, and get access to other <plansPageLink>premium collaboration tools</plansPageLink> when you upgrade to a paid plan.",{"<plansPageLink>":Ce}),se=Te,ge="/marketing/img/feature/workflow-builder/hero-wfb-apps.png"),t.createElement(v.A,{"data-qa":"workflow_builder_freemium_trial_offer_modal",imgSrc:ge,modalBannerBackgroundColor:"#4a144a",modalCloseButtonTheme:T.N.LIGHT,modalTitle:fe,modalSubtitle:pe,modalChecklistHeading:q,modalChecklistItems:se,onSpeedbumpContinueLabel:B===p.UiPage.WORKFLOW_BUILDER_FREEMIUM_TRIAL_PUBLISH?E.t("Publish Workflow"):E.t("Continue"),promoType:b,promoSubtype:R,startTrialContext:I.M.workflowBuilderFreemiumTrialOfferModal,uiComponentVariant:K,isEligibleForTrial:N})},"WorkflowBuilderFreemiumTrialOfferModal");f.displayName="WorkflowBuilderFreemiumTrialOfferModal";const O=f;var C=e(8300630630),M=e(6422693406),D=e(1152226587);function P(){return P=Object.assign||function(j){for(var N=1;N<arguments.length;N++){var b=arguments[N];for(var R in b)Object.prototype.hasOwnProperty.call(b,R)&&(j[R]=b[R])}return j},P.apply(this,arguments)}u(P,"_extends");const k=(0,d.Ay)("Open freemium trial offer modal",function(){var j=(0,_.coroutine)(function*(N,b,R){const K=i.ZO.PaidFeatureTrial,{promoSubtype:B}=R;let $=null;switch(B){case i.zG.WorkflowBuilder:$=O;break;case i.zG.Vhq:$=D.A;break;default:return M.S.resolve()}yield N((0,C.A)({campaignType:K,campaignSubType:B,reason:B}));const Z=(0,h.hq)(b(),K,B);return N((0,m.q)({element:t.createElement($,P({},R,{promoType:K,promoSubtype:B,isEligibleForTrial:Z}))}))});return function(N,b,R){return j.apply(this,arguments)}}());k.meta={name:"createThunk",key:"createThunkopenFreemiumTrialOfferModal",description:"Open freemium trial offer modal"};const x=k;var F=e(6968387112),W=e(5267010247),Y=e(8822892075),S=e(7940058138),L=e(6084388622),w=e(8739505998),J=e(8300007136),G=e(4096483543),X=e(3810478625);const te={elementName:"start_trial",isPrimaryCTA:!0,onClick:{enableClogAction:!0}},le={elementName:"learn_more",isPrimaryCTA:!0,onClick:{enableClogAction:!0}},ve={isPrimaryCTA:!0,elementName:"upgrade_link",onClick:{enableClogAction:!0}},Q={isPrimaryCTA:!0,elementName:"upgrade_now",onClick:{enableClogAction:!0}},Ae=new c.Ay("trials_highlight_paid_features"),ae=u(j=>{let{variant:N,children:b,promoSubtype:R,modalVariant:K,useLink:B=!1,ctaClassName:$}=j;const Z=(0,J.wA)(),re=(0,a.d4)(X.g),Te=(0,G.A)(),Ce=(0,t.useCallback)(()=>{Z((0,W.o)((0,Y.ZF)(S.c.PaidBenefits)))},[Z]),Pe=u(()=>{Z(x({uiComponentVariant:K,promoSubtype:R}))},"onStartTrialLinkClick");if(!N||N===r.MX.TrialFetching)return null;if(N===r.MX.TrialIneligible)return t.createElement(l.A,{useLink:B,autoClogProps:ve,className:$},b??(re?Ae.t("Upgrade Now"):Ae.t("See Upgrade Options")));const fe=B?w.A:L.z9;return N===r.MX.TrialEligible?t.createElement(fe,{onClick:Pe,autoClogProps:te,className:$},b??(re?Ae.t("Try Slack Pro"):Ae.t("Start Free Trial"))):N===r.MX.TrialTeam?t.createElement(fe,{href:Te?void 0:`https://${(0,F.Xk)()}/help/articles/115003205446-Slack-plans-and-features`,autoClogProps:le,onClick:Te?Ce:void 0,className:$},b??(re?Ae.t("Compare Plans"):Ae.t("Learn more"))):N===r.MX.TrialExpiry?t.createElement(l.A,{useLink:B,action:i.um.CHECKOUT,autoClogProps:Q},b??Ae.t("Upgrade Now",{fallbackHash:"935af2c98463e1015856ac054bf7efc6c88c0ab7",fallbackHashNs:"trial_expiration_modals"})):N===r.MX.TrialIneligibleUserCannotUpgrade?t.createElement(fe,{href:`https://${(0,F.Xk)()}/help/articles/115002422943`,autoClogProps:te,className:$},b??(re?Ae.t("Compare Plans"):Ae.t("Learn More"))):null},"FreemiumPrimaryCTA");ae.displayName="FreemiumPrimaryCTA";const he=ae;var _e=e(7949425452),ee=e(7573583373),de=e.n(ee);const Ie=new c.Ay("huddles");function ce(j){let{showProBadge:N,className:b}=j;const R=(0,a.d4)(s.qr),K=(0,a.d4)(X.g),B=i.zG.Vhq,$=(0,r.Ay)({promoSubtype:B}),Z=(0,t.useMemo)(()=>t.createElement(he,{useLink:!0,variant:$,promoSubtype:i.zG.Vhq,ctaClassName:de().cta}),[$]);return!R||!K||$!==r.MX.TrialEligible&&$!==r.MX.TrialIneligible&&$!==r.MX.TrialIneligibleUserCannotUpgrade?null:t.createElement("div",{className:(0,o.A)(de().container,b)},t.createElement(n.A,null,t.createElement("div",{className:de().alertBanner},N&&t.createElement(_e.Ay,{size:_e.vj.Medium,className:de().proBadge}),t.createElement("span",null,Ie.t("On the free version of Slack, your huddles are limited to {min} minutes.",{min:30}),"\xA0",Z))))}u(ce,"HuddleTimeLimitUpgradeAlert"),ce.displayName="HuddleTimeLimitUpgradeAlert"},8320929653:(z,A,e)=>{"use strict";e.d(A,{Ay:()=>R,e3:()=>ce,lc:()=>j});var t=e(9706240641),n=e.n(t),s=e(3134334389),a=e(5255740490),c=e(8300007136),o=e(9418991940),r=e(3288846409),l=e(1149563359),_=e(3037015781),d=e(9012396182),i=e(1289024643),m=e(5795074931),h=e(9101533895),v=e(5286203919),y=e(8746998952),T=e(9712681361),I=e(4742719639),p=e(5332875232),g=e(6251210828),E=e(2802517438),f=e(4481313819),O=e(3622858354),C=e(4233000497),M=e(6749400491),D=e(9373230523),P=e(1407713935),k=e(8798294025),x=e(9289081806),F=e(6470070112),W=e(8683010724),Y=e(3708320478),S=e(4775127335),L=e(2683115972),w=e(3165300465),J=e(8661826718),G=e(2527782504),X=e(4275787242),te=e(735940183),le=e(6244014364),ve=e(8869383561),Q=e(5519146941),Ae=e(3193155968),ae=e(7429662208);function he(){return he=Object.assign||function(K){for(var B=1;B<arguments.length;B++){var $=arguments[B];for(var Z in $)Object.prototype.hasOwnProperty.call($,Z)&&(K[Z]=$[Z])}return K},he.apply(this,arguments)}u(he,"_extends");const _e=new te.Ay("huddles"),ee={elementName:"huddles_invite_decline",eventId:le.EventId.CANVAS_EVENT,onClick:{enableClogAction:!0}},de={elementName:"huddles_invite_joining_soon",eventId:le.EventId.CANVAS_EVENT,onClick:{enableClogAction:!0}},Ie={elementName:"huddles_invite_join",eventId:le.EventId.CANVAS_EVENT,onClick:{enableClogAction:!0}},ce=u(K=>{let{topic:B,formattedTopic:$,channel:Z,channelName:re,otherMemberNamesString:Te,imMemberName:Ce,experimentHuddlesLaterGroupOn:Pe}=K;if(!Pe)return s.createElement(s.Fragment,null);let fe=B?_e.rt("Join the scheduled huddle about {topic}",{topic:$}):_e.rt("Join the scheduled huddle");return(0,P.LI)(Z)&&Ce?fe=B?_e.rt("Join the scheduled huddle with {imMemberName} about {topic}",{topic:$,imMemberName:Ce}):_e.rt("Join the scheduled huddle with {imMemberName}",{imMemberName:Ce}):(0,P.yz)(Z)?fe=B?_e.rt("Join the scheduled huddle about {topic} with {otherMemberNamesString}",{topic:$,otherMemberNamesString:Te}):_e.rt("Join the scheduled huddle with {otherMemberNamesString}",{otherMemberNamesString:Te}):(0,_.uz)(Z)&&!(0,P.LI)(Z)&&(fe=B?_e.rt("Join the scheduled huddle in {channelName} about {topic}",{topic:$,channelName:re}):_e.rt("Join the scheduled huddle in {channelName}",{channelName:re})),fe},"getScheduledHuddleInviteCopy");function j(K){let{channelId:B,senderUserId:$,callId:Z,teamId:re,isInviter:Te}=K;const Ce=(0,c.wA)(),{shouldUseNavigate:Pe,activeTab:fe}=(0,s.useContext)(Q.A),pe=(0,o.d4)(p.MJ),q=(0,o.d4)(m.WR),se=(0,o.d4)(on=>(0,D.A)(on,$)),ge=(0,o.d4)(on=>(0,h.OL)(on,B)),Oe=(0,o.d4)(on=>{if(!ge||!pe||!(0,P.LI)(ge))return;const Xt=(0,k.e)(ge);if(Xt)return(0,D.A)(on,Xt)}),Le=(0,o.Z2)(on=>(0,P.yz)(ge)?((0,x.Ug)(ge)||[]).filter(rn=>rn!==$&&rn!==q).map(rn=>(0,D.A)(on,rn)).filter(rn=>rn):[]),We=(0,r.cw)(v.vO),Re=(0,F.eu)(We),Je=(0,o.d4)(on=>(0,i.Ck)(on,Z,q))==="joining_soon",it=(0,o.d4)(on=>(0,i.H6)(on,Z));var et;const lt=(et=it==null?void 0:it.isScheduled)!==null&&et!==void 0?et:!1,nt=(0,o.d4)(E.A),at=(0,o.d4)(on=>{if(Pe){var Xt;return(Xt=(0,ae.F8)(on,{tab:fe,container:Ae.mq.Primary}))===null||Xt===void 0?void 0:Xt.id}return nt}),ze=(0,r.cw)(d.getFocusedWorkspace),Ke=B===at&&ze&&re&&ze===re,He=(0,s.useCallback)(()=>{Ce((0,M.A)({callId:Z,channelId:B,inviteResponse:M.J.DECLINE}))},[Z,B,Ce]),[Ye,_t]=(0,s.useState)(!1),[vt,Tt]=(0,s.useState)(!1),Lt=(0,s.useCallback)(()=>{(function(){var Xt=(0,t.coroutine)(function*(){Tt(!0),_t(!1);const rn=Ce((0,M.A)({callId:Z,channelId:B,inviteResponse:M.J.JOINING_SOON}));if(rn)try{yield rn}catch{_t(!0)}finally{Tt(!1)}else Tt(!1)});return u(function(){return Xt.apply(this,arguments)},"respondToInvite")})()()},[Z,B,Ce]),ft=(0,s.useCallback)(()=>{Ce((0,y.A)({channelId:B,callId:Z,entryPoint:T.su.SIDEBAR_HUDDLE_INVITE}))},[B,Z,Ce]),mt=(0,o.d4)(on=>B&&(0,I.o)(on,B))||"",Yt=mt?s.createElement("span",{className:"p-huddle_invite__topic"},s.createElement(O.A,{text:mt})):null,nn=s.createElement("span",{className:"p-huddle_invite__sender_name"},se);let jt;if(lt){const on=s.createElement(J.A,{channelId:B,boldIcon:!0});jt=ce({topic:mt,formattedTopic:Yt,channel:ge,channelName:on,experimentHuddlesLaterGroupOn:!0})}else if((0,P.LI)(ge))Te?jt=ce({topic:mt,formattedTopic:Yt,channel:ge,imMemberName:Oe,experimentHuddlesLaterGroupOn:pe}):jt=_e.rt("Join huddle with {senderName}",{senderName:nn});else if((0,P.yz)(ge)){const on=(0,ve.A)(Le,{react:!0}).join("");if(Te)jt=ce({topic:mt,formattedTopic:Yt,channel:ge,otherMemberNamesString:on,experimentHuddlesLaterGroupOn:pe});else{const Xt=(0,ve.A)([se].concat(Le),{react:!0}).join(""),rn=s.createElement("span",{className:"p-huddle_invite__all_member_names"},Xt);jt=_e.rt("Join huddle with {allMemberNames}",{allMemberNames:rn})}}else{const on=s.createElement(J.A,{channelId:B,boldIcon:!0});Te?jt=ce({topic:mt,formattedTopic:Yt,channel:ge,channelName:on,experimentHuddlesLaterGroupOn:pe}):Ke?jt=_e.rt("{senderName} is inviting you to a huddle in this channel",{senderName:nn}):jt=_e.rt("{senderName} is inviting you to a huddle in {channelName}",{senderName:nn,channelName:on})}return{avatarOverflowBadgeCount:(0,P.yz)(ge)?Le.length+1:0,didRespondingToInviteFail:Ye,formattedTopic:Yt,handleDecline:He,handleJoiningSoon:Lt,handleJoin:ft,inviteText:jt,isCurrentUserJoiningSoon:Je,isJoiningSoonResponsePending:vt,isLoading:Re}}u(j,"useHuddleInviteProps"),j.displayName="useHuddleInviteProps";const N={name:"warning"},b=u(K=>{let{channelId:B,senderUserId:$,callId:Z,teamId:re}=K;const Te=(0,o.d4)(p.MJ),Ce=(0,o.d4)(m.WR),Pe=Te&&Ce===$,fe=(0,C.A)(B),{avatarOverflowBadgeCount:pe,didRespondingToInviteFail:q,formattedTopic:se,handleDecline:ge,handleJoiningSoon:Oe,handleJoin:Le,inviteText:We,isCurrentUserJoiningSoon:Re,isJoiningSoonResponsePending:we,isLoading:Je}=j({channelId:B,senderUserId:$,callId:Z,teamId:re,isInviter:Pe}),it=(0,s.useRef)(null),et=(0,s.useCallback)(()=>{var Tt;(Tt=it.current)===null||Tt===void 0||Tt.focus()},[]);(0,l.A)(G.Ay.HUDDLE_INVITE_JOIN,et);const lt="huddle-invite-text",nt=s.createElement(L.Ay,{type:"outline",className:"p-huddle_invite__button",onClick:ge,"data-qa":"huddle_invite_declined",disabled:Je,autoClogProps:ee},s.createElement("span",{className:"p-huddle_invite__label"},_e.t("Decline"))),at=s.createElement(w.A,{type:"outline",className:"p-huddle_invite__button p-huddle_invite__button--joining_soon",loading:we,onClick:Oe,disabled:Je,autoClogProps:de},s.createElement("span",{className:"p-huddle_invite__label"},_e.t("Be there soon"))),[ze,Ke]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let Tt=0;return Re&&(Ke(!0),Tt=window.setTimeout(()=>{Ke(!1)},6e3)),()=>{Tt&&clearTimeout(Tt)}},[Re]);const He=ze?s.createElement("div",{className:"p-huddle_invite__header_notif"},s.createElement("div",{className:"p-huddle_invite__header_notif_content"},s.createElement(W.A,{name:"clock",size:"20"}),s.createElement("span",{className:"margin_left_50"},_e.t("Join when you\u2019re ready!")))):null,Ye=s.createElement(w.A,{ref:it,type:"primary",className:"p-huddle_invite__button p-huddle_invite__button--accept",loading:Je,onClick:Le,"data-qa":"huddle_invite_join",autoClogProps:Ie},s.createElement("span",{className:"p-huddle_invite__label p-huddle_invite__label--join"},_e.t("Join"))),_t=(0,o.d4)(g.jI),vt=_t?{width:_t}:null;return s.createElement(f.A,he({eventId:le.EventId.CANVAS_EVENT,uiComponentName:le.UiComponentName.HUDDLES_INVITE,clogImpression:!0},fe),s.createElement("div",he({className:(0,a.A)("p-huddle_invite",{"p-huddle_invite--with_header":!!se})},vt&&{style:vt}),s.createElement("div",{className:"p-huddle_invite__content"},He,se&&s.createElement("div",{className:"p-huddle_invite__message_header"},se),s.createElement("div",{className:"p-huddle_invite__message"},!Pe&&s.createElement("div",{className:(0,a.A)("p-huddle_invite__avatar_container",{"p-huddle_invite__avatar_container--with_overflow":!!pe})},s.createElement(S.Ay,{key:$,className:"p-huddle_invite__avatar",size:pe?14:20,userId:$,isInteractive:!1}),!!pe&&s.createElement("div",{className:"p-huddle_invite__avatar_overflow_overlay"},pe)),s.createElement(Y.z,null,s.createElement("div",{className:"p-huddle_invite__text",id:lt},We,s.createElement("span",{className:"offscreen"},_e.rt("Press {key} to join",{key:(0,F.$z)(),fallbackHash:"bd062cb22cea3388535c0f834ebf6df702757691",fallbackHashNs:"keyboard_keys"}))))),s.createElement("div",{className:"p-huddle_invite__buttons",role:"group","aria-labelledby":lt},Ye,!Re&&at,nt)),q&&s.createElement(X.A,{svgIconProps:N},_e.t("Something went wrong responding to the invite."))))},"HuddleInvite");b.displayName="HuddleInvite";const R=b},6749400491:(z,A,e)=>{"use strict";e.d(A,{A:()=>_,J:()=>r});var t=e(1031947056),n=e(6533394955),s=e(4250409994),a=e(1070786785),c=e(5319025363),o=e(5170073955),r;(function(d){d.ACCEPT="accept",d.DECLINE="decline",d.JOINING_SOON="joining_soon"})(r||(r={}));const l=(0,t.Ay)("Respond to an invitation to a huddle",(d,i,m)=>{let{channelId:h,inviteResponse:v,callId:y}=m;d((0,c.z)());let T;return v!==r.ACCEPT&&(T=d((0,o.Q)({response:v,channelId:h,roomId:y,reason:"respond-to-huddle-invite"}))),v===r.DECLINE&&((0,n.dispatchForClientStore)((0,s.u8)(h)),d((0,a.V3)(h))),T});l.meta={name:"createThunk",key:"createThunkrespondToHuddleInvite",description:"Respond to an invitation to a huddle"};const _=l},4983989341:(z,A,e)=>{"use strict";e.d(A,{x:()=>r});var t=e(6422693406),n=e(1031947056),s=e(1070786785),a=e(1452921056),c=e(9712681361),o=e(7631186994);const r=(0,n.Ay)("Creates a new huddle in mpim where all huddle participants are channel members",(l,_,d)=>{let{channelId:i,memberIds:m}=d;return l((0,o.r)({memberIds:m})).then(h=>{l((0,s.Ay)(i)),l((0,a.A)({channelId:h.id,entryPoint:c.su.CREATE_NEW_MPIM}))}).catch(h=>t.S.reject(h))});r.meta={name:"createThunk",key:"createThunkcreateNewHuddleInMpimWithUsers",description:"Creates a new huddle in mpim where all huddle participants are channel members"}},5907086961:(z,A,e)=>{"use strict";e.d(A,{A:()=>W});var t=e(3134334389),n=e(6084388622),s=e(8300007136),a=e(9003400431),c=e(9418991940),o=e(2527994834),r=e(4761125736),l=e(3288846409),_=e(7076189804),d=e(581167618),i=e(980293773),m=e(9101533895),h=e(5286203919),v=e(735940183),y=e(4446301238),T=e(8661826718),I=e(5363983309),p=e(7868634217),g=e(4061200313),E=e(9183417278),f=e(1612857492),O=e(9892470785),C=e(8847766420);const M=new v.Ay("huddles"),D=u(Y=>{let{numOfExternalMembers:S,members:L}=Y;const w=(0,c.d4)(C.Kc),J=(0,l.cw)(h.hc)||"",G=(0,c.d4)($=>(0,m.OL)($,J)),X=(0,c.d4)($=>(0,r._Z)($,"invite_to_channel_permission")==="on"),te=(0,c.d4)($=>(0,r._Z)($,"restrict_channel_manager_ext_invites")==="on"),le=(0,c.d4)($=>(0,E.Q)($,G)),ve=(0,c.d4)($=>(0,f.q)($,G));if(!te)return null;const Q=!X&&te,Ae=X&&te,ae=S===L.length,he=S>0,_e=!S,ee=L.length-S>0,de=!(L.length-S),Ie=M.rt("They can join the huddle, but since you are not allowed to invite external people to this channel, they won\u2019t be able to see messages or reply to the thread."),ce=t.createElement(t.Fragment,null,t.createElement("p",null,M.t("Everyone you\u2019ve added can join the huddle but won\u2019t be able to see messages or reply to the thread.")),t.createElement("p",null,M.rt("You can add people from {org} to {channelName}. New members will be able to see all of the channel\u2019s history, including any files that have been shared in the channel.",{org:t.createElement(O.A,{id:w}),channelName:t.createElement(T.A,{className:"bold",channel:G})})),t.createElement("p",null,M.t("You don\u2019t have permission to add external people to this channel."))),j=t.createElement(t.Fragment,null,t.createElement("p",null,M.t("Everyone you\u2019ve added can join the huddle but won\u2019t be able to see messages or reply to the thread.")),t.createElement("p",null,M.rt("You can add people from {org} to {channelName}. New members will be able to see all of the channel\u2019s history, including any files that have been shared in the channel.",{org:t.createElement(O.A,{id:w}),channelName:t.createElement(T.A,{className:"bold",channel:G})}))),N=M.rt("They can join the huddle, but since you are not allowed to invite people from {org} to this channel, they won\u2019t be able to see messages or reply to the thread.",{org:t.createElement(O.A,{id:w})}),b=t.createElement(t.Fragment,null,t.createElement("p",null,M.t("Everyone you\u2019ve added can join the huddle but won\u2019t be able to see messages or reply to the thread.")),t.createElement("p",null,M.rt("You can add external people (not from {org}) to {channelName}. New members will be able to see all of the channel\u2019s history, including any files that have been shared in the channel.",{org:t.createElement(O.A,{id:w}),channelName:t.createElement(T.A,{className:"bold",channel:G})})),t.createElement("p",null,M.t("You don\u2019t have permission to add internal people to this channel."))),R=t.createElement(t.Fragment,null,t.createElement("p",null,M.t("Everyone you\u2019ve added can join the huddle but won\u2019t be able to see messages or reply to the thread.")),t.createElement("p",null,M.rt("You can add external people (not from {org}) to {channelName}. New members will be able to see all of the channel\u2019s history, including any files that have been shared in the channel.",{org:t.createElement(O.A,{id:w}),channelName:t.createElement(T.A,{className:"bold",channel:G})}))),K=M.rt("They can join the huddle, but since you are not allowed to invite people to this channel, they won\u2019t be able to see messages or reply to the thread."),B=M.rt("They can join the huddle but won\u2019t be able to see messages or reply to the thread unless they are members of {channelName}. New members will be able to see all of the channel\u2019s history, including any files that have been shared in the channel.",{channelName:t.createElement(T.A,{className:"bold",channel:G})});switch(!0){case(Q&&!ve&&ae):return Ie;case(Q&&!ve&&he):return ce;case(Q&&!ve&&_e):return j;case(Q&&ve):return B;case(Ae&&le&&!ve&&ae):return Ie;case(Ae&&le&&!ve&&he):return ce;case(Ae&&le&&!ve&&_e):return j;case(Ae&&!le&&ve&&_e):return N;case(Ae&&!le&&ve&&ee):return b;case(Ae&&!le&&ve&&de):return R;case(Ae&&!le&&!ve):return K;default:return B}},"DisallowedHuddleInviteSubtitle");D.displayName="DisallowedHuddleInviteSubtitle";const P=D,k=new v.Ay("huddles");function x(Y){let{members:S}=Y;const L=(0,s.wA)(),[w,J]=(0,t.useState)(null),[G,X]=(0,t.useState)([]),[te,le]=(0,t.useState)(!1),ve=(0,l.cw)(h.hc)||"",Q=(0,c.d4)(q=>(0,m.OL)(q,ve)),Ae=(0,t.useCallback)(()=>L((0,a.O)()),[L]),ae=(0,t.useCallback)(()=>L((0,a.O)({closeAll:!0})),[L]),he=(0,t.useCallback)(q=>{J(q),L((0,y.Cw)({channelId:ve,users:q})).then(()=>{G.push(q),X(G),J(null)}).catch(()=>{J(null),le(!0)})},[ve,L,G]),_e=(0,c.d4)(q=>(0,r._Z)(q,"invite_to_channel_permission")==="on"),ee=(0,c.d4)(q=>(0,r._Z)(q,"restrict_channel_manager_ext_invites")==="on"),de=(0,c.d4)(q=>(0,r._Z)(q,"shared_channel_invite_requested_event_ga")==="on"),Ie=(0,c.d4)(q=>(0,o.Q)(q,"shared_channel_invite_requested",Q.id)&&de),ce=(0,c.d4)(q=>(0,p.Z)(q,S)),j=(0,t.useMemo)(()=>({addedToChannel:k.t("Added to channel"),notInChannel:k.t("Not in channel"),inviteRequestPending:de?k.t("Invitation request pending approval"):"",added:k.t("Added"),pending:de?k.t("Pending"):"",inviteToChannel:k.t("Invite to channel"),cantBeInvitedToChannel:ee?k.t("Can\u2019t be invited to channel"):""}),[de,ee]),N=(0,c.d4)(q=>(0,E.Q)(q,Q)),b=(0,c.d4)(q=>(0,f.q)(q,Q)),R=(0,c.Z2)(q=>S.filter(se=>(0,g.i)(q,se))),K=R.length,B=!_e&&ee,$=_e&&ee,Z=B&&!b,re=$&&N&&!b,Te=K===S.length,Ce=!K,Pe=(0,t.useMemo)(()=>ee?k.rt("{count, plural, =1 {This person is not a member} other {These people are not members}} of {channelName}",{count:S.length,channelName:t.createElement(T.A,{channel:Q})}):k.rt("These people are not a member of {channelName}",{channelName:t.createElement(T.A,{channel:Q})}),[ee,Q,S]),fe=(0,t.useCallback)(q=>q&&Ie?j.inviteRequestPending:q?j.addedToChannel:j.notInChannel,[Ie,j.addedToChannel,j.inviteRequestPending,j.notInChannel]),pe=(0,t.useCallback)((q,se)=>{let ge;switch(se&&Ie?ge=j.pending:ge=se?j.added:j.inviteToChannel,!0){case((Z||re)&&Te):return null;case((Z||re)&&R.includes(q)):return t.createElement("span",{className:"p-huddle_invite_add_to_channel__user_list_no_invite_text"},j.cantBeInvitedToChannel);case($&&!N&&b&&Ce):return null;case($&&!N&&b&&!R.includes(q)):return t.createElement("span",{className:"p-huddle_invite_add_to_channel__user_list_no_invite_text"},j.cantBeInvitedToChannel);case($&&!N&&!b):return null;default:return t.createElement(n.lV,{type:"outline",size:"small",disabled:se,loading:w===q,onClick:()=>he(q)},ge)}},[Z,re,Ie,Te,R,j.cantBeInvitedToChannel,j.added,j.inviteToChannel,j.pending,$,N,b,Ce,w,he]);return t.createElement(i.dW,{overlayClassName:"p-huddle_invite_modal_shared_styles__overlay",closeModal:Ae,contentLabel:Pe,shouldReturnFocusAfterClose:!0},t.createElement(i.rQ,null,t.createElement(i.Rc,{title:Pe,subtitle:ee?null:k.rt("They can join the huddle but won\u2019t be able to see messages or reply to the thread unless they are members of {channelName}. New members will be able to see all of the channel\u2019s history, including any files that have been shared in the channel.",{channelName:t.createElement(T.A,{className:"bold",channel:Q})})}),ee&&t.createElement("div",{className:"p-huddle_invite_add_to_channel__subtitle"},t.createElement(P,{numOfExternalMembers:K,members:S}))),t.createElement(i.$m,null,t.createElement(i.qf,null,te&&t.createElement(d.Ay,{className:"margin_bottom_150",level:d.A_.error,type:d.QE.inline},k.t("Oops, something went wrong. Please try again.",{fallbackHash:"92c404bc05c04cc6c63491f463f0ec39688f741a",fallbackHashNs:"client"})),(ee?ce:S).map(q=>{const se=G.includes(q);return t.createElement("div",{className:"p-huddle_invite_add_to_channel__user_list",key:q},t.createElement(_.Ay,{id:q,useShortMode:!0,showPresence:!0,showStatus:!0,showSubtext:!0,subtext:t.createElement("small",{className:"sk_dark_gray"},fe(se))}),ee?pe(q,se):t.createElement(n.lV,{type:"outline",size:"small",disabled:se,loading:w===q,onClick:()=>he(q)},se?j.added:j.inviteToChannel))}),ee?null:t.createElement(d.Ay,{className:"margin_top_50",level:d.A_.info,type:d.QE.custom},k.t("If you don\u2019t add them, they won\u2019t be able to see messages in the huddle.")))),t.createElement(i.jl,null,t.createElement(i.ox,null,ee?null:t.createElement(i.s_,{onClick:Ae,type:"outline"},k.t("Cancel")),t.createElement(n.Ay,{onClick:ae,type:"primary"},_e&&!N||ee&&!b?k.t("OK"):k.t("Done")))))}u(x,"HuddleInviteAddToChannel"),x.displayName="HuddleInviteAddToChannel";const F={HuddleInviteAddToChannel:x},W=(0,I.A)(x,{isStackable:!0})},5911067953:(z,A,e)=>{"use strict";e.d(A,{A:()=>_t});var t=e(9706240641),n=e(3134334389),s=e(8300007136),a=e(235108050),c=e(4775127335),o=e(6084388622),r=e(581167618),l=e(444524526),_=e(1563996154),d=e(9418991940),i=e(7937864072),m=e(5751973043),h=e(980293773),v=e(3339229351),y=e(5795074931),T=e(5332875232),I=e(6470070112),p=e(7631186994),g=e(735940183),E=e(3730613858),f=e(666760496),O=e(1407713935),C=e(8746998952),M=e(9712681361),D=e(4481313819),P=e(6244014364),k=e(7268021173),x=e(3677514771),F=e(6839188756),W=e(9548972574),Y=e(716227588),S=e(1743656885),L=e(6259241484),w=e(9953252450),J=e(3288846409),G=e(9101533895),X=e(5286203919),te=e(8661826718),le=e(3534324375),ve=e(8276911661),Q=e(7576317051),Ae=e(5333401344);function ae(vt){let{memberId:Tt}=vt;const Lt=(0,d.d4)(mt=>(0,ve.nv)(mt,Tt)),ft=(0,d.d4)(mt=>(0,le.sE)(mt,Lt,!1,!1));return(0,Ae.mX)(Lt)?n.createElement(Q.A,{type:"unknown"}):(0,Ae.lv)(Lt)?n.createElement(Q.A,{type:"non-existent"}):n.createElement("span",null,ft)}u(ae,"DeprecatedHuddleName"),ae.displayName="DeprecatedHuddleName";const he=new g.Ay("huddles");function _e(vt){let{unknownMemberIds:Tt}=vt;const Lt=(0,J.cw)(X.hc),ft=(0,d.d4)(nn=>(0,G.OL)(nn,Lt)),mt=(0,n.useMemo)(()=>Lt?Tt:[],[Lt,Tt]);let Yt;if(mt.length===1)Yt=he.rt("{name1} is not a member of {channel}.",{name1:n.createElement(ae,{memberId:mt[0]}),channel:n.createElement(te.A,{channel:ft})});else if(mt.length===2)Yt=he.rt("{name1} and {name2} are not a member of {channel}.",{name1:n.createElement(ae,{memberId:mt[0]}),name2:n.createElement(ae,{memberId:mt[1]}),channel:n.createElement(te.A,{channel:ft})});else if(mt.length===3)Yt=he.rt("{name1}, {name2}, and {name3} are not a member of {channel}.",{name1:n.createElement(ae,{memberId:mt[0]}),name2:n.createElement(ae,{memberId:mt[1]}),name3:n.createElement(ae,{memberId:mt[2]}),channel:n.createElement(te.A,{channel:ft})});else if(mt.length>3){const[nn,jt,gn,...on]=mt,Xt=on.map(rn=>n.createElement(ae,{key:rn,memberId:rn}));Yt=he.rt("{name1}, {name2}, {name3} and {numOthers} more are not a member of {channel}.",{name1:n.createElement(ae,{memberId:nn}),name2:n.createElement(ae,{memberId:jt}),name3:n.createElement(ae,{memberId:gn}),channel:n.createElement(te.A,{channel:ft}),numOthers:mt.length-3},rn=>{let{text:Zt}=rn;return n.createElement(_.Ay,{tip:(0,g.jd)(Xt,{noEscape:!0})},n.createElement("span",null,Zt))})}return n.createElement("small",null,Yt)}u(_e,"HuddleInviteNotAMember"),_e.displayName="HuddleInviteNotAMember";const ee=_e;var de=e(5907086961),Ie=e(7396657731),ce=e(9236164662),j=e(9645800439),N=e(6011052675),b=e(3109955471),R=e(5103024697),K=e(4822627003),B=e(5103164797),$=e(3214129289),Z=e(9163492386),re=e(6007206761),Te=e(8170643398),Ce=e(4562579337),Pe=e(8040098042),fe=e(181849556);const pe=new g.Ay("huddles");var q;(function(vt){vt.CHANNEL="channel",vt.PEOPLE="people"})(q||(q={}));const se=u(vt=>{let{isFreeTeam:Tt,onSuggestedChannelSelected:Lt,onSuggestedUserSelected:ft,selectedChannelId:mt,selectedMemberIds:Yt}=vt;const nn=(0,d.d4)(y.WR),jt=(0,d.wz)(fe.b5),gn=(0,d.wz)(fe.mc),on=(0,d.wz)(Ft=>{if(!jt)return[];if(Yt.length)return[];const qt=[];return jt.forEach(un=>{if(un.id===mt)return;const tt=(0,G.OL)(Ft,un.id);(0,re.F)(tt)||qt.push(un)}),qt}),Xt=(0,n.useMemo)(()=>on.map(Ft=>Ft.id),[on]),rn=(0,d.wz)(Ft=>{if(!gn)return[];if(mt)return[];const qt=[];return gn.forEach(un=>{if(un.id===nn||Yt.includes(un.id))return;const tt=(0,ve.nv)(Ft,un.id);(0,Ce.A)(tt)||(0,Te.oy)(tt)||qt.push(un)}),qt}),Zt=(0,n.useMemo)(()=>rn.map(Ft=>Ft.id),[rn]),Ht=(0,n.useMemo)(()=>{const un=Zt.length*60,tt=32,pt=Xt.length*tt;return Math.min(Math.max(un,pt),240)},[Xt,Zt]),Bt=(0,n.useCallback)(Ft=>{if(!Ft.id)return;(0,Pe.A)(Ft.id)?Lt(Ft.id):ft(Ft.id)},[Lt,ft]),Qt=(0,n.useCallback)(Ft=>{const qt=on[Ft];if(qt)return n.createElement("div",{className:"p-huddle_start_suggestion_tabs__menu_item_button__list_entity"},n.createElement(B.A,{channelId:qt.id}))},[on]),sn=(0,n.useCallback)(()=>n.createElement(R.A,{disableHeight:!0},Ft=>{let{width:qt}=Ft;return n.createElement(Z.A,{"aria-label":pe.t("Channel"),keys:Xt,rowRenderer:Qt,onItemClick:Bt,width:qt,height:Ht})}),[Bt,Qt,Xt,Ht]),Mn=(0,n.useCallback)(Ft=>{const qt=rn[Ft];if(qt)return n.createElement("div",{className:"p-huddle_start_suggestion_tabs__menu_item_button__list_entity"},n.createElement(K.A,{id:qt.id}))},[rn]),ct=(0,n.useCallback)(()=>n.createElement(R.A,{disableHeight:!0},Ft=>{let{width:qt}=Ft;return n.createElement(Z.A,{"aria-label":pe.t("People"),keys:Zt,rowRenderer:Mn,onItemClick:Bt,width:qt,height:Ht})}),[Bt,Mn,Zt,Ht]),[yt,Rt]=(0,n.useState)(q.PEOPLE),xe=(0,n.useCallback)(Ft=>{Rt(Ft)},[]);(0,n.useEffect)(()=>{yt===q.PEOPLE&&mt?Rt(q.CHANNEL):yt===q.CHANNEL&&Yt.length&&Rt(q.PEOPLE)},[yt,mt,Yt]);const Nt=(0,n.useMemo)(()=>{const Ft=[];return Zt.length&&Ft.push({title:pe.t("People"),id:q.PEOPLE,content:ct()}),Xt.length&&Ft.push({title:pe.t("Channels",{fallbackHash:"879f0b1bef59eeebf78cfd3a22f6f8077810cecf"}),id:q.CHANNEL,content:sn()}),Ft},[Xt,Zt,sn,ct]);return Tt?null:n.createElement("div",{className:"p-huddle_start_suggestion_tabs"},n.createElement($.A,{fullHeight:!0,tabs:Nt,currentTabId:yt,onTabChange:xe,tabMenuClassnames:"p-huddle_start_suggestion_tabs__tab_menu"}))},"HuddleStartSuggestionTabs");se.displayName="HuddleStartSuggestionTabs";const ge=n.memo(se);var Oe=e(8808892924),Le=e(1794107122),We=e(1064007131),Re=e(5142752606);const we=new g.Ay("huddles"),Je=n.memo(vt=>{let{error:Tt}=vt;const Lt=(0,d.d4)(nn=>(0,ve.nv)(nn,Tt.invitedMemberId)),ft=(0,d.d4)(nn=>(0,le.sE)(nn,Lt));if(!(0,d.d4)(T.TM))return null;let Yt=we.t("{userName} could not be invited to the Huddle.",{userName:ft});return Tt.inviteRejectionReason===Re.g.RecipientHuddlesDisabled&&(Yt=we.t("{userName} could not be invited as Huddles is not enabled for them.",{userName:ft})),n.createElement(r.Ay,{level:"error"},Yt)});var it=e(3810478625),et=e(5255740490),lt=e(2131614445),nt=e(952756744);function at(){return at=Object.assign||function(vt){for(var Tt=1;Tt<arguments.length;Tt++){var Lt=arguments[Tt];for(var ft in Lt)Object.prototype.hasOwnProperty.call(Lt,ft)&&(vt[ft]=Lt[ft])}return vt},at.apply(this,arguments)}u(at,"_extends");var ze;(function(vt){vt.COMPOSER="composer",vt.PUBLIC_CHANNEL="public_channel",vt.PRIVATE_CHANNEL="private_channel"})(ze||(ze={}));function Ke(vt){let{channel:Tt}=vt;return Tt?Tt&&(0,O.Zp)(Tt)?ze.PRIVATE_CHANNEL:ze.PUBLIC_CHANNEL:ze.COMPOSER}u(Ke,"getModalContext");const He=new g.Ay("huddles");function Ye(vt){let{closeModal:Tt,callId:Lt,channel:ft,channelSuggestion:mt,memberSuggestionId:Yt,selectedMemberIds:nn=m.Ml}=vt;const jt=(0,s.wA)(),gn=(0,i.A)(),on=Ke({channel:ft}),Xt=on===ze.PRIVATE_CHANNEL&&!(0,O.PC)(ft),rn=on===ze.COMPOSER,[Zt,Ht]=(0,n.useState)(nn),[Bt,Qt]=(0,n.useState)(),[sn,Mn]=(0,n.useState)(!1),[ct,yt]=(0,n.useState)(!1),Rt=(0,d.d4)(T.TM),[xe,Nt]=(0,n.useState)(void 0),Ft=(0,d.d4)(y.WR),qt=(0,d.d4)(x.H7),un=(0,F.tc)(qt),tt=(0,d.d4)(k.iH),pt=(0,d.d4)(ot=>(0,Le.$)(ot,(ft==null?void 0:ft.id)||"")),Dt=(0,d.d4)(T.Si),Wt=(0,d.d4)(W.qr),zt=(0,d.d4)(We.SX),ln=zt===We.mF.TREATMENT_1,Tn=zt===We.mF.TREATMENT_2,cn=ln||Tn,hn=(0,d.d4)(it.g),_n=(0,d.d4)(ot=>(0,Y.Hp)(ot,L.xu.HUDDLE_INVITE_MODAL))===L.ze.SUPPORT_UPGRADE_DECISION_TRIAL_EXPIRING_SOON_HUDDLES_BANNER,Vn=(0,d.Z2)(ot=>(0,W.ft)(ot,ft==null?void 0:ft.id).filter(gt=>gt.id!==Ft).map(gt=>gt.id)),Wn=(0,d.d4)(I.pl),kn=(0,d.Z2)(ot=>Xt?Zt.filter(gt=>{const wt=ft&&(0,E.Sv)(ot,ft.id,gt);return wt&&wt.isKnown&&!(wt!=null&&wt.isMember)}):[]);(0,n.useEffect)(()=>{mt&&Qt({id:mt.id,isCurrentSuggestedChannel:!0})},[mt]),(0,n.useEffect)(()=>{Yt&&Ht([Yt])},[Yt]);const Pn=(0,n.useCallback)(ot=>Ht(ot),[]),$t=(0,n.useCallback)(ot=>{if(ot===(Bt==null?void 0:Bt.id)&&(Bt!=null&&Bt.isCurrentSuggestedChannel)){Qt({id:ot,isCurrentSuggestedChannel:!0});return}Qt({id:ot,isCurrentSuggestedChannel:!1})},[Bt==null?void 0:Bt.id,Bt==null?void 0:Bt.isCurrentSuggestedChannel]),$n=(0,n.useCallback)(ot=>{Ht(Zt.concat(ot))},[Zt]),De=(0,n.useCallback)(()=>{Qt({id:ft==null?void 0:ft.id,isCurrentSuggestedChannel:!0})},[ft==null?void 0:ft.id]),Ne=(0,n.useCallback)(()=>{Bt!=null&&Bt.id&&(jt((0,C.A)({channelId:Bt.id,entryPoint:M.su.COMPOSER_HUDDLE_START})),Tt())},[Bt,jt,Tt]),Me=(0,n.useCallback)((0,t.coroutine)(function*(){Mn(!0),yield jt((0,p.r)({memberIds:Zt})).then(ot=>{jt((0,C.A)({channelId:ot.id,entryPoint:M.su.COMPOSER_HUDDLE_START})),Tt(),Mn(!1),yt(!1)}).catch(ot=>{gn.error(ot),Mn(!1);const{message:gt}=ot;(gt==null?void 0:gt.indexOf(v.O3.INVALID_USER_COMBINATION))!==-1&&yt(!0)})}),[Zt,jt,gn,Tt]),Be=(0,n.useCallback)((0,t.coroutine)(function*(){if(!ft)return;Mn(!0);let ot=Zt;(Bt==null?void 0:Bt.id)===ft.id&&(Bt!=null&&Bt.isCurrentSuggestedChannel)&&(ot=(0,a.A)([...Zt,...pt])),yield jt((0,f.A)({channelId:ft.id,userIds:ot})).then(()=>{Mn(!1),kn&&kn.length>0&&Xt?jt((0,de.A)({members:kn})):Tt()}).catch(gt=>{gn.error(gt),Mn(!1),Rt&&Nt(gt)})}),[ft,pt,Tt,jt,Rt,Xt,gn,Bt==null?void 0:Bt.id,Bt==null?void 0:Bt.isCurrentSuggestedChannel,Zt,kn]),ue=(0,n.useMemo)(()=>on===ze.COMPOSER?Bt!=null&&Bt.id?Ne:Me:Be,[Be,Me,on,Bt,Ne]),ke={[ze.COMPOSER]:{eventId:P.EventId.HUDDLES_COMPOSER_HEADER_CLICKED,uiStep:P.UiStep.HUDDLE_COMPOSER_INVITES_SENT,elementName:"huddle_composer_dialog",entryPoint:"composer"},[ze.PUBLIC_CHANNEL]:{eventId:P.EventId.HUDDLES_PUBLIC_CHANNEL_INVITE,elementName:"huddle_public_channel_invite"},[ze.PRIVATE_CHANNEL]:{eventId:P.EventId.HUDDLES_PRIVATE_CHANNEL_INVITE,elementName:"huddle_private_channel_invite"}},Xe=u(()=>un&&!Dt&&!Wt?n.createElement(Ie.A,null):hn&&!rn?null:tt&&!cn?n.createElement(w.A,{v2ClassName:(0,et.A)({"p-huddle_invite_modal_banner":hn})}):cn&&tt&&!_n?n.createElement(w.A,{v2ClassName:(0,et.A)({"p-huddle_invite_modal_banner":hn})}):null,"maybeRenderBanner");Xe.displayName="maybeRenderBanner";const dt=ke[on],bt=(0,n.useMemo)(()=>rn?He.t("Start a Huddle"):Zt.length>1?He.t("Send Invites"):He.t("Send Invite"),[rn,Zt]);if(!Wn)return null;const be=He.t("You can invite people from outside this private conversation, but they may have restricted access to messages."),U=u(ot=>n.createElement(S.A,{articleId:4402059015315,ariaLabel:He.t("Learn more about Huddles"),forceOpenInBrowser:!0},ot),"renderLearnMoreLink");let V,ne,ie,Ue;const Qe=u(ot=>{const gt=ot.map(wt=>n.createElement(l.A,{key:wt,isBold:!1,id:wt}));return gt&&(0,g.jd)(gt)},"listifiedOverflowMembers");if(Qe.displayName="listifiedOverflowMembers",un&&Dt&&!Wt)ne=He.t("Invite someone to your huddle"),V=Xt?He.rt("You\u2019re on the free version of Slack, so only one other person can join you in a huddle. You can invite anyone until someone joins \u2014 they won\u2019t be added to {channelName}. <a>Learn more</a>",{channelName:n.createElement(te.A,{channel:ft}),"<a>":ot=>{let{text:gt}=ot;return U(gt)}}):He.rt("You\u2019re on the free version of Slack, so only one other person can join you in a huddle. They\u2019ll receive a notification to join. <a>Learn more</a>",{"<a>":ot=>{let{text:gt}=ot;return U(gt)}});else if(rn?(ne=He.t("Start a Huddle"),ie=hn?He.t("You can invite whomever you\u2019d like to the huddle, they\u2019ll receive a notification in Slack to join."):He.t("Find a person or channel to huddle with")):(ne=He.t("Invite people to your huddle"),ie=Xt?be:He.t("You can invite whomever you\u2019d like to the huddle, and they\u2019ll receive a notification to join.")),ft!=null&&ft.id&&Vn.length){const ot=He.rt("{participants, plural, =0 {{firstParticipant} and <b>you</b> are} =1 {{firstParticipant}, {secondParticipant}, and <b>you</b> are} other {{firstParticipant}, {secondParticipant}, <a>and # others</a> are}} in this huddle.",{participants:Vn.length-1,firstParticipant:n.createElement(l.A,{isBold:!0,id:Vn[0]}),secondParticipant:n.createElement(l.A,{isBold:!0,id:Vn[1]}),"<a>":gt=>{let{text:wt}=gt;return n.createElement(_.Ay,{zIndex:"above_fs",tip:Qe(Vn.slice(2))},n.createElement("span",null,wt))}});Ue=n.createElement("div",{className:"p-huddle_invite_channel_or_start__active_members_container"},n.createElement(Oe.i,{channelId:ft.id,className:"p-huddle_invite_channel_or_start__avatar_stack",avatarSize:c.RG.tiny,excludeIcon:!0,excludeMemberOverflowCount:!0,maxMembers:3}),n.createElement("div",null,ot))}const je=Rt&&xe!==void 0,ht="huddle-invite-description";return n.createElement(h.dW,{overlayClassName:"p-huddle_invite_modal_shared_styles__overlay",closeModal:Tt,contentLabel:ne,describedby:ht,shouldReturnFocusAfterClose:!0,dataQa:"huddle_invite_channel_modal"},n.createElement(h.rQ,null,n.createElement(h.Rc,{title:ne,subtitle:ie})),n.createElement(h.$m,null,n.createElement(h.qf,null,Ue,V&&n.createElement("p",{id:ht},V),n.createElement(j.A,{isFreeTeam:un&&!Wt,experimentHuddlesInviteModalFreemiumImprovementsGroupOn:Dt,channel:ft,otherMembersInHuddle:Vn,onSelectedMembersChange:Pn,onSelectedChannelChange:$t,selectedMemberIds:Zt,selectedChannel:Bt}),Xt&&kn&&kn.length>0&&n.createElement(ee,{unknownMemberIds:kn}),ct&&n.createElement(r.Ay,{"data-qa":"huddle-invite-invalid-user-combo-alert",level:"error"},He.t("All external people must already be in at least one channel together to send this invitation.")),je&&n.createElement(Je,{error:xe})),Xe(),n.createElement(nt.s,null),Wt&&un&&!_n&&n.createElement(lt.V,{showProBadge:!0,className:"p-huddle_invite_channel_or_start__upgrade_alert"}),Lt&&n.createElement(b.A,{activeHuddleCallId:Lt,channel:ft,isFreeTeam:un&&!Wt,onSuggestedUserSelected:$n,otherMembersInHuddle:Vn,selectedMemberIds:Zt,onChannelSelected:De,channelSuggestionOptionSelected:Bt==null?void 0:Bt.isCurrentSuggestedChannel}),!Lt&&n.createElement(ge,{isFreeTeam:un&&!Wt,onSuggestedChannelSelected:$t,onSuggestedUserSelected:$n,selectedChannelId:Bt==null?void 0:Bt.id,selectedMemberIds:Zt})),n.createElement(h.jl,null,n.createElement(h.ox,{className:"p-huddle_invite_channel_or_start_footer_actions"},n.createElement(N.A,{channelId:ft==null?void 0:ft.id}),n.createElement(h.s_,{type:"outline",className:"p-huddle_invite_channel_or_start_footer_actions_close"},He.t("Cancel")),n.createElement(D.A,at({},dt,{clogImpression:!0}),n.createElement(o.lV,{"data-qa":"send_invite_button",loading:sn,onClick:ue,type:"primary",disabled:!Zt.length&&!(Bt!=null&&Bt.id)},bt)))),Dt&&un&&!Wt&&n.createElement(ce.A,{selectedMemberIds:Zt}))}u(Ye,"HuddleInviteChannelOrStart"),Ye.displayName="HuddleInviteChannelOrStart";const _t=Ye},6011052675:(z,A,e)=>{"use strict";e.d(A,{A:()=>l});var t=e(3134334389),n=e(8300007136),s=e(735940183),a=e(6084388622),c=e(5904726069);const o=new s.Ay("huddles"),r=u(_=>{let{channelId:d}=_;const i=(0,n.wA)(),m=(0,t.useCallback)(()=>{i((0,c.r)({channelId:d}))},[i,d]);return d?t.createElement(a.Ay,{onClick:m,type:"outline",className:"p-huddle_invite_link_button__copy_link"},o.t("Copy Huddle Link")):null},"HuddleInviteLinkButton");r.displayName="HuddleInviteLinkButton";const l=r},9236164662:(z,A,e)=>{"use strict";e.d(A,{A:()=>D});var t=e(4481313819),n=e(6244014364),s=e(5751973043),a=e(735940183),c=e(3134334389),o=e(9418991940),r=e(8739505998),l=e(6323355797),_=e(8300007136),d=e(1267040415),i=e(236241007),m=e(5641442783),h=e(3994181705),v=e(5332875232),y=e(5881236351),T=e(7268021173),I=e(1384076438),p=e(2607644860),g=e(8112788848),E=e(8214116048);const f=new a.Ay("trials_highlight_paid_features"),O={onClick:{enableClogAction:!0},elementName:"start_trial"},C={elementName:"upgrade_link",onClick:{enableClogAction:!0}},M=u(P=>{let{selectedMemberIds:k=s.Ml}=P;const x=(0,_.wA)(),F=l.ZO.PaidFeatureTrial,W=l.zG.Vhq,Y=(0,o.d4)(X=>(0,T.hq)(X,F,W)),S=(0,o.d4)(X=>(0,T.bp)(X,F,W)),L=(0,o.d4)(v.Si),w=(0,c.useCallback)(()=>{x((0,y.Ov)(k))},[x,k]),J=(0,c.useCallback)(()=>{x((0,i.A)({uiComponentVariant:n.UiComponentVariant.HUDDLES_INVITE_MODAL_FOOTER,onSpeedbumpContinue:w}))},[x,w]);if((0,c.useEffect)(()=>{x((0,I.A)({campaignType:F,campaignSubType:W,reason:"huddle_invite_modal",context:p.y.huddleInviteModal}))},[x,F,W]),!L||S)return null;const G=Y?f.rt("To use huddles with more people, <a>start a free trial.</a>",{"<a>":X=>{let{text:te}=X;return c.createElement(r.A,{"data-qa":"huddle_invite_modal_footer_banner_cta",onClick:J,autoClogProps:O},te)}}):f.rt("To use huddles with more people, <a>see upgrade options.</a>",{"<a>":X=>{let{text:te}=X;return c.createElement(d.A,{"data-qa":"huddle_invite_modal_footer_banner_cta",autoClogProps:C,useLink:!0},te)}});return c.createElement(t.A,{eventId:n.EventId.UPGRDEXP_HIGHLIGHT_PAID_FEATURES,uiComponentName:n.UiComponentName.HUDDLE_INVITE_MODAL_FREE_BANNER,clogImpression:!0},c.createElement("div",{className:"p-huddle_invite_modal_footer_banner"},c.createElement(m.A,{variant:h.G.HuddlesFreemium,promoType:F,promoSubtype:W,uiComponentVariant:n.UiComponentVariant.HUDDLES_INVITE_MODAL_FOOTER,toolTipZIndex:g.m.AboveFullScreen,toolTipPosition:E.yX.Bottom}),c.createElement("span",{className:"margin_left_50"},G)))},"HuddleInviteModalFooterBanner");M.displayName="HuddleInviteModalFooterBanner";const D=M},7396657731:(z,A,e)=>{"use strict";e.d(A,{A:()=>i});var t=e(3134334389),n=e(735940183),s=e(6244014364),a=e(4481313819),c=e(1743656885),o=e(7433432223),r=e(5712872315);const l=new n.Ay("trials_highlight_paid_features"),_=u(m=>{let{text:h}=m;return t.createElement(c.A,{articleId:4402059015315,ariaLabel:l.t("Learn more about Huddles")},h)},"AlertBannerHelpLink"),i=u(()=>t.createElement(a.A,{eventId:s.EventId.UPGRDEXP_HIGHLIGHT_PAID_FEATURES,uiComponentName:s.UiComponentName.HUDDLE_INVITE_MODAL_FREE_BANNER,clogImpression:!0},t.createElement("div",{className:"p-huddle_invite_modal_banner"},t.createElement(o.A,{theme:r.B.NONE,"data-qa":"huddle_invite_modal_free_banner"},l.rt("You\u2019re on the free version of Slack, so only one other person can join you in a huddle. <a>Learn more</a>",{"<a>":_,fallbackHash:"302b7b76d1085ff1532e888a72d2b35f253d5e82"})))),"HuddleInviteModalFreeBanner")},9645800439:(z,A,e)=>{"use strict";e.d(A,{A:()=>C});var t=e(3134334389),n=e(9418991940),s=e(735940183),a=e(5103164797),c=e(8300576667),o=e(1407713935),r=e(3730613858),l=e(1289024643),_=e(8040098042),d=e(4327331459);const i=new s.Ay("huddles");var m;(function(M){M.CHANNEL="channel",M.MEMBER="member"})(m||(m={}));function h(M){let{id:D,entity:P,channel:k,huddleId:x}=M,F;(0,_.A)(D)?F=m.CHANNEL:(0,d.A)(D)&&(F=m.MEMBER);const W=(0,n.d4)(X=>k&&(0,r.Sv)(X,k.id,D)),Y=W&&W.isKnown&&(W==null?void 0:W.isMember),S=k&&(0,o.JM)(k),L=(0,n.d4)(X=>(0,l.Ck)(X,x,D)),w=!!L&&L==="joining_soon";let J=null;if(L?J=w?i.t("Joining soon"):i.t("Invited"):k&&S&&!Y?J=i.t("Not in conversation"):k&&!S&&!Y&&(J=i.t("Not in channel")),!F)return null;let G;return F===m.CHANNEL?G=t.createElement(a.A,{channelId:D,channel:P}):F===m.MEMBER&&(G=t.createElement(c.A,{id:D,member:P,showPresence:!0,secondaryContent:J})),t.createElement("div",{className:"display_flex"},G)}u(h,"HuddleInviteMultiSelectRenderOption"),h.displayName="HuddleInviteMultiSelectRenderOption";const v=(0,t.memo)(h);var y=e(7090824688),T=e(630868093),I=e(3288846409),p=e(5286203919),g=e(5751973043);function E(){return E=Object.assign||function(M){for(var D=1;D<arguments.length;D++){var P=arguments[D];for(var k in P)Object.prototype.hasOwnProperty.call(P,k)&&(M[k]=P[k])}return M},E.apply(this,arguments)}u(E,"_extends");const f=new s.Ay("huddles"),O=u(M=>{let{isFreeTeam:D,experimentHuddlesInviteModalFreemiumImprovementsGroupOn:P,channel:k,otherMembersInHuddle:x,onSelectedMembersChange:F,onSelectedChannelChange:W,selectedMemberIds:Y=g.Ml,selectedChannel:S}=M;const L=(0,I.cw)(p.E9),w=(0,t.useMemo)(()=>W&&!k&&!D&&!(Y!=null&&Y.length),[k,D,W,Y]),J=(0,t.useMemo)(()=>S!=null&&S.id&&S.isCurrentSuggestedChannel?!0:!(S!=null&&S.id),[S]),G=(0,t.useMemo)(()=>({entities:{...w&&{channels:{canPost:!0,includeArchived:!1}},...J&&{members:{includeSelf:!1,includeSlackbot:!1,includeBots:!1},userGroups:!1}},sort:{frecency:!0,preferChannelMembers:!0,preferChannelsUserBelongsTo:!0,currentChannel:k},allowEmptyQuery:!0,filter:ae=>!x.includes(ae.id)}),[w,J,k,x]),X=(0,t.useCallback)(ae=>{W&&(0,_.A)(ae.value)?W(ae.value):F([ae.value])},[W,F]),te=(0,t.useCallback)(ae=>{const he=[];let _e;ae.forEach(ee=>{(0,_.A)(ee.value)?(!_e||ee.value!==(S==null?void 0:S.id))&&(_e=ee.value):he.push(ee.value)}),W==null||W(_e),F(he)},[W,F,S]),le=(0,t.useCallback)(ae=>{let{value:he,entity:_e}=ae;return t.createElement(v,{channel:k,id:he,entity:_e,huddleId:L})},[k,L]),ve=(0,t.useCallback)(ae=>{let{value:he}=ae;return(0,_.A)(he)?t.createElement(a.A,{channelId:he}):t.createElement(c.A,{id:he,showAvatar:!0})},[]),Q=(0,t.useMemo)(()=>({className:"padding_top_50 padding_bottom_50",searcherOptions:G,renderOption:le,selectId:"invite_participants",size:"medium",width:"100%",expandOnFocus:D,focusOnMount:!0}),[G,le,D]),Ae=(0,t.useMemo)(()=>{const ae=Y.map(he=>({value:he}));return S!=null&&S.id&&ae.push({value:S.id}),ae},[S,Y]);return D&&P?t.createElement(T.uR,E({},Q,{onOptionSelected:X,placeholderText:f.t("Find someone to invite\u2026"),renderSelectedOption:ve,selectedOption:Ae[0]})):t.createElement(y.h7,E({},Q,{onSelectedItemsChange:te,selectedOptions:Ae,placeholderText:f.t("Search by name")}))},"HuddleInviteModalSelect");O.displayName="HuddleInviteModalSelect";const C=O},605594140:(z,A,e)=>{"use strict";e.d(A,{A:()=>re});var t=e(3134334389),n=e(9418991940),s=e(3288846409),a=e(7715417323),c=e(5751973043),o=e(5363983309),r=e(9101533895),l=e(5286203919),_=e(6470070112),d=e(1407713935),i=e(5911067953),m=e(9706240641),h=e(4075246222),v=e(8300007136),y=e(6084388622),T=e(7937864072),I=e(3730613858),p=e(666760496),g=e(1563996154),E=e(444524526),f=e(980293773),O=e(9548972574),C=e(5795074931),M=e(5332875232),D=e(735940183),P=e(9289081806),k=e(581167618),x=e(3534324375),F=e(8276911661),W=e(8739505998),Y=e(438845125);const S=new D.Ay("huddles");function L(Te){let{members:Ce,createNewMpim:Pe}=Te;var fe,pe,q;const se=(0,n.Z2)(Le=>Ce.map(We=>(0,x.sE)(Le,(0,F.nv)(Le,We.slackId))));if(!Ce)return null;const ge=se&&se.slice(3),Oe=S.rt("{unknownMembers, plural, =1 {<strong>{name1}</strong>} =2 {<strong>{name1}</strong> and <strong>{name2}</strong>} =3 {<strong>{name1}</strong>, <strong>{name2}</strong>, and <strong>{name3}</strong>} other {<strong>{name1}</strong>, <strong>{name2}</strong>, <strong>{name3}</strong> and <strong>{numOthers}</strong> more}} won\u2019t be able to see messages sent in thread because this huddle began in a direct message. You can <a>start a new huddle</a> instead.",{unknownMembers:Ce.length,name1:t.createElement(Y.A,{slackId:(fe=Ce[0])===null||fe===void 0?void 0:fe.slackId}),name2:t.createElement(Y.A,{slackId:(pe=Ce[1])===null||pe===void 0?void 0:pe.slackId}),name3:t.createElement(Y.A,{slackId:(q=Ce[2])===null||q===void 0?void 0:q.slackId}),numOthers:t.createElement(g.Ay,{zIndex:"above_fs",position:"top",tip:(0,D.jd)(ge)},t.createElement("span",null,Ce.length-3))},Le=>{let{text:We,tag:Re}=Le;return Re==="a"?t.createElement(W.A,{onClick:Pe},We):null});return t.createElement(k.Ay,{level:k.A_.info,type:k.QE.custom},Oe)}u(L,"HuddleInviteMpimAlert"),L.displayName="HuddleInviteMpimAlert";const w=L;var J=e(7268021173),G=e(3677514771),X=e(6839188756),te=e(4983989341),le=e(4481313819),ve=e(6244014364),Q=e(1743656885),Ae=e(9953252450),ae=e(7396657731),he=e(9236164662),_e=e(9645800439),ee=e(6011052675),de=e(3109955471),Ie=e(3810478625),ce=e(2131614445),j=e(952756744),N=e(716227588),b=e(6259241484);const R=new D.Ay("huddles"),K={elementName:"learn_more",onClick:{enableClogAction:!0}};function B(Te){let{closeModal:Ce,callId:Pe,channelId:fe,selectedMemberIds:pe=c.Ml}=Te;const q=(0,v.wA)(),se=(0,T.A)(),ge=(0,n.d4)(C.WR),Oe=(0,n.d4)(_.pl),Le=(0,n.d4)(Ht=>(0,r.OL)(Ht,fe)),We=(0,n.d4)(O.qr),Re=(0,n.d4)(M.Si),we=(0,n.d4)(Ie.g),Je=(0,n.Z2)(Ht=>(0,O.ft)(Ht,fe).filter(Bt=>Bt.id!==ge).map(Bt=>Bt.id)),et=(0,n.d4)(Ht=>(0,N.Hp)(Ht,b.xu.HUDDLE_INVITE_MODAL))===b.ze.SUPPORT_UPGRADE_DECISION_TRIAL_EXPIRING_SOON_HUDDLES_BANNER,[lt,nt]=(0,t.useState)(pe),[at,ze]=(0,t.useState)(!1),Ke=(0,n.Z2)(Ht=>!fe||!(lt!=null&&lt.length)?[]:lt.filter(Qt=>{const sn=(0,I.Sv)(Ht,fe,Qt);return sn&&sn.isKnown&&!(sn!=null&&sn.isMember)?Qt:!1})),He=(0,n.d4)(G.H7),Ye=(0,X.tc)(He),_t=(0,n.d4)(J.iH),vt=(0,t.useCallback)(Ht=>{nt(Ht)},[]),Tt=(0,t.useCallback)(Ht=>{nt(lt.concat(Ht))},[lt]),Lt=(0,t.useMemo)(()=>{const Ht=(0,P.Hd)(Le);return Array.isArray(Ht)?Ht:[]},[Le]),ft=Lt.filter(Ht=>Ht!==ge),mt=(0,t.useCallback)((0,m.coroutine)(function*(){if(!fe)return;let Ht=lt.concat(Je);return Lt&&(Ht=(0,h.A)(Ht,Lt)),q((0,te.x)({channelId:fe,memberIds:Ht})).then(()=>{Ce()}).catch(Bt=>{se.error(Bt),ze(!1)})}),[fe,lt,Je,Lt,q,Ce,se]),Yt=(0,t.useCallback)((0,m.coroutine)(function*(){if(!fe)return;ze(!0);const Ht=lt.concat(Je);return q((0,p.A)({channelId:fe,userIds:Ht})).then(()=>{Ce()}).catch(Bt=>{se.error(Bt),ze(!1)})}),[fe,Ce,q,se,Je,lt]),nn=u(()=>Ye&&!Re&&!We?t.createElement(ae.A,null):_t&&!We&&!we?t.createElement(Ae.A,null):null,"maybeRenderBanner");nn.displayName="maybeRenderBanner";let jt,gn,on,Xt;const rn=u(Ht=>{const Bt=Ht.map(Qt=>t.createElement(E.A,{key:Qt,isBold:!1,id:Qt}));return Bt&&(0,D.jd)(Bt)},"listifiedOverflowMembers");rn.displayName="listifiedOverflowMembers",Ye&&Re&&!We?(jt=R.t("Invite someone else to your huddle"),on=R.rt("{participants, plural, =0 {<b>{firstParticipant}</b> is} =1 {<b>{firstParticipant}</b> and <b>{secondParticipant}</b> were} other {<b>{firstParticipant}</b> <a>and # others</a> were}} already invited, but {participants, plural, =0 {hasn\u2019t} =1 {haven\u2019t} other {haven\u2019t}} joined. ",{participants:(ft==null?void 0:ft.length)-1,firstParticipant:t.createElement(E.A,{isBold:!1,id:ft[0]}),secondParticipant:t.createElement(E.A,{isBold:!1,id:ft[1]}),"<a>":Ht=>{let{text:Bt}=Ht;return t.createElement(g.Ay,{zIndex:"above_fs",tip:rn(ft==null?void 0:ft.slice(1))},t.createElement("span",null,Bt))},"<b>":Ht=>{let{text:Bt}=Ht;return t.createElement("b",null,Bt)}}),Xt=R.rt("You\u2019re on the free version of Slack, so only one other person can join you in a huddle. Invite anyone until someone joins. <a>Learn more</a>",{"<a>":Ht=>{let{text:Bt}=Ht;return t.createElement(Q.A,{articleId:4402059015315,ariaLabel:R.t("Learn more about Huddles"),forceOpenInBrowser:!0,autoClogProps:K},Bt)},fallbackHash:"53e44c4bd8bcf67461de7b54ef1ec275b05f4829"})):(jt=R.t("Invite people to your huddle"),gn=R.t("You can invite people from outside this private conversation, but they may have restricted access to messages."));const Zt=(0,t.useMemo)(()=>lt.length>1?R.t("Send Invites"):R.t("Send Invite"),[lt]);return!Oe||!fe?null:t.createElement(f.dW,{overlayClassName:"p-huddle_invite_modal_shared_styles__overlay",closeModal:Ce,contentLabel:jt,shouldReturnFocusAfterClose:!0},t.createElement(f.rQ,null,t.createElement(f.Rc,{title:jt,subtitle:gn})),t.createElement(f.$m,null,t.createElement(f.qf,null,(on||Xt)&&t.createElement("p",null,on,Xt),t.createElement(_e.A,{isFreeTeam:Ye&&!We,experimentHuddlesInviteModalFreemiumImprovementsGroupOn:Re,channel:Le,otherMembersInHuddle:Je,onSelectedMembersChange:vt,selectedMemberIds:lt}),(Ke==null?void 0:Ke.length)>0&&t.createElement(w,{members:Ke.map(Ht=>({slackId:Ht})),createNewMpim:mt})),nn(),we&&t.createElement(j.s,null),We&&Ye&&!et&&t.createElement(ce.V,{showProBadge:!0,className:"p-huddle_invite_channel_or_start__upgrade_alert"}),t.createElement(de.A,{activeHuddleCallId:Pe,channel:Le,isFreeTeam:Ye&&!We,onSuggestedUserSelected:Tt,otherMembersInHuddle:Je,selectedMemberIds:lt})),t.createElement(f.jl,null,t.createElement(ee.A,{channelId:fe}),t.createElement(f.ox,null,t.createElement(f.s_,{type:"outline"},R.t("Cancel")),t.createElement(le.A,{clogImpression:!0,eventId:ve.EventId.HUDDLES_MPIM_INVITE},t.createElement(y.lV,{loading:at,onClick:Yt,type:"primary",disabled:!lt.length},Zt)))),Re&&Ye&&!We&&t.createElement(he.A,{selectedMemberIds:lt}))}u(B,"HuddleInviteMpim"),B.displayName="HuddleInviteMpim";const $=B;function Z(Te){let{closeModal:Ce=a.A,selectedMemberIds:Pe=c.Ml}=Te;const fe=(0,n.d4)(_.pl),pe=(0,s.cw)(l.E9),q=(0,s.cw)(l.hc),se=(0,n.d4)(ge=>(0,r.OL)(ge,q));return fe?(0,d.JM)(se)?t.createElement($,{callId:pe,channelId:q,closeModal:Ce,selectedMemberIds:Pe}):t.createElement(i.A,{callId:pe,channel:se,closeModal:Ce,selectedMemberIds:Pe}):null}u(Z,"HuddleInviteOrStartModal"),Z.displayName="HuddleInviteOrStartModal";const re=(0,o.A)(Z,{isStackable:!0})},3109955471:(z,A,e)=>{"use strict";e.d(A,{A:()=>le});var t=e(3134334389),n=e(2003990933),s=e(7156798807),a=e(5103024697),c=e(9418991940),o=e(5795074931),r=e(3730613858),l=e(8276911661),_=e(1289024643),d=e(4822627003),i=e(3214129289),m=e(9163492386),h=e(8683010724),v=e(9289081806),y=e(1407713935),T=e(8798294025),I=e(4562579337),p=e(8170643398),g=e(863407566),E=e(181849556),f=e(735940183),O=e(2828836153),C=e(3877384923);const M=new f.Ay("huddles");var D;(function(ve){ve[ve.Channel=0]="Channel",ve[ve.Here=1]="Here"})(D||(D={}));const P=u(ve=>{let{variation:Q}=ve;const Ae=(0,t.useMemo)(()=>{const ae=Q===D.Channel?M.t("@channel",{fallbackHash:"879f0b1bef59eeebf78cfd3a22f6f8077810cecf"}):M.t("@here",{fallbackHash:"879f0b1bef59eeebf78cfd3a22f6f8077810cecf"}),he=Q===D.Channel?M.t("Invite every member in this channel",{fallbackHash:"356143f00ea36746c3a9c41765b940644ca651cf",fallbackHashNs:"broadcast_keywords"}):M.t("Invite every online member in this channel",{fallbackHash:"d6f32ea27e0fd9186b386de54a63fc72a17a2075",fallbackHashNs:"broadcast_keywords"});return t.createElement("div",{className:"p-huddle_invite_channel_list_entity"},t.createElement("div",{className:"p-huddle_invite_channel_list_entity__icon_container"},t.createElement(h.A,{name:"mentions",size:"24",variation:"large"})),t.createElement("div",{className:"p-huddle_invite_channel_list_entity_text_container"},t.createElement("span",{className:"c-base_entity__text p-huddle_invite_channel_list_entity__title"},ae),t.createElement("span",{className:"c-base_entity__subtext"},he)))},[Q]);return t.createElement("div",{className:"p-huddle_invite_suggestion_tabs__menu_item_button__list_entity"},t.createElement(O.A,{size:C.ny.medium,padding:C.FK.normal,primaryContent:Ae}))},"HuddleInviteChannelListEntity");P.displayName="HuddleInviteChannelListEntity";const k=P;var x=e(8286248123),F=e(9548972574),W=e(5751973043),Y=e(9680914051),S=e(6470070112);const L=new f.Ay("huddles");var w;(function(ve){ve.SUGGESTIONS="suggestions",ve.INVITED="invited"})(w||(w={}));function J(ve,Q,Ae,ae,he,_e,ee){return!(!ve||Q||Ae||ve===ae||he.includes(ve)||_e.includes(ve)||ee.includes(ve))}u(J,"shouldSuggestMember");const G="channelEntityId",X="channelHereEntityId",te=u(ve=>{let{activeHuddleCallId:Q,channel:Ae,isFreeTeam:ae,onSuggestedUserSelected:he,onChannelSelected:_e,onChannelHereSelected:ee,otherMembersInHuddle:de,selectedMemberIds:Ie,channelSuggestionOptionSelected:ce=!1}=ve;const j=(0,c.d4)(o.WR),N=(0,c.d4)(He=>(0,x.q8)(He,Ae==null?void 0:Ae.id)),b=(0,c.d4)(S.df),R=(0,n.A)(N,"counts.member_count")||void 0,K=(0,y.JM)(Ae),B=(0,c.d4)(F.Sx),$=(0,c.d4)(He=>(0,_.k9)(He,Q)),Z=(0,c.d4)(He=>(0,_.I1)(He,Q)),Te=B+1+$+Z,Ce=(0,c.Z2)(He=>(0,_.Kx)(He,Q)),Pe=(0,t.useMemo)(()=>Ce?Object.keys(Ce):[],[Ce]),fe=Pe.length,pe=25,q=(0,c.Z2)(He=>(0,g.A)(He,(Ae==null?void 0:Ae.id)||"",pe,pe,!0).map(_t=>_t.id));let se=[];if((0,y.LI)(Ae)){const He=(0,T.e)(Ae);He&&se.push(He)}else if((0,y.yz)(Ae)){const He=(0,v.Ug)(Ae);He&&He.length&&(se=[...He])}else se=q;const ge=(0,c.wz)(He=>{if(ce||!se||!se.length)return W.Ml;const Ye=[];return se.forEach(_t=>{const vt=(0,l.nv)(He,_t);J(_t,(0,I.A)(vt),(0,p.oy)(vt),j,de,Pe,Ie)&&Ye.push({id:_t,isMemberOfChannel:!0})}),Ye}),Oe=(0,c.wz)(E.mc),Le=(0,c.wz)(He=>{if(!Oe||!Oe.length)return W.Ml;const Ye=[];return Oe.forEach(_t=>{const vt=(0,l.nv)(He,_t.id);if(!J(_t.id,(0,I.A)(vt),(0,p.oy)(vt),j,de,Pe,Ie)||se.includes(_t.id))return;const Tt=Ae&&(0,r.Sv)(He,Ae.id,_t.id),Lt=Tt&&Tt.isKnown&&Tt.isMember;Ye.push({id:_t.id,isMemberOfChannel:Lt})}),Ye}),We=(0,t.useMemo)(()=>!_e||(0,y.PC)(Ae)?!1:R<=Y.XG&&Te+R<=b&&!ce,[R,ce,Te,b,_e,Ae]),Re=(0,t.useMemo)(()=>ge.length>=pe?ge.slice(0,pe):[...ge,...Le].slice(0,pe),[ge,Le]),we=(0,t.useMemo)(()=>Re.map(He=>He.id),[Re]),Je=(0,t.useMemo)(()=>(0,s.A)(Re,"id"),[Re]),it=(0,t.useMemo)(()=>Math.min(60*Math.max(fe,we.length),240),[we,fe]),et=(0,t.useCallback)((He,Ye)=>{if(Ye.key===G)return t.createElement(k,{variation:D.Channel});if(Ye.key===X)return t.createElement(k,{variation:D.Here});const _t=Je[Ye.key];if(!_t)return;let vt=null;return _t.isMemberOfChannel===!1&&(K||(0,y.PC)(Ae)?vt=L.t("Not in conversation"):vt=L.t("Not in channel")),t.createElement("div",{className:"p-huddle_invite_suggestion_tabs__menu_item_button__list_entity"},t.createElement(d.A,{id:_t.id,secondaryContent:vt}))},[K,Je,Ae]),lt=(0,t.useCallback)(He=>{if(He.id){if(He.id===G){_e&&_e();return}if(He.id===X){ee&&ee();return}he(He.id)}},[ee,_e,he]),nt=(0,t.useCallback)(()=>{let He=we;return We&&(He=[G,...we]),t.createElement(a.A,{disableHeight:!0},Ye=>{let{width:_t}=Ye;return t.createElement(m.A,{"aria-label":L.t("Suggested"),keys:He,rowRenderer:et,onItemClick:lt,width:_t,height:it})})},[We,et,we,lt,it]),at=(0,t.useCallback)(He=>{const Ye=Pe[He],_t=Ce==null?void 0:Ce[Ye];if(!_t)return null;const vt=_t==="joining_soon",Tt=t.createElement("div",{className:"p-huddle_invite_suggestion_tabs__menu_item__pending_status_container"},t.createElement(h.A,{name:vt?"clock":"paper-plane",size:"20"}),t.createElement("span",null,vt?L.t("Joining soon"):L.t("Invited")));return t.createElement("div",{className:"p-huddle_invite_suggestion_tabs__menu_item__list_entity"},t.createElement(d.A,{id:Ye,secondaryContent:Tt}))},[Pe,Ce]),ze=(0,t.useCallback)(()=>t.createElement(a.A,{disableHeight:!0},He=>{let{width:Ye}=He;return t.createElement(m.A,{"aria-label":L.t("Invited"),keys:Pe,rowRenderer:at,width:Ye,height:it})}),[Pe,at,it]),Ke=(0,t.useMemo)(()=>{const He=[];return we.length&&He.push({title:L.t("Suggested"),id:w.SUGGESTIONS,content:nt()}),He.push({title:L.t("Invited"),id:w.INVITED,titleCount:fe,content:ze()}),He},[we,fe,ze,nt]);return!Q||ae?null:t.createElement("div",{className:"p-huddle_invite_suggestion_tabs"},t.createElement(i.A,{fullHeight:!0,tabs:Ke,tabMenuClassnames:"p-huddle_invite_suggestion_tabs__tab_menu"}))},"HuddleInviteSuggestionTabs");te.displayName="HuddleInviteSuggestionTabs";const le=t.memo(te)},4869203191:(z,A,e)=>{"use strict";e.d(A,{Ay:()=>p,Gr:()=>I,Lv:()=>i,jc:()=>y,z2:()=>T});var t=e(9706240641),n=e.n(t),s=e(735940183),a=e(2778217221),c=e(8664881451),o=e(2854284421),r=e(2047021170),l=e(5203103513),_=e(2001112473);const d=new s.Ay("huddles"),i="LOUNGE_MUSIC_PLAYER",m=[o.N3,o._4,o.j1,o._V,o.PM,o.tn,o.uu,o.jc];var h;(function(g){g.WaitingRoom="waiting",g.Subway="subway",g.Whistle="whistle",g.Jazz="jazz",g.Focus="focus",g.DiscoParty="disco",g.Zen="zen",g.Nature="nature"})(h||(h={}));const v=h.Jazz,y=u(g=>g?!!Object.values(h).includes(g):!1,"isValidSongKey"),T=u(g=>(0,r.ty)(g,l.Mz)||v,"getSongKeyFromUserPref"),I=u(()=>({[h.WaitingRoom]:{key:h.WaitingRoom,urlName:"waitingRoom",url:o.tn,displayName:d.t("Waiting Room")},[h.Subway]:{key:h.Subway,urlName:"subwayMusic",url:o.PM,displayName:d.t("Subway Music")},[h.Whistle]:{key:h.Whistle,urlName:"whistleTune",url:o.jc,displayName:d.t("Whistle Tune")},[h.Jazz]:{key:h.Jazz,urlName:"waitingMuzak",url:o.uu,displayName:d.t("Smooth Jazz")},[h.Focus]:{key:h.Focus,urlName:"focusBeats",url:o._4,displayName:d.t("Focus Beats")},[h.DiscoParty]:{key:h.DiscoParty,urlName:"discoParty",url:o.N3,displayName:d.t("Happy Bass")},[h.Zen]:{key:h.Zen,urlName:"momentOfZen",url:o.j1,displayName:d.t("Sound Bath")},[h.Nature]:{key:h.Nature,urlName:"natureMeditation",url:o._V,displayName:d.t("Nature Meditation")}}),"getSongsMetadata");let p=u(class uo{static getInstance(E){let{experimentHuddlesLoungeMusicPlayerGroupOn:f}=E;return uo.instance||(uo.instance=new uo({experimentHuddlesLoungeMusicPlayerGroupOn:f})),uo.instance}constructor({experimentHuddlesLoungeMusicPlayerGroupOn:E}){this.getCurrentTrackDisplayName=()=>{const O=m[this.activeTrackIndex],C=I(),M=Object.values(C).find(D=>D.url===O);return M==null?void 0:M.displayName};var f=this;this.playMusic=(0,t.coroutine)(function*(){let{songKey:O,registerOnEndedCallback:C,logger:M,fromFirstTrack:D,loopSong:P}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{registerOnEndedCallback:!1,fromFirstTrack:!0,loopSong:!1};D&&(f.activeTrackIndex=0),C&&m.forEach(Y=>{(0,c.TQ)(Y,{ended:f.playNextTrack})});let k=m[f.activeTrackIndex];const x=(0,c.Dd)(k);if(O){var F;x&&(0,c.ds)(k);const S=(F=I()[O])===null||F===void 0?void 0:F.url,L=S?m.findIndex(w=>w===S):-1;L>-1&&(k=S,f.activeTrackIndex=L)}const W=(0,_._o)();if(W&&x)try{yield x.setSinkId(W),M==null||M.info(a.o7,`setSinkId success for lounge music on deviceID: ${W}`)}catch{M==null||M.info(a.o7,`setSinkId failed for lounge music on deviceID: ${W}`)}(0,c.ZH)(k,{loop:!!P})}),this.stopMusic=O=>{let{clearOnEndedCallback:C,logger:M,logContext:D}=O;C&&m.forEach(P=>{(0,c.Rj)(P,"ended",this.playNextTrack)}),(0,c.ds)(m[this.activeTrackIndex],{logFailure:!1}),M.info(a.o7,`stopped lounge music [${D}]`)},this.incrementActiveTrackIndex=()=>{this.activeTrackIndex<m.length-1?this.activeTrackIndex+=1:this.activeTrackIndex=0},this.playNextTrack=()=>{(0,c.ds)(m[this.activeTrackIndex]),this.incrementActiveTrackIndex(),(0,c.ZH)(m[this.activeTrackIndex],{loop:!1})},this.activeTrackIndex=0,this.experimentHuddlesLoungeMusicPlayerGroupOn=E}},"HuddleLoungeMusicManager")},124213367:(z,A,e)=>{"use strict";e.d(A,{A:()=>h});var t=e(3134334389),n=e(9391594207),s=e(3297051565),a=e.n(s),c=e(4979382452),o=e(4636370173),r=e(2465132699),l=e(6308822),_=e(9003400431);const d={className:a().string,closeModal:a().func.isRequired},i={className:void 0};function m(v){return t.createElement(c.A,{className:v.className,closeModal:v.closeModal},t.createElement(o.A,null,t.createElement(r.A,null,t.createElement("div",{className:"c-lazy_modal"},t.createElement(l.A,null)))))}u(m,"LoadingModal"),m.displayName="LoadingModal",m.propTypes=d,m.defaultProps=i;const h=(0,n.N)(null,v=>({closeModal:function(){for(var y=arguments.length,T=new Array(y),I=0;I<y;I++)T[I]=arguments[I];return v((0,_.O)(...T))}}))(m)},79199995:(z,A,e)=>{"use strict";e.d(A,{WJ:()=>_,eW:()=>l,fJ:()=>h,g2:()=>m,kY:()=>d,oE:()=>r});var t=e(4418517660),n=e.n(t),s=e(583204418),a=e(735940183),c=e(6471801899);const o=new a.Ay("lists");var r;(function(v){v.Today="today",v.Yesterday="yesterday",v.Tomorrow="tomorrow",v.ThisWeek="this_week",v.NextWeek="next_week",v.LastWeek="last_week",v.SinceILastViewed="since_i_last_viewed"})(r||(r={}));const l=u(v=>!v.options||v.options.dateFormat===s.cf.Default?c.Wl:v.options.dateFormat,"getDateFormat"),_=u(v=>Object.values(r).includes(v),"isDateFilterOption"),d=u(v=>{switch(v){case r.Today:return o.t("Today");case r.Yesterday:return o.t("Yesterday");case r.Tomorrow:return o.t("Tomorrow");case r.ThisWeek:return o.t("This week");case r.NextWeek:return o.t("Next week");case r.LastWeek:return o.t("Last week");case r.SinceILastViewed:return o.t("Since last time you viewed");default:return v}},"formatDateForMenu"),i=u(v=>{const y=n()(v).startOf("isoWeek"),T=n()(v).endOf("isoWeek"),I=[];let p=y;for(;p<=T;)I.push(p),p=p.clone().add(1,"days");return I},"getWeekdays"),m=u(v=>{let y;switch(v){case r.Today:y=n()().format(c.DX);break;case r.Yesterday:y=n()().subtract(1,"days").format(c.DX);break;case r.Tomorrow:y=n()().add(1,"days").format(c.DX);break;case r.ThisWeek:y=i(n()()).map(T=>T.format(c.DX));break;case r.NextWeek:y=i(n()().add(1,"weeks")).map(T=>T.format(c.DX));break;case r.LastWeek:y=i(n()().subtract(1,"weeks")).map(T=>T.format(c.DX));break;case r.SinceILastViewed:y=n()().format(c.DX);break;default:y=v}return y},"getStaticDateValue"),h=n()().format(c.DX)},3001769570:(z,A,e)=>{"use strict";e.d(A,{OQ:()=>T,PL:()=>l,R8:()=>E,UE:()=>v,Ui:()=>y,aI:()=>h,aN:()=>I,bV:()=>m,bw:()=>i,lx:()=>p,nM:()=>g,rD:()=>d});var t=e(1649982175),n=e(166097325),s=e(7682358855),a=e(8191156954),c=e(4097827290),o=e(735940183);const r=new o.Ay("lists"),l=u((f,O)=>f.indexOf(O)===-1?[...f,O]:f.filter(M=>M!==O),"toggleValueInFilterValues"),_=u(f=>{if(!f.length)return f;const O=f==null?void 0:f.flatMap(M=>M.split("|"));return[...new Set(O)]},"parseUserIdsAndRemoveDupes"),d=u((f,O)=>{const C=[];return Object.values(f??{}).forEach(D=>{if(D.fields&&D.fields[O]){const P=D.fields[O];C.push(P.trim())}}),[s._4,..._(C)]},"getUserIdsInUserColumns"),i=u((f,O,C)=>{const M=f.map(P=>(0,t.A)(P,[C])),D=O.map(P=>(0,t.A)(P,[C]));return(0,n.A)(M,D)},"isLocalAndServerFilterSortsEqual"),m=u((f,O)=>{var C;const M=O.get((C=f.key)!==null&&C!==void 0?C:"");return M?!(0,n.A)(M.operator,f.operator)||!(0,n.A)(new Set(M.values),new Set(f.values)):!0},"isFilterUnsavedOrModified"),h=u(f=>{let O=f;return Boolean(O.find(M=>M.type===a.$.CreatedTime))||(O=[...O,{id:a.$.CreatedTime,name:"Created time",key:a.$.CreatedTime,type:a.$.CreatedTime,isPrimaryColumn:!1}]),O},"appendCreatedTimeDataColumn"),v=u(f=>{switch(f.type){case a.$.Checkbox:case a.$.Completed:case a.$.Message:return[c.t.IsEmpty,c.t.IsNotEmpty];case a.$.Assignee:case a.$.CreatedBy:case a.$.LastEditedBy:case a.$.Rating:case a.$.Select:case a.$.User:case a.$.Text:return[c.t.Contains,c.t.DoesNotContain,c.t.IsEmpty,c.t.IsNotEmpty];case a.$.Currency:case a.$.Number:case a.$.Date:return[c.t.Equal,c.t.NotEqual,c.t.LessThan,c.t.GreaterThan,c.t.IsEmpty,c.t.IsNotEmpty];default:return[c.t.Equal,c.t.NotEqual,c.t.IsEmpty,c.t.IsNotEmpty]}},"getOperatorsFromColumn"),y=u(f=>f.type===a.$.Checkbox,"isCheckboxFilter"),T=u(f=>f.type===a.$.Completed,"isCompletedFilter"),I=u(f=>f.operator===c.t.IsEmpty||f.operator===c.t.IsNotEmpty,"isEmptyOperator"),p=u(f=>f.operator===c.t.IsMe||f.operator===c.t.IsNotMe,"isMeOperator"),g=u(f=>f.type===a.$.Date||f.type===a.$.DueDate||f.type===a.$.CreatedTime||f.type===a.$.LastEditedTime,"isDateFilter"),E=u((f,O)=>{switch(f){case c.t.IsEmpty:return y(O)?r.t("is not checked"):T(O)?r.t("Not completed"):r.t("is empty");case c.t.IsNotEmpty:return y(O)?r.t("is checked"):T(O)?r.t("Completed"):r.t("is not empty");case c.t.Equal:return g(O)?r.t("is"):r.t("is equal to");case c.t.NotEqual:return g(O)?r.t("is not"):r.t("is not equal to");case c.t.GreaterThan:return g(O)?r.t("is after"):r.t("is greater than");case c.t.LessThan:return g(O)?r.t("is before"):r.t("is less than");case c.t.GreaterThanOrEqual:return r.t("is greater than or equal to");case c.t.LessThanOrEqual:return r.t("is less than or equal to");case c.t.Contains:return r.t("includes");case c.t.DoesNotContain:return r.t("does not include");case c.t.IsMe:return r.t("is me");case c.t.IsNotMe:return r.t("is not me");default:return""}},"getFilterOperatorLabel")},9216332371:(z,A,e)=>{"use strict";e.d(A,{AO:()=>ae,Hs:()=>j,Jn:()=>f,M1:()=>ee,Nh:()=>Ae,Po:()=>Y,Q6:()=>L,Rw:()=>N,Sb:()=>_e,c$:()=>Ie,g2:()=>ce,iT:()=>de,kv:()=>J,u1:()=>he,us:()=>ve});var t=e(3783723764),n=e(1703559452),s=e(2240330919),a=e(2101927269),c=e(4418517660),o=e.n(c),r=e(7682358855),l=e(79199995),_=e(8191156954),d=e(4097827290),i=e(2188787324),m=e(7334104107),h=e(4919145213),v=e(583204418),y=e(5045557812),T=e(3342113153),I=e(3802883493),p=e(8088280230),g=e(6471801899),E=e(7606781622);const f=u(b=>{let{record:R,colKey:K}=b;var B,$,Z,re,Te;if(!(R==null||(B=R.fallback)===null||B===void 0)&&B[K])return R.fallback[K];if(!(R==null||($=R.fields)===null||$===void 0||(Z=$.fallback)===null||Z===void 0)&&Z[K])return R==null||(re=R.fields)===null||re===void 0||(Te=re.fallback)===null||Te===void 0?void 0:Te[K];if(R[K]){if((0,y.A)(R[K])){var Ce,Pe,fe,pe,q;return(q=(pe=(fe=(Ce=R[K])===null||Ce===void 0||(Pe=Ce[0])===null||Pe===void 0?void 0:Pe.elements[0])===null||fe===void 0?void 0:fe.elements[0])===null||pe===void 0?void 0:pe.text)!==null&&q!==void 0?q:""}return R[K].toString()}return""},"getStringValue"),O=u(b=>{const R=o()(b).startOf("isoWeek"),K=o()(b).endOf("isoWeek"),B=[];let $=R;for(;$<=K;)B.push($),$=$.clone().add(1,"days");return B},"getWeekdays"),C=u((b,R)=>{const K="YYYY-MM-DD";let B;switch(b){case l.oE.Today:B=o()().format(K);break;case l.oE.Yesterday:B=o()().subtract(1,"days").format(K);break;case l.oE.Tomorrow:B=o()().add(1,"days").format(K);break;case l.oE.ThisWeek:B=O(o()()).map(Z=>Z.format(K));break;case l.oE.NextWeek:B=O(o()().add(1,"weeks")).map(Z=>Z.format(K));break;case l.oE.LastWeek:B=O(o()().subtract(1,"weeks")).map(Z=>Z.format(K));break;case l.oE.SinceILastViewed:return B=o().unix(R),B;default:B=o()(b,K).format(K)}return Array.isArray(B)?B.map(Z=>o()(Z,K)):o()(B,K)},"convertDynamicDateToStatic"),M=u(function(b,R,K){let B=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const $=B?R:R==null?void 0:R.clone().startOf("day"),Z=B?K:K==null?void 0:K.clone().startOf("day");switch(b){case d.t.NotEqual:return!($!=null&&$.isSame(Z));case d.t.GreaterThan:return $==null?void 0:$.isBefore(Z);case d.t.GreaterThanOrEqual:return $==null?void 0:$.isSameOrBefore(Z);case d.t.LessThan:return $==null?void 0:$.isAfter(Z);case d.t.LessThanOrEqual:return $==null?void 0:$.isSameOrAfter(Z);case d.t.Equal:default:return $==null?void 0:$.isSame(Z)}},"multiDateOperatorFilterValueCheck"),D=u((b,R,K,B,$)=>{if(!R.values[0])return b;let Z=K;const re=R.values[0]===l.oE.SinceILastViewed;return re&&(Z=d.t.GreaterThan),b.filter(Te=>{if($!=null&&$.has(Te.id))return!0;const Ce=Te[R.key];let Pe=Ce?o()(Ce).startOf("day"):void 0;return isNaN(Ce)||(Pe=o().unix(Ce)),R.values.some(fe=>{if(!fe)return!1;const pe=C(fe.toString(),B);return Array.isArray(pe)?Z===d.t.NotEqual?!pe.some(q=>q&&Pe?q.clone().startOf("day").isSame(Pe):!1):pe.some(q=>q&&Pe?M(Z,q,Pe):!1):pe&&Pe?M(Z,pe,Pe,re):!1})})},"multiDateFilter"),P=u((b,R,K,B)=>{const $=R.values[0]||"";return b.filter(Z=>{if(B!=null&&B.has(Z.id))return!0;const re=Z[R.key]||"";switch(K){case d.t.DoesNotContain:return!re.toLowerCase().includes($.toString().toLowerCase());case d.t.Contains:default:return re.toLowerCase().includes($.toString().toLowerCase())}})},"textFilter"),k=u((b,R,K,B)=>{const $=R.values[0]||"";return b.filter(Z=>{if(B!=null&&B.has(Z.id))return!0;const re=f({record:Z,colKey:R.key});switch(K){case d.t.DoesNotContain:return!re.toLowerCase().includes($.toString().toLowerCase());case d.t.Contains:default:return re.toLowerCase().includes($.toString().toLowerCase())}})},"richTextFilter"),x=u((b,R,K,B)=>{if(!R.values.length)return b;var $;const Z=Number(($=R.values[0])!==null&&$!==void 0?$:"");return b.filter(re=>{if(B!=null&&B.has(re.id))return!0;var Te;const Ce=Number((Te=re[R.key])!==null&&Te!==void 0?Te:"");if(!(Z&&!Ce))switch(K){case d.t.NotEqual:return Ce!==Z;case d.t.GreaterThan:return Ce>Z;case d.t.GreaterThanOrEqual:return Ce>=Z;case d.t.LessThan:return Ce<Z;case d.t.LessThanOrEqual:return Ce<=Z;case d.t.Equal:default:return Ce===Z}})},"numberFilter"),F=u((b,R,K,B)=>{const $=new Set(R.values);return $.size?b.filter(Z=>{if(B!=null&&B.has(Z.id))return!0;var re;const Te=String((re=Z[R.key])!==null&&re!==void 0?re:"");switch(K){case d.t.Contains:return $.has(Te);case d.t.DoesNotContain:return!$.has(Te);case d.t.IsEmpty:return Te===null;case d.t.IsNotEmpty:return Te!==null;default:return!0}}):b},"multiRatingFilter"),W=u((b,R,K,B,$,Z)=>{const re=R.values.map(Ce=>Ce===r._4&&Z?Z:Ce),Te=new Set(re);return Te.size?b.filter(Ce=>{if($!=null&&$.has(Ce.id))return!0;const Pe=Ce[R.key],fe=(Pe??"").split(r.eY).filter(Boolean);let pe=!1;for(const q of fe){if(Te.has(q)){pe=!0;break}if(!B)break}return K===d.t.Equal?pe:K===d.t.NotEqual?!pe:K===d.t.Contains?pe:K===d.t.DoesNotContain?!pe:!0}):b},"multiOptionFilter");function Y(b){return b===0?!1:!b||Array.isArray(b)&&b.length===0}u(Y,"isEmptyValue");const S=u((b,R,K,B,$,Z)=>{let re=b;return R.forEach(Te=>{const Ce=K.find(q=>q.key===Te.key);if(!Ce)return;const Pe=Te.operator;if(Pe===d.t.IsEmpty){re=re.filter(q=>Z!=null&&Z.has(q.id)?!0:Y(q[Te.key]));return}if(Pe===d.t.IsNotEmpty){re=re.filter(q=>Z!=null&&Z.has(q.id)?!0:!Y(q[Te.key]));return}switch(Ce.type){case _.$.Text:re=k(re,Te,Pe,Z);break;case _.$.Email:case _.$.Phone:re=P(re,Te,Pe,Z);break;case _.$.Number:case _.$.Currency:re=x(re,Te,Pe,Z);break;case _.$.Rating:re=F(re,Te,Pe,Z);break;case _.$.Date:case _.$.DueDate:case _.$.CreatedTime:case _.$.LastEditedTime:re=D(re,Te,Pe,$,Z);break;case _.$.Checkbox:case _.$.Completed:return;case _.$.Select:var fe;re=W(re,Te,Pe,((fe=Ce.options)===null||fe===void 0?void 0:fe.format)===v.YP.MultiSelect,Z);break;case _.$.Channel:case _.$.Canvas:case _.$.User:case _.$.Assignee:case _.$.CreatedBy:case _.$.LastEditedBy:switch(Pe){case d.t.IsMe:re=re.filter(q=>{var se;return Z!=null&&Z.has(q.id)?!0:(se=q[Te.key])===null||se===void 0?void 0:se.includes(B)});break;case d.t.IsNotMe:re=re.filter(q=>{var se;return Z!=null&&Z.has(q.id)?!0:!(!((se=q[Te.key])===null||se===void 0)&&se.includes(B))});break;default:var pe;re=W(re,Te,Pe,((pe=Ce.options)===null||pe===void 0?void 0:pe.format)===v.hx.MultiEntity,Z,B)}break;default:re=P(re,Te,Pe,Z);break}}),re},"applyFiltersToRecords"),L=new Map([[_.$.Text,""],[_.$.Email,""],[_.$.Date,""],[_.$.Checkbox,!1],[_.$.Completed,!1],[_.$.Number,0],[_.$.Rating,0],[_.$.CreatedTime,0],[_.$.LastEditedTime,0],[_.$.Channel,""],[_.$.User,""],[_.$.CreatedBy,""],[_.$.LastEditedBy,""]]);function w(b){if(!Array.isArray(b)||b.length===0)return"";const R=u(K=>{for(const B of K){if(B.type==="text"&&B.text)return B.text;if(B.elements&&Array.isArray(B.elements)){const $=R(B.elements);if($)return $}}return""},"findTextRecursively");for(const K of b)if(K.elements&&Array.isArray(K.elements)){const B=R(K.elements);if(B)return B}return""}u(w,"extractFirstTextElement");const J=u((b,R,K,B)=>{const $=R.map(Ce=>Ce.ascending?"asc":"desc"),Z=new Map;for(const Ce of K)if(Ce.type===_.$.Select){var re;const Pe=((re=Ce.options)===null||re===void 0?void 0:re.choices)||[];for(let fe=0;fe<Pe.length;fe++){const pe=Pe[fe],q=`${Ce.key}:${pe.value}`;Z.set(q,fe)}}const Te=R.map(Ce=>Pe=>{const fe=K.find(Le=>Le.key===Ce.key),pe=Ce.ascending;if(!fe)return"";const q=Pe[Ce.key];let se=q??L.get(fe.type||_.$.Text);if(se==null&&(se=pe?Number.MAX_SAFE_INTEGER:-1/0),fe.type===_.$.Select){var ge;const Le=(((ge=fe.options)===null||ge===void 0?void 0:ge.choices)||[]).length,We=(q??"").split(r.eY).filter(Boolean);if(Le===0||We.length===0)se=pe?Number.MAX_SAFE_INTEGER:-1/0;else{let Re=Le;for(const we of We){const Je=`${fe.key}:${we}`;var Oe;const it=(Oe=Z.get(Je))!==null&&Oe!==void 0?Oe:Le;Re=Math.min(Re,it)}Re<Le?se=Re:se=pe?Number.MAX_SAFE_INTEGER:-1/0}}if(fe.type===_.$.User&&B&&(q==null||q===""?se=pe?"zzzzzzzz":"":B[q]?se=B[q].toLowerCase():se=pe?"zzzzzzzz":""),fe.type===_.$.Text&&(q==null||q===""||Array.isArray(q)&&q.length===0?se=pe?"zzzzzzzz":"":typeof q=="string"?se=q.toLowerCase():se=w(q).toLowerCase()),fe.type===_.$.Vote){const Le=(q??"").split(r.eY).filter(Boolean);Le.length>0?se=Le.length:pe?se=Number.MAX_SAFE_INTEGER:se=-1/0}if((fe.type===_.$.Number||fe.type===_.$.Currency||fe.type===_.$.Rating)&&(q==null||q===""?se=pe?Number.MAX_SAFE_INTEGER:-1/0:se=Number(q)),fe.type===_.$.Date||fe.type===_.$.DueDate||fe.type===_.$.CreatedTime||fe.type===_.$.LastEditedTime){const Le=new Date(q);q==null||q===""?se=pe?Number.MAX_SAFE_INTEGER:-1/0:isNaN(Le.getTime())||(se=Le.getTime())}return se});return(0,t.A)(b,Te,$)},"applySortToRecords"),G=new Set([_.$.Text,_.$.Email,_.$.Phone,_.$.Number,_.$.Rating,_.$.Select,_.$.User]),X=u((b,R,K,B)=>{const $=R.filter(Pe=>G.has(Pe.type)),Z=new Map;for(const Pe of $)if(Pe.type===_.$.Select){var re,Te;const fe=(Te=(re=Pe.options)===null||re===void 0?void 0:re.choices)!==null&&Te!==void 0?Te:[];for(const{value:pe,label:q}of fe){const se=`${Pe.key}:${pe}`;Z.set(se,q)}}const Ce=K.toLowerCase();return b.filter(Pe=>(0,n.A)($,fe=>{const pe=f({record:Pe,colKey:fe.key});if(fe.type===_.$.Select){var q;let Oe=pe.split(r.eY).filter(Boolean);((q=fe.options)===null||q===void 0?void 0:q.format)===v.YP.MultiSelect||(Oe=Oe.slice(0,1));for(const We of Oe){const Re=`${fe.key}:${We}`;var se;if(((se=Z.get(Re))!==null&&se!==void 0?se:pe).toLowerCase().includes(Ce))return!0}}if(fe.type===_.$.User&&B){var ge;const Oe=(ge=B[pe])!==null&&ge!==void 0?ge:"";return Oe&&Oe.toLowerCase().includes(Ce)}return pe.toLowerCase().includes(Ce)}))},"applySearchStringToRecords"),te=u(b=>{let{listRecords:R,records:K}=b;return K.map(B=>{const $=R==null?void 0:R[B.id];return{...B,highlightAsNew:$==null?void 0:$.highlightAsNew}})},"applyHighlightAsNew"),le=u(b=>{let{listRecords:R,records:K}=b;return K.map(B=>{const $=R==null?void 0:R[B.id];return{...B,isOpenInFlexpane:$==null?void 0:$.isOpenInFlexpane}})},"applyIsOpenInFlexpane"),ve=u(b=>{let{listRecords:R,records:K,schema:B,filterObj:$,sorts:Z,searchString:re,lastReadTimestamp:Te,bottomRecordIds:Ce,userNames:Pe}=b,fe=K;if($){const{filters:pe,currentUserId:q}=$;fe=S(fe,pe,B,q,Te,Ce)}return Z&&(fe=J(fe,Z,B,Pe)),re&&(fe=X(fe,B,re,Pe)),fe=te({listRecords:R,records:fe}),fe=le({listRecords:R,records:fe}),fe},"applyModifiersToRecords");function Q(b,R,K){const B=(0,E.Ld)(b,R,K);return B&&!(0,h.A)(B)&&!(0,m.aw)(B)&&!(0,m.aH)(B)}u(Q,"isValidMarkedMessageForListThread");function Ae(b,R,K){return(0,s.A)((0,a.A)(K,B=>Q(b,R,B)))}u(Ae,"maxRealTsForListThread");function ae(b,R,K,B){const $=(0,g.Dv)(B,Object.values(K)),Z=$.get(b==null?void 0:b.id),re=$.get(R==null?void 0:R.id);let Te=null,Ce=null;if(b&&R){if(Z)Te=Z;else{var Pe,fe;Te=!((Pe=K[b.id])===null||Pe===void 0)&&Pe.position?`${(fe=K[b.id])===null||fe===void 0?void 0:fe.position}`:null}if(re)Ce=re;else{var pe,q;Ce=!((pe=K[R.id])===null||pe===void 0)&&pe.position?`${(q=K[R.id])===null||q===void 0?void 0:q.position}`:null}}else if(b)if(Z)Te=Z;else{var se,ge;Te=!((se=K[b.id])===null||se===void 0)&&se.position?`${(ge=K[b.id])===null||ge===void 0?void 0:ge.position}`:null}else if(R)if(re)Ce=re;else{var Oe,Le;Ce=!((Oe=K[R.id])===null||Oe===void 0)&&Oe.position?`${(Le=K[R.id])===null||Le===void 0?void 0:Le.position}`:null}return(0,I.TU)(Te,Ce)}u(ae,"calculateFractionalRecordPosition");const he=u(b=>{var R;const K=(0,p.A)({input:b});return K&&K[0]&&K[0].offset===0&&((R=K[0].url)===null||R===void 0?void 0:R.length)===(b==null?void 0:b.length)?[{type:"rich_text",elements:[{type:"rich_text_section",elements:[{type:"link",url:K[0].url||""}]}]}]:[{type:"rich_text",elements:[{type:"rich_text_section",elements:[{type:"text",text:b||""}]}]}]},"convertStringToBlocks"),_e=u(b=>{if(b instanceof HTMLElement){if(b instanceof HTMLInputElement&&["checkbox","radio"].includes(b.type))return!0;if(["input","textarea","select"].includes(b.tagName.toLowerCase())||b.isContentEditable)return!1}return!0},"shouldHandleUndoFrom"),ee=u((b,R)=>{const K=[];var B;const $=(B=(0,i.Df)(b))!==null&&B!==void 0?B:[],Z=(0,i.Jq)(b).length||(0,i.Si)(b);return R.forEach((re,Te)=>{const Ce=$.some(ge=>(ge==null?void 0:ge.user_id)===(re==null?void 0:re.id));var Pe;const fe=(Pe=re==null?void 0:re.is_profile_only_user)!==null&&Pe!==void 0?Pe:!1;var pe;const q=(pe=re==null?void 0:re.is_self)!==null&&pe!==void 0?pe:!1;!fe&&!q&&!Ce&&!Z&&K.push(Te)}),K},"getRestrictedSelectedTokenIndexes"),de=u(b=>["created_time","created_by","last_edited_time","last_edited_by"].includes(b.type),"isMetaColumn"),Ie=u((b,R)=>{if(!b)return"";const K=f({record:b,colKey:"name"});if(!K)return"";let B=(0,T.Kx)(K==null?void 0:K.toLowerCase().split(/[ :/-]/).filter(Boolean).join("-"));return B=B.split("-").filter(Boolean).join("-"),R&&!B.startsWith(R)&&(B=`${R}${B}`),B.slice(0,(0,T.zU)())},"generateChannelNameFromRecordName"),ce=u((b,R)=>((R==null?void 0:R.editors)||[]).filter(K=>K!==b),"getListRecordChannelInitialInvitedMemberIds"),j=u((b,R)=>{var K,B;return b?R&&(R.type===_.$.MultiSelect||R.type===_.$.Select&&(R==null||(K=R.options)===null||K===void 0?void 0:K.format)===v.YP.MultiSelect||(R.type===_.$.User||R.type===_.$.Channel||R.type===_.$.Canvas)&&(R==null||(B=R.options)===null||B===void 0?void 0:B.format)===v.hx.MultiEntity)?new Set(b.split(r.eY).filter(Boolean)):new Set([b]):new Set},"splitMultiValueField"),N=u(b=>b==null?void 0:b.includes("/lists/"),"isListLink")},2670882607:(z,A,e)=>{"use strict";e.d(A,{e:()=>o});var t=e(3134334389),n=e(5255740490),s=e(9418991940),a=e(6422693406),c=e(2047021170);const o=t.memo(t.forwardRef((r,l)=>{let{getAnimationImport:_,className:d,height:i,svgClassName:m,loadingClassName:h,errorClassName:v,description:y,loop:T=!1,autoplay:I=!1,renderLoading:p,renderError:g,preserveAspectRatio:E}=r;const f=(0,s.d4)(W=>(0,c.ty)(W,"a11y_animations")),[O,C]=(0,t.useState)(!0),[M,D]=(0,t.useState)(!1),P=(0,t.useRef)(null),k=(0,t.useRef)(null),x=(0,t.useRef)(null);x.current||(x.current=a.S.all([e.e("gantry-v2-async-lottie-web").then(e.t.bind(e,221124150,23)),_()]).then(W=>{let[Y,S]=W;if(!P.current)throw new Error("Lottie animation missing container");return C(!1),k.current=Y.loadAnimation({container:P.current,renderer:"svg",loop:T,autoplay:!!(f&&I),animationData:S,rendererSettings:{className:(0,n.A)("p-lottie__svg",m),description:y,preserveAspectRatio:E}}),a.S.resolve(k.current)}).catch(W=>(D(!0),a.S.reject(W)))),(0,t.useEffect)(()=>()=>{x.current&&x.current.cancel(),k.current&&k.current.destroy()},[x,k]),(0,t.useImperativeHandle)(l,()=>x.current,[x]);const F=(0,t.useMemo)(()=>O&&p?p():M&&g?g():null,[p,g,O,M]);return t.createElement("div",{ref:P,style:i!==void 0?{height:i}:void 0,className:(0,n.A)("p-lottie",d,O&&h,M&&v)},F)}))},5460331959:(z,A,e)=>{"use strict";e.d(A,{A:()=>_});var t=e(3134334389),n=e(7715417323),s=e(4978843660),a=e(166097325),c=e(6696292586),o=e(6650208157);const r=4;function l(d){let{children:i,fallbackWidth:m=void 0,onResize:h=n.A}=d;const[v,y]=(0,t.useState)({width:0,height:0}),[T,I]=(0,t.useState)(!1),p=(0,t.useRef)([]);function g(f){let{width:O}=f;if(p.current.unshift(O),p.current.length<r)return!1;p.current.length>r&&(p.current.length=r);const C=(0,s.A)(p.current,2);return C.slice(1).every(M=>(0,a.A)(M,C[0]))}u(g,"looksLikeResizeLoop");const E=(0,t.useCallback)(f=>{h(f),y(f.bounds),(0,c.A)(m)&&!T&&I(g(f.bounds))},[m,h,T]);return t.createElement(o.A,{bounds:!0,onResize:E},f=>{let{measureRef:O}=f;return i({...v,width:T&&m?m:v.width,measureRef:O})})}u(l,"Measure"),l.displayName="Measure";const _=l},9758574739:(z,A,e)=>{"use strict";e.d(A,{e:()=>p});var t=e(3134334389),n=e(2683115972),s=e(7138682671),a=e(5375115868),c=e(4967176632),o=e(7811786890),r=e(6259241484),l=e(8300007136),_=e(3603672985),d=e(8452232783),i=e(2432967967),m=e(581167618),h=e(8739505998),v=e(3416652175),y=e.n(v);const T=(0,o.Wz)({notificationName:[o.mw]}),I={picked:"",notificationName:""},p=u(g=>{let{initialValues:E=I,validate:f=T,onCloseModal:O,megaphoneSpaceName:C,notificationList:M}=g;const[D,P]=(0,t.useState)(""),[k,x]=(0,t.useState)(!1),[F,W]=(0,t.useState)(!1),Y=(0,l.wA)(),[S,L]=(0,t.useState)(""),w=(0,t.useCallback)(X=>L(X),[]),J=(0,t.useCallback)(()=>{if(!D){x(!0);return}let X={};if(S.length)try{X=JSON.parse(S)}catch{W(!0);return}O==null||O(),Y((0,_.G0)({spaceName:C,notificationName:D,notificationData:X})),C===r.xu.LAUNCH_MODAL&&Y((0,i.A)())},[D,S,Y,C,O]),G=(0,t.useCallback)((X,te)=>{P(X),te("picked",X),x(!1),W(!1)},[]);return t.createElement(c.A,{initialValues:E,validate:f,onSubmit:J},X=>{let{isSubmitting:te,values:le,setFieldValue:ve}=X;return t.createElement(t.Fragment,null,t.createElement("h2",null,"\u{1F4E3} Megaphone Dispatcher"),"Click the Dispatch button below to instantly render Megaphone Notifications on the UI.",t.createElement("div",{className:y().spaceNameContainer},"Space Name",t.createElement("div",{className:y().spaceName},C)),t.createElement("div",{className:y().notificationName},"Notification Name"),t.createElement("div",{className:y().notificationList},Object.keys(M).sort().map((Q,Ae)=>t.createElement(s.A,{text:Q,htmlFor:`field-radio-${Ae}`,type:"inline",cursor:"pointer",key:Q},t.createElement(a.A,{id:`field-radio-${Ae}`,name:"picked",value:Q,checked:le.picked===Q,onChange:()=>G(Q,ve)})))),t.createElement(s.A,{text:"Notification Data",optional:!0},t.createElement(d.A,{name:"notification_data",id:"notification_data",placeholder:'Ex: { "Field Name": "<String Value>", "Field Name": <Numeric Value> }',onChange:w,value:S,className:y().textArea})),t.createElement("div",{className:y().alert},t.createElement(m.Ay,{type:"boxed",level:"warning",icon:"warning",align:"left"},t.createElement("span",{className:y().alertText},t.createElement("b",null,"Some Megaphone notifications may not be dispatched due to various reasons, such as but not limited to:"),t.createElement("li",null," Missing notification data "),t.createElement("li",null,"The notification being part of an experiment "),"For questions or further assistance, reach out to us at"," ",t.createElement("b",null,t.createElement(h.A,{href:"https://app.slack.com/client/E12KS1G65/C0765PUTPDL",target:"_blank"},"#proj-megaphone-dispatcher")),"."))),k&&t.createElement("div",{className:y().formError},"Please select a notification."),F&&t.createElement("div",{className:y().formError},"There was an error parsing Notification Data, please try again."),t.createElement(n.Ay,{onClick:J,disabled:te},"Dispatch"))})},"DispatcherForm");p.displayName="DispatcherForm"},4445888975:(z,A,e)=>{"use strict";e.d(A,{R:()=>r,h:()=>l});var t=e(3134334389),n=e(8300007136),s=e(9418991940),a=e(3603672985),c=e(716227588),o=e(4724591729);const r=u(()=>{const _=!(0,o.KV)()||(0,o.b3)(),d=(0,n.wA)(),i=(0,s.d4)(c.y$);return(0,t.useEffect)(()=>{const m=u(h=>{_&&h.ctrlKey&&h.shiftKey&&h.key==="M"&&d((0,a.cv)(!i))},"handleKeydown");return window.addEventListener("keydown",m),()=>{window.removeEventListener("keydown",m)}},[_,d,i]),{shouldShowDispatcherViewer:i}},"useDispatcherToggleShortcut"),l=u(function(){let _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const[d,i]=(0,t.useState)(_),m=(0,t.useCallback)(h=>{i(h)},[]);return{isModalOpen:d,toggleModal:m}},"useModal")},5062503310:(z,A,e)=>{"use strict";e.d(A,{A:()=>t});const t={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",transform:"translate(-50%, -50%)",border:0,padding:0,background:"transparent"},overlay:{backgroundColor:"rgba(208, 208, 208, 0.4)",zIndex:1e4}}},4902318931:(z,A,e)=>{"use strict";e.d(A,{$W:()=>S,sl:()=>w,Ay:()=>J});var t=e(3134334389),n=e(8300007136),s=e(9418991940),a=e(716227588),c=e(6259241484),o=e(7487228876),r=e(7003004874),l=e(1655938719),_=e(2938177083),d=e(101973425),i=e(4481313819),m=e(2567914105),h=e(3603672985),v=e(9881565722),y=e(4761125736),T=e(169770637),I=e(4003148341),p=e(4244379358),g=e(6258289677),E=e(9758574739),f=e(2312625946),O=e(4445888975),C=e(5062503310),M=e(397939223),D=e.n(M);const P=u(G=>{let{megaphoneSpaceName:X,notificationList:te}=G;const{isModalOpen:le,toggleModal:ve}=(0,O.h)(!1);return t.createElement("div",{className:D().container},t.createElement(f.Ay,{tip:X,position:"top",zIndex:"menu_above_fs"},t.createElement("span",{className:D().dispatcherViewerIcon,role:"button",tabIndex:0,"aria-label":"Open Viewer Modal",onClick:()=>ve(!0)})),t.createElement(g.A,{isOpen:le,onRequestClose:()=>ve(!1),style:C.A},t.createElement("div",{className:D().dispatcherViewerDetails},t.createElement(E.e,{megaphoneSpaceName:X,notificationList:te,onCloseModal:()=>ve(!1)}))))},"DispatcherViewer");P.displayName="DispatcherViewer";const k=(0,p.A)(P),x=u(G=>{let{children:X,megaphoneSpaceName:te,notificationList:le}=G;const{shouldShowDispatcherViewer:ve}=(0,O.R)();return t.createElement(t.Fragment,null,ve&&t.createElement("div",{className:D().dispatcherViewer},t.createElement(k,{megaphoneSpaceName:te,notificationList:le})),X)},"DispatcherToggle");x.displayName="DispatcherToggle";const F=(0,p.A)(x),W={isInMegaphoneContainerContext:!0},Y={isInMegaphoneContainerContext:!1},S=(0,t.createContext)(Y),L=u(G=>{let{fetchDataOnMount:X,notifications:te,spaceName:le,children:ve,shouldAlwaysRenderChildren:Q,shouldPassPropsToChildren:Ae,channelScopedId:ae,componentClassName:he,..._e}=G;var ee;const de=(0,n.wA)(),Ie=(0,I.x)(),ce=(0,s.d4)(m.oY),j=(0,s.d4)(a.up),N=(0,s.d4)(Pe=>(0,y._Z)(Pe,"megaphone_coachmark_suppression")==="on"),{isInsideModal:b}=(0,v.k)(),R=(0,s.d4)(Pe=>(0,a.Hp)(Pe,le,ae)),K=(0,s.d4)(Pe=>(0,a.OL)(Pe,le,ae)),B=(0,t.useCallback)(()=>{de((0,r.A)({notificationName:R,action:c.hw.IMPRESSION}))},[de,R]),$=(0,t.useCallback)(Pe=>{de((0,_.A)({spaceName:le,action:Pe}))},[de,le]),Z=(0,t.useCallback)(()=>{de((0,l.iR)({event:{type:c.jo.REQUEST_SPACES,spaces:[le]}}))},[de,le]),re=u(()=>Q?Ae&&t.isValidElement(ve)?t.cloneElement(ve,{..._e}):t.createElement(F,{megaphoneSpaceName:le,notificationList:te},ve):t.createElement(F,{megaphoneSpaceName:le,notificationList:te},null),"maybeRenderChildren");re.displayName="maybeRenderChildren",(0,t.useEffect)(()=>{le&&X&&Z()},[X,le,Z]);const Te=te==null||(ee=te[R])===null||ee===void 0?void 0:ee.component,Ce=N&&Te&&!b&&ce&&le===c.xu.IN_PRODUCT_COACHMARK;if(Ce&&!j){de((0,h.co)(!0));const Pe=Ie.createMetricsTrace({label:"megaphone",samplingOptions:{sampleType:T.tS.SESSION,sampleRate:.1}}),fe=Pe.count({name:"megaphone_coachmark_suppress"});fe.addTags({notification:R}),fe.close(),Ie.reportTrace(Pe)}return!le||!R||N&&le===c.xu.IN_PRODUCT_COACHMARK&&j||Ce?re():Te?t.createElement(i.A,{megaphoneSpaceName:le,megaphoneNotificationName:R},t.createElement(S.Provider,{value:W},t.createElement(F,{megaphoneSpaceName:le,notificationList:te},null),t.createElement(t.Suspense,{fallback:null},t.createElement(Te,{...K,recordNotificationEventImpression:B,recordAndClearNotificationEvent:$,notificationName:R,className:he,channelScopedId:ae,..._e},ve)))):(te||(0,o.h)({spaceName:le,notificationName:R}),re())},"MegaphoneContainer");L.displayName="MegaphoneContainer";const w=(0,d.Ay)(L),J=L},3656161791:(z,A,e)=>{"use strict";e.d(A,{C:()=>t});const t={showStrangerProfile:!1,hideRestriction:!0,maybeShowPresenceIndicator:!1,maybeShowTitle:!1,maybeShowVerifiedFooter:!0,maybeShowEmailField:{showLabel:!1,showValue:!0},showFullProfileLink:!1,showOrganizationField:{showLabel:!0,showValue:!0},showProfilePicture:!0,showMemberProfileFields:!1,showMemberProfileButtons:!1}},1293324111:(z,A,e)=>{"use strict";e.d(A,{V:()=>n});var t=e(3134334389);class n extends t.PureComponent{render(){return t.createElement(t.Fragment,null,this.props.children)}}u(n,"PassThrough"),n.displayName="PassThrough"},8950789382:(z,A,e)=>{"use strict";e.d(A,{s:()=>p});var t=e(9706240641),n=e.n(t),s=e(1031947056),a=e(352142497),c=e(82287009),o=e(8999545852),r=e(3193155968),l=e(7573598208),_=e(3110884894),d=e(6514066170),i=e(755982243),m=e(796111729),h=e(485355941),v=e(6695353875),y=e(9932860381),T=e(7176966205),I=e(9629572172);const p=(0,s.Ay)("Opens a view in a new child window",function(){var g=(0,t.coroutine)(function*(E,f,O,C){let{viewId:M,params:D,clogParams:P}=O;if(!(0,h.M2)())return;const k=f(),{isMainWindow:x}=C(I.U);if((0,v.yZ)(k)&&x&&(0,y.Xy)(M)){E((0,T.$)({viewId:M,params:D}));return}let F=!1;if((0,d.A)(k,M)){let W,Y={[r.mq.Primary]:{id:M,params:D,viewType:(0,l.A)(M)}};Y=E((0,o.VO)({viewSet:Y,windowId:r.N2}));const S=(0,i.w)(M),L=S;if(M==="thread"&&(D!=null&&D.threadId)){const w=(0,_.Sb)(D==null?void 0:D.threadId).channelId;F=!0,Y={[r.mq.Primary]:{id:w||(D==null?void 0:D.entityId),params:void 0,viewType:a.D.Channel},[r.mq.Secondary]:{id:M,params:D,viewType:a.D.Thread}},W=r.mq.Secondary}M==="channel_canvas"&&(Y={[r.mq.Primary]:{id:D==null?void 0:D.channelId,params:void 0,viewType:a.D.Channel},[r.mq.Secondary]:{id:"channel_canvas",params:D,viewType:a.D.ChannelCanvas}}),E((0,c.Bb)({viewSet:Y,shouldNavigateInContext:S,shouldShowSearch:L,...W&&{containerOrigin:W},clogParams:P??{uiComponentName:origin,entryPoint:"cmd_click"},forceSingleColumnMode:F}))}else(0,m.Ay)({getState:f}).action("CHILD-WINDOWS","skipped opening a Conversation View because the ID is not supported:",M)});return function(E,f,O,C){return g.apply(this,arguments)}}());p.meta={name:"createThunk",key:"createThunkmaybeOpenInWindow",description:"Opens a view in a new child window"}},3652828077:(z,A,e)=>{"use strict";e.d(A,{O:()=>_});var t=e(3134334389),n=e(2844658640),s=e.n(n),a=e(1641606663),c=e(2233780559);function o(){return o=Object.assign||function(d){for(var i=1;i<arguments.length;i++){var m=arguments[i];for(var h in m)Object.prototype.hasOwnProperty.call(m,h)&&(d[h]=m[h])}return d},o.apply(this,arguments)}u(o,"_extends");const r=(0,c.eF)(c.vt.REACT_VIRTUALIZED,d=>s()(d));function l(d){let{refToForward:i,...m}=d;const{windowRef:h}=(0,t.useContext)(a.M),v=r(h.deref()).List;return t.createElement(v,o({ref:i},m))}u(l,"PortableReactVirtualizedList"),l.displayName="PortableReactVirtualizedList";const _=t.forwardRef((d,i)=>t.createElement(l,o({refToForward:i},d)))},3564619745:(z,A,e)=>{"use strict";e.d(A,{UJ:()=>g,Z2:()=>O,av:()=>a,ew:()=>p,fd:()=>c,k7:()=>E,mZ:()=>T,p6:()=>n,qA:()=>s,qH:()=>v,qL:()=>y,qS:()=>C,tH:()=>o,xo:()=>M,xw:()=>I,zZ:()=>f});var t=e(571104883);const n="use-theme-font",s="San Francisco Pro",a="Segoe UI",c='-apple-system, BlinkMacSystemFont, "Segoe UI", "Noto Sans", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji"',o="Slack-Lato, Slack-Fractions,appleLogo,sans-serif",r="Arial",l="Courier",_="Open Dyslexic",d='"Comic Sans MS", cursive, sans-serif',i="Georgia",m="Noto Sans, sans-serif",h="Verdana",v="Lato",y=(()=>{if((0,t.cX)())return s;if((0,t.uF)())return a})(),T={default:!0,fontFamily:o,label:v,value:"lato"},I={label:"OpenDyslexic",value:"opendyslexic",fontFamily:_},p={label:"Arial",value:"arial",fontFamily:r},g={label:"Courier",value:"courier",fontFamily:l},E={label:"Comic Sans",value:"comicsans",fontFamily:d},f={label:"Georgia",value:"georgia",fontFamily:i},O={label:"Noto Sans",value:"notosans",fontFamily:m},C={label:"Verdana",value:"verdana",fontFamily:h},M={lato:["lato","slack-lato"],arial:["arial"],courier:["courier"],opendyslexic:["open dyslexic"],comicsans:["comic sans","comic sans ms"],verdana:["verdana"],georgia:["georgia"],notosans:["noto sans"],"system-font":(0,t.cX)()?["san francisco","san francisco pro","sf pro","sf"]:["segoe","segoe ui"]}},4173072539:(z,A,e)=>{"use strict";e.d(A,{A:()=>r});var t=e(3134334389),n=e(6839188756),s=e(9892470785),a=e(2312625946),c=e(6968387112);const o=u(l=>{let{invitingTeam:_}=l;const d=_.domain&&`${(0,n.k7)(_.id,_.domain)}.${(0,c.Xk)()}`,i=t.createElement(s.A,{id:_.id,team:_,shouldMaybeOpenOrgCard:!0,shouldMaybeShowVerified:!0,bold:!0,tabIndex:d?0:void 0});return d?t.createElement(a.Ay,{tip:d},t.createElement("span",null,i)):i},"InvitingTeamName");o.displayName="InvitingTeamName";const r=o},3694049677:(z,A,e)=>{"use strict";e.d(A,{A:()=>c});var t=e(3134334389),n=e(9574544148),s=e(2312625946);const a=u(o=>{let{invitingUser:r,showEmailTooltip:l=!0}=o;var _;const d=r==null||(_=r.profile)===null||_===void 0?void 0:_.email,i=l&&d,m=t.createElement(n.A,{member:r,skipPrefCompliance:!0,tabIndex:i?0:void 0});return i?t.createElement(s.Ay,{tip:d},m):m},"InvitingUserName");a.displayName="InvitingUserName";const c=a},2408732225:(z,A,e)=>{"use strict";e.d(A,{n:()=>_});var t=e(3134334389),n=e(3656161791),s=e(4775127335),a=e(698013937),c=e(6415587347);let o=null;const l=u(()=>(o===null&&(o=document&&document.documentElement&&document.documentElement.hasAttribute("data-primer")),o),"isPrimer");class _ extends t.PureComponent{render(){var i,m;const{className:h,team:v,user:y,size:T,allowDefaultProfileImage:I,fallbackUserIcon:p,fallbackUserIcon2x:g,isInteractive:E,hideUserIcon:f}=this.props,O=!!(!((i=y.profile)===null||i===void 0)&&i.is_custom_image),C=!!p||!!g,M=!(!((m=v.icon)===null||m===void 0)&&m.image_default),{imageUrl:D,imageUrl2x:P}=this.getProfileImages();if((O||I||C)&&!f){const k=y.profile.real_name;return t.createElement(s.f1,{className:h,imageUrl:O||I?D:p,imageUrl2x:O||I?P:g,memberOrBotName:k,size:T,teamId:v.id,team:v,isInteractive:E&&!l()&&!!y.id,renderCustomBadge:this.renderTeamBadge,showCard:!0,userId:y.id,profileCardProps:{allowOutsideOfSonic:!0,maybeAllowInteract:!1,...n.C}})}return M?t.createElement(a.U,{teamName:v.name,icon:v.icon,size:T,className:h}):null}constructor(i){super(i),this.renderTeamBadge=()=>null,this.getProfileImages=()=>{var T;const{team:I,user:p,size:g}=this.props,E=(0,c.Ay)({size:g,teamOrEnterpriseId:I.id,memberId:p.id,avatarHash:(T=p.profile)===null||T===void 0?void 0:T.avatar_hash}),f=(E==null?void 0:E.imageUrl)||"",O=E!=null&&E.imageUrl2x?`${E.imageUrl2x} 2x`:"";return{imageUrl:f,imageUrl2x:O}};const{team:m,allowTeamInitials:h,shouldRenderTeamBadge:v,teamIconSize:y}=i;v&&(this.renderTeamBadge=(0,s.fp)({isExternal:!0,team:m,teamId:m.id,allowTeamInitials:h,teamIconSize:y}))}}u(_,"UserIcon"),_.displayName="UserIcon",_.defaultProps={shouldRenderTeamBadge:!1,allowTeamInitials:!1,allowDefaultProfileImage:!1,className:"p-shared_channel_invite_header__avatar",isInteractive:!0,hideUserIcon:!1}},7599421656:(z,A,e)=>{"use strict";e.d(A,{B:()=>s});var t=e(2384831516),n=e(4761125736);const s=(0,t.Mz)(a=>(0,n._Z)(a,"shortcuts_workspace_picker")==="on");s.meta={name:"createSelector",key:"createSelectorshouldShowShortcutsSpeedbump",description:a=>(0,n._Z)(a,"shortcuts_workspace_picker")==="on"}},9874616273:(z,A,e)=>{"use strict";e.d(A,{A:()=>a});var t=e(3134334389),n=e(8214116048);const s=u(c=>{let{width:o=20,height:r=20,className:l="",theme:_}=c;const d=_===n.Sx.Dark?"/img/slack_logo_white_text.svg":"/img/slack_logo.svg";return t.createElement("div",{role:"banner"},t.createElement("img",{className:l,src:d,alt:"Slack",width:o,height:r}))},"SlackLogo");s.displayName="SlackLogo";const a=s},6989432693:(z,A,e)=>{"use strict";e.d(A,{A:()=>d});var t=e(3134334389),n=e(9418991940),s=e(8276911661),a=e(8921478798),c=e(8170643398),o=e(735940183),r=e(7576317051);const l=new o.Ay("channel_token"),_=u(i=>{let{userId:m,isFirst:h,isSelf:v}=i;var y;const T=(y=(0,n.d4)(p=>(0,s.nv)(p,m)))!==null&&y!==void 0?y:void 0;let I=(0,n.d4)(p=>(0,a.I)(p,m));return(0,c.t8)(T)?t.createElement(r.A,{type:"unknown",subtler:!0}):(0,c.QR)(T)?t.createElement(r.A,{type:"non-existent",subtler:!0}):(v&&(I=h?l.t("You"):l.t("you")),t.createElement(t.Fragment,null,I))},"TooltipMemberName");_.displayName="TooltipMemberName";const d=t.memo(_)},8734174229:(z,A,e)=>{"use strict";e.d(A,{A:()=>s});var t=e(5737576046),n=e(7884000776);function s(a){let{inputText:c,inputDelta:o,channelId:r,threadTs:l}=a;const _=(0,t.zC)({viewContext:n.Y.THREAD,channelId:r,threadTs:l});_&&(o?_.setContents({contents:o.ops}):_.setText(c));const d=(0,t.zC)({viewContext:n.Y.THREADS_VIEW,channelId:r,threadTs:l});d&&(o?d.setContents({contents:o.ops}):d.setText(c))}u(s,"populateThreadInputs")},8011352381:(z,A,e)=>{"use strict";e.d(A,{A:()=>c});var t=e(3134334389),n=e(5255740490),s=e(1035168942);const a=t.forwardRef((o,r)=>{let{children:l,lines:_,breakWords:d=!0,withTooltip:i,shouldForceTooltipVisible:m,customTooltipText:h,tooltipClassName:v}=o;const y={"--lines":_},T=t.createElement("span",{className:(0,n.A)("c-truncate",{"c-truncate--break_words":d}),style:y,ref:r},l);return i?t.createElement(s.A,{tip:h||l,zIndex:"above_fs",shouldForceVisible:m,tipClassName:v},T):T});a.displayName="Truncate";const c=a},1267040415:(z,A,e)=>{"use strict";e.d(A,{A:()=>p});var t=e(3134334389),n=e(735940183),s=e(9391594207),a=e(6244014364),c=e(6323355797),o=e(9418991940),r=e(3677514771),l=e(7268021173),_=e(4481313819),d=e(2683115972),i=e(8739505998),m=e(2312625946);function h(){return h=Object.assign||function(g){for(var E=1;E<arguments.length;E++){var f=arguments[E];for(var O in f)Object.prototype.hasOwnProperty.call(f,O)&&(g[O]=f[O])}return g},h.apply(this,arguments)}u(h,"_extends");const v=new n.Ay("plan_change"),y=u(g=>{let{children:E,planLevel:f,entryPoint:O,feature:C,hash:M,action:D,useLink:P,refToForward:k,productId:x,productLevel:F,team:W,isTeamInTrial:Y,tooltipProps:S,...L}=g;const w=(0,o.d4)(X=>(0,c.m6)(X,{entryPoint:O,productId:x,productLevel:F,action:D,feature:C,hash:M,planLevel:f})),J=P?i.A:d.z9,G=t.createElement(J,h({ref:k},L,{href:w}),E);return t.createElement(_.A,{eventId:a.EventId.UPGRDEXP_UPSELL_PROMPTS,clogImpression:!0},S?t.createElement(m.Ay,h({tip:v.t("Upgrade")},S),G):G)},"PlansPageCTABase");y.displayName="PlansPageCTABase";const T=u(g=>({team:(0,r.H7)(g),isTeamInTrial:(0,l.iH)(g)}),"mapStateToProps"),I=(0,s.N)(T)(y),p=t.forwardRef((g,E)=>t.createElement(I,h({},g,{refToForward:E})))},4177200783:(z,A,e)=>{"use strict";e.d(A,{A:()=>g});var t=e(3134334389),n=e(8300007136),s=e(9418991940),a=e(735940183),c=e(6244014364),o=e(4761125736),r=e(9003400431),l=e(4481313819),_=e(8719380546),d=e(5712872315),i=e(1743656885);const m=new a.Ay("msg_input"),h={elementName:"learn_more",onClick:{enableClogAction:!0}},v=u(E=>{let{isScheduledMessage:f}=E;const O=(0,n.wA)(),C=(0,t.useCallback)(()=>{O((0,r.O)())},[O]);if(!(0,s.d4)(k=>(0,o._Z)(k,"upgrd_5684")==="on"))return null;const D=f?m.t("Message not scheduled"):m.t("Message not sent"),P=m.rt("Your team isn\u2019t able to send messages right now. Review any apps or webhooks that may be sending a high-volume of messages. <learnMoreLink>Learn more</learnMoreLink> about message limits.",{fallbackHash:"a15c5b3859af53dcefc79016b421009c7adc9bf6","<learnMoreLink>":k=>{let{text:x}=k;return t.createElement(i.A,{"data-qa":"Message-limit-error-modal-learn-more-link",articleId:115002422943,hash:"message-and-file-visibility-limit",autoClogProps:h,forceOpenInBrowser:!0},x)}});return t.createElement(l.A,{eventId:c.EventId.UPGRDEXP_HIGHLIGHT_PAID_FEATURES,clogImpression:!0,uiComponentName:c.UiComponentName.MESSAGE_LIMIT_ERROR_MODAL},t.createElement(_.A,{"data-qa":"message-limit-error-modal",title:D,titleIcon:"warning",bodyContent:P,onRequestClose:C,theme:d.B.ERROR}))},"MessageLimitErrorModal");v.displayName="MessageLimitErrorModal";const y=v;var T=e(1031947056),I=e(2375333597);const p=(0,T.Ay)("Open modal when a message send fails due to team having hit the message limit",function(E,f){let O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return E((0,I.q)({element:t.createElement(y,O)}))});p.meta={name:"createThunk",key:"createThunkopenMessageLimitErrorModal",description:"Open modal when a message send fails due to team having hit the message limit"};const g=p},1064007131:(z,A,e)=>{"use strict";e.d(A,{J6:()=>y,SX:()=>v,mF:()=>m});var t=e(4761125736),n=e(3677514771),s=e(6839188756),a=e(6323355797),c=e(7268021173),o=e(1960898919),r=e(716227588),l=e(6259241484),_=e(8327608922);const d=u(T=>isShowcaseBestPracticesEnabled(T,!1),"isShowcaseBestPracticesEnabledWithoutExposures"),i=u(T=>[{promoType:a.ZO.PaidFeatureTrial,promoSubtype:a.zG.V3},{promoType:a.ZO.PaidFeatureTrial,promoSubtype:a.zG.MessageLimit},{promoType:a.ZO.PaidFeatureTrial,promoSubtype:a.zG.Vhq},{promoType:a.ZO.PaidFeatureTrial,promoSubtype:a.zG.Canvas},{promoType:a.ZO.PaidFeatureTrial,promoSubtype:a.zG.WorkflowBuilder},{promoType:a.ZO.PaidFeatureTrial,promoSubtype:a.zG.SharedChannels},{promoType:a.ZO.PaidFeatureTrial,promoSubtype:a.zG.SharedChannels14Days},{promoType:a.ZO.PaidFeatureTrial,promoSubtype:a.zG.MessageLimit14Days},{promoType:a.ZO.PaidFeatureTrial,promoSubtype:a.zG.Vhq14Days},{promoType:a.ZO.PaidFeatureTrial,promoSubtype:a.zG.Canvas14Days},{promoType:a.ZO.ImmediateStartTrial,promoSubtype:a.zG.ImmediateStartTrial14Days},{promoType:a.ZO.SharedChannelsFreeTrial,promoSubtype:a.zG.Inviter14},{promoType:a.ZO.BringBackSlackToWorkTrial},{promoType:a.ZO.PaidFeatureTrial,promoSubtype:a.zG.WorkflowBuilder14Days}].some(p=>{let{promoType:g,promoSubtype:E}=p;return(0,c.hq)(T,g,E)}),"checkIfEligibleForShorterGuidedTrial"),m={CONTROL:"control",TREATMENT_1:"treatment1",TREATMENT_2:"treatment2"},h=u(T=>{const I=[{spaceName:l.xu.SIDEBAR_MENU_HEADER,notificationName:l.ze.SUPPORT_UPGRADE_DECISION_TRIAL_USAGE_SIDEBAR_MENU_HEADER},{spaceName:l.xu.SYNTHETIC_CANVAS_HEADER,notificationName:l.ze.SUPPORT_UPGRADE_DECISION_CANVAS_PAGE_BANNER},{spaceName:l.xu.MESSAGE_PANE,notificationName:l.ze.SUPPORT_UPGRADE_DECISION_SHARED_CHANNEL_BANNER}];for(let p=0;p<I.length;p++){const{spaceName:g,notificationName:E}=I[p];if((0,r.Hp)(T,g)===E){const O=(0,r.OL)(T,g)||null,C=O?O.experimentGroup:null;if(C===m.TREATMENT_1||C===m.TREATMENT_2)return C}}return null},"getExperimentGroupFromMegaPhone"),v=u(function(T,I){let p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const g=(0,n.H7)(T);return(0,s.tc)(g)&&(I||i(T))?(0,t._Z)(T,"shorter_guided_trials",p):(0,c.iH)(T)?h(T)||(0,o.ax)(T,"shorter_guided_trials"):null},"isInExperimentShorterGuidedTrialsGroup"),y=u(function(T,I){let p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return v(T,I,p)===m.TREATMENT_2?a.ew.SHORTENED_FEATURE_TRIAL:a.ew.PAID_FEATURE_TRIAL},"getTrialLength")},7914553163:(z,A,e)=>{"use strict";e.d(A,{Ay:()=>y,MX:()=>i});var t=e(7268021173),n=e(1384076438),s=e(6839188756),a=e(3134334389),c=e(9418991940),o=e(3677514771),r=e(8300007136),l=e(6323355797),_=e(8871937520),d=e(677609895);const i={TrialFetching:"trial_fetching",TrialTeam:"trial_team",TrialExpiry:"trial_expiry",TrialEligible:"trial_eligible",TrialIneligible:"trial_ineligible",TrialIneligibleUserCannotUpgrade:"trial_ineligible_user_cannot_upgrade"},m=u(T=>T===i.TrialFetching||T===i.TrialEligible||T===i.TrialIneligible||T===i.TrialIneligibleUserCannotUpgrade,"isFreeVariant"),h=u(T=>T===i.TrialTeam||T===i.TrialExpiry,"isTrialVariant"),y=u(T=>{let{promoSubtype:I,context:p,reason:g,isEligibleForTrial:E,trialEndDate:f,isEnabled:O=!0}=T;const C=l.ZO.PaidFeatureTrial,M=(0,r.wA)(),D=(0,c.d4)(L=>(0,s.tc)((0,o.H7)(L))),P=(0,c.d4)(t.iH),k=(0,c.d4)(d.X),x=(0,c.d4)(L=>(0,t.hq)(L,C,I)),[F,W]=(0,a.useState)(D);if((0,a.useEffect)(()=>{O&&D&&M((0,n.A)({campaignType:C,campaignSubType:I,context:p,reason:g})).then(()=>{W(!1)})},[M,D,C,I,p,g,x,O]),!O||!(D||P))return null;const Y=E!=null;if(F&&!Y)return i.TrialFetching;if(P){const w=(0,_.qe)(f);return f!==void 0&&w<=7?i.TrialExpiry:i.TrialTeam}const S=Y&&F?E:x;return!S&&!k?i.TrialIneligibleUserCannotUpgrade:S?i.TrialEligible:i.TrialIneligible},"useFreemium")},952756744:(z,A,e)=>{"use strict";e.d(A,{s:()=>c});var t=e(3134334389),n=e(4902318931),s=e(6259241484);const a={[s.ze.SUPPORT_UPGRADE_DECISION_TRIAL_EXPIRING_SOON_HUDDLES_BANNER]:{component:t.lazy(()=>Promise.resolve().then(e.bind(e,8240993983)))}},c=u(()=>t.createElement(n.Ay,{spaceName:s.xu.HUDDLE_INVITE_MODAL,notifications:a}),"HuddleInviteModalTrialBannerV2MegaphoneWrapper");c.displayName="HuddleInviteModalTrialBannerV2MegaphoneWrapper"},8240993983:(z,A,e)=>{"use strict";e.r(A),e.d(A,{HuddleInviteModalTrialBannerV2:()=>p,default:()=>g});var t=e(3134334389),n=e(735940183),s=e(6323355797),a=e(6244014364),c=e(4481313819),o=e(9418991940),r=e(6084388622),l=e(1267040415),_=e(7949425452),d=e(5641442783),i=e(7120433284),m=e(8112788848),h=e(8871937520),v=e(3810478625);const y=new n.Ay("guided_trials"),T={elementName:"upgrade_now_cta",onClick:{enableClogAction:!0}},I={elementName:"see_upgrade_options_cta",onClick:{enableClogAction:!0}},p=u(E=>{let{trialEndDate:f,canUserPurchase:O}=E;const C=(0,o.d4)(v.g),M=(0,o.d4)(P=>(0,s.m6)(P,{action:s.um.CHECKOUT,productLevel:s.i6.standard.id,entryPoint:"guided_trials_peek_upgrade_cta"})),D=u(()=>O?t.createElement(r.z9,{autoClogProps:T,href:M,className:"p-huddle_invite_modal__cta_upgrade",size:"small","data-qa":"huddle-invite-modal-upgrade-cta"},C?y.t("Upgrade to Pro"):y.t("Upgrade Now")):t.createElement(l.A,{feature:s.c4.SLACK_HUDDLES,autoClogProps:I,size:"small",type:C?"primary":"outline"},C?y.t("Compare plans"):y.t("See Upgrade Options")),"getCTA");return D.displayName="getCTA",t.createElement(c.A,{eventId:a.EventId.UPGRDEXP_TRIAL,uiComponentName:a.UiComponentName.HUDDLE_INVITE_MODAL_TRIAL_BANNER,clogImpression:!0},t.createElement(i.A,{className:"p-huddle_invite_modal_trial_banner_v2__container","data-qa":"huddle_invite_modal_trial_banner",primaryCTA:D(),withMargins:!0},t.createElement("div",null,C?y.rt("<strong>Huddles will soon have time limits</strong>"):y.rt("<strong>Group huddles aren\u2019t available for much longer</strong>",{fallbackHash:"8537d8568b35f2305ac4d9e650f9c5a9cca955b8"}),t.createElement(d.A,{className:"p-huddle_invite_modal_trial_banner_v2__pro_tooltip",uiComponentVariant:a.UiComponentVariant.HUDDLES_INVITE_MODAL_FOOTER,toolTipZIndex:m.m.MenuAboveFullScreen,badgeSize:_.vj.Small})),C?y.rt("Upgrade to continue using huddles longer than 30 minutes."):y.rt("If you choose not to upgrade by {trialEndDate}, your team won\u2019t be able to huddle with more than one other person.",{trialEndDate:(0,h.Pd)(f),fallbackHash:"e680e704766e6c0c74ca66a78c581927a4b36bdf"})))},"HuddleInviteModalTrialBannerV2");p.displayName="HuddleInviteModalTrialBannerV2";const g=p},9953252450:(z,A,e)=>{"use strict";e.d(A,{A:()=>E,x:()=>p});var t=e(3134334389),n=e(9418991940),s=e(8300007136),a=e(735940183),c=e(6244014364),o=e(7268021173),r=e(8871937520),l=e(4481313819),_=e(7433432223),d=e(7120433284),i=e(3810478625),m=e(2481088989),h=e(8739505998),v=e(2612353366),y=e(9003400431);const T=new a.Ay("trials_highlight_paid_features"),I={elementName:"view_all_pro_features",onClick:{enableClogAction:!0}},p=u(f=>{let{trialEndTs:O,experimentPnpE2eGroupOn:C,viewAllProFeaturesLink:M,v2ClassName:D}=f;return C?t.createElement(l.A,{eventId:c.EventId.UPGRDEXP_TRIAL,uiComponentName:c.UiComponentName.HUDDLE_INVITE_MODAL_TRIAL_BANNER,clogImpression:!0},t.createElement("div",{className:D},t.createElement(d.A,{className:"padding_left_125"},(0,m.A)(T.rt("Huddles without limits is a paid feature, available with your free trial through <strong>{trialExpirationDate}. <viewAllProFeaturesLink>View all Pro features</viewAllProFeaturesLink></strong>",{trialExpirationDate:(0,r.Pd)(O),"<viewAllProFeaturesLink>":M}),{position:m.D.LEFT_ALIGNED})))):t.createElement(l.A,{eventId:c.EventId.UPGRDEXP_TRIAL,uiComponentName:c.UiComponentName.HUDDLE_INVITE_MODAL_TRIAL_BANNER,clogImpression:!0},t.createElement("div",{className:"p-huddle_invite_modal_banner"},t.createElement(_.A,{iconType:"clock-o","data-qa":"huddle_invite_modal_trial_banner"},T.rt("<strong>Huddles with more than two people is a paid feature,</strong> available with your free trial through {trialExpirationDate}.",{trialExpirationDate:(0,r.Pd)(O),fallbackHash:"5848c5eb4b061ac0a4abef27be6bc8b2c736d087"}))))},"HuddleInviteModalTrialBanner");p.displayName="HuddleInviteModalTrialBanner";const g=u(f=>{let{v2ClassName:O}=f;const C=(0,s.wA)(),M=(0,n.d4)(i.g),D=(0,n.d4)(o.Sk),P=(0,t.useCallback)(()=>{C((0,y.O)()),C((0,v.A)())},[C]),k=(0,t.useCallback)(x=>{let{text:F}=x;return t.createElement(h.A,{onClick:P,autoClogProps:I},F)},[P]);return t.createElement(p,{trialEndTs:D,experimentPnpE2eGroupOn:M,viewAllProFeaturesLink:k,v2ClassName:O})},"ConnectedHuddleInviteModalTrialBanner");g.displayName="ConnectedHuddleInviteModalTrialBanner";const E=g},1152226587:(z,A,e)=>{"use strict";e.d(A,{A:()=>i});var t=e(3134334389),n=e(266169032),s=e(735940183),a=e(1267040415),c=e(5791262841),o=e(2670882607),r=e(9418991940),l=e(1064007131);const _=new s.Ay("huddles"),d=u(m=>{let{startTrialContext:h=n.M.huddlesTrialEntryPointModal,uiComponentVariant:v,onSpeedbumpContinue:y,promoType:T,promoSubtype:I,isEligibleForTrial:p}=m;const g=u(k=>{let{text:x}=k;return t.createElement(a.A,{"data-qa":"huddles_trial_entry_point-plans_page_link",useLink:!0},x)},"renderPlansPageLink"),E=(0,r.d4)(k=>(0,l.J6)(k,p,!0)),f=_.t("Try huddles with more people"),O=p?_.rt("Get access to huddles with more than two people, and other <plansPageLink>premium collaboration tools</plansPageLink> with a free, {trialLength}-day trial of Slack Pro.",{trialLength:E,"<plansPageLink>":g}):_.rt("Get access to huddles with more than two people, and other <plansPageLink>premium collaboration tools</plansPageLink> when you upgrade to a paid plan.",{"<plansPageLink>":g}),C=_.t("With more people, you can:"),M=(0,t.useCallback)(()=>[_.t("Host a team brainstorm from anywhere"),_.t("Get the group\u2019s feedback with a live screenshare"),_.t("Touch base on the go, without all the typing")],[]),D=(0,t.useCallback)(()=>e.e("gantry-v2-async-lottie-huddles-trial").then(e.t.bind(e,7378585700,23)),[]),P=(0,t.useMemo)(()=>t.createElement(o.e,{getAnimationImport:D,autoplay:!0,loop:!0}),[D]);return t.createElement(c.A,{modalTitle:f,modalSubtitle:O,modalLottieAnimation:P,modalBannerBackgroundColor:"#fdd37f",modalChecklistHeading:C,modalChecklistItems:M(),promoType:T,promoSubtype:I,startTrialContext:h,uiComponentVariant:v,onSpeedbumpContinue:y,isEligibleForTrial:p})},"HuddleTrialEntryPointModal");d.displayName="HuddleTrialEntryPointModal";const i=d},236241007:(z,A,e)=>{"use strict";e.d(A,{A:()=>m});var t=e(9706240641),n=e.n(t),s=e(3134334389),a=e(1031947056),c=e(6323355797),o=e(2375333597),r=e(7268021173),l=e(1152226587),_=e(8300630630);function d(){return d=Object.assign||function(h){for(var v=1;v<arguments.length;v++){var y=arguments[v];for(var T in y)Object.prototype.hasOwnProperty.call(y,T)&&(h[T]=y[T])}return h},d.apply(this,arguments)}u(d,"_extends");const i=(0,a.Ay)("Open huddles trial entry point modal",function(){var h=(0,t.coroutine)(function*(v,y,T){const I=c.ZO.PaidFeatureTrial,p=c.zG.Vhq;yield v((0,_.A)({campaignType:I,campaignSubType:p,reason:"huddle_trial_entry_point_modal"}));const g=(0,r.hq)(y(),I,p);return v((0,o.q)({element:s.createElement(l.A,d({},T,{promoType:I,promoSubtype:p,isEligibleForTrial:g}))}))});return function(v,y,T){return h.apply(this,arguments)}}());i.meta={name:"createThunk",key:"createThunkopenHuddlesTrialEntryPointModal",description:"Open huddles trial entry point modal"};const m=i},2612353366:(z,A,e)=>{"use strict";e.d(A,{A:()=>o});var t=e(1031947056),n=e(5267010247),s=e(7940058138),a=e(8822892075);const c=(0,t.Ay)("Navigates to paid benefits page",r=>{r((0,n.o)((0,a.ZF)(s.c.PaidBenefits)))});c.meta={name:"createThunk",key:"createThunkopenPaidBenefitsPage",description:"Navigates to paid benefits page"};const o=c},8300630630:(z,A,e)=>{"use strict";e.d(A,{A:()=>_});var t=e(9706240641),n=e.n(t),s=e(3134334389),a=e(1031947056),c=e(1384076438),o=e(2375333597),r=e(124213367);const l=(0,a.Ay)("Display loading modal and fetch data for trial entry point modal",function(){var d=(0,t.coroutine)(function*(i,m,h){return i((0,o.q)({element:s.createElement(r.A,{className:"p-trial_entry_point_modal__loading_modal"})})),i((0,c.A)(h))});return function(i,m,h){return d.apply(this,arguments)}}());l.meta={name:"createThunk",key:"createThunkopenTrialLoadingModal",description:"Display loading modal and fetch data for trial entry point modal"};const _=l},7949425452:(z,A,e)=>{"use strict";e.d(A,{Ay:()=>h,Vu:()=>_,vj:()=>d});var t=e(3134334389),n=e(9113979368),s=e(5255740490),a=e(735940183),c=e(4481313819),o=e(6244014364);function r(){return r=Object.assign||function(v){for(var y=1;y<arguments.length;y++){var T=arguments[y];for(var I in T)Object.prototype.hasOwnProperty.call(T,I)&&(v[I]=T[I])}return v},r.apply(this,arguments)}u(r,"_extends");const l=new a.Ay("trials"),_={Purple:"purple",White:"white"},d={Small:"small",Medium:"medium",Large:"large"},i={eventId:o.EventId.UPGRDEXP_TRIAL,uiComponentName:o.UiComponentName.TRIAL_PRO_BADGE,clogImpression:!0},m=u(v=>{let{ariaHidden:y=!1,className:T,autoClogProps:I,badgeTheme:p=_.Purple,size:g=d.Medium}=v;const E=y?{"aria-hidden":!0}:{"aria-label":l.t("Pro feature",{fallbackHash:"f3b218b5b69cf46f83217a4c553335005e49633f"}),role:"img"},f=t.createElement("div",r({className:(0,s.A)("p-pro_badge",`p-pro_badge--${p}`,`p-pro_badge--${g}`,T),"data-qa":"pro_badge"},E),l.t("PRO"));return(0,n.A)(I)?f:t.createElement(c.A,r({},i,I),f)},"ProBadge");m.displayName="ProBadge";const h=m},5641442783:(z,A,e)=>{"use strict";e.d(A,{A:()=>v});var t=e(3134334389),n=e(5255740490),s=e(735940183),a=e(9418991940),c=e(6839188756),o=e(3677514771),r=e(7268021173),l=e(6323355797),_=e(7949425452),d=e(9371668729);function i(){return i=Object.assign||function(y){for(var T=1;T<arguments.length;T++){var I=arguments[T];for(var p in I)Object.prototype.hasOwnProperty.call(I,p)&&(y[p]=I[p])}return y},i.apply(this,arguments)}u(i,"_extends");const m=new s.Ay("trials"),h=u(y=>{let{badgeTheme:T=_.Vu.Purple,badgeSize:I=_.vj.Medium,className:p,hideTooltip:g,uiComponentVariant:E,...f}=y;const O=(0,a.d4)(P=>(0,c.tc)((0,o.H7)(P))),C=(0,a.d4)(P=>(0,r.tu)(P)===l.i6.standard.id),M=(0,t.useMemo)(()=>({uiComponentVariant:E}),[E]);if(!(O||C))return null;const D=m.t("PRO");return g?t.createElement(_.Ay,{autoClogProps:M,badgeTheme:T,className:p,size:I}):t.createElement(d.A,i({ariaLabel:D,uiComponentVariant:E},f),t.createElement("span",{className:(0,n.A)("p-trial_pro_badge",p),"data-qa":"trial_pro_badge"},t.createElement(_.Ay,{autoClogProps:M,badgeTheme:T,size:I})))},"TrialProBadge");h.displayName="TrialProBadge";const v=h},3994181705:(z,A,e)=>{"use strict";e.d(A,{A:()=>i,G:()=>_});var t=e(3134334389),n=e(9418991940),s=e(8300007136),a=e(735940183),c=e(7268021173),o=e(1384076438),r=e(1064007131);const l=new a.Ay("trials");var _;(function(m){m.HuddlesFreemium="huddles_freemium"})(_||(_={}));const i=u(m=>{let{isFreemium:h,tooltipText:v,promoType:y,promoSubtype:T,variant:I}=m;const p=(0,s.wA)(),g=(0,n.d4)(c.iH);(0,t.useEffect)(()=>{y&&p((0,o.A)({campaignType:y,campaignSubType:T,reason:"trial_tooltip"}))},[p,y,T]);const E=(0,n.d4)(P=>y?(0,c.bp)(P,y,T):!1),f=(0,n.d4)(P=>y?(0,c.hq)(P,y,T):!1),O=(0,n.d4)(P=>(0,r.J6)(P,f)),C=u(()=>{if(g)switch(I){case _.HuddlesFreemium:return l.t("Huddles with more than two people are a paid feature, available with your free trial");default:return l.t("This is a paid feature, available with your free trial")}if(f)switch(I){case _.HuddlesFreemium:return l.t("Huddles with more than two people are a paid feature, available with a free, {trialLength}-day trial",{trialLength:O});default:return l.t("This is a paid feature, available with a free, {trialLength}-day trial",{trialLength:O})}switch(I){case _.HuddlesFreemium:return l.t("Huddles with more than two people are a paid feature, available with an upgrade");default:return l.t("This is a paid feature, available with an upgrade")}},"getTooltipText"),M=u(()=>g?l.t("This feature is unlimited with your free trial"):f?l.t("This feature is unlimited with a free trial, {trialLength}-day trial",{trialLength:O}):l.t("This feature is unlimited with an upgrade"),"getFreemiumTooltipText");if(E)return{};const D=h?M():C();return v?{tooltipTitle:v,tooltipBody:D}:{tooltipTitle:D}},"useTrialProBadgeTooltipText")},2481088989:(z,A,e)=>{"use strict";e.d(A,{A:()=>o,D:()=>a});var t=e(3134334389),n=e(7949425452),s=e(5641442783);const a={RIGHT_ALIGNED:"right_aligned",LEFT_ALIGNED:"left_aligned"};function c(r){let{position:l=a.RIGHT_ALIGNED,isTrialVariant:_,uiComponentVariant:d,size:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{position:a.RIGHT_ALIGNED,isTrialVariant:!1,uiComponentVariant:void 0,size:n.vj.Medium};const m=t.createElement("span",{className:`p-with_pro_badge__text--${l}`},r),h=_?t.createElement(s.A,{className:"p-with_pro_badge__badge",uiComponentVariant:d,badgeSize:i}):t.createElement(n.Ay,{className:"p-with_pro_badge__badge",size:i});let v;return l===a.RIGHT_ALIGNED?v=t.createElement(t.Fragment,null,m,h):v=t.createElement(t.Fragment,null,h,m),t.createElement("div",{className:"p-with_pro_badge"},v)}u(c,"WithProBadge"),c.displayName="WithProBadge";const o=c},5791262841:(z,A,e)=>{"use strict";e.d(A,{A:()=>S});var t=e(9706240641),n=e(3134334389),s=e(8300007136),a=e(9418991940),c=e(735940183),o=e(6244014364),r=e(8871937520),l=e(9003400431),_=e(1655938719),d=e(6259241484),i=e(5512605238),m=e(8719380546),h=e(267465465),v=e(8683010724);const T=u(L=>{let{checklistItems:w,checklistHeading:J}=L;return n.createElement("div",{className:"p-modal_content_checklist__checklist"},n.createElement("div",{className:"p-modal_content_checklist__heading"},J),w.map(G=>n.createElement("div",{key:G,className:"p-modal_content_checklist__checklist_item"},n.createElement("div",{className:"p-modal_content_checklist__checklist_check"},n.createElement(v.A,{name:"check",size:"16",variation:"filled"})),n.createElement("div",null,G))))},"ModalContentChecklist");var I=e(280819219),p=e(4481313819),g=e(1267040415),E=e(5360912544),f=e(2934784510),O=e(980293773),C=e(5267010247),M=e(8822892075),D=e(7940058138),P=e(5751973043),k=e(1064007131);const x=new c.Ay("trials"),F={elementName:"start_trial",isPrimaryCTA:!0,onClick:{enableClogAction:!0}},W={elementName:"upgrade_link",isPrimaryCTA:!0,onClick:{enableClogAction:!0}},Y=u(L=>{let{modalClassName:w,modalCloseButtonTheme:J,modalSubtitle:G,modalTitle:X,modalType:te=h.H.VERTICAL_BANNER,modalVideoClassName:le,modalVideoFileName:ve,modalLottieAnimation:Q,modalVideoPosterExtension:Ae="",modalBannerBackgroundColor:ae="",modalChecklistHeading:he="",modalChecklistItems:_e=P.Ml,promoType:ee,promoSubtype:de,imgSrc:Ie,isEligibleForTrial:ce,startTrialContext:j,uiPage:N,uiComponentVariant:b,uiStep:R,onSpeedbumpContinue:K,onSpeedbumpContinueLabel:B,onTrialStart:$,skipSpeedbump:Z,"data-qa":re,omitSecondaryCTA:Te=!1}=L;const Ce=(0,s.wA)(),Pe=(0,a.d4)(i.F),fe=(0,a.d4)(k.SX),pe=fe===k.mF.TREATMENT_1,q=fe===k.mF.TREATMENT_2,se=pe||q,[ge,Oe]=(0,n.useState)(!1),Le=(0,n.useRef)(""),We=(0,n.useCallback)(()=>{Ce((0,l.O)())},[Ce]),Re=(0,n.useCallback)((0,t.coroutine)(function*(){let{trialExpirationDate:He}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};He&&(Le.current=He,yield Ce((0,_.iR)({event:{type:d.jo.REQUEST_SPACES,spaces:[d.xu.SIDEBAR_FOOTER]}})),$==null||$(),Z?We():Oe(!0))}),[Ce,We,$,Z]),we=(0,n.useCallback)(()=>{We(),Ce((0,C.o)((0,M.ZF)(D.c.PaidBenefits)))},[Ce,We]),Je=(0,n.useCallback)(()=>{We(),K==null||K()},[We,K]),it=n.createElement(T,{checklistHeading:he,checklistItems:_e}),et=n.createElement(E.A,{"data-qa":"trial_entry_point_modal_start_trial_button",autoClogProps:F,reason:"start_trial_from_trial_entry_point_modal",context:j,promoType:ee,promoSubtype:de,onRequestComplete:Re},x.t("Start Free Trial")),lt=n.createElement(g.A,{"data-qa":"trial_entry_point_modal_plans_page_button",type:"primary",autoClogProps:W,onClick:We},x.t("See Upgrade Options")),nt=ce?et:lt,at=u(()=>{if(!Le.current)return null;const He=n.createElement("div",{className:"display_flex"},n.createElement(I.A,{className:"p-trial_entry_point_modal__speedbump_icon",type:"sparkles-filled"}),x.t("Ta-da! Your team\u2019s on a free trial")),Ye=n.createElement("div",{className:"p-trial_entry_point_modal__speedbump_description"},x.rt("You\u2019re on the most popular premium plan, Slack Pro \u2014 with features designed to help teams work better, together \u2014 through {trialExpirationDate}, absolutely free.",{trialExpirationDate:(0,r.Pd)(Le.current)})),vt=u(()=>B||(K?x.t("Continue"):x.t("Find Out More")),"getContinueButtonLabel")();let Tt=x.t("Dismiss"),Lt=we,ft=We,mt="speedbump_learn_more",Yt="speedbump_dismiss";return K&&(Tt=x.t("Learn More"),Lt=Je,ft=we,mt="speedbump_continue",Yt="speedbump_learn_more"),n.createElement(O.ty,{className:"p-trial_entry_point_modal__speedbump","data-qa":"trial_entry_point_modal_speedbump",heading:He,description:Ye,continueButtonLabel:vt,cancelButtonLabel:Tt,onCancel:Te?void 0:ft,onContinue:Lt,continueButtonType:"primary",autoFocusContinueButton:!0,autoClogProps:{continueButton:{elementName:mt,onClick:{enableClogAction:!0}},cancelButton:{elementName:Yt,onClick:{enableClogAction:!0}}}})},"renderSpeedbump");at.displayName="renderSpeedbump";const ze=n.createElement("div",{className:"p-trial_entry_point_modal__footer_text","data-qa":"trial_entry_point_modal_footer_text"},x.t("No credit card required.")),Ke=n.createElement("div",{className:"p-trial_entry_point_modal__footer"},nt,ce&&ze,ce&&se&&n.createElement(f.A,{shouldShow:Pe}),ge&&at());return n.createElement(p.A,{eventId:o.EventId.UPGRDEXP_TRIAL,clogImpression:!0,uiComponentName:o.UiComponentName.TRIAL_ENTRY_POINT_MODAL,uiComponentVariant:b,uiStep:R,uiPage:N},n.createElement(m.A,{bannerBackgroundColor:ae,"data-qa":re,imgSrc:Ie,title:X,subtitle:G,bodyContent:it,footerContent:Ke,onRequestClose:We,maxWidth:"586px",className:w,closeButtonTheme:J,type:te,videoFilename:ve,videoPosterExtension:Ae,videoClassName:le,lottieAnimation:Q}))},"TrialEntryPointModal");Y.displayName="TrialEntryPointModal";const S=Y},2934784510:(z,A,e)=>{"use strict";e.d(A,{A:()=>l});var t=e(3134334389),n=e(8300007136),s=e(9418991940),a=e(2670882607),c=e(2047021170),o=e(1939990292);const l=t.memo(_=>{let{shouldShow:d=!1}=_;const i=(0,n.wA)(),[m,h]=(0,t.useState)(),[v,y]=(0,t.useState)(!1),T=(0,t.useCallback)(g=>{g&&g.then(E=>h(E))},[h]),I=(0,s.d4)(g=>!(0,c.ty)(g,"a11y_animations")),p=(0,t.useCallback)(()=>e.e("trial-celebration-confetti.json").then(e.t.bind(e,4831955131,23)),[]);return!d||I||v?null:(m&&m._cbs&&m.addEventListener("complete",()=>{i((0,o.DJ)(!1)),y(!0)}),t.createElement(a.e,{autoplay:!0,className:"p-trial_start_confetti",getAnimationImport:p,ref:T}))})},5360912544:(z,A,e)=>{"use strict";e.d(A,{A:()=>f});var t=e(3134334389),n=e(8300007136),s=e(7715417323),a=e(735940183),c=e(6244014364),o=e(4585652590),r=e(1939990292),l=e(4481313819),_=e(6084388622),d=e(8739505998),i=e(5733135148),m=e(9418991940),h=e(1064007131),v=e(1655938719),y=e(6259241484);function T(){return T=Object.assign||function(O){for(var C=1;C<arguments.length;C++){var M=arguments[C];for(var D in M)Object.prototype.hasOwnProperty.call(M,D)&&(O[D]=M[D])}return O},T.apply(this,arguments)}u(T,"_extends");const I=new a.Ay("trials"),p={name:"warning"},g=u(O=>{let{children:C,reason:M,context:D,megaphoneSpacesToRefresh:P,promoType:k,promoSubtype:x,onClick:F,onRequestComplete:W=s.A,onRequestError:Y=s.A,useLink:S,refToForward:L,...w}=O;const J=(0,n.wA)(),[G,X]=(0,t.useState)(!1),[te,le]=(0,t.useState)(!1),ve=(0,m.d4)(h.SX),Q=ve===h.mF.TREATMENT_1||ve===h.mF.TREATMENT_2,Ae=(0,t.useCallback)(()=>{X(!0),le(!1),Y()},[Y]),ae=(0,t.useCallback)(()=>{te||(le(!0),X(!1),J((0,o.a)({reason:M,campaignType:k,campaignSubType:x,context:D})).then(ee=>{let{trial_expiration_date:de}=ee;J((0,r.DJ)(!0)),W({trialExpirationDate:de}),Q&&J((0,v.iR)({event:{type:y.jo.REQUEST_SPACES,spaces:[y.xu.SIDEBAR_MENU_HEADER]}})),P&&P.length>0&&J((0,v.iR)({event:{type:y.jo.REQUEST_SPACES,spaces:P}})),de||Ae()}).catch(Ae))},[te,J,M,k,x,D,Ae,W,Q,P]),he=(0,t.useCallback)(()=>{ae(),F==null||F()},[F,ae]),_e=S?t.createElement(d.A,T({ref:L},w,{onClick:he}),C):t.createElement(_.lV,T({ref:L},w,{onClick:he,loading:te}),C);return t.createElement(l.A,{eventId:c.EventId.UPGRDEXP_TRIAL_START,clogImpression:!0},_e,G&&t.createElement(i.Ay,{svgIconProps:p,svgIconClassName:"align_self_start",shouldAutoFade:!1},I.t("Something went wrong. Try again later.",{fallbackHash:"248cbe7878bb83237a17ae6abe635e6251a6517a",fallbackHashNs:"channel_modal"})))},"TrialStartCTABase");g.displayName="TrialStartCTABase";const f=t.forwardRef((O,C)=>t.createElement(g,T({},O,{refToForward:C})))},5712872315:(z,A,e)=>{"use strict";e.d(A,{B:()=>n,D:()=>t});var t;(function(s){s.SMALL="small",s.MEDIUM="medium",s.LARGE="large"})(t||(t={}));var n;(function(s){s.NONE="none",s.PURPLE="purple",s.LIGHT_PURPLE="light_purple",s.BLUE="blue",s.ERROR="error",s.HORCHATA="horchata",s.SUNFLOWER="sunflower"})(n||(n={}))},7120433284:(z,A,e)=>{"use strict";e.d(A,{A:()=>y});var t=e(3134334389),n=e(5255740490),s=e(735940183),a=e(581167618),c=e(6105929840),o=e(6308822),r=e(6084388622),l=e(6244014364),_=e(5712872315),d=e(8683010724);function i(){return i=Object.assign||function(T){for(var I=1;I<arguments.length;I++){var p=arguments[I];for(var g in p)Object.prototype.hasOwnProperty.call(p,g)&&(T[g]=p[g])}return T},i.apply(this,arguments)}u(i,"_extends");const m=new s.Ay("upgrades_kit"),h={action:l.UiAction.CLOSE,onClick:{enableClogAction:!0},elementName:"close",elementType:l.ElementType.X},v=u(T=>{let{className:I,image:p,heading:g,isLoading:E,children:f,onDismiss:O,useRoundedCorners:C=!0,showBorder:M=!0,size:D=_.D.MEDIUM,theme:P=_.B.HORCHATA,primaryCTA:k,secondaryCTA:x,withMargins:F,iconProps:W,"data-qa":Y}=T;const S=u(()=>t.createElement(c.A,{className:"p-upgrades_alert_banner_v2__close_icon",icon:"times",size:"small","aria-label":m.t("Dismiss"),onClick:O,autoClogProps:h}),"renderCloseIcon"),L=u(()=>{const G=t.createElement("div",null,t.createElement("div",{className:"p-upgrades_alert_banner_v2__heading"},g),t.createElement("div",{className:"p-upgrades_alert_banner_v2__body"},f));if(W){const X={inline:!0,size:"20",...W};return t.createElement("div",{className:"display_flex"},t.createElement("span",{className:`margin_right_50 p-upgrades_alert_banner_v2__icon--${P}`},t.createElement(d.A,i({},X))),t.createElement("div",{className:"display_flex flex_direction_column"},G))}return G},"renderContent");L.displayName="renderContent";const w=u(()=>!k&&!x?null:t.createElement("div",{className:"p-upgrades_alert_banner_v2__button_container"},E?t.createElement(r.lV,{loading:!0}):t.createElement(t.Fragment,null,k,x)),"renderButtons");w.displayName="renderButtons";const J=(0,n.A)("p-upgrades_alert_banner_v2",`p-upgrades_alert_banner_v2--${D}`,`p-upgrades_alert_banner_v2--${P}`,I,{"p-upgrades_alert_banner_v2--with_close_icon":!!O,"p-upgrades_alert_banner_v2--rounded_corners":C,"p-upgrades_alert_banner_v2--no_border":!M,"p-upgrades_alert_banner_v2--with_image":!!p,"p-upgrades_alert_banner_v2--with_margins":F});return t.createElement("div",{className:"full_width"},t.createElement(a.Ay,{className:J,type:a.QE.inline,"data-qa":Y},t.createElement("div",{className:"p-upgrades_alert_banner_v2__content"},E?t.createElement(o.A,{color:"white",inline:!0}):L(),w(),O&&S())))},"AlertBannerV2");v.displayName="AlertBannerV2";const y=v},7433432223:(z,A,e)=>{"use strict";e.d(A,{A:()=>m});var t=e(3134334389),n=e(5255740490),s=e(735940183),a=e(6244014364),c=e(581167618),o=e(6105929840),r=e(280819219),l=e(5712872315);const _=new s.Ay("upgrades_kit"),d={action:a.UiAction.CLOSE,onClick:{enableClogAction:!0},elementName:"close",elementType:a.ElementType.X},i=u(h=>{let{className:v,iconType:y,customIcon:T,image:I,heading:p,children:g,onDismiss:E,useRoundedCorners:f=!0,showBorder:O=!0,size:C=l.D.MEDIUM,theme:M=l.B.PURPLE,"data-qa":D="",primaryCTA:P,secondaryCTA:k}=h;const x=u(()=>{let L;const w="p-upgrades_alert_banner__icon";return T?L=t.createElement("div",{className:w},T):I?L=t.createElement("div",{className:(0,n.A)(w,"p-upgrades_alert_banner__icon--image")},I):y&&(L=t.createElement(r.A,{className:w,size:C,theme:M,type:y})),L},"renderIcon");x.displayName="renderIcon";const F=u(()=>t.createElement(o.A,{className:"p-upgrades_alert_banner__close_icon","data-qa":"alert_banner_close_button",icon:"times",size:"small","aria-label":_.t("Dismiss",{fallbackHash:"70afe9eff3f2888493d9b5169fec8331af1810de",fallbackHashNs:"trials_highlight_paid_features"}),onClick:E,autoClogProps:d}),"renderCloseIcon");F.displayName="renderCloseIcon";const W=u(()=>!P&&!k?null:t.createElement("div",{className:"p-upgrades_alert_banner__button_container"},P,k),"renderButtons");W.displayName="renderButtons";const Y=x(),S=(0,n.A)("p-upgrades_alert_banner",`p-upgrades_alert_banner--${C}`,`p-upgrades_alert_banner--${M}`,v,{"p-upgrades_alert_banner--with_close_icon":!!E,"p-upgrades_alert_banner--rounded_corners":f,"p-upgrades_alert_banner--no_border":!O,"p-upgrades_alert_banner--with_image":!!I});return t.createElement("div",{className:"full_width"},t.createElement(c.Ay,{className:S,"data-qa":D,customIcon:Y,heading:p,type:Y?c.QE.boxed:c.QE.custom},t.createElement("div",{className:"p-upgrades_alert_banner__body"},g),W(),E&&F()))},"AlertBanner");i.displayName="AlertBanner";const m=i},267465465:(z,A,e)=>{"use strict";e.d(A,{H:()=>t});var t;(function(n){n.MULTI_PANE="multi_pane",n.SINGLE_PANE="single_pane",n.VERTICAL_BANNER="vertical_banner",n.HORIZONTAL_BANNER="horizontal_banner"})(t||(t={}))},280819219:(z,A,e)=>{"use strict";e.d(A,{A:()=>_});var t=e(3134334389),n=e(5255740490),s=e(1610251172);const c=t.memo(d=>{let{animationDelay:i,size:m="large"}=d;const h=48,v=h-(m==="large"?48:36),y=h*2,T="#1D9BD1",I="#F2C744",p="#007A5A",g="#E01E5A",E={animationDelay:`${i||0}s`},f=u((D,P)=>t.createElement("path",{d:"M2 10.3L6 10.39C8.2 10.4 10 8.6 10 6.3C10 4 8.2 2.1 6 2C3.79 2 2 3.85 2 6.15L2 10.3Z",fill:P,className:D,style:E}),"renderDrop"),O=u((D,P)=>t.createElement("circle",{r:"4",fill:P,className:D,style:E}),"renderCircle"),C=u((D,P)=>t.createElement("path",{d:"M6.47 1.27C6.3 0.83 5.69 0.83 5.53 1.27L4.46 4.16C4.4 4.3 4.3 4.41 4.16 4.46L1.27 5.53C0.83 5.69 0.831 6.3 1.27 6.47L4.16 7.5C4.3 7.59 4.41 7.7 4.46 7.84L5.53 10.73C5.69 11.17 6.31 11.17 6.47 10.73L7.54 7.84C7.59 7.7 7.7 7.59 7.84 7.54L10.73 6.47C11.17 6.31 11.17 5.69 10.73 5.53L7.84 4.46C7.7 4.41 7.59 4.3 7.54 4.16L6.47 1.27Z",fill:P,className:D,style:E}),"renderStar"),M=u((D,P)=>t.createElement("path",{d:"M1 5.5C1 4.12 2.12 3 3.5 3H8.5C9.88 3 11 4.12 11 5.5V5.5C11 6.88 9.88 8 8.5 8H3.5C2.12 8 1 6.88 1 5.5V5.5Z",fill:P,className:D,style:E}),"renderSprinkle");return t.createElement("svg",{className:(0,n.A)("position_absolute",`p-upgrades_icon_celebration_animation--${m}`),style:{top:`-${h/2+v/2}px`,left:`-${h/2+v/2}px`},width:y,height:y,viewBox:`0 0 ${y} ${y}`,fill:"none",xmlns:"http://www.w3.org/2000/svg"},f("p-upgrades_icon_celebration_animation__drop_top_right",T),O("p-upgrades_icon_celebration_animation__circle_top_right",I),O("p-upgrades_icon_celebration_animation__circle_right",p),C("p-upgrades_icon_celebration_animation__star_bottom_right",I),O("p-upgrades_icon_celebration_animation__circle_bottom_right",I),M("p-upgrades_icon_celebration_animation__sprinkle_bottom_left",g),f("p-upgrades_icon_celebration_animation__drop_left",I),O("p-upgrades_icon_celebration_animation__circle_top_left",T),C("p-upgrades_icon_celebration_animation__star_top_left",p),M("p-upgrades_icon_celebration_animation__sprinkle_top_left",g))});var o=e(5712872315);function r(){return r=Object.assign||function(d){for(var i=1;i<arguments.length;i++){var m=arguments[i];for(var h in m)Object.prototype.hasOwnProperty.call(m,h)&&(d[h]=m[h])}return d},r.apply(this,arguments)}u(r,"_extends");const l=u(d=>{let{className:i,animationProps:m,hasBorder:h,type:v,size:y=o.D.MEDIUM,theme:T=o.B.PURPLE,showAnimation:I}=d;const p=(0,n.A)(`p-upgrades_icon--${y}`,`p-upgrades_icon--${T}`,i),g=t.createElement(s.A,{className:p,size:"inherit",type:v});if(!h)return g;const E=(0,n.A)("p-upgrades_icon_container",`p-upgrades_icon_container--${y}`,`p-upgrades_icon_container--${T}`,{"p-upgrades_icon_container--with_animation":I});return t.createElement("div",{className:E},g,I&&t.createElement(c,r({size:y},m)))},"UpgradesIcon");l.displayName="UpgradesIcon";const _=l},5207331754:(z,A,e)=>{"use strict";e.d(A,{A:()=>c});var t=e(3134334389),n=e(5255740490),s=e(980293773);const c=u(o=>{let{children:r,className:l}=o;return t.createElement(s.qf,{className:(0,n.A)("p-upgrades_modal__content_section",l)},r)},"ModalBody")},9240394198:(z,A,e)=>{"use strict";e.d(A,{N:()=>p,A:()=>E});var t=e(3134334389),n=e(5255740490),s=e(980293773),a=e(9421999304),c=e(267465465),o=e(581167618),r=e(7949425452),l=e(3357053101),_=e(1935364562),d=e(5207331754),i=e(6000244203),m=e(3801841745);const v=u(f=>{let{banner:O,bodyContent:C,footerContent:M,showProBadge:D=!0,subtitle:P,title:k,error:x}=f;return t.createElement(t.Fragment,null,t.createElement("div",{className:"p-upgrades_modal_with_banner_horizontal__left_panel"},t.createElement(m.A,{flexDirection:"column",gap:20},x&&t.createElement(o.Ay,{icon:"warning",level:"error",className:"p-upgrades_modal_with_banner_horizontal__error_alert"},x),t.createElement(l.A,{headerClassName:"p-upgrades_modal_with_banner_horizontal__header",titleClassName:"padding_top_0",title:k},D&&t.createElement(r.Ay,{className:"p-upgrades_modal_with_banner_horizontal__pro_badge"}))),t.createElement(s.$m,null,P&&t.createElement(_.A,{className:"p-upgrades_modal_with_banner_horizontal__subtitle",subtitle:P}),t.createElement(d.A,{className:"p-upgrades_modal_with_banner_horizontal__body"},C)),t.createElement(i.A,{className:"p-upgrades_modal_with_banner_horizontal__footer"},M)),O)},"ModalContentHorizontalBanner"),y=u(f=>{let{banner:O,bodyContent:C,footerContent:M,showProBadge:D=!0,subtitle:P,title:k}=f;const x=t.createElement(t.Fragment,null,k,D&&t.createElement(r.Ay,{className:"p-upgrades_modal_with_banner_vertical__pro_badge"}));return t.createElement(t.Fragment,null,t.createElement(l.A,{titleClassName:"p-upgrades_modal_with_banner_vertical__title",title:x},O),t.createElement(s.$m,null,P&&t.createElement(_.A,{className:"p-upgrades_modal_with_banner_vertical__subtitle",subtitle:P}),t.createElement(d.A,{className:"p-upgrades_modal_with_banner_vertical__body"},C)),t.createElement(i.A,null,M))},"ModalContentVerticalBanner");y.displayName="ModalContentVerticalBanner";const T=y;function I(){return I=Object.assign||function(f){for(var O=1;O<arguments.length;O++){var C=arguments[O];for(var M in C)Object.prototype.hasOwnProperty.call(C,M)&&(f[M]=C[M])}return f},I.apply(this,arguments)}u(I,"_extends");var p;(function(f){f.LIGHT="light",f.DARK="dark",f.GOLD="gold",f.GRAY="gray"})(p||(p={}));const g=u(f=>{let{bannerBackgroundColor:O,bodyContent:C,centered:M,className:D,closeButtonTheme:P=p.DARK,closeModal:k,dataQa:x,footerContent:F,imgSrc:W,imgSrcSet:Y,maxWidth:S,shouldCloseOnOverlayClick:L,showProBadge:w=!0,subtitle:J,title:G,error:X,type:te,videoFilename:le,videoPosterExtension:ve="png",videoClassName:Q,lottieAnimation:Ae,...ae}=f;const he=(0,a.JK)(),_e=`${le}${he==="en-US"?"":`.${he}`}`,ee=`p-upgrades_modal_with_banner__banner--${te}`,de=u(()=>Y?t.createElement("img",{className:ee,alt:"",srcSet:Y}):W?t.createElement("img",{className:ee,alt:"",src:W}):le?t.createElement("video",{playsInline:!0,autoPlay:!0,muted:!0,className:(0,n.A)(ee,Q),poster:`${_e}.${ve}`},t.createElement("source",{type:"video/mp4",src:`${_e}.mp4`}),t.createElement("source",{type:"video/webm",src:`${_e}.webm`})):Ae?t.createElement("div",{className:"p-upgrades_modal__lottie_container"},Ae):null,"getModalBanner");de.displayName="getModalBanner";const Ie=t.createElement("div",{style:{backgroundColor:O},className:`p-upgrades_modal_with_banner__banner_container--${te}`},de());return t.createElement(s.dW,I({className:(0,n.A)("p-upgrades_modal_with_banner",`p-upgrades_modal_with_banner__base_modal--${te}`,`p-upgrades_modal_with_banner--close_button_${P}`,"p-upgrades_modal_with_banner--close_button",D),centered:M,closeModal:k,dataQa:x,maxWidth:S,shouldCloseOnOverlayClick:L},ae),te===c.H.VERTICAL_BANNER?t.createElement(T,{banner:Ie,bodyContent:C,footerContent:F,showProBadge:w,subtitle:J,title:G}):t.createElement(v,{banner:Ie,bodyContent:C,footerContent:F,showProBadge:w,subtitle:J,title:G,error:X}))},"ModalContentWithBanner");g.displayName="ModalContentWithBanner";const E=g},6000244203:(z,A,e)=>{"use strict";e.d(A,{A:()=>c});var t=e(3134334389),n=e(5255740490),s=e(980293773);const c=u(o=>{let{children:r,className:l}=o;return t.createElement(s.jl,{className:"p-upgrades_modal__footer"},t.createElement(s.ox,{className:(0,n.A)("p-upgrades_modal__footer_actions",l)},r))},"ModalFooter")},3357053101:(z,A,e)=>{"use strict";e.d(A,{A:()=>c});var t=e(3134334389),n=e(5255740490),s=e(980293773);const c=u(o=>{let{headerClassName:r,titleClassName:l,children:_,title:d}=o;return t.createElement(s.rQ,{className:(0,n.A)("p-upgrades_modal__header",r)},_,t.createElement(s.Rc,{className:(0,n.A)("p-upgrades_modal__title",l),title:d}))},"ModalHeader")},1935364562:(z,A,e)=>{"use strict";e.d(A,{A:()=>a});var t=e(3134334389),n=e(5255740490);const a=u(c=>{let{className:o,subtitle:r}=c;return t.createElement("div",{className:(0,n.A)("p-upgrades_modal__subtitle",o)},r)},"ModalSubtitle")},8719380546:(z,A,e)=>{"use strict";e.d(A,{A:()=>I});var t=e(3134334389),n=e(5255740490),s=e(980293773),a=e(4376397139),c=e(3357053101),o=e(5207331754),r=e(1935364562),l=e(6000244203),_=e(280819219),d=e(5712872315);const m=u(p=>{let{subtitle:g,bodyContent:E,footerContent:f,title:O,titleImage:C,titleVideo:M,titleVideoClassName:D,titleIcon:P,showTitleIconAnimation:k,headerClassName:x,footerActionsClassName:F,theme:W}=p;return t.createElement(t.Fragment,null,t.createElement(c.A,{headerClassName:(0,n.A)(x,{"p-upgrades_modal__header--with_animation":k}),title:O},C,M&&t.createElement("div",{className:(0,n.A)(D)},M),P&&t.createElement("div",{className:"p-upgrades_modal__icon"},t.createElement(_.A,{hasBorder:!0,size:d.D.LARGE,type:P,showAnimation:!!k,theme:W}))),g&&t.createElement(r.A,{subtitle:g}),E&&t.createElement(s.$m,null,t.createElement(o.A,null,E)),t.createElement(l.A,{className:F},f))},"ModalContent");var h=e(9240394198),v=e(267465465);function y(){return y=Object.assign||function(p){for(var g=1;g<arguments.length;g++){var E=arguments[g];for(var f in E)Object.prototype.hasOwnProperty.call(E,f)&&(p[f]=E[f])}return p},y.apply(this,arguments)}u(y,"_extends");const T=u(p=>{const{className:g,maxWidth:E,onRequestClose:f,type:O,"data-qa":C,UNSAFE_parentSelector:M}=p,P={className:(0,n.A)("p-upgrades_modal__container",g),closeModal:f,shouldCloseOnOverlayClick:!0,centered:!0,maxWidth:E,dataQa:C,UNSAFE_parentSelector:M};return O===v.H.MULTI_PANE?t.createElement(a.A,y({},p,P)):O===v.H.VERTICAL_BANNER||O===v.H.HORIZONTAL_BANNER?t.createElement(h.A,y({},p,P)):t.createElement(s.dW,y({},P),t.createElement(m,y({},p)))},"Modal");T.displayName="Modal";const I=T},9371668729:(z,A,e)=>{"use strict";e.d(A,{A:()=>m});var t=e(3134334389),n=e(9418991940),s=e(5255740490),a=e(2312625946),c=e(7268021173),o=e(3994181705),r=e(4481313819),l=e(7949425452),_=e(6244014364);function d(){return d=Object.assign||function(h){for(var v=1;v<arguments.length;v++){var y=arguments[v];for(var T in y)Object.prototype.hasOwnProperty.call(y,T)&&(h[T]=y[T])}return h},d.apply(this,arguments)}u(d,"_extends");const i=u(h=>{let{ariaLabel:v,tooltipText:y,children:T,onClick:I,isFreemium:p,promoType:g,promoSubtype:E,showProBadge:f,tooltipClassName:O,uiComponentVariant:C,variant:M,toolTipZIndex:D,toolTipPosition:P,...k}=h;const{tooltipTitle:x,tooltipBody:F}=(0,o.A)({isFreemium:p,tooltipText:y,promoType:g,promoSubtype:E,variant:M}),W=(0,n.d4)(L=>(0,c.bp)(L,g,E)),Y=F?`${x} - ${F}`:x;if(W)return T;const S=t.createElement(r.A,{clogImpression:!0,eventId:_.EventId.UPGRDEXP_TRIAL,uiComponentName:_.UiComponentName.TRIAL_FEATURE_TOOLTIP,uiComponentVariant:C},t.createElement("div",{className:"p-trial_feature_tooltip"},t.createElement("span",{className:"p-trial_feature_tooltip__title"},f&&t.createElement(l.Ay,{badgeTheme:l.Vu.White,className:"p-trial_feature_tooltip__pro_badge"}),t.createElement("div",{className:"p-trial_feature_tooltip__title_text"},x)),t.createElement("div",{className:"p-trial_feature_tooltip__body"},F)));return t.createElement(a.Ay,d({tipClassName:(0,s.A)("p-trial_feature_tooltip__container",O),tip:S,onClick:I,zIndex:D,position:P,"aria-label":v?`${v}: ${Y}`:`${Y}`},k),T)},"TrialFeatureTooltip");i.displayName="TrialFeatureTooltip";const m=i},4387298515:(z,A,e)=>{"use strict";e.d(A,{$m:()=>c,AH:()=>I,Ac:()=>r,D0:()=>h,Mh:()=>y,VR:()=>i,th:()=>_});var t=e(9706240641),n=e.n(t),s=e(6045824189);const a=(0,s.Nh)(["callsScreenshare","createBorderWindow"]),c=function(){var p=(0,t.coroutine)(function*(g,E){a.isAvailable()&&a(g,E)});return u(function(E,f){return p.apply(this,arguments)},"createBorderWindow")}(),o=(0,s.Nh)(["callsScreenshare","showBorder"]),r=function(){var p=(0,t.coroutine)(function*(){o.isAvailable()&&o()});return u(function(){return p.apply(this,arguments)},"showBorder")}(),l=(0,s.Nh)(["callsScreenshare","hideBorder"]),_=function(){var p=(0,t.coroutine)(function*(){l.isAvailable()&&l()});return u(function(){return p.apply(this,arguments)},"hideBorder")}(),d=(0,s.Nh)(["callsScreenshare","setWindowOrScreenId"]),i=function(){var p=(0,t.coroutine)(function*(g){d.isAvailable()&&d(g)});return u(function(E){return p.apply(this,arguments)},"setWindowOrScreenId")}(),m=(0,s.Nh)(["callsScreenshare","setWindowBorderWidth"]),h=function(){var p=(0,t.coroutine)(function*(g){m.isAvailable()&&m(g)});return u(function(E){return p.apply(this,arguments)},"setWindowBorderWidth")}(),v=(0,s.Nh)(["callsScreenshare","setWindowBorderColor"]),y=function(){var p=(0,t.coroutine)(function*(g,E,f,O){v.isAvailable()&&v(g,E,f,O)});return u(function(E,f,O,C){return p.apply(this,arguments)},"setWindowBorderColor")}(),T=(0,s.Nh)(["callsScreenshare","getWindowPositionAndDimensions"]),I=function(){var p=(0,t.coroutine)(function*(){if(T.isAvailable())return T()});return u(function(){return p.apply(this,arguments)},"getWindowPositionAndDimensions")}()},1583163054:(z,A,e)=>{"use strict";e.d(A,{Ce:()=>i,Pe:()=>_,fI:()=>m,zS:()=>c});var t=e(3245843483),n=e(571104883),s=e(735940183);const a=new s.Ay("prefs"),c=(0,t.g9M)()&&t.MD7.isAvailable()?(0,t.MD7)():"nightly",o={PROD:"prod",BETA:"beta",DOGFOOD:c},r=[o.PROD,o.BETA],l=[o.PROD,o.BETA,o.DOGFOOD];function _(h){return(h?l:r).map(y=>({value:y,label:d(y)}))}u(_,"getReleaseChannelOptions");function d(h){switch(h){case o.PROD:return a.t("Production");case o.BETA:return a.t("Beta");case o.DOGFOOD:return a.t("Dogfood",{fallbackHash:"c9e429b1798d0142b8b31e82c1f9da5d8e0c9420"});default:return a.t("Unknown")}}u(d,"getReleaseChannelDisplayName");function i(){return(0,t.g9M)()&&!(0,t.Z9F)()&&!(0,n.j9)()}u(i,"canSeeReleaseChannel");function m(){return i()&&["MSI","SlackSonic","SlackPilot"].every(h=>!navigator.userAgent.includes(h))}u(m,"canModifyReleaseChannel")},4923013394:(z,A,e)=>{"use strict";e.d(A,{Jd:()=>d,X6:()=>i,bO:()=>o,c6:()=>l,fD:()=>y,lJ:()=>v,ve:()=>r,zb:()=>_});var t=e(3398586081),n=e(571104883),s=e(3259512346),a=e(3245843483);const c="sunroof_init",o="fullscreen-ui",r=(0,t.A)(()=>!1),l=(0,t.A)(()=>(0,s.s)("25.1.1")),_=(0,t.A)(()=>(0,a.Z9F)()?(0,n.dY)("38.0.0"):!0),d=(0,t.A)(()=>{if(!(0,n.y3)())return!1;const{titleBarStyle:T}=(0,a.oQe)("environment")||{},{debugFeatures:I}=(0,a.oQe)("settings")||{};return T==="custom-extension"||(I==null?void 0:I.includes("window-chrome"))}),i=(0,t.A)(()=>(0,n.WB)()&&(0,n.dY)("4.33.90")),m=u(()=>{if(!i())return!1;const{useHwAcceleration:T,windowVibrancy:I}=(0,a.oQe)("settings")||{};return T&&I},"shouldEnableWindowSunroof"),h=(0,t.A)(()=>!(0,n.dY)("4.35.97")),v=u(()=>m()?(0,n.cX)()?{transparent:h(),vibrancy:o,backgroundColor:null}:{}:{},"maybeGetSunroofWindowOptions");function y(T){const{windowVibrancy:I}=(0,a.oQe)("settings")||{};if(typeof I>"u")return;if(I&&(!T.experimentDesktopIa4SunroofEnabled||!m())){(0,a.cGU)({name:"windowVibrancy",value:!1});try{localStorage.removeItem(c)}catch{}return}const p=!!localStorage.getItem(c);if(T.experimentDesktopIa4SunroofEnabled&&!p&&!I&&i()){(0,a.cGU)({name:"windowVibrancy",value:!0});try{localStorage.setItem(c,"1")}catch{}}}u(y,"maybeToggleSunroof")},4979734995:(z,A,e)=>{"use strict";e.d(A,{d:()=>o,j:()=>c});var t=e(6422693406),n=e(4724591729),s=e(796111729),a=e(4096483543);function c(r,l,_){const d="noversion",i=Date.now()/1e3,m=`/api/${r}?_x_id=${d}-${i}`,h=new XMLHttpRequest;h.onreadystatechange=()=>{if(h.readyState===4){h.onreadystatechange=null;let I;if(h.status===200||h.status===429)try{I=JSON.parse(h.responseText)}catch{(0,s.Wo)().warn("API","Unable to do anything with api response")}I=I||{ok:!1},_?_(I.ok,I,l):(0,n.Cu)()&&((0,s.Wo)().warn("API","No callback provided. Printing response"),(0,s.Wo)().warn("API",I.ok,I,l))}};const v=!0;h.open("POST",m,v);const y=new FormData;let T=!1;l?Object.keys(l).forEach(I=>{I[0]!=="_"&&(y.append(I,l[I]),T=!0)}):(0,n.Cu)()&&(0,s.Wo)().warn("API","No args provided. Bold, very bold."),T?h.send(y):h.send()}u(c,"callSlackApiUnauthed");const o=u((r,l)=>new t.S(_=>{c(r,l,(d,i)=>{_(i)})}),"callSlackApiUnauthedAsync");(0,a.A)()||(window.callSlackAPIUnauthed=(r,l,_)=>{(0,s.Wo)().warn("API","Don't use me directly! Please import callSlackApiUnauthed from api-unauthed.ts"),c(r,l,_)})},4540171876:(z,A,e)=>{"use strict";e.d(A,{Db:()=>_,O3:()=>d,OB:()=>i,TE:()=>h,xB:()=>m});var t=e(2101927269),n=e(4525554634),s=e(2384831516),a=e(1269227002),c=e(6422693406),o=e(796111729),r=e(462591818),l=e(8935621861);const _=(0,s.C6)("Get call info from callId",(v,y,T)=>{let{callIds:I,reason:p}=T;const g=(0,o.Ay)({getState:y});return I.length>3&&g.warn(`fetchCallByIds being called for unexpectedly many calls at once: ${I.length}`),c.S.map(I,E=>v((0,a.apiCall)({method:"screenhero.rooms.info",args:{room:E},reason:p||"huddles-call-info"})).then(f=>{let{room:O}=f;return(0,n.Q)(O)}).catch(f=>(g.error(f,`Error while fetching call: ${E}`),null))).then(t.A)});_.meta={name:"createFetcher",key:"createFetcherfetchCallsByIds",description:"Get call info from callId"};const d=(0,s.C6)("Join a calls / huddle room",(v,y,T)=>{let{channelId:I,roomId:p,threadTs:g,shouldFetchRegion:E,teamId:f,traceId:O,parentSpanId:C,reason:M,isMultiDevice:D=!1}=T;return(E?l.A.getInstance().getNearestChimeMediaRegion(f):c.S.resolve("")).then(P=>v((0,a.apiCall)({method:"rooms.join",args:{...p&&{id:p},...I&&{channel_id:I},...g&&{thread_ts:g},regions:P,multidevice:D},traceId:O,parentSpanId:C,reason:M||"calls-api/joinRoom"})).then(k=>{var x;return{server:(0,r.YY)(k.call),roomId:k.call.call_id,regions:"",inviteResponses:void 0,virtualRoomId:p,channelId:(x=k.huddle)===null||x===void 0?void 0:x.channels[0],...k.canvas&&k.canvas.root_thread_ts&&{rootThreadTs:k.canvas.root_thread_ts},...k.canvas&&k.canvas.canvas_file_id&&{canvasFileId:k.canvas.canvas_file_id}}}))});d.meta={name:"createFetcher",key:"createFetcherjoinRoom",description:"Join a calls / huddle room"};const i=(0,s.C6)("Notify member to join huddle",(v,y,T)=>{let{reason:I,channelId:p,userId:g}=T;return v((0,a.apiCall)({method:"rooms.notifyMember",args:{channel_id:p,user_id:g},reason:I}))});i.meta={name:"createFetcher",key:"createFetchernotifyMember",description:"Notify member to join huddle"};const m=(0,s.C6)("Set a huddle topic / rename the call",(v,y,T)=>{let{roomId:I,name:p}=T;return v((0,a.apiCall)({method:"screenhero.rooms.rename",reason:"huddles-topic",args:{room:I,room_name:p}}))});m.meta={name:"createFetcher",key:"createFetcherrenameCall",description:"Set a huddle topic / rename the call"};const h=(0,s.C6)("Get a link to a huddle",(v,y,T)=>{let{reason:I,channelId:p}=T;return v((0,a.apiCall)({method:"rooms.getLink",reason:I,args:{channel_id:p}}))});h.meta={name:"createFetcher",key:"createFetchergetLink",description:"Get a link to a huddle"}},6580433553:(z,A,e)=>{"use strict";e.d(A,{A:()=>i});var t=e(3297051565),n=e.n(t),s=e(5257368278),a=e(1269227002),c=e(6932877194),o=e(4423055085),r=e(6422693406),l=e(1874577777);let _=!1;const d=(0,s.A)("Sends a message",function(h,v){let{message:y,traceId:T,parentSpanId:I}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const p={...y},g=v();return y.blocks&&typeof y.blocks=="object"&&(p.blocks=JSON.stringify(y.blocks)),y.unfurl&&typeof y.unfurl=="object"&&(p.unfurl=JSON.stringify(y.unfurl)),_?new r.K((E,f)=>{setTimeout(()=>{f(new Error({data:{error:"testing"},message:"testing"}))},2e3)}):(0,l.A)(g)?h((0,c.apiCallPersisted)({method:"chat.postMessage",args:p,reason:"webapp_message_send_offline",EXPEDITED:!0,traceId:T,parentSpanId:I})):h((0,a.apiCall)({method:"chat.postMessage",args:p,reason:"webapp_message_send",EXPEDITED:!0,traceId:T,parentSpanId:I}))});d.meta={name:"createFetcher",key:"createFetcherchatPostMessage",description:"Sends a message"},d.propTypes={message:n().shape({channel:n().string.isRequired,client_msg_id:n().string}).isRequired,traceId:n().string,parentSpanId:n().string};const i=d,m=u(h=>{_=!!h},"setForceMessageFailure");(0,o.ul)("setForceMessageFailure",m)},9694536345:(z,A,e)=>{"use strict";e.d(A,{O:()=>d});var t=e(8840779375),n=e(3297051565),s=e.n(n),a=e(5257368278),c=e(1269227002),o=e(796111729),r=e(5873468694),l=e(5795074931),_=e(5657872960);const d=(0,a.A)("Calls client.counts endpoint",function(i,m){let{reason:h="client-counts-api/fetchClientCounts"}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return i((0,c.apiCall)({method:"client.counts",args:{thread_counts_by_channel:!0,org_wide_aware:!0,include_file_channels:!0},reason:h})).then(v=>{if(!v||!v.ok)return{};try{const M=["U0620EL8G","WFKHTCZ29","WKLQEGRRB"],D=(0,l.WR)(m());if(M.indexOf(D)>-1){const P=(0,t.A)(v.ims,x=>({id:x.id})),k=(0,t.A)(v.mpims,x=>({id:x.id}));(0,o.Ay)({getState:m}).error("guest_to_guest_visibility",{type:"client_counts_api_results",im_list:P,mpim_list:k})}}catch(M){(0,o.Ay)({getState:m}).error("guest_to_guest_visibility",{type:"client_counts_api_results",error:M})}const{activity:y={},channels:T=[],ims:I=[],mpims:p=[],threads:g={},file_channels:E={has_unreads:!1,mention_count:0},channel_badges:f={},alerts:O=null}=v,C={activity:y,channels:T,ims:I.map(M=>({...M,is_im:!0})),mpims:p.map(M=>({...M,is_mpim:!0})),threads:g,alerts:O,fileChannels:E,channelBadges:f};return(0,_.c)(m())&&v.saved&&(C.saved=(0,r.XK)(v.saved)),C})});d.meta={name:"createFetcher",key:"createFetcherfetchClientCounts",description:"Calls client.counts endpoint"},d.propTypes={reason:s().string}},1194535350:(z,A,e)=>{"use strict";e.d(A,{KO:()=>o,_J:()=>r,zx:()=>l});var t=e(3297051565),n=e.n(t),s=e(1269227002),a=e(5257368278),c=e(4318855015);const o=(0,a.A)("Fetch all available and installed emoji collections from the API",function(_,d){let{reason:i}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return _((0,s.apiCall)({method:"emoji.collections.list",reason:i,args:{installed_only:"0"}}))});o.meta={name:"createFetcher",key:"createFetcherfetchEmojiCollections",description:"Fetch all available and installed emoji collections from the API"},o.propTypes={reason:n().string.isRequired};const r=(0,a.A)("Add an emoji collection",(_,d,i)=>{let{collectionId:m,reason:h}=i;return _((0,s.apiCall)({method:"emoji.addCollection",args:{collection_id:m},reason:h})).catch(v=>{if(v.name!=="already_installed")throw v})});r.meta={name:"createFetcher",key:"createFetcheraddEmojiCollection",description:"Add an emoji collection"},r.propTypes={collectionId:n().string.isRequired,reason:n().string.isRequired};const l=(0,a.A)("Remove an emoji collection",(_,d,i)=>{let{collectionId:m,reason:h}=i;return _((0,c.$x)({collectionId:m})),_((0,s.apiCall)({method:"emoji.removeCollection",reason:h,args:{collection_id:m}}))});l.meta={name:"createFetcher",key:"createFetcherremoveEmojiCollection",description:"Remove an emoji collection"},l.propTypes={collectionId:n().string.isRequired,reason:n().string.isRequired}},490494914:(z,A,e)=>{"use strict";e.d(A,{Cl:()=>_,Is:()=>d,af:()=>l});var t=e(9706240641),n=e.n(t),s=e(5257368278),a=e(6892115804),c=e(8847766420),o=e(2149300053),r=e(1026257987);const l=(0,s.A)("Queries Flannel for a list of external connected orgs/teams",(i,m,h)=>{let{count:v,filter:y,marker:T}=h;return(0,o.P)((0,c.JY)(m()),{method:o.J8.EXTERNAL_TEAMS_LIST,args:{count:v,filter:y,marker:T}}).then(I=>I)});l.meta={name:"createFetcher",key:"createFetcherfetchExternalTeamsList",description:"Queries Flannel for a list of external connected orgs/teams"};const _=(0,s.A)("Queries Flannel for channel counts of external connected orgs/teams",(i,m,h)=>{let{teamIds:v,count:y,marker:T}=h;return(0,o.P)((0,c.JY)(m()),{method:o.J8.EXTERNAL_TEAMS_COUNTS,args:{team_ids:v,count:y,marker:T}}).then(I=>I)});_.meta={name:"createFetcher",key:"createFetcherfetchExternalTeamsCounts",description:"Queries Flannel for channel counts of external connected orgs/teams"};const d=(0,s.A)("Fetches and upserts external teams that match a query",function(){var i=(0,t.coroutine)(function*(m,h,v){const y=(0,c.JY)(h());return(0,r.Cj)(y,v).then(T=>{let{objects:I,next_marker:p}=T;return m((0,a.OU)({teams:I})),{externalTeams:I,nextMarker:p}})});return function(m,h,v){return i.apply(this,arguments)}}());d.meta={name:"createFetcher",key:"createFetcherfetchAndUpsertExternalTeamsWithQuery",description:"Fetches and upserts external teams that match a query"}},9109082163:(z,A,e)=>{"use strict";e.d(A,{Rs:()=>m,eS:()=>i,xs:()=>d});var t=e(3297051565),n=e.n(t),s=e(8703681551),a=e(8571983633),c=e(5257368278),o=e(1269227002),r=e(9676369204),l=e(9101533895);const _={"pins.list":{}},d=(0,c.A)("Get pinned items for channel",function(v,y){let{channelId:T,reason:I}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const p=_["pins.list"];return p[T]||(p[T]=v((0,o.apiCall)({method:"pins.list",args:{channel:T},reason:I})),p[T].then(g=>{const E=y(),f=(0,l.OL)(E,T);f&&(0,r.YJ)(g,f)}),p[T].finally(()=>delete p[T])),p[T]});d.meta={name:"createFetcher",key:"createFetcherpinsList",description:"Get pinned items for channel"},d.propTypes={channelId:n().string.isRequired,reason:n().string.isRequired};const i=(0,c.A)("Pin Message to channel",(v,y,T)=>{let{ts:I,fileId:p,fileCommentId:g,channelId:E,reason:f}=T;return v((0,o.apiCall)({method:"pins.add",reason:f,args:(0,s.A)({channel:E,timestamp:I,file:p,file_comment:g},a.A)}))});i.meta={name:"createFetcher",key:"createFetcherpinsAdd",description:"Pin Message to channel"},i.propTypes={channelId:n().string.isRequired,ts:n().string,fileId:n().string,fileCommentId:n().string,reason:n().string.isRequired};const m=(0,c.A)("Unpin Message from channel",(v,y,T)=>{let{ts:I,fileId:p,fileCommentId:g,channelId:E,reason:f}=T;return v((0,o.apiCall)({method:"pins.remove",reason:f,args:(0,s.A)({channel:E,timestamp:I,file:p,file_comment:g},a.A)}))});m.meta={name:"createFetcher",key:"createFetcherpinsRemove",description:"Unpin Message from channel"},m.propTypes={channelId:n().string.isRequired,ts:n().string,fileId:n().string,fileCommentId:n().string,reason:n().string.isRequired};const h={resetActiveCalls:()=>{Object.keys(_).forEach(v=>{_[v]={}})}}},6987519067:(z,A,e)=>{"use strict";e.d(A,{lp:()=>bt,SI:()=>_s,DC:()=>vn,Yb:()=>Hn,aw:()=>Rs,g2:()=>bs,U7:()=>gt,eR:()=>je,sr:()=>ht,Do:()=>pn,EM:()=>Sn,AC:()=>U,FF:()=>Us,A$:()=>Es,mi:()=>V,mK:()=>Zn,bE:()=>wt,AQ:()=>Nn,Cs:()=>Kt,J6:()=>ne,LR:()=>ie,cD:()=>jn,jl:()=>me,QH:()=>ot,DF:()=>yn,UC:()=>Ue,fx:()=>Qe,lS:()=>Ss,A1:()=>Dn,H9:()=>Bn,ZD:()=>is,$P:()=>Fe,G2:()=>ut,S:()=>Is});var t=e(8571983633),n=e(7715417323),s=e(7174777686),a=e(2141441167),c=e(897091071),o=e(1703559452),r=e(9113979368),l=e(9746734072),_=e(5503876160),d=e(4103274853),i=e(1566461842),m=e(6422693406),h=e(8737667238),v=e(5513050121),y=e(7599421656),T=e(6644049054),I=e(8956161330),p=e(2628468636),g=e(1190344069),E=e(1340402138),f=e(4446301238),O=e(6554371307),C=e(8017028002),M=e(490494914),D=e(5984521287),P=e(8419094353),k=e(9552526132),x=e(8352634987),F=e(4423055085),W=e(5613323535),Y=e(735940183),S=e(571104883),L=e(7148679525),w=e(3677514771),J=e(3683888369),G=e(6839188756),X=e(1507833885);const te=new Y.Ay("modals");function le(Ge){return[{id:"downloads",name:te.t("Downloads"),icon:"download",isEnabled:()=>(0,S.y3)()},{id:"invite_to_workspace",name:te.t("Invite people to {workspaceName}",{workspaceName:(0,G.F1)((0,w.H7)(Ge))}),icon:"add-user",isEnabled:()=>(0,L.Lz)(Ge)},{id:"create_a_channel",name:te.t("Create a Channel"),icon:"plus",isEnabled:()=>(0,X.MM)(Ge)},{id:"create_a_canvas",name:te.t("Create a canvas",{fallbackHash:"6ac4a1edc6d12317e9fc711b1fd00c073b191bdd",fallbackHashNs:"classic_nav"}),icon:"plus",isEnabled:()=>(0,J.l)(Ge)}]}u(le,"getAllModals");function ve(Ge){return le(Ge).filter(It=>It.isEnabled())}u(ve,"getAllEnabledModals");var Q=e(7940058138),Ae=e(7520119303),ae=e(8414867410),he=e(9289081806),_e=e(1407713935),ee=e(5274604535),de=e(2298581483),Ie=e(7969244833),ce=e(6007206761),j=e(6495946979),N=e(4001737397),b=e(1197508738),R=e(2188787324),K=e(5455782105),B=e(8170643398),$=e(4562579337),Z=e(5096647761),re=e(3792998666),Te=e(3479134063),Ce=e(6536982570),Pe=e(9889493721),fe=e(6120301420),pe=e(9001455011),q=e(340763958),se=e(3212336858),ge=e(2801540778),Oe=e(2023092677),Le=e(4827886670),We=e(9931116838),Re=e(3559837422),we=e(3307632080),Je=e(4919351998),it=e(411655882),et=e(2229186),lt=e(6244014364),nt=e(5751973043),at=e(82287009),ze=e(9190452268),Ke=e(5770715593),He=e(6617433054),Ye=e(352142497);const _t=new Y.Ay("ia4"),vt={get[Ye.D.BrowseCanvases](){return _t.t("All canvases",{fallbackHash:"50a279de829f2dc398ac2ac7c9367508ea4b5df5",fallbackHashNs:"channel_sidebar"})},get[Ye.D.BrowseChannels](){return _t.t("All channels",{fallbackHash:"50a279de829f2dc398ac2ac7c9367508ea4b5df5",fallbackHashNs:"channel_sidebar"})},get[Ye.D.BrowsePeople](){return _t.t("All people",{fallbackHash:"7aeeec03f7c076af275e9b7c0e187a40bd193acc",fallbackHashNs:"enterprise_dashboard"})},get[Ye.D.BrowseFiles](){return _t.t("All files",{fallbackHash:"f7857dcc71d3ce6a9095d1fbca5acb8cc9319005",fallbackHashNs:"search"})},get[Ye.D.ExternalWorkspaceAllowedOrgPane](){return _t.t("Organization",{fallbackHash:"519255ae1f74ffc5ddd29979295c7572f048ad81",fallbackHashNs:"member_profile"})},get[Ye.D.RecentFiles](){return _t.t("Recently Viewed Files",{fallbackHash:"6ce6c512ea433a7fc5c8841628e7696cd0ff7f2b"})},get[Ye.D.FilesSharedWithYou](){return _t.t("Files shared with you",{fallbackHash:"72f2b0dfa1e68a34813db5999ff8098f60ef699d",fallbackHashNs:"search"})},get[Ye.D.FilesCreatedByYou](){return _t.t("Files created by you",{fallbackHash:"8c292710d9aa5d3b598cf24b70f804cb0341e24e",fallbackHashNs:"search"})},get[Ye.D.RecentCanvases](){return _t.t("Recently Viewed Canvases",{fallbackHash:"6ce6c512ea433a7fc5c8841628e7696cd0ff7f2b"})},get[Ye.D.CanvasesSharedWithYou](){return _t.t("Canvases shared with you",{fallbackHash:"6ce6c512ea433a7fc5c8841628e7696cd0ff7f2b"})},get[Ye.D.CanvasesCreatedByYou](){return _t.t("Canvases created by you",{fallbackHash:"6ce6c512ea433a7fc5c8841628e7696cd0ff7f2b"})},[Ye.D.DmsList]:void 0,[Ye.D.LaterList]:void 0,[Ye.D.Channel]:void 0,[Ye.D.AppSpace]:void 0,[Ye.D.Quip]:void 0,[Ye.D.BrowseApps]:void 0,get[Ye.D.ExternalOrganizations](){return _t.t("External organizations",{fallbackHash:"e21da9e565b1e32162650ed549e03eaf5b4364e5",fallbackHashNs:"slack_connect_hub"})},get[Ye.D.ExternalOrganization](){return _t.t("External organization",{fallbackHash:"e21da9e565b1e32162650ed549e03eaf5b4364e5",fallbackHashNs:"slack_connect_hub"})},get[Ye.D.ExternalPeople](){return _t.t("External people",{fallbackHash:"e21da9e565b1e32162650ed549e03eaf5b4364e5",fallbackHashNs:"slack_connect_hub"})},get[Ye.D.SlackConnectChannels](){return _t.t("Slack Connect channels",{fallbackHash:"e21da9e565b1e32162650ed549e03eaf5b4364e5",fallbackHashNs:"slack_connect_hub"})},get[Ye.D.SlackConnectInvitations](){return _t.t("Slack Connect invitations",{fallbackHash:"e21da9e565b1e32162650ed549e03eaf5b4364e5",fallbackHashNs:"slack_connect_hub"})},[Ye.D.BrowseExternalWorkspace]:void 0,[Ye.D.PostEvent]:void 0,[Ye.D.BrowseShortcuts]:void 0,[Ye.D.BrowseWorkflowsManagedByYou]:void 0,[Ye.D.BrowseYourWorkflowTemplates]:void 0,[Ye.D.BrowseWorkflowTemplates]:void 0,[Ye.D.BrowseUserGroups]:void 0,[Ye.D.OrgDirectory]:void 0,get[Ye.D.RecentPlatform](){return _t.t("Recently used workflows",{fallbackHash:"f97d1ab1f281e78d5e61024eee5be84679fd60ac",fallbackHashNs:"search"})},[Ye.D.SlackConnect]:void 0,[Ye.D.Page]:void 0,[Ye.D.Threads]:void 0,[Ye.D.Thread]:void 0,[Ye.D.Profile]:void 0,[Ye.D.FileDetails]:void 0,[Ye.D.Help]:void 0,[Ye.D.UserGroup]:void 0,[Ye.D.KeyboardShortcuts]:void 0,[Ye.D.WhatsNew]:void 0,[Ye.D.Feedback]:void 0,[Ye.D.List]:void 0,[Ye.D.ListRecord]:void 0,[Ye.D.ListRecordDetails]:void 0,[Ye.D.ListRecordThread]:void 0,[Ye.D.ListRecordHistory]:void 0,[Ye.D.ComposeList]:void 0,[Ye.D.Compose]:void 0,[Ye.D.QuipCommentThread]:void 0,[Ye.D.QuipCommentStream]:void 0,[Ye.D.QuipActivityHistory]:void 0,[Ye.D.QuipAutomationsOverview]:void 0,[Ye.D.Canvas]:void 0,[Ye.D.ChannelCanvas]:void 0,[Ye.D.CanvasBrowser]:void 0,[Ye.D.HuddlePageCanvas]:void 0,[Ye.D.PaidBenefits]:void 0,[Ye.D.Setup]:void 0,[Ye.D.SearchEmpty]:void 0,[Ye.D.AboutWorkspace]:void 0,[Ye.D.Unknown]:void 0,[Ye.D.MorePeopleSidebar]:void 0,[Ye.D.MoreCanvasesSidebar]:void 0,[Ye.D.AppPopout]:void 0,[Ye.D.MorePlatformSidebar]:void 0,[Ye.D.Search]:void 0,[Ye.D.ChannelList]:void 0,[Ye.D.BrowseLists]:void 0,[Ye.D.MyItems]:void 0,[Ye.D.DeletedLists]:void 0,[Ye.D.Tasks]:void 0,[Ye.D.AssignedTasks]:void 0,[Ye.D.Reminders]:void 0,[Ye.D.Saved]:void 0,[Ye.D.BrowseList]:void 0,[Ye.D.ActivityList]:void 0,[Ye.D.MoreFilesSidebar]:void 0,[Ye.D.MoreListsSidebar]:void 0,[Ye.D.MoreTodosSidebar]:void 0,[Ye.D.FilesPrototypeSidebar]:void 0,[Ye.D.MoreChannelsSidebar]:void 0,[Ye.D.MoreHuddlesSidebar]:void 0,[Ye.D.MoreExternalConnectionsSidebar]:void 0,[Ye.D.HelpBrowser]:void 0,[Ye.D.Huddle]:void 0,[Ye.D.BrowseHuddles]:void 0,[Ye.D.KeyboardShortcutsBrowser]:void 0,[Ye.D.WhatsNewBrowser]:void 0,[Ye.D.FeedbackBrowser]:void 0,[Ye.D.ExternalWorkspaceSidebar]:void 0,[Ye.D.ExternalWorkspacePeopleBrowser]:void 0,[Ye.D.ExternalWorkspaceChannelBrowser]:void 0,[Ye.D.AiSummaryDetails]:void 0,[Ye.D.DailyDigest]:void 0,[Ye.D.MoreAiSummarySidebar]:void 0,[Ye.D.SearchSummary]:void 0,[Ye.D.AssistantList]:void 0,[Ye.D.BrowseFilesPrototype]:void 0,[Ye.D.Today]:void 0,[Ye.D.Record]:void 0,[Ye.D.RecordChannelCreate]:void 0,[Ye.D.RecordChannelRelatedList]:void 0,[Ye.D.SalesAdministration]:void 0,[Ye.D.SalesBulkGrid]:void 0,[Ye.D.SalesHome]:void 0,[Ye.D.SalesListViewBrowser]:void 0,[Ye.D.SalesLogActivity]:void 0,[Ye.D.SalesNotifications]:void 0,[Ye.D.SalesSidebar]:void 0,[Ye.D.AssistantThread]:void 0,[Ye.D.Solutions]:void 0,[Ye.D.ChannelFiles]:void 0,[Ye.D.SlackKitPlayground]:void 0,[Ye.D.AiApp]:void 0,[Ye.D.BookmarksFolder]:void 0,[Ye.D.ActionItems]:void 0,[Ye.D.Inbox]:void 0,[Ye.D.HuddleTranscriptDetails]:void 0,get[Ye.D.WorkflowDetails](){return _t.t("Workflow details",{fallbackHash:"badd385121c5861ac693b59ad8c160fdf7994344",fallbackHashNs:"channel_details"})},get[Ye.D.WorkflowEditor](){return _t.t("Workflow Editor",{fallbackHash:"792c81a4cfdcb5b45d688cb03c2fd2e816f86d44",fallbackHashNs:"workflow_builder"})},[Ye.D.BBMMain]:void 0,[Ye.D.BBMWorkspaceSwitcher]:void 0,[Ye.D.SearchInChannel]:void 0,[Ye.D.BBMMore]:void 0},Lt=u(Ge=>Ge in vt?vt[Ge]:"","getDisplayNameForViewType");var ft=e(4240442510),mt=e(6910192640),Yt=e(505908973),nn=e(4096483543),jt=e(5600190572),gn=e(5276466411),on=e(7948868735),Xt=e(6533394955);class rn extends on.F{fetchData(){return(0,Xt.dispatchForTeamId)(this.teamId,(0,gn.z)({reason:"fetch-search-autocomplete-top-engaged-files"})).then(It=>It.files)}constructor(It,Ve){super(),this.teamId=It,this.timeoutMs=Ve}}u(rn,"AutocompleteTopEngagedFilesCache");const Zt={};function Ht(Ge){let{teamId:It,timeoutMs:Ve}=Ge;const st=It||"_default";return Zt[st]||(Zt[st]=new rn(It,Ve)),Zt[st]}u(Ht,"getAutocompleteTopEngagedFilesCache");var Bt=e(8195161e3),Qt=e(1948374838),sn=e(1917953477),Mn=e(181849556),ct=e(2825917518),yt=e(1072784641),Rt=e(1399977320),xe=e(8956261571),Nt=e(4342685672),Ft=e(1031947056),qt=e(8847766420),un=e(4119164726),tt=e(6451390137),pt=e(2854654447),Dt=e(5795074931),Wt=e(9107158149),zt=e(7688940281),ln=e(207659888),Tn=e(2235302340),cn=e(9101533895),hn=e(6728717861),Cn=e(3829348308),_n=e(4761125736),Vn=e(937317117),Wn=e(761034736),kn=e(7478895768),Pn=e(5987902639),$t=e(8276911661),$n=e(5688490863),De=e(8149648525),Ne=e(2047021170),Me=e(8515087389),Be=e(136400070),ue=e(4135820365),ke=e(6892115804),Xe=e(1835177371),dt=e(6508028729);const bt={entities:{channels:{includePublic:!0,includePrivate:!0,includeFromAnotherTeam:!1,includeMpims:!1,includeIms:!1,includeArchived:!0,onlyIfMember:!1,onlyVisibleMpims:!1,onlyVisibleIms:!1,includeExternallyShared:!0,includeOnlyExternallyShared:!0,allowedInternalTeams:void 0,shouldAllowedInternalTeamsMatchAny:void 0,onlyExternallyShared:!1,onlyFromTeamId:void 0,includeRecordChannels:!0},members:{includeSelf:!1,includeSlackbot:!0,includeBots:!0,includeWorkflows:!1,includeExternal:!0,includeAllExternal:!1,onlyLocalTeam:!1,includeGuests:!0,includeProfileOnlyUsers:!1,onlyExternalFromTeams:void 0,onlyFromExternalTeamId:void 0},userGroups:{includeDeleted:!1,includeFromAnotherTeam:!1},channelSections:{includeTypes:{[ln.VZ.Standard]:!0,[ln.VH]:!0}}},limit:24,sort:{preferExactMatch:!0,frecency:!0,preferChannelsUserBelongsTo:!0,preferMpimsWithActiveMembers:!0,model:Nt.KV},fuzzyLimit:3,fuzzyJumpLimit:20,fuzzyCJK:!0,returnMetadata:!1};function be(Ge){let{query:It,options:Ve}=Ge;var st,At,St;const Ot=(St=Ve==null?void 0:Ve.entities)!==null&&St!==void 0?St:{},xt=Ot==null?void 0:Ot.members;let tn=!1;return xt&&xt!==!0&&(tn=!!(xt!=null&&xt.matchEmailField)),{source:Ve==null||(st=Ve.sort)===null||st===void 0?void 0:st.source,tiered:Ve==null?void 0:Ve.tiered,is_searcher_sessions:!1,entities:Object.keys(Ot).filter(En=>!!Ot[En]).sort().toString(),query_length:It.length,is_member_email_search:(Ve==null||(At=Ve.sort)===null||At===void 0?void 0:At.source)==="use-team-and-people-search"&&tn}}u(be,"getTraceTags");function U(Ge,It){var Ve,st;const{excludeElmChannels:At,includePublic:St,includePrivate:Ot,includeFromAnotherTeam:xt,allowedInternalTeams:tn,shouldAllowedInternalTeamsMatchAny:En}=(st=(Ve=It.entities)===null||Ve===void 0?void 0:Ve.channels)!==null&&st!==void 0?st:{};let an=[];return St&&(an=[...an,...(0,cn.Wr)(Ge,{includeFromAnotherTeam:!!xt})]),Ot&&(an=[...an,...(0,cn.sE)(Ge,{includeFromAnotherTeam:!!xt})]),At&&(an=an.filter(Vt=>!(0,we.A)(Ge,Vt))),tn&&(an=an.filter(Vt=>{if((0,N.O)(Vt))return!!En;const dn=(0,de.R)(Ge,Vt),Un=En?dn==null?void 0:dn.some(On=>tn.includes(On)):dn==null?void 0:dn.every(On=>tn.includes(On));return(dn==null?void 0:dn.length)&&Un})),an}u(U,"getLocalChannels");function V(Ge,It){var Ve;const st=(0,qt.ZT)(Ge),At=It==null||(Ve=It.entities)===null||Ve===void 0?void 0:Ve.teams;var St;const Ot=Object.values((St=dt._===null||dt._===void 0?void 0:(0,dt._)())!==null&&St!==void 0?St:{}).filter(Vt=>Vt.id!==st);if(At!=null&&At.onlyNavigable){const Vt=(0,ue._)(Ge);return Vt.length?[...Ot,...Vt]:Ot}var xt;const tn=(xt=(0,w.iK)(Ge))!==null&&xt!==void 0?xt:{},En=Ot.map(Vt=>Vt.id),an=Object.values(tn).filter(Vt=>!En.includes(Vt.id));return[...Ot,...an].filter(Dn(Ge,At))}u(V,"getLocalTeams");const ne=(0,Ft.Ay)("Get channels from flannel by query",(Ge,It,Ve)=>{let{query:st,options:At}=Ve;var St,Ot,xt,tn;const{includeFromAnotherTeam:En,includeExternallyShared:an,includeOnlyExternallyShared:Vt,onlyExternallyShared:dn,onlyFromTeamId:Un,onlyFromExternalWorkspaceId:On,allowedInternalTeams:Fn,shouldAllowedInternalTeamsMatchAny:xn,includeRecordChannels:ms}=(tn=(St=At.entities)===null||St===void 0?void 0:St.channels)!==null&&tn!==void 0?tn:{},Ut=((Ot=At.entities)===null||Ot===void 0||(xt=Ot.channels)===null||xt===void 0?void 0:xt.remoteLimit)||At.limit,ns=It(),Kn=[],Jn=" AND ",zn={query:st,count:Ut||bt.limit||24,fuzz:(0,_n._Z)(ns,"fuzzy_no_fuzz")==="fuzzy_no_fuzz"?0:1,uax29_tokenizer:(0,_n._Z)(ns,"searcher_flannel_cjk")==="cjk"};return En&&Kn.push("xws"),!(0,t.A)(an)&&!an&&Kn.push("NOT shared"),!(0,t.A)(Vt)&&!Vt&&Kn.push("NOT external"),!(0,t.A)(dn)&&dn&&Kn.push("shared"),Kn.length&&(zn.filter=Kn.join(Jn)),Un&&(zn.external_team=Un),On&&(zn.external_team=On),Fn&&(zn.allowed_internal_teams=Fn),xn&&(zn.should_allowed_internal_teams_match_any=xn),ms&&!(0,g.Ht)(ns)&&(zn.include_record_channels=!0),Ge((0,f.hq)({query:zn})).timeout(2e3).catch(n.A)});ne.meta={name:"createThunk",key:"createThunkgetRemoteChannels",description:"Get channels from flannel by query"};const ie=(0,Ft.Ay)("Get emoji from flannel by query",(Ge,It,Ve)=>{let{query:st,options:At}=Ve;var St,Ot;const xt=((St=At.entities)===null||St===void 0||(Ot=St.emoji)===null||Ot===void 0?void 0:Ot.remoteLimit)||At.limit;return Ge((0,C.l8)({query:{query:st,count:xt}})).timeout(2e3).catch(n.A)});ie.meta={name:"createThunk",key:"createThunkgetRemoteEmoji",description:"Get emoji from flannel by query"};const Ue=(0,Ft.Ay)("Get user groups from the search.team endpoint by query",(Ge,It,Ve)=>{let{query:st,options:At}=Ve;var St,Ot,xt,tn,En,an;const Vt=((St=At.entities)===null||St===void 0||(Ot=St.userGroups)===null||Ot===void 0?void 0:Ot.remoteLimit)||At.limit;return Ge((0,P.cn)({query:{query:st,count:Vt,org_wide:(xt=At.entities)===null||xt===void 0||(tn=xt.userGroups)===null||tn===void 0?void 0:tn.includeFromAnotherTeam,channel:(En=At.entities)===null||En===void 0||(an=En.userGroups)===null||an===void 0?void 0:an.channel}})).timeout(2e3).catch(n.A)});Ue.meta={name:"createThunk",key:"createThunkgetRemoteUserGroups",description:"Get user groups from the search.team endpoint by query"};const Qe=(0,Ft.Ay)("Get remote triggers with query",(Ge,It,Ve)=>{let{query:st}=Ve;return Ge((0,kn.tP)({query:st}))});Qe.meta={name:"createThunk",key:"createThunkgetRemoteWorkflowTriggers",description:"Get remote triggers with query"};const je=(0,Ft.Ay)("Get bulk user groups from the userGroups.searchBulk endpoint by query",(Ge,It,Ve)=>{let{queries:st,options:At}=Ve;var St,Ot,xt,tn,En,an;const Vt=((St=At.entities)===null||St===void 0||(Ot=St.userGroups)===null||Ot===void 0?void 0:Ot.remoteLimit)||At.limit;return Ge((0,P.MZ)({query:{queries:st,count:Vt,org_wide:(xt=At.entities)===null||xt===void 0||(tn=xt.userGroups)===null||tn===void 0?void 0:tn.includeFromAnotherTeam,channel:(En=At.entities)===null||En===void 0||(an=En.userGroups)===null||an===void 0?void 0:an.channel}})).timeout(2e3).catch(n.A)});je.meta={name:"createThunk",key:"createThunkgetBulkRemoteUserGroups",description:"Get bulk user groups from the userGroups.searchBulk endpoint by query"};function ht(Ge,It){const{includeArchived:Ve,includeRequired:st,onlyIfMember:At,canPost:St,includeExternallyShared:Ot,includeOnlyExternallyShared:xt,onlyExternallyShared:tn,onlyFromTeamId:En,onlyFromExternalWorkspaceId:an}=It??{};return Vt=>{let dn=!0;if(Ve||(dn=dn&&!(0,ce.F)(Vt)),!(0,t.A)(st)&&!st&&(dn=dn&&!(0,_e.gx)(Vt)),tn&&(dn=dn&&(0,q.ju)(Vt)),(!Ot||!xt)&&(dn=dn&&!(0,q.ju)(Vt)),At&&(dn=dn&&(0,j.b)(Vt)),St&&(dn=dn&&(0,Le.E)(Ge,Vt.id)),En){var Un;dn=dn&&(((Un=(0,ee.A)(Ge,Vt))===null||Un===void 0?void 0:Un.includes(En))||!1)}return an&&(dn=dn&&(0,he.ne)(Ge,Vt)===an),dn}}u(ht,"getChannelFilterFunction");const ot=(0,Ft.Ay)("Get members from flannel by query",(Ge,It,Ve)=>{let{query:st,options:At}=Ve;var St,Ot,xt;const{includeDeleted:tn,matchEmailField:En,onlyExternal:an,includeExternal:Vt,includeAllExternal:dn,includeBots:Un,onlyFromExternalTeamId:On,onlyFromExternalWorkspaceId:Fn}=(xt=At.entities.members)!==null&&xt!==void 0?xt:{},xn=((St=At.entities)===null||St===void 0||(Ot=St.members)===null||Ot===void 0?void 0:Ot.remoteLimit)||At.limit,ms=It(),Ut=[],ns=(0,G.r7)((0,w.H7)(ms))||!!(0,qt.jV)(ms),Kn=ns?["NOT org"]:["NOT team"],Jn=ns?["org"]:["team"],zn=!tn,ds=" AND ",mn={query:st,count:xn||bt.limit||24,fuzz:(0,_n._Z)(ms,"fuzzy_no_fuzz")==="fuzzy_no_fuzz"||At.fuzzyLimit===0?0:1,uax29_tokenizer:(0,_n._Z)(ms,"searcher_flannel_cjk")==="cjk"};return zn&&Ut.push("NOT deactivated"),(an||On)&&Ut.push(...Kn),(On||Fn)&&(mn.external_team=On||Fn),Un||Ut.push("NOT bots"),Vt||Ut.push(...Jn),Vt&&dn&&(mn.include_all_external=!0),En&&(mn.search_email=!0),Ut.length&&(mn.filter=Ut.join(ds)),Ge((0,D.Wr)({query:mn})).timeout(2e3).catch(n.A)});ot.meta={name:"createThunk",key:"createThunkgetRemoteMembers",description:"Get members from flannel by query"};const gt=(0,Ft.Ay)("Get members from flannel by query",(Ge,It,Ve)=>{let{queries:st,options:At}=Ve;var St,Ot,xt,tn;const{includeDeleted:En,matchEmailField:an}=(tn=(St=At.entities)===null||St===void 0?void 0:St.members)!==null&&tn!==void 0?tn:{},Vt=((Ot=At.entities)===null||Ot===void 0||(xt=Ot.members)===null||xt===void 0?void 0:xt.remoteLimit)||At.limit||24,dn=It(),Un=[],On=!En,Fn=" AND ",xn={queries:st,count:Vt,fuzz:(0,_n._Z)(dn,"fuzzy_no_fuzz")==="fuzzy_no_fuzz"?0:1,uax29_tokenizer:(0,_n._Z)(dn,"searcher_flannel_cjk")==="cjk"};return On&&Un.push("NOT deactivated"),an&&(xn.match_email=!0),Un.length&&(xn.filter=Un.join(Fn)),Ge((0,D.W9)({query:xn})).timeout(2e3).catch(n.A)});gt.meta={name:"createThunk",key:"createThunkgetBulkRemoteMembers",description:"Get members from flannel by query"};function wt(Ge,It){const{includeSelf:Ve,includeSlackbot:st,includeBots:At,includeWorkflows:St,includeDeleted:Ot,includeExternal:xt,includeGuests:tn,includeProfileOnlyUsers:En,onlyLocalTeam:an,onlyExternal:Vt,onlyExternalFromTeams:dn,onlyFromExternalTeamId:Un}=It??{};return On=>{let Fn=!0;if(Vt&&(Fn=Fn&&(0,Z.g)(On)&&!(0,$.A)(On)),Ve||(Fn=Fn&&!(0,B.fy)(On)),st||(Fn=Fn&&!(0,Te.U)(On)),dn)return(0,s.A)(dn,(0,Ce.dQ)(On));if(Un)return Ve&&(0,B.fy)(On)?!0:(0,Z.g)(On)&&(0,Ce.dQ)(On)===Un;if(At||(Fn=Fn&&!(0,$.A)(On)&&!(0,Te.U)(On)),St||(Fn=Fn&&!(0,B.v3)(On)),Ot||(Fn=Fn&&!(0,B.oy)(On)),xt||(Fn=Fn&&!(0,Z.g)(On)),tn||(Fn=Fn&&!(0,re.P)(On)),En||(Fn=Fn&&!(0,B.hh)(On)),En&&(0,B.hh)(On)&&(Fn=Fn&&!(0,B.oy)(On)),an){const xn=(0,qt.ZT)(Ge);(0,B.hh)(On)&&En||(Fn=Fn&&(0,Ce.nO)(On,xn))}return Fn}}u(wt,"getMemberFilterFunction");function Dn(Ge,It){var Ve;const{includeCurrentTeam:st,includeExternal:At,onlyExternal:St,onlyCurrentOrg:Ot,onlyAvailableToCurrentOrg:xt,onlyMemberOnCurrentOrg:tn}=It??{},En=(0,qt.Kc)(Ge),an=(0,Dt.WR)(Ge),Vt=(0,$t.nv)(Ge,an),dn=(Vt==null||(Ve=Vt.enterprise_user)===null||Ve===void 0?void 0:Ve.teams)||[];return Un=>!(!st&&Un.id===(0,qt.ZT)(Ge)||St&&!(0,ge.z)(Ge,Un)||!At&&!St&&!xt&&(0,ge.z)(Ge,Un)||Ot===!0&&Un.id!==En&&(0,G.Ss)(Un)!==En||xt===!0&&Un.id!==En&&(0,G.Ss)(Un)!==En&&!(0,ge.z)(Ge,Un)||tn===!0&&!dn.includes(Un.id))}u(Dn,"getTeamFilterFunction");function Nn(Ge,It){const{onlyVisibleMpims:Ve,onlyExternallyShared:st,includeExternallyShared:At,onlyFromTeamId:St}=It??{};return Ot=>{let xt=!0;if(Ve&&(xt=xt&&(0,he.w6)(Ge,Ot)),st&&(xt=xt&&(0,q.ju)(Ot)),At===!1&&(xt=xt&&!(0,q.ju)(Ot)),St){var tn;xt=xt&&(((tn=(0,ee.A)(Ge,Ot))===null||tn===void 0?void 0:tn.includes(St))||!1)}return xt}}u(Nn,"getMpimFilterFunction");function Sn(Ge,It){const{onlyExternallyShared:Ve,includeExternallyShared:st,onlyFromTeamId:At,onlyVisibleIms:St}=It??{};return Ot=>{let xt=!0;if(St&&(xt=xt&&(0,he.PE)(Ge,Ot)),Ve&&(xt=xt&&(0,q.ju)(Ot)),st||(xt=xt&&!(0,q.ju)(Ot)),At){var tn;xt=xt&&(((tn=(0,ee.A)(Ge,Ot))===null||tn===void 0?void 0:tn.includes(At))||!1)}return xt}}u(Sn,"getImFilterFunction");function Bn(Ge,It){const{includeDeleted:Ve,includeFromAnotherTeam:st,onlyFromExternalWorkspaceId:At}=It??{};return St=>{let Ot=!0;return st||(Ot=Ot&&!(0,Xe.dk)(Ge,St.id)),Ve||(Ot=Ot&&(0,Oe.V1)(St)),At&&(Ot=Ot&&(0,Oe.$Q)(St)===At),Ot}}u(Bn,"getUserGroupFilterFunction");function pn(Ge,It){const{onlyCanvases:Ve=!1,onlyLists:st=!1,onlyWriteable:At=!1,onlyChannelCanvases:St=!1,onlyTemplateCanvases:Ot=!1,includeChannelCanvases:xt=!1,excludeTemplateCanvases:tn=!1}=It??{},En=(0,fe.hq)(Ge),an=(0,qt.Kc)(Ge),Vt=(0,w._J)(Ge,an),dn=Vt&&!(0,G.qR)(Vt);return Un=>{let On=!0;return Ve&&(On=On&&((0,R.wL)(Un)&&!dn||En&&xt&&(0,R.aD)(Un)),(0,R.dE)(Un)&&tn)?!1:(En&&(St||dn)&&(On=On&&!(0,R.wL)(Un)&&(0,R.aD)(Un)),Ot&&(On=On&&(0,R.dE)(Un)),st&&(On=On&&(0,R.l7)(Un)),At&&(On=On&&(0,R.mW)(Un)),On)}}u(pn,"getFileFilterFunction");const yn=(0,Ft.Ay)("Get teams via API by query",(Ge,It,Ve)=>{let{query:st,options:At}=Ve;var St,Ot;const{onlyExternal:xt,includeExternal:tn,remoteLimit:En}=(Ot=(St=At.entities)===null||St===void 0?void 0:St.teams)!==null&&Ot!==void 0?Ot:{},an=It();if((0,Re.DM)(an))return m.S.resolve();if(xt||tn)return Ge((0,M.Is)(st)).timeout(2e3).catch(n.A);const Vt=En||At.limit||24;return Ge((0,ke.vB)({query:st,count:Vt})).timeout(2e3).catch(n.A)});yn.meta={name:"createThunk",key:"createThunkgetRemoteTeams",description:"Get teams via API by query"};const jn=(0,Ft.Ay)("Get files via API by query",(Ge,It,Ve)=>{let{query:st,options:At}=Ve;var St,Ot;const{onlyCanvases:xt,onlyChannelCanvases:tn,onlyTemplateCanvases:En,onlyLists:an,excludeTemplateCanvases:Vt,bypassCache:dn}=(Ot=(St=At.entities)===null||St===void 0?void 0:St.files)!==null&&Ot!==void 0?Ot:{};let Un=st;return En?Un=`type:canvas_template ${st}`:xt||tn?Un=`${Vt?"type:quip -type:canvas_template":"type:quip"} ${st}`:an&&(Un=`type:list ${st}`),Ge((0,O.yF)({query:Un,includeShares:!0,bypassCache:dn})).timeout(2e3).catch(n.A)});jn.meta={name:"createThunk",key:"createThunkgetRemoteFiles",description:"Get files via API by query"};function Zn(Ge){const It=(0,ae.A4)(),Ve={},st=[];v.cw.forEach(St=>{const Ot=(0,ft.A)({tab:St});(0,mt.A)(Ge,St)&&Ot&&!(Ot in Ve)&&(st.push({id:St,name:Ot,is_view:!0,is_tab_view:!0}),Ve[Ot]=Ot)}),v.g5.forEach(St=>{const Ot=Lt(St);(0,Yt.A)(Ge,St)&&Ot&&!(Ot in Ve)&&(st.push({id:St,name:Ot,is_view:!0,is_mva_view:!0}),Ve[Ot]=Ot)}),It.forEach(St=>{if(!(0,ae.cH)(Ge,St)&&!(St.id==="Pslack-connect"&&!(0,T.A)(Ge))&&St.id!=="Pactivity"&&!(St.id===Q.c.Apps&&!(0,pe.t)(Ge))&&!(St.id===Q.c.Shortcuts&&!(0,Pe.Bf)(Ge))&&!(St.id===Q.c.BrowseWorkflowTemplates&&!(0,Pe.fh)(Ge))&&!(St.id===Q.c.BrowseWorkflowsManagedByYou&&!(0,Pe.EH)(Ge))&&!(St.id===Q.c.BrowseYourWorkflowTemplates&&!(0,Pe.M7)(Ge))&&((0,ae.l1)(Ge,St)||St.id==="Punreads"&&(0,Ne.ty)(Ge,"enable_unread_view"))){const Ot=(0,Ae.yb)(Ge,St);Ot&&!(Ot in Ve)&&(st.push({...St,name:Ot,is_view:!0,is_page_view:!0}),Ve[Ot]=Ot)}});const At=(0,jt.lI)("Vall_threads");return At&&(0,Ne.ty)(Ge,"enable_threads_view")&&!(0,E.R)(Ge)&&st.push(At),st}u(Zn,"getLocalViews");function Es(Ge){return ve(Ge)}u(Es,"getLocalModals");function Us(Ge){return(0,Je.xf)(Ge)?[{id:Ge,score:0,item:{id:Ge,value:Ge,isEmail:!0}}]:[]}u(Us,"getLocalEmails");function bs(Ge,It){const Ve=!It;let st=nt.Ml;if(It){const At=(0,cn.OL)(Ge,It);st=At&&(0,Ie.f)(Ge,At)||nt.Ml}return(0,tt.PL)(Ge).flatMap(At=>{if(At.teams&&(st.length||Ve)&&!At.isWorkspaceAgnostic){const St=Ve?At.teams:At.teams.filter(Ot=>st.includes(Ot));if(St.length>1)return St.map(Ot=>{const xt=(0,w._J)(Ge,Ot),tn=(0,G.F1)(xt);return{...At,name:`${At.name} ${tn}`,applicableTeamId:Ot}})}return[At]})}u(bs,"getAppActionsWithEntriesPerApplicableTeam");function Ss(Ge,It,Ve){const st=(0,cn.OL)(Ge,It),At=st?(0,Ie.f)(Ge,st)||[]:[];return(0,at.A_)(Ge,It,!!Ve,!0).flatMap(St=>{if(St.teams&&At.length&&St.appName!=="Slack"&&!St.isWorkspaceAgnostic){const Ot=St.teams.filter(xt=>At.includes(xt));if(Ot.length>1)return Ot.map(xt=>({...St,id:(0,se.Bs)(St),isSlashCommand:!0,applicableTeamId:xt}))}return[{...St,id:(0,se.Bs)(St),isSlashCommand:!0}]})}u(Ss,"getSlashCommandsListWithEntriesPerApplicableTeam");function rs(Ge,It){let Ve=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";is(It);const st={},{members:At,channels:St,teams:Ot,userGroups:xt,appActions:tn,views:En,broadcastKeywords:an,emoji:Vt,files:dn,topEngagedFiles:Un,lists:On,channelSections:Fn,emails:xn,modals:ms,shortcuts:Ut,workflowTriggers:ns,helpArticles:Kn,salesforceRecords:Jn,salesListViews:zn}=It.entities;if(St&&(St.includePublic||St.includePrivate)&&(st.channels=U(Ge,It)),St&&St.includeMpims&&(st.mpims=(0,cn.FS)(Ge)),St&&St.includeIms&&(st.ims=(0,cn._B)(Ge)),At&&(st.members=At.onlyFromExternalWorkspaceId?nt.Ml:(0,$t.I_)(Ge).filter(ls=>(0,Wt.zP)(Ge,ls.id))),Ot&&(st.teams=V(Ge,It)),xt&&(st.userGroups=(0,Xe.jJ)(Ge)),tn&&(st.appActions=(0,y.B)(Ge)?(0,tt.PL)(Ge):bs(Ge,tn.channel)),dn&&(st.files=(0,Vn.Gn)(Ge)),(0,_n._Z)(Ge,"top_engaged_files_autocomplete")==="on"&&Un){const ls=(0,qt.ZT)(Ge),Xn=36e5;if(ls){const Os=Ht({teamId:ls,timeoutMs:Xn}).getStaleWhileRevalidate([]);st.topEngagedFiles=Os}}if(On&&(st.lists=(0,Pn.C0)(Ge)),En&&(st.views=Zn(Ge)),ms&&(st.modals=Es(Ge)),an){var mn;if(an.includeAll)st.broadcastKeywords=(0,it.A)();else if(!(an==null||(mn=an.currentChannel)===null||mn===void 0)&&mn.id){var ss;st.broadcastKeywords=(0,et.A)(Ge,an==null||(ss=an.currentChannel)===null||ss===void 0?void 0:ss.id)}else st.broadcastKeywords=[]}if(Vt&&(st.emoji=(0,Cn.Gt)(Ge)),Fn&&(st.channelSections=(0,a.A)((0,Tn.jV)(Ge))),(Ut!=null&&Ut.slashCommands||Ut!=null&&Ut.fakeGlobalActions)&&!(Ut!=null&&Ut.isAnnounceOnly)&&(st.slashCommands=(0,at.A_)(Ge,Ut.channel,!!Ut.threadTs,!0).map(ls=>({...ls,id:(0,se.Bs)(ls),isSlashCommand:!0}))),Ut!=null&&Ut.slackGlobalActions&&(st.slackGlobalActions=(0,at.Yk)(Ge,Ut.channel,Ut.threadTs)),Ut!=null&&Ut.quipShortcutCommands&&(st.quipShortcutCommands=(0,un.Aw)(Ge,!!Ve)),Ut!=null&&Ut.channelActions&&(st.channelActions=(0,zt.fo)(Ge,Ut.channel)),Ut!=null&&Ut.fakeGlobalActions&&(st.fakeGlobalActions=(0,at.JL)(Ge,Ut.channel,Ut.threadTs)),Ut!=null&&Ut.callActions&&(st.callActions=(0,at.Uw)(Ge,Ut.channel,Ut.threadTs,Ut.isAnnounceOnly)),ns){const ls=(0,at.NJ)(Ge);ns.includeAutomated?st.workflowTriggers=ls:st.workflowTriggers=ls.filter(Xn=>Xn.type===k.M.Shortcut)}xn&&(st.emails=Us(Ve));const fs=(0,Ke.dL)(Ge);if(Kn&&fs&&(st.helpArticles=(0,Wn.Fb)(Ge,"searcher/fetch_all_articles")),Jn&&(0,g.Ht)(Ge)&&(st.salesforceRecords=Object.values((0,Me.I)(Ge))),zn){const{objectType:ls,salesforceOrgId:Xn}=zn,Os=(0,$n.Up)(Ge),Ls=ls?(0,$n.Zs)(Ge,Xn,ls):(0,c.A)(Object.values((0,$n.m3)(Ge,Xn)));st.salesListViews=Ls.map(As=>Os[As])}return Is(),st}u(rs,"fetchLocal");const H=(0,Ft.Ay)("Search for local entities within Slack based on options",(Ge,It,Ve)=>{let{query:st,options:At,autoTraceId:St,parentSpanId:Ot}=Ve;var xt;const tn=It(),En=(xt=W.LI.get({label:W.gC.Searcher,id:St}))===null||xt===void 0?void 0:xt.createChildSpan({name:"searcher:fetch_remote",additionalSpanOptions:{parentSpanId:Ot}}),an=[],Vt=[],{channels:dn,files:Un,members:On,teams:Fn,userGroups:xn,appActions:ms,emoji:Ut,helpArticles:ns,workflowTriggers:Kn,salesforceRecords:Jn,salesListViews:zn}=At.entities;if(On){const mn=Ge(ot({query:st,options:At}));On.runaway?Vt.push(mn):an.push(mn)}if(dn){const mn=Ge(ne({query:st,options:At}));dn.runaway?Vt.push(mn):an.push(mn)}if(Ut){const mn=Ge(ie({query:st,options:At}));Ut.runaway?Vt.push(mn):an.push(mn)}if(Un&&((0,He.A)(st)||st.length>3)){const mn=(0,Bt.G)(It());if(!mn.contains(st)&&!mn.isRequestInFlight()){mn.add(st),mn.setRequestInFlight();const ss=Ge(jn({query:st,options:At}));Un.runaway?Vt.push(ss):an.push(ss)}}if(xn){const mn=Ge(Ue({query:st,options:At}));xn.runaway?Vt.push(mn):an.push(mn)}if(Fn&&((0,K.k)(tn)||Fn.onlyExternal||Fn.includeExternal)&&!Fn.onlyLocal){const mn=Ge(yn({query:st,options:At}));Fn.runaway?Vt.push(mn):an.push(mn)}if(Kn){const mn=(0,Qt.X)(tn);if(!mn.contains(st)&&!mn.isRequestInFlight()){mn.add(st),mn.setRequestInFlight();const ss=Ge(Qe({query:st}));ss&&(Kn.runaway?Vt.push(ss):an.push(ss))}}if((0,We.e)(tn)&&ms){const mn=Ge((0,pt.G)()).timeout(2e3).catch(n.A);ms.runaway?Vt.push(mn):an.push(mn)}const ds=(0,Ke.dL)(tn);if(ns&&ds&&(0,Wn.Fb)(tn,"searcher/fetch_all_articles"),(0,p.A)(st)){if(Jn){const mn=Ge((0,Be.l)({query:st,limit:5,reason:"Searcher"}));an.push(mn)}if(zn){const{objectType:mn,salesforceOrgId:ss}=zn;an.push(Ge((0,De.b)({query:st,objectType:mn,salesforceOrgId:ss})))}}return m.S.all(an).then(mn=>{const ss=It(),fs=rs(ss,At,st);if(fs.remoteIds=me(mn),On&&On.onlyFromExternalWorkspaceId){var ls,Xn;fs.members=(Xn=(ls=mn.find(Ls=>!!Ls.members))===null||ls===void 0?void 0:ls.members)!==null&&Xn!==void 0?Xn:nt.Ml}const Os=(0,o.A)((0,a.A)(fs),"length");return Vt.length&&!Os?m.S.all(Vt).then(()=>rs(It(),At)):(En==null||En.close(),fs)})});H.meta={name:"createThunk",key:"createThunkfetchRemote",description:"Search for local entities within Slack based on options"};function me(Ge){const It={};return Ge.forEach(Ve=>{Ve&&(Ve.appActions&&(It.appActions=new Set(Ve.appActions.map(st=>st.id))),Ve.channels&&(It.channels=new Set(Ve.channels.map(st=>st.id))),Ve.emoji&&(It.emoji=new Set(Ve.emoji.map(st=>st.name))),Ve.files&&(It.files=new Set(Ve.files.map(st=>st.id))),Ve.members&&(It.members=new Set(Ve.members.map(st=>st.id))),Ve.userGroups&&(It.userGroups=new Set(Ve.userGroups.map(st=>st.id))),Ve.teams&&(It.teams=new Set(Ve.teams.map(st=>st.id))))}),It}u(me,"getRemoteIds");const Fe=(0,Ft.Ay)("Search for entities within Slack by query",(Ge,It,Ve)=>{let{query:st="",options:At=bt}=Ve;var St;if(!st.length&&!At.allowEmptyQuery)return m.S.resolve([]);const Ot=It(),xt=(0,ze.Cy)({state:Ot}),tn=(0,h.A)();xt.mark(`modern-searcher-search-mark-${tn}`);const En=(0,sn.O)(st,{shouldTrimEmoji:!1,shouldTrimDocument:!1});var an;W.LI.start({label:W.gC.Searcher,id:tn,options:{teamId:(an=(0,qt.ZT)(Ot))!==null&&an!==void 0?an:null,tags:be({query:En,options:At})}});const Vt=(St=W.LI.get({label:W.gC.Searcher,id:tn}))===null||St===void 0?void 0:St.createChildSpan({name:"searcher:search"}),dn=Rs(At,bt,st);if((0,r.A)(dn))return m.S.resolve([]);if((0,b.x)(Ot)!==hn.M9.ONLINE||!(At!=null&&At.allowEmptyQueryRemoteSearch)&&!En.length&&(0,nn.A)()&&(0,_n._Z)(Ot,"searcher_local_empty_string")==="treatment")return m.S.resolve(ut(Ot,{query:En,options:dn,autoTraceId:tn,parentSpanId:Vt==null?void 0:Vt.getId()}));const Un=m.S.delay(0).then(()=>Ge(H({query:En,options:dn,autoTraceId:tn,parentSpanId:Vt==null?void 0:Vt.getId()}))).then(On=>{const Fn=It();return ts(Fn,{query:En,data:On,options:dn,autoTraceId:tn,parentSpanId:Vt==null?void 0:Vt.getId()})});if(dn.tiered){const On=ut(Ot,{query:En,options:dn,autoTraceId:tn,parentSpanId:Vt==null?void 0:Vt.getId()}),Fn=Un.finally(()=>{Vt==null||Vt.close(),W.LI.stop({label:W.gC.Searcher,id:tn})}),xn=Object.assign(On,{promise:Fn});return m.S.resolve(xn).finally(()=>{xt.measureAndClear(`modern-searcher-search-mark-${tn}`,"modern-searcher-search-tiered")})}return Un.finally(()=>{xt.measureAndClear(`modern-searcher-search-mark-${tn}`,"modern-searcher-search"),Vt==null||Vt.close(),W.LI.stop({label:W.gC.Searcher,id:tn})})});Fe.meta={name:"createThunk",key:"createThunksearch",description:"Search for entities within Slack by query"};function ut(Ge,It){let{query:Ve="",options:st,autoTraceId:At,parentSpanId:St}=It;var Ot;let xt=At;if(!xt){xt=(0,h.A)();var tn;W.LI.start({label:W.gC.Searcher,id:xt,options:{teamId:(tn=(0,qt.ZT)(Ge))!==null&&tn!==void 0?tn:null,tags:be({query:Ve,options:st})}})}const En=(Ot=W.LI.get({label:W.gC.Searcher,id:xt}))===null||Ot===void 0?void 0:Ot.createChildSpan({name:"searcher:search_local",additionalSpanOptions:{parentSpanId:St}});if(!Ve.length&&!st.allowEmptyQuery)return[];const an=Rs(st,bt,Ve);if((0,r.A)(an))return[];const Vt=(0,sn.O)(Ve,{shouldTrimEmoji:!1}),dn=rs(Ge,an),Un=ts(Ge,{query:Vt,data:dn,options:an,autoTraceId:xt,parentSpanId:En==null?void 0:En.getId()});return En==null||En.close(),Un}u(ut,"searchLocal");const An=15,vn=u(Ge=>{let{clogger:It,data:Ve}=Ge;const{source:st,query:At,results:St,selectedItemId:Ot,displayedItemIds:xt,openMethod:tn}=Ve,En=xt?xt.length:St.length,an=xt&&Ot?xt.indexOf(Ot):St.findIndex(Kn=>Kn.item.id===Ot);if(an<0)return;const Vt=St.find(Kn=>Kn.item.id===Ot);if(!Vt)return;const dn=Vt.type||"other",Un=(0,sn.O)(At),On=Vt.source||"local";let Fn;Vt.type==="mpim"?Fn=Vt.scoreDetailsByMember:Vt.type==="member"&&Ot?Fn={[Ot]:{is_exact_match:Vt.isExactMatch,exact_match_details:Vt.exactMatchDetails,score_details:Vt.scoreDetails}}:Vt.type==="emoji"&&Ot&&(Fn={[Ot]:{is_exact_match:Vt.isExactMatch}});let xn=[];St.some(Kn=>Kn.featureVector)&&(xt?xn=xt.map(Kn=>{const Jn=St.find(zn=>zn.item.id===Kn);return Jn&&Jn.featureVector.serialize()||""}):xn=St.map(Kn=>{var Jn,zn;return Kn==null||(Jn=Kn.featureVector)===null||Jn===void 0||(zn=Jn.serialize)===null||zn===void 0?void 0:zn.call(Jn)}));let Ut;(0,l.A)(At)?Ut=At.reduce((Kn,Jn)=>Kn+Kt((0,sn.O)(Jn)),0):Ut=Kt(Un);const ns={source:st,query_length:Un.length?Un.length:0,query_terms_length:Ut,results_length:En,selected_position:an,selected_type:dn,selected_source:On,selected_match_details:Fn,feature_vector_list:xn.slice(0,An),open_method:tn};It.track(lt.EventId.SEARCHER_ACCEPT,ns)},"clogSearcherAccept"),Hn=u(Ge=>{let{clogger:It,data:Ve}=Ge;const{source:st,query:At,results:St,displayedItemIds:Ot}=Ve,xt=Ot!==void 0?Ot.length:St.length,tn=(0,sn.O)(At);let En;(0,l.A)(At)?En=At.reduce((Vt,dn)=>Vt+Kt((0,sn.O)(dn)),0):En=Kt(tn);const an={source:st,query_length:tn.length?tn.length:0,query_terms_length:En,results_length:xt};It.track(lt.EventId.SEARCHER_REJECT,an)},"clogSearcherReject");function Kt(Ge){return Ge?Ge.split(ct.u).filter(It=>It.length).length:0}u(Kt,"getQueryTermsLength");function ts(Ge,It){let{query:Ve,data:st,options:At,autoTraceId:St,parentSpanId:Ot}=It;var xt,tn,En,an,Vt;const dn=(xt=W.LI.get({label:W.gC.Searcher,id:St}))===null||xt===void 0?void 0:xt.createChildSpan({name:"searcher:process",additionalSpanOptions:{parentSpanId:Ot}});is(At);const Un=(0,_n._Z)(Ge,"searcher_avoid_exact_member_match")==="treatment",On=(0,_n._Z)(Ge,"top_engaged_files_autocomplete")==="on",Fn=(0,_n._Z)(Ge,"nerf_email_fuzzy_match")==="treatment",xn={},ms=u((As,Ps)=>{const Ms=new Map;return[...As,...Ps].forEach(xs=>{Ms.set(xs.id,xs)}),Array.from(Ms.values())},"mergeAndDeduplicate"),Ut=new yt.A({query:Ve,options:{...At,sort:{...At.sort,avoidExactMatchForMembers:Un},fuzzyEmailSearchForwardOnly:Fn}}),ns=(0,ze.Cy)({state:Ge});ns.mark("modern-searcher-matching-mark");const Kn=(tn=W.LI.get({label:W.gC.Searcher,id:St}))===null||tn===void 0?void 0:tn.createChildSpan({name:"searcher:searcher_match",additionalSpanOptions:{parentSpanId:dn==null?void 0:dn.getId()}});st.channels&&(xn.channels=Ut.filterChannels(Ge,st.channels,ht(Ge,At.entities.channels))),st.members&&(xn.members=Ut.filterMembers(Ge,st.members,wt(Ge,At.entities.members))),st.emails&&st.members&&!(!(xn==null||(En=xn.members)===null||En===void 0)&&En.length)&&(xn.emails=st.emails),st.mpims&&(xn.mpims=Ut.filterMpims(Ge,st.mpims,Nn(Ge,At.entities.channels))),st.ims&&(xn.ims=Ut.filterIms(Ge,st.ims,Sn(Ge,At.entities.channels))),st.userGroups&&(xn.userGroups=Ut.filterUserGroups(Ge,st.userGroups,Bn(Ge,At.entities.userGroups))),st.teams&&(xn.teams=Ut.filterTeams(Ge,st.teams,Dn(Ge,At.entities.teams))),st.views&&(xn.views=Ut.filterViews(Ge,st.views)),st.modals&&(xn.modals=Ut.filterModals(Ge,st.modals)),st.appActions&&(xn.appActions=Ut.filterAppActions(Ge,st.appActions)),st.slashCommands&&(xn.slashCommands=Ut.filterShortcuts(Ge,st.slashCommands,!0)),st.slackGlobalActions&&(xn.slackGlobalActions=Ut.filterShortcuts(Ge,st.slackGlobalActions)),st.quipShortcutCommands&&(xn.quipShortcutCommands=Ut.filterShortcuts(Ge,st.quipShortcutCommands)),st.channelActions&&(xn.channelActions=Ut.filterShortcuts(Ge,st.channelActions)),st.fakeGlobalActions&&(xn.fakeGlobalActions=Ut.filterShortcuts(Ge,st.fakeGlobalActions)),st.callActions&&(xn.callActions=Ut.filterShortcuts(Ge,st.callActions)),st.workflowTriggers&&(xn.workflowTriggers=Ut.filterWorkflowTriggers(Ge,st.workflowTriggers)),st.appActions&&(!(At==null||(an=At.entities)===null||an===void 0||(Vt=an.shortcuts)===null||Vt===void 0)&&Vt.apps)&&(xn.apps=Ut.filterApps(Ge,st.appActions,st.fakeGlobalActions,st.slashCommands)),st.broadcastKeywords&&(xn.broadcastKeywords=Ut.filterBroadcastKeywords(Ge,st.broadcastKeywords)),st.emoji&&(xn.emoji=Ut.filterEmoji(Ge,st.emoji)),st.channelSections&&(xn.channelSections=Ut.filterChannelSections(Ge,st.channelSections,As=>{var Ps,Ms;return!!(!((Ps=At.entities.channelSections)===null||Ps===void 0||(Ms=Ps.includeTypes)===null||Ms===void 0)&&Ms[As.type])})),st.files&&(xn.files=Ut.filterFiles(Ge,st.files,pn(Ge,At.entities.files))),st.topEngagedFiles&&On&&(xn.topEngagedFiles=Ut.filterFiles(Ge,st.topEngagedFiles,pn(Ge,At.entities.topEngagedFiles))),st.lists&&(xn.lists=Ut.filterLists(Ge,st.lists));const Jn=(0,Ke.dL)(Ge);st.helpArticles&&Jn&&(xn.helpArticles=Ut.filterHelpArticles(Ge,st.helpArticles)),st.salesforceRecords&&(0,g.Ht)(Ge)&&(xn.salesforceRecords=Ut.filterSalesforceRecordSuggestions(Ge,st.salesforceRecords)),st.salesListViews&&(0,I.hx)(Ge)&&(xn.salesListViews=Ut.filterSalesListViews(Ge,st.salesListViews)),ns.measureAndClear("modern-searcher-matching-mark","modern-searcher-matching"),Kn==null||Kn.close();const zn=_s(xn,st.remoteIds||{});let ds;On&&(ds=zn.topEngagedFiles,delete zn.topEngagedFiles);const mn=500,ss=3;var fs;const ls=Math.min(((fs=At==null?void 0:At.limit)!==null&&fs!==void 0?fs:1)*ss,mn);let Xn=(0,c.A)(Object.values(zn));if(At.sort&&!At.sort.bypassSorting){var Os;let As=!1;Xn.length<ls&&(As=!0);const Ps=new Rt.A({query:Ve,options:{modelOnly:As,...At.sort}}),Ms=(Os=W.LI.get({label:W.gC.Searcher,id:St}))===null||Os===void 0?void 0:Os.createChildSpan({name:"searcher:searcher_sort",additionalSpanOptions:{parentSpanId:dn==null?void 0:dn.getId()}});Xn=Ps.sort(Ge,zn),Ms==null||Ms.close(),ds&&On&&(ds=(0,Mn.jW)(Ge,{query:Ve,list:ds,bonusPoints:Ps.getFrecencyBonusPointsFunction(Ge)}))}if(ds&&On&&(Xn=ms(ds,Xn)),At.sort&&At.sort.frecency&&!At.sort.bypassSorting){var Ls;const As=(Ls=W.LI.get({label:W.gC.Searcher,id:St}))===null||Ls===void 0?void 0:Ls.createChildSpan({name:"searcher:sorter_sort",additionalSpanOptions:{parentSpanId:dn==null?void 0:dn.getId()}});Xn=new xe.A({query:Ve,options:{...At.sort},teamId:(0,qt.ZT)(Ge),enterpriseId:(0,K.k)(Ge)&&(0,qt.jV)(Ge)?(0,qt.jV)(Ge):void 0}).sort(Ge,Xn.slice(0,ls)),As==null||As.close()}return At.limit&&(Xn=(0,_.A)(Xn,At.limit)),At.returnMetadata||(Xn=Xn.map(As=>As.item)),Is(),Xn||[]}u(ts,"processFetchedEntities");function _s(Ge,It){return(0,d.A)(Ge,(Ve,st)=>{const At=ps(st),St=It[st];return Ve.map(Ot=>{const xt=St&&St.has(Ot.item.id)?"remote":"local";return{...Ot,type:At,source:xt}})})}u(_s,"addResultMetadata");function ps(Ge){switch(Ge){case"channels":return"channel";case"members":return"member";case"mpims":return"mpim";case"ims":return"ims";case"userGroups":return"userGroup";case"teams":return"team";case"views":return"view";case"modals":return"modal";case"appActions":return"appAction";case"apps":return"app";case"broadcastKeywords":return"broadcastKeyword";case"emoji":return"emoji";case"files":return"file";case"topEngagedFiles":return"file";case"slashCommands":return"slashCommand";case"quipShortcutCommands":return"quipShortcutCommand";case"slackGlobalActions":return"globalAction";case"channelActions":return"channelAction";case"fakeGlobalActions":return"appAction";case"callActions":return"channelAction";case"workflowTriggers":return"workflowTrigger";case"helpArticles":return"helpArticles";case"salesforceRecords":return"salesforceRecord";case"salesListViews":return"salesListViews";default:return"other"}}u(ps,"getTypeFromGroup");function Rs(Ge,It,Ve){const{members:st,channels:At,userGroups:St,broadcastKeywords:Ot,emoji:xt}=Ge.entities,{members:tn,channels:En,userGroups:an}=It.entities;let Vt={},dn="";Ve!=null&&Ve.length&&(dn=Array.isArray(Ve)?"@":Ve.charAt(0)),(dn==="@"||dn==="\uFF20")&&(st||St||Ot)?(st&&(Vt.members=gs(st,tn)),St&&(Vt.userGroups=gs(St,an)),Ot&&(Vt.broadcastKeywords=gs(Ot,{}))):(dn==="#"||dn==="\uFF03")&&At?Vt.channels=gs(At,En):dn===":"&&xt?Vt.emoji=gs(xt,{}):Vt=Object.keys(Ge.entities).reduce((fs,ls)=>{const Xn=Ge.entities[ls];return Xn&&(fs[ls]=gs(Xn,It.entities[ls])),fs},{});var Un;const On=gs((Un=Ge==null?void 0:Ge.sort)!==null&&Un!==void 0?Un:{},It.sort);var Fn;const xn=(Fn=Ge.limit)!==null&&Fn!==void 0?Fn:It.limit;var ms;const Ut=(ms=Ge.fuzzyLimit)!==null&&ms!==void 0?ms:It.fuzzyLimit;var ns;const Kn=(ns=Ge.fuzzyJumpLimit)!==null&&ns!==void 0?ns:It.fuzzyJumpLimit,Jn=Ge.fuzzyCJK||It.fuzzyCJK,zn=Ge.tiered,ds=Ge.filter,mn=Ge.allowEmptyQuery,ss=Ge.returnMetadata||It.returnMetadata;return On&&(On.model=On.model||(0,Nt.In)()),{entities:Vt,sort:On,limit:xn,tiered:zn,filter:ds,allowEmptyQuery:mn,fuzzyLimit:Ut,fuzzyJumpLimit:Kn,fuzzyCJK:Jn,returnMetadata:ss}}u(Rs,"getAllOptions");function gs(Ge,It){if(!It||Ge===!1)return Ge;const Ve=Ge===!0?{}:Ge,st=It===!0?{}:It;return(0,i.A)(Ve,st)}u(gs,"mergeOptions");function is(Ge){const{members:It,channels:Ve,teams:st,userGroups:At,appActions:St,files:Ot}=Ge.entities;(It||Ve||st||At||St||Ot)&&x.Ay.pauseRefetchIndefinitely()}u(is,"pauseConditionalFetching");function Is(){x.Ay.unpauseRefetchImmediately()}u(Is,"unpauseConditionalFetching"),(0,F.ul)("searcher",{search:(Ge,It)=>(0,Xt.dispatchForTeamId)(Ge,Fe({options:It})),searchLocal:(Ge,It)=>{const Ve=(0,Xt.getStateByTeamId)(Ge);return ut(Ve,{options:It})}})},3275490582:(z,A,e)=>{"use strict";e.d(A,{A:()=>c});var t=e(3134334389),n=e(5519146941);function s(){return s=Object.assign||function(o){for(var r=1;r<arguments.length;r++){var l=arguments[r];for(var _ in l)Object.prototype.hasOwnProperty.call(l,_)&&(o[_]=l[_])}return o},s.apply(this,arguments)}u(s,"_extends");function a(o){const r=o,l=t.forwardRef((_,d)=>t.createElement(n.A.Consumer,null,i=>{let{view:m,closeView:h,windowId:v,container:y,isMainWindow:T,isChildWindow:I,shouldUseNavigate:p,activeTab:g,forceTabWhenNavigating:E,getSiblingView:f,getPrimaryView:O,getSecondaryView:C,getViewSet:M}=i;return t.createElement(r,s({ref:d},_,{view:m,closeView:h,windowId:v,container:y,isMainWindow:T,isChildWindow:I,shouldUseNavigate:p,activeTab:g,forceTabWhenNavigating:E,getSiblingView:f,getPrimaryView:O,getSecondaryView:C,getViewSet:M}))}));return l.displayName=`withViewContainerContext(${r.displayName})`,l}u(a,"withViewContainerContext"),a.displayName="withViewContainerContext";const c=a},1149563359:(z,A,e)=>{"use strict";e.d(A,{A:()=>s});var t=e(3134334389),n=e(9053431150);function s(a,c){const{addFocusTransitionListener:o,removeFocusTransitionListener:r}=(0,t.useContext)(n.Ay);(0,t.useEffect)(()=>(o(a,c),()=>{r(a,c)}),[o,c,r,a])}u(s,"useFocusTransitionListener")},8362292758:(z,A,e)=>{"use strict";e.d(A,{A:()=>s});var t=e(8300007136),n=e(5534420337);function s(){const{getState:a}=(0,t.Pj)();return(0,n.Ay)({getState:a})}u(s,"useLogger")},3107743571:(z,A,e)=>{"use strict";e.d(A,{Z:()=>n});var t=e(3134334389);const n=u(function(s){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];const o=(0,t.useRef)(),r=(0,t.useCallback)(()=>{const l=o.current;l&&(window.clearTimeout(l),o.current=void 0)},[]);return(0,t.useEffect)(()=>(r(),o.current=window.setTimeout(s,a),r),[s,r,a].concat(c)),r},"useTimeout")},4003148341:(z,A,e)=>{"use strict";e.d(A,{x:()=>s});var t=e(8300007136),n=e(3855029223);function s(){const{getState:a}=(0,t.Pj)();return(0,n.E)({getState:a})}u(s,"useTracer")},3320454392:(z,A,e)=>{"use strict";e.d(A,{A:()=>t});function t(n){const s=u(()=>{window.Cypress||n()},"unloadHandler");window.addEventListener("beforeunload",s)}u(t,"addUnloadHandler")},9853754481:(z,A,e)=>{"use strict";e.d(A,{Ep:()=>c,n2:()=>r,Ay:()=>_});var t=e(6313685253),n=e(7299481592);const s=window.AudioContext||window.webkitAudioContext,a=window.AnalyserNode,c=6;function o(d){let i=1;for(;i*2<d;)i*=2;return i}u(o,"getPowerof2LessThan");function r(d){let m=.01;for(const v of d)m=Math.max(m,(v-128)/128);const h=(Math.log(.01)-Math.log(m))/Math.log(.01);return Math.min(Math.max(h,0),1)}u(r,"computeStrength");function l(d){return(0,t.A)(d,(i,m)=>{const h=m.getSettings().sampleRate;return h!==void 0&&i!==void 0?Math.max(i,h):h},void 0)}u(l,"getMaxTrackSampleRate");let _=u(class{getLevel(){var i;return(i=this.analyserNode)===null||i===void 0||i.getByteTimeDomainData(this.data),r(this.data)/c}stop(){var i;if(this.analyserNode){var m;(m=this.audioNode)===null||m===void 0||m.disconnect(this.analyserNode)}delete this.audioNode,this.audioNode=void 0,delete this.analyserNode,this.analyserNode=void 0,(i=this.audioCtx)===null||i===void 0||i.close(),delete this.audioCtx,this.audioCtx=void 0}constructor(i,m){(0,n.M)(m>=0,"Level poll interval must be positive"),this.audioCtx=new s;const h=i.getAudioTracks();(0,n.M)(!!h.length,"Need audio tracks to run analyser");const y=(l(h)||48e3)*m/1e3,T=Math.max(32,Math.min(32768,o(y)));this.data=new Uint8Array(T),this.analyserNode=this.audioCtx.createAnalyser(),this.analyserNode.fftSize=T,this.audioNode=this.audioCtx.createMediaStreamSource(i),this.audioNode.connect(this.analyserNode)}},"AudioAnalyser")},1829947126:(z,A,e)=>{"use strict";e.d(A,{A:()=>s});var t=e(6267571562);class n{createPublisher(c){return this.publishers[c]=new t.G,this.publishers[c]}createAllPublisher(){return this.allPublisher=new t.G,this.allPublisher}publish(c,o){const r=this.publishers[c];r&&r.publish(o)}publishAll(c,o){var r;const l={peerId:c,value:o};(r=this.allPublisher)===null||r===void 0||r.publish(l)}subscribe(c,o){(this.publishers[c]||this.createPublisher(c)).subscribe(o)}subscribeAll(c){this.createAllPublisher().subscribe(c)}unsubscribe(c,o){const r=this.publishers[c];r&&r.unsubscribe(o)}constructor(){this.publishers={}}}u(n,"PeerPubSub");const s=new n},9009528296:(z,A,e)=>{"use strict";e.d(A,{A:()=>n});var t=e(6267571562);const n=new t.G},5046160032:(z,A,e)=>{"use strict";e.d(A,{A:()=>s});var t=e(2016742660);const n=window.navigator&&typeof window.navigator.sendBeacon=="function";function s(a){let{apiUrl:c,method:o,token:r,args:l={},versionTs:_="",versionUid:d=""}=a,i=!1;const m=(0,t.DI)();let h=`${c}${o}?_x_id=${d.substring(0,8)}-${Date.now()/1e3}`;m!==null&&(h+=`&fp=${m}`);const v=new FormData;if(v.append("token",r),Object.keys(l).forEach(y=>v.append(y,l[y])),n)i=navigator.sendBeacon(h,v);else{const y=new XMLHttpRequest;y.addEventListener("load",()=>{const{readyState:T,status:I,DONE:p}=y;T===p&&I===200&&(i=!0)}),y.open("POST",h,!0),y.setRequestHeader("X-Slack-Version-Ts",_),y.send(v)}return i}u(s,"beaconApiCall")},8935621861:(z,A,e)=>{"use strict";e.d(A,{A:()=>h});var t=e(9706240641),n=e(6273911963),s=e(9687310625);function a(v){return c.apply(this,arguments)}u(a,"fetchNearestChimeMediaRegion");function c(){return c=(0,t.coroutine)(function*(v){const y=new n.A({url:v?"https://nearest-us-gov-media-region.l.chime.aws/":"https://nearest-media-region.l.chime.aws"});try{const T=yield new s.Ay().q(y);return JSON.parse(T).region}catch{return""}}),c.apply(this,arguments)}u(c,"_fetchNearestChimeMediaRegion");var o=e(6422693406),r=e(3390261877),l=e(3320454392),_=e(7595282574),d=e(322597465),i=e(796111729);let m=u(class Zs{writeRegions(y,T){const I=T?Zs.GOV_REGION_STORAGE_KEY:Zs.REGION_STORAGE_KEY,p={regions:y,timestamp:Date.now(),version:Zs.VERSION};try{localStorage.setItem(I,JSON.stringify(p))}catch(g){(0,i.Wo)({label:"REGION-PROVIDER"}).error("Could not write chime media regions to localStorage: ",g.message)}}readRegions(y){const T=y?Zs.GOV_REGION_STORAGE_KEY:Zs.REGION_STORAGE_KEY,I=localStorage.getItem(T);if(!I)return null;let p=null;try{p=JSON.parse(I)}catch(g){return(0,i.Wo)({label:"REGION-PROVIDER"}).error("Could not parse chime media regions from localStorage: ",g.message),null}return p.version!==Zs.VERSION||this.ttl&&Date.now()-p.timestamp>this.ttl?null:p}constructor(y){this.ttl=y}},"ChimeRegionStorage");m.REGION_STORAGE_KEY="ChimeRegionStorage-chimeRegionCache",m.GOV_REGION_STORAGE_KEY="ChimeRegionStorageGov-chimeRegionCache",m.VERSION=1;let h=u(class Ws{static getInstance(){return Ws.instance||(Ws.instance=new Ws),Ws.instance}getNearestChimeMediaRegion(y){var T=this;return(0,t.coroutine)(function*(){return(y?(0,d.H)(y):!1)?T.getNearestChimeGovMediaRegion():T.getNearestChimeCommercialMediaRegion()})()}getNearestChimeCommercialMediaRegion(){var y=this;return(0,t.coroutine)(function*(){if(!y.commercialRegions){const T=y.storage.readRegions(!1);T&&(y.commercialRegions=T.regions)}return y.commercialRegions?y.commercialRegions:y.remoteGetNearestChimeMediaRegion(!1)})()}getNearestChimeGovMediaRegion(){var y=this;return(0,t.coroutine)(function*(){if(!y.govRegions){const T=y.storage.readRegions(!0);T&&(y.govRegions=T.regions)}return y.govRegions?y.govRegions:y.remoteGetNearestChimeMediaRegion(!0)})()}remoteGetNearestChimeMediaRegion(y){var T=this;return(0,t.coroutine)(function*(){const I=yield o.S.resolve(a(y));return y?T.govRegions=I:T.commercialRegions=I,T.storage.writeRegions(I,y),I})()}init(){if(this.initialized)return 0;this.initialized=!0;const y=(0,_.z$)();let T=Ws.INITIAL_LOAD_DELAY;const I=this.storage.readRegions(y);I&&(y?this.govRegions=I.regions:this.commercialRegions=I.regions,T=Math.max(Ws.INITIAL_LOAD_DELAY,Ws.REFRESH_INTERVAL-(Date.now()-I.timestamp)));var p=this;const g=setTimeout((0,t.coroutine)(function*(){yield p.remoteGetNearestChimeMediaRegion(y);const E=new r.A(Ws.REFRESH_INTERVAL);E.start((0,t.coroutine)(function*(){yield p.remoteGetNearestChimeMediaRegion(y)})),(0,l.A)(()=>{E.stop()})}),T);return(0,l.A)(()=>{clearTimeout(g)}),T}getRawRegions(){return this.commercialRegions}clear(){this.commercialRegions=null,this.govRegions=null,this.initialized=!1}constructor(){this.commercialRegions=null,this.govRegions=null,this.initialized=!1,this.storage=new m(Ws.REFRESH_INTERVAL)}},"ChimeRegionProvider");h.REFRESH_INTERVAL=3*24*60*60*1e3,h.INITIAL_LOAD_DELAY=5*1e3},3390261877:(z,A,e)=>{"use strict";e.d(A,{A:()=>t});let t=u(class{start(s){this.stop(),this.timer=setInterval(s,this.intervalMs)}stop(){this.timer!==null&&(clearInterval(this.timer),this.timer=null)}constructor(s){this.intervalMs=s,this.timer=null}},"IntervalScheduler")},6728003438:(z,A,e)=>{"use strict";e.d(A,{F4:()=>P,GC:()=>Y,lP:()=>W,no:()=>M});var t=e(9113979368),n=e(6533394955),s=e(4423055085),a=e(8847766420),c=e(3346431019),o=e(3855029223),r=e(2250002584),l=e(796111729),_=e(3158767748),d=e(8802876335),i=e(169770637);const m="RTM-EVENT-METRICS",h=4;let v=!1,y;const T=50;function I(){return v?!0:(0,c.A)()?(y===void 0&&(y=(0,_.A)(T),y&&(0,l.Wo)({label:m}).info("Metrics collection enabled for the current interval.")),y):!1}u(I,"shouldSampleForInterval");let p={},g={},E={},f={},O={},C={};function M(G){let{teamOrEnterpriseId:X,rtmEventType:te,rtmEventSubtype:le,duration:ve,msgs:Q,fromEvtLog:Ae}=G;var ae;if(!I())return;const he=(0,a.Kc)((ae=(0,n.getStoreOrSharedStoreInstanceByTeamOrEnterpriseId)(X))===null||ae===void 0?void 0:ae.getState());if(!he)return;const _e=te==="message"?`message/${le}`:te;Ae&&D({bucket:O,teamOrEnterpriseId:he,eventType:_e,value:Q.length}),D({bucket:g,teamOrEnterpriseId:he,eventType:_e,value:1}),D({bucket:E,teamOrEnterpriseId:he,eventType:_e,value:Q.length}),D({bucket:f,teamOrEnterpriseId:he,eventType:_e,value:ve})}u(M,"incrementMetrics");function D(G){let{bucket:X,teamOrEnterpriseId:te,eventType:le,value:ve}=G;var Q;const Ae=(Q=X[te])!==null&&Q!==void 0?Q:{};var ae;const he=(ae=Ae[le])!==null&&ae!==void 0?ae:0;Ae[le]=he+ve,X[te]=Ae}u(D,"incrementBucket");function P(G,X){if((0,t.A)(E)&&(0,t.A)(p)){S();return}const te=Object.keys({...E,...p}),le=setInterval(()=>{const ve=(0,l.Wo)({label:m}),Q=te.pop();if(!Q){ve.info("Completed metrics aggregation",{traceId:G.getTraceId()}),clearInterval(le);return}ve.info(`Sending metric report for id: ${Q}`),F({teamOrEnterpriseId:Q,clientMetricsTrace:G,performanceTracingTags:X}),x({teamOrEnterpriseId:Q,clientMetricsTrace:G,performanceTracingTags:X}),L(Q)},1e3)}u(P,"reportRtmMetrics");function k(G,X){const te=(0,n.getStateByTeamId)(G);return{...X,metric_version:h,slow_connection_count:(0,d.d4)(te)}}u(k,"getMetricsTraceMetatags");function x(G){let{teamOrEnterpriseId:X,clientMetricsTrace:te,performanceTracingTags:le}=G;const ve=p[X];if(!ve)return;const Q=(0,o.E)({teamOrEnterpriseId:X}),Ae=Q.createMetricsTrace({label:"rtm_incoming",tags:k(X,le),traceId:te.getTraceId(),parentSpanId:te.getRootSpanId()});var ae;const he=(ae=C[X])!==null&&ae!==void 0?ae:{};let _e=0,ee=0;Object.entries(ve).forEach(de=>{let[Ie,ce=0]=de;var j;const N=(j=he[Ie])!==null&&j!==void 0?j:0;_e+=ce,ee+=N,Ae.store({name:"rtm_incoming:event_count",value:ce}).addTags({event_type:Ie,eventlog_count:N,socket_count:ce-N})}),Ae.store({name:"rtm_incoming:total_event_count",value:_e}),Ae.store({name:"rtm_incoming:total_event_count:socket",value:_e-ee}),Ae.store({name:"rtm_incoming:total_event_count:eventlog",value:ee}),(0,l.Wo)({label:m}).info(`${X} total incoming event count: ${_e}`),Q.reportTrace(Ae)}u(x,"maybeReportRawEventCount");function F(G){let{teamOrEnterpriseId:X,clientMetricsTrace:te,performanceTracingTags:le}=G;const ve=E[X];if(!ve)return;const Q=(0,o.E)({teamOrEnterpriseId:X}),Ae=Q.createMetricsTrace({label:"rtm_dispatch",tags:k(X,le),traceId:te.getTraceId(),parentSpanId:te.getRootSpanId()});var ae;const he=(ae=g[X])!==null&&ae!==void 0?ae:{};var _e;const ee=(_e=f[X])!==null&&_e!==void 0?_e:{};var de;const Ie=(de=O[X])!==null&&de!==void 0?de:{};let ce=0,j=0;Object.entries(ve).forEach(N=>{let[b,R]=N;const K=he[b],B=ee[b];if(K===void 0||B===void 0)return;var $;const Z=($=Ie[b])!==null&&$!==void 0?$:0;ce+=R,j+=Z,Ae.store({name:"rtm_dispatch:duration",value:B}).addTags({event_type:b,total_events:R,total_batches:K,per_event_duration:B/R,eventlog_count:Z,socket_count:R-Z})}),Ae.store({name:"rtm_dispatch:total_event_count",value:ce}),Ae.store({name:"rtm_dispatch:total_event_count:socket",value:ce-j}),Ae.store({name:"rtm_dispatch:total_event_count:eventlog",value:j}),(0,l.Wo)({label:m}).info(`${X} total dispatch event count: ${ce}`),Q.reportTrace(Ae)}u(F,"maybeReportEventMetrics");function W(G){let{teamId:X,msgs:te}=G;if(!I())return;const le=(0,n.getStateByTeamId)(X);var ve;const Q=(ve=(0,a.Kc)(le))!==null&&ve!==void 0?ve:X,Ae=te.reduce((ae,he)=>(!he||!he.type||(ae[he.type]?ae[he.type]+=1:ae[he.type]=1),ae),{});Object.entries(Ae).forEach(ae=>{let[he,_e]=ae;D({bucket:p,teamOrEnterpriseId:Q,eventType:he,value:_e}),D({bucket:C,teamOrEnterpriseId:Q,eventType:he,value:_e})})}u(W,"countRawEventsVolumeFromEventLog");function Y(G){let{teamId:X,msg:te}=G;if(!I()||!te||!te.type)return;const le=(0,n.getStateByTeamId)(X);var ve;const Q=(ve=(0,a.Kc)(le))!==null&&ve!==void 0?ve:X;D({bucket:p,teamOrEnterpriseId:Q,eventType:te.type,value:1})}u(Y,"countRawEventVolume");function S(){y=void 0,p={},E={},g={},f={},O={},C={},(0,l.Wo)({label:m}).info("Metrics collection sampling has been reset.")}u(S,"resetAllCollections");function L(G){y=void 0,delete p[G],delete E[G],delete g[G],delete f[G],delete O[G],delete C[G],(0,l.Wo)({label:m}).info(`Metrics collection sampling has been reset for id: ${G}`)}u(L,"resetCollections");const w=u(()=>({rawEventCountBuckets:p,eventCountBuckets:E,batchCountBuckets:g,durationBuckets:f,eventLogEventCountBuckets:O,eventLogRawEventCountBuckets:C}),"debugGetBuckets");(0,s.ul)("rtmEventMetrics",{debugGetBuckets:w,debugToggleSampling:()=>{v=!v,S(),(0,l.Wo)({label:m}).info(`Interval sampling: ${v?"ON":"OFF"}`)},debugReportMetrics:()=>{const G=(0,r.F)(),X=G.createMetricsTrace({samplingOptions:{sampleType:i.tS.ALWAYS}});P(X,{}),G.reportTrace(X)}}),Object.defineProperty({resetAllCollections:S,debugGetBuckets:w,reportRtmMetrics:P,intervalSampleCache:y},"intervalSampleCache",{get:()=>y,set:G=>{y=G}})},7542104324:(z,A,e)=>{"use strict";e.d(A,{dj:()=>Yt,d1:()=>nn,uH:()=>mt,bo:()=>gn,lI:()=>kn,sw:()=>$t,mt:()=>Pn,jQ:()=>et,rH:()=>it});var t=e(9706240641),n=e(6422693406),s=e(3398586081),a=e(7715417323),c=e(796111729),o=e(1031947056),r=e(6533394955),l=e(8847766420),_=e(5795074931),d=e(8003339552),i=e(7139225017),m=e(4423055085),h=e(8352634987),v=e(4096483543),y=e(8233775522),T=e(6728003438),I=e(3078252698),p=e(9101533895),g=e(7042557635),E=e(4446301238),f=e(8040098042),O=e(7334104107),C=e(1407713935),M=e(9289081806);function D(Me,Be,ue){return!Me.text||!(O.$2.test(Me.text)||O.Oh.test(Me.text)||O.K0.test(Me.text)||O.y7.test(Me.text))||!(0,p.hh)(ue(),Me.channel)?n.K.resolve():Be((0,g.L)({channelId:Me.channel})).catch(a.A)}u(D,"maybeEnsureMemberCount");let P=function(){var Me=(0,t.coroutine)(function*(Be,ue){const ke=ue(),Xe=u(function(){for(var U=arguments.length,V=new Array(U),ne=0;ne<U;ne++)V[ne]=arguments[ne];return(0,r.dispatchForTeamId)((0,l.ZT)(ke),...V)},"dispatch"),dt=Be.subtype?`preprocess-rtm-message/ensureModelObsInMessageArePresent for type: ${Be.type} and subtype: ${Be.subtype}`:`preprocess-rtm-message/ensureModelObsInMessageArePresent for type: ${Be.type}`,be=(0,I.A)(Be.channel)&&(0,f.A)(Be.channel)&&!(0,p.hh)(ke,Be.channel)?Xe((0,E.pX)({ids:[Be.channel],reason:dt,callSource:E.aI.EnsureModelObsArePresent})):n.K.resolve();yield n.K.all([be,D(Be,Xe,ue)]).catch(a.A)});return u(function(ue,ke){return Me.apply(this,arguments)},"ensureModelObsInMessageArePresent")}();function k(Me,Be){return x.apply(this,arguments)}u(k,"ensureModelObsInMessageAreOpen");function x(){return x=(0,t.coroutine)(function*(Me,Be){if(Me.subtype)return;const ue=!1,ke=(0,p.OL)(Be(),Me.channel,ue);ke&&(0,C.JM)(ke)&&((0,M.nT)(ke)||(yield(0,r.dispatchForTeamId)((0,l.ZT)(Be()),(0,E.jP)({channel:ke.id,reason:"preprocess-rtm-message/ensureModelObsInMessageAreOpen"}))))}),x.apply(this,arguments)}u(x,"_ensureModelObsInMessageAreOpen");function F(Me,Be){return W.apply(this,arguments)}u(F,"preprocessRtmMessage");function W(){return W=(0,t.coroutine)(function*(Me,Be){if(Me.type==="message")try{yield P(Me,Be),yield k(Me,Be)}catch{}}),W.apply(this,arguments)}u(W,"_preprocessRtmMessage"),Object.defineProperty({maybeEnsureMemberCount:D,ensureModelObsInMessageAreOpen:k},"ensureModelObsInMessageArePresent",{get:()=>P,set:Me=>{P=Me}});var S=e(5154341017),L=e(6890312250),w=e(2240330919),J=e(5238395322),G=e(9190452268),X=e(2250002584),te=e(3158767748),le=e(169770637),ve=e(2791814261);const Q=7;let Ae;const ae=[],he=[];let _e,ee;(0,m.zv)("rtmMetrics",()=>({enqueuedEventCounts:{allTeams:ae.concat(_e),backgroundTeams:he.concat(ee)}}));const de=(0,s.A)(()=>(0,te.A)(1)||(0,ve.c)());function Ie(){let Me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;if(!(0,v.A)()||!de())return;const Be=Math.floor(Date.now()/1e3);if(Ae!==Be){let ue=0;if(Ae){const ke=Be-Ae;ke>60?(_e=void 0,ee=void 0,ae.length=0,he.length=0):ke>1&&(ue=Be-Ae)}if(Ae=Be,_e!==void 0){ae.push(_e),he.push(ee);for(let Xe=0;Xe<ue;Xe++)ae.push(0),he.push(0);const ke=15*60;if(ae.length>=ke){const Xe=(0,G.rh)(),dt=(0,S.A)((0,L.A)(ae),1),bt=(0,w.A)(ae)||0,be=(0,J.A)(ae);(0,c.Wo)({label:"RTM-ENQUEUE-STATS"}).info(`Enqueue times (all teams): ${be} total, ${bt} per second at peak, ${dt} per second average`);const V={is_count:!0,allow_zero:!0};Xe.store(`rtm_nq_at${Q}_avg`,dt,V),Xe.store(`rtm_nq_at${Q}_max`,bt,V),Xe.store(`rtm_nq_at${Q}_total`,be,V),ae.length=0,he.length=0}}_e=0,ee=0}_e=(_e||0)+Me}u(Ie,"maybeMeasureEnqueueVelocity");let ce=0,j=0,N=Date.now(),b=Date.now();const R=5*60*1e3;function K(Me){const Be=Date.now();ce=Math.max(ce,Me.length),N+R<Be&&((0,G.rh)().count("rtm_queue_length_max",ce),ce=0,N=Be)}u(K,"maybeMeasureMaxQueueLength");function B(Me){const ue=Me[0]._enqueuedAt,ke=Date.now(),Xe=ue&&ke-ue;if(j=Xe?Math.max(j,Xe):j,b+R<ke){const dt=(0,X.F)(),bt=dt.createMetricsTrace({label:"rtm_queue"});bt.store({name:"rtm_queue_delay_max",value:j}),dt.reportTrace(bt),j=0,b=ke}}u(B,"maybeMeasureMaxQueueDelay");function $(Me,Be){const ue=(0,X.F)(),ke=ue.createMetricsTrace({label:"rtm_state_modified",samplingOptions:{sampleType:le.tS.CALL,sampleRate:.01}}),Xe=Be?`${Me}/${Be}`:Me;ke.count({name:`rtm_state_modified:${Xe}`}),ue.reportTrace(ke)}u($,"countRTMStateModified");var Z=e(7578217447),re=e(5071086688),Te=e(5470425448),Ce=e(7645722292),Pe=e(4761125736),fe=e(1462104702),pe=e(8634352961),q=e(1763226059);const se="RTM",ge=100;let Oe={};const Le=u(function(){let Me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",Be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return Oe[`${Me}${Be?`_${Be}`:""}`]||1},"getCurrentMaxBatchSize"),We=u(function(){let Me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",Be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",ue=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;Oe[`${Me}${Be?`_${Be}`:""}`]=ue},"setCurrentMaxBatchSize");let Re=!1,we=!1;const Je={},it=u(Me=>{Re=Me},"setIsActiveHuddle"),et=u(Me=>{we=Me},"setDisableRtmScheduler"),lt=u(Me=>{let{teamOrEnterpriseId:Be,msg:ue}=Me;Je[Be]||(Je[Be]=[]),Je[Be].push(ue)},"queueUntilHuddleEnds"),nt=u(Me=>{const Be=Je[Me];Je[Me]=[],Be.length&&kn(Me,Be)},"drainHuddleQueue"),at=16;let ze={},Ke={},He={},Ye={};function _t(Me){var Be;return(Be=Ke[Me])!==null&&Be!==void 0?Be:ze[Me]}u(_t,"getHandler");function vt(Me){return Me.__isShared}u(vt,"isSharedHandler");function Tt(Me){return Me.teamOrEnterpriseId}u(Tt,"getTeamOrEnterpriseId");function Lt(Me){let{messages:Be,teamOrEnterpriseId:ue}=Me;if(Be.msgs.length===0)return;const ke=_t(Be.rtmEventType);if(ke)return{handler:ke,messages:Be,teamOrEnterpriseId:ue}}u(Lt,"getRoutedHandler");function ft(Me,Be){if(He[Me]){const ke=isJasmine()||isJest()?`addRtmErrorHandler: duplicate call to add a handler for ${Me}; this is probably caused by using inject-loader/import mocking. If so, \`import { test as rtmTest } from '@slack/infra/rtm/rtm'; mockProperty(rtmTest, 'handlers', {});\` to work around it.`:`addRtmErrorHandler: a handler is already registered for ${Me}`;throw new Error(ke)}He[Me]=Be}u(ft,"addRtmErrorHandler");function mt(Me,Be){jt({functionName:"addSharedRtmHandler",handlersName:"sharedHandlers",rtmEventType:Me});const ue=Object.assign(Be,{__isShared:!0});Ke[Me]=ue}u(mt,"addSharedRtmHandler");function Yt(Me,Be){jt({functionName:"addBatchRtmHandler",handlersName:"handlers",rtmEventType:Me}),ze[Me]=Be}u(Yt,"addBatchRtmHandler");function nn(Me,Be){Yt(Me,(ue,ke,Xe)=>{for(const dt of ue)Be(dt,ke,Xe)})}u(nn,"addRtmHandler");function jt(Me){let{functionName:Be,handlersName:ue,rtmEventType:ke}=Me;if(!ze[ke]&&!Ke[ke])return;const dt=(0,d.A)()||(0,i.A)()?`${Be}: duplicate call to add a handler for ${ke}; this is probably caused by using inject-loader/import mocking. If so, \`import { test as rtmTest } from '@slack/infra/rtm/rtm'; mockProperty(rtmTest, '${ue}', {});\` to work around it.`:`${Be}: a handler is already registered for ${ke}`;throw new Error(dt)}u(jt,"throwIfHandlerRegistered");function gn(Me){return!!ze[Me]}u(gn,"doesHandlerExist");function on(){return ze}u(on,"debugGetHandlers");function Xt(){return Ye}u(Xt,"debugGetPendingMessages");const rn=(0,s.A)(Me=>{var Be;if(!(0,q.M)())return!1;const ue=(Be=(0,r.getStoreInstanceByTeamId)(Me))===null||Be===void 0?void 0:Be.getState();return ue&&(0,Pe._Z)(ue,"profile_rtm")==="on"});let Zt=null,Ht={},Bt=null;function Qt(){Ht={},Zt=new Profiler({maxBufferSize:1e4,sampleInterval:0}),Zt.addEventListener("samplebufferfull",u(function(){const Be=this.sampleInterval,ue=Ht;this.stop().then(ke=>{const Xe=performance.timeOrigin;for(const[dt,bt]of Object.entries(ue)){if(!bt.length)continue;const be=new Date(Xe+bt[0].start),U=new Date(Xe+bt[bt.length-1].end);(0,fe.l)("rtm",dt,(0,q.W)(ke,bt),{from:be,until:U,sample_interval:Be})}}),Qt()},"samplebufferfull"))}u(Qt,"startProfiling");let sn=!1;function Mn(Me){try{if(sn||!rn(Me))return;Zt||Qt(),Bt=performance.now()}catch(Be){sn=!0,(0,c.Ay)({label:se,teamOrEnterpriseId:Me}).warn("Unable to begin profiled section",Be)}}u(Mn,"beginProfiledSection");function ct(Me){!Zt||Bt===null||(Me in Ht||(Ht[Me]=[]),Ht[Me].push({start:Bt,end:performance.now()}),Bt=null)}u(ct,"endProfiledSection");function yt(Me){const{rtmEventType:Be,rtmEventSubtype:ue,msgs:ke,fromEvtLog:Xe}=Me.messages,dt=Tt(Me),bt=(0,c.Ay)({label:se,teamOrEnterpriseId:dt});Mn(dt);const be=performance.now();try{h.Ay.pauseRefetchIndefinitely();const ne=Me.handler,ie=(0,r.getStoreInstanceByTeamId)(Me.teamOrEnterpriseId),Ue=ie==null?void 0:ie.getState();vt(ne)?ne(ke,Me.teamOrEnterpriseId):ne(ke,ie.dispatch,ie.getState);const Qe=ie==null?void 0:ie.getState();Ue!==Qe&&$(Be,ue)}catch(ne){throw bt.error(`Error processing ${Be}: ${ne.message}`),ne}finally{h.Ay.unpauseRefetchImmediately()}const U=performance.now();ct(dt);const V=U-be;try{(0,T.no)({teamOrEnterpriseId:dt,rtmEventType:Be,rtmEventSubtype:ue,duration:V,msgs:ke,fromEvtLog:Xe}),re.A.publish({type:Te.lx.RtmMetrics,update:V})}catch{}if(V>at){let ne=`Processed ${ke.length} ${Be}`;ue&&(ne+=`:${ue}`),ne+=" event(s)";const ie=[];ke.forEach(Ue=>{var Qe;const je=(Qe=Ue)===null||Qe===void 0?void 0:Qe.channel;je&&ie.push(je)}),ie.length&&(ne+=` in channel(s) ${ie.join(",")}`),ne+=` over ${V.toFixed(2)}ms`,bt.info(ne)}}u(yt,"dispatchMessages");const Rt=50,xe=100,Nt=.75,Ft=1.1;function qt(Me){return Me>Rt}u(qt,"shouldDefer");function un(Me){return tt.apply(this,arguments)}u(un,"preprocessRtmMessagesWithTimeout");function tt(){return tt=(0,t.coroutine)(function*(Me){let{msgs:Be,getState:ue}=Me;const ke={},Xe=3e4,dt=n.S.delay(Xe,ke),bt=n.S.map(Be,U=>F(U,ue).catch(a.A),{concurrency:1});(yield n.S.race([bt,dt]))===ke&&(0,c.Ay)({getState:ue}).warn("Preprocessing messages took too long; continue to process queue")}),tt.apply(this,arguments)}u(tt,"_preprocessRtmMessagesWithTimeout");function pt(Me){return Dt.apply(this,arguments)}u(pt,"routeMessages");function Dt(){return Dt=(0,t.coroutine)(function*(Me){let{messages:Be,teamOrEnterpriseId:ue,elapsed:ke}=Me;const Xe=Lt({messages:Be,teamOrEnterpriseId:ue});return!Xe||$n(ue)?ke:Wt({routedHandler:Xe,elapsed:ke})}),Dt.apply(this,arguments)}u(Dt,"_routeMessages");function Wt(Me){return zt.apply(this,arguments)}u(Wt,"dispatchMessagesWithPreprocessing");function zt(){return zt=(0,t.coroutine)(function*(Me){let{routedHandler:Be,elapsed:ue}=Me;const ke=performance.now(),Xe=(0,r.getStoreInstanceByTeamId)(Be.teamOrEnterpriseId);yield un({msgs:Be.messages.msgs,getState:Xe.getState});const dt=performance.now();yt(Be);let bt=ue;return dt-ke>Rt&&(bt=0),bt+=performance.now()-dt,bt}),zt.apply(this,arguments)}u(zt,"_dispatchMessagesWithPreprocessing");function ln(Me){return Tn.apply(this,arguments)}u(ln,"handleNextMessageFromQueue");function Tn(){return Tn=(0,t.coroutine)(function*(Me){let{queue:Be,teamOrEnterpriseId:ue,elapsed:ke=0}=Me;for(var Xe;Be&&Be.length>0&&!(!((Xe=Be[0])===null||Xe===void 0)&&Xe.type);)Be.shift();if(!Be||!Be.length)return n.S.resolve();const dt=(0,c.Ay)({teamOrEnterpriseId:ue,label:se});try{K(Be),B(Be)}catch{}const bt=Be[0].type,be=Be[0].subtype,U=(0,Z.Wu)(Be[0]);let V=Le(bt,be);const ne=[Be[0]],ie=[];for(let ot=1;ot<Be.length&&ne.length<V&&ie.length<V;ot++)if(Be[ot].type===bt&&Be[ot].subtype===be)ne.push(Be[ot]);else if(Z.Sj.has(Be[ot].type))ie.push(Be[ot]);else break;const Ue=ne.length;Ue>1&&dt.debug(se,`Batch processing ${Ue} of type ${bt}, skipping ${ie.length} interleaved events ${ie.map(ot=>ot.type).join(",")}`);let Qe=ke;try{Qe=yield pt({messages:{rtmEventType:bt,rtmEventSubtype:be,msgs:ne,fromEvtLog:U},teamOrEnterpriseId:ue,elapsed:Qe})}catch(ot){dt.error(`Error while processing ${Ue} ${bt} event(s)`,ot)}finally{Ue!==ne.length&&(dt.error(`Message batch size for type (${bt}) changed during handling`),dt.warn(`Original batch size: ${Ue} Post-handler batch size: ${ne.length}`));const ot=Ue+ie.length;Be.splice(0,ot,...ie)}const je=qt(Qe),ht=document.visibilityState==="visible";return V=Le(bt,be),ht&&(je?V>1&&Qe>xe&&(We(bt,be,Math.max(1,Math.floor(V*Nt))),dt.debug(se,`Maximum batch size decreased to ${Le(bt,be)}`)):V<ge&&ne.length===V&&(We(bt,be,Math.min(ge,Math.ceil(V*Ft))),dt.debug(se,`Maximum batch size increased to ${Le(bt,be)}`))),Be.length?ht&&je?n.S.delay(Rt).then(()=>{Wn(ue)}):ln({queue:Be,teamOrEnterpriseId:ue,elapsed:Qe}):n.S.resolve()}),Tn.apply(this,arguments)}u(Tn,"_handleNextMessageFromQueue");let cn=0,hn,Cn=100;function _n(){let Me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:(0,c.Wo)();if(hn)return;const Be=Date.now()-cn;if(Be<Cn){const ue=Math.min(Cn-Be,Cn),ke=(0,v.A)()&&!(0,y.ko)((0,r.getStateForClientStore)());ke&&Me.info(se,`Setting a timeout of ${ue} ms to process more rtm events`),hn=window.setTimeout(()=>{hn=void 0,ke&&Me.info(se,`Waited ${ue} ms, processing more rtm events now`),Vn()},ue);return}Vn()}u(_n,"maybeDrainQueues");function Vn(){cn=Date.now();const Me=u(()=>{const Be=Object.keys(Ye);for(const ue of Be)Wn(ue)},"drainQueuesFn");!Re||we?Me():(0,Ce.Gl)(Me)}u(Vn,"drainQueues");function Wn(Me){!Ye[Me]||!Ye[Me].length||ln({queue:Ye[Me],teamOrEnterpriseId:Me})}u(Wn,"drainQueue");function kn(Me,Be){var ue;let ke=0;const Xe=Be.filter(be=>be!=null&&be.type?Re&&(0,pe.Zr)(be)?(lt({teamOrEnterpriseId:Me,msg:be}),!1):((0,Z.Wu)(be)||(ke+=1),!0):((0,c.Ay)({teamOrEnterpriseId:Me,label:se}).warn("Received attempt to enqueue an invalid message; dropping it",be),!1));try{Ie(ke)}catch{}Ye[Me]=Ye[Me]||[];const dt=Ye[Me].length,bt=Date.now();for(const be of Xe)be._enqueuedAt=bt;Ye[Me].push(...Xe),!dt&&Ye[Me].length>0&&_n(),!Re&&(!((ue=Je[Me])===null||ue===void 0)&&ue.length)&&nt(Me)}u(kn,"enqueueMessages");const Pn=(0,o.Ay)("Calls the relevant rtm handlers with the given rtm message, skipping the queue and without preprocessing (this is intended for degraded mode usage only)",(Me,Be,ue)=>{const ke=(0,l.ZT)(Be()),Xe=Lt({messages:{rtmEventType:ue.type,rtmEventSubtype:ue.subtype,msgs:[ue],fromEvtLog:(0,Z.Wu)(ue)},teamOrEnterpriseId:ke});Xe&&yt(Xe)});Pn.meta={name:"createThunk",key:"createThunkhandleMessageImmediatelyWithoutPreprocessing",description:"Calls the relevant rtm handlers with the given rtm message, skipping the queue and without preprocessing (this is intended for degraded mode usage only)"};const $t=(0,o.Ay)("Calls the relevant handler for the given message",(Me,Be,ue)=>{if(!He[ue]){if(ue&&ue.includes&&ue.includes("started_with_org_token")){var ke;(0,c.Ay)({getState:Be}).error(new Error(`Unexpected start error: ${ue}`),JSON.stringify({error:ue,pathname:window==null||(ke=window.location)===null||ke===void 0?void 0:ke.pathname}),{subtype:"gs_start_error"})}else(0,c.Ay)({getState:Be}).error(new Error(`Unexpected start error: ${ue}`),JSON.stringify({error:ue}),{subtype:"gs_start_error"});return}He[ue](ue,Me,Be)});$t.meta={name:"createThunk",key:"createThunkhandleErrorMessage",description:"Calls the relevant handler for the given message"};function $n(Me){const Be=(0,r.getStateByTeamId)(Me);return(0,_.wx)(Be)&&!(0,_.$U)(Be)}u($n,"shouldIgnoreRtmStream");const De=(0,o.Ay)("Fake an RTM event for testing only",(Me,Be,ue)=>{const ke=(0,l.ZT)(Be()),Xe=Lt({messages:{rtmEventType:ue[0].type,rtmEventSubtype:ue[0].subtype,msgs:ue,fromEvtLog:(0,Z.Wu)(ue[0])},teamOrEnterpriseId:ke});Xe&&yt(Xe)});De.meta={name:"createThunk",key:"createThunkhandleMessagesForTest",description:"Fake an RTM event for testing only"};const Ne={handleNextMessageFromQueue:ln,shouldIgnoreRtmStream:$n,errorHandlers:He,handlers:ze,sharedHandlers:Ke,currentMaxBatchSize:Oe,drainQueues:Vn,drainQueue:Wn,maybeDrainQueues:_n,queueDrainTimeout:hn,lastQueueDrainTimestamp:cn,pendingMessages:Ye};Object.defineProperty(Ne,"handleNextMessageFromQueue",{get:()=>ln,set:Me=>{ln=Me}}),Object.defineProperty(Ne,"errorHandlers",{get:()=>He,set:Me=>{He=Me}}),Object.defineProperty(Ne,"handlers",{get:()=>ze,set:Me=>{ze=Me}}),Object.defineProperty(Ne,"sharedHandlers",{get:()=>Ke,set:Me=>{Ke=Me}}),Object.defineProperty(Ne,"currentMaxBatchSize",{get:()=>Oe,set:Me=>{Oe=Me}}),Object.defineProperty(Ne,"drainQueues",{get:()=>Vn,set:Me=>{Vn=Me}}),Object.defineProperty(Ne,"drainQueue",{get:()=>Wn,set:Me=>{Wn=Me}}),Object.defineProperty(Ne,"maybeDrainQueues",{get:()=>_n,set:Me=>{_n=Me}}),Object.defineProperty(Ne,"queueDrainTimeout",{get:()=>hn,set:Me=>{hn=Me}}),Object.defineProperty(Ne,"lastQueueDrainTimestamp",{get:()=>cn,set:Me=>{cn=Me}}),Object.defineProperty(Ne,"pendingMessages",{get:()=>Ye,set:Me=>{Ye=Me}}),(0,m.ul)("rtm",{handlers:ze,errorHandlers:He,interceptHandler:(Me,Be)=>{const ue=ze[Me];ze[Me]=function(){for(var ke=arguments.length,Xe=new Array(ke),dt=0;dt<ke;dt++)Xe[dt]=arguments[dt];Be(ue,...Xe)}},getPendingMessages:()=>Ye,globalQueue:{drainQueues:Vn,drainQueue:Wn,maybeDrainQueues:_n,getCurrentMaxBatchSize:()=>Oe,setCurrentMaxBatchSize:Me=>{Oe=Me},setQueueDrainInterval:Me=>{Cn=Me}}})},5387083734:(z,A,e)=>{"use strict";e.d(A,{IE:()=>v});var t=e(862210999),n=e(9804928153),s=e(796111729),a=e(4473827453),c=e.n(a),o;(function(y){y.Background="background",y.UserVisible="user-visible",y.UserBlocking="user-blocking"})(o||(o={}));const r=(0,s.Wo)({label:"SCHEDULER"}),l="scheduler"in n.J&&(0,t.A)(n.J.scheduler.postTask),_=50;let d=0,i=null;const m=u((y,T)=>{let{label:I,priority:p,delay:g}=T;if(!l)return y();d+=1;const E=performance.now();return n.J.scheduler.postTask(()=>{const f=performance.now(),O=f-E,C=i?f-i:0;i=f,O-g>_&&r.debug(`${I} task (${p}) executed with delay of ${Math.round(O)}ms and a configured delay of ${g}ms - time since last task: ${C}ms - Task queue length: ${d}`);const D=y();return d-=1,D},{priority:p,delay:g})},"runWithPriority"),h=u(()=>{if(l)return d},"getTaskQueueLength"),v=u((y,T,I)=>m(T,{label:y,priority:o.Background,delay:(I==null?void 0:I.delay)||0}),"runWithBackgroundPriority")},2180140255:(z,A,e)=>{"use strict";e.d(A,{A:()=>I});var t=e(3134334389),n=e(5255740490),s=e(1251564078),a=e(4887323608),c=e(735940183),o=e(268083624),r=e(1610251172),l=e(6084388622),_=e(5249175977),d=e(9874616273),i=e(2568070692),m=e(2786906754);function h(){return h=Object.assign||function(p){for(var g=1;g<arguments.length;g++){var E=arguments[g];for(var f in E)Object.prototype.hasOwnProperty.call(E,f)&&(p[f]=E[f])}return p},h.apply(this,arguments)}u(h,"_extends");const v=new c.Ay("find_team");function y(p,g){if((0,a.A)())return(0,m.M6)(location.href,"locale",g);const E=location.href.replace(`${location.protocol}//${location.hostname}`,"").replace(/^\/intl\/[^/]+\//,"/");return p==="en-us"?E:`/intl/${p}${E}`}u(y,"getUrlForLocale");let T=u(class extends t.Component{render(){const{hideRegionPicker:g,showLogo:E,govSlackTheme:f,joinerRedesignTreatment:O}=this.props,C=(0,n.A)("p-refreshed_page__footer_link p-refreshed_page__footer_link--main",{"p-refreshed_page__footer_link--gov_slack":f}),M=(0,n.A)("full_width",{"p-refreshed_page__full_width_footer":O}),D=t.createElement("footer",{className:"p-refreshed_page__footer"},t.createElement(l.jV,{href:(0,s.v)("/legal"),className:C,autoClogProps:{elementName:"get_started_footer_link_legal",onClick:{enableClogAction:!0}}},v.rt("Privacy & Terms")),t.createElement(l.jV,{href:(0,s.v)("/help/requests/new"),className:C,autoClogProps:{elementName:"get_started_footer_link_contact",onClick:{enableClogAction:!0}}},v.rt("Contact Us")),!g&&t.createElement(_.Wv,{allowanceX:0,overlayClassName:"p-refreshed_page__footer_overlay",position:"top",renderPopover:P=>t.createElement(_.AM,h({offsetX:-9,offsetY:-5,modalBodyOpenClassName:"p-refreshed_page__footer_modal--open",ariaLabel:v.t("Change region"),ariaRole:"dialog",shouldAnchorAtInitialPosition:!0},P),t.createElement("div",{className:"p-refreshed_page__footer_locales"},t.createElement("div",{className:"bold margin_bottom_50"},v.rt("Change region")),t.createElement("div",{className:"margin_bottom_100"},v.rt("Selecting a different region will change the language and content of Slack.com.")),t.createElement("div",{className:"display_flex"},[{title:v.t("Americas"),locales:[{locale:"es-LA",geocode:"es-la",name:"Latinoam\xE9rica (Espa\xF1ol)"},{locale:"pt-BR",geocode:"pt-br",name:"Brasil (Portugu\xEAs)"},{locale:"en-US",geocode:"en-us",name:"United States (English)"}]},{title:v.t("Europe"),locales:[{locale:"de-DE",geocode:"de-de",name:"Deutschland (Deutsch)"},{locale:"es-ES",geocode:"es-es",name:"Espa\xF1a (Espa\xF1ol)"},{locale:"fr-FR",geocode:"fr-fr",name:"France (Fran\xE7ais)"},{locale:"it-IT",geocode:"it-it",name:"Italia (italiano)"},{locale:"en-GB",geocode:"en-gb",name:"United Kingdom (English)"}]},{title:v.t("Asia Pacific"),locales:[{locale:"zh-CN",geocode:"zh-cn",name:"\u7B80\u4F53\u4E2D\u6587"},{locale:"zh-TW",geocode:"zh-tw",name:"\u7E41\u9AD4\u4E2D\u6587"},{locale:"en-IN",geocode:"en-in",name:"India (English)"},{locale:"ja-JP",geocode:"ja-jp",name:"\u65E5\u672C (\u65E5\u672C\u8A9E)"},{locale:"ko-KR",geocode:"ko-kr",name:"\uD55C\uAD6D\uC5B4"}]}].map(k=>{let{title:x,locales:F}=k;return t.createElement("div",{className:"margin_right_50 display_flex flex_direction_column",key:x},t.createElement("div",{className:"bold margin_bottom_50"},x),F.map(W=>{let{locale:Y,geocode:S,name:L}=W;return t.createElement(l.jV,{key:Y,href:y(S,Y),target:"_self",className:"p-refreshed_page__footer_link margin_bottom_50",autoClogProps:{elementName:"get_started_footer_link_change_region_locale",elementValue:Y,onClick:{enableClogAction:!0}},onClick:this.onClickLocale({locale:Y,geocode:S})},L)}))}))))},t.createElement("div",null,t.createElement(l.jV,{onClick:this.onClickChangeRegion,href:"#",className:C,autoClogProps:{elementName:"get_started_footer_link_change_region",onClick:{enableClogAction:!0}}},t.createElement(r.A,{type:"globe",size:"inherit",className:"margin_right_25"}),v.rt("Change region"),t.createElement(r.A,{type:"chevron-medium-down",size:"inherit"})))));return t.createElement("div",{className:M},t.createElement("div",{className:(0,n.A)("p-refreshed_page__footer_container",{"p-refreshed_page__footer_container--gov_slack":f})},t.createElement(t.Fragment,null,E&&t.createElement(d.A,{width:80,height:20,className:"p-app_slack_logo"}),D)))}constructor(g){super(g),this.onClickChangeRegion=E=>{E.preventDefault()},this.onClickLocale=E=>{let{locale:f,geocode:O}=E;return()=>{const C=(0,i.LL)((0,o.v8)("c")||"")||{};C.geocode=O;const M=(0,i.Zf)(C,{space:""});(0,o.n0)("i18n_locale",f,365*10,"slack.com"),M&&(0,o.n0)("c",M,365*10,"slack.com")}},this.popoverTriggerRef=t.createRef(),this.state={}}},"RefreshedFooter");T.displayName="RefreshedFooter";const I=T},2308565927:(z,A,e)=>{"use strict";e.d(A,{A:()=>a});var t=e(3134334389),n=e(5255740490);const s=u(c=>{let{children:o,heading:r,subHeading:l,titleImage:_,headingClassName:d,subHeadingClassName:i,dataQa:m,showFullWidthContent:h,className:v,isSharedWorkspaceInvite:y}=c;return t.createElement("div",{className:(0,n.A)("p-refreshed_page",{"p-refreshed_page--workspace":y,full_width:h},v),"data-qa":m},_&&_,r&&t.createElement("h1",{className:(0,n.A)("p-refreshed_page__heading",d,{margin_bottom_200:!l,full_width:h,"p-refreshed_page__heading--workspace":y})},r),l&&t.createElement("div",{className:(0,n.A)("p-refreshed_page__sub_heading",i,{full_width:h})},l),o)},"RefreshedPageContent");s.displayName="RefreshedPageContent";const a=s},6176558010:(z,A,e)=>{"use strict";e.d(A,{EU:()=>n});var t=e(6244014364),n;(function(r){r.Start="/",r.Find="/find",r.Create="/create",r.CreateNew="/createnew",r.Confirm="/confirm",r.Check="/check",r.FindAgain="/find_again",r.Email="/email",r.Error="/error",r.ConfirmationCode="/confirmemail",r.DomainClaimed="/domain",r.Landing="/landing",r.ConfirmTrust="/confirmtrust",r.IgnoreInvite="/ignoreinvite",r.SignIn="/signin",r.Workspaces="/workspaces",r.SharedInviteLoggedOut="/sharedinvite",r.SharedInviteLanding="/sharedinvitelanding",r.SelectWorkspaces="/select",r.AppleSignIn="/apple",r.AddName="/addname"})(n||(n={}));var s;(function(r){r.SharedChannelInviteAlreadyAccepted="invite_used",r.SharedChannelInviteInvlidLink="invalid_link",r.DirectMessageInviteInactive="inactive_invite",r.Generic="generic"})(s||(s={}));const a={[n.Start]:t.UiStep.START_WITH_A_WORKSPACE,[n.Create]:t.UiStep.CREATE_NEW_WORKSPACE,[n.CreateNew]:t.UiStep.CREATE_NEW_WORKSPACE,[n.Find]:t.UiStep.FIND_YOUR_WORKSPACE,[n.Check]:t.UiStep.CHECK_YOUR_EMAIL,[n.FindAgain]:t.UiStep.FIND_YOUR_WORKSPACE,[n.Email]:t.UiStep.ENTER_EMAIL,[n.Confirm]:t.UiStep.ENTER_EMAIL,[n.Error]:t.UiStep.GET_STARTED_ERROR,[n.ConfirmationCode]:t.UiStep.GET_STARTED_CONFIRM_CODE,[n.DomainClaimed]:t.UiStep.GET_STARTED_DOMAIN_CLAIMED,[n.Landing]:t.UiStep.GET_STARTED_CREATOR_LANDING,[n.SignIn]:t.UiStep.GET_STARTED_SIGN_IN,[n.Workspaces]:t.UiStep.GET_STARTED_WORKSPACES,[n.SharedInviteLoggedOut]:t.UiStep.SHARED_INVITE_LOGGED_OUT,[n.SharedInviteLanding]:t.UiStep.SHARED_INVITE_LANDING,[n.SelectWorkspaces]:t.UiStep.GET_STARTED_SELECT_WORKSPACES,[n.AppleSignIn]:t.UiStep.GET_STARTED_APPLE_SIGN_IN,[n.ConfirmTrust]:t.UiStep.GET_STARTED_CONFIRM_TRUST,[n.IgnoreInvite]:t.UiStep.GET_STARTED_IGNORE_INVITE,[n.AddName]:t.UiStep.GET_STARTED_ADD_NAME};var c;(function(r){r.Invited="invited",r.Joined="joined",r.Whitelisted="whitelisted"})(c||(c={}));var o;(function(r){r.Email="email",r.GoogleIdToken="google_id_token",r.Apple="apple_id_token"})(o||(o={}))},3700949338:(z,A,e)=>{"use strict";e.d(A,{$:()=>n,A:()=>t});function t(s){return s>=48&&s<=57}u(t,"isNumericKey");function n(s){const a=String.fromCharCode(s);return!!/[a-zA-Z0-9]/.test(a)}u(n,"isAlphaNumericKey")},7520119303:(z,A,e)=>{"use strict";e.d(A,{K_:()=>C,XR:()=>f,yb:()=>O});var t=e(735940183),n=e(7909758472),s=e(7940058138),a=e(796111729),c=e(6642124196),o=e(4465846026),r=e(847279891),l=e(7100005318),_=e(3856748711),d=e(760547858);const i=new t.Ay("channel_sidebar"),m=new t.Ay("lists"),h=new t.Ay("app_launcher"),v=new t.Ay("setup_page"),y=new t.Ay("client"),T=new t.Ay("search"),I=new t.Ay("solution_guide"),p=new t.Ay("tenured_team_solutions"),g={[s.c.Composer]:()=>i.t("New message"),[s.c.Drafts]:()=>i.t("Drafts & sent"),[s.c.ScheduledMessages]:()=>i.t("Scheduled",{ns:"channel_sidebar"}),[s.c.Sent]:()=>i.t("Sent"),Pthread:()=>i.t("Thread"),[s.c.Empty]:()=>{},[s.c.Unreads]:()=>i.t("Unreads"),[s.c.Apps]:()=>h.t("Apps",{fallbackHash:"d9a36850b7f3f78365a998cb16cb68b6fd79400d",fallbackHashNs:"channel_sidebar"}),[s.c.Shortcuts]:()=>h.t("Workflows",{fallbackHash:"d9a36850b7f3f78365a998cb16cb68b6fd79400d",fallbackHashNs:"channel_sidebar"}),[s.c.BrowseWorkflowsManagedByYou]:M=>(0,o.oF)(M)?i.t("Workflows managed by you"):"",[s.c.BrowseYourWorkflowTemplates]:()=>i.t("Your workflow templates"),[s.c.BrowseWorkflowTemplates]:()=>h.t("Templates",{fallbackHash:"f25b700ed9f092123a43acb205a6869342cf9dd6",fallbackHashNs:"workflow_builder"}),[s.c.Activity]:()=>i.t("Activity"),[s.c.Saved]:()=>i.t("Saved items"),[s.c.PaidBenefits]:()=>i.t("Paid Plan Benefits"),[s.c.BrowseChannels]:()=>i.t("All channels"),[s.c.SetupTeamName]:()=>v.t("Setup Team Name"),[s.c.SetupProfile]:()=>v.t("Profile"),[s.c.SetupChannels]:()=>v.t("Setup Channels"),[s.c.SetupInvites]:()=>v.t("Setup Invites"),[s.c.SetupCalendarContactImport]:()=>"Setup Contact Import",[s.c.SetupTada]:()=>"Setup Tada",[s.c.SetupWelcome]:()=>v.t("Setup Welcome"),[s.c.SetupPeople]:()=>v.t("Setup People"),[s.c.SetupStraightToPaidPlans]:()=>v.t("Setup Plans"),[s.c.JoinerLaunchpad]:()=>i.t("Get started"),[s.c.ResurrectedUserWelcome]:M=>(0,r.Yo)(M)?i.t("Welcome back"):"",[s.c.SolutionGuide]:M=>(0,l.qV)(M)?I.t("Set up your workspace"):"",[s.c.TenuredTeamSolutions]:M=>(0,d.OO)(M)?p.t("Tips for how you work"):"","Pbrowse-channels-prototype":()=>i.t("All channels"),[s.c.BrowseFiles]:()=>T.t("All files"),[s.c.Calendar]:M=>(0,n.A)(M)?i.t("Calendar"):"",[s.c.BrowsePeople]:()=>i.t("All people"),[s.c.BrowseExternalContacts]:()=>i.t("External people"),[s.c.BrowseUserGroups]:()=>i.t("User groups"),[s.c.BrowseExternalWorkspaces]:()=>i.t("External workspaces"),[s.c.AllDms]:()=>i.t("Direct messages"),[s.c.Search]:()=>y.t("Search Results",{fallbackHash:"bce06414177f72ab70e6387b6af9f8ceef0d6049",fallbackHashNs:"search"}),[s.c.SlackConnect]:()=>i.t("Slack Connect"),[s.c.SlackConnectInvitation]:()=>i.t("Slack Connect Invitation"),[s.c.OfflineOutbox]:()=>"Offline outbox",[s.c.Huddles]:()=>"Huddles",[s.c.BrowseHuddles]:()=>"Huddles",[s.c.Today]:()=>"Today",[s.c.Later]:()=>i.t("Later"),[s.c.BrowseOrgChart]:()=>T.t("Org chart"),[s.c.Items]:M=>(0,c.$7)(M)?m.t("Items"):"Items","Pasync-modals":()=>"Modals",[s.c.BrowseCanvases]:()=>i.t("Canvases"),[s.c.BrowseLists]:()=>"Lists",[s.c.Todos]:()=>"Todos",[s.c.Recents]:()=>T.t("Recently viewed"),[s.c.DailyDigest]:()=>i.t("Recap"),[s.c.ActionItems]:M=>(0,_.y)(M)?i.t("Action items"):"Action items",[s.c.Inbox]:M=>(0,_.y)(M)?i.t("Inbox"):"Inbox"},E={Pdms:()=>i.t("All direct messages")};function f(M){return!M||!g[M]?((0,a.Wo)().error(`getLabelFunctionForPage called with invalid pageId: ${M}`),null):g[M]}u(f,"getLabelFunctionForPage");const O=u((M,D)=>f(D.id)(M),"getPageLabel");function C(M){if(M)return E[M]}u(C,"getAriaLabelFunctionForPage")},3639008527:(z,A,e)=>{"use strict";e.d(A,{Z:()=>m});var t=e(9706240641),n=e.n(t),s=e(3134334389),a=e(1031947056),c=e(6772985425),o=e(9132066222),r=e(735940183),l=e(4275787242),_=e(5060694341);const d=new r.Ay("tabbed-channel"),i={name:"warning"},m=(0,a.Ay)("Adds a new tab to a channel",function(){var h=(0,t.coroutine)(function*(v,y,T){let{channelId:I,type:p,data:g,label:E,reason:f}=T;const O=y(),C=(0,o.U6)(O);let M={ok:!1,tabs:[]};try{M=yield v((0,c.y)({type:p,data:g,channelId:I,label:E,reason:f}))}catch(D){let P;switch(D.name){case c.d.TooManyTabs:P=C?d.t("Maximum number of tabs added."):"Maximum number of tabs added.";break;default:P=C?d.t("Cannot add tab."):"Cannot add tab."}throw v((0,_.M)({element:s.createElement(l.A,{svgIconProps:i},s.createElement("span",null,P))})),D}return M});return function(v,y,T){return h.apply(this,arguments)}}());m.meta={name:"createThunk",key:"createThunkaddTabToChannel",description:"Adds a new tab to a channel"}},1049138627:(z,A,e)=>{"use strict";e.d(A,{A:()=>S});var t=e(1031947056),n=e(9536404279),s=e(4350638406),a=e(2416684575),c=e(10127715),o=e(8847766420),r=e(7334104107),l=e(7201482752),_=e(6533394955),d=e(4096483543),i=e(1407713935),m=e(8517785520),h=e(5795074931),v=e(9101533895),y=e(3603672985),T=e(9290914927),I=e(4293996456),p=e(2802517438),g=e(3051870320),E=e(9829579108);const f=(0,E.Ay)((L,w)=>{var J,G;return(L==null||(J=L.messageActivity)===null||J===void 0||(G=J.recentActivity)===null||G===void 0?void 0:G[w])||[]});f.meta={name:"createSelector",key:"createSelectorselectMessageActivityForType",description:(L,w)=>{var J,G;return(L==null||(J=L.messageActivity)===null||J===void 0||(G=J.recentActivity)===null||G===void 0?void 0:G[w])||[]}};var O;(function(L){L.DM="dm"})(O||(O={}));var C=e(9012396182);function M(){if(!(0,d.A)()||!C.getFocusedWorkspace)return!1;const L=(0,_.getStateForClientStore)(),w=(0,C.getFocusedWorkspace)(L);return(0,p.A)((0,_.getStateByTeamId)(w))}u(M,"getFocusedWorkspacePrimaryView");const D=(0,t.Ay)("process dm messages for Megaphone client event",(L,w,J)=>{const G=w();if(!(0,i.LI)((0,v.OL)(G,(0,r.WY)(J))))return;const te=5,le=1,ve=60*3,Q=Date.now()/1e3,Ae=O.DM,ae=f(G,Ae);ae.push(J);const he=(0,h.WR)(G),_e=M();let ee,de=0,Ie=0,ce=[];ae.forEach(j=>{const N=(0,r.WY)(j);if(_e!==N)return;const b=+(0,m.j)(j);if(Q-b>ve)return;const R=(0,r.F6)(j);he===R?de+=1:(Ie+=1,ee=R),ce.push(j)}),de+Ie>=te&&de>=le&&Ie>=le&&(0,T.gd)(G,ee)===I.hR&&(L((0,y.JL)({type:"messaging_activity"})),ce=[]),L((0,g.m)({type:Ae,messages:ce}))});D.meta={name:"createThunk",key:"createThunkprocessDmMegaphoneClientEvent",description:"process dm messages for Megaphone client event"};const P=D,k=(0,t.Ay)("Process received/sent messages",(L,w,J)=>{if(!(0,d.A)()||!C.isFocusedWorkspaceInTeamOrEnterprise)return;const G=(0,o.JY)(w());if(!G)return;const X=(0,_.getStateForClientStore)();if(!(0,C.isFocusedWorkspaceInTeamOrEnterprise)(X,G))return;const te=M();te&&J.forEach(le=>{const ve=le,Q=(0,r.WY)(ve);!Q||te!==Q||(0,l.A)(ve)||(0,_.dispatchForTeamId)(G,P(ve))})});k.meta={name:"createThunk",key:"createThunkprocessIncomingMessages",description:"Process received/sent messages"};const x=k;var F=e(4365697073),W=e(3110884894);const Y=(0,t.Ay)("Appends raw / unprocessed messages to the messages and history stores",(L,w,J)=>{const G=L((0,a.A)({imsgs:J}));L((0,c.Kc)(G));const X=(0,o.JY)(w());if(!X)return;L(x(G));const te=new Map;for(const ve of J)ve.channel!=null&&(te.has(ve.channel)||te.set(ve.channel,[]),te.get(ve.channel).push(ve.ts));for(const[ve,Q]of te.entries()){const Ae={channelId:ve,timestamps:Q,oldest:Q[0],hasMore:!1,append:!0};L((0,n.VG)(Ae)),(0,s.mY)(X,ve,Q)}const le=new Map;for(const ve of J){if(!(0,F.n)(ve))continue;const Q=(0,W.Iu)(ve.channel,ve.thread_ts);Q!=null&&(le.has(Q)||le.set(Q,[]),le.get(Q).push(ve.ts))}for(const[ve,Q]of le.entries())L((0,n.VG)({channelId:ve,timestamps:Q,oldest:Q[0],hasMore:!1,append:!0}));return G});Y.meta={name:"createThunk",key:"createThunkappendMessages",description:"Appends raw / unprocessed messages to the messages and history stores"};const S=Y},4066669727:(z,A,e)=>{"use strict";e.d(A,{KH:()=>F,MC:()=>L,PL:()=>S,SV:()=>W,a$:()=>P,gO:()=>k});var t=e(9706240641),n=e.n(t),s=e(7542104324),a=e(2141099977),c=e(8802876335),o=e(796111729),r=e(6533394955),l=e(1345902898),_=e(8778137680),d=e(5795074931),i=e(7592559649),m=e(4949104520),h=e(6066600258),v=e(9240258658),y=e(1031947056),T=e(5332875232);const I="AWARENESS-MANAGER",p="AWARENESS-MANAGER-CHIME",g=`[${I}] unknown awareness subtype`,E=3e4,f=250,O=5e3,C=15,M=(0,y.Ay)("Query for awareness state from other users who are subscribed to the topic",function(){var J=(0,t.coroutine)(function*(G,X,te){const le=X();if(!(0,c.ON)(le))return;const ve=(0,d.WR)(le),Q={channel:te,type:"awareness",subtype:l.Pz.QUERY,user:ve};try{G((0,a.tN)(Q))}catch(Ae){(0,o.Ay)({getState:X}).warn("Failed to send awareness query: ",Ae)}});return function(G,X,te){return J.apply(this,arguments)}}());M.meta={name:"createThunk",key:"createThunkmaybeSendAwarenessQuery",description:"Query for awareness state from other users who are subscribed to the topic"};const D=(0,y.Ay)("Send awareness state to other users who are subscribed to the topic",function(){var J=(0,t.coroutine)(function*(G,X,te){const le=X();if(!(0,c.ON)(le))return;const ve=(0,d.WR)(le),Q=(0,i.fL)(le,te,ve),Ae={channel:te,type:"awareness",subtype:l.Pz.BROADCAST,user:ve,awareness_state:Q};try{G((0,a.tN)(Ae))}catch(ae){(0,o.Ay)({getState:X}).warn("Failed to send awareness query: ",ae)}});return function(G,X,te){return J.apply(this,arguments)}}());D.meta={name:"createThunk",key:"createThunkmaybeSendCurrentAwarenessState",description:"Send awareness state to other users who are subscribed to the topic"};const P=(0,y.Ay)("Temporarily subscribe to a topic for updates",(J,G,X)=>{const te=G();if((0,c.ON)(te))try{J((0,a.tN)({channel_id:X,type:"temp_channel_sub"}))}catch(le){(0,o.Ay)({getState:G}).warn("Failed to subscribe to awareness topic: ",le)}});P.meta={name:"createThunk",key:"createThunksubscribeToAwarenessTopic",description:"Temporarily subscribe to a topic for updates"};const k=(0,y.Ay)("Temporarily unsubscribe from topic updates",(J,G,X)=>{const te=G();if((0,c.ON)(te))try{J((0,a.tN)({channel_id:X,type:"temp_channel_unsub"}))}catch(le){(0,o.Ay)({getState:G}).warn("Failed to unsubscribe from awareness topic: ",le)}});k.meta={name:"createThunk",key:"createThunkunsubscribeFromAwarenessTopic",description:"Temporarily unsubscribe from topic updates"};const x=(0,y.Ay)("Alert other users who are subscribed to the topic that a subscriber has left",function(){var J=(0,t.coroutine)(function*(G,X,te){const le=X();if(!(0,c.ON)(le))return;const ve=(0,d.WR)(le),Q={channel:te,type:"awareness",subtype:l.Pz.CLOSE,user:ve};try{G((0,a.tN)(Q))}catch(Ae){(0,o.Ay)({getState:X}).warn("Failed to send awareness query: ",Ae)}});return function(G,X,te){return J.apply(this,arguments)}}());x.meta={name:"createThunk",key:"createThunkmaybeSendCloseState",description:"Alert other users who are subscribed to the topic that a subscriber has left"};class F{maybeSendCurrentAwarenessState(G){const X=(0,r.getStoreInstanceByTeamId)(this.teamId);return X?(X.dispatch(D(G)),!0):!1}maybeSendAwarenessQuery(G){const X=(0,r.getStoreInstanceByTeamId)(this.teamId);return X?(X.dispatch(M(G)),!0):!1}maybeSendAwarenessCloseState(G){const X=(0,r.getStoreInstanceByTeamId)(this.teamId);return X?(X.dispatch(x(G)),!0):!1}constructor({teamId:G}){this.onShutdownDataChannelSubscriber=()=>{},this.teamId=G}}u(F,"RtmBroadcaster");class W{onDisconnectDataChannel(){var G;(G=this.audioVideoFacade)===null||G===void 0||G.realtimeUnsubscribeFromReceiveDataMessage(this.dataChannelTopic),this.connected=!1}onConnectDatachannel(G){this.audioVideoFacade=G,this.audioVideoFacade.realtimeSubscribeToReceiveDataMessage(this.dataChannelTopic,this.realtimeReceiveDataMessageCallback),this.connected=!0,(0,o.Wo)().warn(p,`broadcaster connected ${this.peerId}`),this.maybeSendAwarenessQuery(this.topicId)}onInitializeDataChannelSubscriber(){}realtimeReceiveDataMessageCallback(G){}maybeSendCurrentAwarenessState(G){var X;if(!this.connected)return(0,o.Wo)().info(p,`${this.connected} ${G} Can't send yet, not connected`),!1;const te=(0,r.getStoreInstanceByTeamId)(this.teamId);if(!te)return(0,o.Wo)().warn(p,`${this.connected} ${G} Can't find teamstore for ${this.teamId}, not sending awareness state`),!1;const le=te.getState(),ve=(0,d.WR)(le);te.dispatch((0,_.c6)({topicId:G,userId:ve}));const Q=(0,T.pL)(le),ae=(0,i.fL)(le,G,ve,Q?"self":void 0).map(_e=>new v.Y.AwarenessPayload({fieldName:_e.field_name,fieldValue:_e.field_value,...this.isHuddlesAwarenessTimestampEnabled&&!!_e.field_timestamp_ms&&{fieldTimestampMs:_e.field_timestamp_ms}})),he=new v.Y.AwarenessBroadcast({channel:G,user:(0,d.WR)(te.getState()),awarenessState:ae});return(X=this.audioVideoFacade)===null||X===void 0||X.realtimeSendDataMessage(this.dataChannelTopic,v.Y.encode(new v.Y({awarenessBroadcast:he})).finish()),!0}maybeSendAwarenessQuery(G){var X;if(!this.connected)return(0,o.Wo)().info(p,`${this.connected} ${G} Can't send yet, not connected`),!1;(0,o.Wo)().warn(p,`${this.connected} ${G} Sending awareness query`);const te=(0,r.getStoreInstanceByTeamId)(this.teamId);if(!te)return(0,o.Wo)().warn(p,`${this.connected} ${G} Can't find teamstore for ${this.teamId}, not sending awareness query`),!1;const le=new v.Y.AwarenessQuery({channel:G,user:(0,d.WR)(te.getState())});return(X=this.audioVideoFacade)===null||X===void 0||X.realtimeSendDataMessage(this.dataChannelTopic,v.Y.encode(new v.Y({awarenessQuery:le})).finish()),!0}maybeSendAwarenessCloseState(G){var X;if(!this.connected)return(0,o.Wo)().info(p,`${this.connected} ${G} Can't send yet, not connected`),!1;(0,o.Wo)().warn(p,`${this.connected} ${G} Sending awareness query`);const te=(0,r.getStoreInstanceByTeamId)(this.teamId);if(!te)return(0,o.Wo)().warn(p,`${this.connected} ${G} Can't find teamstore for ${this.teamId}, not sending awareness query`),!1;const le=new v.Y.AwarenessClose({channel:G,user:(0,d.WR)(te.getState())});return(X=this.audioVideoFacade)===null||X===void 0||X.realtimeSendDataMessage(this.dataChannelTopic,v.Y.encode(new v.Y({awarenessClose:le})).finish()),!0}constructor({teamId:G,peerId:X,topicId:te,isHuddlesAwarenessTimestampEnabled:le}){this.dataChannelTopic="awareness-sync-channel",this.isHuddlesAwarenessTimestampEnabled=!1,this.onShutdownDataChannelSubscriber=()=>{this.maybeSendAwarenessCloseState(this.topicId),this.connected=!1},this.teamId=G,this.peerId=X,this.connected=!1,this.topicId=te,this.isHuddlesAwarenessTimestampEnabled=!!le}}u(W,"ChimeChannelBroadcaster");class Y{maybeTTL(){[...new Set(this.topicToTeamMap.values())].forEach(X=>{(0,o.Wo)().debug(I,`Running TTL for ${X}`);const te=(0,r.getStoreInstanceByTeamId)(X);te&&te.dispatch((0,_._y)())}),this.watchedTopics.size===0&&((0,o.Wo)().info(I,"Stopping the TTL timer, nothing to watch"),clearInterval(this.periodicTTLId),this.periodicTTLId=null)}broadcastChanges(){if(Date.now()-this.lastDirtyBroadcastTime<500)return;const G=(0,m.A)(C,-.25,.25);this.dirtyTopics.forEach(X=>{(0,h.A)(()=>{const te=this.dataChannels.get(X);te&&te.maybeSendCurrentAwarenessState(X)&&this.dirtyTopics.delete(X)},G)}),this.lastDirtyBroadcastTime=Date.now(),this.watchedTopics.size===0&&((0,o.Wo)().info(I,"Stopping the dirty broadcast timer, nothing to watch"),clearInterval(this.dirtyBroadcastTimeoutId),this.dirtyBroadcastTimeoutId=null)}broadcastPerodicallyToWatchedTopics(){this.watchedTopics.forEach(G=>{const X=this.dataChannels.get(G);X&&X.maybeSendCurrentAwarenessState(G)&&this.dirtyTopics.delete(G)}),this.watchedTopics.size===0&&((0,o.Wo)().info(I,"Stopping the periodic broadcast timer, nothing to watch"),clearInterval(this.perodicBroadcastTimeoutId),this.perodicBroadcastTimeoutId=null)}query(){Date.now()-this.lastQueryTime<15e3||(this.watchedTopics.forEach(G=>{if(this.topicToTeamMap.get(G)){const te=this.dataChannels.get(G);te&&te.maybeSendAwarenessQuery(G)&&this.dirtyTopics.delete(G)}}),this.broadcastChanges(),this.lastQueryTime=Date.now())}markTopicChanged(G){if(!this.watchedTopics.has(G)){(0,o.Wo)().info(I,`Ignoring topic change for unwatched topic ${G}`);return}this.dirtyTopics.add(G),this.dirtyBroadcastTimeoutId||((0,o.Wo)().info(I,"Starting the dirty broadcast timer"),this.dirtyBroadcastTimeoutId=setInterval(this.broadcastChanges.bind(this),f)),this.perodicBroadcastTimeoutId||((0,o.Wo)().info(I,"Starting the periodic broadcast timer"),this.perodicBroadcastTimeoutId=setInterval(this.broadcastPerodicallyToWatchedTopics.bind(this),E)),this.periodicTTLId||((0,o.Wo)().info(I,"Starting the TTL timer"),this.periodicTTLId=setInterval(this.maybeTTL.bind(this),O))}removeTopicId(G){this.dirtyTopics.delete(G),this.watchedTopics.delete(G)}watch(G,X,te){this.watchedTopics.add(X),this.topicToTeamMap.set(X,G),this.dataChannels.set(X,te),this.markTopicChanged(X),this.query()}unwatch(G){this.broadcastChanges(),this.removeTopicId(G)}unwatchAll(){if(this.watchedTopics.size){const G=[...this.watchedTopics].join(" ");(0,o.Wo)().warn(I,`Clearing unexpected remaining topics: ${G}`),this.broadcastChanges(),this.watchedTopics.clear()}this.dataChannels.clear()}constructor(){this.dirtyTopics=new Set,this.watchedTopics=new Set,this.topicToTeamMap=new Map,this.dataChannels=new Map,this.lastDirtyBroadcastTime=0,this.lastQueryTime=0}}u(Y,"AwarenessManager");const S=new Y;class L{onConnectDatachannel(G){this.audioVideoFacade=G,this.audioVideoFacade.realtimeSubscribeToReceiveDataMessage(this.dataChannelTopic,this.realtimeReceiveDataMessageCallback.bind(this)),(0,o.Wo)().warn(p,"listener connected")}onDisconnectDataChannel(){}onInitializeDataChannelSubscriber(){}onShutdownDataChannelSubscriber(){}realtimeReceiveDataMessageCallback(G){let X;try{X=v.Y.decode(G.data)}catch(te){(0,o.Wo)().debug(p,`Peer Message failed during decode, ignoring peer message.
				| Error: ${te}
				| Data Sender Attendee ID: ${G.senderAttendeeId}
				| Data Sender External Attendee ID: ${G.senderExternalUserId}
				| Topic: ${G.topic}`);return}if(X.awarenessQuery&&X.awarenessQuery.channel)S.markTopicChanged(X.awarenessQuery.channel);else if(X.awarenessBroadcast){const te=(0,r.getStoreInstanceByTeamId)(this.teamId),le=(0,T.pL)(te.getState()),ve=X.awarenessBroadcast.user,Q=X.awarenessBroadcast.channel,Ae=X.awarenessBroadcast.awarenessState;if(ve&&Q&&Ae){const ae=Ae.map(_e=>{var ee,de;return{field_name:(ee=_e.fieldName)!==null&&ee!==void 0?ee:"unknown_field",field_value:(de=_e.fieldValue)!==null&&de!==void 0?de:"unknown_value",...!!_e.fieldTimestampMs&&{field_timestamp_ms:_e.fieldTimestampMs}}}),he={user:ve,channel:Q,awarenessEntries:ae,...le&&{uniqueId:G.senderAttendeeId}};te&&te.dispatch((0,_.zZ)(he))}}else if(X.awarenessClose){const te=(0,r.getStoreInstanceByTeamId)(this.teamId),le=(0,T.pL)(te.getState()),ve=X.awarenessClose.user,Q=X.awarenessClose.channel;ve&&Q&&te&&te.dispatch((0,_.DQ)({topicId:Q,userId:ve,...le&&{uniqueId:G.senderAttendeeId}}))}}constructor({teamId:G}){this.dataChannelTopic="awareness-sync-channel",this.teamId=G}}u(L,"ChimeChannelListener");const w=u((J,G,X)=>{const te=X(),le=(0,d.WR)(te),ve=J.awareness_state;switch(J.subtype){case"query":le!==J.user&&S.markTopicChanged(J.channel);break;case"broadcast":if(ve&&le!==J.user){const Q={user:J.user,channel:J.channel,awarenessEntries:ve};G((0,_.zZ)(Q))}break;case"close":le!==J.user&&G((0,_.DQ)({topicId:J.channel,userId:J.user}));break;default:throw new Error(g)}},"onAwarenessEvent");(0,s.d1)("awareness",w)},9781145568:(z,A,e)=>{"use strict";e.d(A,{A:()=>_});var t=e(1031947056),n=e(7053828403),s=e(395285811),a=e(1407713935),c=e(9101533895),o=e(56548687),r=e(6244014364);const l=(0,t.Ay)("Clogs a message sent or resent",function(d,i){let{channelId:m,msgTs:h,resent:v=!1}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const y=i(),T=m?(0,c.OL)(y,m):null;let I={message_timestamp:h,channel_id:m,channel_type:m?m.charAt(0):null,channel_privacy_type:T?(0,a.K5)(T):null,is_file_channel:T?(0,s.jT)(T):null};const p=(0,n.ZR)(y);p!==null&&(I={...I,channel_session_id:p});const g=(0,o.e)({state:y}),E=v?r.EventId.MSG_RESENT:r.EventId.MSG_SENT;g.track(E,I)});l.meta={name:"createThunk",key:"createThunkclogMessageSent",description:"Clogs a message sent or resent"};const _=l},5904726069:(z,A,e)=>{"use strict";e.d(A,{r:()=>i});var t=e(3134334389),n=e(1031947056),s=e(4540171876),a=e(9236644324),c=e(5258584090),o=e(5060694341),r=e(4275787242),l=e(735940183),_=e(5332875232);const d=new l.Ay("huddles"),i=(0,n.Ay)("Copies Huddle link by Channel Id",(m,h,v,y)=>{let{channelId:T,suppressToast:I}=v;const{windowRef:p}=y(c.S),g=(0,_.Eo)(h());if(T&&(m((0,s.TE)({reason:"copy",channelId:T})).then(E=>{(0,a.x3)(E.link,p.deref())}),g&&!I)){const E={name:"check"};m((0,o.M)({element:t.createElement(r.A,{svgIconProps:E,duration:3e3},d.rt("Huddle link copied"))}))}});i.meta={name:"createThunk",key:"createThunkcopyHuddleLinkByChannelId",description:"Copies Huddle link by Channel Id"}},3694676182:(z,A,e)=>{"use strict";e.d(A,{Q7:()=>j,TE:()=>Ae.A,Uf:()=>Ce});var t=e(6422693406),n=e(362134992),s=e(7530630315),a=e(1031947056),c=e(5795074931),o=e(157328471),r=e(1827030018),l=e(9132245692),_=e(796111729),d=e(9665027958),i=e(9706240641),m=e(9113979368),h=e(8840779375),v=e(9746734072),y=e(2101927269),T=e(9101533895),I=e(5467378328),p=e(9530687876);const g=(0,a.Ay)(p.rd.BULK_UPDATE_CHANNELS,function(Pe,fe){let{channels:pe}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const q=fe();if(!pe||!pe.length||!(0,v.A)(pe))return;const se=(0,y.A)(pe,"id"),ge=[],Oe=!1;se.length&&(se.forEach(Le=>{const We=(0,T.OL)(q,Le.id,Oe);ge.push({...We,...Le})}),Pe((0,I.U)({channels:ge,reason:p.rd.BULK_UPDATE_CHANNELS})))});g.meta={name:"createThunk",key:"createThunkbulkUpdateChannels",description:p.rd.BULK_UPDATE_CHANNELS};var E=e(6613382951),f=e(7438375976),O=e(4446301238),C=e(8455301571),M=e(8571983633),D=e(4013618389),P=e(7486305635),k=e(8802876335),x=e(3683482182),F=e(4459831283);const W=(0,a.Ay)("Update the unread counts in response to client.counts",(Pe,fe,pe)=>{if(!pe)return;const q=fe(),se={},ge={},Oe={},Le=(0,F.FT)(q);pe.forEach(We=>{const{id:Re,unread_cnt:we,unread_highlight_cnt:Je}=We,it=Le&&!(0,M.A)(We==null?void 0:We.vip_count)?We==null?void 0:We.vip_count:void 0;se[Re]={unreadCnt:we||0,unreadHighlightCnt:Je||0,unreadVIPMentionCnt:Le?it||0:void 0};const et=(0,T.OL)(q,Re);if(!we&&!Je||!(0,D.F)(q,et))return;(0,P.d$)(q,et)&&(Oe[Re]=!0);const lt=(0,D.v)(q,et)?we:Je,{reachedEnd:nt}=(0,C.tp)(q,Re),at=(0,k.UJ)(q);nt&&at?ge[Re]=(0,x.Lh)(q,Re):ge[Re]={unreadCnt:we,unreadHighlightCnt:lt||Je,unreadVIPMentionCnt:Le?it:void 0}}),Pe((0,o.SO)({initialUnreads:se,countsPerChannel:ge,channelsToSuppress:Oe}))});W.meta={name:"createThunk",key:"createThunkinitializeUnreadCountsFromChannels",description:"Update the unread counts in response to client.counts"};var Y=e(4368281601),S=e(6007206761),L=e(9289081806),w=e(6495946979),J=e(395285811),G=e(1407713935),X=e(9762304444);const te=(0,X.Ay)("TS.ensureFullyBooted",()=>{throw new Error("Not implemented (and only ever intended for use in non-Sonic Land)")});var le=e(4096483543),ve=e(1949656963),Q=e(4191588167),Ae=e(4660031767),ae=e(6695353875);const he="COUNTS",_e=(0,a.Ay)("Apply counts to channel objects and update stores",function(){var Pe=(0,i.coroutine)(function*(fe,pe){let{counts:q=[]}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};(0,le.A)()||(yield te());let se=pe();const ge=[],Oe={},Le={},We=[],Re=(0,k.UJ)(se),we=(0,k.yf)(se),Je=(0,ae.lc)(se),it=(0,F.FT)(se);(0,_.Ay)({state:se}).info(he,`Applying counts to channels. wasLastConnectFast: ${we} isConnected: ${Re}`);const et=q.filter(nt=>{let{has_unreads:at,mention_count:ze}=nt;return at||ze}).filter(function(){let{id:nt}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return!(0,T.hh)(se,nt)}).map(function(){let{id:nt}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return nt});et.length&&(yield fe((0,O.pX)({ids:et,reason:"apply-counts-to-channels/ensure-channels",callSource:O.aI.ApplyCounts})),se=pe());const lt=(0,C.jg)(se);q.forEach(nt=>{const at=(0,T.OL)(se,nt.id,!1);if(!at||(0,G.QR)(at)){if(!nt.has_unreads&&!nt.mention_count)return;(0,_.Ay)({state:se}).warn(he,{id:nt.id,has_unreads:nt.has_unreads,nonExistent:(0,G.QR)(at)},"applyCountsToChannels_missing_channel");return}if((0,S.F)(at)||(0,G.rW)(at)&&!(0,w.b)(at))return;if((0,J.jT)(at)){fe((0,Y.k)({channelId:at.id,mentionCount:nt.mention_count,shouldSuppress:(0,P.d$)(se,at)}));return}const ze={},{reachedEnd:Ke}=(0,C.tp)(se,at.id),Ye=nt.has_unreads?1:0;let _t=0,vt=0,Tt=0,Lt=!1;(0,G.LI)(at)||(0,G.LI)(nt)||(0,G.yz)(at)||(0,G.yz)(nt)?_t=nt.mention_count||Ye:(Lt=!0,_t=Ye,vt=nt.mention_count||0,Tt=(nt==null?void 0:nt.vip_count)||0),!_t&&vt&&((0,_.Ay)({state:se}).warn(he,`Ignoring positive mention_count_display because has_unreads == false for ${at.id}`,{subtype:"ignoring_positive_mention_count_display"}),vt=0),Le[at.id]={unreadCnt:_t,unreadHighlightCnt:vt,unreadVIPMentionCnt:it?Tt:void 0},!Je&&Ke&&Re?We.push(at.id):(_t!==(0,L.$M)(at)&&(ze.unread_cnt=_t),it&&Tt!==(0,L.OJ)(at)&&(ze.vip_count=Tt),Lt&&vt!==(0,L.BP)(at)&&(ze.unread_highlight_cnt=vt)),nt.updated&&nt.history_invalid&&(Oe[at.id]={historyInvalidTs:nt.history_invalid,updatedTs:nt.updated},lt!=null&&lt[at.id]&&fe((0,Q.A)({channelId:at.id,newHistoryInvalidTs:nt.history_invalid,newUpdatedTs:nt.updated}))),(0,m.A)(ze)||(ze.id=at.id,ge.push(ze))}),(0,m.A)(ge)||fe(g({channels:ge})),(0,m.A)(Oe)||fe((0,ve.ih)({updates:Oe})),fe((0,E.M)(q)),fe((0,f.f)(q.map(nt=>({channelId:nt.id,ts:nt.last_read})))),fe((0,o.iz)(Le)),fe(W((0,h.A)(Le,function(){let{unreadCnt:nt,unreadHighlightCnt:at,unreadVIPMentionCnt:ze}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{id:arguments.length>1?arguments[1]:void 0,unread_cnt:nt,unread_highlight_cnt:at,vip_count:it?ze:void 0}}))),We.forEach(nt=>{fe((0,Ae.A)({channelId:nt}));const at=(0,T.OL)(pe(),nt,!1);if(at){const ze={unreadCnt:(0,L.$M)(at),unreadHighlightCnt:(0,L.BP)(at),unreadVIPMentionCnt:(0,L.OJ)(at)};(0,_.Ay)({state:se}).info(he,`Recounted ${nt}; initial: ${JSON.stringify(Le[nt])}; after: ${JSON.stringify(ze)}`)}})});return function(fe,pe){return Pe.apply(this,arguments)}}());_e.meta={name:"createThunk",key:"createThunkapplyCountsToChannels",description:"Apply counts to channel objects and update stores"};const ee=_e,de="COUNTS",Ie=(0,a.Ay)("Apply counts to channels and threads",function(Pe,fe){let{channels:pe,groups:q,ims:se,mpims:ge,threads:Oe,alerts:Le,saved:We,fileChannels:Re,channelBadges:we}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const Je=fe();if(!(0,c.TZ)(Je))return t.S.resolve();Pe((0,o.iz)({})),Pe((0,l.y)(Le||{}));const it=ce(Re),et=(0,n.A)((0,s.A)(pe,q,se,ge,it));return Pe(ee({counts:et})).then(()=>{const lt=(0,_.Ay)({getState:fe});Oe&&(lt.info(de,`Threads has_unreads:${Oe.has_unreads} mention_count:${Oe.mention_count}`),Pe((0,r._)({threadsHasUnreads:Oe.has_unreads,threadsUnreadCountByChannel:Oe.unread_count_by_channel,threadsMentionCountByChannel:Oe.mention_count_by_channel}))),We&&Pe((0,d.yO)(We)),we&&Pe((0,o.$m)(we)),lt.info(de,"Completed counts processing")})});Ie.meta={name:"createThunk",key:"createThunkapplyCountsToChannelsAndThreads",description:"Apply counts to channels and threads"};function ce(Pe){if(!Pe||!Pe.quip)return[];const fe=Pe.quip.mention_count_by_channel;return Object.keys(fe).map(se=>({id:se,mention_count:fe[se],has_unreads:!0}))}u(ce,"transformFileChannels");const j=Ie;var N=e(9290914927),b=e(6957597272),R=e(7606781622),K=e(8276911661),B=e(6866036454),$=e(5899351761),Z=e(4726390364);const re="COUNTS",Te=(0,a.Ay)("Update unread counts",function(Pe,fe){let{channelId:pe,messageTs:q}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const se=fe(),ge=!1,Oe=(0,T.OL)(se,pe,ge);if(!Oe||!(0,Z.A)(Oe,{countFileChannels:!0}))return t.S.resolve(!0);const Le=(0,K.cA)(se),We=(0,N.gd)(se,Le.id)==="away",Re=Le._presence_last_changed||(0,c.tV)(se,"start_ms"),we=(0,$.A)({state:se,messages:[(0,R.Ld)(se,Oe.id,q)],channel:Oe,currentUserId:Le.id,userIsAway:We,userPresenceLastChanged:Re,highlightWords:(0,B.A)(se)}),Je=we==null?void 0:we.unreadHighlightCnt;return Je!==Oe.unread_highlight_cnt&&((0,_.Ay)({state:se}).info(re,`Updated unread_highlight_cnt for ${Oe.id}: ${Je}`),Pe((0,b.b)({id:Oe.id,unread_highlight_cnt:Je}))),t.S.resolve(!1)});Te.meta={name:"createThunk",key:"createThunkupdateUnreadCountsForThreadMentionBroadcasts",description:"Update unread counts"};const Ce=Te},2522627261:(z,A,e)=>{"use strict";e.d(A,{w:()=>c});var t=e(1031947056),n=e(6244014364),s=e(56548687),a=e(497761763);const c=(0,t.Ay)("Clog the opening of a list",(o,r,l)=>{let{listId:_,source:d,openInNewWindow:i,channelId:m}=l;const h=(0,a.A)(_)?_:"";let v=n.UiComponentName.LISTS_MAIN_EMBED;i&&(v=n.UiComponentName.LISTS_NEW_WINDOW_EMBED),(0,s.e)({getState:r}).track(n.EventId.SLACK_LISTS,{contexts:{ui_context:{ui_properties:{element_name:d??"unknown"},ui_component_name:v,ui_step:n.UiStep.SLACK_LISTS_OPEN},core:{file_id:h,channel_id:m}}})});c.meta={name:"createThunk",key:"createThunkclogOpenList",description:"Clog the opening of a list"}},36177209:(z,A,e)=>{"use strict";e.d(A,{B:()=>t});var t;(function(n){n.STARRED_LISTS_SIDEBAR="starred-lists-sidebar",n.CHANNEL_TAB="channel_tab",n.CANVAS_CREATE_LIST="canvas_create_list",n.CANVAS_LIST_UNFURL="canvas_list_unfurl",n.CANVAS_LIST_UNFURL_MENU="canvas_list_unfurl_menu",n.CANVAS_FROM_QUIP="canvas_from_quip"})(t||(t={}))},4191588167:(z,A,e)=>{"use strict";e.d(A,{A:()=>_});var t=e(1031947056),n=e(8847766420),s=e(4405788578),a=e(8455301571),c=e(4350638406),o=e(796111729),r=e(9536404279);const l=(0,t.Ay)("Possibly purge or invalidate channel history .",(d,i,m)=>{let{channelId:h,newHistoryInvalidTs:v,newUpdatedTs:y}=m;const T=i(),I=(0,s.Kq)(T,h),p=(0,s.QO)(T,h);v!=="0000000000.000000"&&(!I||v>I)?((0,o.Ay)({state:T}).info("COUNTS",`purging cached history for channel ${h} since counts history_invalid ${v} > cached historyInvalidTs ${I}`),d((0,r.bz)({channelId:h,includeThreads:!0}))):y!=="0000000000.000000"&&(!p||y>p)&&((0,o.Ay)({state:T}).info("COUNTS",`invalidating history for channel ${h} since counts updated ${y} > cached updatedTs ${p}`),(0,c.D1)((0,n.ZT)(T),h,(0,a.m3)(T,h)))});l.meta={name:"createThunk",key:"createThunkmaybePurgeChannelHistoryAfterMutations",description:"Possibly purge or invalidate channel history ."};const _=l},9609912577:(z,A,e)=>{"use strict";e.d(A,{A:()=>h});var t=e(3134334389),n=e(1031947056),s=e(2375333597),a=e(3677514771),c=e(56548687),o=e(6244014364),r=e(4212246463),l=e(8847766420),_=e(3707193570),d=e(5795074931),i=e(6839188756);const m=(0,n.Ay)("Opens the apps browser modal",function(v,y){let{initialTab:T,emojiNameSuggestion:I,elementName:p,emojiUrl:g,megaphoneEventOnClose:E}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const f=y(),O=(0,l.JY)(f);let C;O&&(0,_.JV)(O)?C=(0,a.H2)(f):(0,d.u8)(f)&&(C=(0,i.mf)((0,a.H7)(f))),(0,c.e)({getState:y}).track(o.EventId.ADD_CUSTOM_EMOJI_IN_CLIENT,{contexts:{ui_context:{step:"add_custom_emoji",action:"click",ui_properties:{element_type:"button",element_name:p}}}}),v((0,s.q)({element:t.createElement(r.A,{showEmojiPacks:!g,orgName:C,initialTab:T,emojiNameSuggestion:I,emojiUrl:g,megaphoneEventOnClose:E}),isStackable:!0}))});m.meta={name:"createThunk",key:"createThunkopenAddCustomEmojiModal",description:"Opens the apps browser modal"};const h=m},9786721596:(z,A,e)=>{"use strict";e.d(A,{U:()=>m});var t=e(1031947056),n=e(8677230210),s=e(613926746),a=e(8847766420),c=e(3244118357),o=e(4910963364),r=e(8276911661),l=e(5267010247),_=e(8822892075),d=e(4427921758);const i=(0,t.Ay)("Shows message pane for bots",function(h,v){let{memberId:y,serviceId:T,botProfile:I}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var p;const{member:g,bot:E,memberIsHuman:f}=(0,n.Od)(v(),{userId:y,botId:T,botProfile:I}),O=(0,a.ZT)(v())||"",C=!f||T?(0,c.AW)({member:g||void 0,bot:E,botProfile:I,currentTeamId:O}):void 0,M=(0,o.G2)(v(),{serviceId:T,homeWorkspaceId:C,memberId:y});var D;const P=(0,r.nv)(v(),y||((D=M==null||(p=M.app_user)===null||p===void 0?void 0:p.id)!==null&&D!==void 0?D:void 0));var k;return h((0,s.Z)({memberId:(k=P==null?void 0:P.id)!==null&&k!==void 0?k:void 0}))});i.meta={name:"createThunk",key:"createThunkopenMessagesForBot",description:"Shows message pane for bots"};const m=(0,t.Ay)("Shows the flexpane profile for humans or messages for bots",(h,v,y,T)=>{let{memberId:I,serviceId:p,botProfile:g}=y;const{currentTab:E,channelId:f}=T(d.j);return I&&(0,n.wC)(v(),I)?h(E?(0,l.o)((0,_.sL)((0,_.Fo)({memberId:I}),f,E.id)):(0,l.o)((0,_.Fo)({memberId:I}))):h(i({memberId:I,serviceId:p,botProfile:g}))});m.meta={name:"createThunk",key:"createThunkopenProfile",description:"Shows the flexpane profile for humans or messages for bots"}},5241075893:(z,A,e)=>{"use strict";e.d(A,{ET:()=>T,Fd:()=>p,Wb:()=>g,xz:()=>I});var t=e(3297051565),n=e.n(t),s=e(5950652755),a=e(1031947056),c=e(2141099977),o=e(796111729),r=e(8847766420),l=e(4423055085),_=e(440999534),d=e(8802876335);const i="PRESENCE-MANAGER",m={},h=u((O,C)=>{const M=(0,r.ZT)(C()),D=Object.keys(m[M]),P={type:"presence_sub",ids:D},k=(0,o.Ay)({getState:C});k.debug(i,`Sending a 'presence_sub' event with the following ids: ${D}`),O((0,c.tN)(P)).catch(x=>{x&&x.message===_.qk||k.error(`Received an error while trying to send 'presence_sub' with the following ids: ${D}, error = ${x}`)})},"sendMessageEvent");let v;function y(){return v||(v=(0,s.A)(h,100,{leading:!1})),v}u(y,"getThrottledSendMessageEvent");const T=(0,a.Ay)("Send a presence_sub event with the list of members we want to subscribe to receive presence_change events for",(O,C)=>{if(!(0,d.ON)(C())){(0,o.Ay)({getState:C}).debug(i,"The presence subscription changed while the WebSocket disconnected; will send the updated subscription once we are connected");return}y()(O,C)});T.meta={name:"createThunk",key:"createThunksendPresenceSubEvent",description:"Send a presence_sub event with the list of members we want to subscribe to receive presence_change events for"};const I=(0,a.Ay)("Adds the member to the presence subscription or increments the associated count",function(O,C){let{memberId:M}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!M||M==="USLACKBOT")return;const D=(0,r.ZT)(C());if(m[D]||(m[D]={}),m[D][M]){(0,o.Ay)({getState:C}).debug(i,`Increasing the count for ${M} by 1`),m[D][M]+=1;return}(0,o.Ay)({getState:C}).debug(i,`Adding ${M} to the presence subscription`),m[D][M]=1,O(T())});I.meta={name:"createThunk",key:"createThunkaddMemberToPresenceSubscription",description:"Adds the member to the presence subscription or increments the associated count"},I.propTypes={memberId:n().string.isRequired};const p=(0,a.Ay)("Removes the member from the presence subscription or decrements the associated count",function(O,C){let{memberId:M}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!M)return;const D=(0,r.ZT)(C());if(!(!m[D]||!m[D][M])){if(m[D][M]>1){(0,o.Ay)({getState:C}).debug(i,`Decreasing the count for ${M} by 1`),m[D][M]-=1;return}(0,o.Ay)({getState:C}).debug(i,`Removing ${M} from the presence subscription`),delete m[D][M],O(T())}});p.meta={name:"createThunk",key:"createThunkremoveMemberFromPresenceSubscription",description:"Removes the member from the presence subscription or decrements the associated count"},p.propTypes={memberId:n().string.isRequired};const g=u(O=>m[O],"getPresenceSubscriptionByTeamId"),E=u(O=>{delete m[O]},"deletePresenceSubscriptionByTeamId"),f={sendMessageEvent:h};(0,l.ul)("presenceManager",{getPresenceSubscriptionByTeamId:g})},5583430912:(z,A,e)=>{"use strict";e.d(A,{Ap:()=>a,Pv:()=>n,Ui:()=>s});var t=e(7223729463);const n=new t.a;function s(){return n.entries().filter(c=>c.value&&!c.value.isRejected()&&!c.value.isCancelled()).length}u(s,"getActiveCollabClientCount");const a=u(c=>{const o=n.get(c);return o!=null&&o.isFulfilled()?o.value():void 0},"getInitializedClient")},2580646391:(z,A,e)=>{"use strict";e.d(A,{P:()=>t});var t;(function(n){n.BOOKMARK_BAR="bookmark_bar",n.COMPOSE_BUTTON="compose_button",n.SIDEBAR_CANVAS_CMD_CLICK="sidebar_canvas_cmd_click",n.SIDEBAR_ADD_BUTTON="sidebar_add_button",n.SIDEBAR_CONTEXT_MENU="sidebar_context_menu",n.QUIP_FILE_BROWSER_NUX_CREATE_DOC="quip_file_browser_nux_create_doc",n.SHORTCUT_MENU="shortcut_menu",n.QUIP_SHORTCUT_MENU="quip_shortcut_menu",n.HEADER_OVERFLOW_MENU="header_overflow_menu",n.QUIP_CANVAS_CABINET_CREATE_DOC="quip_canvas_cabinet_create_doc",n.SHORTCUT="shortcut",n.CANVAS_PAGE_EMPTY_STATE_FREEMIUM="canvas_page_empty_state_freemium",n.TRIAL_OFFER_MODAL="trial_offer_modal",n.HUDDLE_ATTACHMENTS_CREATE="huddle_attachments_create",n.QUIP_FILE_BROWSER_CREATE_DOC="quip_file_browser_create_doc",n.BOOKMARKS_BAR_CREATE="bookmarks_bar_create",n.CREATE_CHANNEL_SPACE="create-channel-space",n.QUICKSWITCHER="quickswitcher",n.FILE_MENU="file_menu",n.CREATE_MENU="create_menu",n.MORE_CANVASES_SIDEBAR="more_canvases_sidebar",n.SLACK_DOCS_SIDEBAR="slack_docs_sidebar",n.CALL_ATTACHMENTS_CREATE="call_attachments_create",n.INSERT_CANVAS_MODAL_CREATE="insert_canvas_modal_create",n.CREATE_HUDDLE_NOTES_DOC="create_huddles_notes_doc",n.CREATE_SIDECAR_NOTES="create_sidecar_notes",n.QUIP_BOOT_HOOKS="quip_boot_hooks",n.INSERT_CANVAS_SHORTCUTS_MENU="insert_canvas_shortcuts_menu",n.SHORTCUTS_MENU_V2_ITEM_CLICK="shortcuts_menu_v2_item_click",n.INTERNAL_TEST="internal_test",n.CANVASES_PEEK_VIEW="canvases_peek_view",n.SLACK_DOCS_PEEK_VIEW="slack_docs_peek_view",n.RESURRECTED_USER_WELCOME="resurrected_user_welcome",n.SLASH_COMMAND="slash_command",n.CREATE_DOC_FROM_LIST="create_doc_from_list",n.CREATE_TEMPLATE="create_template",n.CREATE_CANVAS_FROM_MESSAGE="create_canvas_from_message",n.HUDDLE_MEETING_NOTES_AUTO_OPEN="huddle_meeting_notes_auto_open",n.CREATE_MEETING_NOTES_FROM_PLACEHOLDER="create_meeting_notes_from_placeholder"})(t||(t={}))},4849735859:(z,A,e)=>{"use strict";e.d(A,{A:()=>E});var t=e(9706240641),n=e(6422693406),s=e(4761125736),a=e(1031947056),c=e(3577873706),o=e(2985066322),r=e(1552255081),l=e(82287009),_=e(5534420337),d=e(6244014364),i=e(56548687);const m=(0,a.Ay)("Clog the creation of a doc",(f,O,C)=>{let{fileId:M,source:D}=C;(0,i.e)({getState:O}).track(d.EventId.QUIP_DOC_CREATION,{contexts:{ui_context:{ui_properties:{element_name:D},ui_component_name:d.UiComponentName.QUIP_MAIN_EMBED,ui_step:d.UiStep.QUIP_CREATION},core:{quip_file_id:M,file_id:M}}})});m.meta={name:"createThunk",key:"createThunkclogCreateDoc",description:"Clog the creation of a doc"};const h=m;var v=e(5492559860),y=e(2832209848),T=e(2494018541);const I=40*1e3,p=(0,a.Ay)("Finalize a temporary document",function(){var f=(0,t.coroutine)(function*(O,C,M){let{tempId:D,finalId:P,onCreate:k,source:x}=M;const F=yield O((0,c.A)({quipThreadId:P,reason:"finalize-quip-doc"}));O((0,T.O)({fileId:F,tempId:D})),O((0,o.A)({fileId:F,lastReadByUser:Date.now()})),k&&(x!=="create-channel-space"&&O(h({fileId:F,source:x})),k({tempId:D,finalId:P,fileId:F}))});return function(O,C,M){return f.apply(this,arguments)}}());p.meta={name:"createThunk",key:"createThunkfinalizeDoc",description:"Finalize a temporary document"};const g=(0,a.Ay)("Create a Quip doc",function(){var f=(0,t.coroutine)(function*(O,C,M){let{onCreate:D,options:P,isChannelCanvas:k,source:x}=M;const F=(0,s._Z)(C(),"canvas_tab_customization_ga")==="on";if(!(0,r.F)(C()))return(0,_.Ay)({getState:C}).error(new Error("Failed to create a canvas - user does not have permission")),n.S.reject(new Error("Cannot create canvas"));const Y={usesOnlyInlineTextComments:!0,...P},L=yield(yield O((0,l.lN)())).docs.create(Y);if(L.isCreated())O(p({tempId:"",finalId:L.id.get(),onCreate:D,source:x}));else{const w=setTimeout(()=>{(0,_.Ay)({getState:C}).error(new Error("createDoc timeout"),{source:x,isChannelCanvas:k})},I),J=u((G,X)=>{L.isCreated()&&(clearTimeout(w),O(p({tempId:G,finalId:X,onCreate:D,source:x})),L.id.unlisten(J))},"listener");L.id.listen(J)}return F&&!k&&O((0,v.z)({component:y.G7.CanvasTabCanvasCreated,type:y.X8.Click,reason:"canvas-created"})),L});return function(O,C,M){return f.apply(this,arguments)}}());g.meta={name:"createThunk",key:"createThunkcreateDoc",description:"Create a Quip doc"};const E=g},4119164726:(z,A,e)=>{"use strict";e.d(A,{Aw:()=>p,Zj:()=>v,vK:()=>y});var t=e(3385422400),n=e(735940183),s=e(9421999304),a=e(4761125736),c=e(8079225585),o=e(7731278967),r=e(9084547259),l=e(4843305308),_=e(5244168417),d=e(3677514771),i=e(6839188756),m=e(6642124196);const h=new n.Ay("quip_shortcut_handlers");var v;(function(g){g[g.BASICS=0]="BASICS",g[g.MEDIA=1]="MEDIA",g[g.SLACK=2]="SLACK",g[g.LAYOUT=3]="LAYOUT"})(v||(v={}));const y=u(()=>({[v.BASICS]:h.t("Basics"),[v.MEDIA]:h.t("Media"),[v.SLACK]:h.t("Slack"),[v.LAYOUT]:h.t("Layout")}),"getCategoryDetailsV2"),T=u(g=>{let{currentTeam:E,experimentCanvasInsertWorkflowMenuGroupOn:f,experimentCanvasDateMentionsGroupOn:O,experimentCanvasSetReminderFromDatePickerOn:C,experimentCanvasCreateListPrototypeGroupOn:M,teamHasListsAccess:D}=g;const P=(0,i.qR)(E),k=y(),x=k[v.BASICS],F=k[v.MEDIA],W=k[v.SLACK],Y=k[v.LAYOUT],S=u((L,w,J,G)=>({id:L,name:w,canonicalName:J,hideOnEmptyQuery:G,autocomplete:!0,icon:(0,l.P)(o.r.DATE_MENTION).name,category:v.BASICS}),"dateShortcut");return[{id:_.SlackShortcutCommandType.CANVAS,name:(0,c.O)(o.r.CANVAS),canonicalName:"/canvas",autocomplete:!0,icon:(0,l.P)(o.r.CANVAS).name,category:v.BASICS,aliases:[x]},{id:_.SlackShortcutCommandType.CHECKLIST,name:(0,c.O)(o.r.CHECK_LIST),canonicalName:"/checklist",autocomplete:!0,icon:(0,l.P)(o.r.CHECK_LIST).name,category:v.BASICS,aliases:[x]},{id:_.SlackShortcutCommandType.H1,name:(0,c.O)(o.r.H1),canonicalName:"/largeheading",autocomplete:!0,icon:(0,l.P)(o.r.H1).name,category:v.BASICS,aliases:["h1",x]},{id:_.SlackShortcutCommandType.H2,name:(0,c.O)(o.r.H2),canonicalName:"/mediumheading",autocomplete:!0,icon:(0,l.P)(o.r.H2).name,category:v.BASICS,aliases:["h2",x]},{id:_.SlackShortcutCommandType.H3,name:(0,c.O)(o.r.H3),canonicalName:"/smallheading",autocomplete:!0,icon:(0,l.P)(o.r.H3).name,category:v.BASICS,aliases:["h3",x]},{id:_.SlackShortcutCommandType.PLAIN,name:(0,c.O)(o.r.PARAGRAPH),canonicalName:"/paragraph",autocomplete:!0,icon:(0,l.P)(o.r.PARAGRAPH).name,category:v.BASICS,aliases:[h.t("plain"),x]},{id:_.SlackShortcutCommandType.TABLE,name:(0,c.O)(o.r.TABLE),canonicalName:"/table",autocomplete:!0,icon:(0,l.P)(o.r.TABLE).name,category:v.BASICS,aliases:[h.t("grid"),h.t("spreadsheet"),x]},{id:_.SlackShortcutCommandType.DIVIDER,name:(0,c.O)(o.r.DIVIDER),canonicalName:"/divider",autocomplete:!0,icon:(0,l.P)(o.r.DIVIDER).name,category:v.BASICS,aliases:[h.t("horizontal line"),x]},{id:_.SlackShortcutCommandType.BULLET_LIST,name:(0,c.O)(o.r.BULLET_LIST),canonicalName:"/bulletedlist",autocomplete:!0,icon:(0,l.P)(o.r.BULLET_LIST).name,category:v.BASICS,aliases:[x]},{id:_.SlackShortcutCommandType.ORDERED_LIST,name:(0,c.O)(o.r.ORDERED_LIST),canonicalName:"/orderedlist",autocomplete:!0,icon:(0,l.P)(o.r.ORDERED_LIST).name,category:v.BASICS,aliases:[x]},{id:_.SlackShortcutCommandType.BLOCKQUOTE,name:(0,c.O)(o.r.BLOCKQUOTE),canonicalName:"/blockquote",autocomplete:!0,icon:(0,l.P)(o.r.BLOCKQUOTE).name,category:v.BASICS,aliases:[x]},{id:_.SlackShortcutCommandType.CODE,name:(0,c.O)(r.L.CODE),canonicalName:"/code",autocomplete:!0,icon:(0,l.P)(r.L.CODE).name,category:v.BASICS,aliases:[x]},...O?[{...S(_.SlackShortcutCommandType.DATE_GENERIC,(0,c.O)(o.r.DATE_MENTION),"/date"),aliases:[x]},S(_.SlackShortcutCommandType.DATE_TODAY,h.t("Today"),"/today",!0),S(_.SlackShortcutCommandType.DATE_TOMORROW,h.t("Tomorrow"),"/tomorrow",!0),S(_.SlackShortcutCommandType.DATE_YESTERDAY,h.t("Yesterday"),"/yesterday",!0)]:[],...C?[{...S(_.SlackShortcutCommandType.DATE_GENERIC,h.t("Reminder",{fallbackHash:"b87a1929f78bee9f6f3a2ac9e30465cd226ab5ec",fallbackHashNs:"slack_docs"}),"/reminder"),aliases:[x]}]:[],{id:_.SlackShortcutCommandType.VIDEO,name:(0,c.O)(o.r.VIDEO_CLIP),canonicalName:"/videoclip",autocomplete:!0,icon:(0,l.P)(o.r.VIDEO_CLIP).name,category:v.MEDIA,aliases:[F]},{id:_.SlackShortcutCommandType.AUDIO,name:(0,c.O)(o.r.AUDIO_CLIP),canonicalName:"/audioclip",autocomplete:!0,icon:(0,l.P)(o.r.AUDIO_CLIP).name,category:v.MEDIA,aliases:[F]},{id:_.SlackShortcutCommandType.IMAGE,name:(0,c.O)(o.r.IMAGE),canonicalName:"/image",autocomplete:!0,icon:(0,l.P)(o.r.IMAGE).name,category:v.MEDIA,aliases:[F]},{id:_.SlackShortcutCommandType.FILE,name:(0,c.O)(o.r.FILE),canonicalName:"/file",autocomplete:!0,icon:"file",category:v.MEDIA,aliases:[F]},...f&&P?[{id:_.SlackShortcutCommandType.WORKFLOW,name:(0,c.O)(o.r.WORKFLOW,{experimentCanvasInsertWorkflowMenuGroupOn:f}),canonicalName:"/workflow",autocomplete:!0,icon:(0,l.P)(o.r.WORKFLOW).name,category:v.SLACK,aliases:[W]}]:[],...M&&D?[{id:_.SlackShortcutCommandType.LIST,name:(0,c.O)(o.r.LIST),canonicalName:"/list",autocomplete:!0,icon:(0,l.P)(o.r.LIST).name,category:v.SLACK,aliases:[W]}]:[],{id:_.SlackShortcutCommandType.PROFILE,name:h.t("Profile"),canonicalName:"/profile",autocomplete:!0,icon:"user",category:v.SLACK,aliases:[W,h.t("user"),h.t("mention")]},{id:_.SlackShortcutCommandType.CHANNEL,name:h.t("Channel"),canonicalName:"/channel",autocomplete:!0,icon:"channel-add",category:v.SLACK,aliases:[W]},{id:_.SlackShortcutCommandType.TWO_COLUMNS,name:(0,c.O)(o.r.LAYOUT_2_COLUMNS),canonicalName:"/twocolumns",autocomplete:!0,icon:(0,l.P)(o.r.LAYOUT_2_COLUMNS).name,category:v.LAYOUT,aliases:[Y]},{id:_.SlackShortcutCommandType.THREE_COLUMNS,name:(0,c.O)(o.r.LAYOUT_3_COLUMNS),canonicalName:"/threecolumns",autocomplete:!0,icon:(0,l.P)(o.r.LAYOUT_3_COLUMNS).name,category:v.LAYOUT,aliases:[Y]},{id:_.SlackShortcutCommandType.CODEBLOCK,name:(0,c.O)(o.r.CODE_BLOCK),canonicalName:"/codeblock",autocomplete:!0,icon:(0,l.P)(o.r.CODE_BLOCK).name,category:v.LAYOUT,aliases:[Y]}]},"getCommandsV2");function I(g){return{...g,type:"client"}}u(I,"formatShortcut");const p=(0,t.Mz)([d.H7,g=>(0,a._Z)(g,"canvas_insert_workflow_menu")==="on",g=>(0,a._Z)(g,"canvas_date_mentions")==="on",g=>(0,a._Z)(g,"canvas_set_reminder_from_date_picker")==="on",g=>(0,a._Z)(g,"canvas_create_list_prototype")==="on",g=>(0,m.Il)(g),()=>(0,s.JK)(),(g,E)=>E],(g,E,f,O,C,M,D,P)=>T({currentTeam:g,experimentCanvasInsertWorkflowMenuGroupOn:E,experimentCanvasDateMentionsGroupOn:f,experimentCanvasSetReminderFromDatePickerOn:O,experimentCanvasCreateListPrototypeGroupOn:C,teamHasListsAccess:M}).map(I).filter(x=>P||!x.hideOnEmptyQuery))},9121476043:(z,A,e)=>{"use strict";e.d(A,{A:()=>l});var t=e(1031947056),n=e(9536404279),s=e(10127715),a=e(7606781622),c=e(3164289453),o=e(3110884894);const r=(0,t.Ay)("Remove a message and its timestamp",function(_,d){let{channelId:i,ts:m,threadTs:h,broadcastDelete:v=!1}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!(!i||!m))if(v)_((0,s.E$)({channelId:i,ts:m}));else{_((0,n.Np)({channelId:i,timestamp:m}));const y=!1,T=(0,a.Ld)(d(),i,m,y),I=T&&T.thread_ts||h;if(I){const p=(0,o.Iu)(i,I)||"";_((0,n.Np)({channelId:p,timestamp:m}))}_((0,s.QN)({message:{channel:i,ts:m}})),_((0,c.A)({channelId:i,item:T}))}});r.meta={name:"createThunk",key:"createThunkremoveMessageAndTimestamp",description:"Remove a message and its timestamp"};const l=r},3164289453:(z,A,e)=>{"use strict";e.d(A,{A:()=>c});var t=e(3297051565),n=e.n(t),s=e(2140362605);const a=(0,s.Ay)("(noop) Remove a pinned item via side-effect");a.meta={name:"createAction",key:"createActionremovePinnedItemCircular",description:"(noop) Remove a pinned item via side-effect"},a.propTypes=n().shape({item:n().object.isRequired,channelId:n().string.isRequired}).isRequired;const c=a},8391820676:(z,A,e)=>{"use strict";e.d(A,{A:()=>x});var t=e(6422693406),n=e(6696292586),s=e(8086952004),a=e(12126472),c=e(3398586081),o=e(5950652755),r=e(1031947056),l=e(6533394955),_=e(5795074931),d=e(8847766420),i=e(2155512519),m=e(1116859610),h=e(9101533895),v=e(9536404279),y=e(1407713935),T=e(1581380967),I=e(3110884894),p=e(10127715),g=e(3087402890),E=e(6704899486),f=e(796111729),O=e(8802876335);const C=1e3,M=u((W,Y,S)=>{if(Y==="Vall_threads")return(0,l.dispatchForTeamId)(W,(0,g.r8)()),t.K.resolve();const L=!1,w=(0,h.OL)((0,l.getStateByTeamId)(W),Y,L);if(!w)return t.K.resolve();if(S)return D(W,Y,S);const J=(0,y.mz)(w);return(0,l.dispatchForTeamId)(W,(0,i.Ay)({channelId:Y,type:J,oldest:null,latest:null,reason:"requestOfflineHistory"})).then(function(){let{msgs:G,hasMore:X,isLimited:te,pinCount:le,deleted:ve}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const Q=(0,l.getStateByTeamId)(W);(0,O.UJ)(Q)&&!(0,E.N)(Q,Y)&&!(0,E.N)(Q,(0,_.WR)(Q))||((0,l.dispatchForTeamId)(W,(0,v.Jt)({channelId:Y})),(0,l.dispatchForTeamId)(W,(0,m.A)({msgs:G,channelId:Y,isLimited:te,pinCount:le,hasMore:{hasMoreStart:X,hasMoreEnd:!1},oldest:null,latest:null,deleted:ve})),(0,n.A)(le)&&(0,l.dispatchForTeamId)(W,(0,T.K)({channelId:Y,count:le})))}).catch(G=>{(0,f.Ay)({state:(0,l.getStateByTeamId)(W)}).error(`Failed to fetch offline history for ${Y}: ${G}`)})},"fetchOfflineHistory");function D(W,Y,S){const L=(0,I.Iu)(Y,S);return(0,l.dispatchForTeamId)(W,(0,i.$b)({channelId:Y,threadTs:S,oldest:null,latest:null,reason:"requestOfflineHistory"})).then(function(){let{msgs:w,deleted:J,hasMore:G}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const X=(0,l.getStateByTeamId)(W);if((0,O.UJ)(X)&&!(0,E.N)(X,Y)&&!(0,E.N)(X,(0,_.WR)(X)))return;let te=w;const le=(0,s.A)(w,{ts:S});G&&(te=(0,a.A)(w,{ts:S})),(0,l.dispatchForTeamId)(W,(0,v.Jt)({channelId:L})),(0,l.dispatchForTeamId)(W,(0,m.A)({msgs:te,channelId:L,hasMore:{hasMoreStart:G,hasMoreEnd:!1},oldest:null,latest:null,deleted:J})),le&&(0,l.dispatchForTeamId)(W,(0,p.Kc)([le]))})}u(D,"fetchOfflineHistoryForThread");const P=(()=>{const W=(0,c.A)(()=>(0,o.A)(M,C),function(){for(var Y=arguments.length,S=new Array(Y),L=0;L<Y;L++)S[L]=arguments[L];return JSON.stringify(S)});return function(){for(var Y=arguments.length,S=new Array(Y),L=0;L<Y;L++)S[L]=arguments[L];return W(...S)(...S)}})(),k=(0,r.Ay)("Request offline history",function(W,Y){let{channelId:S,threadTs:L}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return P((0,d.ZT)(Y()),S,L)});k.meta={name:"createThunk",key:"createThunkrequestOfflineHistory",description:"Request offline history"},k.propTypes={};const x=k,F={fetchOfflineHistory:M,fetchOfflineHistoryForThread:D}},4587446194:(z,A,e)=>{"use strict";e.d(A,{NU:()=>N,e8:()=>b,Ay:()=>Pe,IY:()=>re});var t=e(2003990933),n=e(7174777686),s=e(3571452446),a=e(1649982175),c=e(3110884894),o=e(5795074931),r=e(8847766420),l=e(9536404279),_=e(9101533895),d=e(10127715),i=e(6483201417),m=e(6704899486),h=e(1031947056),v=e(796111729),y=e(9190452268),T=e(3855029223),I=e(3158767748),p=e(7715417323),g=e(9762304444);const E=(0,g.Ay)("TS.channels.read_only.stashAndFetchChannelPostingUpdates",p.A);var f=e(8737667238),O=e(662226046),C=e(9121476043),M=e(8391820676),D=e(6422693406),P=e(6580433553),k=e(6533394955),x=e(2872463257);const F={},W="cse-message-send",Y="cse-message-send";let S=u(class{_send(){var pe;const{message:q,trace:se,parentSpanId:ge}=this._activeRequest||{};(0,v.Ay)({teamId:this._teamId}).action("MESSAGE-Q",`Sending message with clientMsgId ${q==null?void 0:q.client_msg_id}`);const Oe=u(()=>{var Le;return(Le=this._store)===null||Le===void 0?void 0:Le.dispatch((0,P.A)({message:q,traceId:se==null?void 0:se.getTraceId(),parentSpanId:ge}))},"postMessageP");return(pe=this._maybeTraceMessageSend(Oe))===null||pe===void 0?void 0:pe.then(this._activeRequest?this._activeRequest.resolve:p.A).catch(this._activeRequest?this._activeRequest.reject:p.A).finally(()=>this.resolve(q))}_next(){if(this._activeRequest||!this._queue.length)return!1;this._activeRequest=this._queue.shift();const{messageEnqueueSpan:pe}=this._activeRequest||{};return pe==null||pe.addTags({count:this._queue.length}),pe==null||pe.close(),this._send(),(0,v.Ay)({teamId:this._teamId}).action("MESSAGE-Q",`Shifting queue, now has ${this._queue.length} messages`),!0}_maybeTraceMessageSend(pe){var q;if(!this.shouldTraceMessageSend())return pe();const se=(q=this._tracer)===null||q===void 0?void 0:q.createTrace({traceName:W,tags:{event_type:"/api/chat.postMessage"},samplingOptions:{sampleType:x.nl.ALWAYS}}),ge=u(()=>{var Le;se&&((Le=this._tracer)===null||Le===void 0||Le.clearTrace(se))},"onResolve"),Oe=u((Le,We)=>{var Re;const we={state:x.$m.ERROR};We.status&&(we.status=We.status),We.message&&(we.message=We.message),We.data&&We.data.error&&(we.reason=We.data.error),Le==null||Le.addTags(we),Le==null||Le.close(),se&&((Re=this._tracer)===null||Re===void 0||Re.reportTrace(se))},"onError");return se==null?void 0:se.traceFn({name:Y,onError:Oe,onResolve:ge},pe)}enqueue(pe){let{trace:q,parentSpanId:se}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new D.S((ge,Oe)=>{const Le=q==null?void 0:q.startSpan("message_send_attempt:enqueue",{parentSpanId:se});this._queue.push({message:pe,messageEnqueueSpan:Le,trace:q,parentSpanId:se,resolve:ge,reject:Oe}),(0,v.Ay)({teamId:this._teamId}).action("MESSAGE-Q",`Enqueueing message with clientMsgId ${pe.client_msg_id}, queue has ${this._queue.length} messages`),this._next()})}resolve(pe){return!pe||!this._activeRequest||!this._activeRequest.message||pe.client_msg_id!==this._activeRequest.message.client_msg_id?!1:((0,v.Ay)({teamId:this._teamId}).action("MESSAGE-Q",`Resolving active request with clientMsgId ${pe.client_msg_id}`),this._activeRequest=null,this._next())}shouldTraceMessageSend(){return this._tracer}constructor(pe){if(!pe)throw new Error("MessageQueue requires a teamId.");if(this._teamId=pe,this._activeRequest=null,this._queue=[],this._store=(0,k.getStoreInstanceByTeamId)(pe),!this._store)throw new Error(`MessageQueue requires a store; No store matching ${pe} found.`);const q=this._store.getState();this._tracer=(0,T.E)({state:q})}},"MessageQueue");function L(fe){return F[fe]||(F[fe]=new S(fe)),F[fe]}u(L,"getInstance");const w={MESSAGE_SEND_TRACE_LABEL:W,MESSAGE_SEND_SPAN_LABEL:Y};var J=e(9781145568),G=e(8802876335),X=e(5345057011),te=e(5774398667),le=e(4177200783),ve=e(7759525289),Q=e(4761125736);const Ae=6,ae=7,he=8,_e="restricted_action_read_only_channel",ee="restricted_action_thread_only_channel",de="restricted_action_non_threadable_channel",Ie="ekm_access_denied",ce="dlp_user_warning",j="message_limit_exceeded";var N;(function(fe){fe.BLOCK_FILES_LINK_TYPE="slack_connect_file_link_sharing_blocked",fe.BLOCK_CANVAS_CONTAIN_FILES_TYPE="slack_connect_canvas_contain_file_sharing_blocked",fe.BLOCK_CANVAS_CONTAIN_EMBEDDED_FILES_TYPE="slack_connect_canvas_contain_embedded_files_blocked",fe.BLOCK_LIST_CONTAIN_FILES_TYPE="slack_connect_list_contain_file_sharing_blocked"})(N||(N={}));var b;(function(fe){fe.SLACK_CONNECT_CANVAS_SHARING_BLOCKED="slack_connect_canvas_sharing_blocked",fe.SLACK_CONNECT_FILE_UPLOAD_SHARING_BLOCKED="slack_connect_file_upload_sharing_blocked",fe.SLACK_CONNECT_TEAM_BLOCKED="slack_connect_team_blocked"})(b||(b={}));const R={[_e]:Ae,[ee]:ae,[de]:he};function K(fe,pe){fe((0,d.Kc)([pe]));const q={channelId:pe.channel,timestamps:[pe.ts],oldest:pe.ts,hasMore:!1,append:!0};if(fe((0,l.VG)(q)),pe.thread_ts){const se=(0,c.Iu)(pe.channel,pe.thread_ts);fe((0,l.VG)({...q,channelId:se}))}}u(K,"addMsgToEnd");const B={};function $(fe,pe,q){B[fe]||(B[fe]={}),B[fe][pe]=q}u($,"addResolutionTimer");function Z(fe,pe){!B[fe]||!B[fe][pe]||(clearTimeout(B[fe][pe]),delete B[fe][pe])}u(Z,"cancelResolutionTimer");function re(fe,pe,q,se){const ge=(0,r.ZT)(fe())||"",Oe=(0,te.I)(fe(),se.client_msg_id);if(Oe){(0,v.Ay)({getState:fe}).action("MESSAGE",`Resolved a message with clientMsgId ${se.client_msg_id} in ${q.channel} with ts ${se.ts}`),pe((0,X.s)(Oe.clientMsgId)),Z(ge,Oe.clientMsgId),pe((0,C.A)({channelId:Oe.channelId,ts:Oe.ts}));const Le=!1;(0,_.OL)(fe(),q.channel,Le)&&pe((0,J.A)({channelId:q.channel,msgTs:q.ts,resent:!1}))}L(ge).resolve(se)}u(re,"resolveMessage");const Te="cse-message-send:send",Ce=(0,h.Ay)("Send a message",(fe,pe,q)=>{let{messageSendTrace:se,notificationTracePassthroughData:ge,skipDLPUserWarning:Oe,...Le}=q;const We=(0,T.E)({getState:pe});let Re,we;se&&(Re=se.startSpan("message_send_attempt:send"),we=se.startSpan("message_send_attempt:placeholder",{parentSpanId:Re==null?void 0:Re.getId()}));const Je=We.createMetricsTrace({label:"cse-message-send"});Je.count({name:Te,label:"pending"}),We.reportTrace(Je);const it=(0,I.A)(1),{channel:et,reply_broadcast:lt,thread_ts:nt,client_msg_id:at,xArgs:ze}=Le,Ke=(0,v.Ay)({getState:pe}),He=(0,r.ZT)(pe())||"",Ye=nt?{_hidden_reply:!0,_was_reply_broadcast:lt}:null,_t=at||(0,f.A)();ge&&(0,O.qe)(pe(),{notificationTracePassthroughData:ge,clientMsgId:_t});const vt=(0,Q._Z)(pe(),"fe_message_rendering_perf_m1")==="on",Tt=Le.blocks,Lt={...Le,...Ye,user:(0,o.WR)(pe()),showResend:!1,showCancel:!1,is_pending:!0,client_msg_id:_t,blocksProcessed:(0,ve.R)({blocks:Tt,experimentFeMessageRenderingPerfM1GroupOn:vt})};Ke.action("MESSAGE",`Sent a message to ${et} via HTTP, clientMsgId: ${_t}`);const ft={...Le,...ze,include_channel_perm_error:!0,client_msg_id:_t,skip_dlp_user_warning:Oe};it&&$(He,_t,window.setTimeout(()=>{if((0,te.I)(pe(),Lt.client_msg_id)){const nn=pe();(0,G.UJ)(nn)&&(0,y.Cy)({state:nn}).count("msg_send_placeholder_not_resolved_connected_60s")}},1e3*60));const mt=L((0,r.ZT)(pe())||"").enqueue(ft,{trace:se,parentSpanId:Re==null?void 0:Re.getId()});K(fe,Lt),fe((0,X.T)({clientMsgId:Lt.client_msg_id,channelId:Lt.channel,ts:Lt.ts})),nt||fe((0,i.A)({ts:null})),we==null||we.close();const Yt=(0,Q._Z)(pe(),"ecompl_custom_dlp_text")==="on";return mt.tap(()=>{const nn=pe();(!(0,G.UJ)(nn)||(0,m.N)(nn,et)||(0,m.N)(nn,(0,o.WR)(nn)))&&(fe((0,M.A)({channelId:et,threadTs:nt})),lt&&fe((0,M.A)({channelId:et}))),Je.count({name:Te,label:"success"}),We.reportTrace(Je),se&&(se.addTags({success:!0}),Re==null||Re.close(),We.reportTrace(se))}).catch(nn=>{const jt=(0,t.A)(nn,"data.error"),gn=Yt?(0,t.A)(nn,"data.dlp_custom_message"):void 0;Je.count({name:Te,label:"failure"}).setTag("error",jt||(nn==null?void 0:nn.message)),We.reportTrace(Je);const on=jt===Ie,Xt=jt===ce,rn=jt===j,Zt=Object.values(b).includes(jt)?jt:void 0,Ht=Object.values(N).includes(jt)?jt:void 0;if(!jt&&!(0,te.I)(pe(),Lt.client_msg_id)){Ke.info("MESSAGE","Ignoring non-backend chat.postMessage error since the message already came in over socket");return}const Bt=R[jt];let Qt=!0;const sn=!0,Mn=[Ae,ae,he,_e,ee,de];(0,n.A)(Mn,jt)&&(E(et,Bt,"send-message/sendMessage.catch"),Qt=!1),on&&(Qt=!1),Ht&&(Qt=!1),rn&&(Qt=!1,fe((0,le.A)())),Zt&&(Qt=!1);const ct="Message failed to send",yt=(0,s.A)(nn,["status","retryAfter","attempts","data.ok","data.error","args._x_reason","args.channel","args.ts","args.thread_ts","args.reply_broadcast"]);yt.client_msg_id=_t,yt.channel=et,yt.thread_ts=nt;const Rt=nn&&nn.status===429?"message_send_ratelimit":"message_send_fail";Ke.error(yt instanceof Error?yt:new Error(ct),`${ct}: ${jt} | ${JSON.stringify(yt)}`,{subtype:Rt});const xe=jt?(0,a.A)(yt,["response"]):nn;Ke.error("MESSAGE",ct,jt,xe);const Nt={...Lt,showResend:Qt,showCancel:sn,isEKMError:on,isDLPUserWarningError:Xt,canvasSharingError:Zt,blockFileLinkSharingError:Ht,...Yt?{dlpCustomMessage:gn}:{}};(0,te.I)(pe(),Lt.client_msg_id)?fe((0,d.Kc)([Nt])):K(fe,Nt),!Qt&&it&&Z(He,Lt.client_msg_id),se&&(Qt?(se.addTags({success:!1}),Re==null||Re.close(),We.reportTrace(se)):We.clearTrace(se))})});Ce.meta={name:"createThunk",key:"createThunksendMessage",description:"Send a message"};const Pe=Ce},5363983309:(z,A,e)=>{"use strict";e.d(A,{A:()=>h});var t=e(3134334389),n=e(7562930286),s=e(1031947056),a=e(6533394955),c=e(8847766420),o=e(2567914105),r=e(2375333597),l=e(8726613433),_=e(5258584090),d=e(9804928153);function i(){return i=Object.assign||function(v){for(var y=1;y<arguments.length;y++){var T=arguments[y];for(var I in T)Object.prototype.hasOwnProperty.call(T,I)&&(v[I]=T[I])}return v},i.apply(this,arguments)}u(i,"_extends");const h=u((v,y)=>(0,s.Ay)(`XWS open ${v.displayName} modal`,(T,I,p,g)=>{const{modalName:E,allowMultiple:f=!0,isStackable:O=!1,renderInChildWindow:C=!1}=y||{};let M,D=C;const P=g(_.S);if((P==null?void 0:P.windowRef.deref())!==d.J&&(P!=null&&P.windowId)&&(D=!0,M=P.windowId),!f&&E&&(0,o.wc)(I(),M).find(w=>{let{name:J}=w;return J===E}))return;const k=(0,c.ZT)(I()),x=(0,l.vB)(I()),F=(0,a.getStoreInstanceByTeamId)(k);let W,Y=t.createElement(v,i({},p,{closeModal:()=>W==null?void 0:W()}));D||(Y=t.createElement(n.Kq,{store:F},Y));let S;return D?S=T((0,r.q)({element:Y,name:E||void 0,isStackable:O})):S=(0,a.dispatchForTeamId)(x,(0,r.q)({element:Y,name:E||void 0,isStackable:O})),W=S.close,S}),"createXWSModalThunk")},9488048047:(z,A,e)=>{"use strict";e.d(A,{z:()=>x});var t=e(166097325),n=e(1031947056),s=e(6601726845),a=e(1839426804),c=e(2708016366),o=e(9327462766),r=e(296612764),l=e(8585228397),_=e(2768794130),d=e(3653269953),i=e(2036289572),m=e(2505585477),h=e(6729174604),v=e(832411022);const y=u((F,W,Y)=>F&&Object.values(W).includes(F)?F:W[Y],"validateMessageSearchSort"),T=u((F,W,Y)=>F&&Object.values(W).includes(F)?F:W[Y],"validateFileSearchSort"),I=u((F,W,Y)=>F&&Object.values(W).includes(F)?F:W[Y],"validateChannelSearchSort"),p=u((F,W,Y)=>F&&Object.values(W).includes(F)?F:W[Y],"validatePeopleSearchSort"),g=u((F,W,Y)=>F&&Object.values(W).includes(F)?F:W[Y],"validateResultCountToggle");var E=e(57760199),f=e(197186845),O=e(30533254),C=e(5446033290),M=e(532953487),D=e(2864477491),P=e(8847766420),k=e(5513050121);const x=(0,n.Ay)("Runs search from given encoded search state string",(F,W,Y)=>{let{encodedSearchString:S}=Y;if(!S)return;const L=W(),w=(0,M.$)(L),J=(0,D.GJ)(L),G=v.Jx.OMNISWITCHER;if(J&&S===w)return;const X=(0,s.Wj)(S),{displayQuery:te,requestQuery:le,tab:ve,page:Q,messageAndFileSearchExcludeBots:Ae,messageAndFileSearchOnlyMyChannels:ae,activeEnterpriseTeamIdFilter:he,channelSearchFilterType:_e,channelSearchOrgFilters:ee,channelSearchHideMemberChannels:de,peopleSearchFilterType:Ie,peopleSearchOrgFilters:ce,peopleSearchHideDeactivatedUsers:j,messageSearchSort:N,fileSearchSort:b,channelSearchSort:R,peopleSearchSort:K,resultCountToggle:B,peopleSearchLocationFilters:$,peopleSearchDivisionFilters:Z,peopleSearchDepartmentFilters:re,peopleSearchTitleFilters:Te,peopleSearchCelebrationFilters:Ce}=X;F((0,h.N9)({query:te,inputId:G}));const Pe=(0,O.vA)(L,le);F((0,i.c3)({queryFilter:Pe}));const fe=y(N,v.kK,"relevantMessages"),pe=T(b,v.VU,"relevant"),q=I(R,v.aJ,"relevant"),se=p(K,v.iO,"relevant"),ge=g(B,v.LV,20);fe!==(0,o.WJ)(L)&&F((0,r.g)({sort:fe})),pe!==(0,l.r)(L,v.c5.FILES)&&F((0,_.f)({sort:pe})),q!==(0,o.Kn)(L)&&F((0,c.Ak)({sort:q})),se!==(0,o.y6)(L)&&F((0,c.Yn)({sort:se})),ge!==(0,o.jn)(L)&&F((0,c.BS)({count:ge})),F((0,a.O6)({tab:ve})),F((0,a.BL)({moduleType:v.Sv[ve],page:Q}));const{displayQuery:Oe,requestQuery:Le,messageAndFileSearchExcludeBots:We,messageAndFileSearchOnlyMyChannels:Re,activeEnterpriseTeamIdFilter:we,channelSearchFilterType:Je,channelSearchOrgFilters:it,channelSearchHideMemberChannels:et,peopleSearchFilterType:lt,peopleSearchOrgFilters:nt,peopleSearchHideDeactivatedUsers:at,messageSearchSort:ze,fileSearchSort:Ke,channelSearchSort:He,peopleSearchSort:Ye,resultCountToggle:_t,peopleSearchDepartmentFilters:vt,peopleSearchDivisionFilters:Tt,peopleSearchLocationFilters:Lt,peopleSearchTitleFilters:ft,peopleSearchCelebrationFilters:mt}=(0,s.Wj)(w||""),Yt=(0,m._G)(L,{module:ve});if(ve===v.gs.CHANNELS&&(_e&&F((0,a.Ev)({type:_e})),ee&&F((0,a.H)({orgFilters:ee}))),ve===v.gs.PEOPLE&&(Ie&&F((0,a.kC)({type:Ie})),ce&&F((0,a.XT)({orgFilters:ce})),$&&F((0,a.Ic)({locations:$})),Te&&F((0,a.t_)({titles:Te})),re&&F((0,a.Vm)({departments:re})),Z&&F((0,a.qV)({divisions:Z})),Ce&&F((0,a.H4)({celebrations:Ce}))),Ae!==We&&F((0,c.V1)({value:!!Ae})),ae!==Re&&F((0,c.le)({value:!!ae})),he!==we&&he&&F((0,a.y0)({selectedEnterpriseTeamId:he})),Ie===v.Dx.guests){const jt=(0,P.s_)(L);jt&&F((0,a.y0)({selectedEnterpriseTeamId:jt}))}de!==et&&F((0,c.kZ)({value:!!de})),j!==at&&F((0,c.sA)({value:!!j})),fe!==ze&&F((0,r.g)({sort:fe})),pe!==Ke&&F((0,_.f)({sort:pe})),q!==He&&F((0,c.Ak)({sort:q})),se!==Ye&&F((0,c.Yn)({sort:se})),ge!==_t&&F((0,c.BS)({count:ge}));const nn=Ae!==We||ae!==Re||he!==we||_e!==Je||!(0,t.A)(ee,it)||de!==et||Ie!==lt||!(0,t.A)(ce,nt)||j!==at||!(0,t.A)($,Lt)||!(0,t.A)(Te,ft)||!(0,t.A)(Z,Tt)||!(0,t.A)(re,vt)||!(0,t.A)(Ce,mt);le!==Le||te!==Oe?F((0,d.A)({query:le,page:Q,encodedSearchString:S})):Yt!=null&&Yt.items&&(Yt!=null&&Yt.items[Q])?nn?((0,E.d1)(F,W,"search-filters-history-stack"),F((0,C.b)({value:S}))):fe!==ze?(F((0,f.u3)({module:"messages",reason:"search-message-sort-changed-history-stack",context:k.Oj.MessagesTab})),F((0,C.b)({value:S}))):pe!==Ke?(F((0,f.u3)({module:"files",reason:"search-files-sort-changed-history-stack",context:k.Oj.FilesTab})),F((0,C.b)({value:S}))):q!==He?(F((0,f.u3)({module:"channels",reason:"search-channels-sort-changed-history-stack",context:k.Oj.ChannelsTab})),F((0,C.b)({value:S}))):se!==Ye?(F((0,f.u3)({module:"people",reason:"search-people-sort-changed-history-stack",context:k.Oj.PeopleTab})),F((0,C.b)({value:S}))):ge!==_t?((0,E.d1)(F,W,"result-count-toggle-history-stack"),F((0,C.b)({value:S}))):F((0,C.b)({value:S})):F((0,d.A)({query:le,module:v.Sv[ve],page:Q,encodedSearchString:S}))});x.meta={name:"createThunk",key:"createThunkrunSearchFromEncodedSearchState",description:"Runs search from given encoded search state string"}},8010516507:(z,A,e)=>{"use strict";e.d(A,{L:()=>o});var t=e(1031947056),n=e(5446033290),s=e(6601726845),a=e(5267010247),c=e(8822892075);const o=(0,t.Ay)("Adds a search history item and updates the url with its id",(r,l)=>{const _=l(),d=(0,s._t)(_);d&&(r((0,n.b)({value:d})),r((0,a.o)((0,c.oV)(d))))});o.meta={name:"createThunk",key:"createThunkrunSearchFromReduxState",description:"Adds a search history item and updates the url with its id"}},57760199:(z,A,e)=>{"use strict";e.d(A,{AW:()=>W,CK:()=>le,F5:()=>M,HE:()=>te,HX:()=>X,Hj:()=>F,J0:()=>Q,Jv:()=>g,O7:()=>G,OH:()=>L,T9:()=>C,VX:()=>E,V_:()=>S,YV:()=>de,_I:()=>O,ap:()=>he,bQ:()=>P,cI:()=>_e,cf:()=>w,d1:()=>p,dY:()=>Y,g:()=>D,iX:()=>x,m0:()=>ce,s7:()=>ae,sf:()=>k,v6:()=>Ae,w2:()=>f,wr:()=>ee,yH:()=>ve,yU:()=>J});var t=e(1031947056),n=e(197186845),s=e(2036289572),a=e(2505585477),c=e(7435861102),o=e(832411022),r=e(296612764),l=e(2768794130),_=e(5234724663),d=e(9436609557),i=e(1839426804),m=e(2708016366),h=e(8847766420),v=e(8010516507),y=e(304127728),T=e(8538260492),I=e(5513050121);function p(N,b,R){let K=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;const B=(0,a.iq)(b()),$=B?B.query:"";return N((0,s.p4)({windowId:y.I})),K&&N((0,c.z)()),N((0,n.Ad)({query:$,reason:R,fetchSuggestions:!0}))}u(p,"refetchAllSearchResults");const g=(0,t.Ay)("Message/file search: exclude bots checkbox changed",(N,b,R)=>{let{value:K}=R;N((0,m.V1)({value:K})),p(N,b,"search-exclude-bots-changed"),N((0,v.L)())});g.meta={name:"createThunk",key:"createThunkmessageAndFileSearchExcludeBotsChanged",description:"Message/file search: exclude bots checkbox changed"};const E=(0,t.Ay)("Message/file search: only my channels checkbox changed",(N,b,R)=>{let{value:K}=R;N((0,m.le)({value:K})),K&&N((0,m.kZ)({value:!1})),p(N,b,"search-only-my-channels-changed"),N((0,v.L)())});E.meta={name:"createThunk",key:"createThunksearchOnlyMyChannelsChanged",description:"Message/file search: only my channels checkbox changed"};const f=(0,t.Ay)("Channel search: hide member channels flag changed",(N,b,R)=>{let{value:K,refetch:B=!0}=R;N((0,m.kZ)({value:K})),K&&N((0,m.le)({value:!1})),B&&p(N,b,"search-hide-member-channels-changed"),N((0,v.L)())});f.meta={name:"createThunk",key:"createThunkchannelSearchHideMemberChannelsChanged",description:"Channel search: hide member channels flag changed"};const O=(0,t.Ay)("Message search: sort changed",(N,b,R)=>{let{sort:K,shouldUpdateUrl:B=!0,shouldClogSearchSort:$=!0}=R;$&&N((0,_.Yj)({sortValue:K,entity:"messages"})),N((0,r.g)({sort:K})),N((0,n.u3)({module:"messages",reason:"search-messages-sort-changed",context:I.Oj.MessagesTab})),B&&N((0,v.L)())});O.meta={name:"createThunk",key:"createThunkmessageSearchSortChanged",description:"Message search: sort changed"};const C=(0,t.Ay)("File search: sort changed",(N,b,R)=>{let{sort:K,shouldUpdateUrl:B=!0,shouldClogSearchSort:$=!0}=R;$&&N((0,_.Yj)({sortValue:K,entity:"files"})),N((0,l.f)({sort:K})),N((0,n.u3)({module:"files",reason:"search-files-sort-changed",context:I.Oj.FilesTab})),B&&N((0,v.L)())});C.meta={name:"createThunk",key:"createThunkfileSearchSortChanged",description:"File search: sort changed"};const M=(0,t.Ay)("Canvas search: sort changed",(N,b,R)=>{let{sort:K,shouldUpdateUrl:B=!0,shouldClogSearchSort:$=!0}=R;$&&N((0,_.Yj)({sortValue:K,entity:"files"})),N((0,l.f)({sort:K})),N((0,n.u3)({module:"canvases",reason:"search-canvases-sort-changed",context:I.Oj.CanvasesTab})),B&&N((0,v.L)())});M.meta={name:"createThunk",key:"createThunkcanvasSearchSortChanged",description:"Canvas search: sort changed"};const D=(0,t.Ay)("Lists search: sort changed",(N,b,R)=>{let{sort:K,shouldUpdateUrl:B=!0,shouldClogSearchSort:$=!0}=R;$&&N((0,_.Yj)({sortValue:K,entity:"lists"})),N((0,l.f)({sort:K})),N((0,n.u3)({module:"lists",reason:"search-lists-sort-changed",context:I.Oj.ListsTab})),B&&N((0,v.L)())});D.meta={name:"createThunk",key:"createThunklistsSearchSortChanged",description:"Lists search: sort changed"};const P=(0,t.Ay)("List records search: sort changed",(N,b,R)=>{let{sort:K,shouldUpdateUrl:B=!0,shouldClogSearchSort:$=!0}=R;$&&N((0,_.Yj)({sortValue:K,entity:"listRecords"})),N((0,l.f)({sort:K})),N((0,n.u3)({module:"listRecords",reason:"search-list-records-sort-changed",context:I.Oj.ListsTab})),B&&N((0,v.L)())});P.meta={name:"createThunk",key:"createThunklistRecordsSearchSortChanged",description:"List records search: sort changed"};const k=(0,t.Ay)("Channel search: sort changed",(N,b,R)=>{let{sort:K,shouldUpdateUrl:B=!0,shouldClogSearchSort:$=!0}=R;$&&N((0,_.Yj)({sortValue:K,entity:"channels"})),N((0,m.Ak)({sort:K})),N((0,n.u3)({module:"channels",reason:"search-channels-sort-changed",context:I.Oj.ChannelsTab})),B&&N((0,v.L)())});k.meta={name:"createThunk",key:"createThunkchannelSearchSortChanged",description:"Channel search: sort changed"};const x=(0,t.Ay)("People search: sort changed",(N,b,R)=>{let{sort:K,shouldUpdateUrl:B=!0,shouldClogSearchSort:$=!0}=R;$&&N((0,_.Yj)({sortValue:K,entity:"people"})),N((0,m.Yn)({sort:K})),N((0,n.u3)({module:"people",reason:"search-people-sort-changed",context:I.Oj.PeopleTab})),B&&N((0,v.L)())});x.meta={name:"createThunk",key:"createThunkpeopleSearchSortChanged",description:"People search: sort changed"};const F=(0,t.Ay)("result count toggle changed",(N,b,R)=>{let{count:K}=R;N((0,m.BS)({count:K})),p(N,b,"result-count-toggle-changed",!1),N((0,i.Cr)({windowId:y.I})),N((0,i.Di)({windowId:y.I})),N((0,v.L)())});F.meta={name:"createThunk",key:"createThunkresultCountToggleChanged",description:"result count toggle changed"};const W=(0,t.Ay)("Channel search: filter type changed",(N,b,R)=>{let{type:K}=R;N((0,i.Ev)({type:K})),p(N,b,"search-channels-filter-type-changed"),N((0,v.L)())});W.meta={name:"createThunk",key:"createThunkchannelSearchFilterTypeChanged",description:"Channel search: filter type changed"};const Y=(0,t.Ay)("Channel search: filter type changed",(N,b,R)=>{let{type:K}=R;N((0,i.HR)({type:K})),p(N,b,"search-channels-filter-record-type-changed"),N((0,v.L)())});Y.meta={name:"createThunk",key:"createThunkchannelSearchFilterRecordTypeChanged",description:"Channel search: filter type changed"};const S=(0,t.Ay)("All of search: search by selected enterprise team id",(N,b,R)=>{let{value:K,refetch:B=!0}=R;N((0,i.y0)({selectedEnterpriseTeamId:K})),B&&p(N,b,"search-only-by-enterprise-team-id"),N((0,v.L)())});S.meta={name:"createThunk",key:"createThunksearchOnlyByEnterpriseTeamId",description:"All of search: search by selected enterprise team id"};const L=(0,t.Ay)("Channel search: bulk update an external org filter",(N,b,R)=>{let{teamIds:K}=R;const B=b(),$=(0,d.tL)(B);N((0,i.RR)({teamIds:Array.from(new Set([...$,...K]))})),N((0,i.H)({orgFilters:K})),p(N,b,"search-channels-org-filter-bulk-changed"),N((0,v.L)())});L.meta={name:"createThunk",key:"createThunksetChannelSearchOrgFilter",description:"Channel search: bulk update an external org filter"};const w=(0,t.Ay)("Channel search: update an external org filter",(N,b,R)=>{let{teamId:K,value:B}=R;const $=b();let Z=[...(0,d.lB)($)];const re=(0,d.tL)($);B?Z.push(K):Z=Z.filter(Te=>Te!==K),N((0,i.RR)({teamIds:Array.from(new Set([...re,K]))})),N((0,i.H)({orgFilters:Z})),p(N,b,"search-channels-org-filter-changed"),N((0,v.L)())});w.meta={name:"createThunk",key:"createThunktoggleChannelSearchOrgFilter",description:"Channel search: update an external org filter"};const J=(0,t.Ay)("People search: bulk update an external org filter",(N,b,R)=>{let{teamIds:K}=R;const B=b(),$=(0,d.tw)(B);N((0,i.PZ)({teamIds:Array.from(new Set([...$,...K]))})),N((0,i.XT)({orgFilters:K})),p(N,b,"search-people-org-filter-changed"),N((0,v.L)())});J.meta={name:"createThunk",key:"createThunksetPeopleSearchOrgFilter",description:"People search: bulk update an external org filter"};const G=(0,t.Ay)("People search: update an external org filter",(N,b,R)=>{let{teamId:K,value:B}=R;const $=b();let Z=[...(0,d.fL)($)];const re=(0,d.tw)($);B?Z.push(K):Z=Z.filter(Te=>Te!==K),N((0,i.PZ)({teamIds:Array.from(new Set([...re,K]))})),N((0,i.XT)({orgFilters:Z})),p(N,b,"search-people-org-filter-changed"),N((0,v.L)())});G.meta={name:"createThunk",key:"createThunktogglePeopleSearchOrgFilter",description:"People search: update an external org filter"};const X=(0,t.Ay)("People search: bulk update location filter",(N,b,R)=>{let{values:K}=R;N((0,i.Ic)({locations:K})),p(N,b,"search-people-location-filter-changed"),N((0,v.L)())});X.meta={name:"createThunk",key:"createThunksetPeopleSearchLocationFilter",description:"People search: bulk update location filter"};const te=(0,t.Ay)("People search: update location filter",(N,b,R)=>{let{location:K,value:B}=R;const $=b();let Z=[...(0,d.aJ)($)];B?Z.push(K):Z=Z.filter(re=>re!==K),N((0,i.Ic)({locations:Z})),p(N,b,"search-people-location-filter-changed"),N((0,v.L)())});te.meta={name:"createThunk",key:"createThunktogglePeopleSearchLocationFilter",description:"People search: update location filter"};const le=(0,t.Ay)("People search: bulk update title filter",(N,b,R)=>{let{values:K}=R;N((0,i.t_)({titles:K})),p(N,b,"search-people-title-filter-changed"),N((0,v.L)())});le.meta={name:"createThunk",key:"createThunksetPeopleSearchTitleFilter",description:"People search: bulk update title filter"};const ve=(0,t.Ay)("People search: update title filter",(N,b,R)=>{let{title:K,value:B}=R;const $=b();let Z=[...(0,d.LX)($)];B?Z.push(K):Z=Z.filter(re=>re!==K),N((0,i.t_)({titles:Z})),p(N,b,"search-people-title-filter-changed"),N((0,v.L)())});ve.meta={name:"createThunk",key:"createThunktogglePeopleSearchTitleFilter",description:"People search: update title filter"};const Q=(0,t.Ay)("People search: bulk update division filter",(N,b,R)=>{let{values:K}=R;N((0,i.qV)({divisions:K})),p(N,b,"search-people-division-filter-changed"),N((0,v.L)())});Q.meta={name:"createThunk",key:"createThunksetPeopleSearchDivisionFilter",description:"People search: bulk update division filter"};const Ae=(0,t.Ay)("People search: update division filter",(N,b,R)=>{let{division:K,value:B}=R;const $=b();let Z=[...(0,d.YM)($)];B?Z.push(K):Z=Z.filter(re=>re!==K),N((0,i.qV)({divisions:Z})),p(N,b,"search-people-division-filter-changed"),N((0,v.L)())});Ae.meta={name:"createThunk",key:"createThunktogglePeopleSearchDivisionFilter",description:"People search: update division filter"};const ae=(0,t.Ay)("People search: bulk update department filter",(N,b,R)=>{let{values:K}=R;N((0,i.Vm)({departments:K})),p(N,b,"search-people-department-filter-changed"),N((0,v.L)())});ae.meta={name:"createThunk",key:"createThunksetPeopleSearchDepartmentFilter",description:"People search: bulk update department filter"};const he=(0,t.Ay)("People search: update department filter",(N,b,R)=>{let{department:K,value:B}=R;const $=b();let Z=[...(0,d.DL)($)];B?Z.push(K):Z=Z.filter(re=>re!==K),N((0,i.Vm)({departments:Z})),p(N,b,"search-people-department-filter-changed"),N((0,v.L)())});he.meta={name:"createThunk",key:"createThunktogglePeopleSearchDepartmentFilter",description:"People search: update department filter"};const _e=(0,t.Ay)("People search: bulk update celebration filter",(N,b,R)=>{let{values:K}=R;N((0,i.H4)({celebrations:K})),p(N,b,"search-people-celebration-filter-changed"),N((0,v.L)())});_e.meta={name:"createThunk",key:"createThunksetPeopleSearchCelebrationFilter",description:"People search: bulk update celebration filter"};const ee=(0,t.Ay)("People search: update celebration filter",(N,b,R)=>{let{celebration:K,value:B}=R;const $=b();let Z=[...(0,d.Lq)($)];B?Z.push(K):Z=Z.filter(re=>re!==K),N((0,i.H4)({celebrations:Z})),p(N,b,"search-people-celebration-filter-changed"),N((0,v.L)())});ee.meta={name:"createThunk",key:"createThunktogglePeopleSearchCelebrationFilter",description:"People search: update celebration filter"};const de=(0,t.Ay)("People search: filter type changed",(N,b,R)=>{let{type:K,refetch:B=!0}=R;const $=b(),Z=(0,h.s_)($),re=(0,d.Xh)($);N((0,i.kC)({type:K})),K===o.Dx.guests&&Z?N((0,i.y0)({selectedEnterpriseTeamId:Z})):K===T.Qg.ORG_OWNERS||K===T.Qg.ORG_ADMINS?N((0,i.y0)({selectedEnterpriseTeamId:""})):(K===T.Qg.WORKSPACE_OWNERS||K===T.Qg.WORKSPACE_ADMINS)&&!re&&Z&&N((0,i.y0)({selectedEnterpriseTeamId:Z})),B&&p(N,b,"search-people-filter-type-changed"),N((0,v.L)())});de.meta={name:"createThunk",key:"createThunkpeopleSearchFilterTypeChanged",description:"People search: filter type changed"};const Ie=(0,t.Ay)("People search: custom filter changed",(N,b,R)=>{let{id:K,value:B,checked:$}=R;N((0,i.FI)({id:K,value:B,checked:$})),p(N,b,"search-people-custom-filter-changed")});Ie.meta={name:"createThunk",key:"createThunkpeopleSearchCustomFilterChanged",description:"People search: custom filter changed"};const ce=(0,t.Ay)("People search: hide deactivated users pref changed",(N,b,R)=>{let{value:K,refetch:B=!0}=R;N((0,m.sA)({value:K})),B&&p(N,b,"search-people-hide-deactivated-users-changed"),N((0,v.L)())});ce.meta={name:"createThunk",key:"createThunkpeopleSearchHideDeactivatedUsersChanged",description:"People search: hide deactivated users pref changed"};const j=(0,t.Ay)("People search: timezone filter changed",(N,b,R)=>{let{label:K,value:B,checked:$}=R;N((0,i.pU)({label:K,value:B,checked:$})),p(N,b,"search-people-timezone-filter-changed")});j.meta={name:"createThunk",key:"createThunkpeopleSearchTimezoneFilterChanged",description:"People search: timezone filter changed"}},2708016366:(z,A,e)=>{"use strict";e.d(A,{Ak:()=>c,BS:()=>r,V1:()=>_,Yn:()=>o,kZ:()=>a,le:()=>d,sA:()=>l});var t=e(1031947056),n=e(387484329),s=e(832411022);const a=(0,t.Ay)("Channel search: set hide my channels",(i,m,h)=>{let{value:v}=h;i((0,n.AZ)({pref:s.gT,value:v}))});a.meta={name:"createThunk",key:"createThunksetChannelSearchHideMemberChannels",description:"Channel search: set hide my channels"};const c=(0,t.Ay)("Channel Search: set sort method",(i,m,h)=>{let{sort:v}=h;i((0,n.AZ)({pref:s.UB,value:v}))});c.meta={name:"createThunk",key:"createThunksetChannelSearchSort",description:"Channel Search: set sort method"};const o=(0,t.Ay)("People Search: set sort method",(i,m,h)=>{let{sort:v}=h;i((0,n.AZ)({pref:s.gZ,value:v}))});o.meta={name:"createThunk",key:"createThunksetPeopleSearchSort",description:"People Search: set sort method"};const r=(0,t.Ay)("Setting result Count Toggle",(i,m,h)=>{let{count:v}=h;i((0,n.AZ)({pref:"result_count_toggle",value:v}))});r.meta={name:"createThunk",key:"createThunksetResultCountToggle",description:"Setting result Count Toggle"};const l=(0,t.Ay)("People search: set hiding deactivated users",(i,m,h)=>{let{value:v}=h;i((0,n.AZ)({pref:s.Sj,value:v}))});l.meta={name:"createThunk",key:"createThunksetPeopleSearchHideDeactivatedUsers",description:"People search: set hiding deactivated users"};const _=(0,t.Ay)("Message/File search: set exclude bots",(i,m,h)=>{let{value:v}=h;i((0,n.AZ)({pref:s.jv,value:v}))});_.meta={name:"createThunk",key:"createThunksetMessageAndFileSearchExcludeBots",description:"Message/File search: set exclude bots"};const d=(0,t.Ay)("Message/File search: search only my channels",(i,m,h)=>{let{value:v}=h;i((0,n.AZ)({pref:s.wA,value:v}))});d.meta={name:"createThunk",key:"createThunksetSearchOnlyMyChannelsChanged",description:"Message/File search: search only my channels"}},296612764:(z,A,e)=>{"use strict";e.d(A,{g:()=>o});var t=e(1031947056),n=e(387484329),s=e(796111729);const a="IMPROVED_SEARCH",c="search_sort",o=(0,t.Ay)("Message Search: set sort method",(r,l,_)=>{let{sort:d}=_;(0,s.Ay)({getState:l}).info(a,`Set message sort method. messageSort: ${d}`),r((0,n.AZ)({pref:c,value:d}))});o.meta={name:"createThunk",key:"createThunksetMessageSort",description:"Message Search: set sort method"}},2371143272:(z,A,e)=>{"use strict";e.d(A,{b:()=>c,i:()=>a});var t=e(3398586081),n=e(3530725200),s=e(7139225017);const a="sentry_fe_perf",c=(0,t.A)(()=>(0,s.A)()?!1:(0,n.fW)(a))},7206394193:(z,A,e)=>{"use strict";e.d(A,{A:()=>r});var t=e(8571983633),n=e(9686962598),s=e(6926388022),a=e(1527536225),c=e(5219503691);const o=(0,a.Ay)("Logs helpful messages to the console if you do something incorrect",(l,_,d)=>{if((0,t.A)(d)||(0,n.A)(d))return c.Qs&&(0,s.z3)("It looks like you dispatched null or undefined, instead of an action or a thunk. Check the stack trace of this error to see where this mistake is occurring."),null;if(d.isThunkCreator||d.isActionCreator){if(c.Qs){const i=d.isThunkCreator?"thunk":"action",m=d.meta?d.meta.name:`${i}Creator`;(0,s.z3)(`
	It looks like you dispatched a ${i} creator instead of the ${i} itself!
	This is a common mistake, and the solution is to call dispatch(${m}(payload)) instead of just dispatch(${m}), note the extra parens at the end.
				`)}return null}return(0,c.ZR)(d),_(d)});o.meta={name:"createMiddleware",key:"createMiddlewarehelpfulMessagingMiddleware",description:"Logs helpful messages to the console if you do something incorrect"};const r=o},773865333:(z,A,e)=>{"use strict";e.d(A,{A:()=>_});var t=e(862210999),n=e(796111729),s=e(4724591729),a=e(1527536225),c=e(4423055085);let o=[];const r=(0,n.Wo)(),l=(0,a.Ay)("Allows devs to get console logging or trigger breakpoints when state they care about changes",(m,h,v)=>{const y=[],T=m.getState();o.forEach(g=>{y.push(g(T,v))});const I=h(v),p=m.getState();return o.forEach((g,E)=>{const f=g(p,v);if(y[E]!==f){const O=["Redux Watcher:",`Value has changed! 
Action: `,v,`
Before: `,y[E],`
After:  `,f];if(y[E]!==void 0&&f!==void 0){const C=y[E]===void 0?{}:y[E],M=f===void 0?{}:f;O.push(`
Diff: `,Object.keys({...C,...M}).filter(D=>C[D]!==M[D]).map(D=>({key:D,before:C[D],after:M[D]})))}if(r.warn(...O),(0,s.Cu)()||(0,s.b3)())debugger}}),I});l.meta={name:"createMiddleware",key:"createMiddlewarereduxWatcherMiddleware",description:"Allows devs to get console logging or trigger breakpoints when state they care about changes"};const _=l;function d(m){if(!(0,t.A)(m)){r.error("watcherFn passed in to addWatcher must be a function");return}o.push(m)}u(d,"addWatcher");function i(){o=[]}u(i,"clearAllWatchers"),(0,c.ul)("reduxWatcher",{addWatcher:d,clearAllWatchers:i})},7156104699:(z,A,e)=>{"use strict";e.d(A,{N:()=>m,A:()=>i});var t=e(1527536225),n=e(6152845331),s=e(9829579108);const a=(0,s.Ay)(h=>{var v;return h==null||(v=h.sideEffects)===null||v===void 0?void 0:v.sideEffectsMap});a.meta={name:"createSelector",key:"createSelectorgetSideEffectsMap",description:h=>{var v;return h==null||(v=h.sideEffects)===null||v===void 0?void 0:v.sideEffectsMap}};const c=(0,s.Ay)(h=>{var v;return h==null||(v=h.clientSideEffects)===null||v===void 0?void 0:v.clientSideEffectsMap});c.meta={name:"createSelector",key:"createSelectorgetClientSideEffectsMap",description:h=>{var v;return h==null||(v=h.clientSideEffects)===null||v===void 0?void 0:v.clientSideEffectsMap}};var o=e(796111729),r=e(6422693406);function l(){return(0,t.Ay)("Handle client side effects",(h,v,y)=>{var T;if(!((T=y.__test)===null||T===void 0)&&T.disableSideEffects)return v(y);const I=h.getState(),p=c(I);return d({store:h,action:y,sideEffectsMap:p}),v(y)})}u(l,"createClientSideEffectsMiddleware");function _(){return(0,t.Ay)("Handle side effects",(h,v,y)=>{var T;if(!((T=y.__test)===null||T===void 0)&&T.disableSideEffects)return v(y);const I=h.getState(),p=a(I);return d({store:h,action:y,sideEffectsMap:p}),v(y)})}u(_,"createSideEffectsMiddleware");function d(h){let{store:v,action:y,sideEffectsMap:T}=h;const I=T&&T[y.type],p=u(g=>((0,n.S$)(y,g),v.dispatch(g)),"wrappedDispatch");I!=null&&I.length&&r.S.resolve().then(()=>{I.forEach(g=>{if(!g)return;const{thunk:E}=g;try{p(E(y))}catch(f){(0,o.Ay)({getState:v.getState}).error("SIDE-EFFECTS",`Error in side effect for '${y.type}'`,f,{subtype:"side_effect_error"})}})})}u(d,"runSideEffects");const i=_(),m=l()},8333842125:(z,A,e)=>{"use strict";e.d(A,{A:()=>_});var t=e(1416482128),n=e(4724591729),s=e(4887323608),a=e(4157777698);const c=u(d=>{switch(d.type){case a.f0.getType():return{...d,payload:"Channel bulk add payload is too big to output to redux devtools"};default:return d}},"actionSanitizer"),o=(0,s.A)()?void 0:()=>({apologies:"Serializing our large state kept crashing redux devtools. I hope to bring it back someday, but for now you can see the state by using `TS.redux.getState()` in the console"}),l={autoPause:!0,actionSanitizer:c,stateSanitizer:o,maxAge:1e3,features:{pause:!0}};function _(d){let{teamOrEnterpriseId:i,appName:m="",customEnhancers:h,middlewares:v,disableDevTools:y}=d;return(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__&&!y&&((0,n.Cu)()||(0,n.b3)())?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({...l,name:["Slack",i,m].filter(p=>p&&p.length>0).join("-")}):t.Zz)((0,t.Tw)(...v??[]),...h??[])}u(_,"configureEnhancers")},582577127:(z,A,e)=>{"use strict";e.d(A,{g:()=>n});var t=e(3371371503);function n(s){const o={sideEffectsMap:{},clientSideEffectsMap:{}};return!s||!s.length?o:s.reduce((r,l)=>{const{actions:_,scope:d}=l;let i;switch(d){case t.RE.client:i=r.clientSideEffectsMap;break;default:case t.RE.workspace:i=r.sideEffectsMap;break}return _.forEach(m=>{var h;const v=m==null||(h=m.getType)===null||h===void 0?void 0:h.call(m);v&&(i[v]=i[v]||[],i[v].push(l))}),r},o)}u(n,"generateSideEffectsMaps")},2732935554:(z,A,e)=>{"use strict";e.d(A,{A:()=>c});var t=e(1185969935),n=e(1004520977);const s={hasKeyboardFocus:!1},c=(0,t.Ay)({},s,{storeKey:"accessibilityPersistent",persistenceEnabled:!0,persistImmediately:!0}).on(n.w,function(o){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return o.hasKeyboardFocus===r?o:{...o,hasKeyboardFocus:r}})},5105455463:(z,A,e)=>{"use strict";e.d(A,{As:()=>c,N9:()=>n,V_:()=>s,WB:()=>d,X8:()=>a,bb:()=>l,c7:()=>i,dH:()=>r,lf:()=>_,og:()=>t,rf:()=>o});const t="(prefers-contrast: more)",n="useAriaApplicationForListViews",s="composerUpArrowShortcutBehavior",a="messageTextLineSpacing",c="messageSpacing",o="messageTextWordSpacing",r="conversationIncomingMessageSound",l="conversationSentMessageSound",_="conversationIncomingMessageAnnouncement",d="peeksEnabledOnMouseEnter",i=!0},3034787354:(z,A,e)=>{"use strict";e.d(A,{A:()=>C});var t=e(3245843483),n=e(8646192222),s=e(1185969935),a=e(25586007),c=e(5105455463),o=e(8439865561),r=e(9733150292);let l=!1;(0,n.Nu)()?l=window.matchMedia(c.og).matches:(0,n.hk)()&&(l=(0,t.oQe)("settings","shouldUseHighContrastColors"));let _=!1;try{_=!!(0,r.W6)(c.N9)}catch{}let d;try{d=(0,r.W6)(c.V_)}catch{}let i;try{i=(0,r.W6)(c.X8)||1}catch{}let m;try{m=(0,r.W6)(c.As)||1}catch{}let h;try{h=(0,r.W6)(c.rf)||"0"}catch{}let v;try{var y;v=(y=(0,r.W6)(c.dH))!==null&&y!==void 0?y:""}catch{v=""}let T;try{var I;T=(I=(0,r.W6)(c.bb))!==null&&I!==void 0?I:""}catch{T=""}let p;try{p=(0,r.W6)(c.lf)}catch{p=void 0}let g;try{var E;g=(E=(0,r.W6)(c.WB))!==null&&E!==void 0?E:c.c7}catch{g=c.c7}const f={screenReaderEnabled:!1,shouldUseHighContrastColors:l,useARIAApplicationForListViews:_,composerUpArrowShortcutBehavior:d,messageTextLineSpacing:i,messageSpacing:m,messageTextWordSpacing:h,conversationIncomingMessageSound:v,conversationSentMessageSound:T,conversationIncomingMessageAnnouncement:p,peeksEnabledOnMouseEnter:g},C=(0,s.Ay)({},f,{storeKey:"accessibility",persistenceEnabled:!1}).on(o.rl,(M,D)=>D!=null&&D.message?{...M,announcerAPIAnnouncement:D}:M).on(o.Jq,(M,D)=>typeof D!="boolean"||D===M.screenReaderEnabled?M:{...M,screenReaderEnabled:D}).on(o.N,function(M){let D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return typeof D!="boolean"||D===M.shouldUseHighContrastColors?M:{...M,shouldUseHighContrastColors:D}}).on(o.KQ,function(M){let D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return{...M,useARIAApplicationForListViews:D}}).on(o.Tv,function(M){let D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:a.v.LIST;return{...M,composerUpArrowShortcutBehavior:D}}).on(o.C_,function(M){let D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return{...M,messageTextLineSpacing:D}}).on(o.XE,function(M){let D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return{...M,messageSpacing:D}}).on(o.Mq,function(M){let D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"0";return{...M,messageTextWordSpacing:D}}).on(o.Sr,(M,D)=>({...M,conversationIncomingMessageSound:D})).on(o.mw,(M,D)=>({...M,conversationSentMessageSound:D})).on(o.Ap,(M,D)=>({...M,conversationIncomingMessageAnnouncement:D})).on(o.V_,(M,D)=>({...M,peeksEnabledOnMouseEnter:D}))},8365110903:(z,A,e)=>{"use strict";e.d(A,{T:()=>o});var t=e(1031947056),n=e(4134037340),s=e(5105455463),a=e(8439865561),c=e(9733150292);const o=(0,t.Ay)("Set the behavior of the up arrow shortcut when focus is in the MessageInput",(r,l,_)=>{if((0,n.A)(l()))try{(0,c.q9)(s.V_,_)}catch{}r((0,a.Tv)(_))});o.meta={name:"createThunk",key:"createThunksetComposerUpArrowShortcutBehavior",description:"Set the behavior of the up arrow shortcut when focus is in the MessageInput"}},2633701976:(z,A,e)=>{"use strict";e.d(A,{p:()=>o});var t=e(1031947056),n=e(4134037340),s=e(5105455463),a=e(8439865561),c=e(9733150292);const o=(0,t.Ay)("Set the pref for the sound that plays when a message arrives to the focused conversation",(r,l,_)=>{if((0,n.A)(l()))try{(0,c.q9)(s.lf,_)}catch{}r((0,a.Ap)(_))});o.meta={name:"createThunk",key:"createThunksetPersistentConversationIncomingMessageAnnouncement",description:"Set the pref for the sound that plays when a message arrives to the focused conversation"}},2517531287:(z,A,e)=>{"use strict";e.d(A,{R:()=>o,r:()=>r});var t=e(1031947056),n=e(4134037340),s=e(5105455463),a=e(8439865561),c=e(9733150292);const o=(0,t.Ay)("Set the pref for the sound that plays when a message arrives to the focused conversation",(l,_,d)=>{if((0,n.A)(_()))try{(0,c.q9)(s.dH,d)}catch{}l((0,a.Sr)(d))});o.meta={name:"createThunk",key:"createThunksetPersistentConversationIncomingMessageSound",description:"Set the pref for the sound that plays when a message arrives to the focused conversation"};const r=(0,t.Ay)("Set the pref for the sound that plays when a message is sent to the focused conversation",(l,_,d)=>{if((0,n.A)(_()))try{(0,c.q9)(s.bb,d)}catch{}l((0,a.mw)(d))});r.meta={name:"createThunk",key:"createThunksetPersistentConversationSentMessageSound",description:"Set the pref for the sound that plays when a message is sent to the focused conversation"}},25586007:(z,A,e)=>{"use strict";e.d(A,{v:()=>t});var t;(function(n){n[n.LIST=1]="LIST",n[n.LIST_IF_EMPTY=2]="LIST_IF_EMPTY",n[n.EDIT=3]="EDIT"})(t||(t={}))},3087402890:(z,A,e)=>{"use strict";e.d(A,{FX:()=>o,X5:()=>c,ZY:()=>h,cD:()=>_,cQ:()=>d,cw:()=>l,dj:()=>i,fe:()=>a,lB:()=>m,qK:()=>n,r8:()=>r,s2:()=>s});var t=e(2140362605);const n=(0,t.Ay)("Set the thread root keys");n.meta={name:"createAction",key:"createActionsetThreads",description:"Set the thread root keys"};const s=(0,t.Ay)("Append more thread root keys");s.meta={name:"createAction",key:"createActionappendThreads",description:"Append more thread root keys"};const a=(0,t.Ay)("Insert a thread at the beginning");a.meta={name:"createAction",key:"createActionprependThread",description:"Insert a thread at the beginning"};const c=(0,t.Ay)("Increments totalUnreadReplies");c.meta={name:"createAction",key:"createActionincrementTotalUnreadReplies",description:"Increments totalUnreadReplies"};const o=(0,t.Ay)("Sets totalNewThreads to 0");o.meta={name:"createAction",key:"createActionclearTotalNewThreads",description:"Sets totalNewThreads to 0"};const r=(0,t.Ay)("Increments allThreadsRefreshCounter");r.meta={name:"createAction",key:"createActionincrementAllThreadsRefreshCounter",description:"Increments allThreadsRefreshCounter"};const l=(0,t.Ay)("Set the thread key that should be focused");l.meta={name:"createAction",key:"createActionsetFocusRequestedThreadKey",description:"Set the thread key that should be focused"};const _=(0,t.Ay)("Set the thread timestamp that should be focused");_.meta={name:"createAction",key:"createActionsetFocusRequestedReplyTs",description:"Set the thread timestamp that should be focused"};const d=(0,t.Ay)("Add a thread key to an array of threads that were manually marked unread");d.meta={name:"createAction",key:"createActionappendThreadToManuallyMarkedUnread",description:"Add a thread key to an array of threads that were manually marked unread"};const i=(0,t.Ay)("set object of threads that have been manually marked as unread");i.meta={name:"createAction",key:"createActionsetManuallyMarkedThreads",description:"set object of threads that have been manually marked as unread"};const m=(0,t.Ay)("Remove a thread key from an array of threads that were manually marked unread");m.meta={name:"createAction",key:"createActionremoveThreadFromManuallyMarkedUnread",description:"Remove a thread key from an array of threads that were manually marked unread"};const h=(0,t.Ay)("Sets manuallyMarkedUnread to empty");h.meta={name:"createAction",key:"createActionclearThreadsFromManuallyMarkedUnread",description:"Sets manuallyMarkedUnread to empty"}},8778137680:(z,A,e)=>{"use strict";e.d(A,{DQ:()=>c,Lm:()=>r,RZ:()=>_,S:()=>h,X$:()=>a,_y:()=>d,c6:()=>i,fv:()=>o,rk:()=>s,yT:()=>m,z7:()=>l,zZ:()=>n});var t=e(2140362605);const n=(0,t.Ay)("Set Awareness State for another user");n.meta={name:"createAction",key:"createActionsetAwarenessStateForOtherUser",description:"Set Awareness State for another user"};const s=(0,t.Ay)("Set Awareness State for me");s.meta={name:"createAction",key:"createActionsetMyAwarenessState",description:"Set Awareness State for me"};const a=(0,t.Ay)("Remove Awareness State for me");a.meta={name:"createAction",key:"createActionremoveMyAwarenessState",description:"Remove Awareness State for me"};const c=(0,t.Ay)("Clear the full awareness state for a user");c.meta={name:"createAction",key:"createActionclearUserAwarenessState",description:"Clear the full awareness state for a user"};const o=(0,t.Ay)("Set my screenshare view");o.meta={name:"createAction",key:"createActionsetMyScreenshareView",description:"Set my screenshare view"};const r=(0,t.Ay)("Remove my screenshare view");r.meta={name:"createAction",key:"createActionremoveMyScreenshareView",description:"Remove my screenshare view"};const l=(0,t.Ay)("Set my sticky reaction");l.meta={name:"createAction",key:"createActionsetMyStickyReaction",description:"Set my sticky reaction"};const _=(0,t.Ay)("Remove my sticky reaction");_.meta={name:"createAction",key:"createActionremoveMyStickyReaction",description:"Remove my sticky reaction"};const d=(0,t.Ay)("Clear any stale awareness entries");d.meta={name:"createAction",key:"createActionttlAwarenessEntries",description:"Clear any stale awareness entries"};const i=(0,t.Ay)("Sets updatedTimestamp for my awareness entries to current time");i.meta={name:"createAction",key:"createActionrenewMyUpdatedTimestamps",description:"Sets updatedTimestamp for my awareness entries to current time"};const m=(0,t.Ay)("Set my active song");m.meta={name:"createAction",key:"createActionsetMyActiveSong",description:"Set my active song"};const h=(0,t.Ay)("Remove my active song");h.meta={name:"createAction",key:"createActionremoveMyActiveSong",description:"Remove my active song"}},7592559649:(z,A,e)=>{"use strict";e.d(A,{$G:()=>g,Ae:()=>O,Fb:()=>p,M3:()=>T,b1:()=>f,fL:()=>I,gV:()=>E,sW:()=>y,xP:()=>v});var t=e(9829579108),n=e(3385422400),s=e(6418055367),a=e(166097325),c=e(9113979368),o=e(5751973043),r=e(1345902898),l=e(6324645806);const _=(0,n.Ad)(s.UI,a.A),d=u(M=>{var D;return(M==null||(D=M.awareness)===null||D===void 0?void 0:D.awarenessEntries)||o.Ml},"selectAwarenessEntries"),i=(0,n.Mz)([d,(M,D)=>D,(M,D,P)=>P,(M,D,P,k)=>k],(M,D,P,k)=>{if(D===void 0)return o.t0;const x=M.filter(W=>{const Y=W.channel===D,S=W.fieldName===P,L=k?W.uniqueId===k:!0,w=!(0,l.h)(W);return Y&&S&&L&&w}).map(W=>[W.user,W.fieldValue]),F=Object.fromEntries(x);return(0,c.A)(F)?o.t0:F}),m=(0,n.Mz)([d,(M,D)=>D,(M,D,P)=>P],(M,D,P)=>{if(D===void 0)return o.t0;const k=M.filter(F=>{const W=F.channel===D,Y=F.fieldName===P,S=!(0,l.h)(F);return W&&Y&&S}).map(F=>[F.uniqueId,[F.user,F.fieldValue]]),x=Object.fromEntries(k);return(0,c.A)(x)?o.t0:x}),h=(0,n.Mz)([d,(M,D)=>D,(M,D,P)=>P],(M,D,P)=>{if(D===void 0)return o.t0;var k,x;const F=M.filter(Y=>{const S=Y.channel===D,L=Y.fieldName===P,w=!(0,l.h)(Y);return S&&L&&w}).sort((Y,S)=>((k=Y.fieldTimestampMs)!==null&&k!==void 0?k:Number.MAX_SAFE_INTEGER)-((x=S.fieldTimestampMs)!==null&&x!==void 0?x:Number.MAX_SAFE_INTEGER)).map(Y=>[Y.user,Y.fieldValue]);return Object.fromEntries(F)}),v=(0,t.Ay)((M,D)=>{const P=h(M,D,r.p4.STICKYEMOJI);return(0,c.A)(P)?o.t0:P});v.meta={name:"createSelector",key:"createSelectorgetStickyEmojisForTopicByUser",description:(M,D)=>{const P=h(M,D,r.p4.STICKYEMOJI);return(0,c.A)(P)?o.t0:P}};const y=(0,t.Ay)((M,D)=>i(M,D,r.p4.CONTENTVIEW));y.meta={name:"createSelector",key:"createSelectorgetContentViewsForTopicByUser",description:(M,D)=>i(M,D,r.p4.CONTENTVIEW)};const T=(0,t.Ay)((M,D)=>m(M,D,r.p4.CONTENTVIEW));T.meta={name:"createSelector",key:"createSelectorgetContentViewsKeyedByPeerId",description:(M,D)=>m(M,D,r.p4.CONTENTVIEW)};const I=(0,t.Ay)((M,D,P,k)=>{var x;return(M==null||(x=M.awareness)===null||x===void 0?void 0:x.awarenessEntries).filter(Y=>{const S=Y.channel===D,L=Y.user===P,w=!k||(0,l.I)(Y.fieldName)?!0:Y.uniqueId===k,J=!(0,l.h)(Y);return S&&L&&w&&J}).map(Y=>({field_name:Y.fieldName,field_value:Y.fieldValue,...!!Y.fieldTimestampMs&&{field_timestamp_ms:Y.fieldTimestampMs}}))});I.meta={name:"createSelector",key:"createSelectorgetAwarenessForMe",description:(M,D,P,k)=>{var x;return(M==null||(x=M.awareness)===null||x===void 0?void 0:x.awarenessEntries).filter(Y=>{const S=Y.channel===D,L=Y.user===P,w=!k||(0,l.I)(Y.fieldName)?!0:Y.uniqueId===k,J=!(0,l.h)(Y);return S&&L&&w&&J}).map(Y=>({field_name:Y.fieldName,field_value:Y.fieldValue,...!!Y.fieldTimestampMs&&{field_timestamp_ms:Y.fieldTimestampMs}}))}};const p=(0,t.Ay)((M,D,P,k)=>{const x=I(M,D,P,k);for(const F of x)if(F.field_name===r.p4.STICKYEMOJI)return F;return null});p.meta={name:"createSelector",key:"createSelectorgetAwarenessStickyEmoji",description:(M,D,P,k)=>{const x=I(M,D,P,k);for(const F of x)if(F.field_name===r.p4.STICKYEMOJI)return F;return null}};const g=(0,t.Ay)((M,D)=>{let{callId:P,userId:k,uniqueId:x}=D;return P?i(M,P,r.p4.STICKYEMOJI,x)[k]:void 0});g.meta={name:"createSelector",key:"createSelectorgetStickyReactionsByUserId",description:(M,D)=>{let{callId:P,userId:k,uniqueId:x}=D;return P?i(M,P,r.p4.STICKYEMOJI,x)[k]:void 0}};const E=(0,t.Ay)((M,D)=>{let{callId:P,userId:k}=D;if(!P)return;const x=i(M,P,r.p4.HUDDLE_ACTIVE_SONG);if((0,c.A)(x))return;if(k)return x[k];const F=Object.values(x);if(F.length!==0)return F[0]});E.meta={name:"createSelector",key:"createSelectorgetRequestedSong",description:(M,D)=>{let{callId:P,userId:k}=D;if(!P)return;const x=i(M,P,r.p4.HUDDLE_ACTIVE_SONG);if((0,c.A)(x))return;if(k)return x[k];const F=Object.values(x);if(F.length!==0)return F[0]}};const f=(0,t.Ay)((M,D)=>{let{callId:P,userId:k,uniqueId:x}=D;return P?i(M,P,r.p4.STEPS,x)[k]:void 0});f.meta={name:"createSelector",key:"createSelectorgetStepsByUserId",description:(M,D)=>{let{callId:P,userId:k,uniqueId:x}=D;return P?i(M,P,r.p4.STEPS,x)[k]:void 0}};const O=_([d,(M,D,P,k,x)=>`${D},${P},${k},${x}`],(M,D)=>{const[P,k,x,F]=D.split(","),W=M.filter(Y=>{const S=Y.channel===P,L=Y.user!==k,w=Y.fieldName===r.p4.ACTIVE_CELL&&Y.fieldValue&&Y.fieldValue.rowId===x&&Y.fieldValue.colId===F,J=!(0,l.h)(Y);return S&&L&&w&&J}).map(Y=>[[`${Y.fieldValue.rowId},${Y.fieldValue.colId}`],Y.user]);return W.length?Object.fromEntries(W):o.t0}),C=(0,n.Mz)([d,(M,D)=>D],(M,D)=>D===void 0?o.Ml:M.filter(k=>{const x=k.channel===D,F=k.fieldName===r.p4.ACTIVE_CELL;return x&&F}).map(k=>k.user))},1345902898:(z,A,e)=>{"use strict";e.d(A,{Pz:()=>t,mO:()=>s,p4:()=>n});var t;(function(a){a.BROADCAST="broadcast",a.QUERY="query",a.CLOSE="close"})(t||(t={}));var n;(function(a){a.CONTENTVIEW="contentView",a.STICKYEMOJI="stickyEmoji",a.ACTIVE_CELL="activeCell",a.HUDDLE_ACTIVE_SONG="huddleActiveSong",a.STEPS="steps"})(n||(n={}));const s=60*1e3},6324645806:(z,A,e)=>{"use strict";e.d(A,{I:()=>s,h:()=>n});var t=e(1345902898);const n=u(a=>{const c=Date.now();var o;return c-((o=a.updatedTimestamp)!==null&&o!==void 0?o:c)>=t.mO},"isAwarenessEntryExpired"),s=u(a=>a?[t.p4.HUDDLE_ACTIVE_SONG].includes(a):!1,"skipUniquenessCheck")},3749529250:(z,A,e)=>{"use strict";e.d(A,{K:()=>s,z:()=>n});var t=e(2140362605);const n=(0,t.Ay)("Enable big button mode");n.meta={name:"createAction",key:"createActionenableBBM",description:"Enable big button mode"};const s=(0,t.Ay)("Disable big button mode");s.meta={name:"createAction",key:"createActiondisableBBM",description:"Disable big button mode"}},4614661813:(z,A,e)=>{"use strict";e.d(A,{Y:()=>a});var t=e(1185969935),n=e(3749529250);const s={enabled:!1},a=(0,t.Ay)({},s,{storeKey:"bbm",persistenceEnabled:!0,persistImmediately:!0}).on(n.z,c=>({...c,enabled:!0})).on(n.K,c=>({...c,enabled:!1}))},8677230210:(z,A,e)=>{"use strict";e.d(A,{pO:()=>y,AF:()=>v,E6:()=>g,vu:()=>p,wC:()=>T,Od:()=>I});var t=e(3037015781),n=e(9829579108),s=e(9464746668),a=e(4588963228),c=e(8847766420),o=e(2762206868),r=e(8276911661);const l=["B01","BSLACKBOT","B03"];var _=e(3447104916),d=e(4562579337);function i(E){return!!(E&&(0,t.uz)(E)&&!(0,d.A)(E))}u(i,"isMemberHuman");var m=e(9887599716),h=e(9354158662);const v=(0,n.Ay)(function(E,f){let O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const C=(0,c.ZT)(E);if(!f)return!1;const M=(0,m.o)(E,f);return!M&&(0,a.A)(f)&&O&&l.indexOf(f)<0?(0,_.Ss)().fetchObjectWithId(C,f):((0,_.ez)(C,f),M||!1)});v.meta={name:"createSelector",key:"createSelectorgetBotById",description:function(E,f){let O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const C=(0,c.ZT)(E);if(!f)return!1;const M=(0,m.o)(E,f);return!M&&(0,a.A)(f)&&O&&l.indexOf(f)<0?(0,_.Ss)().fetchObjectWithId(C,f):((0,_.ez)(C,f),M||!1)}};const y=(0,n.Ay)((E,f)=>{if(!f)return;const O=(0,h.iO)(E);let C;return O&&(C=Object.values(O).find(M=>M.app_id===f)),C});y.meta={name:"createSelector",key:"createSelectorgetBotByAppId",description:(E,f)=>{if(!f)return;const O=(0,h.iO)(E);let C;return O&&(C=Object.values(O).find(M=>M.app_id===f)),C}};const T=(0,n.Ay)((E,f)=>{const O=(0,r.nv)(E,f);return i(O)});T.meta={name:"createSelector",key:"createSelectorgetMemberIsHuman",description:(E,f)=>{const O=(0,r.nv)(E,f);return i(O)}};const I=(0,n.Ay)(function(E){let{userId:f,botId:O,botProfile:C}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},M,D;f&&(M=(0,r.nv)(E,f)),O&&(D=v(E,O)||void 0);const P=M?i(M):!1;let k;!(0,t.uz)(D)&&(0,t.uz)(M)&&(k=(0,s.A)(E,M),k&&k!==O&&(D=v(E,k)||void 0));let x;if(!(0,t.uz)(D)&&C&&(x=C.id,x&&x!==k&&x!==O&&(D=v(E,x)||void 0),(0,t.uz)(D)||(D=C)),!(0,t.uz)(M)&&(0,t.uz)(D)&&D.app_id){const F=(0,o.sO)(E,D.app_id);if((0,t.uz)(F)){const W=F.app_user_id;W&&W!==f&&(M=(0,r.nv)(E,W))}}return{bot:D,member:M,memberIsHuman:P}});I.meta={name:"createSelector",key:"createSelectormaybeGetBotAndMemberByIds",description:function(E){let{userId:f,botId:O,botProfile:C}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},M,D;f&&(M=(0,r.nv)(E,f)),O&&(D=v(E,O)||void 0);const P=M?i(M):!1;let k;!(0,t.uz)(D)&&(0,t.uz)(M)&&(k=(0,s.A)(E,M),k&&k!==O&&(D=v(E,k)||void 0));let x;if(!(0,t.uz)(D)&&C&&(x=C.id,x&&x!==k&&x!==O&&(D=v(E,x)||void 0),(0,t.uz)(D)||(D=C)),!(0,t.uz)(M)&&(0,t.uz)(D)&&D.app_id){const F=(0,o.sO)(E,D.app_id);if((0,t.uz)(F)){const W=F.app_user_id;W&&W!==f&&(M=(0,r.nv)(E,W))}}return{bot:D,member:M,memberIsHuman:P}}};const p=(0,n.Ay)((E,f)=>{const O=v(E,f);if(O&&O.name)return O.name});p.meta={name:"createSelector",key:"createSelectorgetBotNameById",description:(E,f)=>{const O=v(E,f);if(O&&O.name)return O.name}};const g=(0,n.Ay)((E,f)=>{if(!E||!f)return null;const O=(0,r.nv)(E,f.user),C=f.bot_id||(0,s.A)(E,O);if(!C)return null;if(f.bot_profile)return f.bot_profile.id!==C?{...f.bot_profile,id:C}:f.bot_profile;const M=v(E,C);return M||null});g.meta={name:"createSelector",key:"createSelectorgetBotByMsg",description:(E,f)=>{if(!E||!f)return null;const O=(0,r.nv)(E,f.user),C=f.bot_id||(0,s.A)(E,O);if(!C)return null;if(f.bot_profile)return f.bot_profile.id!==C?{...f.bot_profile,id:C}:f.bot_profile;const M=v(E,C);return M||null}}},8980478045:(z,A,e)=>{"use strict";e.d(A,{HR:()=>a,Pf:()=>s,Vp:()=>c});var t=e(9829579108);const n=(0,t.Ay)((o,r)=>{var l;return(l=o.channelCanvas)===null||l===void 0?void 0:l.byChannelId[r]});n.meta={name:"createSelector",key:"createSelectorgetByChannelIdState",description:(o,r)=>{var l;return(l=o.channelCanvas)===null||l===void 0?void 0:l.byChannelId[r]}};const s=(0,t.Ay)((o,r)=>{var l;return(l=n(o,r))===null||l===void 0?void 0:l.tempId});s.meta={name:"createSelector",key:"createSelectorgetChannelCanvasTempId",description:(o,r)=>{var l;return(l=n(o,r))===null||l===void 0?void 0:l.tempId}};const a=(0,t.Ay)((o,r)=>{var l;return(l=o.channelCanvas)===null||l===void 0?void 0:l.byTempId[r]});a.meta={name:"createSelector",key:"createSelectorgetChannelIdForTempId",description:(o,r)=>{var l;return(l=o.channelCanvas)===null||l===void 0?void 0:l.byTempId[r]}};const c=(0,t.Ay)((o,r)=>{var l,_;return(_=(l=n(o,r))===null||l===void 0?void 0:l.waitingForLock)!==null&&_!==void 0?_:!1});c.meta={name:"createSelector",key:"createSelectorgetChannelCanvasWaitingForLock",description:(o,r)=>{var l,_;return(_=(l=n(o,r))===null||l===void 0?void 0:l.waitingForLock)!==null&&_!==void 0?_:!1}}},9536404279:(z,A,e)=>{"use strict";e.d(A,{CD:()=>r,Jt:()=>c,Np:()=>s,VG:()=>n,bz:()=>a,fp:()=>o,hX:()=>l});var t=e(2140362605);const n=(0,t.Ay)("Add timestamps to channel history");n.meta={name:"createAction",key:"createActionaddTimestamps",description:"Add timestamps to channel history"};const s=(0,t.Ay)("Remove timestamps from channel history");s.meta={name:"createAction",key:"createActionremoveTimestamp",description:"Remove timestamps from channel history"};const a=(0,t.Ay)("Remove all history for a channel");a.meta={name:"createAction",key:"createActionremoveAllTimestamps",description:"Remove all history for a channel"};const c=(0,t.Ay)("Was disconnected; reset reachedEnd to false");c.meta={name:"createAction",key:"createActionresetReachedEnd",description:"Was disconnected; reset reachedEnd to false"};const o=(0,t.Ay)("Drop messages from before a given timestamp");o.meta={name:"createAction",key:"createActiontruncateChannelHistoryPriorToTimestamp",description:"Drop messages from before a given timestamp"};const r=(0,t.Ay)("Drop old messages if there are too many");r.meta={name:"createAction",key:"createActiontruncateChannelHistory",description:"Drop old messages if there are too many"};const l=(0,t.Ay)("Remove all history for every channel");l.meta={name:"createAction",key:"createActionclearChannelHistory",description:"Remove all history for every channel"}},4350638406:(z,A,e)=>{"use strict";e.d(A,{Hw:()=>ee,e3:()=>j,mY:()=>ae,D1:()=>he,Zc:()=>ce,ez:()=>Ae});var t=e(3398586081),n=e(7715417323),s=e(6533394955),a=e(8352634987);function c(N,b){return`${N}:${b}`}u(c,"serialize_serialize");function o(N){const[b,R]=N.split(":");return{channelId:b,ts:R}}u(o,"deserialize");var r=e(4423055085),l=e(2208015175),_=e(1703559452),d=e(9816084745),i=e(8289365785),m=e(8786006583),h=e(6422693406),v=e(1031947056),y=e(796111729),T=e(7334104107),I=e(6457401668),p=e(4919145213),g=e(9986847041),E=e(4365697073),f=e(3110884894),O=e(7606781622),C=e(8040098042),M=e(2155512519),D=e(12126472),P=e(1116859610);const k="HISTORY-CFM";function x(N,b){return u(function R(){let{channelId:K,oldest:B,latest:$,cursor:Z="",msgsInRange:re=[],deletedInRange:Te=[]}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const Ce={channelId:K,oldest:B,latest:$,cursor:Z,inclusive:!0,includePinCount:!1,reason:"channel-history-store.CFM.fetch"};return N((0,M.Ay)(Ce)).then(function(){let{msgs:Pe=[],deleted:fe=[],isLimited:pe,hasMore:q,responseMetadata:se={}}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return re.push(...Pe),Te.push(...fe),q&&!pe&&se.next_cursor?R({channelId:K,oldest:B,latest:$,cursor:se.next_cursor,msgsInRange:re,deletedInRange:Te}):(N((0,P.A)({msgs:re,channelId:K,isLimited:pe,latest:$,oldest:B,deletedInRange:Te})),h.S.resolve())})},"fetchHistoryRangeHelper")(b)}u(x,"fetchHistoryRange");function F(N,b){return u(function R(){let{channelId:K,threadTs:B,oldest:$,latest:Z,cursor:re="",msgsInRange:Te=[],deletedInRange:Ce=[]}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const Pe={channelId:K,threadTs:B,oldest:$,latest:Z,cursor:re,inclusive:!0,reason:"channel-history-store.CFM.fetch"};return N((0,M.$b)(Pe)).then(function(){let{msgs:fe=[],deleted:pe=[],hasMore:q,responseMetadata:se={}}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Te.push(...re?(0,D.A)(fe,{ts:B}):fe),Ce.push(...pe),q&&se.next_cursor)return R({channelId:K,threadTs:B,oldest:$,latest:Z,cursor:se.next_cursor,msgsInRange:Te,deletedInRange:Ce});const Oe=$===B||Z===B?Te:(0,D.A)(Te,{ts:B});return N((0,P.A)({msgs:Oe,channelId:(0,f.Iu)(K,B),latest:Z,oldest:$,deletedInRange:Ce})),h.S.resolve()})},"fetchRepliesRangeHelper")(b)}u(F,"fetchRepliesRange");const W=(0,v.Ay)("Fetches a range of messages",(N,b,R)=>{let{channelId:K,oldest:B,latest:$}=R;return(0,y.Ay)({getState:b,label:k}).info(`Re-fetching ${K} ${B} - ${$}`),(0,C.A)(K)?x(N,{channelId:K,oldest:B,latest:$}):F(N,{...(0,f.Sb)(K),oldest:B,latest:$})});W.meta={name:"createThunk",key:"createThunkfetchRange",description:"Fetches a range of messages"};var Y=e(8455301571);function S(N){const b={};return N.forEach(R=>{const{channelId:K,ts:B}=o(R);b[K]=b[K]||[],b[K].push(B)}),b}u(S,"groupTimestampsByChannel");function L(N){let b,R;return(0,l.A)(N,(K,B)=>{b===void 0&&(b=B),R===void 0&&(R=B),B<b&&(b=B),B>R&&(R=B)}),{minTs:b,maxTs:R}}u(L,"getMinAndMaxTs");function w(){let N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(0,_.A)(b,(R,K)=>N[K])}u(w,"hasIntersection");function J(N,b){return(0,d.A)(b,(R,K)=>N[K])}u(J,"isSuperset");function G(N){let{ranges:b={},tsMaps:R=[]}=N;const K={...b};let B=R[0];return R.forEach($=>{B!==$&&(w(B,$)?J(B,$)?delete K[$.rangeId]:J($,B)?(delete K[B.rangeId],B=$):(0,l.A)($,(Z,re)=>delete B[re]):B=$)}),Object.values(K)}u(G,"dedupe");function X(N,b){let R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];const K=(0,y.Ay)({state:N,label:k}),B={},$=[];return R.sort().forEach(Z=>{const Te=(0,O.Ld)(N,b,Z,!1);if(!Te){K.warn(`No message for ${Z} in ${b}`);return}if((0,T.aw)(Te)||(0,p.A)(Te))return;const Ce=[];(!(0,E.n)(Te)||(0,T.jX)(Te)||(0,I.SM)(Te))&&Ce.push(b),((0,T.jX)(Te)||(0,E.n)(Te))&&Ce.push((0,f.Iu)(b,(0,g.L)(Te))),Ce.forEach(Pe=>{if(!Pe)return;const fe=(0,Y.tp)(N,Pe,Z);if(!fe||fe===Y.Vl)return;const{start:pe,end:q,timestamps:se}=fe,ge=`${pe}-${q}`;if(!B[ge]){const Le={};Object.defineProperty(Le,"rangeId",{enumerable:!1,value:ge}),B[ge]={id:Pe,firstTs:(0,i.A)(se),lastTs:(0,m.A)(se),start:pe,end:q,tsMap:Le},$.push(Le)}const Oe=B[ge];Oe.tsMap[Z]=!0})}),{ranges:B,tsMaps:$}}u(X,"segment");function te(N,b){let R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return(G(X(N,b,R))||[{}]).map(B=>{let{id:$,firstTs:Z,lastTs:re,start:Te,end:Ce,tsMap:Pe}=B;const{minTs:fe,maxTs:pe}=L(Pe);return{id:$,oldest:fe===Z?Te:fe,latest:pe===re?Ce:pe}})}u(te,"rangify");const le=(0,v.Ay)("Fetches chunks of channel history for the given message IDs",(N,b,R)=>{let{ids:K}=R;const B=S(K),$={};return(0,l.A)(B,(Z,re)=>{const Te=te(b(),re,Z);$[re]=h.S.map(Te,Ce=>{let{oldest:Pe,latest:fe,id:pe}=Ce;return N(W({channelId:pe,oldest:Pe,latest:fe}))})}),h.S.all(Object.values($))});le.meta={name:"createThunk",key:"createThunkrefetchChannelHistory",description:"Fetches chunks of channel history for the given message IDs"};const ve=le,Q=(0,t.A)(()=>new a.Ay({storeKey:"channelHistory",fetch:(N,b)=>(0,s.dispatchForTeamId)(N,ve({ids:b})),metricsName:"channel-history",isEnabled:()=>!0,markStaleAfterSlowReconnect:()=>!1})),Ae=u((N,b,R)=>Q().maybeRefetch(N,c(b,R)),"maybeRefetch"),ae=u((N,b,R)=>Q().markObjectsAsFresh(N,R.map(K=>c(b,K))),"markObjectsAsFresh"),he=u((N,b,R)=>Q().markObjectsAsStale(N,R.map(K=>c(b,K))),"markObjectsAsStale"),_e=u((N,b,R)=>Q().isObjectFresh(N,serialize(b,R)),"isObjectFresh"),ee=u(N=>Q().getFreshObjects(N).map(o),"getFreshObjects");(0,r.zv)("conditionalFetchManagerChannelHistory",Q);const de="reachedEnd",Ie=(0,t.A)(()=>new a.Ay({storeKey:"channelHistory",fetch:n.A,metricsName:"channel-history-reached-end",isEnabled:()=>!0})),ce=u(N=>Ie().markObjectsAsFresh(N,[de]),"markReachedEndAsFresh"),j=u(N=>Ie().isObjectFresh(N,[de]),"isReachedEndFresh")},7097022175:(z,A,e)=>{"use strict";e.d(A,{Y:()=>s,r:()=>n});var t=e(7933637612);const{addObjects:n,removeObjects:s}=t.o1},7933637612:(z,A,e)=>{"use strict";e.d(A,{Ay:()=>o,Tp:()=>c,o1:()=>a});var t=e(7538465478);const n={storeKey:"channelLoading",persistenceEnabled:!1},{reducer:s,actions:a,selectors:c}=(0,t.A)(n,{idKey:"channelId",transform:r=>{const{channelId:l,..._}=r;return{id:l,object:_}}}),o=s},8298125694:(z,A,e)=>{"use strict";e.d(A,{Ah:()=>a,Qr:()=>c,c:()=>o});var t=e(9829579108),n=e(7933637612);const{getObjectById:s}=n.Tp,a=u((l,_)=>s(l,_),"innerGetChannelLoadingDataById"),c=(0,t.Ay)((l,_)=>{var d;return!!(!((d=a(l,_))===null||d===void 0)&&d.loading)});c.meta={name:"createSelector",key:"createSelectorisChannelLoading",description:(l,_)=>{var d;return!!(!((d=a(l,_))===null||d===void 0)&&d.loading)}};const o=(0,t.Ay)((l,_)=>{const d=a(l,_);return!!(d!=null&&d.loading&&(d!=null&&d.loadingOlder))});o.meta={name:"createSelector",key:"createSelectorisChannelLoadingOlder",description:(l,_)=>{const d=a(l,_);return!!(d!=null&&d.loading&&(d!=null&&d.loadingOlder))}};const r={innerGetChannelLoadingDataById:a}},3528815215:(z,A,e)=>{"use strict";e.d(A,{f:()=>s});var t=e(1031947056),n=e(7097022175);const s=(0,t.Ay)("Finished loading history for a channel",(a,c,o)=>{const{channelId:r}=o||{};a((0,n.Y)({ids:[r]}))});s.meta={name:"createThunk",key:"createThunkdoneLoading",description:"Finished loading history for a channel"}},1284885799:(z,A,e)=>{"use strict";e.d(A,{v:()=>a});var t=e(1031947056),n=e(8298125694),s=e(7097022175);const a=(0,t.Ay)("Started loading history for a channel",(c,o,r)=>{const{channelId:l,loadingOlder:_,request:d}=r||{},i=(0,n.Ah)(o(),l);i&&i.loading&&i.request&&i.request.cancel(),c((0,s.r)({objects:[{channelId:l,loading:!0,loadingOlder:_,request:d}]}))});a.meta={name:"createThunk",key:"createThunkstartLoading",description:"Started loading history for a channel"}},1949656963:(z,A,e)=>{"use strict";e.d(A,{U:()=>s,ih:()=>a,k9:()=>n});var t=e(2140362605);const n=(0,t.Ay)("Set the history invalid timestamp for a channel");n.meta={name:"createAction",key:"createActionsetHistoryInvalidTimestamp",description:"Set the history invalid timestamp for a channel"};const s=(0,t.Ay)("Set the updated timestamp for a channel");s.meta={name:"createAction",key:"createActionsetUpdatedTimestamp",description:"Set the updated timestamp for a channel"};const a=(0,t.Ay)("Bulk update the history invalid timestamps for a channel");a.meta={name:"createAction",key:"createActionbulkUpdateMutationTimestamps",description:"Bulk update the history invalid timestamps for a channel"}},4405788578:(z,A,e)=>{"use strict";e.d(A,{Kq:()=>c,QO:()=>a});var t=e(9829579108);const n=(0,t.Ay)(o=>o==null?void 0:o.channelMutationTimestamps);n.meta={name:"createSelector",key:"createSelectorgetAllMutationTimestamps",description:o=>o==null?void 0:o.channelMutationTimestamps};const s=(0,t.Ay)((o,r)=>{var l;return(l=n(o))===null||l===void 0?void 0:l[r]});s.meta={name:"createSelector",key:"createSelectorgetMutationTimestampsByChannelId",description:(o,r)=>{var l;return(l=n(o))===null||l===void 0?void 0:l[r]}};const a=(0,t.Ay)((o,r)=>{var l;return(l=s(o,r))===null||l===void 0?void 0:l.updatedTs});a.meta={name:"createSelector",key:"createSelectorgetUpdatedTimestamp",description:(o,r)=>{var l;return(l=s(o,r))===null||l===void 0?void 0:l.updatedTs}};const c=(0,t.Ay)((o,r)=>{var l;return(l=s(o,r))===null||l===void 0?void 0:l.historyInvalidTs});c.meta={name:"createSelector",key:"createSelectorgetHistoryInvalidTimestamp",description:(o,r)=>{var l;return(l=s(o,r))===null||l===void 0?void 0:l.historyInvalidTs}}},9606603587:(z,A,e)=>{"use strict";e.d(A,{B:()=>a});var t=e(1031947056),n=e(3430841143),s=e(9530687876);const a=(0,t.Ay)(s.rd.ADD_CHANNEL,function(c,o){let{channel:r}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};!r||!r.id||c((0,n.F)({channel:r,reason:s.rd.ADD_CHANNEL}))});a.meta={name:"createThunk",key:"createThunkaddChannel",description:s.rd.ADD_CHANNEL}},1761027239:(z,A,e)=>{"use strict";e.d(A,{t:()=>l});var t=e(6422693406),n=e(1031947056),s=e(4446301238),a=e(3430841143),c=e(9530687876),o=e(5267010247),r=e(8822892075);const l=(0,n.Ay)("Archives a private channel, creates and upserts a new one with the same name, then adds users",(_,d,i)=>{let{channelId:m,users:h,subteams:v,inviteAll:y,force:T,propagateInviteResult:I}=i;return _((0,s.wb)({channelId:m,reason:c.rd.CHILD_CHANNEL_CREATED})).then(function(){let{channel:p}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return _((0,a.F)({channel:p,reason:c.rd.CHILD_CHANNEL_CREATED})),_((0,o.o)((0,r.pr)(p.id))),I?y||h||v?_((0,s.Cw)({channelId:p.id,users:h,subteams:v,inviteAll:y,force:T})).then(g=>({channel:p,inviteResult:g})):t.S.resolve({channel:p,inviteResult:{ok:!0}}):(_((0,s.Cw)({channelId:p.id,users:h,subteams:v})),t.S.resolve({channel:p}))})});l.meta={name:"createThunk",key:"createThunkcreateChildChannelAndAddMembers",description:"Archives a private channel, creates and upserts a new one with the same name, then adds users"}},613926746:(z,A,e)=>{"use strict";e.d(A,{Z:()=>s});var t=e(1031947056),n=e(7631186994);const s=(0,t.Ay)("Create or open an IM",function(a,c){let{memberId:o,shouldNavigateToChannel:r=!0,reason:l}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const _=o?[o]:[];return a((0,n.r)({memberIds:_,shouldNavigateToChannel:r,reason:l}))});s.meta={name:"createThunk",key:"createThunkstartImByMemberId",description:"Create or open an IM"}},7631186994:(z,A,e)=>{"use strict";e.d(A,{r:()=>m});var t=e(6422693406),n=e(9113979368),s=e(235108050),a=e(1031947056),c=e(5795074931),o=e(9289081806),r=e(4446301238),l=e(8822892075),_=e(9101533895),d=e(3430841143),i=e(5267010247);const m=(0,a.Ay)("Create or open an MPIM",function(h,v){let{memberIds:y,shouldNavigateToChannel:T=!0,isQuiet:I=!1,reason:p="startMpimByMemberIds"}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if((0,n.A)(y))return t.S.resolve();const g=v(),E=u(C=>(h((0,i.o)((0,l.pr)(C.id))),t.S.resolve(C)),"navigateToChannel");let f,O;if(y.length===1)O=y,f=(0,_.Pu)(g,y[0]);else{const C=(0,c.WR)(g);O=(0,s.A)([C,...y]),f=(0,_.FB)(g,O)}return(0,o.nT)(f)?T?E(f):t.S.resolve(f):h((0,r.jP)({isQuiet:I,memberIds:O,reason:p})).then(C=>!C||!C.channel?t.S.reject(new Error("missing-channel")):(h((0,d.F)({channel:C.channel})),T?E(C.channel):t.S.resolve(C.channel)))});m.meta={name:"createThunk",key:"createThunkstartMpimByMemberIds",description:"Create or open an MPIM"}},4653418008:(z,A,e)=>{"use strict";e.d(A,{LA:()=>a,Th:()=>c,kl:()=>s,yg:()=>n});var t=e(2140362605);const n=(0,t.Ay)("Set the current theme field in redux (do not use this)");n.meta={name:"createAction",key:"createActionsetClientThemeInternal",description:"Set the current theme field in redux (do not use this)"};const s=(0,t.Ay)("Set the OS system sync field in redux (do not use this)");s.meta={name:"createAction",key:"createActionsetSystemSyncInternal",description:"Set the OS system sync field in redux (do not use this)"};const a=(0,t.Ay)("Set the OS system theme field in redux (do not use this)");a.meta={name:"createAction",key:"createActionsetSystemTheme",description:"Set the OS system theme field in redux (do not use this)"};const c=(0,t.Ay)("Set the client typeface");c.meta={name:"createAction",key:"createActionsetClientTypeface",description:"Set the client typeface"}},5922222922:(z,A,e)=>{"use strict";e.d(A,{C3:()=>s,k4:()=>t,u7:()=>n});const t="slack-client-theme",n="slack-client-theme-os-sync",s="client-typeface"},5923036663:(z,A,e)=>{"use strict";e.d(A,{A:()=>E});var t=e(1703559452),n=e(796111729),s=e(4096483543),a=e(958961878),c=e(3245843483),o=e(1185969935),r=e(6533394955),l=e(5922222922),_=e(4653418008),d=e(3328068409),i=e(767804497),m=e(3564619745),h=e(9012396182),v=e(9733150292);let y="light",T=!1,I="light",p;try{p=(0,v.W6)(l.C3)||void 0}catch{}try{a.w2&&(0,s.A)()&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").addListener(f=>{const O=f.matches?"dark":"light";I=O,T&&(y=I);const C=(0,r.getClientStoreInstance)();if(C){const M=C.getState(),D=(0,h.getBootedWorkspaces)(M),P=(0,t.A)(D.map(k=>(0,a.Ay)((0,r.getStateByTeamId)(k))));C.dispatch((0,_.LA)(O)),P&&(0,d.FW)(M)&&C.dispatch((0,i.P)(O))}})}catch(f){(0,n.Wo)().warn("CLIENT-THEME-STORE","window.matchMedia hook failed; system theme will not be updated.",f)}try{const f=window.localStorage.getItem(l.k4),O=window.localStorage.getItem(l.u7);y=f||"light",a.w2&&(O?T=O==="true":T=!f,window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&(I="dark"),T&&(y=I)),(0,c.g9M)()&&((0,c.cGU)({name:"userTheme",value:y}),(0,c.cGU)({name:"systemThemeSyncEnabled",value:T}))}catch(f){(0,n.Wo)().warn("CLIENT-THEME-STORE","localStorage read failed; client theme will not be persisted.",f)}const E=(0,o.Ay)({},{clientTheme:y,systemSync:T,systemTheme:I,clientTypeface:p},{storeKey:"clientTheme",persistenceEnabled:!1}).on(_.yg,function(f){let O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"light";return{...f,clientTheme:O}}).on(_.kl,function(f){let O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return{...f,systemSync:O}}).on(_.LA,function(f){let O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"light";return{...f,systemTheme:O}}).on(_.Th,function(f){let O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:m.mZ;return{...f,clientTypeface:O}})},767804497:(z,A,e)=>{"use strict";e.d(A,{P:()=>o});var t=e(796111729),n=e(3245843483),s=e(1031947056),a=e(5922222922),c=e(4653418008);const o=(0,s.Ay)("Set the current theme for the device",function(r,l){let _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"light";try{window.localStorage.setItem(a.k4,_)}catch{(0,t.Wo)().warn("CLIENT-THEME-STORE","localStorage write failed; client theme will not be persisted.")}r((0,c.yg)(_)),(0,n.cGU)({name:"userTheme",value:_})});o.meta={name:"createThunk",key:"createThunksetClientTheme",description:"Set the current theme for the device"}},5670953896:(z,A,e)=>{"use strict";e.d(A,{$_:()=>v,Ci:()=>c,Dn:()=>a,F8:()=>d,N2:()=>l,RX:()=>r,Xc:()=>h,ij:()=>s,pq:()=>i,qE:()=>o,rj:()=>m,sR:()=>n,vN:()=>_});var t=e(2140362605);const n=(0,t.Ay)("Resets Slack Connect Invites to the provided inbound/outbound connect invites");n.meta={name:"createAction",key:"createActionresetConnectInvites",description:"Resets Slack Connect Invites to the provided inbound/outbound connect invites"};const s=(0,t.Ay)("Resets Slack Connect Invites to the provided inbound/outbound pending connect invites");s.meta={name:"createAction",key:"createActionresetPendingConnectInvites",description:"Resets Slack Connect Invites to the provided inbound/outbound pending connect invites"};const a=(0,t.Ay)("Upserts a Slack Connect Invite");a.meta={name:"createAction",key:"createActionupsertConnectInvite",description:"Upserts a Slack Connect Invite"};const c=(0,t.Ay)("Upserts a pending Slack Connect Invite");c.meta={name:"createAction",key:"createActionupsertPendingConnectInvite",description:"Upserts a pending Slack Connect Invite"};const o=(0,t.Ay)("Removes a Slack Connect Invite");o.meta={name:"createAction",key:"createActionremoveConnectInvite",description:"Removes a Slack Connect Invite"};const r=(0,t.Ay)("Removes a pending Slack Connect Invite");r.meta={name:"createAction",key:"createActionremovePendingConnectInvite",description:"Removes a pending Slack Connect Invite"};const l=(0,t.Ay)("Sets freshness flag for Slack Connect invites");l.meta={name:"createAction",key:"createActionsetAreInvitesFresh",description:"Sets freshness flag for Slack Connect invites"};const _=(0,t.Ay)("Sets whether logged-in member's email has been verified for Slack Connect visibility purposes");_.meta={name:"createAction",key:"createActionsetIsEmailVerified",description:"Sets whether logged-in member's email has been verified for Slack Connect visibility purposes"};const d=(0,t.Ay)("Sets whether logged-in member's email verification has failed");d.meta={name:"createAction",key:"createActionsetIsUserVerificationFetchError",description:"Sets whether logged-in member's email verification has failed"};const i=(0,t.Ay)("Upserts an acceptance eligibility result for a Slack Connect channel invite");i.meta={name:"createAction",key:"createActionupsertChannelConnectInviteAcceptanceEligibilityResult",description:"Upserts an acceptance eligibility result for a Slack Connect channel invite"};const m=(0,t.Ay)("Upserts an acceptance eligibility result for a Slack Connect DM invite");m.meta={name:"createAction",key:"createActionupsertDmConnectInviteAcceptanceEligibilityResult",description:"Upserts an acceptance eligibility result for a Slack Connect DM invite"};const h=(0,t.Ay)("Upserts whether an acceptance attempt has failed for a specific Slack Connect invite");h.meta={name:"createAction",key:"createActionupsertHasConnectInviteAcceptanceFailed",description:"Upserts whether an acceptance attempt has failed for a specific Slack Connect invite"};const v=(0,t.Ay)("Sets whether we are currently switching workspaces");v.meta={name:"createAction",key:"createActionsetIsSwitchingWorkspaces",description:"Sets whether we are currently switching workspaces"}},1496122061:(z,A,e)=>{"use strict";e.d(A,{d:()=>d});var t=e(9706240641),n=e.n(t),s=e(1031947056),a=e(320199792),c=e(5914498199),o=e(5670953896),r=e(1605540670),l=e(3243667193),_=e(2368561198);const d=(0,s.Ay)("Fetch and reset the result of connectInvites.listPending for inbound/outbound invites",function(){var i=(0,t.coroutine)(function*(m,h,v){let{reason:y}=v,T;const I=[l.k.Channel,l.k.Im];(0,_.i)(h())&&I.push(l.k.Workspace);const g=yield m((0,r.O)({reason:y,inviteTypes:I,onlyPendingInvites:!0}));if(g!=null&&g.connect_invites){T=g.connect_invites;const E=T.filter(a.Ef),f=T.filter(a.I4);m((0,c.R)({connectInvites:T})),m((0,o.ij)({pendingInboundConnectInvites:E,pendingOutboundConnectInvites:f}))}return T||[]});return function(m,h,v){return i.apply(this,arguments)}}());d.meta={name:"createThunk",key:"createThunkfetchAndResetAllPendingConnectInvites",description:"Fetch and reset the result of connectInvites.listPending for inbound/outbound invites"}},6111266013:(z,A,e)=>{"use strict";e.d(A,{p:()=>d});var t=e(9706240641),n=e.n(t),s=e(1031947056),a=e(3622175906),c=e(1605540670),o=e(5914498199),r=e(5670953896),l=e(3243667193),_=e(2368561198);const d=(0,s.Ay)("Fetch and upsert the result of connectInvites.list for inbound/outbound invites",function(){var i=(0,t.coroutine)(function*(m,h,v){let{reason:y,direction:T,includeInviteRequests:I}=v,p;const g=[l.k.Channel,l.k.Im];(0,_.i)(h())&&g.push(l.k.Workspace);const f=yield m((0,c.O)({reason:y,direction:T,inviteTypes:g,includeInviteRequests:I}));if(f!=null&&f.connect_invites){p=f.connect_invites,m((0,o.R)({connectInvites:p}));const O={inboundConnectInvites:T===a.D.Incoming?p:void 0,outboundConnectInvites:T===a.D.Outgoing?p:void 0};m((0,r.sR)(O))}return p||[]});return function(m,h,v){return i.apply(this,arguments)}}());d.meta={name:"createThunk",key:"createThunkfetchAndResetConnectInvites",description:"Fetch and upsert the result of connectInvites.list for inbound/outbound invites"}},5914498199:(z,A,e)=>{"use strict";e.d(A,{R:()=>o});var t=e(9706240641),n=e.n(t),s=e(1031947056),a=e(7679955939),c=e(320199792);const o=(0,s.Ay)("Upsert any non-local members referenced in the specified connect invites",function(){var r=(0,t.coroutine)(function*(l,_,d){let{connectInvites:i}=d;const m=[];i.forEach(h=>{const v=(0,c.$N)(h);if((0,c.I4)(h)&&v&&v.forEach(y=>{m.push((0,c.mZ)(y))}),(0,c.Ef)(h)){m.push((0,c.y1)(h));const y=(0,c.kR)(h);y&&m.push(y)}}),l((0,a.Ay)({members:m}))});return function(l,_,d){return r.apply(this,arguments)}}());o.meta={name:"createThunk",key:"createThunkupsertMembersFromConnectInvites",description:"Upsert any non-local members referenced in the specified connect invites"}},6168781067:(z,A,e)=>{"use strict";e.d(A,{A:()=>c});var t=e(1185969935),n=e(2456103428);const s={serviceOnline:!0,lastSocketActivity:0,clientOnline:!0,lastClientConnection:Date.now(),lastSocketConnection:0},c=(0,t.Ay)({},s,{storeKey:"connectivity",persistenceEnabled:!1}).on(n.pm,(o,r)=>({...o,serviceOnline:!!r})).on(n.Uj,o=>o===s?{...o,lastSocketActivity:Date.now()}:(o.lastSocketActivity=Date.now(),o)).on(n.p9,(o,r)=>({...o,clientOnline:!!r,lastClientConnection:Date.now()})).on(n.hM,o=>({...o,lastSocketConnection:Date.now()}))},1314103953:(z,A,e)=>{"use strict";e.d(A,{b:()=>s,k:()=>n});var t=e(2140362605);const n=(0,t.Ay)("Set a value that represents whether we are currently in the boot phase");n.meta={name:"createAction",key:"createActionsetBootInFlight",description:"Set a value that represents whether we are currently in the boot phase"};const s=(0,t.Ay)("Set a value that represents whether we are currently performing a warm boot");s.meta={name:"createAction",key:"createActionsetWarmBootInFlight",description:"Set a value that represents whether we are currently performing a warm boot"}},9469211187:(z,A,e)=>{"use strict";e.d(A,{d:()=>s,f:()=>n});var t=e(2140362605);const n=(0,t.Ay)("Remove prefs for a given channel");n.meta={name:"createAction",key:"createActionremovePrefsForConversation",description:"Remove prefs for a given channel"};const s=(0,t.Ay)("Set channel prefs associated with a given channel");s.meta={name:"createAction",key:"createActionsetConversationsListPrefs",description:"Set channel prefs associated with a given channel"}},7914670207:(z,A,e)=>{"use strict";e.d(A,{Dq:()=>v,YO:()=>y,im:()=>I});var t=e(9706240641),n=e.n(t),s=e(3398586081),a=e(6639221719),c=e(8352634987),o=e(6422693406),r=e(4423055085),l=e(1031947056),_=e(6533394955),d=e(9469211187),i=e(8081461848);const m=(0,l.Ay)("Fetch and upsert channel list prefs",function(){var g=(0,t.coroutine)(function*(E,f,O){let{channelId:C,teamId:M}=O;const D=yield E((0,a.U)({channel:C,reason:"client_redux_store"})),{prefs:P}=D;E((0,d.d)({channelId:C,prefs:P})),T(M,C)});return function(E,f,O){return g.apply(this,arguments)}}());m.meta={name:"createThunk",key:"createThunkfetchAndUpsertConversationsListPrefs",description:"Fetch and upsert channel list prefs"};const h=(0,s.A)(()=>new c.Ay({storeKey:i.U,fetch:(g,E)=>o.S.map(E,f=>(0,_.dispatchForTeamId)(g,m({channelId:f,teamId:g}))),isEnabled:()=>!0,metricsName:i.U})),v=u((g,E)=>h().markObjectsAsStale(g,[E]),"markConversationsListPrefsAsStale"),y=u((g,E)=>h().markObjectsAsStale(g,E),"markConversationsListPrefsAsStaleForMultipleChannels"),T=u((g,E)=>h().markObjectsAsFresh(g,[E]),"markConversationsListPrefsAsFresh"),I=u((g,E)=>h().maybeRefetch(g,E),"maybeRefetchConversationsListPrefs"),p={fetchAndUpsertConversationsListPrefs:m};(0,r.zv)("conditionalFetchManagerConversationsListPrefs",h)},8081461848:(z,A,e)=>{"use strict";e.d(A,{A:()=>o,U:()=>s});var t=e(1185969935),n=e(9469211187);const s="conversationsListPrefs",a={},o=(0,t.Ay)({},a,{storeKey:s,persistenceEnabled:!0}).on(n.f,(r,l)=>{let{channelId:_}=l;if(!_||!r[_])return r;const d={...r};return delete d[_],d}).on(n.d,(r,l)=>{let{channelId:_,prefs:d}=l;return _?{...r,[_]:d}:r})},2527994834:(z,A,e)=>{"use strict";e.d(A,{Q:()=>o});var t=e(3385422400),n=e(8847766420),s=e(7914670207),a=e(8040098042);const c=u((r,l)=>{var _;const d=(0,n.ZT)(r);if(!d||!(0,a.A)(l))return null;(0,s.im)(d,l);var i;return(i=r==null||(_=r.conversationsListPrefs)===null||_===void 0?void 0:_[l])!==null&&i!==void 0?i:null},"getConversationsListPrefsByChannelId"),o=(0,t.Mz)((r,l,_)=>c(r,_),(r,l)=>l,(r,l)=>r==null?void 0:r[l])},330221449:(z,A,e)=>{"use strict";e.d(A,{Ot:()=>s,S9:()=>c,X8:()=>n,d$:()=>r,d1:()=>l,en:()=>o,gx:()=>a});var t=e(2140362605);const n=(0,t.Ay)("Adds the new set of custom emoji to the existing store");n.meta={name:"createAction",key:"createActionaddCustomEmoji",description:"Adds the new set of custom emoji to the existing store"};const s=(0,t.Ay)("Resets the array of custom emoji in the store");s.meta={name:"createAction",key:"createActionsetNewCustomEmojiData",description:"Resets the array of custom emoji in the store"};const a=(0,t.Ay)("Removes the specified custom emoji from the store");a.meta={name:"createAction",key:"createActionremoveCustomEmoji",description:"Removes the specified custom emoji from the store"};const c=(0,t.Ay)("Renames a disabled custom emoji");c.meta={name:"createAction",key:"createActionrenameCustomEmoji",description:"Renames a disabled custom emoji"};const o=(0,t.Ay)("Set the loading status for the API request when a new page is loading");o.meta={name:"createAction",key:"createActionsetIsLoadingNewPage",description:"Set the loading status for the API request when a new page is loading"};const r=(0,t.Ay)("Set the loading status for the API request when a user searches for emojis");r.meta={name:"createAction",key:"createActionsetIsLoadingNewSearchQuery",description:"Set the loading status for the API request when a user searches for emojis"};const l=(0,t.Ay)("Set the current sort category and direction for the table");l.meta={name:"createAction",key:"createActionsetSort",description:"Set the current sort category and direction for the table"}},1484767411:(z,A,e)=>{"use strict";e.d(A,{o:()=>n});var t=e(2140362605);const n=(0,t.Ay)("Record that a message was deleted");n.meta={name:"createAction",key:"createActionrecordMessageDeleted",description:"Record that a message was deleted"}},6739248722:(z,A,e)=>{"use strict";e.d(A,{k:()=>n});var t=e(9829579108);const n=(0,t.Ay)((s,a)=>{let{channelId:c,ts:o}=a;return s&&s.deletedMessages&&s.deletedMessages[c]&&!!s.deletedMessages[c][o]});n.meta={name:"createSelector",key:"createSelectorwasMessageDeleted",description:(s,a)=>{let{channelId:c,ts:o}=a;return s&&s.deletedMessages&&s.deletedMessages[c]&&!!s.deletedMessages[c][o]}}},1378315125:(z,A,e)=>{"use strict";e.d(A,{$3:()=>l,Bt:()=>o,Ez:()=>s,LS:()=>d,Mk:()=>a,NN:()=>m,XF:()=>c,Y$:()=>h,Yv:()=>n,_F:()=>_,jC:()=>i,n9:()=>v,oR:()=>T,um:()=>y,yz:()=>r});var t=e(2140362605);const n=(0,t.Ay)("Sets the highlight property of a download");n.meta={name:"createAction",key:"createActioninternalSetDownloadHighlight",description:"Sets the highlight property of a download"};const s=(0,t.Ay)("An update of the desktop state from the desktop app");s.meta={name:"createAction",key:"createActionupdateFromDesktop",description:"An update of the desktop state from the desktop app"};const a=(0,t.Ay)("An update of the window frame state");a.meta={name:"createAction",key:"createActionupdateWindowFrameState",description:"An update of the window frame state"};const c=(0,t.Ay)("Starts a download on the desktop app");c.meta={name:"createAction",key:"createActionstartDesktopDownload",description:"Starts a download on the desktop app"};const o=(0,t.Ay)("Pauses a download on the desktop app");o.meta={name:"createAction",key:"createActionpauseDesktopDownload",description:"Pauses a download on the desktop app"};const r=(0,t.Ay)("Resumes a download on the desktop app");r.meta={name:"createAction",key:"createActionresumeDesktopDownload",description:"Resumes a download on the desktop app"};const l=(0,t.Ay)("Cancels a download on the desktop app");l.meta={name:"createAction",key:"createActioncancelDesktopDownload",description:"Cancels a download on the desktop app"};const _=(0,t.Ay)("Clears all stopped downloads for the active team");_.meta={name:"createAction",key:"createActionclearTeamDesktopDownloads",description:"Clears all stopped downloads for the active team"};const d=(0,t.Ay)("Removes a download on the desktop app");d.meta={name:"createAction",key:"createActionremoveDesktopDownload",description:"Removes a download on the desktop app"};const i=(0,t.Ay)("Retries a download on the desktop app");i.meta={name:"createAction",key:"createActionretryDesktopDownload",description:"Retries a download on the desktop app"};const m=(0,t.Ay)("Opens a file downloaded by the desktop app");m.meta={name:"createAction",key:"createActionopenDesktopDownload",description:"Opens a file downloaded by the desktop app"};const h=(0,t.Ay)("Shows the folder that contains the downloaded file");h.meta={name:"createAction",key:"createActionshowDesktopDownload",description:"Shows the folder that contains the downloaded file"};const v=(0,t.Ay)("Toggles the performance monitor");v.meta={name:"createAction",key:"createActiontogglePerformanceMonitor",description:"Toggles the performance monitor"};const y=(0,t.Ay)("Sets the currently active team in the SSB");y.meta={name:"createAction",key:"createActionsetActiveTeam",description:"Sets the currently active team in the SSB"};const T=(0,t.Ay)("Update canvas system text settings in the SSB");T.meta={name:"createAction",key:"createActionsetCanvasSystemTextSettings",description:"Update canvas system text settings in the SSB"}},7902571278:(z,A,e)=>{"use strict";e.d(A,{A:()=>m});var t=e(1185969935),n=e(4103274853),s=e(3571452446),a=e(2003990933),c=e(7715417323),o=e(3245843483),r=e(1378315125);const l=u((h,v)=>(0,n.A)(h,(y,T)=>(0,n.A)(y,(I,p)=>v(T,p,I))),"mapDownloads"),_=u(h=>({...{app:{},environment:{},settings:{},...(0,s.A)(h,["app","settings","environment"]),windows:(0,n.A)((h==null?void 0:h.windows)||{},y=>({frame:(0,s.A)(y.frame,["isFullScreen","isFocused","isVisible","hasVibrancy","isCurrentlyAudible"])})),downloads:l((h==null?void 0:h.downloads)||{},(y,T,I)=>({...I,highlight:!1})),debug:{isPerformanceMonitorEnabled:!1}},activeTeamId:(0,a.A)(window,"desktop.reduxHelper.state.selectedTeamId")}),"initializeState"),d=(0,o.g9M)()?_((0,a.A)(window,"desktop.redux.getState",c.A)()):null,m=(0,t.Ay)({},d,{storeKey:"desktop",persistenceEnabled:!1}).on(r.Ez,(h,v)=>{const y=v.downloads?l(v.downloads,(T,I,p)=>({...p,highlight:(0,a.A)(h.downloads,[T,I,"highlight"],!1)})):h.downloads;return{...h,...v,downloads:y}}).on(r.Mk,(h,v)=>{let{windowId:y,property:T,value:I}=v;var p,g,E;return{...h,windows:{...h.windows,[y]:{...((p=h.windows)===null||p===void 0?void 0:p[y])||{},frame:{...((g=h.windows)===null||g===void 0||(E=g[y])===null||E===void 0?void 0:E.frame)||{},[T]:I}}}}}).on(r.Yv,(h,v)=>{let{fileId:y,teamId:T,highlight:I}=v;return(0,a.A)(h.downloads,[T,y])?{...h,downloads:{...h.downloads,[T]:{...h.downloads[T],[y]:{...h.downloads[T][y],highlight:I}}}}:h}).on(r.n9,h=>({...h,debug:{...h.debug,isPerformanceMonitorEnabled:!h.debug.isPerformanceMonitorEnabled}})).on(r.um,(h,v)=>v?{...h,activeTeamId:v}:h)},700984029:(z,A,e)=>{"use strict";e.d(A,{AS:()=>s,Fb:()=>n,J3:()=>p,NH:()=>I,Oh:()=>l,Yr:()=>T,ZY:()=>i,cH:()=>d,e$:()=>g,er:()=>y,in:()=>m,lW:()=>h,px:()=>_,tG:()=>v,u7:()=>r});var t=e(2140362605);const n=(0,t.Ay)("Add an array of devices to the device store");n.meta={name:"createAction",key:"createActionclobberDevices",description:"Add an array of devices to the device store"};const s=(0,t.Ay)("Set the sink device for media elements");s.meta={name:"createAction",key:"createActionsetSinkDevice",description:"Set the sink device for media elements"};const a=(0,t.Ay)("Notify middleware of a new preferred device");a.meta={name:"createAction",key:"createActionsetNewPreferredDevice",description:"Notify middleware of a new preferred device"};const c=(0,t.Ay)("");c.meta={name:"createAction",key:"createActionrequestPreviewStreamForDeviceId",description:""};const o=(0,t.Ay)("Stop preview streams");o.meta={name:"createAction",key:"createActionstopPreviewStreams",description:"Stop preview streams"};const r=(0,t.Ay)("");r.meta={name:"createAction",key:"createActionsetPreviewStreams",description:""};const l=(0,t.Ay)("Get screen thumbnails");l.meta={name:"createAction",key:"createActiongetScreenThumbnails",description:"Get screen thumbnails"};const _=(0,t.Ay)("The browser has blocked getUserMedia for cameras");_.meta={name:"createAction",key:"createActionsetCameraIsBlockedByBrowser",description:"The browser has blocked getUserMedia for cameras"};const d=(0,t.Ay)("The browser has blocked getUserMedia for microphones");d.meta={name:"createAction",key:"createActionsetMicrophoneIsBlockedByBrowser",description:"The browser has blocked getUserMedia for microphones"};const i=(0,t.Ay)("The browser has granted getUserMedia access for microphones");i.meta={name:"createAction",key:"createActionsetMicrophoneIsGrantedByBrowser",description:"The browser has granted getUserMedia access for microphones"};const m=(0,t.Ay)("The browser has granted getUserMedia access for cameras");m.meta={name:"createAction",key:"createActionsetCameraIsGrantedByBrowser",description:"The browser has granted getUserMedia access for cameras"};const h=(0,t.Ay)("The browser has blocked getUserMedia for screen recording");h.meta={name:"createAction",key:"createActionsetScreenRecordingIsBlockedByBrowser",description:"The browser has blocked getUserMedia for screen recording"};const v=(0,t.Ay)("The system has blocked getUserMedia access for microphones");v.meta={name:"createAction",key:"createActionsetMicrophoneIsBlockedBySystem",description:"The system has blocked getUserMedia access for microphones"};const y=(0,t.Ay)("The system has granted getUserMedia access for microphones");y.meta={name:"createAction",key:"createActionsetMicrophoneIsGrantedBySystem",description:"The system has granted getUserMedia access for microphones"};const T=(0,t.Ay)("The system has blocked getUserMedia access for cameras");T.meta={name:"createAction",key:"createActionsetCameraIsBlockedBySystem",description:"The system has blocked getUserMedia access for cameras"};const I=(0,t.Ay)("The system has granted getUserMedia access for cameras");I.meta={name:"createAction",key:"createActionsetCameraIsGrantedBySystem",description:"The system has granted getUserMedia access for cameras"};const p=(0,t.Ay)("The system has blocked screen recording");p.meta={name:"createAction",key:"createActionsetScreenshareRecordingIsBlockedBySystem",description:"The system has blocked screen recording"};const g=(0,t.Ay)("Check for system media access");g.meta={name:"createAction",key:"createActionmaybeCheckSystemMediaAccess",description:"Check for system media access"};const E=(0,t.Ay)("Notify middleware that automatic gain control setting has changed");E.meta={name:"createAction",key:"createActionsetAGC",description:"Notify middleware that automatic gain control setting has changed"};const f=(0,t.Ay)("Notify middleware that noise suppression setting has changed");f.meta={name:"createAction",key:"createActionsetNoiseSuppression",description:"Notify middleware that noise suppression setting has changed"}},9365970888:(z,A,e)=>{"use strict";e.d(A,{AZ:()=>i,Ae:()=>h,Hc:()=>O,IO:()=>D,JM:()=>P,SR:()=>C,aA:()=>k,f3:()=>m,ly:()=>d,oG:()=>o,ql:()=>l,yp:()=>I});var t=e(8289365785),n=e(1703559452),s=e(3385422400),a=e(8736071954),c=e(2384831516);const o=(0,c.Mz)(x=>x.device.devices);o.meta={name:"createSelector",key:"createSelectorgetDevices",description:x=>x.device.devices};const r=(0,c.Mz)(x=>x.device.sinkDevice);r.meta={name:"createSelector",key:"createSelectorgetSinkDevice",description:x=>x.device.sinkDevice};const l=(0,c.Mz)((x,F)=>(0,t.A)(x.device.devices[F]));l.meta={name:"createSelector",key:"createSelectorgetPreferredDevice",description:(x,F)=>(0,t.A)(x.device.devices[F])};const _=(0,c.Mz)(x=>x.device.isMicrophoneBlockedByBrowser);_.meta={name:"createSelector",key:"createSelectorisMicrophoneBlockedByBrowser",description:x=>x.device.isMicrophoneBlockedByBrowser};const d=(0,c.Mz)(x=>x.device.isCameraBlockedByBrowser);d.meta={name:"createSelector",key:"createSelectorisCameraBlockedByBrowser",description:x=>x.device.isCameraBlockedByBrowser};const i=(0,s.Mz)(o,_,(x,F)=>y(x)&&!F),m=(0,s.Mz)(o,d,(x,F)=>T(x)&&!F),h=(0,s.Mz)(o,d,(x,F)=>{var W,Y;if(!(!T(x)||F))return x==null||(W=x.camera)===null||W===void 0||(Y=W[0])===null||Y===void 0?void 0:Y.id}),v=(0,c.Mz)(x=>x.device.previewStreams);v.meta={name:"createSelector",key:"createSelectorgetPreviewStreams",description:x=>x.device.previewStreams};function y(x){return x.microphone.length>0}u(y,"isMicrophoneAvailableInDevices");function T(x){return x.camera.length>0}u(T,"isCameraAvailableInDevices");function I(x){var F;return x==null||(F=x.microphone)===null||F===void 0?void 0:F.some(W=>W.label!==void 0)}u(I,"isMicrophoneAvailableForCapturingInDevices");function p(x){return x.camera.some(F=>F.label!==void 0)}u(p,"isCameraAvailableForCapturingInDevices");function g(x){return x.output.some(F=>F.label!==void 0)}u(g,"isOutputAvailableForDisplay");const E=(0,c.Mz)(x=>x.device.isMicrophoneBlockedBySystem);E.meta={name:"createSelector",key:"createSelectorisMicrophoneBlockedBySystem",description:x=>x.device.isMicrophoneBlockedBySystem};const f=(0,c.Mz)(x=>x.device.isCameraBlockedBySystem);f.meta={name:"createSelector",key:"createSelectorisCameraBlockedBySystem",description:x=>x.device.isCameraBlockedBySystem};const O=(0,s.Mz)(_,E,(x,F)=>x||F),C=(0,s.Mz)(d,f,(x,F)=>x||F),M=u(x=>{if(!x)return!1;const F=["bluetooth","hands-free","airpods","wireless"];return(0,n.A)(F,W=>x==null?void 0:x.toLowerCase().includes(W))},"doesLabelHintBluetooth"),D=(0,c.Mz)(x=>{const F=x.device.devices,W=(0,t.A)(F[a.lW.Microphone]);return M(W==null?void 0:W.label)});D.meta={name:"createSelector",key:"createSelectorisSelectedMicrophoneBluetooth",description:x=>{const F=x.device.devices,W=(0,t.A)(F[a.lW.Microphone]);return M(W==null?void 0:W.label)}};const P=(0,c.Mz)(x=>{const F=x.device.devices,W=(0,t.A)(F[a.Q4]);return M(W==null?void 0:W.label)});P.meta={name:"createSelector",key:"createSelectorisSelectedSpeakerBluetooth",description:x=>{const F=x.device.devices,W=(0,t.A)(F[a.Q4]);return M(W==null?void 0:W.label)}};const k=(0,c.Mz)(x=>{const F=x.device.devices,W=(0,t.A)(F[a.lW.Microphone]),Y=(0,t.A)(F[a.Q4]);return!!W&&!!Y&&W.groupId===Y.groupId});k.meta={name:"createSelector",key:"createSelectorisAudioOnSameDevice",description:x=>{const F=x.device.devices,W=(0,t.A)(F[a.lW.Microphone]),Y=(0,t.A)(F[a.Q4]);return!!W&&!!Y&&W.groupId===Y.groupId}}},7600673124:(z,A,e)=>{"use strict";e.d(A,{y:()=>n});var t=e(5818203962);const n=u((s,a)=>(0,t.I$)(s,a),"getIsMemberDisconnectedById")},4318855015:(z,A,e)=>{"use strict";e.d(A,{$x:()=>c,H9:()=>n,at:()=>r,j_:()=>_,jy:()=>l,o2:()=>a,qw:()=>s,su:()=>o});var t=e(2140362605);const n=(0,t.Ay)("Mark emoji collections as fetch (or not fetched");n.meta={name:"createAction",key:"createActionsetEmojiCollectionsFetched",description:"Mark emoji collections as fetch (or not fetched"};const s=(0,t.Ay)("Set and replace emoji collections");s.meta={name:"createAction",key:"createActionsetEmojiCollections",description:"Set and replace emoji collections"};const a=(0,t.Ay)("Signals that an emoji collection has been installed");a.meta={name:"createAction",key:"createActioninstallEmojiCollection",description:"Signals that an emoji collection has been installed"};const c=(0,t.Ay)("Signals that an emoji collection has been uninstalled");c.meta={name:"createAction",key:"createActionuninstallEmojiCollection",description:"Signals that an emoji collection has been uninstalled"};const o=(0,t.Ay)("Signals that badges should be added post-install");o.meta={name:"createAction",key:"createActionbadgeEmojiCollection",description:"Signals that badges should be added post-install"};const r=(0,t.Ay)("Signals that the message input badge should be removed");r.meta={name:"createAction",key:"createActionremoveEmojiCollectionInputBadge",description:"Signals that the message input badge should be removed"};const l=(0,t.Ay)("Signals that the message tab badge should be removed from the emoji picker");l.meta={name:"createAction",key:"createActionremoveEmojiCollectionTabBadge",description:"Signals that the message tab badge should be removed from the emoji picker"};const _=(0,t.Ay)("Increments emoji click count");_.meta={name:"createAction",key:"createActionincrementEmojiClickCount",description:"Increments emoji click count"}},3004085654:(z,A,e)=>{"use strict";e.d(A,{Cs:()=>m,Ur:()=>T,_J:()=>I,_o:()=>v,fl:()=>p,nQ:()=>h,pG:()=>y,uI:()=>i});var t=e(2101927269),n=e(9113979368),s=e(2141441167),a=e(2048121586),c=e(6696292586),o=e(9829579108),r=e(3385422400),l=e(2047021170);const _=60*60*24*14,d=(0,o.Ay)((g,E)=>g&&g.emojiCollections&&g.emojiCollections.collections&&g.emojiCollections.collections[E]);d.meta={name:"createSelector",key:"createSelectorgetEmojiCollection",description:(g,E)=>g&&g.emojiCollections&&g.emojiCollections.collections&&g.emojiCollections.collections[E]};const i=(0,o.Ay)(g=>g&&g.emojiCollections&&g.emojiCollections.collections);i.meta={name:"createSelector",key:"createSelectorgetEmojiCollections",description:g=>g&&g.emojiCollections&&g.emojiCollections.collections};const m=(0,r.Mz)(i,g=>(0,t.A)(g,E=>E.installed)),h=(0,o.Ay)(g=>g&&g.emojiCollections&&g.emojiCollections.hasFetched);h.meta={name:"createSelector",key:"createSelectorhasFetchedEmojiCollections",description:g=>g&&g.emojiCollections&&g.emojiCollections.hasFetched};const v=(0,o.Ay)(g=>g&&g.emojiCollections&&g.emojiCollections.inputBadge);v.meta={name:"createSelector",key:"createSelectorgetInputBadge",description:g=>g&&g.emojiCollections&&g.emojiCollections.inputBadge};const y=(0,o.Ay)(g=>g&&g.emojiCollections&&g.emojiCollections.tabBadge);y.meta={name:"createSelector",key:"createSelectorgetTabBadge",description:g=>g&&g.emojiCollections&&g.emojiCollections.tabBadge};const T=(0,o.Ay)(g=>g&&g.emojiCollections&&g.emojiCollections.emojiClickCount);T.meta={name:"createSelector",key:"createSelectorgetEmojiClickCount",description:g=>g&&g.emojiCollections&&g.emojiCollections.emojiClickCount};const I=(0,o.Ay)(g=>{const E=i(g);if((0,n.A)(E))return null;const f=(0,s.A)(E);return(0,a.A)(f,O=>O.date_create)});I.meta={name:"createSelector",key:"createSelectorgetMostRecentPack",description:g=>{const E=i(g);if((0,n.A)(E))return null;const f=(0,s.A)(E);return(0,a.A)(f,O=>O.date_create)}};const p=(0,o.Ay)(g=>{const E=(0,l.ty)(g,"emoji_packs_most_recent_available_time");if(!(0,c.A)(E))return!1;const f=E+_;return Date.now()/1e3<f});p.meta={name:"createSelector",key:"createSelectorisWithinExpirationDateOfNewPack",description:g=>{const E=(0,l.ty)(g,"emoji_packs_most_recent_available_time");if(!(0,c.A)(E))return!1;const f=E+_;return Date.now()/1e3<f}}},7564917982:(z,A,e)=>{"use strict";e.d(A,{H:()=>h});var t=e(7156798807),n=e(1031947056),s=e(1194535350),a=e(4724591729),c=e(3004085654),o=e(4318855015),r=e(2048121586),l=e(2047021170),_=e(5510392579),d=e(387484329);const i=(0,n.Ay)("handle updating prefs if new emoji pack has become available",(v,y,T)=>{let{collections:I}=T;const p=y(),g=(0,_.h3)(p),E=(0,l.ty)(p,"emoji_packs_most_recent_available_time")||0,f=(0,r.A)(I,D=>D.date_create),{date_create:O,installed:C}=f||{};(g||C)&&O>E&&v((0,d.Hj)({emoji_packs_most_recent_available_time:Date.now()/1e3,emoji_packs_clicked_picker_cta:!1,emoji_packs_clicked_picker_post_install_cta:!1,emoji_packs_clicked_collection_cta:!1}))});i.meta={name:"createThunk",key:"createThunkhandlePotentialNewPack",description:"handle updating prefs if new emoji pack has become available"};const m=i,h=(0,n.Ay)("Process and add emoji collections",(v,y,T)=>{let{reason:I}=T;const p=y();(0,c.nQ)(p)||(v((0,o.H9)({hasFetched:!0})),v((0,s.KO)({reason:I})).then(g=>{const E=g.installed||[],f=g.available||[],O=(0,t.A)(E,"id"),C=f.map(M=>({...M,installed:!!O[M.id],localEmoji:O[M.id]?O[M.id].emoji:M.emoji}));v(m({collections:C})),(0,a.Cu)()?v((0,o.qw)({collections:C.filter(M=>!["1044122771874","11"].includes(M.id))})):v((0,o.qw)({collections:C}))}).catch(()=>{v((0,o.H9)({hasFetched:!1}))}))});h.meta={name:"createThunk",key:"createThunkfetchAllEmojiCollections",description:"Process and add emoji collections"}},4060284745:(z,A,e)=>{"use strict";e.d(A,{D:()=>n,V:()=>s});var t=e(2140362605);const n=(0,t.Ay)("Add ephemeral message reference to store");n.meta={name:"createAction",key:"createActionaddToEphemeralMessageMap",description:"Add ephemeral message reference to store"};const s=(0,t.Ay)("Remove ephemeral message reference");s.meta={name:"createAction",key:"createActionremoveFromEphemeralMessageMap",description:"Remove ephemeral message reference"}},5468652247:(z,A,e)=>{"use strict";e.d(A,{F:()=>t});const t={disconnectedFeedback:"disconnected_feedback",createdGoogleDriveDocument:"created_google_drive_document",enablePopups:"enable_popups",generalPostingRestricted:"general_posting_restricted",genericPostingRestricted:"generic_posting_restricted",fileTypeHasNoHandler:"file_type_has_no_handler",boxFilePickerError:"box_file_picker_error",gdriveShareFileError:"gdrive_share_file_error",onedriveSdkError:"onedrive_sdk_error",tempSlashCmdFeedback:"temp_slash_cmd_feedback",threadsTempSlashCmdFeedback:"threads_temp_slash_cmd_feedback",uncaughtThirdPartyCallError:"uncaught_third_party_call_error",findAnAdminPrompt:"find_an_admin_prompt",unhandledGdriveCreate:"unhandled_gdrive_create",fileCreatedViaBookmark:"file_created_via_bookmark",scheduleSendError:"schedule_send_error"}},1479277172:(z,A,e)=>{"use strict";e.d(A,{H:()=>_});var t=e(6313685253),n=e(3571452446),s=e(2208015175),a=e(9829579108),c=e(796111729),o=e(7606781622);const r="EPHEMERAL MESSAGES",l=(0,a.Ay)(d=>d.ephemeralMessages);l.meta={name:"createSelector",key:"createSelectorgetEphemeralMessagesState",description:d=>d.ephemeralMessages};const _=(0,a.Ay)((d,i)=>{const{ephemeralType:m,channelId:h,threadTs:v}=i,y=(0,c.Ay)({state:d});if(v&&!h)return y.error(r,"Can't remove ephemeral messages by thread without channel ID"),[];i.channel&&!h&&y.warn(r,"`channel` passed to `getEphemeralMessagesByType`. Did you mean `channelId`?");const I=l(d)[m];return(0,t.A)(h?(0,n.A)(I,[h]):I,(p,g,E)=>((0,s.A)(g,(f,O)=>{if(!f)return;const C=(0,o.Ld)(d,E,O);C&&(!v||C.thread_ts===v)&&p.push(C)}),p),[])});_.meta={name:"createSelector",key:"createSelectorgetEphemeralMessagesByType",description:(d,i)=>{const{ephemeralType:m,channelId:h,threadTs:v}=i,y=(0,c.Ay)({state:d});if(v&&!h)return y.error(r,"Can't remove ephemeral messages by thread without channel ID"),[];i.channel&&!h&&y.warn(r,"`channel` passed to `getEphemeralMessagesByType`. Did you mean `channelId`?");const I=l(d)[m];return(0,t.A)(h?(0,n.A)(I,[h]):I,(p,g,E)=>((0,s.A)(g,(f,O)=>{if(!f)return;const C=(0,o.Ld)(d,E,O);C&&(!v||C.thread_ts===v)&&p.push(C)}),p),[])}}},359615813:(z,A,e)=>{"use strict";e.d(A,{F:()=>r});var t=e(1031947056),n=e(9608395637),s=e(1049138627),a=e(4060284745),c=e(4241074559);const o=(0,t.Ay)("Add an ephemeral message to messages-store and ephemeral message map",(l,_,d)=>{let{ephemeralType:i,message:m}=d;const h=_(),v=(0,c.$)(h,m);v.ts||(v.ts=(0,n.A)()),i&&(v._ephemeral_type=i),l((0,s.A)([v])),i&&l((0,a.D)({ephemeralType:i,channelId:v.channel,ts:v.ts}))});o.meta={name:"createThunk",key:"createThunkaddEphemeralMessage",description:"Add an ephemeral message to messages-store and ephemeral message map"};const r=(0,t.Ay)("Add an ephemeral message from a bot (defaults to Slackbot)",(l,_,d)=>{let{ephemeralType:i,message:m}=d,h;m.username?h={...m,subtype:"bot_message"}:h={...m,user:"USLACKBOT"},l(o({ephemeralType:i,message:h}))});r.meta={name:"createThunk",key:"createThunkaddEphemeralBotMessage",description:"Add an ephemeral message from a bot (defaults to Slackbot)"}},7610481478:(z,A,e)=>{"use strict";e.d(A,{w:()=>r});var t=e(8786006583),n=e(1031947056),s=e(10127715),a=e(4241074559),c=e(359615813),o=e(1479277172);const r=(0,n.Ay)("Add or update the last ephemeral message of a certain type",(l,_,d)=>{let{ephemeralType:i,message:m,ignoreExistingMessage:h=!1}=d;const v=_(),y=m.channel,T=m.thread_ts;if(i){const I=i&&(0,t.A)((0,o.H)(v,{ephemeralType:i,channelId:y,threadTs:T}));if(I&&I.ts&&!h){l((0,s.Kc)([{...(0,a.$)(v,m),ts:I.ts,channel:y,thread_ts:T}]));return}}l((0,c.F)({ephemeralType:i,message:m}))});r.meta={name:"createThunk",key:"createThunkaddOrFlashEphemeralBotMsg",description:"Add or update the last ephemeral message of a certain type"}},5221490142:(z,A,e)=>{"use strict";e.d(A,{P:()=>c});var t=e(1031947056),n=e(9121476043),s=e(1479277172),a=e(4060284745);const c=(0,t.Ay)("Remove ephemeral messages by type, channel, and/or thread",(o,r,l)=>{const _=r();(0,s.H)(_,l).forEach(i=>{o((0,n.A)({channelId:i.channel,ts:i.ts||""})),o((0,a.V)({ephemeralType:l.ephemeralType,channelId:i.channel,ts:i.ts}))})});c.meta={name:"createThunk",key:"createThunkremoveEphemeralMsgsByType",description:"Remove ephemeral messages by type, channel, and/or thread"}},4241074559:(z,A,e)=>{"use strict";e.d(A,{$:()=>n});var t=e(6333950786);const n=u((s,a)=>{const c={...a,type:"message",is_ephemeral:!0,text:(0,t.A)(s,a.text,{isInternalMessage:!0})};return c.username?c.subtype="bot_message":c.user="USLACKBOT",c},"buildBotMessage")},1835683237:(z,A,e)=>{"use strict";e.d(A,{N:()=>n,Y:()=>s});var t=e(2140362605);const n=(0,t.Ay)("Overwrites our store of the teams in a given externally shared channel");n.meta={name:"createAction",key:"createActionupdateExtSharedChannelTeams",description:"Overwrites our store of the teams in a given externally shared channel"};const s=(0,t.Ay)("Updates whether or not disconnect is in progress for the given team");s.meta={name:"createAction",key:"createActionupdateIsDisconnectInProgressForTeam",description:"Updates whether or not disconnect is in progress for the given team"}},642120761:(z,A,e)=>{"use strict";e.d(A,{D1:()=>l,ap:()=>_,ez:()=>r});var t=e(6422693406),n=e(3398586081),s=e(8352634987),a=e(6533394955),c=e(7212217314);const o=(0,n.A)(()=>new s.Ay({storeKey:"extSharedChannelTeams",fetch:(d,i)=>{const m=i.slice(0,5);return t.S.map(m,h=>(0,a.dispatchForTeamId)(d,(0,c.N)({channelId:h})))},isEnabled:()=>!0,metricsName:"team-connections"})),r=u((d,i)=>{!d||!i||o().maybeRefetch(d,i)},"maybeRefetch"),l=u((d,i)=>o().markObjectsAsStale(d,i),"markObjectsAsStale"),_=u((d,i)=>o().isObjectFresh(d,i),"isObjectFresh")},6303366080:(z,A,e)=>{"use strict";e.d(A,{NQ:()=>h,dE:()=>v,df:()=>m,kz:()=>y,s3:()=>d,xT:()=>i});var t=e(9829579108),n=e(3385422400),s=e(8847766420),a=e(642120761),c=e(5373179915),o=e(5751973043),r=e(2105507084);function l(T,I){var p;if(!(0,c.x)(T,I))return(0,a.ez)((0,s.ZT)(T),I),T==null||(p=T.extSharedChannelTeams)===null||p===void 0?void 0:p[I]}u(l,"getBaseState");const _=(0,n.Mz)((T,I)=>(0,r.X)(T,I),T=>T.length?T.map(I=>({teamId:I})):o.Ml),d=(0,t.Ay)((T,I)=>{var p;return(0,c.x)(T,I)?_(T,I):((p=l(T,I))===null||p===void 0?void 0:p.connections)||o.Ml});d.meta={name:"createSelector",key:"createSelectorgetTeamConnectionsForChannelId",description:(T,I)=>{var p;return(0,c.x)(T,I)?_(T,I):((p=l(T,I))===null||p===void 0?void 0:p.connections)||o.Ml}};const i=(0,t.Ay)((T,I)=>{var p;return(0,c.x)(T,I)?o.Ml:((p=l(T,I))===null||p===void 0?void 0:p.pendingConnections)||o.Ml});i.meta={name:"createSelector",key:"createSelectorgetPendingTeamConnectionsForChannelId",description:(T,I)=>{var p;return(0,c.x)(T,I)?o.Ml:((p=l(T,I))===null||p===void 0?void 0:p.pendingConnections)||o.Ml}};const m=(0,t.Ay)((T,I)=>{var p;return(0,c.x)(T,I)?o.Ml:((p=l(T,I))===null||p===void 0?void 0:p.previousConnections)||o.Ml});m.meta={name:"createSelector",key:"createSelectorgetPreviousTeamConnectionsForChannelId",description:(T,I)=>{var p;return(0,c.x)(T,I)?o.Ml:((p=l(T,I))===null||p===void 0?void 0:p.previousConnections)||o.Ml}};const h=(0,t.Ay)((T,I)=>{var p;if(!(0,c.x)(T,I))return(p=l(T,I))===null||p===void 0?void 0:p.conversationHostId});h.meta={name:"createSelector",key:"createSelectorgetConversationHostTeamIdForChannelId",description:(T,I)=>{var p;if(!(0,c.x)(T,I))return(p=l(T,I))===null||p===void 0?void 0:p.conversationHostId}};const v=(0,t.Ay)((T,I)=>{var p;return!I||(0,c.x)(T,I)?!1:!!(!((p=l(T,I))===null||p===void 0)&&p.isChannelSponsored)});v.meta={name:"createSelector",key:"createSelectorgetChannelIsSponsored",description:(T,I)=>{var p;return!I||(0,c.x)(T,I)?!1:!!(!((p=l(T,I))===null||p===void 0)&&p.isChannelSponsored)}};const y=(0,t.Ay)((T,I)=>{var p,g,E;if((0,c.x)(T,I))return!!(0,r.X)(T,I).length;const f=l(T,I),O=(f==null||(p=f.connections)===null||p===void 0?void 0:p.length)||0,C=(f==null||(g=f.pendingConnections)===null||g===void 0?void 0:g.length)||0,M=(f==null||(E=f.previousConnections)===null||E===void 0?void 0:E.length)||0;return O>1||C>0||M>0});y.meta={name:"createSelector",key:"createSelectordoesChannelHaveExternalTeamConnections",description:(T,I)=>{var p,g,E;if((0,c.x)(T,I))return!!(0,r.X)(T,I).length;const f=l(T,I),O=(f==null||(p=f.connections)===null||p===void 0?void 0:p.length)||0,C=(f==null||(g=f.pendingConnections)===null||g===void 0?void 0:g.length)||0,M=(f==null||(E=f.previousConnections)===null||E===void 0?void 0:E.length)||0;return O>1||C>0||M>0}}},7212217314:(z,A,e)=>{"use strict";e.d(A,{N:()=>r});var t=e(1031947056),n=e(6422693406),s=e(1835683237),a=e(8040098042),c=e(796111729),o=e(8864306005);const r=(0,t.Ay)("Fetch teams connected to a shared channel and upsert into frontend store.",(l,_,d)=>{let{channelId:i,reason:m="fetchAndUpsertSharedChannelTeamConnections"}=d;return(0,a.A)(i)?l((0,o.I)({reason:m,channel:i})).then(h=>{const{channel:v,connections:y=[],pending_connections:T=[],previous_connections:I=[]}=h;return l((0,s.N)({id:v.id,conversationHostId:v.conversation_host_id,isChannelSponsored:v.is_sponsored,connections:y,pendingConnections:T,previousConnections:I})),h}).catch(h=>{throw h}):((0,c.Ay)({getState:_}).warn(`fetchAndUpsertSharedChannelTeamConnections called with incorrect channelId type: ${i}`),n.S.resolve())});r.meta={name:"createThunk",key:"createThunkfetchAndUpsertSharedChannelTeamConnections",description:"Fetch teams connected to a shared channel and upsert into frontend store."}},1890276164:(z,A,e)=>{"use strict";e.d(A,{R:()=>n,t:()=>a});var t=e(9829579108);const n=(0,t.Ay)((o,r)=>{var l;return!!(!((l=o.externalTeamIds)===null||l===void 0)&&l[r])});n.meta={name:"createSelector",key:"createSelectorisTeamExternalById",description:(o,r)=>{var l;return!!(!((l=o.externalTeamIds)===null||l===void 0)&&l[r])}};var s;const a=(0,t.Ay)(o=>!!Object.keys((s=o.externalTeamIds)!==null&&s!==void 0?s:{}).length);var c;a.meta={name:"createSelector",key:"createSelectorhasAnyExternalTeam",description:o=>!!Object.keys((c=o.externalTeamIds)!==null&&c!==void 0?c:{}).length}},5549390246:(z,A,e)=>{"use strict";e.d(A,{Y:()=>v});var t=e(9113979368),n=e(9829579108),s=e(2188787324),a=e(8276911661),c=e(8677230210),o=e(8170643398),r=e(9464746668),l=e(3244118357),_=e(1002129445),d=e(4910963364),i=e(8847766420),m=e(735940183);const h=new m.Ay("files"),v=(0,n.Ay)((y,T)=>{if(!T||!(0,s.Vx)(T))return null;let I=h.t("External App");const p=(T==null?void 0:T.bot_user_id)||(T==null?void 0:T.user);if(p){var g;const E=(g=(0,a.nv)(y,p))!==null&&g!==void 0?g:void 0;if((0,o.po)(E)){const f=(0,r.A)(y,E),O=(0,c.AF)(y,f)||void 0,C=(0,l.Hg)(O);if(I=C||I,(0,t.A)(C)&&f){const M=(0,d.G2)(y,{serviceId:f,homeWorkspaceId:(0,l.AW)({bot:O,member:E,currentTeamId:(0,i.ZT)(y)})});I=(0,_.fj)(M)||I}}}return I});v.meta={name:"createSelector",key:"createSelectorgetAppNameForRemoteFile",description:(y,T)=>{if(!T||!(0,s.Vx)(T))return null;let I=h.t("External App");const p=(T==null?void 0:T.bot_user_id)||(T==null?void 0:T.user);if(p){var g;const E=(g=(0,a.nv)(y,p))!==null&&g!==void 0?g:void 0;if((0,o.po)(E)){const f=(0,r.A)(y,E),O=(0,c.AF)(y,f)||void 0,C=(0,l.Hg)(O);if(I=C||I,(0,t.A)(C)&&f){const M=(0,d.G2)(y,{serviceId:f,homeWorkspaceId:(0,l.AW)({bot:O,member:E,currentTeamId:(0,i.ZT)(y)})});I=(0,_.fj)(M)||I}}}return I}}},6415612447:(z,A,e)=>{"use strict";e.d(A,{Y:()=>l,r:()=>r});var t=e(9829579108),n=e(9101533895),s=e(3634593162),a=e(497761763),c=e(2960290117),o=e(6078549397);const r=u(_=>{if((0,c.Ay)(_)){const{fileIdOrQuipThreadId:m=null}=(0,o.EX)(_)||{};if(m&&(0,a.A)(m)){const h=m,v=(0,s.p)(h);return{fileId:h,channelId:v}}}if((0,a.A)(_)){const m=_,h=(0,s.p)(m);return{fileId:m,channelId:h}}const d=_;return{fileId:(0,s.l)(d),channelId:d}},"getIds"),l=(0,t.Ay)(function(_,d){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const{channelId:m}=r(d);return(0,n.OL)(_,m,i)});l.meta={name:"createSelector",key:"createSelectorgetFileChannelById",description:function(_,d){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const{channelId:m}=r(d);return(0,n.OL)(_,m,i)}}},6403218297:(z,A,e)=>{"use strict";e.d(A,{A:()=>o});var t=e(8086952004),n=e(3571452446),s=e(6217320234),a=e(6626377467),c=e(7231740695);function o(r,l){if(!r||!l)return l;const _=l.comments||[],d=(0,t.A)(_,I=>I.id===r.id),i=(0,n.A)(d,["is_starred","_rxn_key"]),m={...d,...r,...i},h=(0,s.A)((0,a.A)([m,..._],"id"),"timestamp"),v=l.initial_comment&&r.id===l.initial_comment.id,y=v?m:l.initial_comment;d||(0,c.bG)(l,r),v&&(0,c.Sx)(l);const T={...l,comments:h};return y&&(T.initial_comment=y),T}u(o,"addCommentToFile")},56562029:(z,A,e)=>{"use strict";e.d(A,{G:()=>a});var t=e(1185969935),n=e(848813706);const s={enabled:!1,container:void 0},a=(0,t.Ay)({},s,{storeKey:"fullscreen",persistenceEnabled:!1}).on(n.K$,c=>({...c,enabled:!0})).on(n.sM,c=>({...c,enabled:!1,container:void 0})).on(n.Hm,(c,o)=>c.container===o?c:{...c,container:o})},2332058678:(z,A,e)=>{"use strict";e.d(A,{r:()=>t,u:()=>n});const t={openCount:0,unreadCount:0},n={issues:{},stats:t,locale:"",zdLocale:"",helpSearchArticles:[],productReleaseCards:[],recommendedArticles:{articles:[],requestId:""},helpSections:[],helpCategories:[],helpNavigation:{categoryId:null},helpTour:null,anchorId:null,isArticleLoaded:!1,isHelpTipHistoryTourActive:!1}},761034736:(z,A,e)=>{"use strict";e.d(A,{fE:()=>he,ZL:()=>de,Fb:()=>G,wB:()=>Ae,Cb:()=>ve,sv:()=>Q,wg:()=>ae,tL:()=>_e,aN:()=>Ie,Mu:()=>ee,Kb:()=>X,cN:()=>le,ZO:()=>te,Eq:()=>ce,PN:()=>j});var t=e(9829579108),n=e(8847766420),s=e(3398586081),a=e(2141441167),c=e(8352634987),o=e(6533394955),r=e(4848430086),l=e(1031947056),_=e(930270247),d=e(7629299684),i=e(2927826522);const m=(0,l.Ay)("Fetch product release cards into the store",(b,R,K)=>{let{locale:B}=K;return b((0,_.l)({count:3,type:"product_release_card",locale:B,reason:"client/fetch_published_product_release_cards"})).then($=>{let{cards:Z}=$;b((0,d.M0)((0,i.t)(Z)))})});m.meta={name:"createThunk",key:"createThunkfetchProductReleaseCards",description:"Fetch product release cards into the store"};var h=e(9532047472);const v=(0,l.Ay)("Fetch helpdesk articles into the store",(b,R,K)=>{let{locale:B,reason:$}=K;return b((0,h.a)({locale:B,reason:$})).then(Z=>{let{articles:re}=Z;b((0,d.NX)((0,i.t)(re))),b((0,d.a4)(B))})});v.meta={name:"createThunk",key:"createThunkfetchHelpArticles",description:"Fetch helpdesk articles into the store"};var y=e(9706240641),T=e(3593297427),I=e(138202077),p=e(6422693406);const g=(0,l.Ay)("Fetch recommended articles into the store",(b,R,K)=>{let{locale:B,reason:$}=K;return b((0,I.H)({reason:$})).then(function(){var Z=(0,y.coroutine)(function*(re){let{articles:Te,request_id:Ce}=re;const Pe=yield p.S.all(Te.map(function(){var fe=(0,y.coroutine)(function*(pe){return b((0,T.w)({articleId:pe.id,locale:B,reason:$})).then(q=>{let{article:se}=q;return{id:se.article_id,title:se.title}})});return function(pe){return fe.apply(this,arguments)}}()));b((0,d.LV)({articles:Pe,requestId:Ce??""}))});return function(re){return Z.apply(this,arguments)}}())});g.meta={name:"createThunk",key:"createThunkfetchRecommendedArticles",description:"Fetch recommended articles into the store"};var E=e(8745755260);const f=(0,l.Ay)("Fetch help sections into the store",(b,R,K)=>{let{categoryId:B,locale:$,reason:Z}=K;return b((0,E.h)({categoryId:B,locale:$,reason:Z})).then(re=>{let{sections:Te}=re;return b((0,d.CK)((0,i.t)(Te)))})});f.meta={name:"createThunk",key:"createThunkfetchHelpSections",description:"Fetch help sections into the store"};var O=e(6936450040);const C=(0,l.Ay)("Fetch help categories into the store",(b,R,K)=>{let{locale:B,reason:$}=K;return b((0,O.G)({locale:B,reason:$})).then(Z=>{let{categories:re}=Z;b((0,d.KO)((0,i.t)(re))),b((0,d.WL)(B))})});C.meta={name:"createThunk",key:"createThunkfetchHelpCategories",description:"Fetch help categories into the store"};const M=(0,s.A)(()=>new c.Ay({storeKey:"help",fetch:b=>(0,o.dispatchForTeamId)(b,(0,r.w)()),isEnabled:()=>!0})),D=(0,s.A)(b=>new c.Ay({storeKey:"help",fetch:R=>(0,o.dispatchForTeamId)(R,m({locale:b})),isEnabled:()=>!0})),P=(0,s.A)((b,R)=>new c.Ay({storeKey:"help",fetch:K=>(0,o.dispatchForTeamId)(K,v({locale:b,reason:R})),isEnabled:()=>!0})),k=(0,s.A)((b,R)=>new c.Ay({storeKey:"help",fetch:K=>(0,o.dispatchForTeamId)(K,g({locale:b,reason:R})),isEnabled:()=>!0,maxAge:()=>86400})),x=(0,s.A)((b,R,K)=>new c.Ay({storeKey:"help",fetch:B=>(0,o.dispatchForTeamId)(B,f({categoryId:b,locale:R,reason:K})),isEnabled:()=>!0}),(b,R)=>(0,a.A)([b,R]).join("_")),F=(0,s.A)((b,R)=>new c.Ay({storeKey:"help",fetch:K=>(0,o.dispatchForTeamId)(K,C({locale:b,reason:R})),isEnabled:()=>!0}));var W=e(2332058678),Y=e(735940183),S=e(9907843289);const L=new Y.Ay("help"),w="",J=(0,t.Ay)(b=>b&&b.help||W.u);J.meta={name:"createSelector",key:"createSelectorgetHelpState",description:b=>b&&b.help||W.u};const G=(0,t.Ay)((b,R)=>{const K=(0,n.ZT)(b),B=(0,S.db)();return J(b).zdLocale!==B&&P(B,R).markObjectsAsStale(K,[B]),P(B,R).maybeRefetch(K,B),J(b).helpSearchArticles||[]});G.meta={name:"createSelector",key:"createSelectorgetHelpArticles",description:(b,R)=>{const K=(0,n.ZT)(b),B=(0,S.db)();return J(b).zdLocale!==B&&P(B,R).markObjectsAsStale(K,[B]),P(B,R).maybeRefetch(K,B),J(b).helpSearchArticles||[]}};const X=(0,t.Ay)(b=>{const R=(0,n.ZT)(b),K=(0,Y.Yp)();return J(b).locale!==K&&D(K).markObjectsAsStale(R,[K]),D(K).maybeRefetch(R,K),J(b).productReleaseCards||[]});X.meta={name:"createSelector",key:"createSelectorgetProductReleaseCards",description:b=>{const R=(0,n.ZT)(b),K=(0,Y.Yp)();return J(b).locale!==K&&D(K).markObjectsAsStale(R,[K]),D(K).maybeRefetch(R,K),J(b).productReleaseCards||[]}};const te=(0,t.Ay)((b,R)=>{var K;const B=(0,n.ZT)(b),$=(0,Y.Yp)();return J(b).locale!==$&&k($,R).markObjectsAsStale(B,[$]),k($,R).maybeRefetch(B,$),((K=J(b).recommendedArticles)===null||K===void 0?void 0:K.articles)||[]});te.meta={name:"createSelector",key:"createSelectorgetRecommendedArticles",description:(b,R)=>{var K;const B=(0,n.ZT)(b),$=(0,Y.Yp)();return J(b).locale!==$&&k($,R).markObjectsAsStale(B,[$]),k($,R).maybeRefetch(B,$),((K=J(b).recommendedArticles)===null||K===void 0?void 0:K.articles)||[]}};const le=(0,t.Ay)(b=>{var R;return((R=J(b).recommendedArticles)===null||R===void 0?void 0:R.requestId)||""});le.meta={name:"createSelector",key:"createSelectorgetRecommendArticlesRequestId",description:b=>{var R;return((R=J(b).recommendedArticles)===null||R===void 0?void 0:R.requestId)||""}};const ve=(0,t.Ay)(b=>J(b).helpNavigation||W.u.helpNavigation);ve.meta={name:"createSelector",key:"createSelectorgetHelpNavigation",description:b=>J(b).helpNavigation||W.u.helpNavigation};const Q=(0,t.Ay)((b,R,K)=>{var B,$;const Z=(0,n.ZT)(b),re=(0,Y.Yp)(),Te=J(b).locale,Ce=K??((B=J(b).helpNavigation)===null||B===void 0?void 0:B.categoryId),Pe=($=J(b).helpSections[0])===null||$===void 0?void 0:$.categoryId;return Ce?(Pe&&Ce!==Pe?(x(Ce,re,R).markObjectsAsStale(Z,[Ce.toString()]),x(Ce,re,R).maybeRefetch(Z,Ce.toString())):Te!==re&&x(Ce,re,R).markObjectsAsStale(Z,[re]),x(Ce,re,R).maybeRefetch(Z,re),J(b).helpSections||[]):J(b).helpSections||[]});Q.meta={name:"createSelector",key:"createSelectorgetHelpSections",description:(b,R,K)=>{var B,$;const Z=(0,n.ZT)(b),re=(0,Y.Yp)(),Te=J(b).locale,Ce=K??((B=J(b).helpNavigation)===null||B===void 0?void 0:B.categoryId),Pe=($=J(b).helpSections[0])===null||$===void 0?void 0:$.categoryId;return Ce?(Pe&&Ce!==Pe?(x(Ce,re,R).markObjectsAsStale(Z,[Ce.toString()]),x(Ce,re,R).maybeRefetch(Z,Ce.toString())):Te!==re&&x(Ce,re,R).markObjectsAsStale(Z,[re]),x(Ce,re,R).maybeRefetch(Z,re),J(b).helpSections||[]):J(b).helpSections||[]}};const Ae=(0,t.Ay)((b,R)=>{const K=(0,n.ZT)(b),B=(0,Y.Yp)();return J(b).locale!==B&&F(B,R).markObjectsAsStale(K,[B]),F(B,R).maybeRefetch(K,B),J(b).helpCategories||[]});Ae.meta={name:"createSelector",key:"createSelectorgetHelpCategories",description:(b,R)=>{const K=(0,n.ZT)(b),B=(0,Y.Yp)();return J(b).locale!==B&&F(B,R).markObjectsAsStale(K,[B]),F(B,R).maybeRefetch(K,B),J(b).helpCategories||[]}};const ae=(0,t.Ay)(b=>J(b).helpTour||W.u.helpTour);ae.meta={name:"createSelector",key:"createSelectorgetHelpTour",description:b=>J(b).helpTour||W.u.helpTour};const he=(0,t.Ay)(b=>J(b).anchorId||W.u.anchorId);he.meta={name:"createSelector",key:"createSelectorgetAnchorId",description:b=>J(b).anchorId||W.u.anchorId};const _e=(0,t.Ay)(b=>J(b).isArticleLoaded||W.u.isArticleLoaded);_e.meta={name:"createSelector",key:"createSelectorgetIsHelpArticleLoaded",description:b=>J(b).isArticleLoaded||W.u.isArticleLoaded};const ee=(0,t.Ay)(b=>{var R,K;if(!((R=b.desktop)===null||R===void 0||(K=R.app)===null||K===void 0)&&K.updateInfo){var B;const{releaseName:$}=b.desktop.app.updateInfo;if(!((B=b.desktop)===null||B===void 0)&&B.environment){const{appVersion:Z}=b.desktop.environment;if($.endsWith(Z))return null}return $}return null});ee.meta={name:"createSelector",key:"createSelectorgetPendingAppUpdateReleaseName",description:b=>{var R,K;if(!((R=b.desktop)===null||R===void 0||(K=R.app)===null||K===void 0)&&K.updateInfo){var B;const{releaseName:$}=b.desktop.app.updateInfo;if(!((B=b.desktop)===null||B===void 0)&&B.environment){const{appVersion:Z}=b.desktop.environment;if($.endsWith(Z))return null}return $}return null}};const de=(0,t.Ay)(b=>{if(b.desktop&&b.desktop.app&&b.desktop.app.updateInfo){const{releaseName:R,releaseNotes:K,releaseDate:B}=b.desktop.app.updateInfo;return{timestamp:B?B.getTime():Date.now(),title:R,description:L.t("A new version of the app is available.",{fallbackHash:"6d9f3bb92920feceb484bca2ce4e062b5024208e",fallbackHashNs:"whats_new"}),url:K,url_title:L.t("See release notes",{fallbackHash:"6d9f3bb92920feceb484bca2ce4e062b5024208e",fallbackHashNs:"whats_new"}),is_app_update:!0}}return null});de.meta={name:"createSelector",key:"createSelectorgetAppUpdate",description:b=>{if(b.desktop&&b.desktop.app&&b.desktop.app.updateInfo){const{releaseName:R,releaseNotes:K,releaseDate:B}=b.desktop.app.updateInfo;return{timestamp:B?B.getTime():Date.now(),title:R,description:L.t("A new version of the app is available.",{fallbackHash:"6d9f3bb92920feceb484bca2ce4e062b5024208e",fallbackHashNs:"whats_new"}),url:K,url_title:L.t("See release notes",{fallbackHash:"6d9f3bb92920feceb484bca2ce4e062b5024208e",fallbackHashNs:"whats_new"}),is_app_update:!0}}return null}};const Ie=(0,t.Ay)(b=>{const R=de(b)||null;return R?R.timestamp:-1});Ie.meta={name:"createSelector",key:"createSelectorgetLatestAppUpdateTimeStamp",description:b=>{const R=de(b)||null;return R?R.timestamp:-1}};const ce=(0,t.Ay)(b=>{const R=(0,n.ZT)(b);return M().maybeRefetch(R,w),J(b).stats||W.r});ce.meta={name:"createSelector",key:"createSelectorgetTicketStats",description:b=>{const R=(0,n.ZT)(b);return M().maybeRefetch(R,w),J(b).stats||W.r}};const j=(0,t.Ay)(b=>ce(b).unreadCount);j.meta={name:"createSelector",key:"createSelectorgetUnreadTickets",description:b=>ce(b).unreadCount};const N=(0,t.Ay)(b=>J(b).isHelpTipHistoryTourActive||W.u.isHelpTipHistoryTourActive);N.meta={name:"createSelector",key:"createSelectorgetIsHelpTipHistoryTourActive",description:b=>J(b).isHelpTipHistoryTourActive||W.u.isHelpTipHistoryTourActive}},4848430086:(z,A,e)=>{"use strict";e.d(A,{w:()=>a});var t=e(1031947056),n=e(8726791251),s=e(7629299684);const a=(0,t.Ay)("Fetch and upsert ticket stats into the store",c=>c((0,n.I)({reason:"fetchAndUpsertTicketStats"})).then(o=>{const r={unreadCount:o.unread_count||0,openCount:o.open_count||0};return c((0,s.SX)(r)),r}));a.meta={name:"createThunk",key:"createThunkfetchAndUpsertTicketStats",description:"Fetch and upsert ticket stats into the store"}},6121742712:(z,A,e)=>{"use strict";e.d(A,{NJ:()=>he,mT:()=>S,uQ:()=>w,q1:()=>G,Yl:()=>ce,pM:()=>Ae,N6:()=>Q,zZ:()=>ae,bn:()=>F,Rz:()=>_e,nd:()=>W,_4:()=>Y,ad:()=>L,i8:()=>J,qC:()=>le,Iy:()=>ee,VT:()=>ve,jo:()=>te});var t=e(2101927269),n=e(2141441167),s=e(4423055085),a=e(9829579108),c=e(4813703725),o=e(3385422400),r=e(8847766420),l=e(2569545045),_=e(1521013946),d=e(5333401344),i=e(9706240641),m=e(6422693406),h=e(3398586081),v=e(3037015781),y=e(6533394955),T=e(4947933789),I=e(5209876365),p=e(5380461521);const g=(0,h.A)(()=>new v.Ay({fetch:E,metricsName:"hermesTriggers",upsertKnown:f,upsertNonExistent:f}));function E(j){let N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return m.S.map(N,function(){var b=(0,i.coroutine)(function*(R){try{return(yield(0,y.dispatchForTeamId)(j,(0,T.B)({triggerId:R,includeWorkflowDetails:!0,reason:"hermes_triggers_ufm"}))).trigger}catch(K){return{id:R,error:K.name}}});return function(R){return b.apply(this,arguments)}}())}u(E,"fetchTriggersForTeamId");function f(j,N){const b=N.map(R=>R.id);(0,p.X)().markObjectsAsFresh(j,b),(0,y.dispatchForTeamId)(j,(0,I.z4)({triggers:N}))}u(f,"upsertTriggersForTeamId");var O=e(5751973043),C=e(8481467080),M=e(9552526132),D=e(3799600789),P=e(3906734293);const k=(0,a.Ay)(j=>{var N;return j==null||(N=j.hermesTriggers)===null||N===void 0?void 0:N.triggersById});k.meta={name:"createSelector",key:"createSelectorgetTriggersById",description:j=>{var N;return j==null||(N=j.hermesTriggers)===null||N===void 0?void 0:N.triggersById}};const x=(0,a.Ay)(j=>{var N;return j==null||(N=j.hermesTriggers)===null||N===void 0?void 0:N.recentlyRunTriggerIds});x.meta={name:"createSelector",key:"createSelectorgetRecentlyRunTriggerIds",description:j=>{var N;return j==null||(N=j.hermesTriggers)===null||N===void 0?void 0:N.recentlyRunTriggerIds}};const F=(0,a.Ay)((j,N,b)=>{let{triggerId:R}=N;var K,B;const $=j==null||(K=j.hermesTriggers)===null||K===void 0||(B=K.triggersById)===null||B===void 0?void 0:B[R],Z=(0,r.ZT)(j);return Z?$?((0,p.X)().maybeRefetch(Z,R),$):b?g().fetchObjectWithId(Z,R):(0,d.WQ)(R):(0,d.WQ)(R)});F.meta={name:"createSelector",key:"createSelectorgetTriggerById",description:(j,N,b)=>{let{triggerId:R}=N;var K,B;const $=j==null||(K=j.hermesTriggers)===null||K===void 0||(B=K.triggersById)===null||B===void 0?void 0:B[R],Z=(0,r.ZT)(j);return Z?$?((0,p.X)().maybeRefetch(Z,R),$):b?g().fetchObjectWithId(Z,R):(0,d.WQ)(R):(0,d.WQ)(R)}};const W=(0,c.eI)((j,N)=>{let{triggerIds:b}=N;const R=(0,r.ZT)(j);return R?b.length?b.map(K=>{var B,$;const Z=j==null||(B=j.hermesTriggers)===null||B===void 0||($=B.triggersById)===null||$===void 0?void 0:$[K];return Z?((0,p.X)().maybeRefetch(R,K),Z):g().fetchObjectWithId(R,K)}):O.Ml:b.map(K=>(0,d.WQ)(K))}),Y=(0,a.Ay)(j=>{var N;return(j==null||(N=j.hermesTriggers)===null||N===void 0?void 0:N.workflowPickerSearchInput)||""});Y.meta={name:"createSelector",key:"createSelectorgetWorkflowPickerSearchInput",description:j=>{var N;return(j==null||(N=j.hermesTriggers)===null||N===void 0?void 0:N.workflowPickerSearchInput)||""}};const S=(0,a.Ay)(j=>{var N;return(j==null||(N=j.hermesTriggers)===null||N===void 0?void 0:N.channelPrimaryActionSearchInput)||""});S.meta={name:"createSelector",key:"createSelectorgetChannelPrimaryActionSearchInput",description:j=>{var N;return(j==null||(N=j.hermesTriggers)===null||N===void 0?void 0:N.channelPrimaryActionSearchInput)||""}};const L=(0,a.Ay)(j=>{var N;return(j==null||(N=j.hermesTriggers)===null||N===void 0?void 0:N.workflowPickerSearchResults)||O.Ml});L.meta={name:"createSelector",key:"createSelectorgetWorkflowPickerSearchResults",description:j=>{var N;return(j==null||(N=j.hermesTriggers)===null||N===void 0?void 0:N.workflowPickerSearchResults)||O.Ml}};const w=(0,a.Ay)(j=>{var N;return(j==null||(N=j.hermesTriggers)===null||N===void 0?void 0:N.channelPrimaryActionSearchResults)||O.Ml});w.meta={name:"createSelector",key:"createSelectorgetChannelPrimaryActionSearchResults",description:j=>{var N;return(j==null||(N=j.hermesTriggers)===null||N===void 0?void 0:N.channelPrimaryActionSearchResults)||O.Ml}};const J=(0,a.Ay)((j,N)=>{const b=k(j)||{},R=new RegExp(N,"i"),K=Object.keys(b).map($=>b[$]||{});return(0,t.A)(K,$=>$&&(($==null?void 0:$.name)||"").match(R))||[]});J.meta={name:"createSelector",key:"createSelectorgetWorkflowPickerSearchResultsCached",description:(j,N)=>{const b=k(j)||{},R=new RegExp(N,"i"),K=Object.keys(b).map($=>b[$]||{});return(0,t.A)(K,$=>$&&(($==null?void 0:$.name)||"").match(R))||[]}};const G=(0,a.Ay)((j,N)=>{const b=k(j)||{},R=new RegExp(N,"i"),K=Object.keys(b).map($=>b[$]||{});return(0,t.A)(K,$=>$&&$.type===M.M.Shortcut&&(($==null?void 0:$.name)||"").match(R))||[]});G.meta={name:"createSelector",key:"createSelectorgetChannelPrimaryActionSearchResultsCached",description:(j,N)=>{const b=k(j)||{},R=new RegExp(N,"i"),K=Object.keys(b).map($=>b[$]||{});return(0,t.A)(K,$=>$&&$.type===M.M.Shortcut&&(($==null?void 0:$.name)||"").match(R))||[]}};const X=(0,a.Ay)(j=>{var N;return(j==null||(N=j.hermesTriggers)===null||N===void 0?void 0:N.openTourId)||null});X.meta={name:"createSelector",key:"createSelectorgetGuidedTourCoachmark",description:j=>{var N;return(j==null||(N=j.hermesTriggers)===null||N===void 0?void 0:N.openTourId)||null}};const te=(0,a.Ay)(j=>{var N;const b=(j==null||(N=j.hermesTriggers)===null||N===void 0?void 0:N.openTourId)||"";return b==="platform-coachmark-tour"||b==="announce-only-platform-coachmark-tour"});te.meta={name:"createSelector",key:"createSelectorisWorkflowCoachmarkOpen",description:j=>{var N;const b=(j==null||(N=j.hermesTriggers)===null||N===void 0?void 0:N.openTourId)||"";return b==="platform-coachmark-tour"||b==="announce-only-platform-coachmark-tour"}};const le=(0,a.Ay)(j=>{var N;return((j==null||(N=j.hermesTriggers)===null||N===void 0?void 0:N.openTourId)||"")==="announce-only-platform-coachmark-tour"});le.meta={name:"createSelector",key:"createSelectorisAnnounceOnlyWorkflowCoachmarkOpen",description:j=>{var N;return((j==null||(N=j.hermesTriggers)===null||N===void 0?void 0:N.openTourId)||"")==="announce-only-platform-coachmark-tour"}};const ve=(0,a.Ay)(j=>{var N;return((j==null||(N=j.hermesTriggers)===null||N===void 0?void 0:N.openTourId)||"")==="slash-commands-coachmark-tour"});ve.meta={name:"createSelector",key:"createSelectorisSlashCommandsCoachmarkOpen",description:j=>{var N;return((j==null||(N=j.hermesTriggers)===null||N===void 0?void 0:N.openTourId)||"")==="slash-commands-coachmark-tour"}};const Q=(0,a.Ay)(j=>{var N;return(N=x(j))===null||N===void 0?void 0:N.map(b=>F(j,{triggerId:b}))});Q.meta={name:"createSelector",key:"createSelectorgetRecentlyRunTriggers",description:j=>{var N;return(N=x(j))===null||N===void 0?void 0:N.map(b=>F(j,{triggerId:b}))}};const Ae=(0,a.Ay)(j=>{var N;return(j==null||(N=j.hermesTriggers)===null||N===void 0?void 0:N.recentlyRunTriggerTimestamps)||{}});Ae.meta={name:"createSelector",key:"createSelectorgetRecentlyRunTriggerTimestamps",description:j=>{var N;return(j==null||(N=j.hermesTriggers)===null||N===void 0?void 0:N.recentlyRunTriggerTimestamps)||{}}};const ae=(0,a.Ay)(j=>{var N;return j==null||(N=j.hermesTriggers)===null||N===void 0?void 0:N.recentlyRunTriggerWorkflowActivity});ae.meta={name:"createSelector",key:"createSelectorgetRecentlyRunTriggersWorkflowActivity",description:j=>{var N;return j==null||(N=j.hermesTriggers)===null||N===void 0?void 0:N.recentlyRunTriggerWorkflowActivity}};const he=(0,o.Mz)(j=>k(j),j=>{if(!j)return O.Ml;const N=(0,n.A)(j);return(0,t.A)(N,R=>!(!(0,P.G)(R)||R.workflow_details&&!R.workflow_details.is_published))}),_e=(0,a.Ay)((j,N)=>{let{appId:b}=N;const R=k(j)||{};return Object.values(R).find(B=>{var $;return(B==null||($=B.workflow)===null||$===void 0?void 0:$.app_id)===b})});_e.meta={name:"createSelector",key:"createSelectorgetTriggerFromSlackAppId",description:(j,N)=>{let{appId:b}=N;const R=k(j)||{};return Object.values(R).find(B=>{var $;return(B==null||($=B.workflow)===null||$===void 0?void 0:$.app_id)===b})}};const ee=(0,a.Ay)((j,N)=>{const b=(0,_.$N)(j,N);return b?(b==null?void 0:b.type)===_.im.SHORTCUT_LINK_TRIGGER:!1});ee.meta={name:"createSelector",key:"createSelectorisHermesLinkTriggerFormat",description:(j,N)=>{const b=(0,_.$N)(j,N);return b?(b==null?void 0:b.type)===_.im.SHORTCUT_LINK_TRIGGER:!1}};const de=(0,a.Ay)((j,N)=>{let{triggerId:b}=N;const R=F(j,{triggerId:b},!1);return R==null?void 0:R.shortcut_url});de.meta={name:"createSelector",key:"createSelectorgetShortcutUrl",description:(j,N)=>{let{triggerId:b}=N;const R=F(j,{triggerId:b},!1);return R==null?void 0:R.shortcut_url}};const Ie=(0,a.Ay)((j,N)=>{let{triggerId:b}=N;var R;return!!(!(j==null||(R=j.hermesTriggers)===null||R===void 0)&&R.triggersMarkedStaleInSession[b])});Ie.meta={name:"createSelector",key:"createSelectorhasTriggerBeenMarkedStaleInSession",description:(j,N)=>{let{triggerId:b}=N;var R;return!!(!(j==null||(R=j.hermesTriggers)===null||R===void 0)&&R.triggersMarkedStaleInSession[b])}};const ce=(0,a.Ay)((j,N)=>{let{block:b}=N;var R;const K=b.functionTriggerId,B=(0,C.U)(b);if(!Ie(j,{triggerId:K}))return B;const Z=F(j,{triggerId:K},!0),re=Z==null||(R=Z.workflow)===null||R===void 0?void 0:R.workflow_id,Te=re?(0,l.g)(j,re,!0,"hermes-triggers-selector-getFreshShortcutInfoForShareShortcutBlock"):void 0;return(0,d.mX)(Z)||!Te||(0,d.mX)(Te)?B:(0,D.V)({passedShortcutInfo:B,trigger:Z,workflow:Te})});ce.meta={name:"createSelector",key:"createSelectorgetFreshShortcutInfoForShareShortcutBlock",description:(j,N)=>{let{block:b}=N;var R;const K=b.functionTriggerId,B=(0,C.U)(b);if(!Ie(j,{triggerId:K}))return B;const Z=F(j,{triggerId:K},!0),re=Z==null||(R=Z.workflow)===null||R===void 0?void 0:R.workflow_id,Te=re?(0,l.g)(j,re,!0,"hermes-triggers-selector-getFreshShortcutInfoForShareShortcutBlock"):void 0;return(0,d.mX)(Z)||!Te||(0,d.mX)(Te)?B:(0,D.V)({passedShortcutInfo:B,trigger:Z,workflow:Te})}},(0,s.ul)("hermesTriggers",function(j,N){let{triggerId:b}=N,R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return F(j,{triggerId:b},R)})},7478895768:(z,A,e)=>{"use strict";e.d(A,{Ay:()=>I,tP:()=>T});var t=e(9706240641),n=e.n(t),s=e(8840779375),a=e(9268023148),c=e(6494470131),o=e(1031947056),r=e(5380461521),l=e(8847766420),_=e(5209876365),d=e(796111729),i=e(1948374838),m=e(6121742712);const h=(0,o.Ay)("Fetch triggers with query",function(){var g=(0,t.coroutine)(function*(E,f,O){let{query:C,currentChannelId:M,isWorkflowPickerSearch:D=!1,isChannelWorkflowsSearch:P=!1}=O;const k=f(),x=(0,l.ZT)(k),F=(0,i.X)(k),Y=D&&!P?["shortcut","event","webhook","scheduled","service"]:["shortcut"],S=!P;if(F.containsPrefixOf(C)){if(D&&!P){const L=(0,m.i8)(k,C);return E((0,_.we)({results:L})),L}else if(P){const L=(0,m.q1)(k,C);return E((0,_.S8)({results:L})),L}}else try{const w=(yield E((0,c.v)({query:C,currentChannelId:M,strictExposureRules:S,triggerTypes:Y,reason:"hermes_triggers_store:fetch_and_upsert_triggers"}))).triggers,J=5;return w.length<J&&(F.addAsPrefix(C),F.clearRequestInFlight()),x&&(0,r.X)().markObjectsAsFresh(x,(0,s.A)(w,"id")),E((0,_.z4)({triggers:w})),D&&!P?E((0,_.we)({results:w})):P&&E((0,_.S8)({results:w})),w}catch(L){return(0,d.Wo)().error(L,"There was an issue fetching triggers with query"),[]}return[]});return function(E,f,O){return g.apply(this,arguments)}}());h.meta={name:"createThunk",key:"createThunkfetchAndUpsertTriggersWithQuery",description:"Fetch triggers with query"};const v=500,y=(0,a.A)((g,E)=>g(h({query:E})),v,{leading:!0,trailing:!0}),T=(0,o.Ay)("debounced fetch and upsert triggers with query",(g,E,f)=>{let{query:O}=f;return y(g,O)});T.meta={name:"createThunk",key:"createThunkdebouncedFetchAndUpsertTriggersWithQuery",description:"debounced fetch and upsert triggers with query"};const I=h,p={DEBOUNCE_MS:v}},2569545045:(z,A,e)=>{"use strict";e.d(A,{g:()=>g,R:()=>E});var t=e(9829579108),n=e(5333401344),s=e(8847766420),a=e(8032027544),c=e(9706240641),o=e(3398586081),r=e(8840779375),l=e(6422693406),_=e(3037015781),d=e(6533394955),i=e(3118461857),m=e(4134951078);const h=(0,o.A)(()=>new _.Ay({fetch:v,upsertKnown:y,upsertNonExistent:y,isEnabled:()=>!0}));function v(f,O){return l.S.map(O,function(){var C=(0,c.coroutine)(function*(M){try{return(yield(0,d.dispatchForTeamId)(f,(0,i.D)({workflowId:M,reason:"hermes_workflows_store_unknown_fetching"}))).workflow}catch{var D;const k=(D=(0,d.getStateByTeamId)(f).hermesWorkflows)===null||D===void 0?void 0:D[M];return(0,_.GU)(k)?null:k}});return function(M){return C.apply(this,arguments)}}()).filter(C=>C)}u(v,"fetchWorkflowsForTeamId");function y(f,O){(0,a.G)().markObjectsAsFresh(f,(0,r.A)(O,"id")),(0,d.dispatchForTeamId)(f,(0,m.uY)({workflows:O}))}u(y,"upsertWorkflowsForTeamId");const T={fetchWorkflowsForTeamId:v,upsertWorkflowsForTeamId:y};var I=e(56548687),p=e(6244014364);const g=(0,t.Ay)(function(f,O){let C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,M=arguments.length>3&&arguments[3]!==void 0?arguments[3]:void 0;var D;const P=(0,s.ZT)(f),k=(D=f.hermesWorkflows)===null||D===void 0?void 0:D[O],x=(0,I.e)({state:f});return P?k?((0,a.G)().isObjectFresh(P,O)||x.track(p.EventId.WORKFLOW_GET_BY_ID,{contexts:{ui_context:{ui_properties:{element_name:M}}},workflow_id:O,referrer:"conditional"}),(0,a.G)().maybeRefetch(P,O),k):C?(x.track(p.EventId.WORKFLOW_GET_BY_ID,{contexts:{ui_context:{ui_properties:{element_name:M}}},workflow_id:O,referrer:"unknown"}),h().fetchObjectWithId(P,O)):(0,n.WQ)(O):(0,n.WQ)(O)});g.meta={name:"createSelector",key:"createSelectorgetWorkflowById",description:function(f,O){let C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,M=arguments.length>3&&arguments[3]!==void 0?arguments[3]:void 0;var D;const P=(0,s.ZT)(f),k=(D=f.hermesWorkflows)===null||D===void 0?void 0:D[O],x=(0,I.e)({state:f});return P?k?((0,a.G)().isObjectFresh(P,O)||x.track(p.EventId.WORKFLOW_GET_BY_ID,{contexts:{ui_context:{ui_properties:{element_name:M}}},workflow_id:O,referrer:"conditional"}),(0,a.G)().maybeRefetch(P,O),k):C?(x.track(p.EventId.WORKFLOW_GET_BY_ID,{contexts:{ui_context:{ui_properties:{element_name:M}}},workflow_id:O,referrer:"unknown"}),h().fetchObjectWithId(P,O)):(0,n.WQ)(O):(0,n.WQ)(O)}};const E=(0,t.Ay)((f,O)=>{const C=g(f,O);return(0,n.GU)(C)?[]:C.steps});E.meta={name:"createSelector",key:"createSelectorgetWorkflowStepsById",description:(f,O)=>{const C=g(f,O);return(0,n.GU)(C)?[]:C.steps}}},8239363237:(z,A,e)=>{"use strict";e.d(A,{GF:()=>_,Tk:()=>d,UI:()=>T,X_:()=>i,iN:()=>y,pm:()=>h,t6:()=>I,vc:()=>m,xA:()=>v});var t=e(3385422400),n=e(2188787324),s=e(937317117),a=e(1990810649),c=e(387328355);const o=u((p,g)=>{var E;return g?(E=(0,s.Lp)(p,g))===null||E===void 0?void 0:E.localUpdated:null},"getFileLocalUpdated"),r=u(p=>(0,c.lt)(p),"getFileId"),l=u(p=>(0,t.Mz)([g=>(0,c.JC)(g),g=>{const E=r(g);return o(g,E)},g=>{const E=r(g);return E?(0,s.Lp)(g,E):null}],(g,E,f)=>f!=null&&f.id&&(g===a.cM.CanvasFile||g===a.cM.QuipFile)?p(f):null),"selectFromUpdatedFile"),_=l(p=>p),d=l(p=>p==null?void 0:p.id),i=l(p=>p?(0,n.sJ)(p):!1),m=l(p=>p?(0,n.uO)(p):!1),h=l(p=>p?(0,n.WP)(p):null),v=l(p=>p==null?void 0:p.user),y=l(p=>!!p),T=l(p=>p?(0,n.l7)(p):!1),I=l(p=>p?(0,n.wL)(p):!1)},5145584581:(z,A,e)=>{"use strict";e.d(A,{x:()=>p});var t=e(8628145494),n=e(1031947056),s=e(6533394955),a=e(4250409994),c=e(5286203919),o=e(387328355),r=e(1990810649),l=e(7434063642),_=e(6251210828),d=e(7723800688),i=e(8737667238),m=e(6470070112),h=e(6244014364),v=e(56548687),y=e(5737576046),T=e(7884000776);const I=u((E,f,O,C)=>{const M=(0,s.getStateForClientStore)(),D=(0,c.E9)(M),P=(0,m.$t)(f,{huddleId:D}),k=(0,m.kn)(M),x=(0,m.UE)(M),F=(0,_.Ec)(f,{huddleId:D});let W,Y,S=null,L=null,w=null;if(O===r.cM.None)W=d.Hi.FOCUS_CLOSE,Y=(0,_.U7)(f,{key:d.Hi.FOCUS_OPEN});else{var J;switch(W=d.Hi.FOCUS_OPEN,Y=(0,i.A)(),w=(C==null||(J=C.item)===null||J===void 0?void 0:J.id)||null,O){case r.cM.Screenshare:S="focus_screenshare",L="screenshare";break;default:S="focus_file",L="file"}E((0,l.Mn)({key:d.Hi.FOCUS_OPEN,value:Y}))}(0,v.e)({state:f}).track(h.EventId.CANVAS_EVENT,{contexts:{ui_context:{ui_page:F?F.toString():null,ui_properties:{element_name:W},action:h.UiAction.IMPRESSION},calls:x},...P,...k,interaction_id:Y,canvas_dimension_marker:S,type:L,item_file_id:w})},"clogCanvasEvent"),p=(0,n.Ay)("Sets a user content view which represents what the user is focused on in the canvas",(E,f,O)=>{if(!O||(0,t.A)(O.contentViewType))return;const C=f(),M=O.contentViewType,D=!1;if(M===r.cM.Screenshare){const k=(0,o.JC)(C),x=g(C);k===r.cM.None&&!x&&E((0,l.fI)({isThreadOpen:!1})),E((0,l.Zx)({userId:""}))}E((0,l.YC)({isFullscreen:D})),E((0,l.s7)({isNotesOpen:M===r.cM.QuipFile}));const P=O.contentViewType===r.cM.None||!O.contentViewConfig?{}:O.contentViewConfig;E((0,o.sK)({id:O.peerId,contentViewType:M,contentViewConfig:P})),(0,s.dispatchForClientStore)((0,a.xq)({contentViewType:M,contentViewConfig:P})),I(E,C,M,P)});p.meta={name:"createThunk",key:"createThunksetContentView",description:"Sets a user content view which represents what the user is focused on in the canvas"};function g(E){const f=(0,s.getStateForClientStore)(),O=(0,c.E9)(f),C=(0,c.hc)(f),M=(0,_.fG)(E,{huddleId:O});if(!(M!=null&&M.ts)||!C)return!1;const D=(0,y.zC)({viewContext:T.Y.HUDDLE_THREADS,channelId:C,threadTs:M.ts});return(D==null?void 0:D.hasFocus())||!1}u(g,"doesThreadInputHaveFocus")},6758774099:(z,A,e)=>{"use strict";e.d(A,{Lm:()=>a,T3:()=>s,U$:()=>c,WO:()=>n,dD:()=>r,h2:()=>o,jL:()=>l});var t=e(2140362605);const n=(0,t.Ay)("Enable huddle event log");n.meta={name:"createAction",key:"createActionenableEventLog",description:"Enable huddle event log"};const s=(0,t.Ay)("Disable huddle event log");s.meta={name:"createAction",key:"createActiondisableEventLog",description:"Disable huddle event log"};const a=(0,t.Ay)("Set loading state for huddle event log");a.meta={name:"createAction",key:"createActionsetEventLogLoading",description:"Set loading state for huddle event log"};const c=(0,t.Ay)("Add non-transcription event");c.meta={name:"createAction",key:"createActionpushNonTranscriptionEvent",description:"Add non-transcription event"};const o=(0,t.Ay)("Update with latest transcription events");o.meta={name:"createAction",key:"createActionupdateTranscriptions",description:"Update with latest transcription events"};const r=(0,t.Ay)("Set enabled state for huddle captions side-by-side view");r.meta={name:"createAction",key:"createActionsetSideBySideEnabled",description:"Set enabled state for huddle captions side-by-side view"};const l=(0,t.Ay)("Set enabled state for huddle closed captions view");l.meta={name:"createAction",key:"createActionsetClosedCaptionsEnabled",description:"Set enabled state for huddle closed captions view"}},8409540889:(z,A,e)=>{"use strict";e.d(A,{u:()=>n,y:()=>t});const t=2e3,n=2e3},4988306802:(z,A,e)=>{"use strict";e.d(A,{Cb:()=>i,M3:()=>l,TP:()=>o,VN:()=>_,gL:()=>r,iv:()=>m});var t=e(3385422400),n=e(9829579108),s=e(8409540889),a=e(8783285437);const c=(0,n.Ay)(h=>h.huddleEvents);c.meta={name:"createSelector",key:"createSelectorgetHuddleEventsData",description:h=>h.huddleEvents};const o=(0,n.Ay)(h=>c(h).enabled);o.meta={name:"createSelector",key:"createSelectorareHuddleEventsEnabled",description:h=>c(h).enabled};const r=(0,n.Ay)(h=>c(h).isLoading);r.meta={name:"createSelector",key:"createSelectorareHuddleEventsLoading",description:h=>c(h).isLoading};const l=(0,n.Ay)(h=>h.huddleEvents.isSideBySideEnabled);l.meta={name:"createSelector",key:"createSelectorisHuddleSideBySideCaptionsEnabled",description:h=>h.huddleEvents.isSideBySideEnabled};const _=(0,n.Ay)(h=>h.huddleEvents.isClosedCaptionsEnabled);_.meta={name:"createSelector",key:"createSelectorisHuddleClosedCaptionsEnabled",description:h=>h.huddleEvents.isClosedCaptionsEnabled};const d=(0,n.Ay)(h=>h.huddleEvents.isClosedCaptionsEnabled);d.meta={name:"createSelector",key:"createSelectorHuddlesPersistTranscriptToggle",description:h=>h.huddleEvents.isClosedCaptionsEnabled};const i=(0,t.Mz)(h=>c(h).events,h=>{const v=[];let y,T=[];const I=u(()=>{y&&v.push({...y,content:T.join(" ")})},"maybeCommit");return h.forEach(p=>{y&&p.type===a.v.TRANSCRIBE&&y.memberId===p.memberId&&p.timestampMs-y.endTimeMs<s.y?(T.push(p.content),y.endTimeMs=p.endTimeMs):(I(),p.type===a.v.TRANSCRIBE?(y={type:a.v.TRANSCRIBE,resultId:"",memberId:p.memberId,content:"",timestampMs:p.timestampMs,endTimeMs:p.endTimeMs},T=[p.content]):(y=null,T=[],v.push(p)))}),I(),v}),m=(0,t.Mz)(h=>i(h),h=>h.filter(v=>v.type===a.v.TRANSCRIBE||v.type===a.v.START_TRANSCRIPTION).slice(-5))},1889537412:(z,A,e)=>{"use strict";e.d(A,{A:()=>g});var t=e(9706240641),n=e.n(t),s=e(1031947056),a=e(727128009),c=e(6422693406),o=e(9640070512),r=e(2527782504),l=e(6758774099),_=e(4988306802),d=e(7004355564),i=e(6533394955),m=e(796111729),h=e(5286203919),v=e(8783285437),y=e(6694086724),T=e(8872167513),I=e(2709531527);const p=(0,s.Ay)("Start transcription for current huddle",function(){var E=(0,t.coroutine)(function*(f,O){if((0,_.TP)(O())||(0,_.gL)(O()))return c.S.resolve();const C=(0,i.getStateForClientStore)(),M=(0,h.E9)(C);return M?(f((0,l.WO)()),f((0,l.Lm)(!0)),yield(0,d.A)(),f((0,y.e)({clearOnEndedCallback:!0,logContext:"huddles-captions-turned-on",isStoppedByUser:!0})),f((0,a.i)({reason:"start-event-log",callId:M})).catch(D=>{var P;if(((P=D.data)===null||P===void 0?void 0:P.error)==="permission_denied")return c.S.delay(5e3).then(()=>f((0,a.i)({reason:"start-event-log/retry",callId:M})));throw D}).catch(D=>{(0,m.Ay)({getState:O}).error(D),f((0,l.T3)())}).finally(()=>{f((0,l.Lm)(!1)),f((0,o.H)({focusKey:r.Ay.HUDDLE_CAPTIONS_TAB})),f((0,l.U$)({type:v.v.START_TRANSCRIPTION,memberId:"USLACKBOT",timestampMs:Date.now()}));const{huddleEventsTrace:D}=(0,T.A)().getAllTraceHandlers();D==null||D.update({name:I.p.TRANSCRIPT,type:I.G.START})})):c.S.reject(new Error("No active call ID for huddle"))});return function(f,O){return E.apply(this,arguments)}}());p.meta={name:"createThunk",key:"createThunkstartEventLog",description:"Start transcription for current huddle"};const g=p},6855917924:(z,A,e)=>{"use strict";e.d(A,{A:()=>i});var t=e(1031947056),n=e(580220061),s=e(6422693406),a=e(6758774099),c=e(4988306802),o=e(6533394955),r=e(5286203919),l=e(8872167513),_=e(2709531527);const d=(0,t.Ay)("Stop transcription for current huddle",(m,h)=>{if(!(0,c.TP)(h())||(0,c.gL)(h()))return s.S.resolve();const v=(0,o.getStateForClientStore)(),y=(0,r.E9)(v);return y?(m((0,a.T3)()),m((0,a.Lm)(!0)),m((0,n.W)({reason:"stop-event-log",callId:y})).finally(()=>{m((0,a.Lm)(!1));const{huddleEventsTrace:T}=(0,l.A)().getAllTraceHandlers();T==null||T.update({name:_.p.TRANSCRIPT,type:_.G.STOP})})):s.S.reject(new Error("No active call ID for huddle"))});d.meta={name:"createThunk",key:"createThunkstopEventLog",description:"Stop transcription for current huddle"};const i=d},8783285437:(z,A,e)=>{"use strict";e.d(A,{v:()=>t});var t;(function(n){n.JOIN="JOIN",n.LEAVE="LEAVE",n.SCREENSHARE_START="SCREENSHARE_START",n.SCREENSHARE_STOP="SCREENSHARE_STOP",n.TRANSCRIBE="TRANSCRIBE",n.SEND_REACTION="SEND_REACTION",n.START_TRANSCRIPTION="START_TRANSCRIPTION"})(t||(t={}))},4250409994:(z,A,e)=>{"use strict";e.d(A,{Ag:()=>X,B5:()=>Z,Bk:()=>x,Db:()=>R,Dj:()=>fe,Gx:()=>_e,HC:()=>M,HF:()=>C,Hg:()=>Te,I9:()=>_,JM:()=>Ie,Jc:()=>y,Ko:()=>F,Lx:()=>N,M4:()=>i,OA:()=>b,QZ:()=>f,Rb:()=>k,Rh:()=>v,Rr:()=>O,Sd:()=>c,Sn:()=>g,TK:()=>Ce,VU:()=>s,WB:()=>Y,WM:()=>J,WY:()=>j,YA:()=>E,Yi:()=>W,_H:()=>ae,_I:()=>o,_U:()=>le,_u:()=>ce,aO:()=>w,bV:()=>ve,bk:()=>de,cx:()=>ee,f2:()=>L,fP:()=>p,hB:()=>T,kg:()=>re,kn:()=>a,nI:()=>$,nU:()=>d,nw:()=>K,o9:()=>B,og:()=>Je,ol:()=>D,pl:()=>l,qW:()=>r,qr:()=>Q,so:()=>m,t2:()=>Pe,u8:()=>I,xf:()=>h,xq:()=>te,yR:()=>P,yi:()=>he});var t=e(2140362605),n=e(1031947056);const s=(0,t.Ay)("Set flag to indicate if Huddles is enabled.");s.meta={name:"createAction",key:"createActionsetIsHuddlesEnabled",description:"Set flag to indicate if Huddles is enabled."};const a=(0,t.Ay)("Stores audio reference that will be passed to SDK");a.meta={name:"createAction",key:"createActionstoreHuddlesAudioRef",description:"Stores audio reference that will be passed to SDK"};const c=(0,t.Ay)("Start video shariing");c.meta={name:"createAction",key:"createActionstartVideoSharing",description:"Start video shariing"};const o=(0,t.Ay)("Stop video shariing");o.meta={name:"createAction",key:"createActionstopVideoSharing",description:"Stop video shariing"};const r=(0,t.Ay)("Connect to Huddle media server");r.meta={name:"createAction",key:"createActionconnectToHuddlesMediaServer",description:"Connect to Huddle media server"};const l=(0,t.Ay)("Leave the huddle and stop media transmission");l.meta={name:"createAction",key:"createActiondisconnectHuddlesFromMediaServer",description:"Leave the huddle and stop media transmission"};const _=(0,t.Ay)("Enable or disable local microphone");_.meta={name:"createAction",key:"createActionenableSelfMicrophone",description:"Enable or disable local microphone"};const d=(0,t.Ay)("Send an emoji reaction");d.meta={name:"createAction",key:"createActionsendReactionMessage",description:"Send an emoji reaction"};const i=(0,t.Ay)("Send a sticky emoji reaction");i.meta={name:"createAction",key:"createActionsendStickyReactionMessage",description:"Send a sticky emoji reaction"};const m=(0,t.Ay)("Send a mute request");m.meta={name:"createAction",key:"createActionsendMuteRequestMessage",description:"Send a mute request"};const h=(0,t.Ay)("Insert new active huddle reference with teamId channelId, etc.");h.meta={name:"createAction",key:"createActionaddActiveHuddleReference",description:"Insert new active huddle reference with teamId channelId, etc."};const v=(0,t.Ay)("Upsert existing active huddle reference");v.meta={name:"createAction",key:"createActionupdateActiveHuddleReference",description:"Upsert existing active huddle reference"};const y=(0,t.Ay)("Upsert existing active huddle channel");y.meta={name:"createAction",key:"createActionupdateActiveHuddleChannel",description:"Upsert existing active huddle channel"};const T=(0,t.Ay)("Set active huddle invite");T.meta={name:"createAction",key:"createActionupsertInvite",description:"Set active huddle invite"};const I=(0,t.Ay)("Clear invite for given channel ID");I.meta={name:"createAction",key:"createActionclearInviteForChannelId",description:"Clear invite for given channel ID"};const p=(0,t.Ay)("Mark invite notifications as viewed by clearing them.");p.meta={name:"createAction",key:"createActionmarkInvitesSeenForTeam",description:"Mark invite notifications as viewed by clearing them."};const g=(0,n.Ay)("Mark invite notifications as viewed by clearing them after a delay",(it,et,lt)=>{let{delay:nt,teamId:at}=lt;setTimeout(()=>{it(p({teamId:at,markBeforeMs:Date.now()-nt}))},nt)});g.meta={name:"createThunk",key:"createThunkmarkInvitesReadOnDelay",description:"Mark invite notifications as viewed by clearing them after a delay"};const E=(0,t.Ay)("Start screen share for current user with given mediaSourceId");E.meta={name:"createAction",key:"createActionstartScreenShare",description:"Start screen share for current user with given mediaSourceId"};const f=(0,t.Ay)("Stop screen share for current user");f.meta={name:"createAction",key:"createActionstopScreenShare",description:"Stop screen share for current user"};const O=(0,t.Ay)("Notify peers of changes to isDrawEnabled");O.meta={name:"createAction",key:"createActionpropagateDrawEnabled",description:"Notify peers of changes to isDrawEnabled"};const C=(0,t.Ay)("Enabled annotations for screen share host");C.meta={name:"createAction",key:"createActionpropagateHostDrawEnabled",description:"Enabled annotations for screen share host"};const M=(0,t.Ay)("Notify middleware that a new preferred device was selected");M.meta={name:"createAction",key:"createActionsetNewPreferredDevice",description:"Notify middleware that a new preferred device was selected"};const D=(0,t.Ay)("Notify middleware that automatic gain control setting has changed");D.meta={name:"createAction",key:"createActionsetAGC",description:"Notify middleware that automatic gain control setting has changed"};const P=(0,t.Ay)("Notify middleware that noise suppression setting has changed");P.meta={name:"createAction",key:"createActionsetNoiseSuppression",description:"Notify middleware that noise suppression setting has changed"};const k=(0,t.Ay)("Notify middleware that video background setting has changed");k.meta={name:"createAction",key:"createActionsetVideoBackgroundEffect",description:"Notify middleware that video background setting has changed"};const x=(0,t.Ay)("Toggle global keyboard shortcut support for muting / unmuting a huddle");x.meta={name:"createAction",key:"createActiontoggleGlobalMuteShortcut",description:"Toggle global keyboard shortcut support for muting / unmuting a huddle"};const F=(0,t.Ay)("Internal store update for mini-panel visibility");F.meta={name:"createAction",key:"createActioninternalUpdateMiniPanelVisibility",description:"Internal store update for mini-panel visibility"};const W=(0,t.Ay)("Upsert join credentials for a channel");W.meta={name:"createAction",key:"createActionupsertJoinCredentialsForChannel",description:"Upsert join credentials for a channel"};const Y=(0,t.Ay)("Clear the join credentials for a specific channel");Y.meta={name:"createAction",key:"createActionclearJoinCredentialsForChannel",description:"Clear the join credentials for a specific channel"};const S=(0,t.Ay)("Store and/or remote push Chime meeting events");S.meta={name:"createAction",key:"createActionhandleMeetingEvents",description:"Store and/or remote push Chime meeting events"};const L=(0,t.Ay)("Transition from the prejoin state to started");L.meta={name:"createAction",key:"createActiontransitionFromPrejoinToStarted",description:"Transition from the prejoin state to started"};const w=(0,t.Ay)("Action to update the store to either show or hide discovery banner");w.meta={name:"createAction",key:"createActionupdateDiscoveryBannerVisibility",description:"Action to update the store to either show or hide discovery banner"};const J=(0,t.Ay)("Toggle Video");J.meta={name:"createAction",key:"createActiontoggleVideo",description:"Toggle Video"};const G=(0,t.Ay)("Reporting CPU and memory usage stats");G.meta={name:"createAction",key:"createActionreportAppMetrics",description:"Reporting CPU and memory usage stats"};const X=(0,t.Ay)("Set true to specify that lounge music is playing, false otherwise.");X.meta={name:"createAction",key:"createActionsetIsLoungeMusicPlaying",description:"Set true to specify that lounge music is playing, false otherwise."};const te=(0,t.Ay)("Set current focused view type");te.meta={name:"createAction",key:"createActionsetContentView",description:"Set current focused view type"};const le=(0,t.Ay)("Set last huddle start time");le.meta={name:"createAction",key:"createActionsetLastHuddleStartTs",description:"Set last huddle start time"};const ve=(0,t.Ay)("Set last huddle end time");ve.meta={name:"createAction",key:"createActionsetLastHuddleEndTs",description:"Set last huddle end time"};const Q=(0,t.Ay)("Set last huddle duration time");Q.meta={name:"createAction",key:"createActionsetLastHuddleDurationTs",description:"Set last huddle duration time"};const Ae=(0,t.Ay)("Toggle video background filter");Ae.meta={name:"createAction",key:"createActiontoggleVideoBackgroundFilter",description:"Toggle video background filter"};const ae=(0,t.Ay)("Starts the video preview on the video element using the specified device");ae.meta={name:"createAction",key:"createActionstartVideoPreview",description:"Starts the video preview on the video element using the specified device"};const he=(0,t.Ay)("Stops the video preview on the video element");he.meta={name:"createAction",key:"createActionstopVideoPreview",description:"Stops the video preview on the video element"};const _e=(0,t.Ay)("Identifies which screenshare is being viewed in the mini-player");_e.meta={name:"createAction",key:"createActionsetScreenshareActivePanel",description:"Identifies which screenshare is being viewed in the mini-player"};const ee=(0,t.Ay)("Resets the store");ee.meta={name:"createAction",key:"createActionresetClientHuddleStore",description:"Resets the store"};const de=(0,t.Ay)("Start the canvas jukebox using content share");de.meta={name:"createAction",key:"createActionstartContentShareJukebox",description:"Start the canvas jukebox using content share"};const Ie=(0,t.Ay)("Stop the canvas jukebox");Ie.meta={name:"createAction",key:"createActionstopJukebox",description:"Stop the canvas jukebox"};const ce=(0,t.Ay)("Set selected song");ce.meta={name:"createAction",key:"createActionsetSongPlaying",description:"Set selected song"};const j=(0,t.Ay)("Send jukebox active song");j.meta={name:"createAction",key:"createActionsendJukeboxActiveSong",description:"Send jukebox active song"};const N=(0,t.Ay)("Request a jukebox song");N.meta={name:"createAction",key:"createActionrequestJukeboxSong",description:"Request a jukebox song"};const b=(0,t.Ay)("Request the jukebox stops");b.meta={name:"createAction",key:"createActionrequestJukeboxStop",description:"Request the jukebox stops"};const R=(0,t.Ay)("Send recording start notification");R.meta={name:"createAction",key:"createActionsendRecordingStartNotification",description:"Send recording start notification"};const K=(0,t.Ay)("Sets whether the active invite card in the sidebar can be rendered");K.meta={name:"createAction",key:"createActionsetCanRenderActiveInviteCardInSidebar",description:"Sets whether the active invite card in the sidebar can be rendered"};const B=(0,t.Ay)("Sets whether the huddle window of an active huddle is in focus or not.");B.meta={name:"createAction",key:"createActionsetIsHuddleWindowFocused",description:"Sets whether the huddle window of an active huddle is in focus or not."};const $=(0,t.Ay)("Sets whether the huddle window of an active huddle is open or not.");$.meta={name:"createAction",key:"createActiontoggleAllIncomingVideo",description:"Sets whether the huddle window of an active huddle is open or not."};const Z=(0,t.Ay)("Reports to the SDK when the client is offline");Z.meta={name:"createAction",key:"createActionreportClientOffline",description:"Reports to the SDK when the client is offline"};const re=(0,t.Ay)("Sets whether audio only mode is active or not.");re.meta={name:"createAction",key:"createActionsetIsAudioOnlyMode",description:"Sets whether audio only mode is active or not."};const Te=(0,t.Ay)("Sets whether the camera was enabled when audio only mode was activated.");Te.meta={name:"createAction",key:"createActionsetAudioOnlyModeCameraWasEnabled",description:"Sets whether the camera was enabled when audio only mode was activated."};const Ce=(0,t.Ay)("Sets whether the huddle window of an active huddle is open or not.");Ce.meta={name:"createAction",key:"createActionsetIsHuddleWindowOpen",description:"Sets whether the huddle window of an active huddle is open or not."};const Pe=(0,t.Ay)("True if huddle mini player is hidden, false if shown.");Pe.meta={name:"createAction",key:"createActionsetIsHuddleMiniPlayerHidden",description:"True if huddle mini player is hidden, false if shown."};const fe=(0,t.Ay)("Asks for video permission and enumerates devices");fe.meta={name:"createAction",key:"createActioninitVideoPermission",description:"Asks for video permission and enumerates devices"};const pe=(0,t.Ay)("Execute readiness check for audio input");pe.meta={name:"createAction",key:"createActionexecuteHuddlesAudioInputReadinessCheck",description:"Execute readiness check for audio input"};const q=(0,t.Ay)("Execute readiness check for audio output");q.meta={name:"createAction",key:"createActionexecuteHuddlesAudioOutputReadinessCheck",description:"Execute readiness check for audio output"};const se=(0,t.Ay)("Execute readiness check for video input");se.meta={name:"createAction",key:"createActionexecuteHuddlesVideoInputReadinessCheck",description:"Execute readiness check for video input"};const ge=(0,t.Ay)("Execute readiness check for a particular camera resolution");ge.meta={name:"createAction",key:"createActionexecuteHuddlesCameraResolutionReadinessCheck",description:"Execute readiness check for a particular camera resolution"};const Oe=(0,t.Ay)("Execute readiness check for audio connectivity");Oe.meta={name:"createAction",key:"createActionexecuteHuddlesAudioConnectivityReadinessCheck",description:"Execute readiness check for audio connectivity"};const Le=(0,t.Ay)("Execute readiness check for video connectivity");Le.meta={name:"createAction",key:"createActionexecuteHuddlesVideoConnectivityReadinessCheck",description:"Execute readiness check for video connectivity"};const We=(0,t.Ay)("Execute readiness check for content share connectivity");We.meta={name:"createAction",key:"createActionexecuteHuddlesContentShareConnectivityReadinessCheck",description:"Execute readiness check for content share connectivity"};const Re=(0,t.Ay)("Execute readiness check for network UDP connectivity");Re.meta={name:"createAction",key:"createActionexecuteHuddlesNetworkUDPConnectivityReadinessCheck",description:"Execute readiness check for network UDP connectivity"};const we=(0,t.Ay)("Execute readiness check for network TCP connectivity");we.meta={name:"createAction",key:"createActionexecuteNetworkTCPConnectivityReadinessCheck",description:"Execute readiness check for network TCP connectivity"};const Je=(0,t.Ay)("Sets that the Huddle was joined via prejoin");Je.meta={name:"createAction",key:"createActionsetHuddleWasJoinedFromPrejoin",description:"Sets that the Huddle was joined via prejoin"}},5702042015:(z,A,e)=>{"use strict";e.d(A,{A:()=>c,p:()=>o});var t=e(5286203919),n=e(4250409994),s=e(1031947056);let a;const c=(0,s.Ay)("Temporarily show mini-panel",function(r,l){let _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:2500;clearTimeout(a),r((0,n.Ko)(!0)),a=setTimeout(()=>r((0,n.Ko)(!1)),_)});c.meta={name:"createThunk",key:"createThunkshowMiniPanelForDuration",description:"Temporarily show mini-panel"};const o=(0,s.Ay)("Temporarily pause mini-panel visibility transition",(r,l)=>{const _=l();(0,t.Ae)(_)&&clearTimeout(a)});o.meta={name:"createThunk",key:"createThunkpauseMiniPanelTimeout",description:"Temporarily pause mini-panel visibility transition"}},2778217221:(z,A,e)=>{"use strict";e.d(A,{WS:()=>s,nq:()=>n,o7:()=>t});const t="HUDDLES",n=864e5,s=2},5378147939:(z,A,e)=>{"use strict";e.d(A,{A:()=>fe});var t=e(9706240641),n=e(3398586081),s=e(387328355),a=e(1289024643),c=e(462591818),o=e(6533394955),r=e(5795074931),l=e(2047021170),_=e(1889537412),d=e(6758774099),i=e(4250409994),m=e(5881236351),h=e(1031947056),v=e(6562711329);const y=(0,h.Ay)("Fetch channel membership info for huddle member",(pe,q,se)=>{let{channelId:ge,userId:Oe}=se;return pe((0,v.z)({channelId:ge,userIds:[Oe]})).then(Le=>{let{membershipInfo:We}=Le;return We[Oe]&&"isMember"in We[Oe]?!We[Oe].isMember:!0})});y.meta={name:"createThunk",key:"createThunkisUserNotHuddleChannelMember",description:"Fetch channel membership info for huddle member"};var T=e(2778217221),I=e(7434063642),p=e(9548972574),g=e(5332875232),E=e(3677514771),f=e(8305649700),O=e(1883693579),C=e(9712681361),M=e(9680914051),D=e(1917715832),P=e(4540171876),k=e(6422693406),x=e(6470070112),F=e(6839188756),W=e(56548687),Y=e(6244014364),S=e(5741354339),L=e(6929023741),w=e(4476913522),J=e(5286203919),G=e(4423055085),X=e(2141441167),te=e(4949104520),le=e(796111729),ve=e(9190452268),Q=e(1651628626),Ae=e(8737667238),ae=e(1921074781),he=e(5203103513);const _e=60*1e3,ee=15*1e3,de=1e3*10,Ie=1e3*60,ce=5e3;let j=!1;const N=500,b=25;let R=u(class{setTargetState(q){var se=this;return(0,t.coroutine)(function*(){se.targetState=q;const{huddleState:ge,huddleSubState:Oe}=se.targetState;se.isValidHuddleSubState(ge,Oe)||(se.targetState.huddleSubState=se.getInitialSubStateForHuddleState(ge)),(0,o.dispatchForClientStore)((0,i.Rh)(se.getOptimisticState(q))),yield se.process()})()}setTargetChannel(q){this.targetState.channelId=q}setTargetSubState(q){var se=this;return(0,t.coroutine)(function*(){se.isValidHuddleSubState(se.targetState.huddleState,q)&&(se.targetState.huddleSubState=q,yield se.process())})()}transitionFromPrejoinToStarted(){this.setTargetState({huddleState:C.RJ.STARTED,teamId:this.targetState.teamId,channelId:this.targetState.channelId,muted:this.targetState.muted,callId:this.targetState.callId,experimentHuddlesLoungeMusicPlayerGroupOn:this.targetState.experimentHuddlesLoungeMusicPlayerGroupOn})}getTimeOfLastStateChange(){return this.timeOfLastStateChange}getTimeOfLastSubStateChange(){return this.timeOfLastSubStateChange}waitForStartStop(){var q=this;return(0,t.coroutine)(function*(){return q.startStopDeferred||k.S.resolve()})()}isProcessing(){var q;return(q=this.startStopDeferred)===null||q===void 0?void 0:q.isPending()}isTargetState(){const{teamId:q,channelId:se,huddleState:ge}=this.getClientHuddleState();return(0,x.Ft)(this.targetState.huddleState)?ge===this.targetState.huddleState:q===this.targetState.teamId&&se===this.targetState.channelId&&ge===this.targetState.huddleState}isTargetSubState(){return this.getClientHuddleState().huddleSubState===this.targetState.huddleSubState}hasBeenInSubStateForAtLeastApproxTime(q){return this.timeOfLastSubStateChange?Date.now()-this.timeOfLastSubStateChange>q-N:!1}isValidHuddleSubState(q,se){return q===C.RJ.STARTED?se===void 0?!1:(0,X.A)(C.J_).includes(se):se===void 0}getInitialSubStateForHuddleState(q){if(q===C.RJ.STARTED)return C.J_.INITIAL_ALONE}process(){var q=this;return(0,t.coroutine)(function*(){if(q.isProcessing())return q.waitForStartStop();q.startStopDeferred=(0,S.u)();const se=setTimeout((0,t.coroutine)(function*(){var ge;if(!((ge=q.startStopDeferred)===null||ge===void 0)&&ge.isPending()){const Oe=new k.S.TimeoutError("HuddleStateManager timeout");yield q.handleErrorAndDisconnect(Oe)}}),q.startStopTimeout);try{yield q.runLoop(),clearTimeout(se),q.startStopDeferred.resolve()}catch(ge){yield q.handleErrorAndDisconnect(ge)}finally{clearTimeout(se)}q.startStopDeferred=null})()}runLoop(){var q=this;return(0,t.coroutine)(function*(){let se=0;for(;!q.isTargetState();){if(!q.isProcessing())return;if(se+=1,se>b)throw new Error("runLoop was stuck");const{teamId:Le,channelId:We,huddleState:Re}=q.getClientHuddleState(),{teamId:we,channelId:Je,huddleState:it,callId:et}=q.targetState;if(Le!==we&&(delete q.clogger,delete q.logger,delete q.telemeter),[C.RJ.STARTED,C.RJ.PRE_JOINED].includes(it)){if(Le!==we||We!==Je){switch(Re){case C.RJ.PENDING:case C.RJ.STARTED:case C.RJ.PRE_JOINED:yield q.goToNext(C.RJ.ENDING);break;default:yield q.goToNext(C.RJ.STARTING)}continue}switch(Re){case C.RJ.NOT_STARTED:yield q.goToNext(C.RJ.STARTING);break;case C.RJ.STARTING:try{yield q.goToNext(C.RJ.PENDING)}catch(lt){var ge;if(!((ge=q.credentials)===null||ge===void 0)&&ge.isQuickJoinCredentials){if(delete q.credentials,yield q.clearQuickJoinCredentials(),lt.message===C.M6.ChimeMeetingEnded)throw lt;if(et){const nt=(0,p.P_)(q.getState(),et);if(nt&&nt.hasEnded)throw new Error(C.M6.ChimeMeetingEnded)}if((0,g.ZG)(q.getState())){const nt=Date.now(),at=!0;yield q.safelyDisconnect(at);const Ke=Date.now()-nt;q.getLogger().info(`Disconnecting after failed attempt to join huddle added ${Ke}ms to TTI`)}else q.getLogger().warn("Initializing a new huddle without disconnecting the last one");yield q.goToNext(C.RJ.STARTING)}else throw lt}break;case C.RJ.PENDING:yield q.goToNext(q.targetState.huddleState);break;case C.RJ.PRE_JOINED:yield q.goToNext(C.RJ.COMPLETING_PRE_JOIN);break;case C.RJ.COMPLETING_PRE_JOIN:yield q.completePrejoin({isStartMuted:q.targetState.muted}),yield q.goToNext(C.RJ.STARTED);break;case C.RJ.STARTED:throw new Error("This should not be possible");case C.RJ.ENDING:case C.RJ.SURVEY:case C.RJ.SURVEY_GOOD:default:yield q.goToNext(C.RJ.STARTING);break}continue}if([C.RJ.PENDING,C.RJ.STARTED,C.RJ.PRE_JOINED].includes(Re)){yield q.goToNext(C.RJ.ENDING);continue}yield q.goToNext(it)}let Oe=0;for(;!q.isTargetSubState();){if(Oe+=1,Oe>b)throw new Error("runLoop() for huddle substate was stuck");const{huddleState:Le,huddleSubState:We}=q.getClientHuddleState(),{huddleSubState:Re}=q.targetState;if(!q.isValidHuddleSubState(Le,Re)){const we=q.getInitialSubStateForHuddleState(Le);q.targetState.huddleSubState=we,yield q.goToNextSubState(we),q.getLogger().warn(T.o7,`attempted to reach invalid huddleSubstate (${Re}) for the given huddleState (${Le})`);continue}if(Le===C.RJ.STARTED){switch(We){case C.J_.INITIAL_ALONE:if(Re===C.J_.INITIAL_ALONE_NOTICE_ACTIVE){yield q.goToNextSubState(Re);break}yield q.goToNextSubState(C.J_.IN_PROGRESS_TOGETHER);break;case C.J_.INITIAL_ALONE_NOTICE_ACTIVE:if(Re===C.J_.INITIAL_ALONE_NOTICE_DISMISSED){yield q.goToNextSubState(Re);break}yield q.goToNextSubState(C.J_.IN_PROGRESS_TOGETHER);break;case C.J_.INITIAL_ALONE_NOTICE_DISMISSED:yield q.goToNextSubState(C.J_.IN_PROGRESS_TOGETHER);break;case C.J_.IN_PROGRESS_TOGETHER:yield q.goToNextSubState(C.J_.IN_PROGRESS_ALONE);break;case C.J_.IN_PROGRESS_ALONE:if(Re===C.J_.IN_PROGRESS_ALONE_NOTICE_ACTIVE){yield q.goToNextSubState(Re);break}yield q.goToNextSubState(C.J_.IN_PROGRESS_TOGETHER);break;case C.J_.IN_PROGRESS_ALONE_NOTICE_ACTIVE:if(Re===C.J_.IN_PROGRESS_ALONE_NOTICE_DISMISSED){yield q.goToNextSubState(Re);break}yield q.goToNextSubState(C.J_.IN_PROGRESS_TOGETHER);break;case C.J_.IN_PROGRESS_ALONE_NOTICE_DISMISSED:yield q.goToNextSubState(C.J_.IN_PROGRESS_TOGETHER);break;default:yield q.goToNextSubState(C.J_.INITIAL_ALONE)}continue}yield q.goToNextSubState(void 0)}})()}goToNext(q){var se=this;return(0,t.coroutine)(function*(){var ge,Oe,Le,We;se.getLogger().info(`Marking huddle as ${q} [${(Le=(ge=se.targetState)===null||ge===void 0?void 0:ge.teamId)!==null&&Le!==void 0?Le:"N/A"}, ${(We=(Oe=se.targetState)===null||Oe===void 0?void 0:Oe.channelId)!==null&&We!==void 0?We:"N/A"}]`);const Re=Date.now();se.timeOfLastStateChange=Re,se.timeOfLastSubStateChange=Re;const we=se.getInitialSubStateForHuddleState(q);if(q===C.RJ.STARTING){var Je,it;const nt=se.assertTargetTeamAndChannel(C.RJ.STARTING),at=se.getOptimisticState(se.targetState);se.getLogger().info(`Optimistic state: ${at.optimisticHuddleState}`),(0,o.dispatchForClientStore)((0,i.xf)({huddleState:q,huddleSubState:we,...nt,...at,isPrejoin:((Je=se.targetState)===null||Je===void 0?void 0:Je.huddleState)===C.RJ.PRE_JOINED,sessionId:(0,Ae.A)()})),se.credentials=yield se.fetchCredentials(),(it=se.getTelemeter())===null||it===void 0||it.mark(M.Bq);return}if(q===C.RJ.PENDING){const nt=se.assert(se.credentials,"Expected credentials to be set before PENDING");(0,o.dispatchForClientStore)((0,i.Rh)({huddleState:q,huddleSubState:we,...se.assertTargetTeamAndChannel(C.RJ.PENDING),callId:nt.roomId})),yield se.connectToChime(nt,se.targetState),delete se.credentials;return}if(q===C.RJ.STARTED){var et;const nt=se.assertTargetTeamAndChannel(C.RJ.STARTED);(0,o.dispatchForClientStore)((0,i.Rh)({huddleState:q,huddleSubState:we,optimisticHuddleState:null,...nt,isPrejoin:!1})),(0,l.ty)(se.getState(),"huddles_set_status")&&se.scheduleHuddleStateExpirationIncrement(),se.setCoachmarkTimeout(we),(et=ae.F.getInstance())===null||et===void 0||et.request()}else{var lt;(lt=ae.F.getInstance())===null||lt===void 0||lt.release()}if(q===C.RJ.PRE_JOINED&&(0,o.dispatchForClientStore)((0,i.Rh)({huddleState:q,huddleSubState:we,optimisticHuddleState:null,...se.assertTargetTeamAndChannel(C.RJ.PRE_JOINED)})),q===C.RJ.ENDING){(0,o.dispatchForClientStore)((0,i.Rh)({huddleState:q,huddleSubState:we})),yield se.safelyDisconnect();return}(0,o.dispatchForClientStore)((0,i.Rh)({huddleState:q,huddleSubState:we,optimisticHuddleState:null}))})()}goToNextSubState(q){var se=this;return(0,t.coroutine)(function*(){q===C.J_.IN_PROGRESS_ALONE&&setTimeout(()=>{var ge;((ge=se.getClientHuddleState())===null||ge===void 0?void 0:ge.huddleSubState)===C.J_.IN_PROGRESS_ALONE&&se.hasBeenInSubStateForAtLeastApproxTime(de)&&(se.isMicEnabled()||se.targetState.experimentHuddlesLoungeMusicPlayerGroupOn)&&se.setTargetSubState(C.J_.IN_PROGRESS_ALONE_NOTICE_ACTIVE)},de),se.timeOfLastSubStateChange=Date.now(),(0,o.dispatchForClientStore)((0,i.Rh)({huddleSubState:q}))})()}handleErrorAndDisconnect(q){var se=this;return(0,t.coroutine)(function*(){var ge;se.getLogger().error(q);const{huddleState:Oe}=se.getClientHuddleState();if([C.RJ.PENDING,C.RJ.STARTED].includes(Oe))try{yield k.S.race([new k.S((Le,We)=>{setTimeout(()=>We(new Error("HuddleStateManager disconnect timeout")),se.disconnectTimeout)}),se.safelyDisconnect()])}catch(Le){se.getLogger().error(Le)}(0,o.dispatchForClientStore)((0,i.Rh)({huddleState:C.RJ.NOT_STARTED,optimisticHuddleState:null})),yield k.S.resolve(se.handleError(q,Oe)),(ge=se.startStopDeferred)===null||ge===void 0||ge.reject(q)})()}getInitialAloneInHuddleTimeOutValue(){if(j)return ce;if(!this.targetState.experimentHuddlesLoungeMusicPlayerGroupOn)return Ie;const q=this.getState(),se=(0,l.ty)(q,he.VW);return se?se*1e3:(this.getLogger().info("User pref 'huddles_play_music_timeout' is undefined, using default 60 seconds"),Ie)}setCoachmarkTimeout(q){q===C.J_.INITIAL_ALONE&&(setTimeout(()=>{var se;((se=this.getClientHuddleState())===null||se===void 0?void 0:se.huddleSubState)===C.J_.INITIAL_ALONE&&this.hasBeenInSubStateForAtLeastApproxTime(this.getInitialAloneInHuddleTimeOutValue())&&(this.isMicEnabled()||this.targetState.experimentHuddlesLoungeMusicPlayerGroupOn)&&(this.setTargetSubState(C.J_.INITIAL_ALONE_NOTICE_ACTIVE),this.getLogger().info("setTimeout executed on substate: initial_alone"))},this.getInitialAloneInHuddleTimeOutValue()),this.getLogger().info("setTimeout started on substate: initial_alone"))}isMicEnabled(){var q;return!!(!((q=(0,s.Ng)(this.getState()))===null||q===void 0)&&q.isMicrophoneEnabled)}getClientHuddleState(){const q=(0,o.getStateForClientStore)(),se=(0,J.EG)(q),{channelId:ge,teamId:Oe}=(0,J.Qn)(q)||{};if(!se||se===C.RJ.NOT_STARTED)return{huddleState:C.RJ.NOT_STARTED,channelId:ge,teamId:Oe};const Le=(0,J.EO)(q);return{huddleState:se,huddleSubState:Le,channelId:ge,teamId:Oe}}assertTargetTeamAndChannel(q){const{teamId:se,channelId:ge}=this.targetState;return{teamId:this.assert(se,`Expected teamId to be set for ${q}`),channelId:this.assert(ge,`Expeted channelId to be set for ${q}`)}}getChannelIdOrDie(){const{channelId:q}=this.getClientHuddleState(),{channelId:se}=this.targetState,ge=q||se;return this.assert(ge,"No channel ID or active huddle")}getThreadTsOrNothing(){const{threadTs:q}=this.getClientHuddleState(),{threadTs:se}=this.targetState;return q||se}getIsMultiDevice(){return!!this.targetState.isMultiDevice}getIsExperimentStandaloneHuddlesOn(){return!!this.targetState.experimentStandaloneHuddlesOn}getTeamIdOrDie(){const{teamId:q}=this.getClientHuddleState(),{teamId:se}=this.targetState,ge=q||se;return this.assert(ge,"No team ID or active huddle")}getCallIdOrDie(){const q=(0,o.getStateForClientStore)(),se=(0,J.E9)(q);return this.assert(se,"No call ID or active huddle")}getHuddleState(){const{huddleState:q}=this.getClientHuddleState();return q}dispatch(q){const se=this.getTeamIdOrDie();return(0,o.dispatchForTeamId)(se,q)}getState(q){const se=q||this.getTeamIdOrDie();return(0,o.getStateByTeamId)(se)}assert(q,se){if(q==null)throw new Error(se);return q}getClogger(){if(this.clogger)return this.clogger;const{teamId:q}=this.getClientHuddleState();return this.clogger=q?(0,W.e)({state:(0,o.getStateByTeamId)(q)}):(0,W.e)(),this.clogger}getLogger(){return this.logger?this.logger:(this.logger=(0,le.Wo)({label:this.logLabel}),this.logger)}getTelemeter(){if(this.telemeter)return this.telemeter;const{teamId:q}=this.getClientHuddleState();return q?this.telemeter=(0,ve.Cy)({state:(0,o.getStateByTeamId)(q)}):this.telemeter=(0,ve.rh)(),this.telemeter}constructor({logLabel:q=T.o7,startStopTimeout:se=_e,disconnectTimeout:ge=ee}={}){this.targetState={huddleState:C.RJ.NOT_STARTED},this.startStopDeferred=null;var Oe=this;this.safelyDisconnect=(0,t.coroutine)(function*(){let We=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;try{yield Oe.disconnect(We)}catch(Re){Oe.getLogger().error("Failed to disconnect from the Huddle. This may mean the user is still connected to the media server",Re)}});var Le=this;this.scheduleHuddleStateExpirationIncrement=(0,t.coroutine)(function*(){if(Le.isTargetState()&&Le.targetState.huddleState!==C.RJ.STARTED)return;const We=60*5,Re={huddle_state_expiration_ts:new Date().getTime()/1e3+We};yield Le.dispatch((0,Q.c)({profile:Re,reason:"increment-huddle-state-expiration-ts"})),setTimeout(Le.scheduleHuddleStateExpirationIncrement,(0,te.A)(12e4,-.1,.1))}),this.logLabel=q,this.startStopTimeout=se,this.disconnectTimeout=ge,this.timeOfLastStateChange=null,this.timeOfLastSubStateChange=null}},"BaseHuddleStateManager");(0,G.ul)("baseHuddleStateManager",{setShortTimeoutValue:()=>{j=!0},resetShortTimeoutValue:()=>{j=!1}}),Object.defineProperty({shouldUseDebugTimeout:j},"shouldUseDebugTimeout",{get:()=>j,set:()=>{j=!0}});var B=e(7004355564),$=e(4715430489),Z=e(6251210828),re=e(415910655),Te=e(8872167513);class Ce extends R{start(q,se,ge,Oe,Le,We,Re,we){var Je=this;return(0,t.coroutine)(function*(){yield Je.startHuddleWithTargetState(C.RJ.STARTED,q,se,ge,Oe,Le,We,Re,we)})()}prejoin(q,se,ge,Oe,Le){var We=this;return(0,t.coroutine)(function*(){yield We.startHuddleWithTargetState(C.RJ.PRE_JOINED,q,se,ge,Oe,void 0,Le)})()}setOthersInHuddle(){var q=this;return(0,t.coroutine)(function*(){yield q.setTargetSubState(C.J_.IN_PROGRESS_TOGETHER)})()}setAloneInHuddle(){var q=this;return(0,t.coroutine)(function*(){yield q.setTargetSubState(C.J_.IN_PROGRESS_ALONE)})()}dismissAloneInHuddleWarning(q){var se=this;return(0,t.coroutine)(function*(){const ge=q?C.J_.INITIAL_ALONE_NOTICE_DISMISSED:C.J_.IN_PROGRESS_ALONE_NOTICE_DISMISSED;yield se.setTargetSubState(ge)})()}startHuddleWithTargetState(q,se,ge,Oe,Le,We,Re,we,Je){var it=this;return(0,t.coroutine)(function*(){var et;!((et=it.currentHuddleDeferred)===null||et===void 0)&&et.isPending()||(it.currentHuddleDeferred=(0,S.u)()),yield it.setTargetState({huddleState:q,teamId:se,channelId:ge,muted:Oe,callId:Le,threadTs:We,experimentHuddlesLoungeMusicPlayerGroupOn:Re,isMultiDevice:we,experimentStandaloneHuddlesOn:Je})})()}stop(){var q=this;return(0,t.coroutine)(function*(){var se;const ge=q.getState(),Oe=q.getHuddleState()!==C.RJ.PRE_JOINED&&(0,p.Cd)(ge)&&!q.isProcessing();Oe&&(q.getLogger().info(`Show huddle survey in ${q.getChannelIdOrDie()}`),q.dispatch((0,O.Cd)({timeSeen:new Date().toISOString()}))),yield q.setTargetState({huddleState:Oe?C.RJ.SURVEY:C.RJ.NOT_STARTED}),q.getHuddleState()===C.RJ.NOT_STARTED&&(!((se=q.currentHuddleDeferred)===null||se===void 0)&&se.isPending())&&q.currentHuddleDeferred.resolve()})()}enterTerminalState(q){var se=this;return(0,t.coroutine)(function*(){var ge;!((ge=se.pendingHuddleStart)===null||ge===void 0)&&ge.isPending()?se.pendingHuddleStart.reject(q):yield se.handleErrorAndDisconnect(q)})()}waitForHuddleToEnd(){return k.S.resolve(this.currentHuddleDeferred)}handleError(q,se){var ge;this.getLogger().error(q);const Oe=se===C.RJ.STARTING||se===C.RJ.PENDING;this.dispatch((0,D.A)({errorCode:(0,C.dJ)(q.name)?q.name:q.message,isJoinError:Oe})),!((ge=this.currentHuddleDeferred)===null||ge===void 0)&&ge.isPending()&&this.currentHuddleDeferred.resolve()}getOptimisticState(q){let{teamId:se,channelId:ge,huddleState:Oe}=q;if([C.RJ.NOT_STARTED].includes(Oe))return{optimisticHuddleState:C.RJ.ENDING};if([C.RJ.SURVEY].includes(Oe))return{optimisticHuddleState:null};if(Oe===C.RJ.PRE_JOINED)return{optimisticHuddleState:C.RJ.PRE_JOINED,isPrejoin:!0};if(Oe===C.RJ.STARTED&&se){var Le,We;const Re=(0,o.getStateByTeamId)(se),we=(0,o.getStateForClientStore)(),Je=(0,J.aQ)(we),it=(Je==null?void 0:Je.channelId)===ge||!((Le=(0,p.Yw)(Re,ge))===null||Le===void 0||(We=Le.activeParticipants)===null||We===void 0)&&We.length?null:C.RJ.STARTED;return(0,l.ty)(Re,"huddles_global_mute")&&(0,o.dispatchForClientStore)((0,i.Bk)(!0)),{isPrejoin:!1,optimisticHuddleState:it}}return{}}fetchCredentials(){var q=this;return(0,t.coroutine)(function*(){const se=q.getTeamIdOrDie(),ge=q.getChannelIdOrDie(),Oe=q.getThreadTsOrNothing(),Le=(0,o.getStateForClientStore)(),We=(0,p.Yw)(q.getState(),ge),{ttiTrace:Re}=(0,Te.A)().getAllTraceHandlers(),we=(0,J.WL)(Le,ge),Je=q.getIsMultiDevice(),it=(0,$.x)(q.getState());if(Re==null||Re.createFetchCredentialsSpan(),we){Re==null||Re.setCachedTag({cached:!0});const et=(We==null?void 0:We.id)||(0,x.RW)(we.credentials);if(et){const lt=(0,p.P_)(q.getState(),et);if(lt&&lt.hasEnded)throw yield q.clearQuickJoinCredentials(),new Error(C.M6.ChimeMeetingEnded)}return q.getTelemeter().count(M.K7),Re==null||Re.closeFetchCredentialsSpan(),{roomId:et,server:we.credentials,isQuickJoinCredentials:!0}}if((0,g.CI)(q.getState(se))){const et=(0,Z._6)(q.getState(),{channelId:ge});if(et)return{roomId:(0,x.RW)(et),server:et,isQuickJoinCredentials:!1}}return q.getTelemeter().mark(M.aW),Re==null||Re.setCachedTag({cached:!1}),q.dispatch((0,P.O3)({teamId:se,channelId:ge,shouldFetchRegion:!We,traceId:Re==null?void 0:Re.getTTITraceId(),parentSpanId:Re==null?void 0:Re.getFetchCredentialsSpanId(),...Oe&&{threadTs:Oe},...Je&&{isMultiDevice:Je}})).then(et=>{var lt,nt;if(!(!(et==null||(lt=et.server)===null||lt===void 0)&&lt.meeting)||!(!(et==null||(nt=et.server)===null||nt===void 0)&&nt.attendee))throw new Error("create_meeting_failed");Re==null||Re.closeFetchCredentialsSpan(),q.getTelemeter().mark(M.bW);const at=q.getTelemeter().measure(M.aW,M.iE,M.bW);q.getTelemeter().count(M.iE,at),(0,re.jm)({roomsJoinTime:at});let ze=ge;return q.getIsExperimentStandaloneHuddlesOn()&&et.channelId&&(ze=et.channelId,q.setTargetChannel(ze),(0,o.dispatchForClientStore)((0,i.Jc)(ze))),(0,o.dispatchForClientStore)((0,i.Yi)({channelId:ze,joinCredentials:et.server,expiry:Date.now()+T.nq,fromInvite:!1})),et.rootThreadTs&&et.roomId&&(q.dispatch((0,I.ZL)({huddleId:et.roomId,thread:{channelId:ze,ts:et.rootThreadTs}})),q.dispatch((0,f.KN)({channelId:ze,threadTs:et.rootThreadTs,lastRead:et.rootThreadTs,reason:"canvas-rooms-join-api"})),q.dispatch(it?(0,w.a)({channelId:ze,threadTs:et.rootThreadTs,oldest:et.rootThreadTs}):(0,L.a)({channelId:ze,threadTs:et.rootThreadTs,oldest:et.rootThreadTs}))),et})})()}connectToChime(q,se){let{server:ge,roomId:Oe}=q,{muted:Le,huddleState:We}=se;var Re=this;return(0,t.coroutine)(function*(){const{ttiTrace:we}=(0,Te.A)().getAllTraceHandlers();return we==null||we.createConnectToMediaServiceSpan(),(0,o.dispatchForClientStore)((0,i.qW)({callResult:{server:ge,roomId:Oe,regions:"",inviteResponses:[],virtualRoomId:""},isStartMuted:Le,waitForHuddleStart:(0,S.u)(),isPrejoin:We===C.RJ.PRE_JOINED})),Re.pendingHuddleStart=(0,S.u)(),We===C.RJ.PRE_JOINED?k.S.resolve():Re.pendingHuddleStart})()}resolvePendingJoin(q){var se=this;return(0,t.coroutine)(function*(){try{var ge;const Le=se.getChannelIdOrDie(),{ttiTrace:We}=(0,Te.A)().getAllTraceHandlers(),Re=se.getState(),we=(0,o.getStateForClientStore)(),{callId:Je,optimisticHuddleState:it}=(0,J.Qn)(we)||{},et=(0,p.dy)(Re);if(se.getLogger().info(`Resolve pending huddle (${Le}, optimisticHuddleState: ${it}, has optimisticTopic: ${!!et})`),!(!((ge=se.pendingHuddleStart)===null||ge===void 0)&&ge.isPending()))throw new Error("No pending huddle start in resolvePendingJoin");const lt=se.assert(Je,"Room ID is not defined for pending join"),nt=(0,l.ty)(Re,"huddles_cc_by_default");if((0,x.UA)(Re,Le)&&nt&&(se.dispatch((0,_.A)()),se.dispatch((0,d.dD)(!0)),se.dispatch((0,d.jL)(!0))),et){try{yield se.dispatch((0,P.xB)({roomId:lt,name:et})),se.dispatch((0,a.oU)({id:lt,name:et}))}catch(ze){se.getLogger().error(ze)}se.dispatch((0,m.Jc)(null))}(0,o.dispatchForClientStore)((0,i.u8)(Le)),We==null||We.closeConnectToMediaServiceSpan(),(0,W.e)({state:Re}).track(Y.EventId.HUDDLES_TIME_AUDIO_SESSION_STARTED,{contexts:{calls:{room_id:lt,duration_ms:Math.round(q),channel_id:Le}}}),(0,re.jm)({audioConnectedTime:q}),(0,o.dispatchForClientStore)((0,i.Rh)({isSelfJoined:!0})),se.pendingHuddleStart.resolve()}catch(Le){var Oe;(Oe=se.pendingHuddleStart)===null||Oe===void 0||Oe.reject(Le)}})()}completePrejoin(q){var se=this;return(0,t.coroutine)(function*(){const ge=se.getChannelIdOrDie(),Oe=(0,o.getStateForClientStore)(),{ttiTrace:Le}=(0,Te.A)().getAllTraceHandlers(),We=(0,J.WL)(Oe,ge);return Le==null||Le.setCachedTag({cached:!!We}),Le==null||Le.createConnectToMediaServiceSpan(),(0,o.dispatchForClientStore)((0,i.f2)({...q}))})()}clearQuickJoinCredentials(){return(0,t.coroutine)(function*(){const q=(0,o.getStateForClientStore)(),{channelId:se}=(0,J.Qn)(q)||{};return(0,o.dispatchForClientStore)((0,i.WB)({channelId:se}))})()}disconnect(){let q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;var se=this;return(0,t.coroutine)(function*(){var ge;const Oe=se.getState(),Le=(0,o.getStateForClientStore)(),{channelId:We,teamId:Re}=(0,J.Qn)(Le)||{};if(!q)try{(0,Te.A)().cleanup()}catch(we){se.getLogger().error(`Error cleaning up huddle tracing: ${we}`)}try{(0,o.dispatchForClientStore)((0,i.Bk)(!1)),(0,g.lV)(Oe)&&((0,o.dispatchForClientStore)((0,i.JM)()),(0,o.dispatchForClientStore)((0,i._u)({song:void 0}))),(0,o.dispatchForClientStore)((0,i.Rh)({isSelfJoined:!1}));const Je=(0,r.WR)(Oe),it=We&&(0,p.Yw)(Oe,We);if(it&&We){const et=(it.activeParticipants||[]).filter(nt=>!((0,c.MZ)(nt)&&nt.slackId===Je));se.dispatch((0,a.oU)({id:it.id,activeParticipants:et}));const lt=(0,a.H6)(se.getState(),it.id);lt&&se.dispatch((0,m.mr)({call:lt,channelId:We}))}if(We){const et=yield(0,o.dispatchForTeamId)(Re,y({channelId:We,userId:Je})),lt=(0,E.H7)(Oe),nt=(0,F.tc)(lt);(et||nt)&&(yield se.clearQuickJoinCredentials()),(0,o.dispatchForClientStore)((0,i.u8)(We))}}catch(we){se.getLogger().error("An error occurred cleaning up huddle redux state. Proceeding to disconnect from media server.",we)}try{const we=(0,S.u)();(0,o.dispatchForClientStore)((0,i.pl)({waitForHuddleEnd:we})),yield we}catch(we){se.getLogger().error("An error occurred while disconnecting from the media server.",we)}se.dispatch((0,s.VL)({huddlesVideoActive:!1})),se.dispatch((0,I.np)()),(0,o.dispatchForClientStore)((0,i.cx)()),!((ge=se.pendingHuddleStart)===null||ge===void 0)&&ge.isPending()&&se.pendingHuddleStart.reject(new Error("HuddleStateManager shutdown"))})()}}u(Ce,"HuddleStateManager");const fe=(0,n.A)(()=>{const pe=new Ce;return(0,B.R)(pe.waitForStartStop.bind(pe)),pe})},7004355564:(z,A,e)=>{"use strict";e.d(A,{A:()=>a,R:()=>s});var t=e(6422693406);let n;const s=u(c=>{n=c},"setWaitForStartStop"),a=u(()=>n?n():t.S.resolve(),"__WEBPACK_DEFAULT_EXPORT__")},3065433701:(z,A,e)=>{"use strict";e.d(A,{CE:()=>o,Gu:()=>r,vT:()=>n.vT});var t=e(1031947056),n=e(7366481123);const s=3*1e3,a={[n.vT.NoUserAudioStream]:!0,[n.vT.NoUserVideoStream]:!0,[n.vT.NoAudioOutputAudioElementError]:!0,[n.vT.NoAudioOutputAudioLevelError]:!0,[n.vT.SlowNetwork]:!0,[n.vT.PeerMuteRequest]:!0};let c={};const o=(0,t.Ay)("Display alert message for huddle call",(_,d,i)=>{let{alert:m,peerId:h}=i;if(!c[m]){if(a[m]){c[m]=setTimeout(()=>{c[m]&&(clearTimeout(c[m]),delete c[m]),_((0,n.Sb)({alert:m,peerId:h}))},s);return}_((0,n.Sb)({alert:m,peerId:h}))}});o.meta={name:"createThunk",key:"createThunkdisplayAlertMessage",description:"Display alert message for huddle call"};const r=(0,t.Ay)("Undisplay an alert message for huddle call",(_,d,i)=>{c[i]&&(clearTimeout(c[i]),delete c[i]),_((0,n.LL)(i))});r.meta={name:"createThunk",key:"createThunkhideAlertMessage",description:"Undisplay an alert message for huddle call"},Object.defineProperty({alertTimeouts:c},"alertTimeouts",{get:()=>c,set:_=>{c=_}})},5253428843:(z,A,e)=>{"use strict";e.d(A,{A:()=>a});var t=e(1031947056),n=e(5378147939);const s=(0,t.Ay)("Handle huddle error",(c,o,r)=>(0,n.A)().enterTerminalState(new Error(r.terminalState)));s.meta={name:"createThunk",key:"createThunkenterTerminalState",description:"Handle huddle error"};const a=s},2766373332:(z,A,e)=>{"use strict";e.d(A,{N$:()=>Oe,KD:()=>q,kq:()=>pe,HU:()=>se});var t=e(9706240641),n=e(1031947056),s=e(6533394955),a=e(387328355),c=e(9864164947),o=e(7067820909),r=e(7621809678),l=e(3245843483),_=e(2778217221),d=e(6134475965),i=e(1049642794),m=e(2802517438),h=e(3134334389),v=e(3288846409),y=e(3037015781),T=e(4979382452),I=e(8029613601),p=e(4947127560),g=e(4636370173),E=e(2465132699),f=e(8523371695),O=e(3606117573),C=e(2683115972),M=e(3165300465),D=e(1610251172),P=e(4481313819),k=e(9418991940),x=e(5363983309),F=e(5286203919),W=e(9101533895),Y=e(9289081806),S=e(8921478798),L=e(1407713935),w=e(6244014364),J=e(735940183),G=e(8320929653),X=e(4233000497);function te(){return te=Object.assign||function(Le){for(var We=1;We<arguments.length;We++){var Re=arguments[We];for(var we in Re)Object.prototype.hasOwnProperty.call(Re,we)&&(Le[we]=Re[we])}return Le},te.apply(this,arguments)}u(te,"_extends");const le=new J.Ay("huddles"),ve={elementName:"huddles_invite_confirmation_dialog_cancel",eventId:w.EventId.HUDDLES_JOIN_CANCEL,onClick:{enableClogAction:!0}},Q={elementName:"huddles_invite_confirmation_dialog_ok",eventId:w.EventId.HUDDLES_JOIN_CONFIRM,onClick:{enableClogAction:!0}};function Ae(Le){let{closeModal:We,...Re}=Le;const{channelId:we,senderUserId:Je}=Re,it=(0,X.A)(we),{handleDecline:et,handleJoin:lt,isLoading:nt,inviteText:at}=(0,G.lc)(Re),ze=(0,k.d4)(Lt=>(0,S.I)(Lt,Je));let Ke=le.t("Huddle with {dmPersons}",{dmPersons:ze,fallbackHash:"a0767c2e0145a0f1159ecf41452f3cf03b376fe1"});const He=(0,k.d4)(Lt=>(0,W.OL)(Lt,we)),Ye=(0,k.d4)(Lt=>(0,y.uz)(He)?(0,Y.SB)(Lt,He,{publicChannelIncludeHashSign:!1,imIncludeAtSign:!1}):void 0);Ye&&(Ke=(0,L.JM)(He)?le.t("Huddle with {dmPersons}",{dmPersons:Ye,fallbackHash:"a0767c2e0145a0f1159ecf41452f3cf03b376fe1"}):le.t("Huddle in {channelName}",{channelName:Ye,fallbackHash:"a0767c2e0145a0f1159ecf41452f3cf03b376fe1"}));const _t=(0,v.cw)(F.hc)===we;(0,h.useEffect)(()=>{_t&&!nt&&(We==null||We())},[_t,nt,We]);const vt=(0,h.useCallback)(()=>{et(),We==null||We()},[We,et]),Tt="huddle-invite-join-modal";return h.createElement(P.A,te({uiComponentName:w.UiComponentName.HUDDLES_INVITE_CONFIRMATION_DIALOG},it),h.createElement(T.A,{labelledby:Tt,dataQa:Tt,closeModal:We,role:"dialog",className:"p-huddle_invite_join_modal",overlayClassName:"p-huddle_invite_join_modal__overlay",shouldReturnFocusAfterClose:!0},h.createElement(I.A,null,h.createElement(p.A,{title:Ke,id:Tt})),h.createElement(g.A,null,h.createElement(E.A,null,at)),h.createElement(f.A,null,h.createElement(O.A,null,h.createElement(C.Ay,{type:"outline",onClick:vt,"data-qa":"huddle_invite_join_cancel",autoClogProps:ve},le.t("Not Now")),h.createElement(M.A,{type:"primary",loading:nt,onClick:lt,"data-qa":"huddle_invite_join_go",autoClogProps:Q,autoFocus:!0},h.createElement(D.A,{type:"headphones"}),h.createElement("span",{className:"p-huddle_invite_join_modal__join_label"},le.t("Join")))))))}u(Ae,"HuddleInviteJoinModal"),Ae.displayName="HuddleInviteJoinModal";const ae={HuddleInviteJoinModal:Ae},he=(0,x.A)(Ae);var _e=e(605594140),ee=e(6422693406),de=e(796111729),Ie=e(8040098042),ce=e(2960290117),j=e(6415612447),N=e(6470070112),b=e(56548687),R=e(571104883),K=e(8746998952),B=e(9712681361),$=e(5702042015),Z=e(7429662208),re=e(3193155968),Te=e(6695353875),Ce=e(9629572172),Pe=e(352142497);const fe=u((Le,We,Re)=>{(0,b.e)({state:Le}).track(We,{contexts:{calls:(0,N.gG)(Le,Re),ui_context:{action:w.UiAction.KEYDOWN}}})},"clogHuddlesEvent"),pe=(0,n.Ay)("Start huddle in highlighted channel or current primary view",function(){var Le=(0,t.coroutine)(function*(We,Re,we){let{highlightedChannelId:Je}=we;const it=(0,s.getStateForClientStore)(),et=Re(),lt=(0,Te.cc)(et),nt=lt,at=(0,Z.e6)(et),ze=(0,m.A)(et),Ke=nt?(0,Z.F8)(et,{tab:at,container:re.mq.Primary}):null,He=nt?Ke==null?void 0:Ke.id:ze,Ye=Je||He,{channelId:_t,teamId:vt}=(0,F.Ak)(it)||{};if(_t&&vt&&(!Je||Je===_t)){(0,s.dispatchForTeamId)(vt,(0,d.A)()),fe(et,w.EventId.HUDDLES_LEAVE,_t);return}const Tt=(0,F.aQ)(it);if(Tt&&!Je){const{channelId:ft,senderUserId:mt,callId:Yt,teamId:nn}=Tt;(0,s.dispatchForTeamId)(nn,he({channelId:ft,senderUserId:mt,callId:Yt}));return}if(!Ye||!(0,Ie.A)(Ye)&&!(0,ce.Ay)(Ye)){lt&&We((0,_e.A)());return}const Lt=(0,j.Y)(et,Ye);Lt&&(0,N.Bn)(et,Lt)&&(fe(et,w.EventId.HUDDLES_JOIN,Lt.id),We((0,K.A)({channelId:Lt.id,forceFocus:!0,entryPoint:B.su.KEYBOARD_SHORTCUT_JOIN_HUDDLE})))});return function(We,Re,we){return Le.apply(this,arguments)}}());pe.meta={name:"createThunk",key:"createThunktoggleHuddleInHighlightedChannel",description:"Start huddle in highlighted channel or current primary view"};const q=(0,n.Ay)("Start huddle in the current view",function(){var Le=(0,t.coroutine)(function*(We,Re,we,Je){var it,et;const lt=Re(),{shouldUseNavigate:nt,isChildWindow:at,getViewSet:ze}=Je(Ce.U),Ke=ze(lt);(!nt||!at||(Ke==null||(it=Ke[re.mq.Primary])===null||it===void 0?void 0:it.viewType)!==Pe.D.Channel)&&We(pe({highlightedChannelId:void 0}));const He=Ke==null||(et=Ke[re.mq.Primary])===null||et===void 0?void 0:et.id;We(pe({highlightedChannelId:He}))});return function(We,Re,we,Je){return Le.apply(this,arguments)}}());q.meta={name:"createThunk",key:"createThunktoggleHuddleInCurrentView",description:"Start huddle in the current view"};const se=(0,n.Ay)("Toggle microphone from current value to opposite value",(Le,We)=>{const Re=(0,s.getStateForClientStore)(),{teamId:we,channelId:Je}=(0,F.Ak)(Re)||{};if(!we)return;const it=(0,s.getStateByTeamId)(we),et=(0,a.Ng)(it),lt=et==null?void 0:et.isMicrophoneEnabled;(0,s.dispatchForTeamId)(we,(0,i.A)(!lt)),Le(lt?(0,c.Ho)():(0,c.qc)()),(0,de.Ay)({state:it}).info(_.o7,`Keyboard shortcut invoked -- toggling mic to ${lt?w.EventId.HUDDLES_MUTE:w.EventId.HUDDLES_UNMUTE}`),Je&&fe(it,lt?w.EventId.HUDDLES_MUTE:w.EventId.HUDDLES_UNMUTE,Je)});se.meta={name:"createThunk",key:"createThunktoggleSelfMicrophone",description:"Toggle microphone from current value to opposite value"};let ge=!1;const Oe=u(Le=>{var We;return(0,R.dY)("4.13.0")?(Le&&!ge&&((0,l.zin)(r.Sr.TOGGLE_MUTE,(0,t.coroutine)(function*(){const Re=(0,s.getStateForClientStore)(),{teamId:we}=(0,F.Ak)(Re)||{};we&&((0,s.dispatchForTeamId)(we,se()),(0,o.Sr)((0,s.getStateForClientStore)())||(0,s.dispatchForClientStore)((0,$.A)()))})),ge=!0),(We=(0,l.wzE)(r.Sr.TOGGLE_MUTE,Le))===null||We===void 0?void 0:We.then(()=>Le)):ee.S.resolve(!1)},"maybeToggleGlobalMuteShortcut")},1883693579:(z,A,e)=>{"use strict";e.d(A,{uZ:()=>ee,Tn:()=>Ie,Cd:()=>de});var t=e(796111729),n=e(1031947056),s=e(6533394955),a=e(387484329),c=e(2778217221),o=e(4250409994),r=e(9712681361),l=e(6422693406),_=e(5046160032),d=e(4914127094),i=e(8848660647),m=e(7299481592),h;(function(ce){ce.HuddleSurvey="huddle-survey",ce.ListsSurvey="lists-survey"})(h||(h={}));var v;(function(ce){ce.NoAudioInput="no-audio-input",ce.NoAudioOutput="no-audio-output",ce.LowVideoQuality="low-video-quality",ce.LowAudioQuality="low-audio-quality",ce.VideoNotWorking="video-not-working",ce.DeviceSelectionError="device-selection-error",ce.Disconnected="disconnected",ce.SomethingElse="something-else",ce.Dismiss="dismiss"})(v||(v={}));function y(ce){return ce.isOk}u(y,"isOkResult");const T=(0,n.Ay)("Send survey results",(ce,j,N)=>{var b,R;const K=j();var B;const $=(B=N.callId)!==null&&B!==void 0?B:K.activeCall.id;if(!$)return(0,m.M)(!1,"There should have been a call in order to send survey results."),l.S.reject(new Error("SendSurveyResult: No call"));var Z;const re=(Z=N.type)!==null&&Z!==void 0?Z:"vo-survey",Te=y(N)?void 0:{response_requested:!1,comments:N.comments,is_video:(b=K.activeCall)===null||b===void 0?void 0:b.hasVideoBeenEnabled,is_ss:(R=K.activeCall)===null||R===void 0?void 0:R.hasScreenshareBeenEnabled,list_id:N==null?void 0:N.listId,list_entry_point:N==null?void 0:N.listEntryPoint},Ce=y(N)||re===h.ListsSurvey?"ok":N.notOkResponses.join(","),Pe={room:$,event_type:re,event_value:Ce,event_metadata:JSON.stringify(Te)};return(0,_.A)({apiUrl:"/api/",method:"screenhero.rooms.userEvent",token:(0,d.F)(K),versionTs:(0,i.HF)(),versionUid:(0,i.X3)(),args:Pe})?l.S.resolve():l.S.reject(new Error("SendSurveyResult: beacon failed"))});T.meta={name:"createThunk",key:"createThunksendSurveyResult",description:"Send survey results"};var I=e(3134334389),p=e(9418991940),g=e(6313685253),E=e(8300007136),f=e(6084388622),O=e(3989454579),C=e(6948117092),M=e(5016574668),D=e(3855029223),P=e(169770637),k=e(6310192986),x=e(1616072515);const F="survey";var W;(function(ce){ce.Good="good",ce.Bad="bad",ce.Dismiss="dismiss"})(W||(W={}));const Y="HUDDLES-SURVEY-TRACE",S=u(ce=>{let{teamId:j,callId:N,results:b}=ce;const R=j?(0,t.Ay)({label:Y,teamId:j}):(0,t.Wo)({label:Y});if(!j){R.warn("Missing team id. Exiting early");return}const K=(0,D.E)({teamOrEnterpriseId:j}),B=K.createTrace({traceName:M.Sq,tags:{__dataset:M.RN},samplingOptions:{sampleRate:1,sampleType:P.tS.SESSION}}),$=B.startSpan(F),Z={...b};(0,C.A)(Z,"comments");const{notOkResponses:re,summary:Te}=Z||{};if(!N){R.warn("Missing callId. Exiting early");return}if(!Te){R.warn("Missing summary. Exiting early");return}try{R.info(`Processing huddle survey response. callId: ${N} - traceId: ${B.getTraceId()} - results: ${JSON.stringify(Z)}`)}catch(fe){R.error(fe)}const Ce={teamId:j,callId:N,surveySummary:Te,surveyResponseCount:(re==null?void 0:re.length)||0,surveyResponses:re==null?void 0:re.join(" ")},Pe=(0,x.tT)({...Ce,...(0,k.vP)()});$.addTags(Pe),$.close(),R.info(`Reporting huddle survey trace with ${Object.keys(Pe).length} tags (${B.getTraceId()})`),R.debug("Tags attached",Pe),K.reportTrace(B),K.clearTrace(B)},"reportHuddleSurveyResultsTrace");var L=e(8847766420),w=e(980293773),J=e(7138682671),G=e(8472205500),X=e(735940183),te=e(8739505998),le=e(5363983309),ve=e(6968387112);const Q=new X.Ay("huddles");function Ae(ce){return(0,g.A)(ce,(j,N,b)=>(N&&j.push(b),j),[])}u(Ae,"collectResponses");const ae=u(ce=>{let{closeModal:j,callId:N}=ce;const b=(0,p.d4)(L.ZT),[R,K]=(0,I.useState)({}),[B,$]=(0,I.useState)(""),[Z,re]=(0,I.useState)(!1),Te=`https://${(0,ve.qF)()}`,Ce=(0,E.wA)(),Pe=[{value:v.NoAudioInput,text:Q.t("Others couldn\u2019t hear me")},{value:v.NoAudioOutput,text:Q.t("I couldn\u2019t hear others")},{value:v.DeviceSelectionError,text:Q.t("Slack selected the wrong microphone/speaker, or couldn\u2019t find my device")},{value:v.LowAudioQuality,text:Q.t("Audio was low quality (e.g., it lagged or sounded choppy/robotic)")},{value:v.LowVideoQuality,text:Q.t("Video was low quality (e.g., slow, not in sync with audio, or pixelated)")},{value:v.VideoNotWorking,text:Q.t("Video didn\u2019t work at all")},{value:v.Disconnected,text:Q.t("I got disconnected from the Huddle")},{value:v.SomethingElse,text:Q.t("Something else went wrong")}],fe=h.HuddleSurvey,pe=(0,I.useCallback)(()=>{re(!0);const Le={isOk:!1,notOkResponses:Ae(R),comments:B,callId:N,type:fe};Ce(T(Le)).then(()=>{b&&S({teamId:b,callId:N,results:{summary:W.Bad,...Le}}),re(!1),j==null||j()})},[N,R,j,b,B,Ce,fe]),q=(0,I.useCallback)(()=>{Ce(T({isOk:!1,notOkResponses:[v.Dismiss],callId:N,type:fe})),j==null||j()},[j,N,fe,Ce]),se=(0,I.useCallback)(Le=>$(Le),[]),Oe=!!R[v.SomethingElse];return I.createElement(w.dW,{closeModal:q,showCloseButton:!0,centered:!0,maxWidth:600},I.createElement(I.Fragment,null,I.createElement(w.rQ,null,I.createElement(w.Rc,{title:Q.t("What went wrong?")})),I.createElement(w.$m,null,I.createElement(w.qf,null,Pe.map(Le=>{let{value:We,text:Re}=Le;return I.createElement(J.A,{text:Re,key:We,id:We,type:"inline",cursor:"pointer",className:"p-huddle_survey_modal_checkbox"},I.createElement(O.A,{name:We,value:We,checked:!!R[We],onChange:we=>K(Je=>({...Je,[We]:we.target.checked}))}))}),Oe&&I.createElement(J.A,{className:"padding_top_75",text:Q.t("If you\u2019d like, please share any other details here:"),id:"details",optional:!0},I.createElement(G.A,{name:"details",id:"details",onChange:se,value:B})))),I.createElement(w.jl,null,I.createElement(te.A,{href:`${Te}/privacy-policy`,target:"_blank"},Q.t("Privacy Policy")),I.createElement(w.ox,null,I.createElement(f.$n,{onClick:q,type:"outline"},Q.t("Dismiss")),I.createElement(f.lV,{loading:Z,onClick:pe},Q.t("Send"))))))},"HuddleSurveyModal");ae.displayName="HuddleSurveyModal";const he=(0,le.A)(ae);var _e=e(5286203919);const ee=(0,n.Ay)("Close the mini survey after a postive response",(ce,j,N)=>{let{channelId:b}=N;(0,s.dispatchForClientStore)((0,o.Rh)({channelId:b,optimisticHuddleState:null,huddleState:r.RJ.NOT_STARTED}))});ee.meta={name:"createThunk",key:"createThunkcloseMiniSurvey",description:"Close the mini survey after a postive response"};const de=(0,n.Ay)("Set the date for when the user last saw the huddle survey",(ce,j,N)=>{let{timeSeen:b}=N;ce((0,a.AZ)({pref:"huddle_survey_last_seen",value:b}))});de.meta={name:"createThunk",key:"createThunksetHuddleLastSeenSurvey",description:"Set the date for when the user last saw the huddle survey"};const Ie=(0,n.Ay)("Record the result of the mini survey we first display the user after a huddle ends.",(ce,j,N)=>{let{result:b}=N;const R=(0,s.getStateForClientStore)(),K=(0,_e.E9)(R),B=(0,_e.hc)(R),$=(0,_e.l4)(R),Z=h.HuddleSurvey;let re=r.RJ.NOT_STARTED,Te;switch(b){case"bad":K&&ce(he({callId:K}));break;case"good":re=r.RJ.SURVEY_GOOD,ce(T({isOk:!0,callId:K,type:Z})),Te=W.Good;break;case"dismiss":Te=W.Dismiss,ce(T({isOk:!1,callId:K,notOkResponses:[v.Dismiss]}));break;default:}Te&&S({teamId:$,callId:K,results:{summary:Te}}),(0,s.dispatchForClientStore)((0,o.Rh)({channelId:B,optimisticHuddleState:null,huddleState:re})),(0,t.Ay)({getState:j}).info(c.o7,`Marking huddle as ${re} in component: huddle-survey`)});Ie.meta={name:"createThunk",key:"createThunkrecordMiniSurvey",description:"Record the result of the mini survey we first display the user after a huddle ends."}},6741408957:(z,A,e)=>{"use strict";e.d(A,{GD:()=>v,Ss:()=>T,iz:()=>p});var t=e(3398586081),n=e(1289024643),s=e(4540171876),a=e(6422693406),c=e(3037015781),o=e(8352634987),r=e(1031947056),l=e(6533394955),_=e(9640070512),d=e(2527782504),i=e(5286203919),m=e(5881236351);const h=u((E,f)=>(0,l.dispatchForTeamId)(E,(0,s.Db)({callIds:f,reason:"all-calls-store/conditional-fetch"})).then(O=>O.map(C=>(0,l.dispatchForTeamId)(E,(0,n.oU)(C)))),"fetchAndUpsert"),v=(0,t.A)(()=>new o.Ay({storeKey:"allCalls",fetch:h,isEnabled:()=>!0})),y=u((E,f)=>{const O=f.map(C=>((0,l.dispatchForTeamId)(E,(0,n.oU)(C)),C.id));v().markObjectsAsFresh(E,O)},"upsertCalls"),T=(0,t.A)(()=>new c.Ay({fetch:(E,f)=>(0,l.dispatchForTeamId)(E,(0,s.Db)({callIds:f,reason:"all-calls-store/unknown-fetch"})),upsertKnown:y,upsertNonExistent:(E,f)=>y(E,f.map(O=>{let{id:C}=O;return{id:C,name:""}}))}));let I=0;const p=(0,r.Ay)("Set a huddle topic",(E,f,O)=>{let{channelId:C,topic:M}=O;const D=(0,l.getStateForClientStore)();if((0,i.aS)(D))return E((0,m.Jc)(M)),a.S.resolve();const P=(0,i.E9)(D);if(!P)return a.S.reject(new Error(`No callId for channel ${C}`));E((0,m.Jc)(M)),I+=1;const k=I;return E((0,s.xB)({roomId:P,name:M})).then(()=>E((0,n.oU)({id:P,name:M}))).finally(()=>{k===I&&E((0,m.Jc)(null)),E((0,_.H)({focusKey:d.Ay.HUDDLE_SIDEBAR_TOPIC,forceFocus:!0}))})});p.meta={name:"createThunk",key:"createThunksetHuddleTopic",description:"Set a huddle topic"};const g={fetchAndUpsert:h}},666760496:(z,A,e)=>{"use strict";e.d(A,{A:()=>v});var t=e(9706240641),n=e.n(t),s=e(4540171876),a=e(6422693406),c=e(1031947056),o=e(387328355),r=e(6533394955),l=e(9548972574),_=e(7723800688),d=e(6244014364),i=e(56548687),m=e(6470070112);const h=(0,c.Ay)("Notify members to join huddle",function(){var y=(0,t.coroutine)(function*(T,I,p){let{channelId:g,userIds:E}=p;const f=[];if(E&&E.length>0){E.forEach(x=>{T((0,o.oN)({userId:x})),f.push(new a.S((F,W)=>{T((0,s.OB)({userId:x,channelId:g,reason:"huddle-notify-member"})).then(F).catch(Y=>{const S=new Error(Y.message);S.invitedMemberId=x,S.inviteRejectionReason=Y.name,W(S)})}))});const O=(0,r.getStateForClientStore)(),C=I(),M=(0,l.Yw)(C,g),D=(0,m.$t)(C,{huddleId:M==null?void 0:M.id}),P=(0,m.kn)(O),k=(0,m.UE)(O);(0,i.e)({state:C}).track(d.EventId.CANVAS_EVENT,{contexts:{ui_context:{ui_properties:{element_name:_.Hi.INVITATION_SENT},action:d.UiAction.INVITE_PEOPLE},calls:k},invited_user_ids:E,...D,...P})}return a.S.all(f).then(O=>O)});return function(T,I,p){return y.apply(this,arguments)}}());h.meta={name:"createThunk",key:"createThunkinviteMembers",description:"Notify members to join huddle"};const v=h},1070786785:(z,A,e)=>{"use strict";e.d(A,{Ay:()=>l,V3:()=>o,kb:()=>r});var t=e(1031947056),n=e(6533394955),s=e(6134475965),a=e(5286203919);const c=(0,t.Ay)("End huddle for channelId if any",(_,d,i)=>{const m=(0,n.getStateForClientStore)(),h=(0,a.hc)(m);h&&h===i&&_((0,s.A)())});c.meta={name:"createThunk",key:"createThunkmaybeEndHuddle",description:"End huddle for channelId if any"};const o=(0,t.Ay)("End last active huddle for channelId if any",(_,d,i)=>{var m;const h=(0,n.getStateForClientStore)(),v=(m=(0,a.Qn)(h))===null||m===void 0?void 0:m.channelId,y=(0,a.Ak)(h);(v&&v===i||y===null&&v&&v!==i)&&_((0,s.A)())});o.meta={name:"createThunk",key:"createThunkmaybeEndLastActiveHuddleByChannelId",description:"End last active huddle for channelId if any"};const r=(0,t.Ay)("End huddle for call Id and channelId if any",(_,d,i)=>{let{channelId:m,callId:h}=i;const v=(0,n.getStateForClientStore)(),{channelId:y,callId:T}=(0,a.Qn)(v)||{};y&&y===m&&T===h&&_((0,s.A)())});r.meta={name:"createThunk",key:"createThunkmaybeEndHuddleByChannelAndCallId",description:"End huddle for call Id and channelId if any"};const l=c},9864164947:(z,A,e)=>{"use strict";e.d(A,{Gt:()=>W,Ho:()=>P,LW:()=>D,Md:()=>O,Ux:()=>x,dr:()=>T,fH:()=>C,gA:()=>M,gV:()=>S,qc:()=>k,rV:()=>F,s5:()=>Y});var t=e(6998663753),n=e(5950652755),s=e(1031947056),a=e(2778217221),c=e(796111729),o=e(8664881451),r=e(2854284421),l=e(2047021170),_=e(3986753718),d=e(7022928841),i=e(5332875232),m=e(2791814261),h=e(5387083734);const v=(0,c.Wo)({label:"HUDDLE-SOUNDS"}),y=[r.o8,r.CZ,r.Ji,r.PV,r.wg,r.sQ,r.o3,r.nP,r.zd,r.qP],T=(0,t.A)(()=>{(0,h.IE)("pre-cache-huddles-sounds",()=>{y.forEach(L=>{v.info(`Adding huddle sound effect to in-memory cache: ${L}`),(0,o.qG)(L)})},{delay:1e3})}),I=(0,n.A)(function(){let L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return(0,o.ZH)(L?r.Ji:r.o8,{loop:!1})},7e3,{leading:!0,trailing:!1}),p=(0,n.A)(function(){let L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return(0,o.ZH)(L?r.PV:r.CZ,{loop:!1})},7e3,{leading:!0,trailing:!1}),g=(0,n.A)(function(){let L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return(0,o.ZH)(L?r.DT:r.o,{loop:!1})},0,{leading:!0,trailing:!1}),E=(0,n.A)((L,w,J)=>{let G=w?r.sQ:r.wg;const X=.25,te=(0,m.L)(J),le=(0,i.DR)(J);w&&L==="gong"&&le&&te&&(G=r.o3);const ve=(0,i.Ey)(J);w&&L==="duck"&&ve&&te&&(G=r.nP),(0,o.ZH)(G,{loop:!1,volume:X})},5e3,{leading:!0,trailing:!1}),f=u(L=>!(0,l.ty)(L,"mute_huddle_sounds"),"canPlayHuddleSound"),O=(0,s.Ay)("Play sound when user joins",(L,w)=>{f(w())&&((0,c.Ay)({getState:w}).info(a.o7,"playSoundOnUserJoin"),I(!1))});O.meta={name:"createThunk",key:"createThunkplaySoundOnUserJoin",description:"Play sound when user joins"};const C=(0,s.Ay)("Play sound when user leaves",(L,w)=>{f(w())&&((0,c.Ay)({getState:w}).info(a.o7,"playSoundOnUserLeft"),p(!1))});C.meta={name:"createThunk",key:"createThunkplaySoundOnUserLeft",description:"Play sound when user leaves"};const M=(0,s.Ay)("Play sound when you join",(L,w)=>{f(w())&&((0,c.Ay)({getState:w}).info(a.o7,"playSoundOnYouJoin"),I(!0))});M.meta={name:"createThunk",key:"createThunkplaySoundOnYouJoin",description:"Play sound when you join"};const D=(0,s.Ay)("Play sound when you leave",(L,w)=>{f(w())&&((0,c.Ay)({getState:w}).info(a.o7,"playSoundOnYouLeft"),p(!0))});D.meta={name:"createThunk",key:"createThunkplaySoundOnYouLeft",description:"Play sound when you leave"};const P=(0,s.Ay)("Play sound when user mutes the mic using keyboard shortcut",(L,w)=>{f(w())&&((0,c.Ay)({getState:w}).info(a.o7,"playSoundOnMicMute"),g(!0))});P.meta={name:"createThunk",key:"createThunkplaySoundOnMicMute",description:"Play sound when user mutes the mic using keyboard shortcut"};const k=(0,s.Ay)("Play sound when user unmutes the mic using keyboard shortcut",(L,w)=>{f(w())&&((0,c.Ay)({getState:w}).info(a.o7,"playSoundOnMicUnmute"),g(!1))});k.meta={name:"createThunk",key:"createThunkplaySoundOnMicUnmute",description:"Play sound when user unmutes the mic using keyboard shortcut"};const x=(0,s.Ay)("Play sound when reaction is received",(L,w,J)=>{let{emoji:G,isEffect:X}=J;const te=w();(0,l.ty)(te,"huddles_reactions_play_sound")&&f(te)?((0,c.Ay)({getState:w}).info(a.o7,"playSoundOnReaction"),E(G,X,te)):(0,c.Ay)({getState:w}).info(a.o7,"did not playSoundOnReaction")});x.meta={name:"createThunk",key:"createThunkplaySoundOnReaction",description:"Play sound when reaction is received"};const F=(0,s.Ay)("Plays the huddle invite sound",(L,w)=>{const J=w();(0,_.YX)(J)||!f(J)||(0,o.ZH)((0,d.qF)(J))});F.meta={name:"createThunk",key:"createThunkplayHuddleInviteSound",description:"Plays the huddle invite sound"};const W=(0,s.Ay)("Plays the huddle new requester sound",(L,w)=>{f(w())&&((0,c.Ay)({getState:w}).info(a.o7,"playHuddleNewRequesterSound"),(0,o.ZH)(r.rT,{loop:!1}))});W.meta={name:"createThunk",key:"createThunkplayHuddleNewRequesterSound",description:"Plays the huddle new requester sound"};const Y=(0,s.Ay)("Plays the huddle request accepted sound",(L,w)=>{f(w())&&((0,c.Ay)({getState:w}).info(a.o7,"playHuddleNewRequestAcceptedSound"),(0,o.ZH)(r.rT,{loop:!1}))});Y.meta={name:"createThunk",key:"createThunkplayHuddleNewRequestAcceptedSound",description:"Plays the huddle request accepted sound"};const S=(0,s.Ay)("Plays the huddle request expired sound",(L,w)=>{f(w())&&((0,c.Ay)({getState:w}).info(a.o7,"playHuddleNewRequestExpiredSound"),(0,o.ZH)(r.xE,{loop:!1}))});S.meta={name:"createThunk",key:"createThunkplayHuddleNewRequestExpiredSound",description:"Plays the huddle request expired sound"}},4156857608:(z,A,e)=>{"use strict";e.d(A,{a:()=>m});var t=e(1031947056),n=e(6533394955),s=e(4250409994),a=e(7434063642),c=e(8783285437),o=e(6758774099),r=e(1990810649),l=e(387328355),_=e(8872167513),d=e(2709531527),i=e(5795074931);const m=(0,t.Ay)("Dispatch a reaction to the middleware and the current store to notify user has sent a reaction",(h,v,y)=>{let{emoji:T,reactionType:I=r.o.Standard}=y;if(I===r.o.Sticker)h((0,a.Kp)({emoji:T})),(0,n.dispatchForClientStore)((0,s.M4)(T));else{(0,n.dispatchForClientStore)((0,s.nU)({emoji:T,reactionType:I})),h((0,l._x)({peerId:"self",emoji:T,isEmoji:!0,reactionType:I}));const{huddleEventsTrace:g}=(0,_.A)().getAllTraceHandlers();g==null||g.update({name:d.p.REACTION,type:d.G.ONCE,tags:{reactionType:I}})}const p=(0,i.WR)(v());p&&h((0,o.U$)({type:c.v.SEND_REACTION,memberId:p,timestampMs:Date.now(),emoji:T}))});m.meta={name:"createThunk",key:"createThunksendReaction",description:"Dispatch a reaction to the middleware and the current store to notify user has sent a reaction"}},1049642794:(z,A,e)=>{"use strict";e.d(A,{A:()=>f});var t=e(9706240641),n=e.n(t),s=e(8571983633),a=e(1031947056),c=e(6533394955),o=e(8847766420),r=e(2778217221),l=e(4250409994),_=e(6694086724),d=e(5286203919),i=e(571104883),m=e(796111729),h=e(462591818),v=e(7434063642),y=e(6251210828),T=e(387328355),I=e(9365970888),p=e(3065433701),g=e(700984029);const E=(0,a.Ay)("Enable or disable local microphone",function(){var O=(0,t.coroutine)(function*(C,M,D){const P=(0,c.getStateForClientStore)(),k=M(),x=(0,m.Ay)({state:k}),F=(0,I.Hc)(k);if((0,y.RT)(k)||C((0,v.G4)({canShowMutedBanner:!0})),(0,i.y3)()||(yield(0,c.dispatchForClientStore)((0,g.e$)({mediaResourceType:h.mT.MICROPHONE}))),x.info(r.o7,`Set microphone to ${D}`),F&&D){x.warn(r.o7,"Microphone could not be set to enabled as access to the device was blocked"),(0,i.y3)()?C((0,p.CE)({alert:p.vT.NoSystemAudio})):C((0,p.CE)({alert:p.vT.NoBrowserAudioPermission}));return}const{teamId:Y}=(0,d.Qn)(P)||{};if(Y&&Y!==(0,o.ZT)(k)){(0,c.dispatchForTeamId)(Y,E(D));return}(0,s.A)(D)||((0,c.dispatchForClientStore)((0,l.I9)(D)),D&&(0,d.wQ)(P)&&C((0,_.e)({clearOnEndedCallback:!0,logContext:"huddle-set-self-microphone"}))),C((0,T.kT)({id:"self",isMicrophoneEnabled:D}))});return function(C,M,D){return O.apply(this,arguments)}}());E.meta={name:"createThunk",key:"createThunksetSelfMicrophone",description:"Enable or disable local microphone"};const f=E},8746998952:(z,A,e)=>{"use strict";e.d(A,{A:()=>f});var t=e(1031947056),n=e(6422693406),s=e(796111729),a=e(9190452268),c=e(1452921056),o=e(5319025363),r=e(6533394955),l=e(6470070112),_=e(5286203919),d=e(5933621899),i=e(9680914051),m=e(8330768070),h=e(6259241484),v=e(716227588),y=e(1655938719),T=e(5332875232),I=e(5881236351),p=e(9712681361);const g=(0,t.Ay)("Join/start huddle, but confirm with shouty rooster modal first",(O,C,M)=>{let{channelId:D,threadTs:P,muted:k,callId:x,forceFocus:F,entryPoint:W,forceConfirmation:Y,markTelemeter:S,isMultiDevice:L,isStandaloneHuddle:w}=M;const J=u(()=>{var G;S&&(0,a.Cy)({state:C()}).mark(i.qr),(G=O((0,c.A)({channelId:D,threadTs:P,muted:k,callId:x,forceFocus:F,entryPoint:W,isMultiDevice:L,isStandaloneHuddle:w})))===null||G===void 0||G.catch(X=>{(0,s.Ay)({getState:C}).error("Could not start huddle",X)})},"onConfirm");if((0,l.Qj)(C(),D,P)||Y){P?O((0,y.iR)({event:{type:h.jo.HUDDLE_STARTED_FROM_THREAD}})).then(()=>{(0,v.Hp)(C(),h.xu.LAUNCH_MODAL)===h.ze.HUDDLE_FROM_THREAD_EDUCATIONAL_MODAL?O((0,d.Wx)({channelId:D??"",onConfirm:J})):J()}):O((0,m.Oe)({channelId:D??"",onConfirm:J}));return}J()});g.meta={name:"createThunk",key:"createThunkstartHuddleWithShoutyRooster",description:"Join/start huddle, but confirm with shouty rooster modal first"};const E=(0,t.Ay)("Join/start huddle, but confirm if already in another huddle",(O,C,M)=>{const{channelId:D}=M,P=C(),k=(0,T.pL)(P),x=(0,r.getStateForClientStore)(),F=(0,_.hc)(x),W=(0,_.EG)(x),Y=(0,_.$V)(x),S=(0,l.r5)(P,{channelId:D});if(O((0,o.z)()),F&&D!==F&&!Y)return O((0,m.Y6)({prevChannelId:F,nextChannelId:D??"",onConfirm:()=>{O(g({...M,markTelemeter:!1}))}}));if(k&&S){O((0,I.$Z)({channelId:D??"",onConfirm:L=>{let{isMultiDevice:w}=L;return O(g({...M,markTelemeter:!1,isMultiDevice:w}))}}));return}return F&&D===F&&W===p.RJ.STARTED?n.S.resolve():O(g({...M,markTelemeter:!0}))});E.meta={name:"createThunk",key:"createThunkstartHuddleWithConfirmation",description:"Join/start huddle, but confirm if already in another huddle"};const f=E},1452921056:(z,A,e)=>{"use strict";e.d(A,{A:()=>ce});var t=e(9706240641),n=e(92886754);let s=null;const a=u(()=>s,"getOpenChannelId"),c=u(j=>{s=j},"setOpenChannelId");var o=e(3134334389),r=e(9418991940),l=e(3051824855),_=e(825587348),d=e(8739505998),i=e(4481313819),m=e(6244014364),h=e(6968387112),v=e(735940183),y=e(3078708518),T=e(4761125736);const I=new v.Ay("huddles");function p(j){let{closeModal:N}=j;const b=(0,r.d4)(y.A),R=(0,r.d4)($=>(0,T._Z)($,"adoption_instant_slack"))==="treatment";let K,B;if((0,n.yh)())K=I.t("Your browser does not support Huddles"),B=b&&R?I.rt("Unfortunately, Huddles aren\u2019t available in this browser. We recommend switching to <chrome-link>Chrome</chrome-link>.",{},$=>{let{text:Z}=$;return o.createElement(d.A,{href:"https://www.google.com/chrome"},Z)}):I.rt("Unfortunately, Huddles aren\u2019t available in this browser. We recommend downloading the <desktop-link>Slack desktop app</desktop-link>, or you can switch to <chrome-link>Chrome</chrome-link>.",{},$=>{let{tag:Z,text:re}=$;switch(Z){case"desktop-link":return o.createElement(d.A,{href:`https://${(0,h.qF)()}/downloads`},re);case"chrome-link":return o.createElement(d.A,{href:"https://www.google.com/chrome"},re);default:return null}});else if((0,n.WT)())K=I.t("Please update Slack"),B=I.t("Unfortunately, this version of Slack is out of date. Update your Slack app for access to Huddles \u2014 as well as bug fixes and an all-around smoother experience.");else return null;return o.createElement(i.A,{eventId:m.EventId.HUDDLES_ALERT_SHOWN,uiComponentName:m.UiComponentName.HUDDLES_UNSUPPORTED_ALERRT,clogImpression:!0},o.createElement(_.A,{onClose:N,onSubmit:N,showCancelButton:!1,showSubmitButton:!0,title:K,submitButtonText:I.t("OK")},B))}u(p,"HuddleUnsupportedAlert"),p.displayName="HuddleUnsupportedAlert";const g=(0,l.e)(p);var E=e(6422693406),f=e(1031947056),O=e(5881236351),C=e(5378147939),M=e(6758774099),D=e(8847766420),P=e(1289024643),k=e(7304871158);const x=(0,f.Ay)("End active call",(j,N)=>{const b=(0,P.J2)(N());if(b){const R=(0,P.Ms)(b);R&&!R.isClosed()&&(0,k.R)(R,"endActiveCall")}});x.meta={name:"createThunk",key:"createThunkmaybeEndActiveCall",description:"End active call"};var F=e(9640070512),W=e(2527782504),Y=e(2832209848),S=e(7843142872),L=e(6533394955),w=e(9548972574),J=e(8935621861),G=e(5332875232),X=e(5795074931),te=e(2791814261),le=e(5286203919),ve=e(9712681361),Q=e(7723800688),Ae=e(56548687),ae=e(6470070112),he=e(5470425448),_e=e(5071086688),ee=e(4250409994),de=e(8872167513);const Ie=(0,f.Ay)("Start huddle",function(){var j=(0,t.coroutine)(function*(N,b,R){let{channelId:K,threadTs:B,muted:$,callId:Z,forceFocus:re,entryPoint:Te=ve.su.UNKNOWN,isMultiDevice:Ce,isStandaloneHuddle:Pe}=R;(0,L.dispatchForClientStore)((0,ee.t2)(!1));const fe=b();if(N(x()),N((0,M.Lm)(!1)),N((0,M.T3)()),(0,n.WT)()||(0,n.yh)())return N(g()),E.S.resolve();N((0,S.g6)({experimentHuddlesDiscoveryCallsGroupTreatment:(0,G.Ms)(fe),interactionType:Y.X8.Click})),a()!==K&&N((0,O.Es)({channelId:K??"",open:!1}));const pe=(0,te.L)(fe),q=(0,D.ZT)(fe);(0,de.A)().initializeTraces({teamId:q,isTinySpeck:pe});const se=!!(0,le.gj)((0,L.getStateForClientStore)()),ge=yield J.A.getInstance().getNearestChimeMediaRegion(q),{ttiTrace:Oe,huddleEventsTrace:Le}=(0,de.A)().getAllTraceHandlers();Oe.addTTIMetaTags({entryPoint:Te,preferredMediaRegion:ge,isPrejoin:se,isCreate:!(0,w.Yw)(fe,K)}),Le==null||Le.recordEntryPoint(Te),_e.A.publish({type:he.lx.PreferredMediaRegion,update:{mediaRegionPreferred:ge}});const We=(0,C.A)(),Re=(0,G.Q3)(fe),we=(0,X.WR)(fe);return We.start(q,K??"",$,Z,B,Re,Ce,Pe).then((0,t.coroutine)(function*(){const Je=(0,L.getStateForClientStore)(),it=(0,ae.$t)(fe,{huddleId:Z}),et=(0,ae.kn)(Je),lt=(0,ae.UE)(Je);(0,Ae.e)({state:fe}).track(m.EventId.CANVAS_EVENT,{contexts:{ui_context:{entry_point:Te,ui_properties:{element_name:Q.Hi.CANVAS_JOIN},action:m.UiAction.TOGGLE},calls:lt},...it,...et}),N((0,F.H)({focusKey:W.Ay.HUDDLE_SIDEBAR_FOOTER,forceFocus:re})),N((0,O.xb)(!1)),Z&&N((0,P.r_)({callId:Z,userId:we}))}))});return function(N,b,R){return j.apply(this,arguments)}}());Ie.meta={name:"createThunk",key:"createThunkstartHuddle",description:"Start huddle"};const ce=Ie},5319025363:(z,A,e)=>{"use strict";e.d(A,{z:()=>a});var t=e(1031947056),n=e(7022928841),s=e(8664881451);const a=(0,t.Ay)("Stop the huddle invite sound",(c,o)=>{(0,s.ds)((0,n.qF)(o()),{logFailure:!1})});a.meta={name:"createThunk",key:"createThunkstopHuddleInviteSound",description:"Stop the huddle invite sound"}},6694086724:(z,A,e)=>{"use strict";e.d(A,{e:()=>d});var t=e(1031947056),n=e(796111729),s=e(4869203191),a=e(4250409994),c=e(6533394955),o=e(5332875232),r=e(5286203919),l=e(7434063642),_=e(6251210828);const d=(0,t.Ay)("Stops huddle lounge music from playing",(i,m,h)=>{let{clearOnEndedCallback:v,logContext:y,isStoppedByUser:T}=h;const I=m(),p=(0,n.Ay)({state:I}),g=(0,o.Q3)(I),E=(0,o.CI)(I),f=(0,_.jr)(I),O=(0,_.K8)(I),C=(0,c.getStateForClientStore)(),M=(0,r.E9)(C);s.Ay.getInstance({experimentHuddlesLoungeMusicPlayerGroupOn:g}).stopMusic({clearOnEndedCallback:v,logger:p,logContext:y}),(0,c.dispatchForClientStore)((0,a.Ag)(!1)),T&&M&&i((0,l.sH)({huddleId:M,hasUserStoppedLoungeMusic:T})),E&&(T||O)&&f&&i((0,l.ju)({stopMusic:!0}))});d.meta={name:"createThunk",key:"createThunkstopHuddleLoungeMusic",description:"Stops huddle lounge music from playing"}},6134475965:(z,A,e)=>{"use strict";e.d(A,{A:()=>d});var t=e(1031947056),n=e(5378147939),s=e(6533394955),a=e(6694086724),c=e(6855917924),o=e(5332875232),r=e(4250409994),l=e(7366481123);const _=(0,t.Ay)("Stop the active huddle",(i,m)=>{const h=m(),v=(0,o.lV)(h);return(0,s.dispatchForClientStore)((0,r.yi)({})),i((0,c.A)()),i((0,a.e)({clearOnEndedCallback:!0,logContext:"stop-huddle-thunk"})),v&&(0,s.dispatchForClientStore)((0,r.JM)()),i((0,l.LL)(l.vT.HiddenUserJoinedHuddle)),(0,n.A)().stop()});_.meta={name:"createThunk",key:"createThunkstopHuddle",description:"Stop the active huddle"};const d=_},6310192986:(z,A,e)=>{"use strict";e.d(A,{Ay:()=>R,vP:()=>j});var t=e(6313685253),n=e(9137897911),s=e(3398586081),a=e(716022512),c=e(6696292586),o=e(9804928153),r=e(9548972574),l=e(8233775522),_=e(6470070112),d=e(3245843483),i=e(5286203919),m=e(4988306802),h=e(9012396182),v=e(9101533895),y=e(6533394955),T=e(2767624118),I=e(6664301844),p=e(7429662208),g=e(387328355),E=e(1990810649),f=e(9365970888),O=e(6117529990),C=e(8736071954),M=e(610288365),D=e(5332875232),P=e(6251210828),k=e(2465464861),x=e(571104883),F=e(9195837907),W=e(1473609332),Y=e(3193155968),S=e(6839188756);function L(K){return K?(0,S.tc)(K)?"free":(0,S.r7)(K)?"enterprise":"pro":"unknown"}u(L,"getTeamTier");var w=e(3677514771),J=e(4724591729),G=e(7645722292),X=e(4761125736),te=e(8634352961),le=e(415910655),ve=e(5795074931),Q=e(7366481123);const Ae=navigator.hardwareConcurrency,ae=navigator.platform,he=(0,x.zS)(),_e=(0,J.b3)(),ee=(0,J.$i)(),de=u(K=>(0,t.A)(K,(B,$,Z)=>{if(Z===Y.N2)return B;const re=Z.split(/-|_/).slice(0,-1).join("-"),Te=(0,n.A)(`windows-${re}-count`);return B[Te]?B[Te]+=1:B[Te]=1,B},{}),"countWindowsByType"),Ie=u(K=>{if(!K)return"";let B=K;const $=/Default -/g;B=K.replace($,"");const Z=/ *?\([^)]*?\) *?/g;return B=B.replace(Z,""),B=B.trim(),B},"scrubDeviceLabelForReporting");let ce;const j=u(()=>ce,"getMostRecentStableTags"),N=(0,s.A)((K,B)=>{let{teamState:$,clientState:Z}=K;var re,Te,Ce,Pe,fe,pe,q;const se=(0,i.E9)(Z),ge=(0,i.hc)(Z),Oe=(0,O.OV)($),Le=(0,D.MJ)($),We=(0,D.nC)($),Re=(0,D.ZI)($),we=(0,D.DP)($),Je=(0,D.JQ)($),it=(0,X._Z)($,"huddles_h264_baseline",!1),et=(0,X._Z)($,"huddles_h264_baseline_screenshare",!1),lt=(0,D.Cu)($),nt=I.zF.sdkVersion,at=(0,_.R8)($),ze=(0,D.Qq)($),Ke=(0,i.sQ)(Z),He=(0,D.kf)($),Ye=(0,X._Z)($,"huddles_filter_worker",!1),_t=(0,i.l4)(Z),vt=(0,w.H7)($),Tt=L(vt);var Lt;const ft=(Lt=(re=(0,h.getBootedWorkspaces)(Z))===null||re===void 0?void 0:re.length)!==null&&Lt!==void 0?Lt:0,mt=(0,W.Bh)(),Yt=(mt==null||(Te=mt.deviceIdPriorities)===null||Te===void 0||(Ce=Te.camera)===null||Ce===void 0?void 0:Ce.length)||0,nn=(mt==null||(Pe=mt.deviceIdPriorities)===null||Pe===void 0||(fe=Pe.microphone)===null||fe===void 0?void 0:fe.length)||0,jt=(mt==null||(pe=mt.deviceIdPriorities)===null||pe===void 0||(q=pe.output)===null||q===void 0?void 0:q.length)||0,gn=(0,v.D5)($),on=(gn==null?void 0:gn.length)||0,Xt=(0,le.s2)()||{},rn=(0,x.pr)(),Zt={teamId:_t,huddleId:se,huddleChannelId:ge,workspaceCount:ft,chimeSdkVersion:nt,teamTier:Tt,isPreWarmed:ze,isPrejoin:Ke,isHuddlesIncreaseMaxParticipantsEnabled:We,isTranscriptAllowed:at,isChimeSdkExpEnabled:Oe,isRtmThrottlingDisabled:He,isHuddlesLaterEnabled:Le,disableAudioRedundancyGroup:Je,h264BaselineGroup:it,h264BaselineScreenshareGroup:et,isDevicesExpEnabled:Re,isRtmFilteringEnabled:we,osPlatform:ae,osVersion:he,devicePriorityListCameraCount:Yt,devicePriorityListMicrophoneCount:nn,devicePriorityListSpeakerCount:jt,envIsJsPath:_e,envIsQa:ee,xwsChannelCount:on,isAv1ScreenshareEnabled:lt,filterWorkerGroup:Ye,isCitrixBrowser:rn,...Xt};return ce=Zt,Zt},(K,B)=>B),R=u(K=>{let{state:B,appMetrics:$}=K;var Z,re,Te,Ce,Pe,fe,pe,q;const se=(0,y.getClientStoreInstance)().getState(),ge=(0,i.cN)(se),Oe=(0,i.E9)(se),Le=`${ge}${Oe??""}`,We=N({teamState:B,clientState:se},Le),{huddleId:Re,huddleChannelId:we,workspaceCount:Je,isRtmFilteringEnabled:it,isRtmThrottlingDisabled:et}=We,lt={},nt=(0,p.e6)(B),at=nt?(0,p.Le)(B,{tab:nt}):{},{primary:ze,secondary:Ke,sidebar:He}=at||{};Object.assign(lt,{viewPrimary:ze==null?void 0:ze.viewType,viewSecondary:Ke==null?void 0:Ke.viewType,viewSidebar:He==null?void 0:He.viewType,viewTab:nt});const Ye=(0,f.Hc)(B),_t=(0,f.AZ)(B),vt=(0,f.IO)(B),Tt=(0,f.JM)(B),Lt=(0,f.SR)(B),ft=(0,f.f3)(B),mt=(0,f.aA)(B),Yt={microphoneIsBlocked:Ye,microphoneIsAvailable:_t,cameraIsBlocked:Lt,cameraIsAvailable:ft,isMicrophoneBluetooth:vt,isSpeakerBluetooth:Tt,isMicrophoneAndSpeakerOnSameDevice:mt},nn=(0,l.fq)(B),jt={};if(nn){const ot=Object.keys(nn);Object.assign(jt,{windowsTotalOpen:ot.length,windowsOpenTypes:ot.length?ot.join(" "):"",windowsTypeWithFocus:(0,a.A)(nn,gt=>!!gt.isFocused),...de(nn)})}const gn=(0,_.Fm)(B),on=gn&&gn.type===Q.vT.AudioOnlyModeRecommended,Xt=(0,k._R)(B),rn=Xt!==null,Zt={isTroubleshootingPanelOpen:rn,isAudioOnlyModeEnabled:(0,i.Rv)(se),troubleshootingPanelTab:rn?(0,k.Eh)(B):null,troubleshootingPillPage:(0,k.Wg)(B),troubleshootingEntryPointWas:(0,k.qV)(B),troubleshootingSessionId:rn?`${(0,ve.WR)(B)}${Re}:${(0,k.$i)(B)}`:null,troubleshootingBannerInView:on,troubleshootingSource:Xt},Ht=(0,r.UK)(B),Bt=(Z=(0,f.ql)(B,C.lW.Camera))===null||Z===void 0?void 0:Z.label,Qt=(re=(0,f.ql)(B,C.lW.Microphone))===null||re===void 0?void 0:re.label,sn=(Te=(0,f.ql)(B,C.Q4))===null||Te===void 0?void 0:Te.label,{isScreenshareEnabled:Mn,isHostDrawEnabled:ct,isHostDrawRendererActive:yt,isCameraEnabled:Rt,isMicrophoneEnabled:xe,isConnected:Nt}=(0,g.Ng)(B),Ft=!!Mn,qt=!!Rt,un=(0,g.fU)(B,{id:"self"}),tt=(0,g.MY)(B),pt=tt==="self",Dt=Ht.filter(ot=>ot.isCameraEnabled).length,Wt=(0,T.H)(we),zt=(0,W.Bh)(),ln=qt&&(zt==null||(Ce=zt.video)===null||Ce===void 0?void 0:Ce.effect)===F.t.Blur,Tn=!!(!(zt==null||(Pe=zt.audio)===null||Pe===void 0)&&Pe.enableNoiseSuppression),cn=Tn&&pt,hn=qt&&(zt==null||(fe=zt.video)===null||fe===void 0?void 0:fe.effect)===F.t.Background&&(zt==null||(pe=zt.video)===null||pe===void 0?void 0:pe.effectBgKey)!==void 0,Cn=!!tt,_n=!!Dt,Wn=(0,g.nD)(B).length,kn=!!Wn,Pn=Wn+(Ft?1:0),$t=Pn===2,$n=kn||Ft,De=(0,k.gA)(B),Ne=(0,m.VN)(B),Me=(0,m.M3)(B),Be=Cn?(q=Ht.find(ot=>ot.id===tt))===null||q===void 0?void 0:q.userId:void 0,ue=o.J.document.visibilityState==="visible",ke={isBackgroundBlurActive:ln,isNoiseSuppressionEnabled:Tn,isNoiseSuppressionActive:cn,isCustomVideoBackgroundActive:hn,isClosedCaptionsEnabled:Ne,isSideBySideCaptionsEnabled:Me},Xe=et?void 0:(0,G.V_)(),dt=et?void 0:(0,G.nu)(),bt=it?(0,te.zT)():void 0,be=it?(0,te.kB)():void 0,U=(0,te.oB)(),V={callId:Oe,isMicrophoneEnabled:xe,isActiveSpeaker:pt,isSomeoneSpeaking:Cn,isSomeoneSharingScreen:$n,isVideoEnabledForSomeone:De,isSharingScreen:Ft,isHostDrawEnabled:ct,isHostDrawActive:yt,isSelfVideoEnabled:qt,isPeerVideoEnabled:_n,isHuddleWindowVisible:Wt,selectedCamera:Ie(Bt),selectedMicrophone:Ie(Qt),selectedSpeakers:Ie(sn),activeSpeakerUserId:Be,isPeerSharingScreen:kn,isDualScreenshareActive:$t,cpuCount:Ae,remotePeerCount:Ht.length,remotePeersWithVideoCount:Dt,peersScreensharingCount:Wn,activeScreenshareCount:Pn,workspaceCount:Je,huddleStartTimestamp:ge,isDisconnected:Nt===!1,isMainWindowVisible:ue,rtmTaskQueueLength:dt,rtmProcessingDelay:Xe,rtmPercentSkipped:bt,rtmTopAllowedTypes:be,rtmRatePerSecond:U};let ne={};if($){const{cpu:ot,memory:gt,gpu:wt,thermalState:Dn,speedLimit:Nn}=$,Sn=(0,c.A)(ot)?Math.round(ot*Ae):void 0,Bn=(0,c.A)(wt)?Math.round(wt*Ae):void 0,{useHwAcceleration:pn}=(0,d.oQe)("settings")||{};ne={cpuUseRelative:ot?Math.round(ot):void 0,cpuUse:Sn,gpuUse:Bn,memoryUse:(gt==null?void 0:gt.workingSetSize)||void 0,isHardwareAccelerationEnabled:pn,osThermalState:Dn,osSpeedLimit:Nn,osIsThrottlingCpu:Nn&&Nn!==0?Nn<30:void 0}}let ie={huddleViewMode:(0,P.HH)(B,{huddleId:Re})};if(Wt){var Ue;const ot=(0,P.Ec)(B,{huddleId:Re}),gt=(0,P.SC)(B,{huddleId:Re,surface:ot});ie={...ie,huddleWindowSurface:ot,huddleWindowFocusedContentType:(un==null||(Ue=un.item)===null||Ue===void 0?void 0:Ue.type)||E.cM.None,huddleWindowIsFullscreen:(0,P.g0)(B),huddleWindowIsSelfDrawingEnabled:(0,P.ny)(B),huddleWindowWindowHeight:gt==null?void 0:gt.height,huddleWindowWindowWidth:gt==null?void 0:gt.width}}const Qe=(0,M.Ay)(),je={batteryIsUsing:Qe.isUsingBatteryPower(),batteryPercentRemaining:Qe.getLevel()};return{...V,...ke,...ne,...ie,...lt,...Yt,...je,...Zt,...jt,...We}},"getHuddleStateSnapshot")},4742719639:(z,A,e)=>{"use strict";e.d(A,{o:()=>c});var t=e(2384831516),n=e(9548972574),s=e(8847766420),a=e(6741408957);const c=(0,t.Mz)((o,r)=>{const l=(0,n.dy)(o);if(l)return l;const _=(0,n.Yw)(o,r);if(!_)return null;const d=(0,s.ZT)(o);return _.name===void 0?((0,a.Ss)().fetchObjectWithId(d,_.id),null):((0,a.GD)().maybeRefetch(d,_.id),_.name)});c.meta={name:"createSelector",key:"createSelectorgetHuddleTopic",description:(o,r)=>{const l=(0,n.dy)(o);if(l)return l;const _=(0,n.Yw)(o,r);if(!_)return null;const d=(0,s.ZT)(o);return _.name===void 0?((0,a.Ss)().fetchObjectWithId(d,_.id),null):((0,a.GD)().maybeRefetch(d,_.id),_.name)}}},1766818988:(z,A,e)=>{"use strict";e.d(A,{I:()=>d,s:()=>_});var t=e(3398586081),n=e(3677514771),s=e(340763958),a=e(1407713935),c=e(6839188756),o=e(6303366080),r=e(9101533895);const l=(0,t.A)((i,m)=>(0,c.tc)(i)&&(m==null?void 0:m.some(h=>(0,s.ju)(h)&&!(0,a.JM)(h)))),_=u(i=>{const m=(0,n.H7)(i),h=(0,r.DM)(i);return l(m,h)},"isHuddlesEnabledForSponsoredTeam"),d=u((i,m)=>{const h=(0,n.H7)(i);return!!m&&(0,c.tc)(h)&&(0,o.dE)(i,m)},"isHuddlesEnabledForSponsoredChannel")},1921074781:(z,A,e)=>{"use strict";e.d(A,{F:()=>r});var t=e(9706240641),n=e.n(t),s=e(8571983633),a=e(6422693406),c=e(796111729),o=e(2778217221);class r{static getInstance(){if(!r.wakeLockManager)try{r.wakeLockManager=new r}catch(_){(0,c.Wo)({label:o.o7}).warn("Error instantiating WakeLockManager,",_.message)}return r.wakeLockManager}static doesInstanceExist(){return!(0,s.A)(r.wakeLockManager)}request(){var _=this;return(0,t.coroutine)(function*(){if(_.wakeLockSentinel)return a.S.resolve();_.wakeLockSentinel=yield _.wakeLock.request("screen").catch(d=>(_.logger.warn("WakeLock acquire failed",d.message),null)),_.addHandlers()})()}release(){var _=this;return(0,t.coroutine)(function*(){if(!_.wakeLockSentinel)return a.S.resolve();_.shouldRemoveVisibilityHandler=!0,yield _.wakeLockSentinel.release(),_.logger.info("WakeLock released")})()}addHandlers(){this.wakeLockSentinel&&(this.wakeLockSentinel.addEventListener("release",this.handleWakeLockReleased),document.addEventListener("visibilitychange",this.handleDocumentVisibilityChange))}cleanupHandlers(){this.wakeLockSentinel&&(this.wakeLockSentinel.removeEventListener("release",this.handleWakeLockReleased),this.wakeLockSentinel=null,this.shouldRemoveVisibilityHandler&&(document.removeEventListener("visibilitychange",this.handleDocumentVisibilityChange),this.shouldRemoveVisibilityHandler=!1))}handleWakeLockReleased(){var _=this;return(0,t.coroutine)(function*(){_.logger.info("WakeLock released by browser"),_.cleanupHandlers()})()}handleDocumentVisibilityChange(){var _=this;return(0,t.coroutine)(function*(){document.visibilityState==="visible"&&_.request()})()}constructor(){if(this.logger=(0,c.Wo)({label:o.o7}),this.shouldRemoveVisibilityHandler=!1,!navigator.wakeLock)throw Error("navigator.wakeLock undefined");this.wakeLock=navigator.wakeLock,this.handleDocumentVisibilityChange=this.handleDocumentVisibilityChange.bind(this),this.handleWakeLockReleased=this.handleWakeLockReleased.bind(this)}}u(r,"WakeLockManager")},8478954380:(z,A,e)=>{"use strict";e.d(A,{Li:()=>h,ML:()=>c,Rt:()=>r,_6:()=>m,aS:()=>l,al:()=>o,bW:()=>d,it:()=>i,qO:()=>_});var t=e(2140362605),n=e(1031947056),s=e(5071086688),a=e(5470425448);const c=(0,t.Ay)("Update the state of the active tab in the huddle troubleshooting panel");c.meta={name:"createAction",key:"createActionupdateTroubleshootingActiveAccordionViewTrace",description:"Update the state of the active tab in the huddle troubleshooting panel"};const o=(0,t.Ay)("Makes troubleshoot panel V2 visible in source view or clears it");o.meta={name:"createAction",key:"createActionsetTroubleshootingSource",description:"Makes troubleshoot panel V2 visible in source view or clears it"};const r=(0,n.Ay)("Set the screen sharing of a peer.",(v,y,T)=>{s.A.publish({type:a.lx.TroubleshootingEntryPoint,update:(T==null?void 0:T.entryPoint)||null}),v(o(T))});r.meta={name:"createThunk",key:"createThunksetTroubleshootingSourceWithTrace",description:"Set the screen sharing of a peer."};const l=(0,t.Ay)("Sets active pill page for tracing.");l.meta={name:"createAction",key:"createActionsetTroubleshootingPillPageTrace",description:"Sets active pill page for tracing."};const _=(0,t.Ay)("Update stable metrics state");_.meta={name:"createAction",key:"createActionupdateStableMetrics",description:"Update stable metrics state"};const d=(0,t.Ay)("Update unstable metrics and warnings state");d.meta={name:"createAction",key:"createActionupdateUnstableMetricsAndWarnings",description:"Update unstable metrics and warnings state"};const i=(0,t.Ay)("Update stable warnings state");i.meta={name:"createAction",key:"createActionupdateStableWarnings",description:"Update stable warnings state"};const m=(0,t.Ay)("Update stable alert state");m.meta={name:"createAction",key:"createActionupdateStableAlerts",description:"Update stable alert state"};const h=(0,t.Ay)("Update unstable alert state");h.meta={name:"createAction",key:"createActionupdateUnstableAlerts",description:"Update unstable alert state"}},2465464861:(z,A,e)=>{"use strict";e.d(A,{$i:()=>d,Eh:()=>r,FP:()=>I,Ku:()=>g,Wf:()=>T,Wg:()=>_,Z8:()=>o,_R:()=>l,cB:()=>v,gA:()=>E,h:()=>y,m:()=>p,qV:()=>i});var t=e(9829579108),n=e(5751973043),s=e(6790819894),a=e(7091646278),c=e(387328355);const o=3,r=(0,t.Ay)(f=>f.huddleTroubleshooting.view.activeAccordionView);r.meta={name:"createSelector",key:"createSelectorgetTroubleshootingPanelActiveAccordionView",description:f=>f.huddleTroubleshooting.view.activeAccordionView};const l=(0,t.Ay)(f=>f.huddleTroubleshooting.view.source);l.meta={name:"createSelector",key:"createSelectorgetTroubleshootingPanelSource",description:f=>f.huddleTroubleshooting.view.source};const _=(0,t.Ay)(f=>f.huddleTroubleshooting.view.activePillPage);_.meta={name:"createSelector",key:"createSelectorgetTroubleshootingPillPageTrace",description:f=>f.huddleTroubleshooting.view.activePillPage};const d=(0,t.Ay)(f=>f.huddleTroubleshooting.view.source?f.huddleTroubleshooting.view.openCounter:-1);d.meta={name:"createSelector",key:"createSelectorgetTroubleshootingSessionCounterIdTrace",description:f=>f.huddleTroubleshooting.view.source?f.huddleTroubleshooting.view.openCounter:-1};const i=(0,t.Ay)(f=>f.huddleTroubleshooting.view.entryPoint);i.meta={name:"createSelector",key:"createSelectorgetTroubleshootingEntryPointTrace",description:f=>f.huddleTroubleshooting.view.entryPoint};const m=(0,t.Ay)(f=>f.huddleTroubleshooting.view.alertCount>=o);m.meta={name:"createSelector",key:"createSelectorshouldDisplaySupportLink",description:f=>f.huddleTroubleshooting.view.alertCount>=o};const h=(0,t.Ay)(f=>f.huddleTroubleshooting.metrics.stable);h.meta={name:"createSelector",key:"createSelectorgetStableMetrics",description:f=>f.huddleTroubleshooting.metrics.stable};const v=(0,t.Ay)(f=>f.huddleTroubleshooting.metrics.unstable);v.meta={name:"createSelector",key:"createSelectorgetUnstableMetrics",description:f=>f.huddleTroubleshooting.metrics.unstable};const y=(0,t.Ay)(f=>f.huddleTroubleshooting.warnings.stable);y.meta={name:"createSelector",key:"createSelectorgetStableWarnings",description:f=>f.huddleTroubleshooting.warnings.stable};const T=(0,t.Ay)(f=>f.huddleTroubleshooting.warnings.unstable);T.meta={name:"createSelector",key:"createSelectorgetUnstableWarnings",description:f=>f.huddleTroubleshooting.warnings.unstable};const I=(0,t.Ay)(f=>f.huddleTroubleshooting.alerts.stable);I.meta={name:"createSelector",key:"createSelectorgetStableAlerts",description:f=>f.huddleTroubleshooting.alerts.stable};const p=(0,t.Ay)(f=>f.huddleTroubleshooting.alerts.unstable);p.meta={name:"createSelector",key:"createSelectorgetUnstableAlerts",description:f=>f.huddleTroubleshooting.alerts.unstable};const g=(0,s.F)(f=>I(f)||n.t0,f=>p(f)||n.t0,f=>y(f)||n.t0,(f,O,C)=>{const{isMicrophoneBlocked:M,isCameraBlocked:D,isDisconnected:P,isMicrophoneNotSendingAudio:k}=f,{isAudioQualityPoor:x,isCpuCompetitionPoor:F,isNetworkQualityPoor:W,networkQualityHealth:Y}=O,{isCameraProbablyIphone:S,isSpeakerBluetooth:L}=C,w=!!(x&&W),J=!!(x&&F),G=!!(L&&x||D||M||k||S),X=!!(w||J||D||M||k||P),te=x||P?a.bz.Bad:Y;return{shouldSurfaceGeneralWarning:X,shouldSurfaceSystemWarning:J,shouldSurfaceDevicesWarning:G,aggregateNetworkHealth:te}}),E=(0,s.F)(c.Ng,c.nt,(f,O)=>{const{isCameraEnabled:C}=f;return!!(C||O)})},7091646278:(z,A,e)=>{"use strict";e.d(A,{ML:()=>n,bz:()=>s,pK:()=>t});var t;(function(a){a.Network="network",a.System="system",a.Devices="devices",a.Overview="overview"})(t||(t={}));var n;(function(a){a.EnlargedWindow="EnlargedWindow",a.CompactWindow="CompactWindow",a.MiniPlayer="MiniPlayer"})(n||(n={}));var s;(function(a){a.Good="good",a.Warn="warn",a.Bad="bad"})(s||(s={}))},9943020700:(z,A,e)=>{"use strict";e.d(A,{$W:()=>_,$o:()=>y,Am:()=>v,At:()=>ce,C2:()=>C,CO:()=>i,Cj:()=>T,DB:()=>he,Dx:()=>M,EX:()=>G,Fm:()=>m,GI:()=>d,IC:()=>F,I_:()=>o,KF:()=>_e,KJ:()=>Q,Lu:()=>Ae,OG:()=>h,Ot:()=>de,Qk:()=>s,RL:()=>k,TD:()=>Ie,TW:()=>S,To:()=>D,Tt:()=>te,U_:()=>I,Uo:()=>le,VV:()=>r,XB:()=>x,ZE:()=>P,_L:()=>f,_R:()=>L,ab:()=>O,av:()=>j,d0:()=>X,fg:()=>J,g:()=>p,kJ:()=>w,qD:()=>ee,tK:()=>n,w$:()=>W,wW:()=>ve,w_:()=>Y,yw:()=>l,zD:()=>E,zl:()=>ae});var t=e(2140362605);const n=(0,t.Ay)("Remove a list");n.meta={name:"createAction",key:"createActionremoveList",description:"Remove a list"};const s=(0,t.Ay)("trigger animation for view");s.meta={name:"createAction",key:"createActiontriggerAnimationForViewId",description:"trigger animation for view"};const a=(0,t.Ay)("Add / update a list column");a.meta={name:"createAction",key:"createActionupsertColumn",description:"Add / update a list column"};const c=(0,t.Ay)("Remove a list column");c.meta={name:"createAction",key:"createActionremoveColumn",description:"Remove a list column"};const o=(0,t.Ay)("Fill column with info data or default value");o.meta={name:"createAction",key:"createActionfillColumnData",description:"Fill column with info data or default value"};const r=(0,t.Ay)("Replace all of a list's records");r.meta={name:"createAction",key:"createActionreplaceRecords",description:"Replace all of a list's records"};const l=(0,t.Ay)("Add / update multiple records");l.meta={name:"createAction",key:"createActionbulkUpsertRecords",description:"Add / update multiple records"};const _=(0,t.Ay)("Add / update a list record");_.meta={name:"createAction",key:"createActionupsertRecord",description:"Add / update a list record"};const d=(0,t.Ay)("Remove a list record");d.meta={name:"createAction",key:"createActionremoveRecord",description:"Remove a list record"};const i=(0,t.Ay)("Add/update a record position in a view");i.meta={name:"createAction",key:"createActionupsertRecordPosition",description:"Add/update a record position in a view"};const m=(0,t.Ay)("Add / update multiple templates");m.meta={name:"createAction",key:"createActionbulkUpsertTemplates",description:"Add / update multiple templates"};const h=(0,t.Ay)("Add / update multiple starter templates");h.meta={name:"createAction",key:"createActionbulkUpsertStarterTemplates",description:"Add / update multiple starter templates"};const v=(0,t.Ay)("Remove a starter template by ID");v.meta={name:"createAction",key:"createActionremoveStarterTemplate",description:"Remove a starter template by ID"};const y=(0,t.Ay)("Set the list's banner message");y.meta={name:"createAction",key:"createActionsetBannerMessageForList",description:"Set the list's banner message"};const T=(0,t.Ay)("Clear the specified type of banner message for this list");T.meta={name:"createAction",key:"createActionclearBannerMessageForList",description:"Clear the specified type of banner message for this list"};const I=(0,t.Ay)("Add / update a list record field");I.meta={name:"createAction",key:"createActionupsertField",description:"Add / update a list record field"};const p=(0,t.Ay)("Add / update a list cell");p.meta={name:"createAction",key:"createActionupsertCell",description:"Add / update a list cell"};const g=(0,t.Ay)("Add / update a workflow for a list");g.meta={name:"createAction",key:"createActionupsertWorkflow",description:"Add / update a workflow for a list"};const E=(0,t.Ay)("Apply an edit action to a list");E.meta={name:"createAction",key:"createActionapplyEditAction",description:"Apply an edit action to a list"};const f=(0,t.Ay)("Clear edit history for a list");f.meta={name:"createAction",key:"createActionclearEditHistory",description:"Clear edit history for a list"};const O=(0,t.Ay)("Update local filters");O.meta={name:"createAction",key:"createActionchangeViewLocalFilters",description:"Update local filters"};const C=(0,t.Ay)("Update local sorts");C.meta={name:"createAction",key:"createActionchangeViewLocalSorts",description:"Update local sorts"};const M=(0,t.Ay)("Update local collapsed grids");M.meta={name:"createAction",key:"createActionchangeViewLocalCollapsedGrids",description:"Update local collapsed grids"};const D=(0,t.Ay)("Update the current viewId set by refine in the active window");D.meta={name:"createAction",key:"createActionsetRefineView",description:"Update the current viewId set by refine in the active window"};const P=(0,t.Ay)("Set filter pill to auto open");P.meta={name:"createAction",key:"createActionsetFilterPillKeyById",description:"Set filter pill to auto open"};const k=(0,t.Ay)("Set group by pill to auto open");k.meta={name:"createAction",key:"createActionsetGroupByPillAutoOpen",description:"Set group by pill to auto open"};const x=(0,t.Ay)("Set search query for list");x.meta={name:"createAction",key:"createActionsetListSearchQuery",description:"Set search query for list"};const F=(0,t.Ay)("Destroy local refinements");F.meta={name:"createAction",key:"createActiondestroyLocalRefinements",description:"Destroy local refinements"};const W=(0,t.Ay)("Add / update my items");W.meta={name:"createAction",key:"createActionupsertMyItems",description:"Add / update my items"};const Y=(0,t.Ay)("Add / update a list cell edit");Y.meta={name:"createAction",key:"createActionupsertCellEdit",description:"Add / update a list cell edit"};const S=(0,t.Ay)("set refinement pill to auto open in view");S.meta={name:"createAction",key:"createActionsetRefinePillAutoOpenByViewId",description:"set refinement pill to auto open in view"};const L=(0,t.Ay)("Add / update last read timestamp by list ID");L.meta={name:"createAction",key:"createActionupsertLastReadTimestampById",description:"Add / update last read timestamp by list ID"};const w=(0,t.Ay)("Should show list description");w.meta={name:"createAction",key:"createActionsetShowListDescriptionById",description:"Should show list description"};const J=(0,t.Ay)("Mark records as new to highlight it");J.meta={name:"createAction",key:"createActionhighlightRecordsAsNew",description:"Mark records as new to highlight it"};const G=(0,t.Ay)("Mark record read to unhighlight it");G.meta={name:"createAction",key:"createActionremoveRecordHighlight",description:"Mark record read to unhighlight it"};const X=(0,t.Ay)("Set record as open in flexpane");X.meta={name:"createAction",key:"createActionrecordFlexpaneOpen",description:"Set record as open in flexpane"};const te=(0,t.Ay)("Set record flexpane closed");te.meta={name:"createAction",key:"createActionrecordFlexpaneClosed",description:"Set record flexpane closed"};const le=(0,t.Ay)("Load all recently viewed lists");le.meta={name:"createAction",key:"createActionloadRecentlyViewedLists",description:"Load all recently viewed lists"};const ve=(0,t.Ay)("Add recently opened list to the store");ve.meta={name:"createAction",key:"createActionaddToRecentlyViewedLists",description:"Add recently opened list to the store"};const Q=(0,t.Ay)("Remove deleted lists from the store");Q.meta={name:"createAction",key:"createActionremoveFromRecentlyViewedLists",description:"Remove deleted lists from the store"};const Ae=(0,t.Ay)("Update local field visibility");Ae.meta={name:"createAction",key:"createActionchangeLocalViewFieldVisibility",description:"Update local field visibility"};const ae=(0,t.Ay)("Update local view type");ae.meta={name:"createAction",key:"createActionchangeLocalViewType",description:"Update local view type"};const he=(0,t.Ay)("Update local group by");he.meta={name:"createAction",key:"createActionchangeLocalViewGroupBy",description:"Update local group by"};const _e=(0,t.Ay)("Subscribe/unsubscribe a list record");_e.meta={name:"createAction",key:"createActionsetRecordIsSubscribed",description:"Subscribe/unsubscribe a list record"};const ee=(0,t.Ay)("Set new view ids for badging");ee.meta={name:"createAction",key:"createActionsetListNewViewBadgingById",description:"Set new view ids for badging"};const de=(0,t.Ay)("Set highlight column in the item flexpane");de.meta={name:"createAction",key:"createActionsetHighlightColumnId",description:"Set highlight column in the item flexpane"};const Ie=(0,t.Ay)("Clear highlight column in the item flexpane");Ie.meta={name:"createAction",key:"createActionclearHighlightColumnId",description:"Clear highlight column in the item flexpane"};const ce=(0,t.Ay)("Set local views for optimistic updates");ce.meta={name:"createAction",key:"createActionsetLocalViewsByListId",description:"Set local views for optimistic updates"};const j=(0,t.Ay)("TBD");j.meta={name:"createAction",key:"createActionrefineEditViewMenuComponentState",description:"TBD"}},5987902639:(z,A,e)=>{"use strict";e.d(A,{w9:()=>Re,uu:()=>_n,mJ:()=>jt,vg:()=>j,K0:()=>Yt,rm:()=>Z,kS:()=>re,E4:()=>tt,Yq:()=>Mn,k7:()=>Rt,$8:()=>pt,nh:()=>Dt,Jc:()=>et,$N:()=>sn,zH:()=>Bt,lq:()=>ft,Te:()=>Ye,YI:()=>Ke,dR:()=>zt,iP:()=>Vn,qC:()=>$n,Ws:()=>$t,hA:()=>Cn,Tj:()=>rn,jv:()=>Zt,vS:()=>de,PZ:()=>hn,I9:()=>we,DU:()=>R,C0:()=>pe,C5:()=>ln,vD:()=>q,Rl:()=>Ie,jH:()=>qt,P6:()=>ce,Mr:()=>b,bA:()=>ct,ot:()=>Tn,Bj:()=>kn,qO:()=>nn,df:()=>Wt,iM:()=>on,dE:()=>Xt,EI:()=>B,kG:()=>Te,_H:()=>cn,wx:()=>$,Xb:()=>We,nZ:()=>Le,X0:()=>gn,hL:()=>Ft,BO:()=>Ht,K1:()=>ze,gu:()=>un,aY:()=>vt,hY:()=>lt,Yb:()=>Pn,XR:()=>Tt,WE:()=>Lt,x2:()=>fe,$F:()=>Ce,yv:()=>Pe,n7:()=>He,iX:()=>N,Es:()=>xe,TF:()=>Wn});var t=e(166097325),n=e(3385422400),s=e(1737183214),a=e(3001769570),c=e(9216332371),o=e(9289081806),r=e(2188787324),l=e(5917710436),_=e(6642124196),d=e(2009641291),i=e(1521013946),m=e(6106034567),h=e(3110884894),v=e(1305633231),y=e(3339229351),T=e(5751973043),I=e(796111729),p=e(6471801899),g=e(9829579108),E=e(8847766420),f=e(4813703725),O=e(8455301571),C=e(937317117),M=e(6415612447),D=e(9706240641),P=e(3398586081),k=e(8352634987),x=e(6533394955);function F(De,Ne){return W.apply(this,arguments)}u(F,"fetchAndUpsertRecordsForListCircular");function W(){return W=(0,D.coroutine)(function*(De,Ne){const{fetchAndUpsertRecordsForList:Me}=yield Promise.resolve().then(e.bind(e,164394607));return(0,x.dispatchForTeamId)(De,Me(Ne))}),W.apply(this,arguments)}u(W,"_fetchAndUpsertRecordsForListCircular");const Y=(0,P.A)(De=>new k.Ay({storeKey:"lists",fetch:(Ne,Me)=>F(Ne,{idsToFetch:Me,listId:De}),isEnabled:()=>!0,metricsName:"lists-record-fetcher"})),S=u((De,Ne,Me)=>Y(Me).markObjectsAsStale(De,Ne),"markObjectsAsStale"),L=u((De,Ne,Me)=>Y(Me).maybeRefetch(De,Ne),"maybeRefetch"),w=u((De,Ne,Me)=>Y(Me).markObjectsAsFresh(De,Ne),"markObjectsAsFresh");var J=e(3037015781),G=e(164394607),X=e(6510096970);const te=(0,P.A)(De=>new J.Ay({fetch:(Ne,Me)=>(0,x.dispatchForTeamId)(Ne,(0,G.fetchRecordsForList)({idsToFetch:Me,listId:De})),upsertKnown:(Ne,Me)=>{const Be=Me.map(ue=>ue.id);return w(Ne,Be,De),(0,x.dispatchForTeamId)(Ne,(0,X.x)({records:Me,listId:De}))},upsertNonExistent:(Ne,Me)=>{const Be=Me.map(ue=>ue.id);return w(Ne,Be,De),(0,x.dispatchForTeamId)(Ne,(0,X.x)({records:Me,listId:De}))},isEnabled:()=>!0}));var le=e(5942687316),ve=e(7606781622),Q=e(2567914105),Ae=e(9113979368);const ae=(0,g.Ay)(De=>!(0,Ae.A)(De.overlays));ae.meta={name:"createSelector",key:"createSelectorisOverlayOpen",description:De=>!(0,Ae.A)(De.overlays)};var he=e(2047021170);const _e=1e3*60*60*24,ee=u(De=>De.lists,"getListsState"),de=(0,g.Ay)((De,Ne)=>(0,C.Lp)(De,Ne));de.meta={name:"createSelector",key:"createSelectorgetList",description:(De,Ne)=>(0,C.Lp)(De,Ne)};const Ie=(0,g.Ay)((De,Ne)=>{var Me;return Ne&&((Me=ee(De).listsById[Ne])===null||Me===void 0?void 0:Me.records)||T.t0});Ie.meta={name:"createSelector",key:"createSelectorgetListRecords",description:(De,Ne)=>{var Me;return Ne&&((Me=ee(De).listsById[Ne])===null||Me===void 0?void 0:Me.records)||T.t0}};const ce=(0,n.Mz)(de,De=>De==null?void 0:De.title),j=(0,g.Ay)(De=>ee(De).clock);j.meta={name:"createSelector",key:"createSelectorgetClock",description:De=>ee(De).clock};const N=(0,g.Ay)(De=>ee(De).triggerAnimationForViewId);N.meta={name:"createSelector",key:"createSelectorgetViewToAnimate",description:De=>ee(De).triggerAnimationForViewId};const b=(0,g.Ay)(De=>(0,C.Im)(De));b.meta={name:"createSelector",key:"createSelectorgetLists",description:De=>(0,C.Im)(De)};const R=(0,g.Ay)((De,Ne)=>De.files[Ne].list_limits);R.meta={name:"createSelector",key:"createSelectorgetListLimits",description:(De,Ne)=>De.files[Ne].list_limits};const K=(0,g.Ay)((De,Ne,Me)=>{var Be,ue;const ke=(0,E.ZT)(De);if(!ke)return;const Xe=(Be=ee(De).listsById[Ne])===null||Be===void 0||(ue=Be.records)===null||ue===void 0?void 0:ue[Me];return Xe?(!(0,l.z7)(Xe)&&!te(Ne).isFetchPendingForId(ke,Me)&&L(ke,Me,Ne),Xe):te(Ne).fetchObjectWithId(ke,Me)});K.meta={name:"createSelector",key:"createSelectorgetRecordSmart",description:(De,Ne,Me)=>{var Be,ue;const ke=(0,E.ZT)(De);if(!ke)return;const Xe=(Be=ee(De).listsById[Ne])===null||Be===void 0||(ue=Be.records)===null||ue===void 0?void 0:ue[Me];return Xe?(!(0,l.z7)(Xe)&&!te(Ne).isFetchPendingForId(ke,Me)&&L(ke,Me,Ne),Xe):te(Ne).fetchObjectWithId(ke,Me)}};const B=(0,g.Ay)((De,Ne,Me,Be)=>{var ue,ke;return Be?K(De,Ne,Me):(ue=ee(De).listsById[Ne])===null||ue===void 0||(ke=ue.records)===null||ke===void 0?void 0:ke[Me]});B.meta={name:"createSelector",key:"createSelectorgetRecord",description:(De,Ne,Me,Be)=>{var ue,ke;return Be?K(De,Ne,Me):(ue=ee(De).listsById[Ne])===null||ue===void 0||(ke=ue.records)===null||ke===void 0?void 0:ke[Me]}};const $=(0,g.Ay)((De,Ne,Me)=>{var Be,ue;return(0,v.A)(De,(Be=B(De,Ne,Me))===null||Be===void 0||(ue=Be.fields)===null||ue===void 0?void 0:ue.name)});$.meta={name:"createSelector",key:"createSelectorgetRecordNameAsPlainText",description:(De,Ne,Me)=>{var Be,ue;return(0,v.A)(De,(Be=B(De,Ne,Me))===null||Be===void 0||(ue=Be.fields)===null||ue===void 0?void 0:ue.name)}};const Z=(0,g.Ay)((De,Ne,Me)=>{const Be=de(De,Ne),ue=(0,l.uA)(Be);return ue==null?void 0:ue.find(ke=>ke.key===Me)});Z.meta={name:"createSelector",key:"createSelectorgetColumnByKey",description:(De,Ne,Me)=>{const Be=de(De,Ne),ue=(0,l.uA)(Be);return ue==null?void 0:ue.find(ke=>ke.key===Me)}};const re=(0,g.Ay)((De,Ne,Me)=>{var Be;return(Be=Z(De,Ne,Me))===null||Be===void 0?void 0:Be.id});re.meta={name:"createSelector",key:"createSelectorgetColumnIdByColumnKey",description:(De,Ne,Me)=>{var Be;return(Be=Z(De,Ne,Me))===null||Be===void 0?void 0:Be.id}};const Te=(0,g.Ay)((De,Ne,Me)=>{var Be;const ue=(Be=ee(De).listsById[Ne])===null||Be===void 0?void 0:Be.records;if(ue)return Object.values(ue).find(ke=>ke.threadTs===Me)});Te.meta={name:"createSelector",key:"createSelectorgetRecordByThreadTs",description:(De,Ne,Me)=>{var Be;const ue=(Be=ee(De).listsById[Ne])===null||Be===void 0?void 0:Be.records;if(ue)return Object.values(ue).find(ke=>ke.threadTs===Me)}};const Ce=(0,g.Ay)((De,Ne)=>ee(De).templatesById[Ne]);Ce.meta={name:"createSelector",key:"createSelectorgetTemplate",description:(De,Ne)=>ee(De).templatesById[Ne]};const Pe=(0,g.Ay)(De=>ee(De).templatesById);Pe.meta={name:"createSelector",key:"createSelectorgetTemplates",description:De=>ee(De).templatesById};const fe=(0,g.Ay)(De=>ee(De).starterTemplatesById);fe.meta={name:"createSelector",key:"createSelectorgetStarterTemplates",description:De=>ee(De).starterTemplatesById};const pe=(0,g.Ay)(De=>{const Ne=[],Me=b(De);for(const ue of Me){var Be;const ke={id:ue.id,title:(Be=ue.title)!==null&&Be!==void 0?Be:""};Ne.push(ke)}return Ne});pe.meta={name:"createSelector",key:"createSelectorgetListMentions",description:De=>{const Ne=[],Me=b(De);for(const ue of Me){var Be;const ke={id:ue.id,title:(Be=ue.title)!==null&&Be!==void 0?Be:""};Ne.push(ke)}return Ne}};const q=(0,g.Ay)((De,Ne)=>{const Me=b(De),Be=(0,p.V3)(Ne);if(!Be)return[];const{listTitle:ue}=Be,ke=(0,p.xL)(Me,ue);if(!ke)return[];const Xe=(0,C.Lp)(De,ke.id),dt=se(ke),bt=[],be=Ie(De,ke.id);for(const ie of Object.values(be??{})){var U,V;const Ue=(V=ie==null||(U=ie.fields)===null||U===void 0?void 0:U[dt])!==null&&V!==void 0?V:[];var ne;const Qe={id:ie.id,name:(0,v.A)(De,Ue),blocks:Ue,listId:Xe.id,listTitle:(ne=Xe.title)!==null&&ne!==void 0?ne:""};bt.push(Qe)}return bt});q.meta={name:"createSelector",key:"createSelectorgetListRecordMentions",description:(De,Ne)=>{const Me=b(De),Be=(0,p.V3)(Ne);if(!Be)return[];const{listTitle:ue}=Be,ke=(0,p.xL)(Me,ue);if(!ke)return[];const Xe=(0,C.Lp)(De,ke.id),dt=se(ke),bt=[],be=Ie(De,ke.id);for(const ie of Object.values(be??{})){var U,V;const Ue=(V=ie==null||(U=ie.fields)===null||U===void 0?void 0:U[dt])!==null&&V!==void 0?V:[];var ne;const Qe={id:ie.id,name:(0,v.A)(De,Ue),blocks:Ue,listId:Xe.id,listTitle:(ne=Xe.title)!==null&&ne!==void 0?ne:""};bt.push(Qe)}return bt}};function se(De){let Ne;const Me=(0,l.uA)(De);for(const Be of Me??[])if(Be.type==="text"&&(Ne||(Ne=Be),Be.key.toUpperCase()==="NAME"))return Be.key;return Ne?Ne.key:"name"}u(se,"findColumnKeyForMention");const ge=(0,g.Ay)(De=>(0,_.Fh)(De)?!!(0,he.ty)(De,"seen_onboarding_lists"):!0);ge.meta={name:"createSelector",key:"createSelectorhasSeenOnboardingLists",description:De=>(0,_.Fh)(De)?!!(0,he.ty)(De,"seen_onboarding_lists"):!0};const Oe=(0,g.Ay)((De,Ne)=>{var Me;const Be=de(De,Ne);return(Me=(0,l.uA)(Be))===null||Me===void 0?void 0:Me.find(ue=>(ue==null?void 0:ue.key)==="name")});Oe.meta={name:"createSelector",key:"createSelectorgetListDefaultColumn",description:(De,Ne)=>{var Me;const Be=de(De,Ne);return(Me=(0,l.uA)(Be))===null||Me===void 0?void 0:Me.find(ue=>(ue==null?void 0:ue.key)==="name")}};const Le=(0,g.Ay)((De,Ne,Me)=>{const Be=B(De,Ne,Me),ue=(0,M.Y)(De,Ne),ke=(0,o.FB)(ue),Xe=Be!=null&&Be.threadTs?(0,ve.Ld)(De,ke,Be.threadTs):void 0;var dt;return(dt=Xe==null?void 0:Xe.reply_count)!==null&&dt!==void 0?dt:null});Le.meta={name:"createSelector",key:"createSelectorgetRecordThreadReplyCount",description:(De,Ne,Me)=>{const Be=B(De,Ne,Me),ue=(0,M.Y)(De,Ne),ke=(0,o.FB)(ue),Xe=Be!=null&&Be.threadTs?(0,ve.Ld)(De,ke,Be.threadTs):void 0;var dt;return(dt=Xe==null?void 0:Xe.reply_count)!==null&&dt!==void 0?dt:null}};const We=(0,g.Ay)((De,Ne,Me)=>{const Be=B(De,Ne,Me),ue=(0,M.Y)(De,Ne),ke=(0,o.FB)(ue),Xe=Be!=null&&Be.threadTs?(0,ve.Ld)(De,ke,Be.threadTs):void 0,dt=(0,h.Iu)(ke,Be==null?void 0:Be.threadTs),bt=Xe&&dt?(0,O.r7)(De,dt)||{timestamps:[],reachedStart:!0}:null,be=Xe?(0,c.Nh)(De,ke,(bt==null?void 0:bt.timestamps)||[])||(Xe==null?void 0:Xe.ts):"";var U;const V=(U=Xe==null?void 0:Xe._subscribed)!==null&&U!==void 0?U:!1;var ne;const ie=(ne=Xe==null?void 0:Xe._last_read)!==null&&ne!==void 0?ne:"0";return V?be>ie:!1});We.meta={name:"createSelector",key:"createSelectorgetRecordThreadIsUnread",description:(De,Ne,Me)=>{const Be=B(De,Ne,Me),ue=(0,M.Y)(De,Ne),ke=(0,o.FB)(ue),Xe=Be!=null&&Be.threadTs?(0,ve.Ld)(De,ke,Be.threadTs):void 0,dt=(0,h.Iu)(ke,Be==null?void 0:Be.threadTs),bt=Xe&&dt?(0,O.r7)(De,dt)||{timestamps:[],reachedStart:!0}:null,be=Xe?(0,c.Nh)(De,ke,(bt==null?void 0:bt.timestamps)||[])||(Xe==null?void 0:Xe.ts):"";var U;const V=(U=Xe==null?void 0:Xe._subscribed)!==null&&U!==void 0?U:!1;var ne;const ie=(ne=Xe==null?void 0:Xe._last_read)!==null&&ne!==void 0?ne:"0";return V?be>ie:!1}};const Re=(0,g.Ay)((De,Ne)=>ee(De).listBannerMessagesbyId[Ne]);Re.meta={name:"createSelector",key:"createSelectorgetBannerMessagesForList",description:(De,Ne)=>ee(De).listBannerMessagesbyId[Ne]};const we=(0,g.Ay)((De,Ne)=>{const Me=(0,d.A)(De),Be=(0,C.Lp)(De,Ne);return!Be||!Be.access||!(0,r.mW)(Be)||!Me});we.meta={name:"createSelector",key:"createSelectorgetListIsViewOnly",description:(De,Ne)=>{const Me=(0,d.A)(De),Be=(0,C.Lp)(De,Ne);return!Be||!Be.access||!(0,r.mW)(Be)||!Me}};const Je=(0,g.Ay)(De=>(0,E.ZT)(De)==="T024BE7LD");Je.meta={name:"createSelector",key:"createSelectoronTinySpeckDevOrg",description:De=>(0,E.ZT)(De)==="T024BE7LD"};const it=(0,g.Ay)(De=>(0,E.jV)(De)===y.uh);it.meta={name:"createSelector",key:"createSelectoronTinySpeckOrg",description:De=>(0,E.jV)(De)===y.uh};const et=(0,g.Ay)((De,Ne)=>ee(De).historyById[Ne]);et.meta={name:"createSelector",key:"createSelectorgetEditHistory",description:(De,Ne)=>ee(De).historyById[Ne]};const lt=(0,g.Ay)((De,Ne)=>ee(De).shouldShowListDescriptionByListId[Ne]);lt.meta={name:"createSelector",key:"createSelectorgetShouldShowListDescriptionById",description:(De,Ne)=>ee(De).shouldShowListDescriptionByListId[Ne]};const nt=(0,g.Ay)((De,Ne)=>{const Me=de(De,Ne),Be=Ie(De,Ne);if(!Me||!Be)return null;let ue="";for(const Xe of Object.values(Be)){Xe.position&&ue<Xe.position&&(ue=Xe.position);var ke;for(const dt of Object.values((ke=Xe.viewPositions)!==null&&ke!==void 0?ke:{}))ue<dt&&(ue=dt)}return ue||null});nt.meta={name:"createSelector",key:"createSelectorgetBiggestRecordPosition",description:(De,Ne)=>{const Me=de(De,Ne),Be=Ie(De,Ne);if(!Me||!Be)return null;let ue="";for(const Xe of Object.values(Be)){Xe.position&&ue<Xe.position&&(ue=Xe.position);var ke;for(const dt of Object.values((ke=Xe.viewPositions)!==null&&ke!==void 0?ke:{}))ue<dt&&(ue=dt)}return ue||null}};const at=(0,g.Ay)((De,Ne,Me)=>{const Be=(0,le.zZ)({listId:Ne,viewId:Me});return ee(De).localFiltersById[Be]});at.meta={name:"createSelector",key:"createSelectorgetLocalFiltersByViewId",description:(De,Ne,Me)=>{const Be=(0,le.zZ)({listId:Ne,viewId:Me});return ee(De).localFiltersById[Be]}};const ze=(0,f.ow)((De,Ne,Me)=>{const Be=de(De,Ne),ue=(0,l.Qq)(Be,Me);var ke;const Xe=(ke=ue==null?void 0:ue.filters)!==null&&ke!==void 0?ke:[];var dt;return Xe.concat((dt=ue==null?void 0:ue.infoColumnFilters)!==null&&dt!==void 0?dt:[])}),Ke=(0,n.Mz)(at,ze,(De,Ne)=>De?De.length!==(Ne==null?void 0:Ne.length)?!0:!(0,a.bw)(De,Ne,"columnId"):!1),He=(0,n.Mz)(at,ze,(De,Ne)=>{if(!De)return new Set;const Me=new Map(Ne==null?void 0:Ne.map(ue=>[ue.key,ue])),Be=De.filter(ue=>(0,a.bV)(ue,Me)).map(ue=>ue.key);return new Set(Be)}),Ye=(0,n.Mz)(at,ze,(De,Ne)=>De!==void 0?De:Ne||[]),_t=(0,g.Ay)((De,Ne,Me)=>{const Be=(0,le.zZ)({listId:Ne,viewId:Me});return ee(De).localSortsById[Be]});_t.meta={name:"createSelector",key:"createSelectorgetLocalSortsByViewId",description:(De,Ne,Me)=>{const Be=(0,le.zZ)({listId:Ne,viewId:Me});return ee(De).localSortsById[Be]}};const vt=(0,f.ow)((De,Ne,Me)=>{const Be=de(De,Ne),ue=(0,l.Qq)(Be,Me);return(ue==null?void 0:ue.sorts)||[]}),Tt=(0,n.Mz)(_t,vt,(De,Ne)=>De!==void 0?De:Ne||[]),Lt=(0,n.Mz)(_t,vt,(De,Ne)=>De?De.length!==(Ne==null?void 0:Ne.length)?!0:!(0,a.bw)(De,Ne,"columnId"):!1),ft=(0,g.Ay)((De,Ne,Me)=>{var Be,ue;const ke=(0,le.zZ)({listId:Ne,viewId:Me});return(Be=ee(De))===null||Be===void 0||(ue=Be.filterPillKeyById)===null||ue===void 0?void 0:ue[ke]});ft.meta={name:"createSelector",key:"createSelectorgetFilterPillKeyById",description:(De,Ne,Me)=>{var Be,ue;const ke=(0,le.zZ)({listId:Ne,viewId:Me});return(Be=ee(De))===null||Be===void 0||(ue=Be.filterPillKeyById)===null||ue===void 0?void 0:ue[ke]}};const mt=(0,g.Ay)(De=>{var Ne;return(Ne=ee(De))===null||Ne===void 0?void 0:Ne.groupByPillAutoOpen});mt.meta={name:"createSelector",key:"createSelectorgetGroupByPillAutoOpen",description:De=>{var Ne;return(Ne=ee(De))===null||Ne===void 0?void 0:Ne.groupByPillAutoOpen}};const Yt=(0,g.Ay)((De,Ne,Me)=>{const Be=(0,le.zZ)({listId:Ne,viewId:Me});return ee(De).localCollapsedGridsById[Be]});Yt.meta={name:"createSelector",key:"createSelectorgetCollapsedGridsByViewId",description:(De,Ne,Me)=>{const Be=(0,le.zZ)({listId:Ne,viewId:Me});return ee(De).localCollapsedGridsById[Be]}};const nn=(0,g.Ay)(De=>ee(De).myItemMap);nn.meta={name:"createSelector",key:"createSelectorgetMyItemMap",description:De=>ee(De).myItemMap};const jt=(0,g.Ay)((De,Ne)=>ee(De).editActivityMap[Ne]);jt.meta={name:"createSelector",key:"createSelectorgetCellEditByTimestamp",description:(De,Ne)=>ee(De).editActivityMap[Ne]};const gn=(0,g.Ay)((De,Ne)=>{var Me;return(Me=ee(De).refinePillAutoOpenByViewId)===null||Me===void 0?void 0:Me[Ne]});gn.meta={name:"createSelector",key:"createSelectorgetRefinePillAutoOpenByViewId",description:(De,Ne)=>{var Me;return(Me=ee(De).refinePillAutoOpenByViewId)===null||Me===void 0?void 0:Me[Ne]}};const on=(0,g.Ay)(De=>ee(De).recentlyViewedLists);on.meta={name:"createSelector",key:"createSelectorgetRecentlyViewedLists",description:De=>ee(De).recentlyViewedLists};const Xt=(0,g.Ay)(De=>ee(De).recentlyViewedListsLastLoadedMs);Xt.meta={name:"createSelector",key:"createSelectorgetRecentlyViewedListsLastLoadedMs",description:De=>ee(De).recentlyViewedListsLastLoadedMs};const rn=(0,g.Ay)(De=>{const Ne=Xt(De);return Ne?Date.now()-Ne>_e:!0});rn.meta={name:"createSelector",key:"createSelectorgetIsRecentlyViewedListsExpired",description:De=>{const Ne=Xt(De);return Ne?Date.now()-Ne>_e:!0}};const Zt=(0,g.Ay)((De,Ne)=>{var Me;return(Me=ee(De).lastReadTimestampById)===null||Me===void 0?void 0:Me[Ne]});Zt.meta={name:"createSelector",key:"createSelectorgetLastReadTimestampByListId",description:(De,Ne)=>{var Me;return(Me=ee(De).lastReadTimestampById)===null||Me===void 0?void 0:Me[Ne]}};const Ht=(0,n.Mz)((De,Ne,Me)=>{const Be=de(De,Ne);return(0,l.cv)(Be,Me)},De=>{var Ne;return De==null||(Ne=De.columns)===null||Ne===void 0?void 0:Ne.reduce((Be,ue)=>{let{key:ke,visible:Xe}=ue;return Xe!==void 0&&(Be[ke]=Xe),Be},{})}),Bt=(0,g.Ay)((De,Ne,Me)=>{const Be=(0,le.zZ)({listId:Ne,viewId:Me}),ue=ee(De).localFieldVisibilityByViewId[Be];if(!ue)return;const ke=Ht(De,Ne,Me);return Object.entries(ue).filter(dt=>{let[bt,be]=dt;return be!==(ke==null?void 0:ke[bt])}).map(dt=>{let[bt,be]=dt;return{key:bt,visible:be}})});Bt.meta={name:"createSelector",key:"createSelectorgetFieldsThatChangedVisibility",description:(De,Ne,Me)=>{const Be=(0,le.zZ)({listId:Ne,viewId:Me}),ue=ee(De).localFieldVisibilityByViewId[Be];if(!ue)return;const ke=Ht(De,Ne,Me);return Object.entries(ue).filter(dt=>{let[bt,be]=dt;return be!==(ke==null?void 0:ke[bt])}).map(dt=>{let[bt,be]=dt;return{key:bt,visible:be}})}};const Qt=(0,f.eI)((De,Ne,Me)=>{const Be=(0,le.zZ)({listId:Ne,viewId:Me}),ue=ee(De).localFieldVisibilityByViewId[Be],ke=Ht(De,Ne,Me);return ue&&{...ke,...ue}}),sn=(0,n.Mz)(Qt,Ht,(De,Ne)=>De?!(0,t.A)(De,Ne):!1),Mn=(0,g.Ay)((De,Ne,Me)=>{const Be=Qt(De,Ne,Me);return Be||Ht(De,Ne,Me)});Mn.meta={name:"createSelector",key:"createSelectorgetCurrentViewFieldVisibilityByViewId",description:(De,Ne,Me)=>{const Be=Qt(De,Ne,Me);return Be||Ht(De,Ne,Me)}};const ct=(0,g.Ay)((De,Ne,Me)=>{const Be=(0,le.zZ)({listId:Ne,viewId:Me});return ee(De).localViewTypeByViewId[Be]});ct.meta={name:"createSelector",key:"createSelectorgetLocalViewType",description:(De,Ne,Me)=>{const Be=(0,le.zZ)({listId:Ne,viewId:Me});return ee(De).localViewTypeByViewId[Be]}};const yt=(0,f.ow)((De,Ne,Me)=>{const Be=de(De,Ne),ue=(0,l.Qq)(Be,Me);return ue==null?void 0:ue.type}),Rt=(0,g.Ay)((De,Ne,Me)=>{const Be=ct(De,Ne,Me);return Be!==void 0?Be:yt(De,Ne,Me)});Rt.meta={name:"createSelector",key:"createSelectorgetCurrentViewTypeByViewId",description:(De,Ne,Me)=>{const Be=ct(De,Ne,Me);return Be!==void 0?Be:yt(De,Ne,Me)}};const xe=(0,g.Ay)((De,Ne,Me)=>{const Be=ct(De,Ne,Me);if(!Be)return!1;const ue=yt(De,Ne,Me);return Be!==ue});xe.meta={name:"createSelector",key:"createSelectorgetViewTypeHasChanged",description:(De,Ne,Me)=>{const Be=ct(De,Ne,Me);if(!Be)return!1;const ue=yt(De,Ne,Me);return Be!==ue}};const Nt=(0,g.Ay)((De,Ne,Me)=>{const Be=(0,le.zZ)({listId:Ne,viewId:Me});return ee(De).localGroupByViewId[Be]});Nt.meta={name:"createSelector",key:"createSelectorgetLocalGroupBy",description:(De,Ne,Me)=>{const Be=(0,le.zZ)({listId:Ne,viewId:Me});return ee(De).localGroupByViewId[Be]}};const Ft=(0,g.Ay)((De,Ne)=>{var Me;return(Me=ee(De))===null||Me===void 0?void 0:Me.refineViewByWindowId[Ne]});Ft.meta={name:"createSelector",key:"createSelectorgetRefineView",description:(De,Ne)=>{var Me;return(Me=ee(De))===null||Me===void 0?void 0:Me.refineViewByWindowId[Ne]}};const qt=(0,g.Ay)((De,Ne)=>{var Me;return(Me=ee(De))===null||Me===void 0?void 0:Me.listSearchQueriesByWindowId[Ne]});qt.meta={name:"createSelector",key:"createSelectorgetListSearchQuery",description:(De,Ne)=>{var Me;return(Me=ee(De))===null||Me===void 0?void 0:Me.listSearchQueriesByWindowId[Ne]}};const un=(0,f.ow)((De,Ne,Me)=>{const Be=de(De,Ne),ue=(0,l.Qq)(Be,Me);return ue==null?void 0:ue.grouping}),tt=(0,g.Ay)((De,Ne,Me)=>{const Be=Nt(De,Ne,Me);return Be||un(De,Ne,Me)});tt.meta={name:"createSelector",key:"createSelectorgetCurrentGroupByViewId",description:(De,Ne,Me)=>{const Be=Nt(De,Ne,Me);return Be||un(De,Ne,Me)}};const pt=(0,g.Ay)(De=>(0,he.ty)(De,"lists_add_to_list_default_list"));pt.meta={name:"createSelector",key:"createSelectorgetDefaultListForAddToList",description:De=>(0,he.ty)(De,"lists_add_to_list_default_list")};const Dt=(0,n.Mz)(De=>(0,he.ty)(De,"lists_default_view"),De=>{try{return JSON.parse(De||"{}")}catch(Ne){return(0,I.Ay)({label:"lists"}).error("error parsing default lists view prefs",Ne),{}}}),Wt=(0,n.Mz)(De=>(0,he.ty)(De,"lists_my_items"),function(){let De=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"{}";const Ne={starred:{},completed:{}};let Me={};try{Me=JSON.parse(De)}catch(Be){(0,I.Ay)({label:"lists"}).error("error parsing my items prefs",Be)}return{...Ne,...Me}}),zt=(0,g.Ay)((De,Ne,Me)=>{const Be=Nt(De,Ne,Me);if(!Be)return!1;const ue=un(De,Ne,Me);return(Be==null?void 0:Be.groupBy)!==(ue==null?void 0:ue.groupBy)});zt.meta={name:"createSelector",key:"createSelectorgetHasGroupByChanged",description:(De,Ne,Me)=>{const Be=Nt(De,Ne,Me);if(!Be)return!1;const ue=un(De,Ne,Me);return(Be==null?void 0:Be.groupBy)!==(ue==null?void 0:ue.groupBy)}};const ln=(0,g.Ay)((De,Ne)=>ee(De).listNewViewBadgingById[Ne]);ln.meta={name:"createSelector",key:"createSelectorgetListNewViewBadgingById",description:(De,Ne)=>ee(De).listNewViewBadgingById[Ne]};const Tn=(0,g.Ay)((De,Ne)=>{var Me;return((Me=ee(De).localViewsByListId)===null||Me===void 0?void 0:Me[Ne])||T.Ml});Tn.meta={name:"createSelector",key:"createSelectorgetLocalViewsByListId",description:(De,Ne)=>{var Me;return((Me=ee(De).localViewsByListId)===null||Me===void 0?void 0:Me[Ne])||T.Ml}};const cn=(0,g.Ay)((De,Ne,Me)=>{var Be,ue,ke;return(Be=ee(De).listsById[Ne])===null||Be===void 0||(ue=Be.records)===null||ue===void 0||(ke=ue[Me])===null||ke===void 0?void 0:ke.isSubscribed});cn.meta={name:"createSelector",key:"createSelectorgetRecordIsSubscribed",description:(De,Ne,Me)=>{var Be,ue,ke;return(Be=ee(De).listsById[Ne])===null||Be===void 0||(ue=Be.records)===null||ue===void 0||(ke=ue[Me])===null||ke===void 0?void 0:ke.isSubscribed}};const hn=(0,g.Ay)((De,Ne)=>{var Me;if(we(De,Ne))return!1;const Be=(0,C.Lp)(De,Ne);if(!Be||!((Me=Be.editors)===null||Me===void 0)&&Me.length)return!1;const ue=et(De,Ne);if(ue!=null&&ue.undoStack.length||ue!=null&&ue.redoStack.length)return!1;const ke=Ie(De,Ne);for(const Xe of Object.values(ke??{}))if(String(Xe.dateCreated)!==Xe.updatedTimestamp)return!1;return!0});hn.meta={name:"createSelector",key:"createSelectorgetListIsEditableAndNeverUpdated",description:(De,Ne)=>{var Me;if(we(De,Ne))return!1;const Be=(0,C.Lp)(De,Ne);if(!Be||!((Me=Be.editors)===null||Me===void 0)&&Me.length)return!1;const ue=et(De,Ne);if(ue!=null&&ue.undoStack.length||ue!=null&&ue.redoStack.length)return!1;const ke=Ie(De,Ne);for(const Xe of Object.values(ke??{}))if(String(Xe.dateCreated)!==Xe.updatedTimestamp)return!1;return!0}};const Cn=(0,g.Ay)(De=>(0,he.ty)(De,"lists_template_sidebar_collapsed"));Cn.meta={name:"createSelector",key:"createSelectorgetIsListsTemplateSidebarCollapsedUserPref",description:De=>(0,he.ty)(De,"lists_template_sidebar_collapsed")};const _n=(0,g.Ay)((De,Ne)=>{const Me=de(De,Ne);return hn(De,Ne)&&(0,l.BS)(Me)});_n.meta={name:"createSelector",key:"createSelectorgetCanShowListEmptyStateSidebar",description:(De,Ne)=>{const Me=de(De,Ne);return hn(De,Ne)&&(0,l.BS)(Me)}};const Vn=(0,g.Ay)((De,Ne,Me,Be)=>{const ue=(0,le.pe)(Ne,Me,Be);return ee(De).highlightColumnMap[ue]});Vn.meta={name:"createSelector",key:"createSelectorgetHighlightColumnId",description:(De,Ne,Me,Be)=>{const ue=(0,le.pe)(Ne,Me,Be);return ee(De).highlightColumnMap[ue]}};const Wn=(0,g.Ay)(De=>(0,Q.oY)(De)||ae(De));Wn.meta={name:"createSelector",key:"createSelectorisModalOrOverlayOpen",description:De=>(0,Q.oY)(De)||ae(De)};const kn=(0,g.Ay)((De,Ne)=>{if(!Ne)return null;const Me=(0,i.$N)(De,Ne);return!Me||Me.type!==i.im.MESSAGE||!Me.channelId||!Me.ts?null:(0,ve.Ld)(De,Me.channelId,Me.ts)});kn.meta={name:"createSelector",key:"createSelectorgetMessageFromCellValue",description:(De,Ne)=>{if(!Ne)return null;const Me=(0,i.$N)(De,Ne);return!Me||Me.type!==i.im.MESSAGE||!Me.channelId||!Me.ts?null:(0,ve.Ld)(De,Me.channelId,Me.ts)}};const Pn=(0,g.Ay)((De,Ne)=>(0,_.Is)(De)&&(0,s.I)(De)&&!we(De,Ne));Pn.meta={name:"createSelector",key:"createSelectorgetShowListAutomationsEntrypoint",description:(De,Ne)=>(0,_.Is)(De)&&(0,s.I)(De)&&!we(De,Ne)};const $t=(0,g.Ay)(De=>{const Ne=(0,m.p)(De),Me=Ne===m.v.IMAGES_ONLY,Be=Ne===m.v.DISABLE_ALL;return Me||Be});$t.meta={name:"createSelector",key:"createSelectorgetIsListCsvImportDisabled",description:De=>{const Ne=(0,m.p)(De),Me=Ne===m.v.IMAGES_ONLY,Be=Ne===m.v.DISABLE_ALL;return Me||Be}};const $n=(0,g.Ay)((De,Ne,Me)=>{const Be=(0,le.o2)(Ne,Me),ue=ee(De).refineComponentsState[Be];var ke;return(ke=ue==null?void 0:ue.isEditViewMenuOpen)!==null&&ke!==void 0?ke:!1});$n.meta={name:"createSelector",key:"createSelectorgetIsEditViewMenuComponentOpen",description:(De,Ne,Me)=>{const Be=(0,le.o2)(Ne,Me),ue=ee(De).refineComponentsState[Be];var ke;return(ke=ue==null?void 0:ue.isEditViewMenuOpen)!==null&&ke!==void 0?ke:!1}}},4525672255:(z,A,e)=>{"use strict";e.d(A,{E:()=>d});var t=e(9706240641),n=e.n(t),s=e(5513050121),a=e(6554371307),c=e(197186845),o=e(796111729),r=e(1031947056),l=e(2947836378),_=e(832411022);const d=(0,r.Ay)("Fetch lists",function(){var i=(0,t.coroutine)(function*(m,h){let{query:v,sort:y,reason:T}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};try{const I=yield v?m((0,a.yz)({query:`type:list ${v}`,includeShares:!0,reason:T||"get-lists",bypassCache:!0})):m((0,c.jQ)({module:"files",query:"type:list",sort:y||_.VU.lastRead,reason:T||"get-lists",context:s.Oj.ListsDefault})).then(p=>{let{items:g}=p;return g});m((0,l.b)({files:I}))}catch(I){(0,o.Ay)({label:"lists"}).error("error fetching lists",I)}});return function(m,h){return i.apply(this,arguments)}}());d.meta={name:"createThunk",key:"createThunkfetchLists",description:"Fetch lists"}},164394607:(z,A,e)=>{"use strict";e.r(A),e.d(A,{fetchAndUpsertRecordsForList:()=>h,fetchRecord:()=>i,fetchRecordsForList:()=>m});var t=e(9706240641),n=e.n(t),s=e(2694081143),a=e(2927826522),c=e(796111729),o=e(6471801899),r=e(1031947056),l=e(9943020700),_=e(9629831899),d=e(6510096970);const i=(0,r.Ay)("Fetch list and list record",function(){var v=(0,t.coroutine)(function*(y,T,I){let{listId:p,id:g,includeIsSubscribed:E,reason:f="get-list-record"}=I;try{const F=yield y((0,s.T)({listId:p,id:g,includeIsSubscribed:E,reason:f}));y((0,_.y)({lists:[F.list]}));const W=(0,a.t)(F.record,100);var O,C,M,D,P,k;const Y=(0,o.jG)({id:W.id,fields:W.fields,dateCreated:W.dateCreated,createdBy:(O=W.createdBy)!==null&&O!==void 0?O:"",threadTs:W.threadTs,position:(C=W.position)!==null&&C!==void 0?C:"",updatedTimestamp:(M=W.updatedTimestamp)!==null&&M!==void 0?M:"",updatedBy:(D=W.updatedBy)!==null&&D!==void 0?D:"",viewPositions:(P=W.viewPositions)!==null&&P!==void 0?P:{},platformRefs:(k=W.platformRefs)!==null&&k!==void 0?k:{},isSubscribed:W.isSubscribed,saved:F.record.saved,savedFields:F.record.saved_fields});return y((0,l.$W)({listId:p,record:Y})),null}catch(F){var x;return(0,c.Ay)({label:"lists"}).error("error fetching list record",F),{error:F==null||(x=F.data)===null||x===void 0?void 0:x.error}}});return function(y,T,I){return v.apply(this,arguments)}}());i.meta={name:"createThunk",key:"createThunkfetchRecord",description:"Fetch list and list record"};const m=(0,r.Ay)("Fetch and upsert list record",function(){var v=(0,t.coroutine)(function*(y,T,I){let{idsToFetch:p,listId:g}=I;return n().all(p.map(function(){var E=(0,t.coroutine)(function*(f){try{const x=(yield y((0,s.T)({listId:g,id:f,includeIsSubscribed:!0,reason:"get-list-record"}))).record;var O,C,M,D,P;return(0,o.jG)({id:x.id,fields:x.fields,dateCreated:x.date_created,createdBy:(O=x.created_by)!==null&&O!==void 0?O:"",threadTs:(C=x.thread_ts)!==null&&C!==void 0?C:"",position:(M=x.position)!==null&&M!==void 0?M:"",updatedTimestamp:(D=x.updated_timestamp)!==null&&D!==void 0?D:"",updatedBy:(P=x.updated_by)!==null&&P!==void 0?P:"",viewPositions:x.view_positions,platformRefs:x.platform_refs,saved:x.saved,savedFields:x.saved_fields})}catch(k){return k.data.error==="record_deleted"?{id:f,isDeleted:!0}:{id:f,isNonExistent:!0}}});return function(f){return E.apply(this,arguments)}}()))});return function(y,T,I){return v.apply(this,arguments)}}());m.meta={name:"createThunk",key:"createThunkfetchRecordsForList",description:"Fetch and upsert list record"};const h=(0,r.Ay)("Fetch and upsert list record",function(){var v=(0,t.coroutine)(function*(y,T,I){let{idsToFetch:p,listId:g}=I;return y(m({idsToFetch:p,listId:g})).then(E=>{y((0,d.x)({records:E,listId:g}))})});return function(y,T,I){return v.apply(this,arguments)}}());h.meta={name:"createThunk",key:"createThunkfetchAndUpsertRecordsForList",description:"Fetch and upsert list record"}},9174292896:(z,A,e)=>{"use strict";e.d(A,{D:()=>l});var t=e(9706240641),n=e.n(t),s=e(444762595),a=e(796111729),c=e(6471801899),o=e(1031947056),r=e(9943020700);const l=(0,o.Ay)("Fetch list records",function(){var _=(0,t.coroutine)(function*(d,i,m){let{listId:h,currentUserId:v}=m;try{const T=(yield d((0,s.z)({listId:h,reason:"get-list-records"}))).records.map(I=>{var p,g,E,f,O;return(0,c.jG)({id:I.id,fields:I.fields,dateCreated:I.date_created,createdBy:(p=I.created_by)!==null&&p!==void 0?p:"",threadTs:(g=I.thread_ts)!==null&&g!==void 0?g:"",position:(E=I.position)!==null&&E!==void 0?E:"",updatedTimestamp:(f=I.updated_timestamp)!==null&&f!==void 0?f:"",updatedBy:(O=I.updated_by)!==null&&O!==void 0?O:"",viewPositions:I.view_positions,platformRefs:I.platform_refs,saved:I.saved,savedFields:I.saved_fields})});d((0,r.VV)({listId:h,records:T})),d((0,r.fg)({listId:h,currentUserId:v}))}catch(y){(0,a.Ay)({label:"lists"}).error("error fetching list records",y)}});return function(d,i,m){return _.apply(this,arguments)}}());l.meta={name:"createThunk",key:"createThunkfetchRecords",description:"Fetch list records"}},9629831899:(z,A,e)=>{"use strict";e.d(A,{y:()=>o});var t=e(9706240641),n=e.n(t),s=e(1031947056),a=e(3237710044),c=e(937317117);const o=(0,s.Ay)("Fetch list",function(){var r=(0,t.coroutine)(function*(l,_,d){let{lists:i}=d;i.forEach(m=>{const h=(0,c.Lp)(_(),m.id);l((0,a.sM)({...h,...m}))})});return function(l,_,d){return r.apply(this,arguments)}}());o.meta={name:"createThunk",key:"createThunkupsertLocalListFiles",description:"Fetch list"}},6510096970:(z,A,e)=>{"use strict";e.d(A,{x:()=>a});var t=e(1031947056),n=e(5795074931),s=e(9943020700);const a=(0,t.Ay)("Format and upsert list records",(c,o,r)=>{let{records:l,listId:_}=r;c((0,s.yw)({listId:_,records:l}));const d=(0,n.WR)(o());c((0,s.fg)({listId:_,currentUserId:d}))});a.meta={name:"createThunk",key:"createThunkupsertRecordsForList",description:"Format and upsert list records"}},5942687316:(z,A,e)=>{"use strict";e.d(A,{o2:()=>s,pe:()=>n,zZ:()=>t});const t=u(a=>{let{listId:c,viewId:o}=a;return`${c}-${o}`},"getLocalRefinementsId"),n=u((a,c,o)=>`${a.toString()}-${c}-${o}`,"makeHighlightStoreKey"),s=u((a,c)=>`${a.toString()}-${c}`,"makeRefineComponentStateStoreKey")},2938177083:(z,A,e)=>{"use strict";e.d(A,{A:()=>d});var t=e(796111729),n=e(1031947056),s=e(6422693406),a=e(6259241484),c=e(716227588),o=e(3603672985),r=e(7003004874),l=e(3707193570);const _=(0,n.Ay)("record a dismissal on a megaphone notification",(i,m,h)=>{const{spaceName:v,...y}=h,T=h.channelId||h.entityId,I=(0,t.Wo)();if(!v)return I.error(a.cK,"spaceName is required when dispatching recordAndClearNotification."),s.S.resolve();const p=m(),g=(0,c.Hp)(p,v,T);return(0,l.Ay)(T)&&h.entityType==="team"?i((0,o.pn)({spaceName:v,channelId:T})):i((0,o.KT)({spaceName:v,channelId:T})),i((0,r.A)({notificationName:g,...y}))});_.meta={name:"createThunk",key:"createThunkrecordAndClearNotification",description:"record a dismissal on a megaphone notification"};const d=_},7003004874:(z,A,e)=>{"use strict";e.d(A,{A:()=>i,j:()=>d});var t=e(796111729),n=e(1031947056),s=e(8760181906),a=e(6485511687),c=e(6422693406),o=e(6259241484);const r=(0,n.Ay)("record an event (e.g. dismissal, impression, etc) on a megaphone notification",(m,h,v)=>{const{notificationName:y,...T}=v,I=(0,t.Wo)();var p;const g=(p=v.reason)!==null&&p!==void 0?p:"record-notification-event";if(!y)return I.error(o.cK,"notificationName is required when dispatching recordNotificationEvent."),c.S.resolve();const E={notification:y,...T,reason:g};return m((0,a.a)(E))});r.meta={name:"createThunk",key:"createThunkrecordNotificationEvent",description:"record an event (e.g. dismissal, impression, etc) on a megaphone notification"};const l=6e4,_=!1,d=(0,s.A)(r,l,_,void 0,!1),i=r},7487228876:(z,A,e)=>{"use strict";e.d(A,{h:()=>a});var t=e(796111729),n=e(6259241484);const s=(0,t.Wo)(),a=u(c=>{let{spaceName:o,notificationName:r}=c;r&&s.error(n.cK,`${r} is not a recognized notification name for space ${o}.`)},"maybeLogUnrecognizedNotification")},2374999399:(z,A,e)=>{"use strict";e.d(A,{A:()=>a});var t=e(9829579108),n=e(8276911661);const s=(0,t.Ay)((c,o)=>(0,n.nv)(c,o).profile.statusEmojiDisplayInfo||void 0);s.meta={name:"createSelector",key:"createSelectorgetMemberCustomStatusEmojiDisplayInfo",description:(c,o)=>(0,n.nv)(c,o).profile.statusEmojiDisplayInfo||void 0};const a=s},1345620242:(z,A,e)=>{"use strict";e.d(A,{A:()=>o});var t=e(9829579108),n=e(8170643398),s=e(8276911661),a=e(3428522109);const c=(0,t.Ay)((r,l)=>{const _=(0,s.nv)(r,l),{status_text_canonical:d}=_.profile;return d?(0,n.UM)(_):(0,a.K)(r,_)?0:(0,n.UM)(_)});c.meta={name:"createSelector",key:"createSelectorgetMemberCustomStatusExpiration",description:(r,l)=>{const _=(0,s.nv)(r,l),{status_text_canonical:d}=_.profile;return d?(0,n.UM)(_):(0,a.K)(r,_)?0:(0,n.UM)(_)}};const o=c},2072540560:(z,A,e)=>{"use strict";e.d(A,{A:()=>r});var t=e(8086952004),n=e(9829579108),s=e(8276911661),a=e(8956918631),c=e(3428522109);const o=(0,n.Ay)((l,_)=>{const d=(0,s.nv)(l,_),{status_text_canonical:i}=d.profile;if(i){let m;const h=(0,a.A)(l);return h&&(m=((0,t.A)(h,v=>v.canonical===i)||{}).text||null),i.toLowerCase()==="on a call"&&(m=s.Ru.t("On a call")),m||d.profile.status_text||""}return(0,c.K)(l,d)?s.Ru.t("In a huddle"):d.profile.status_text||""});o.meta={name:"createSelector",key:"createSelectorgetMemberCustomStatusText",description:(l,_)=>{const d=(0,s.nv)(l,_),{status_text_canonical:i}=d.profile;if(i){let m;const h=(0,a.A)(l);return h&&(m=((0,t.A)(h,v=>v.canonical===i)||{}).text||null),i.toLowerCase()==="on a call"&&(m=s.Ru.t("On a call")),m||d.profile.status_text||""}return(0,c.K)(l,d)?s.Ru.t("In a huddle"):d.profile.status_text||""}};const r=o},1651628626:(z,A,e)=>{"use strict";e.d(A,{c:()=>o});var t=e(5797466484),n=e(1031947056),s=e(6422693406),a=e(6333950786),c=e(9291336591);const o=(0,n.Ay)("Submits changes to the current user\u2019s profile",(r,l,_)=>{let{profile:d,reason:i="submitProfileChange"}=_;if(!(0,t.A)(d))return s.S.resolve();const m={...d},h=l();return d.status_text&&(m.status_text=(0,a.A)(h,d.status_text)),r((0,c.n)({profile:JSON.stringify(m),reason:i}))});o.meta={name:"createThunk",key:"createThunksubmitProfileChange",description:"Submits changes to the current user\u2019s profile"}},7651407571:(z,A,e)=>{"use strict";e.d(A,{p:()=>n});var t=e(2140362605);const n=(0,t.Ay)("Upsert fetched ordered membership list for channel");n.meta={name:"createAction",key:"createActionupsertFetchedChannelOrderedMemberList",description:"Upsert fetched ordered membership list for channel"}},8188087967:(z,A,e)=>{"use strict";e.d(A,{GD:()=>v,Nd:()=>T});var t=e(3398586081),n=e(8352634987),s=e(6422693406),a=e(6533394955),c=e(3339229351),o=e(7058495549),r=e(8847766420),l=e(7651407571),_=e(1031947056),d=e(8760181906),i=e(4949104520),m=e(796111729);const h=1e4,v=(0,t.A)(()=>new n.Ay({storeKey:"membershipOrdered",fetch:(p,g)=>s.S.all(g.map(E=>(0,a.dispatchForTeamId)(p,I({channelId:E,count:c.Ql})))),isEnabled:()=>!0,metricsName:"member-list"})),y=(0,_.Ay)("marks objects as stale via CFM for Membership List",function(p,g){let{teamId:E,channelId:f}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};v().markObjectsAsStale(E,[f])});y.meta={name:"createThunk",key:"createThunkmarkObjectsAsStale",description:"marks objects as stale via CFM for Membership List"};const T=(0,d.A)(y,(0,i.A)(h,0,.5)),I=(0,_.Ay)("Fetches top members for the channel",function(p,g){let{channelId:E,count:f}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return(0,o.ds)(p,g,E,f).then(O=>{const C=(0,r.ZT)(g());if(!C){(0,m.Wo)().info("MOS","No teamId found");return}return v().markObjectsAsFresh(C,[E]),p((0,l.p)({channelId:E,memberList:O}))})});I.meta={name:"createThunk",key:"createThunkfetchAndUpsertFirstNMembersForChannel",description:"Fetches top members for the channel"}},1794107122:(z,A,e)=>{"use strict";e.d(A,{$:()=>c});var t=e(9829579108),n=e(8847766420),s=e(8188087967),a=e(5751973043);const c=(0,t.Ay)((o,r)=>{const l=(0,n.ZT)(o);return l&&(0,s.GD)().maybeRefetch(l,r),o&&o.membershipOrdered&&o.membershipOrdered[r]?o.membershipOrdered[r]:a.Ml});c.meta={name:"createSelector",key:"createSelectorgetMemberListForChannel",description:(o,r)=>{const l=(0,n.ZT)(o);return l&&(0,s.GD)().maybeRefetch(l,r),o&&o.membershipOrdered&&o.membershipOrdered[r]?o.membershipOrdered[r]:a.Ml}}},6562711329:(z,A,e)=>{"use strict";e.d(A,{z:()=>h});var t=e(6422693406),n=e(7823346015),s=e(8403493408),a=e(1031947056),c=e(1407713935),o=e(8798294025),r=e(6533394955),l=e(5795074931),_=e(8847766420),d=e(9101533895),i=e(3730613858),m=e(2480881364);const h=(0,a.Ay)("Gets the channel membership for a set of users and returns a promise when the store is updated accordingly",function(v,y){let{channelId:T,userIds:I}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const p=y(),[g,E]=(0,n.A)(I,C=>(0,i.wr)(p,T,C)),f=(0,d.OL)(p,T);if((0,c.LI)(f)){const C=(0,o.e)(f),M=(0,l.WR)(p);(0,s.A)(E,C,M),I!=null&&I.includes(C)&&g.push(C),I!=null&&I.includes(M)&&g.push(M)}const O={};return g.forEach(C=>{O[C]=(0,i.Ql)(p,T,C)}),E.length?(0,r.dispatchForTeamId)((0,_.ZT)(p),(0,m.R)({channelId:T,userIds:E})).then(C=>C&&C.payload&&C.payload.membershipInfo?{membershipInfo:{...C.payload.membershipInfo,...O}}:{membershipInfo:O}):t.S.resolve({membershipInfo:O})});h.meta={name:"createThunk",key:"createThunkgetChannelMembershipInfoForUsers",description:"Gets the channel membership for a set of users and returns a promise when the store is updated accordingly"}},3051870320:(z,A,e)=>{"use strict";e.d(A,{m:()=>n});var t=e(2140362605);const n=(0,t.Ay)("Updates latest message activity for a specified type");n.meta={name:"createAction",key:"createActionupdateMessageActivity",description:"Updates latest message activity for a specified type"}},5345057011:(z,A,e)=>{"use strict";e.d(A,{T:()=>n,s:()=>s});var t=e(2140362605);const n=(0,t.Ay)("Add a placeholder to the store");n.meta={name:"createAction",key:"createActionaddPlaceholder",description:"Add a placeholder to the store"};const s=(0,t.Ay)("Remove a placeholder from the store by client_msg_id");s.meta={name:"createAction",key:"createActionremovePlaceholder",description:"Remove a placeholder from the store by client_msg_id"}},6445408916:(z,A,e)=>{"use strict";e.d(A,{A:()=>n});var t=e(9829579108);const n=(0,t.Ay)(s=>s==null?void 0:s.messagePlaceholders);n.meta={name:"createSelector",key:"createSelectorgetAllPlaceholders",description:s=>s==null?void 0:s.messagePlaceholders}},5774398667:(z,A,e)=>{"use strict";e.d(A,{I:()=>s});var t=e(9829579108),n=e(6445408916);const s=(0,t.Ay)((a,c)=>{var o;return(o=(0,n.A)(a))===null||o===void 0?void 0:o[c]});s.meta={name:"createSelector",key:"createSelectorgetPlaceholderByClientMsgId",description:(a,c)=>{var o;return(o=(0,n.A)(a))===null||o===void 0?void 0:o[c]}}},6347367879:(z,A,e)=>{"use strict";e.d(A,{o:()=>n});var t=e(2140362605);const n=(0,t.Ay)("Start delete animation for a message");n.meta={name:"createAction",key:"createActionanimateDeleteMessage",description:"Start delete animation for a message"}},1508337910:(z,A,e)=>{"use strict";e.d(A,{h:()=>c});var t=e(9829579108),n=e(5751973043);const s=(0,t.Ay)(r=>r==null?void 0:r.messagesMeta);s.meta={name:"createSelector",key:"createSelectorgetMessagesMetaState",description:r=>r==null?void 0:r.messagesMeta};var a;const c=(0,t.Ay)((r,l)=>{let{channelId:_,ts:d}=l;var i,m;return(a=(i=s(r))===null||i===void 0||(m=i[_])===null||m===void 0?void 0:m[d])!==null&&a!==void 0?a:n.t0});var o;c.meta={name:"createSelector",key:"createSelectorgetMessageMetaData",description:(r,l)=>{let{channelId:_,ts:d}=l;var i,m;return(o=(i=s(r))===null||i===void 0||(m=i[_])===null||m===void 0?void 0:m[d])!==null&&o!==void 0?o:n.t0}}},3521202413:(z,A,e)=>{"use strict";e.d(A,{j:()=>p});var t=e(1031947056),n=e(7606781622),s=e(9101533895),a=e(8289365785),c=e(8726613433),o=e(8233775522),r=e(6347367879),l=e(9121476043),_=e(9629572172),d=e(4096483543),i=e(3110884894);const m=(0,t.Ay)("Checks if the message is in an active view before doing the animation",function(g,E){let{channelId:f,ts:O,threadTs:C}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},M=arguments.length>3?arguments[3]:void 0;const D=E(),{getViewSet:P}=M(_.U),k=!(0,d.A)()||(0,c.T2)(D),x=(0,o.ko)(D)&&k,F=(0,c.Qm)(D);var W;const{primary:Y,secondary:S}=(W=P(D))!==null&&W!==void 0?W:{},L=Y==null?void 0:Y.id,w=S==null?void 0:S.id,J=u(()=>g((0,r.o)({channelId:f,ts:O})),"doAnimation");if(x){if(C&&(w==="convo"||w==="thread")&&(0,a.A)(F)===(0,i.Iu)(f,C)){J();return}if(L===f){J();return}}g((0,l.A)({channelId:f,ts:O,threadTs:C}))});m.meta={name:"createThunk",key:"createThunkmaybeAnimateDeleteMessage",description:"Checks if the message is in an active view before doing the animation"};const h=m;var v=e(1484767411),y=e(2986581466),T=e(1508337910),I=e(796111729);const p=(0,t.Ay)("Delete a message by channel ID and timestamp",function(g,E){let{deleted_ts:f,channel:O,_from_evt_log:C,previous_message:M}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var D;const P=E(),k=(0,I.Ay)({state:P});if(!f){k.error("Error in messageDeleted: no deleted_ts");return}const x=(0,s.gT)(P,O)&&(0,s.OL)(P,O);if(!x){k.error(`Unknown channelId: ${O}`);return}if((D=(0,T.h)(P,{channelId:O,ts:f}))===null||D===void 0?void 0:D.isDeleting)return;(0,y.yj)(x,{deleted_ts:f});const W=!1,S=(0,n.Ld)(P,O,f,W)||M;g(S?h({channelId:O,ts:f,threadTs:S.thread_ts,fromEvtLog:C}):(0,l.A)({channelId:O,ts:f})),g((0,v.o)({channelId:O,ts:f}))});p.meta={name:"createThunk",key:"createThunksetMessageDeleted",description:"Delete a message by channel ID and timestamp"}},5688490863:(z,A,e)=>{"use strict";e.d(A,{J_:()=>l,PB:()=>d,Up:()=>c,Zs:()=>r,iN:()=>a,m3:()=>o,oh:()=>m,qA:()=>i,qj:()=>h,yw:()=>_});var t=e(5751973043),n=e(9829579108);const s=(0,n.Ay)(v=>v.modernSelling.salesListViews);s.meta={name:"createSelector",key:"createSelectorgetSalesListViews",description:v=>v.modernSelling.salesListViews};const a=(0,n.Ay)(v=>s(v).listViewActiveObjectOption);a.meta={name:"createSelector",key:"createSelectorgetListViewActiveObjectOption",description:v=>s(v).listViewActiveObjectOption};const c=(0,n.Ay)(v=>{var y;return(y=s(v))===null||y===void 0?void 0:y.listViewSearchResults});c.meta={name:"createSelector",key:"createSelectorgetListViewSearchResults",description:v=>{var y;return(y=s(v))===null||y===void 0?void 0:y.listViewSearchResults}};const o=(0,n.Ay)((v,y)=>{var T;const I=(T=s(v))===null||T===void 0?void 0:T.listViewIdSearchResultsMap;return(I==null?void 0:I[y])||t.t0});o.meta={name:"createSelector",key:"createSelectorgetListViewObjectMapByOrg",description:(v,y)=>{var T;const I=(T=s(v))===null||T===void 0?void 0:T.listViewIdSearchResultsMap;return(I==null?void 0:I[y])||t.t0}};const r=(0,n.Ay)((v,y,T)=>o(v,y)[T]||t.Ml);r.meta={name:"createSelector",key:"createSelectorgetListViewIdsByOrgAndObject",description:(v,y,T)=>o(v,y)[T]||t.Ml};const l=(0,n.Ay)(v=>{var y;return((y=s(v))===null||y===void 0?void 0:y.listViewActiveSearchResultIds)||t.Ml});l.meta={name:"createSelector",key:"createSelectorgetListViewActiveSearchResultIds",description:v=>{var y;return((y=s(v))===null||y===void 0?void 0:y.listViewActiveSearchResultIds)||t.Ml}};const _=(0,n.Ay)(v=>{var y;return(y=s(v))===null||y===void 0?void 0:y.listViewActiveSearchQuery});_.meta={name:"createSelector",key:"createSelectorgetListViewActiveSearchQuery",description:v=>{var y;return(y=s(v))===null||y===void 0?void 0:y.listViewActiveSearchQuery}};const d=(0,n.Ay)(v=>s(v).shouldShowOpportunitiesListViewBanner);d.meta={name:"createSelector",key:"createSelectorgetShouldShowOpportunitiesListViewBanner",description:v=>s(v).shouldShowOpportunitiesListViewBanner};const i=(0,n.Ay)(v=>{var y;return((y=s(v))===null||y===void 0?void 0:y.adminSuggestedListViews)||t.Ml});i.meta={name:"createSelector",key:"createSelectorgetAdminSuggestedListViewsForSidebar",description:v=>{var y;return((y=s(v))===null||y===void 0?void 0:y.adminSuggestedListViews)||t.Ml}};const m=(0,n.Ay)(v=>{var y;return(y=s(v))===null||y===void 0?void 0:y.areAdminSuggestedListViewsForSidebarFresh});m.meta={name:"createSelector",key:"createSelectorgetAreAdminSuggestedListViewsForSidebarFresh",description:v=>{var y;return(y=s(v))===null||y===void 0?void 0:y.areAdminSuggestedListViewsForSidebarFresh}};const h=(0,n.Ay)(v=>{var y;return(y=s(v))===null||y===void 0?void 0:y.adminConfiguredObjects});h.meta={name:"createSelector",key:"createSelectorgetAdminConfiguredObjects",description:v=>{var y;return(y=s(v))===null||y===void 0?void 0:y.adminConfiguredObjects}}},8149648525:(z,A,e)=>{"use strict";e.d(A,{b:()=>l});var t=e(5104468117),n=e(8956161330),s=e(1031947056),a=e(7146087658),c=e(5688490863),o=e(1670025826),r=e(146149780);const l=(0,s.Ay)("Search list views by query",(_,d,i)=>{let{isFullSearch:m=!1,objectType:h,query:v,salesforceOrgId:y}=i;const T=d(),I=m?t.Iq:t.TD,p=(0,n.Qb)(T);let g;return h?g=[h]:g=(0,c.qj)(T).map(f=>f.sobject_api_name),_((0,o.R)({limit:I,listviewObjectScopes:g,query:v,sobjects:[{sobjectApiName:"ListView",fields:["Name","LastViewedDate","SobjectType"]}],salesforceOrgId:y,reason:"list_view_search"})).then(E=>{let{records:f}=E;const O=f.map(M=>({id:M.value,label:M.label,lastViewedDate:p?void 0:M.extras.LastViewedDate,objectType:M.extras.SobjectType,salesforceOrgId:y})),C=_((0,r.x)({listViews:O,salesforceOrgId:y}));return m&&_((0,a.hA)(C)),O})});l.meta={name:"createThunk",key:"createThunksearchListViews",description:"Search list views by query"}},146149780:(z,A,e)=>{"use strict";e.d(A,{x:()=>s});var t=e(1031947056),n=e(7146087658);const s=(0,t.Ay)("Upsert list views fetched by search or other API",(a,c,o)=>{let{listViews:r,salesforceOrgId:l}=o;const _=[],d={},i={};return r.forEach(m=>{const h=m.id,v=m.objectType;d[h]={id:h,label:m.label,lastViewedDate:m.lastViewedDate,objectType:v,salesforceOrgId:l},i[v]=i[v]||[],i[v].push(h),_.push(h)}),a((0,n.TO)(d)),a((0,n.KT)({salesforceOrgId:l,listViewObjMap:i})),_});s.meta={name:"createThunk",key:"createThunkupsertFetchedListViews",description:"Upsert list views fetched by search or other API"}},2413251042:(z,A,e)=>{"use strict";e.d(A,{p$:()=>n,rB:()=>s,x8:()=>a});var t=e(2140362605);const n=(0,t.Ay)("Set whether inverted sidebar was enabled before starting BBM");n.meta={name:"createAction",key:"createActionsetInvertedSidebarInternal",description:"Set whether inverted sidebar was enabled before starting BBM"};const s=(0,t.Ay)("Set whether peeks were enabled on mouse enter before starting BBM");s.meta={name:"createAction",key:"createActionsetPeeksEnabledOnMouseEnterInternal",description:"Set whether peeks were enabled on mouse enter before starting BBM"};const a=(0,t.Ay)("Set what zoom value was set in the client before starting BBM");a.meta={name:"createAction",key:"createActionsetZoomInternal",description:"Set what zoom value was set in the client before starting BBM"}},6303140164:(z,A,e)=>{"use strict";e.d(A,{UY:()=>s,Vb:()=>t,_J:()=>n});const t="slack-inverted-sidebar-initial-setting",n="slack-peeks-enabled-on-mouse-enter-initial-setting",s="slack-zoom-initial-setting"},1838435986:(z,A,e)=>{"use strict";e.d(A,{A:()=>_});var t=e(4423055085),n=e(1185969935),s=e(2140362605);const a=(0,s.Ay)("NOOP");a.meta={name:"createAction",key:"createActionnoopAction",description:"NOOP"};var c=e(6533394955),o=e(7893624209);const r=0,_=(0,n.Ay)({},r,{storeKey:"noop",persistenceEnabled:!1}).on(a,d=>d+1);(0,t.ul)("dispatchNoop",()=>{(0,c.dispatchForTeamId)((0,o.oI)(),a())})},4309043566:(z,A,e)=>{"use strict";e.d(A,{l:()=>n});var t=e(2140362605);const n=(0,t.Ay)("Relay observed overlays state from OverlaysContextProvider to Redux");n.meta={name:"createAction",key:"createActionrelayOverlays",description:"Relay observed overlays state from OverlaysContextProvider to Redux"}},3180420025:(z,A,e)=>{"use strict";e.d(A,{y:()=>o});var t=e(2384831516),n=e(4309043566),s=e(5751973043);const a=s.t0,c={persistenceEnabled:!1,storeKey:"overlays"},o=(0,t.vy)({},a,c).on(n.l,(r,l)=>l)},983004675:(z,A,e)=>{"use strict";e.d(A,{OI:()=>o,cg:()=>s,kK:()=>n,ot:()=>c,us:()=>a});var t=e(2140362605);const n=(0,t.Ay)("Sets the current loading state for a channel");n.meta={name:"createAction",key:"createActionsetLoadingState",description:"Sets the current loading state for a channel"};const s=(0,t.Ay)("Adds pinned item identifiers for files and messages to list of pinned items");s.meta={name:"createAction",key:"createActionaddPinnedItems",description:"Adds pinned item identifiers for files and messages to list of pinned items"};const a=(0,t.Ay)("Remove an item from the pinned items list for a channel");a.meta={name:"createAction",key:"createActionremovePinnedItem",description:"Remove an item from the pinned items list for a channel"};const c=(0,t.Ay)("Clears the existing pinned items for a channel and sets the loading state");c.meta={name:"createAction",key:"createActionclearPinnedItems",description:"Clears the existing pinned items for a channel and sets the loading state"};const o=(0,t.Ay)("Sets the scrollTop value of the pins popover so that it can be opened to the same spot again");o.meta={name:"createAction",key:"createActionsetPopoverScrollTop",description:"Sets the scrollTop value of the pins popover so that it can be opened to the same spot again"}},4352409775:(z,A,e)=>{"use strict";e.d(A,{G:()=>r});var t=e(3398586081),n=e(6422693406),s=e(8352634987),a=e(6533394955),c=e(983004675),o=e(6701536972);const r=(0,t.A)(()=>new s.Ay({storeKey:"pins",fetch:(l,_)=>n.S.map(_,d=>((0,a.dispatchForTeamId)(l,(0,c.ot)({channelId:d})),(0,a.dispatchForTeamId)(l,(0,o.b)({channelId:d})))),isEnabled:()=>!0,metricsName:"pins"}))},6247263305:(z,A,e)=>{"use strict";e.d(A,{R:()=>t,b:()=>n});const t={FILE:"file",FILE_COMMENT:"file_comment",MESSAGE:"message"},n={NOT_LOADED:void 0,LOADING:"loading",LOADED:"loaded"}},7158699554:(z,A,e)=>{"use strict";e.d(A,{$U:()=>d,A_:()=>i,Wt:()=>m,YG:()=>v,c7:()=>h,jR:()=>_});var t=e(2384831516),n=e(8847766420),s=e(7606781622),a=e(6457401668),c=e(937317117),o=e(4352409775),r=e(6247263305),l=e(4813703725);const _=(0,t.Mz)(function(T,I){let{refetchIfNeeded:p=!0}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(p){const g=(0,n.ZT)(T);(0,o.G)().maybeRefetch(g,I)}return T&&T.pins&&T.pins.pinsByChannel[I]});_.meta={name:"createSelector",key:"createSelectorgetPinnedItemsForChannel",description:function(T,I){let{refetchIfNeeded:p=!0}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(p){const g=(0,n.ZT)(T);(0,o.G)().maybeRefetch(g,I)}return T&&T.pins&&T.pins.pinsByChannel[I]}};const d=(0,t.Mz)((T,I)=>{var p,g;return T&&T.pins&&T.pins.pinsByChannel[I]?(p=T.pins.pinsByChannel)===null||p===void 0||(g=p[I])===null||g===void 0?void 0:g.length:0});d.meta={name:"createSelector",key:"createSelectorgetPinCountForChannel",description:(T,I)=>{var p,g;return T&&T.pins&&T.pins.pinsByChannel[I]?(p=T.pins.pinsByChannel)===null||p===void 0||(g=p[I])===null||g===void 0?void 0:g.length:0}};const i=(0,t.Mz)((T,I)=>T&&T.pins&&T.pins.loadingStateByChannel[I]);i.meta={name:"createSelector",key:"createSelectorgetLoadingState",description:(T,I)=>T&&T.pins&&T.pins.loadingStateByChannel[I]};const m=(0,t.Mz)((T,I)=>{let{channelId:p,ts:g}=I;const E=!1,f=(0,s.Ld)(T,p,g,E);if(!f)return!1;if((0,a.m)(f)&&f.comment){const O=(0,c.yd)(T,f.file,f.comment.id);return O?!!(O.pinned_to&&O.pinned_to.includes(p)):!1}return!!(f.pinned_to&&f.pinned_to.includes(p))});m.meta={name:"createSelector",key:"createSelectorisMessagePinned",description:(T,I)=>{let{channelId:p,ts:g}=I;const E=!1,f=(0,s.Ld)(T,p,g,E);if(!f)return!1;if((0,a.m)(f)&&f.comment){const O=(0,c.yd)(T,f.file,f.comment.id);return O?!!(O.pinned_to&&O.pinned_to.includes(p)):!1}return!!(f.pinned_to&&f.pinned_to.includes(p))}};const h=u((T,I)=>{switch(I.type){case r.R.MESSAGE:return{...(0,s.Ld)(T,I.channel,I.ts),type:r.R.MESSAGE};case r.R.FILE:return{...(0,c.Lp)(T,I.id),type:r.R.FILE};case r.R.FILE_COMMENT:return{...(0,c.yd)(T,I.fileId,I.id),fileId:I.fileId,type:r.R.FILE_COMMENT};default:return{}}},"getItemWithPinIdentifier"),v=(0,l.eI)((T,I)=>{const p=_(T,I);return p?p.map(g=>h(T,g)):[]}),y=(0,t.Mz)(T=>T&&T.pins&&T.pins.popoverScrollTop);y.meta={name:"createSelector",key:"createSelectorgetPopoverScrollTop",description:T=>T&&T.pins&&T.pins.popoverScrollTop}},6701536972:(z,A,e)=>{"use strict";e.d(A,{b:()=>v});var t=e(796111729),n=e(9109082163),s=e(2947836378),a=e(1031947056),c=e(8847766420),o=e(6403218297),r=e(2416684575),l=e(10127715),_=e(6247263305),d=e(983004675),i=e(1581380967),m=e(4352409775),h=e(5792544570);const v=(0,a.Ay)("Fetch pinned items list for channel",(y,T,I)=>{const p=I.channelId;return y((0,d.kK)({loadingState:_.b.LOADING,channelId:p})),y((0,n.xs)({reason:"fetchPinsList",...I})).then(function(){let{items:g}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const E=g.filter(C=>C.type.includes(_.R.FILE)).map(C=>{if(C.type===_.R.FILE_COMMENT){const{comment:M,file:D,...P}=C,k=(0,o.A)(M,D);return{...P,file:k}}return C}),f=g.filter(C=>C.type===_.R.MESSAGE);if(E.length){const C=E.filter(D=>D.type!==_.R.FILE_COMMENT),M=E.filter(D=>D.type===_.R.FILE_COMMENT);y((0,s.b)({files:C.map(D=>D.file)})),y((0,s.b)({files:M.map(D=>D.file)}))}if(f.length){const C=f.map(D=>{let{message:P}=D;return P}),M=y((0,r.A)({imsgs:C,channelId:p}));y((0,l.Kc)(M))}y((0,i.K)({channelId:p,count:g.length})),y((0,d.cg)({items:g.map(h.B),channelId:p})),y((0,d.kK)({loadingState:_.b.LOADED,channelId:p}));const O=(0,c.ZT)(T());(0,m.G)().markObjectsAsFresh(O,[p])}).catch(g=>{throw y((0,d.kK)({loadingState:_.b.NOT_LOADED,channelId:p})),(0,t.Ay)({getState:T}).error(`Error in fetchPinsList: ${JSON.stringify(g)}`),g})});v.meta={name:"createThunk",key:"createThunkfetchPinsList",description:"Fetch pinned items list for channel"}},1581380967:(z,A,e)=>{"use strict";e.d(A,{K:()=>l});var t=e(1031947056),n=e(9606603587),s=e(9101533895),a=e(796111729),c=e(9676369204),o=e(6247263305),r=e(7158699554);const l=(0,t.Ay)("update a pin count for a channel",(_,d,i)=>{let{channelId:m,count:h,forceUpdate:v=!1}=i;const y=d(),T={...(0,s.OL)(y,m)},I=(0,r.jR)(y,m,{refetchIfNeeded:!1}),p=(0,r.A_)(y,m),g=!v&&p===o.b.LOADED?I==null?void 0:I.length:h;if(g===T.pinned_items_count)return;(0,a.Ay)({state:y}).info("PINS",`Pins count updated for channel ${m}: ${g}`);const E={...T,pinned_items_count:g};_((0,n.B)({channel:E})),(0,c.L6)(T,h)});l.meta={name:"createThunk",key:"createThunkupdatePinCount",description:"update a pin count for a channel"}},5792544570:(z,A,e)=>{"use strict";e.d(A,{B:()=>n});var t=e(6247263305);const n=u(s=>{switch(s.type){case t.R.MESSAGE:var a;return{type:s.type,channel:s.channel,ts:(a=s.message)===null||a===void 0?void 0:a.ts};case t.R.FILE:var c,o;return{type:s.type,id:s.file?s.file.id:(c=s.files)===null||c===void 0||(o=c[0])===null||o===void 0?void 0:o.id};case t.R.FILE_COMMENT:var r;return{type:s.type,id:s.comment.id,fileId:(r=s.file)===null||r===void 0?void 0:r.id};default:return{}}},"formatPinFromAPI")},4079686795:(z,A,e)=>{"use strict";e.d(A,{j:()=>s,z:()=>n});var t=e(2140362605);const n=(0,t.Ay)("Set a channel pref");n.meta={name:"createAction",key:"createActionsetChannelPref",description:"Set a channel pref"};const s=(0,t.Ay)("Bulk set channel prefs");s.meta={name:"createAction",key:"createActionbulkSetChannelsPrefs",description:"Bulk set channel prefs"}},8163773562:(z,A,e)=>{"use strict";e.d(A,{d:()=>n});var t=e(9829579108);const n=(0,t.Ay)((s,a,c)=>{var o,r,l;return s==null||(o=s.prefs)===null||o===void 0||(r=o.channel)===null||r===void 0||(l=r[a])===null||l===void 0?void 0:l[c]});n.meta={name:"createSelector",key:"createSelectorgetChannelPref",description:(s,a,c)=>{var o,r,l;return s==null||(o=s.prefs)===null||o===void 0||(r=o.channel)===null||r===void 0||(l=r[a])===null||l===void 0?void 0:l[c]}}},1523378513:(z,A,e)=>{"use strict";e.d(A,{E:()=>l,d:()=>r});var t=e(9706240641),n=e.n(t),s=e(1031947056),a=e(4446301238),c=e(8243083011),o=e(4079686795);const r=(0,s.Ay)("Fetch and upsert channel pref data",function(){var _=(0,t.coroutine)(function*(d,i,m){let{channelId:h,prefName:v,reason:y}=m;if(v==="enable_at_channel"&&!(0,c.q)(i(),h))return;const T=yield d((0,a.d9)({channelId:h,prefName:v,reason:y||"fetch-channel-pref"}));d((0,o.z)({channelId:h,pref:v,value:T==null?void 0:T.pref_value}))});return function(d,i,m){return _.apply(this,arguments)}}());r.meta={name:"createThunk",key:"createThunkgetChannelPref",description:"Fetch and upsert channel pref data"};const l=(0,s.Ay)("Set and upsert channel pref data",function(){var _=(0,t.coroutine)(function*(d,i,m){let{channelId:h,newPrefs:v,reason:y}=m;const T=yield d((0,a.E9)({channelId:h,newPrefs:v,reason:y||"set-channel-prefs"})),I={[h]:T.prefs};d((0,o.j)(I))});return function(d,i,m){return _.apply(this,arguments)}}());l.meta={name:"createThunk",key:"createThunksetChannelPrefs",description:"Set and upsert channel pref data"}},7665060966:(z,A,e)=>{"use strict";e.d(A,{A:()=>a});var t=e(9829579108),n=e(2047021170);const s=(0,t.Ay)(c=>(0,n.ty)(c,"messages_theme")==="dense"?"dense":"light");s.meta={name:"createSelector",key:"createSelectorgetUserMessagesTheme",description:c=>(0,n.ty)(c,"messages_theme")==="dense"?"dense":"light"};const a=s},1317368584:(z,A,e)=>{"use strict";e.d(A,{A:()=>o});var t=e(9829579108),n=e(9599231336),s=e(2047021170),a=e(7665060966);const c=(0,t.Ay)(r=>!(0,n.P)(r)&&!!(0,s.ty)(r,"jumbomoji")&&(0,a.A)(r)!=="dense");c.meta={name:"createSelector",key:"createSelectorshouldDisplayJumbomoji",description:r=>!(0,n.P)(r)&&!!(0,s.ty)(r,"jumbomoji")&&(0,a.A)(r)!=="dense"};const o=c},5512605238:(z,A,e)=>{"use strict";e.d(A,{F:()=>n});var t=e(9829579108);const n=(0,t.Ay)(s=>s&&s.promo&&s.promo.showTrialStartedCelebration);n.meta={name:"createSelector",key:"createSelectorgetShowTrialStartedCelebration",description:s=>s&&s.promo&&s.promo.showTrialStartedCelebration}},1384076438:(z,A,e)=>{"use strict";e.d(A,{A:()=>m});var t=e(6422693406),n=e(1031947056),s=e(8760181906),a=e(2607644860),c=e(1939990292),o=e(3677514771),r=e(9869343146),l=e(6839188756),_=e(796111729);const d=(0,n.Ay)("Fetch promo campaign eligibility",(v,y,T)=>{let{campaignType:I,campaignSubType:p,context:g,reason:E}=T;const f=(0,o.H7)(y());return(0,l.tc)(f)?(v((0,c.zg)({campaignType:I,campaignSubType:p,isFetching:!0})),v((0,r.V)({campaignType:I,campaignSubType:p,context:g,reason:E})).then(C=>{const{isEligible:M,discountPercent:D,expirationTimestamp:P,discountDuration:k}=C;return v((0,c.xt)({campaignType:I,campaignSubType:p,isEligible:M,discountPercent:D,expirationTimestamp:P,discountDuration:k})),v((0,c.zg)({campaignType:I,campaignSubType:p,isFetching:!1})),C}).catch(C=>((0,_.Ay)({state:y()}).error(C.message),v((0,c.zg)({campaignType:I,campaignSubType:p,isFetching:!1})),C))):t.S.resolve({isEligible:!1})});d.meta={name:"createThunk",key:"createThunkfetchPromoEligibility",description:"Fetch promo campaign eligibility"};const m=(0,s.A)(d,a.C,!0,["context","reason"]),h={fetchPromoEligibility:d}},2607644860:(z,A,e)=>{"use strict";e.d(A,{C:()=>t,y:()=>n});const t=3e5,n={shareChannelPaywall:"share_channel_paywall",sharedChannelsIntro:"shared_channels_intro",trialStart:"trial_start",limitedHistoryForeword:"limited_history_foreword",slackConnectHub:"slack_connect_hub",slackConnectHubHeader:"slack_connect_hub_header",slackConnectDMBanner:"slack_connect_dm_banner",addMoreItemsLink:"add_more_items_link",connectionsChannelSection:"connections_channel_section",paidBenefitsPage:"paid_benefits_page",adminBillingOverview:"admin_billing_overview",channelInviteModal:"channel_invite_modal",huddleChannelJoinMsgText:"huddle_channel_join_msg_text",fileStorageWarning:"file_storage_warning",huddleInviteModal:"huddle_invite_modal",canvasPageSyntheticView:"canvas_page_synthetic_view",workflowBuilderFreemiumBanner:"workflow_builder_freemium_banner",workflowPublishButton:"workflow_publish_button",workflowBuilderSidebar:"workflow_builder_sidebar"}},6822097892:(z,A,e)=>{"use strict";e.d(A,{A:()=>h});var t=e(9706240641),n=e.n(t),s=e(7307560139),a=e(2346425530),c=e(9629572172),o=e(3193155968),r=e(6078549397),l=e(5033667e3),_=e(7429662208),d=e(9108490430),i=e(1031947056);const m=(0,i.Ay)("Open a document on a specific version",function(){var v=(0,t.coroutine)(function*(y,T,I,p){const{fileId:g,windowId:E,version:f,isFromCloseActivityHistory:O,replaceHistoryState:C}=I,M=T(),{versionId:D,sequence:P}={...f};if(!g)return;const{isMainWindow:k,closeView:x,getViewSet:F}=p(c.U),W=(0,_.e6)(M),Y=(0,a.xu)(M,E),{versionId:S,sequence:L}={...Y},w=O?void 0:D||S,J=O?void 0:P||L;if(O||y((0,s.fw)({windowId:E,versionId:D||S})),C){const G=k?F(M):(0,_.hZ)(M,{windowId:E});if(G){const X=G[o.mq.Primary];if(X){const te={...G,[o.mq.Primary]:{...G[o.mq.Primary],params:{...X.params,versionId:w,sequence:J}}};y(k?(0,l.A)({windowId:o.N2,tab:W,viewSet:te}):(0,l.A)({windowId:E.toString(),viewSet:te}))}}}else{const G={id:(0,r.Lo)({id:g}),versionId:w,sequence:J,preserveExistingSecondaryView:!O};y(k?(0,d.IZ)({windowId:o.N2,tab:W,container:o.mq.Primary,params:G}):(0,d.IZ)({windowId:E.toString(),container:o.mq.Primary,params:G})),O&&x(o.mq.Secondary)}O&&y((0,s.NA)({windowId:E}))});return function(y,T,I,p){return v.apply(this,arguments)}}());m.meta={name:"createThunk",key:"createThunkopenDocVersion",description:"Open a document on a specific version"};const h=m},7115106069:(z,A,e)=>{"use strict";e.d(A,{Bi:()=>s,d0:()=>c,oj:()=>a});var t=e(9829579108);const n=(0,t.Ay)(o=>o==null?void 0:o.quipDocEmbeds);n.meta={name:"createSelector",key:"createSelectorgetQuipDocEmbedsStoreState",description:o=>o==null?void 0:o.quipDocEmbeds};const s=(0,t.Ay)(o=>{const r=n(o);return r&&Object.keys(r).length>0});s.meta={name:"createSelector",key:"createSelectorisSpaceOpen",description:o=>{const r=n(o);return r&&Object.keys(r).length>0}};const a=(0,t.Ay)(o=>{const r=n(o);return Object.keys(r)});a.meta={name:"createSelector",key:"createSelectorgetOpenSpaces",description:o=>{const r=n(o);return Object.keys(r)}};const c=(0,t.Ay)((o,r)=>{const l=n(o);var _;return((_=l[r])!==null&&_!==void 0?_:0)>0});c.meta={name:"createSelector",key:"createSelectorisSpaceOpenForThreadId",description:(o,r)=>{const l=n(o);var _;return((_=l[r])!==null&&_!==void 0?_:0)>0}}},2494018541:(z,A,e)=>{"use strict";e.d(A,{O:()=>n});var t=e(2140362605);const n=(0,t.Ay)("Store the corresponding file id for temp quip id");n.meta={name:"createAction",key:"createActionsetFileIdForTempId",description:"Store the corresponding file id for temp quip id"}},4368281601:(z,A,e)=>{"use strict";e.d(A,{N:()=>l,al:()=>o,jw:()=>c,k:()=>n,uo:()=>s,yw:()=>a,z5:()=>r});var t=e(2140362605);const n=(0,t.Ay)("Store/replace client.counts for this channel");n.meta={name:"createAction",key:"createActionsetQuipUnreadCount",description:"Store/replace client.counts for this channel"};const s=(0,t.Ay)("increment mention count for the channel");s.meta={name:"createAction",key:"createActionincQuipUnreadCountForChannel",description:"increment mention count for the channel"};const a=(0,t.Ay)("decrement mention count for the channel");a.meta={name:"createAction",key:"createActiondecQuipUnreadCountForChannel",description:"decrement mention count for the channel"};const c=(0,t.Ay)("Add canvases to hide on undo");c.meta={name:"createAction",key:"createActionsetCanvasesToHideOnClearAll",description:"Add canvases to hide on undo"};const o=(0,t.Ay)("clear new mention flag for the channel");o.meta={name:"createAction",key:"createActionclearNewMentionFlagForChannel",description:"clear new mention flag for the channel"};const r=(0,t.Ay)("Set the list of enterprise file channels (canvases) to exclude from total counts");r.meta={name:"createAction",key:"createActionsetCanvasesToSuppress",description:"Set the list of enterprise file channels (canvases) to exclude from total counts"};const l=(0,t.Ay)("Set the last seen timestamp for a badged channel canvas animation");l.meta={name:"createAction",key:"createActionsetLastSeenChannelCanvasAnimationTimestamp",description:"Set the last seen timestamp for a badged channel canvas animation"}},8515087389:(z,A,e)=>{"use strict";e.d(A,{B:()=>s,I:()=>n});var t=e(9829579108);const n=(0,t.Ay)(a=>a.salesforceSearchRecords.records);n.meta={name:"createSelector",key:"createSelectorgetSalesforceRecords",description:a=>a.salesforceSearchRecords.records};const s=(0,t.Ay)(a=>a.salesforceSearchRecords.fullSearchActiveRecordIds);s.meta={name:"createSelector",key:"createSelectorgetFullSearchActiveRecordIds",description:a=>a.salesforceSearchRecords.fullSearchActiveRecordIds}},5446033290:(z,A,e)=>{"use strict";e.d(A,{b:()=>n,q:()=>s});var t=e(2140362605);const n=(0,t.Ay)("Set the last executed encoded search string");n.meta={name:"createAction",key:"createActionsetLastExecutedEncodedSearchString",description:"Set the last executed encoded search string"};const s=(0,t.Ay)("Clear the last executed encoded search string");s.meta={name:"createAction",key:"createActionclearLastExecutedEncodedSearchString",description:"Clear the last executed encoded search string"}},532953487:(z,A,e)=>{"use strict";e.d(A,{$:()=>s});var t=e(9829579108),n=e(304127728);const s=(0,t.Ay)(function(a){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:n.I;var o,r;return a==null||(o=a.searchHistory)===null||o===void 0||(r=o[c])===null||r===void 0?void 0:r.lastExecutedEncodedSearchString});s.meta={name:"createSelector",key:"createSelectorgetLastExecutedEncodedSearchString",description:function(a){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:n.I;var o,r;return a==null||(o=a.searchHistory)===null||o===void 0||(r=o[c])===null||r===void 0?void 0:r.lastExecutedEncodedSearchString}}},3653269953:(z,A,e)=>{"use strict";e.d(A,{A:()=>g});var t=e(1031947056),n=e(2036289572),s=e(1839426804),a=e(30533254),c=e(6249041335),o=e(6125148745),r=e(6313685253),l=e(9846149684),_=e(2414816894),d=e(1707481146),i=e(6106767915);function m(E){let{highlightWords:f,shouldRenderEmojiAsText:O,emojiNames:C,locale:M}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const D=(0,l.A)(E,{highlightWords:f,shouldRenderEmojiAsText:O,emojiNames:C,locale:M,useChannelTagging:!1});return(0,r.A)(D.contents,(P,k)=>{if(k.attributes&&k.attributes.slackmention){const x=k.attributes.slackmention.id;return(0,_.A)(x)?`${P}@${(0,i.A)(x)}`:(0,d.A)(x)?`${P}${k.attributes.slackmention.label}`:x.charAt(0)==="S"?`${P}<!subteam^${x}|${k.attributes.slackmention.label}>`:`${P}<@${x}>`}return k.insert&&k.insert.slackemoji?P+k.insert.slackemoji.text:P+k.insert},"")}u(m,"convertContentsStringForEncodedMembers");function h(E,f,O){let C=(0,c.A)(O);return C=m(C,{shouldRenderEmojiAsText:!0}),(0,o.O)(E,f,C)}u(h,"convertClientQueryToAPIQuery");var v=e(2354384409),y=e(304127728),T=e(352142497),I=e(4139359963);const p=(0,t.Ay)("Set the query in the request which is being edited",(E,f,O)=>{let{query:C,mode:M,module:D,page:P,encodedSearchString:k,preventQueryRewrite:x}=O;const F=f(),W=!!k,Y=(0,I.A)(F,{viewType:T.D.Search});E((0,n.p4)({windowId:y.I})),!W&&!Y&&E((0,s.Vx)({windowId:y.I})),E((0,s.Cr)({windowId:y.I})),E((0,s.Di)({windowId:y.I})),E((0,s.FS)({moduleType:"messages",loading:!0})),E((0,s.FS)({moduleType:"files",loading:!0})),E((0,s.FS)({moduleType:"canvases",loading:!0}));const S=(0,a.vA)(F,C);return E((0,n.c3)({queryFilter:S})),h(E,f,C).then(L=>(E((0,n.Rm)({query:L})),E((0,v.A)({query:L,fetchSuggestions:!0,mode:M,module:D,page:P,preventQueryRewrite:x}))))});p.meta={name:"createThunk",key:"createThunksetEditableRequestQueryThenRequest",description:"Set the query in the request which is being edited"};const g=p},2354384409:(z,A,e)=>{"use strict";e.d(A,{A:()=>p});var t=e(1031947056),n=e(6422693406),s=e(2036289572),a=e(197186845),c=e(2505585477),o=e(796111729),r=e(9046992894),l=e(9436609557),_=e(6601726845),d=e(5446033290),i=e(1839426804),m=e(832411022),h=e(304127728),v=e(5267010247),y=e(8822892075),T=e(5513050121);const I=(0,t.Ay)("Set a request from the editable request",(g,E,f)=>{let{query:O,fetchSuggestions:C=!0,module:M,mode:D,page:P,preventQueryRewrite:k=!1}=f;g((0,s.qo)({windowId:h.I}));const x=E(),F=O||(0,c.Uz)(x)||"",W=(0,o.Ay)({getState:E}),Y=(0,c.nI)(x);let S;if(M){W.info(r.Y,`Retrying previous search for ${M} module`);const w=(0,l.oL)(x,M)||{};S=g((0,a.u3)({page:P??w.page,module:M,reason:"search-retry-module",context:(0,T.Z_)(M)}))}else W.info(r.Y,"Starting new search"),g((0,s.p4)({windowId:h.I})),S=g((0,a.Ad)({query:F,reason:"search-new-query",fetchSuggestions:C,preventQueryRewrite:k}));const L=(0,_._t)(x);return L?(g((0,d.b)({value:L})),g((0,v.o)((0,y.oV)(L))),g((0,i.y8)({tab:M?m.Ai[M]:"all",position:0})),F&&g((0,a.Q3)({query:F,type:D||"unknown"})),Y&&g((0,s.aZ)({windowId:h.I})),S):n.S.reject(new Error("Error getting route param from search state"))});I.meta={name:"createThunk",key:"createThunksetRequestFromEditableRequest",description:"Set a request from the editable request"};const p=I},2169241232:(z,A,e)=>{"use strict";e.d(A,{_:()=>a});var t=e(1031947056),n=e(678604478),s=e(304127728);const a=(0,t.Ay)("Sets a new ID for the query session",c=>{c((0,n.Ko)({windowId:s.I}))});a.meta={name:"createThunk",key:"createThunkendQuerySession",description:"Sets a new ID for the query session"}},6189112794:(z,A,e)=>{"use strict";e.d(A,{u:()=>_});var t=e(1031947056),n=e(4761125736),s=e(1839426804),a=e(2169241232),c=e(678604478),o=e(304127728),r=e(796111729),l=e(9046992894);const _=(0,t.Ay)("Sets a new ID for the search and query sessions",(d,i)=>{const m=(0,r.Ay)({getState:i}),h=(0,n._Z)(i(),"search_sort_reset")==="treatment";d((0,a._)()),d((0,c.gA)({windowId:o.I})),d((0,c.Z8)({windowId:o.I})),d((0,s.bZ)({windowId:o.I})),d((0,s.pQ)({windowId:o.I})),h&&d((0,s.Dl)({windowId:o.I})),m.info(l.Y,"Ending search session")});_.meta={name:"createThunk",key:"createThunkendSearchSession",description:"Sets a new ID for the search and query sessions"}},2939274763:(z,A,e)=>{"use strict";e.d(A,{s:()=>C,w:()=>M});var t=e(1031947056),n=e(9436609557),s=e(7143409288),a=e(2864477491),c=e(796111729),o=e(9046992894),r=e(7435861102),l=e(3998401757),_=e(2036289572),d=e(1839426804),i=e(6189112794),m=e(2169241232),h=e(6729174604),v=e(832411022),y=e(304127728),T=e(5446033290);const I=(0,t.Ay)("Clear query session data on session expiration",D=>{D((0,d.LM)({querySessionTimeoutId:null})),D((0,m._)()),D((0,_.Pz)({windowId:y.I})),D((0,h.o2)({inputId:v.Jx.OMNISWITCHER})),D((0,d.Vx)({windowId:y.I}))});I.meta={name:"createThunk",key:"createThunkclearQuerySessionData",description:"Clear query session data on session expiration"};const p=(0,t.Ay)("Clear search session data on session expiration",D=>{D((0,d.jT)({sessionTimeoutId:null})),D((0,i.u)()),D((0,_.Pz)({windowId:y.I})),D((0,h.o2)({inputId:v.Jx.OMNISWITCHER})),D((0,d.Vx)({windowId:y.I})),D((0,T.q)({windowId:y.I}))});p.meta={name:"createThunk",key:"createThunkclearSearchSessionData",description:"Clear search session data on session expiration"};var g=e(3606346624),E=e(5234724663),f=e(2527782504),O=e(9640070512);const C=(0,t.Ay)("Clear session timeouts on search mount",(D,P)=>{const k=P();(0,n.nj)(k)?((0,c.Ay)({getState:P}).info(o.Y,"Navigated to search page and session is already active: Clearing timer"),D((0,s.A)())):(0,a.G0)(k)||((0,c.Ay)({getState:P}).info(o.Y,"Navigated to search page without active session: Starting new session"),D((0,r.N)())),(0,n.a1)(k)||D((0,d.O3)({lastOpenMethod:"history"})),D((0,E.Ih)()),D((0,O.H)({focusKey:f.Ay.Search,forceFocus:!0}))});C.meta={name:"createThunk",key:"createThunkclearSessionTimeoutsOnSearchMount",description:"Clear session timeouts on search mount"};const M=(0,t.Ay)("Start session timeouts on search unmount",(D,P)=>{const k=P(),x=v.Jx.OMNISWITCHER;if(!(0,l.NR)(k,x))return;(0,c.Ay)({getState:P}).info(o.Y,"Navigated from search page with active query: Starting timeout to clear session");const F=setTimeout(()=>{const Y=P();(0,n.hz)(Y)===F&&D(I())},g.R);D((0,d.LM)({querySessionTimeoutId:F}));const W=setTimeout(()=>{const Y=P();(0,n.nj)(Y)===W&&D(p())},g.l);D((0,d.jT)({sessionTimeoutId:W})),D((0,E.yW)()),D((0,d.O3)({lastOpenMethod:null}))});M.meta={name:"createThunk",key:"createThunkstartSessionTimeoutsOnSearchUnmount",description:"Start session timeouts on search unmount"}},7143409288:(z,A,e)=>{"use strict";e.d(A,{A:()=>c});var t=e(1031947056),n=e(9436609557),s=e(1839426804);const a=(0,t.Ay)("Reset session timeout ids when someone returns to their search",(o,r)=>{clearTimeout((0,n.nj)(r())),o((0,s.jT)({sessionTimeoutId:null})),o((0,s.LM)({querySessionTimeoutId:null}))});a.meta={name:"createThunk",key:"createThunkresetSessionTimeoutIds",description:"Reset session timeout ids when someone returns to their search"};const c=a},117899263:(z,A,e)=>{"use strict";e.d(A,{_:()=>s});var t=e(9829579108),n=e(1960898919);const s=(0,t.Ay)(a=>{var c;return(c=(0,n.ax)(a,"is_new_human"))!==null&&c!==void 0?c:!1});s.meta={name:"createSelector",key:"createSelectorisNewHuman",description:a=>{var c;return(c=(0,n.ax)(a,"is_new_human"))!==null&&c!==void 0?c:!1}}},6962478097:(z,A,e)=>{"use strict";e.d(A,{ds:()=>o,fG:()=>c,m6:()=>a,m8:()=>n,rm:()=>s,st:()=>r,vU:()=>_,wr:()=>l});var t=e(2140362605);const n=(0,t.Ay)("Upserts inbound shared workspace invitations that are pending");n.meta={name:"createAction",key:"createActionupsertPendingInboundSharedWorkspaceInvitations",description:"Upserts inbound shared workspace invitations that are pending"};const s=(0,t.Ay)("Upserts outbound shared workspace invitations that are pending");s.meta={name:"createAction",key:"createActionupsertPendingOutboundSharedWorkspaceInvitations",description:"Upserts outbound shared workspace invitations that are pending"};const a=(0,t.Ay)("Upserts all inbound shared workspace invitations");a.meta={name:"createAction",key:"createActionupsertAllInboundSharedWorkspaceInvitations",description:"Upserts all inbound shared workspace invitations"};const c=(0,t.Ay)("Upserts all outbound shared workspace invitations");c.meta={name:"createAction",key:"createActionupsertAllOutboundSharedWorkspaceInvitations",description:"Upserts all outbound shared workspace invitations"};const o=(0,t.Ay)("Upserts a SharedWorkspace Invite");o.meta={name:"createAction",key:"createActionupsertSharedWorkspaceInvite",description:"Upserts a SharedWorkspace Invite"};const r=(0,t.Ay)("Upserts a SharedWorkspace Invite that is pending");r.meta={name:"createAction",key:"createActionupsertPendingSharedWorkspaceInvite",description:"Upserts a SharedWorkspace Invite that is pending"};const l=(0,t.Ay)("Removes a Shared Workspace Invite");l.meta={name:"createAction",key:"createActionremoveSharedWorkspaceInvite",description:"Removes a Shared Workspace Invite"};const _=(0,t.Ay)("Removes a Shared Workspace Invite that is pending");_.meta={name:"createAction",key:"createActionremovePendingSharedWorkspaceInvite",description:"Removes a Shared Workspace Invite that is pending"}},2479677519:(z,A,e)=>{"use strict";e.d(A,{A:()=>m});var t=e(9706240641),n=e.n(t),s=e(1031947056),a=e(4875732686),c=e(2368561198),o=e(6422693406),r=e(6962478097),l=e(1605540670),_=e(320199792),d=e(3243667193);const i=(0,s.Ay)("Fetch and reset the results for pending all shared connection invites",function(){var h=(0,t.coroutine)(function*(v,y,T){let{reason:I}=T;if(!(0,a.y)(y()))return o.S.resolve({inboundConnectInvites:[],outboundConnectInvites:[]});let g,E;if((0,c.i)(y())){const O=yield v((0,l.O)({reason:I,inviteTypes:[d.k.Workspace]}));if(O!=null&&O.connect_invites){const C=O.connect_invites.filter(M=>(0,_.mj)(M));g=C.filter(_.Ef),E=C.filter(_.I4),v((0,r.m8)({pendingInboundSharedWorkspaceInvites:g})),v((0,r.rm)({pendingOutboundSharedWorkspaceInvites:E}))}}return{inboundConnectInvites:g||[],outboundConnectInvites:E||[]}});return function(v,y,T){return h.apply(this,arguments)}}());i.meta={name:"createThunk",key:"createThunkfetchAndResetAllPendingSharedWorkspaceInvites",description:"Fetch and reset the results for pending all shared connection invites"};const m=i},1392261213:(z,A,e)=>{"use strict";e.d(A,{A:()=>m});var t=e(9706240641),n=e.n(t),s=e(1031947056),a=e(4875732686),c=e(2368561198),o=e(6422693406),r=e(6962478097),l=e(1605540670),_=e(320199792),d=e(3243667193);const i=(0,s.Ay)("Fetch and reset the results for all shared connection invites",function(){var h=(0,t.coroutine)(function*(v,y,T){let{reason:I}=T;if(!(0,a.y)(y()))return o.S.resolve({inboundConnectInvites:[],outboundConnectInvites:[]});let g,E;if((0,c.i)(y())){const O=yield v((0,l.O)({reason:I,inviteTypes:[d.k.Workspace]}));O!=null&&O.connect_invites&&(g=O.connect_invites.filter(_.Ef),E=O.connect_invites.filter(_.I4),v((0,r.m6)({inboundSharedWorkspaceInvites:g})),v((0,r.fG)({outboundSharedWorkspaceInvites:E})))}return{inboundConnectInvites:g||[],outboundConnectInvites:E||[]}});return function(v,y,T){return h.apply(this,arguments)}}());i.meta={name:"createThunk",key:"createThunkfetchAndResetAllSharedWorkspaceInvites",description:"Fetch and reset the results for all shared connection invites"};const m=i},3577873706:(z,A,e)=>{"use strict";e.d(A,{A:()=>l});var t=e(9706240641),n=e.n(t),s=e(1031947056),a=e(2332966328),c=e(8910811843),o=e(4144687165);const r=(0,s.Ay)("Fetch Slack Doc file IDs for and re-map",function(){var _=(0,t.coroutine)(function*(d,i,m){let{quipThreadId:h,reason:v="get-and-upsert-slack-doc-file-id"}=m;const y=(0,o.R)(i(),h);if(y)return y;const{file_id:T}=yield d((0,a.I)({quipThreadId:h,reason:v}));return d((0,c.Gc)({objects:[{id:h,fileId:T}]})),T});return function(d,i,m){return _.apply(this,arguments)}}());r.meta={name:"createThunk",key:"createThunkgetAndUpsertSlackDocFileId",description:"Fetch Slack Doc file IDs for and re-map"};const l=r},7359239710:(z,A,e)=>{"use strict";e.d(A,{Ay:()=>_,I$:()=>l,iJ:()=>r});var t=e(5571264920),n=e(1031947056),s=e(5502459222);const a=(0,n.Ay)("Fetch slack doc last read timestamps and re-map",(d,i,m)=>{let{ids:h}=m;return d((0,s.R)({fileIds:h,reason:"fetch-slack-doc-last-read"})).then(v=>{let{files:y}=v;return y.map(T=>({id:T.file_id,lastReadByUser:T.last_read_timestamp}))})});a.meta={name:"createThunk",key:"createThunkfetchSlackDocLastReadTimestamps",description:"Fetch slack doc last read timestamps and re-map"};const c=a,{reducer:o,actions:{upsertObjects:r},selectors:{getObjectById:l}}=(0,t.A)({storeKey:"slackDocLastRead",persistenceEnabled:!0},{fetchObjects:c}),_=o},2985066322:(z,A,e)=>{"use strict";e.d(A,{A:()=>a});var t=e(1031947056),n=e(7359239710);const s=(0,t.Ay)("Upsert a slack doc last read for a given file ID",(c,o,r)=>{let{fileId:l,lastReadByUser:_}=r;return c((0,n.iJ)({objects:[{id:l,lastReadByUser:_}]}))});s.meta={name:"createThunk",key:"createThunkupsertSlackDocLastReadByUserForFileId",description:"Upsert a slack doc last read for a given file ID"};const a=s},1302213854:(z,A,e)=>{"use strict";e.d(A,{C7:()=>n,Ln:()=>a,Mb:()=>s,UM:()=>c});var t=e(2140362605);const n=(0,t.Ay)("Have we already sent boot metrics");n.meta={name:"createAction",key:"createActionsetShouldLogAppBootMetrics",description:"Have we already sent boot metrics"};const s=(0,t.Ay)("Should we log team switch metrics");s.meta={name:"createAction",key:"createActionsetShouldLogTeamSwitchMetrics",description:"Should we log team switch metrics"};const a=(0,t.Ay)("Set whether we should continue logging time to visible metrics");a.meta={name:"createAction",key:"createActionsetShouldLogTTVMetrics",description:"Set whether we should continue logging time to visible metrics"};const c=(0,t.Ay)("Set whether we should continue logging time to usable metrics");c.meta={name:"createAction",key:"createActionsetShouldLogTTUMetrics",description:"Set whether we should continue logging time to usable metrics"}},4476913522:(z,A,e)=>{"use strict";e.d(A,{a:()=>h});var t=e(8086952004),n=e(12126472),s=e(6626377467),a=e(235108050),c=e(7530630315),o=e(5729325965),r=e(2240330919),l=e(1116859610),_=e(6422693406),d=e(1031947056),i=e(3110884894),m=e(2155512519);const h=(0,d.Ay)("gets thread replies from the API",(v,y,T)=>{const{channelId:I,threadTs:p,oldest:g,limit:E}=T;let f=T.latest;g===f&&f===T.threadTs&&(f=null);const O=(0,i.Iu)(I,p);return g&&f?_.S.all([v((0,m.$b)({channelId:I,threadTs:p,latest:f,limit:E})),v((0,m.$b)({channelId:I,threadTs:p,oldest:g,limit:E}))]).then(C=>{let[M,D]=C;const P=(0,t.A)(M.msgs,{ts:p})||(0,t.A)(D.msgs,{ts:p}),k=(0,n.A)(M.msgs,{ts:p}),x=(0,n.A)(D.msgs,{ts:p}),F=M.deleted,W=D.deleted,Y=(0,s.A)(k.concat(x),"ts"),S=(0,a.A)((0,c.A)(F,W));!M.hasMore&&P&&Y.unshift(P);const L=Y.map(w=>w.ts);return v((0,l.A)({msgs:Y,channelId:O,hasMore:{hasMoreStart:M.hasMore,hasMoreEnd:D.hasMore},oldest:(0,o.A)([g,(0,o.A)(L)]),latest:(0,r.A)([f,(0,r.A)(L)]),deleted:S})),{msgs:Y}}):v((0,m.$b)({channelId:I,threadTs:p,oldest:g,latest:f,limit:E})).then(function(){let{msgs:C,deleted:M,hasMore:D}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const P=f&&!D||g===p||f===p||!g&&!f&&!D;let k=C;P||(k=(0,n.A)(C,{ts:p}));let x=D;!g&&!f&&(x={hasMoreStart:D,hasMoreEnd:!1}),v((0,l.A)({msgs:k,channelId:O,hasMore:x,oldest:g,latest:f,deleted:M}));const F=(0,t.A)(C,{ts:p});return F&&g===p&&v((0,l.A)({msgs:[F],channelId:O,hasMore:!1,latest:p})),{msgs:k}})});h.meta={name:"createThunk",key:"createThunkrequestReplies",description:"gets thread replies from the API"}},6929023741:(z,A,e)=>{"use strict";e.d(A,{a:()=>h});var t=e(8086952004),n=e(12126472),s=e(6626377467),a=e(235108050),c=e(7530630315),o=e(5729325965),r=e(2240330919),l=e(1116859610),_=e(6422693406),d=e(1031947056),i=e(3110884894),m=e(2155512519);const h=(0,d.Ay)("gets thread replies from the API",(v,y,T)=>{const{channelId:I,threadTs:p,oldest:g,limit:E}=T;let f=T.latest;g===f&&f===T.threadTs&&(f=null);const O=(0,i.Iu)(I,p);return g&&f?_.S.all([v((0,m.$b)({channelId:I,threadTs:p,latest:f,limit:E})),v((0,m.$b)({channelId:I,threadTs:p,oldest:g,limit:E}))]).then(C=>{let[M,D]=C;const P=(0,t.A)(M.msgs,{ts:p})||(0,t.A)(D.msgs,{ts:p}),k=(0,n.A)(M.msgs,{ts:p}),x=(0,n.A)(D.msgs,{ts:p}),F=M.deleted,W=D.deleted,Y=(0,s.A)(k.concat(x),"ts"),S=(0,a.A)((0,c.A)(F,W));!M.hasMore&&P&&Y.unshift(P);const L=Y.map(w=>w.ts);return v((0,l.A)({msgs:Y,channelId:O,hasMore:{hasMoreStart:M.hasMore,hasMoreEnd:D.hasMore},oldest:(0,o.A)([g,(0,o.A)(L)]),latest:(0,r.A)([f,(0,r.A)(L)]),deleted:S})),{msgs:Y}}):v((0,m.$b)({channelId:I,threadTs:p,oldest:g,latest:f,limit:E})).then(function(){let{msgs:C,deleted:M,hasMore:D}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const P=f&&!D||g===p||f===p||!g&&!f&&!D;let k=C;P||(k=(0,n.A)(C,{ts:p}));let x=D;!g&&!f&&(x={hasMoreStart:D,hasMoreEnd:!1}),v((0,l.A)({msgs:k,channelId:O,hasMore:x,oldest:g,latest:f,deleted:M}));const F=(0,t.A)(C,{ts:p});return F&&g===p&&v((0,l.A)({msgs:[F],channelId:O,hasMore:!1,latest:p})),{msgs:k}})});h.meta={name:"createThunk",key:"createThunkrequestReplies",description:"gets thread replies from the API"}},1827030018:(z,A,e)=>{"use strict";e.d(A,{_:()=>l});var t=e(9746734072),n=e(5238395322),s=e(2101927269),a=e(7486305635),c=e(1031947056),o=e(9101533895),r=e(157328471);const l=(0,c.Ay)("Update the unread count for the all threads view",(_,d,i)=>{let{threadsHasUnreads:m,threadsUnreadCountByChannel:h,threadsMentionCountByChannel:v,threadsLastUpdatedTimestamp:y}=i;const T=(0,t.A)(v)?{}:v,I=d(),p=(0,n.A)((0,s.A)(T,(E,f)=>{const O=(0,o.OL)(I,f);return(0,a.WK)(I,O)&&!(0,a.fA)(I,O)}));let g=0;h?g=(0,n.A)((0,s.A)(h,(E,f)=>{const O=(0,o.OL)(I,f);return(0,a.WK)(I,O)})):g=m?1:0,_((0,r.LI)({threadsUnreadCount:g,threadsUnreadCountByChannel:h,threadsMentionCount:p,threadsMentionCountByChannel:T,threadsLastUpdatedTimestamp:y,suppressThreads:(0,a.dQ)(I)}))});l.meta={name:"createThunk",key:"createThunkthreadsUnreadCountChanged",description:"Update the unread count for the all threads view"}},9132245692:(z,A,e)=>{"use strict";e.d(A,{g:()=>n,y:()=>s});var t=e(2140362605);const n=(0,t.Ay)("Update unread counts for the specified user alert types");n.meta={name:"createAction",key:"createActionupdateUserAlertsUnreadCount",description:"Update unread counts for the specified user alert types"};const s=(0,t.Ay)("Reset the user alerts store to the specified alert counts map");s.meta={name:"createAction",key:"createActionresetAllUserAlertsUnreadCounts",description:"Reset the user alerts store to the specified alert counts map"}},2696160384:(z,A,e)=>{"use strict";e.d(A,{D_:()=>s,FI:()=>n,Sr:()=>a});var t=e(2140362605);const n=(0,t.Ay)("Sets whether the mini player is open or not");n.meta={name:"createAction",key:"createActionsetIsDocked",description:"Sets whether the mini player is open or not"};const s=(0,t.Ay)("Sets mini video player config");s.meta={name:"createAction",key:"createActionsetMiniPlayerConfig",description:"Sets mini video player config"};const a=(0,t.Ay)("Clears mini video player config");a.meta={name:"createAction",key:"createActionclearMiniPlayerConfig",description:"Clears mini video player config"}},9813790040:(z,A,e)=>{"use strict";e.d(A,{A:()=>d});var t=e(3750057149),n=e(9121100949),s=e(1185969935),a=e(1201539379),c=e(965001959),o=e(9733150292);const r={persistenceEnabled:!1,storeKey:"viewLayout"},l={sidebarWidthIntent:void 0,sidebarWidthMode:c.tR.AUTO,sidebarWideWidthIntent:void 0,sidebarWideWidthMode:c.tR.AUTO,sidebarExtraWideWidthIntent:void 0,sidebarExtraWideWidthMode:c.tR.AUTO,secondaryWidthIntent:void 0,secondaryWidthMode:c.tR.AUTO,splitWidthIntent:void 0,splitWidthMode:c.tR.AUTO,isSidebarVisible:!0,isSidebarVisibleWhenFloating:!1,isWorkspaceSwitcherVisible:!1,isCompactModeEnabled:!1};try{l.sidebarWidthIntent=(0,o.W6)(n.ke)||void 0,l.sidebarWideWidthIntent=(0,o.W6)(n.u1)||void 0,l.sidebarExtraWideWidthIntent=(0,o.W6)(n.jt)||void 0,l.secondaryWidthIntent=(0,o.W6)(n.gN)||void 0,l.sidebarWidthMode=(0,o.W6)(n.ts)||c.tR.AUTO,l.splitWidthIntent=(0,o.W6)(n.qD)||void 0,l.splitWidthMode=(0,o.W6)(n.$D)||c.tR.AUTO,l.sidebarWidthMode=(0,o.W6)(n.ts)||c.tR.AUTO,l.sidebarWideWidthMode=(0,o.W6)(n.r1)||c.tR.AUTO,l.sidebarExtraWideWidthMode=(0,o.W6)(n.OR)||c.tR.AUTO,l.secondaryWidthMode=(0,o.W6)(n.Ts)||c.tR.AUTO;const i=(0,o.W6)(n.jG);l.isSidebarVisible=(0,t.A)(i)?i:!0;const m=(0,o.W6)(n.WU);l.isWorkspaceSwitcherVisible=(0,t.A)(m)?m:!1;const h=(0,o.W6)(n.RC);l.isCompactModeEnabled=(0,t.A)(h)?h:!1}catch{}const d=(0,s.Ay)({},l,r).on(a.SP,(i,m)=>{let{sidebarWidthIntent:h,sidebarWidthMode:v}=m;return{...i,sidebarWidthIntent:h,sidebarWidthMode:v}}).on(a.hk,(i,m)=>{let{sidebarWideWidthIntent:h,sidebarWideWidthMode:v}=m;return{...i,sidebarWideWidthIntent:h,sidebarWideWidthMode:v}}).on(a.$t,(i,m)=>{let{sidebarExtraWideWidthIntent:h,sidebarExtraWideWidthMode:v}=m;return{...i,sidebarExtraWideWidthIntent:h,sidebarExtraWideWidthMode:v}}).on(a.ie,(i,m)=>{let{secondaryWidthIntent:h,secondaryWidthMode:v}=m;return{...i,secondaryWidthIntent:h,secondaryWidthMode:v}}).on(a.yL,(i,m)=>{let{splitWidthIntent:h,splitWidthMode:v}=m;return{...i,splitWidthIntent:h,splitWidthMode:v}}).on(a.KY,(i,m)=>({...i,isSidebarVisible:m})).on(a.Eo,(i,m)=>({...i,isSidebarVisibleWhenFloating:m})).on(a.mV,(i,m)=>({...i,isWorkspaceSwitcherVisible:m})).on(a.Fe,(i,m)=>({...i,isCompactModeEnabled:m}))},4172221507:(z,A,e)=>{"use strict";e.d(A,{F:()=>o});var t=e(9121100949),n=e(1031947056),s=e(6533394955),a=e(1201539379),c=e(9733150292);const o=(0,n.Ay)("Sets whether or not the sidebar is part of the grid layout at normal window sizes",(r,l,_)=>{(0,c.q9)(t.jG,_),r((0,a.KY)(_)),(0,s.dispatchForClientStore)((0,a.KY)(_))});o.meta={name:"createThunk",key:"createThunksetIsSidebarVisible",description:"Sets whether or not the sidebar is part of the grid layout at normal window sizes"}},8707579690:(z,A,e)=>{"use strict";e.d(A,{J:()=>o});var t=e(9121100949),n=e(1031947056),s=e(1201539379),a=e(6533394955),c=e(9733150292);const o=(0,n.Ay)("Set the user-specified secondary width and mode",(r,l,_)=>{let{secondaryWidthIntent:d,secondaryWidthMode:i}=_;(0,c.q9)(t.gN,d),(0,c.q9)(t.Ts,i),r((0,s.ie)({secondaryWidthIntent:d,secondaryWidthMode:i})),(0,a.dispatchForClientStore)((0,s.ie)({secondaryWidthIntent:d,secondaryWidthMode:i}))});o.meta={name:"createThunk",key:"createThunksetSecondaryColumn",description:"Set the user-specified secondary width and mode"}},2779520532:(z,A,e)=>{"use strict";e.d(A,{R:()=>o});var t=e(9121100949),n=e(1031947056),s=e(1201539379),a=e(6533394955),c=e(9733150292);const o=(0,n.Ay)("Set the user-specified sidebar width and mode",(r,l,_)=>{let{sidebarWidthIntent:d,sidebarWidthMode:i}=_;(0,c.q9)(t.ke,d),(0,c.q9)(t.ts,i),r((0,s.SP)({sidebarWidthIntent:d,sidebarWidthMode:i})),(0,a.dispatchForClientStore)((0,s.SP)({sidebarWidthIntent:d,sidebarWidthMode:i}))});o.meta={name:"createThunk",key:"createThunksetSidebarColumn",description:"Set the user-specified sidebar width and mode"}},7128275929:(z,A,e)=>{"use strict";e.d(A,{a:()=>o});var t=e(9121100949),n=e(1031947056),s=e(1201539379),a=e(6533394955),c=e(9733150292);const o=(0,n.Ay)("Set the user-specified extra wide sidebar width and mode",(r,l,_)=>{let{sidebarExtraWideWidthIntent:d,sidebarExtraWideWidthMode:i}=_;(0,c.q9)(t.jt,d),(0,c.q9)(t.OR,i),r((0,s.$t)({sidebarExtraWideWidthIntent:d,sidebarExtraWideWidthMode:i})),(0,a.dispatchForClientStore)((0,s.$t)({sidebarExtraWideWidthIntent:d,sidebarExtraWideWidthMode:i}))});o.meta={name:"createThunk",key:"createThunksetSidebarExtraWideColumn",description:"Set the user-specified extra wide sidebar width and mode"}},9341298:(z,A,e)=>{"use strict";e.d(A,{q:()=>o});var t=e(9121100949),n=e(1031947056),s=e(1201539379),a=e(6533394955),c=e(9733150292);const o=(0,n.Ay)("Set the user-specified wide sidebar width and mode",(r,l,_)=>{let{sidebarWideWidthIntent:d,sidebarWideWidthMode:i}=_;(0,c.q9)(t.u1,d),(0,c.q9)(t.r1,i),r((0,s.hk)({sidebarWideWidthIntent:d,sidebarWideWidthMode:i})),(0,a.dispatchForClientStore)((0,s.hk)({sidebarWideWidthIntent:d,sidebarWideWidthMode:i}))});o.meta={name:"createThunk",key:"createThunksetSidebarWideColumn",description:"Set the user-specified wide sidebar width and mode"}},4139359963:(z,A,e)=>{"use strict";e.d(A,{A:()=>l});var t=e(2384831516),n=e(7429662208);const s=(0,t.Mz)((_,d)=>{let{viewType:i}=d;const m=(0,n.zi)(_);return Object.keys(m).map(T=>m[T]).some(T=>Object.keys(T).some(p=>{var g;return((g=T[p])===null||g===void 0?void 0:g.viewType)===i}))});s.meta={name:"createSelector",key:"createSelectorisViewTypeVisibleInChildWindow",description:(_,d)=>{let{viewType:i}=d;const m=(0,n.zi)(_);return Object.keys(m).map(T=>m[T]).some(T=>Object.keys(T).some(p=>{var g;return((g=T[p])===null||g===void 0?void 0:g.viewType)===i}))}};const a=s,c=(0,t.Mz)((_,d)=>{let{viewType:i}=d;const m=(0,n.e6)(_),h=(0,n.Le)(_,{tab:m});return h?Object.keys(h).some(T=>{var I;return((I=h[T])===null||I===void 0?void 0:I.viewType)===i}):!1});c.meta={name:"createSelector",key:"createSelectorisViewTypeVisibleInMainWindow",description:(_,d)=>{let{viewType:i}=d;const m=(0,n.e6)(_),h=(0,n.Le)(_,{tab:m});return h?Object.keys(h).some(T=>{var I;return((I=h[T])===null||I===void 0?void 0:I.viewType)===i}):!1}};const o=c,r=(0,t.Mz)((_,d)=>{let{viewType:i}=d;return a(_,{viewType:i})||o(_,{viewType:i})});r.meta={name:"createSelector",key:"createSelectorisViewTypeVisible",description:(_,d)=>{let{viewType:i}=d;return a(_,{viewType:i})||o(_,{viewType:i})}};const l=r},7573598208:(z,A,e)=>{"use strict";e.d(A,{A:()=>i});var t=e(352142497),n=e(8834730594),s=e(2960290117),a=e(8040098042),c=e(1826991857),o=e(4862221402),r=e(8813411026),l=e(8414867410);const _={activity:t.D.ActivityList,threads:t.D.Threads,rimeto_profile:t.D.Profile,files:t.D.FileDetails,help:t.D.Help,shortcuts:t.D.KeyboardShortcuts,whats_new:t.D.WhatsNew,feedback:t.D.Feedback,comment_thread:t.D.QuipCommentThread,comment_stream:t.D.QuipCommentStream,activity_history:t.D.QuipActivityHistory,quip_automations_overview:t.D.QuipAutomationsOverview,channel_canvas:t.D.ChannelCanvas,thread:t.D.Thread,ai_summary_details:t.D.AiSummaryDetails,search_summary:t.D.SearchSummary,channel_files:t.D.ChannelFiles,ai_app:t.D.AiApp,workflow_details:t.D.WorkflowDetails},i=u(m=>m?(0,n.A)(m)?t.D.AppSpace:(0,s.Ay)(m)?t.D.Quip:(0,a.A)(m)?t.D.Channel:(0,r.T)(m)?(0,l.F8)(m):m&&m[0]==="V"?t.D.Threads:(0,c.A)(m)?t.D.Thread:(0,o.A)(m)?t.D.UserGroup:_[m]?_[m]:t.D.Unknown:t.D.Unknown,"convertIdToViewType")},9936094925:(z,A,e)=>{"use strict";e.d(A,{Ay:()=>T,cB:()=>h,ds:()=>m,w9:()=>v,wg:()=>i});var t=e(9113979368),n=e(498506970),s=e(1618349278),a=e(1649982175),c=e(1185969935),o=e(3193155968),r=e(7590914282);const l=100,_={},d={persistenceEnabled:!1,storeKey:"windowHistory"};function i(I){let{windowState:p,entry:g}=I;const E=p?p.stack:[],f=(0,t.A)(E)?null:1;return{stack:[(0,n.A)(g)].concat(E).slice(0,l),index:0,previousIndex:f}}u(i,"handlePushHistoryEntryForWindow");function m(I){let{windowState:p,index:g,previousIndex:E}=I;return{stack:p.stack,index:g,previousIndex:E}}u(m,"handleUpdateIndexForWindow");function h(I){let{windowState:p,index:g}=I;return{stack:(0,s.A)(p.stack,g),index:p.index,previousIndex:null}}u(h,"handlePopHistoryAboveIndexForWindow");function v(I){let{windowState:p,entry:g}=I;const E=[...p.stack];return E[p.index]=(0,n.A)(g),{...p,stack:E}}u(v,"handleReplaceCurrentHistoryEntryForWindowInternal");const T=(0,c.Ay)({},_,d).on(r.xU,(I,p)=>{let{windowId:g,entry:E}=p;return!g||!E?I:{...I,[g]:i({windowState:I[g],entry:E})}}).on(r.aV,(I,p)=>{let{windowId:g}=p;return(0,a.A)(I,g)}).on(r.Nr,(I,p)=>{let{windowId:g,index:E,previousIndex:f}=p;return{...I,[g]:m({windowState:I[g],index:E,previousIndex:f})}}).on(r.o1,(I,p)=>{let{windowId:g,viewSet:E}=p;return{...I,[g]:{stack:[(0,n.A)(E)],index:0,previousIndex:null}}}).on(r.s0,(I,p)=>{let{windowId:g,index:E}=p;return I[g]?{...I,[g]:h({windowState:I[g],index:E})}:I}).on(r.iV,(I,p)=>{let{windowId:g,entry:E}=p;return I[g]?{...I,[g]:v({windowState:I[g],entry:E})}:I}).on(r.$Z,(I,p)=>{let{windowId:g,viewParams:E,index:f}=p;if(!I[g])return I;const C=[...I[g]?I[g].stack:[]];if(!C[f])return I;const M=(0,n.A)(C[f]),D=M[o.mq.Primary];if(!(D!=null&&D.id))return I;const P={...M,[o.mq.Primary]:{...D,params:{...D.params,...E}}};return C[f]=P,{...I,[g]:{...I[g],stack:C}}})},4256476552:(z,A,e)=>{"use strict";e.d(A,{A:()=>o});var t=e(1185969935),n=e(1780675971),s=e(3193155968);const a={[s.N2]:{isFocused:void 0,isUnloading:!1,timeCreation:0,timeLastBlurEvent:0,timeLastFocusEvent:0}},o=(0,t.Ay)({},a,{storeKey:"window",persistenceEnabled:!1}).on(n._p,(r,l)=>{let{windowId:_=s.N2,...d}=l;if(!r[_])return r;const i={[s.N2]:{...r[s.N2]}};return i[_]={...r[_],...d},Reflect.ownKeys(r).forEach(m=>{m!==_&&d.isFocused&&(i[m]={...r[m],isFocused:!1})}),{...r,...i}}).on(n.w3,(r,l)=>{let{windowId:_=s.N2,...d}=l;return r[_]?{...r,[_]:{...r[_],isUnloading:d.isUnloading}}:r}).on(n.d1,(r,l)=>{let{windowId:_=s.N2,...d}=l;return{...r,[_]:{...r[_],...d,windowId:_}}}).on(n.pb,(r,l)=>{let{windowId:_=s.N2,...d}=l;return r[_]?{...r,[_]:{...r[_],bootType:d.bootType}}:r}).on(n.jO,(r,l)=>{let{windowId:_}=l;if(_===s.N2||!r[_])return r;const d={...r};return delete d[_],d}).on(n.NV,(r,l)=>{let{windowId:_,viewport:d}=l;return r[_]?{...r,[_]:{...r[_],viewport:d}}:r})},2591023465:(z,A,e)=>{"use strict";e.d(A,{FO:()=>a,KY:()=>c,SP:()=>n,iJ:()=>r,lT:()=>s,vm:()=>o});var t=e(2140362605);const n=(0,t.Ay)("Set the user-specified sidebar width and mode (use setSidebarColumn instead)");n.meta={name:"createAction",key:"createActionsetSidebarColumnInternal",description:"Set the user-specified sidebar width and mode (use setSidebarColumn instead)"};const s=(0,t.Ay)("Set the user-specified sidebar width and mode (use setInspectorColumn instead)");s.meta={name:"createAction",key:"createActionsetInspectorColumnInternal",description:"Set the user-specified sidebar width and mode (use setInspectorColumn instead)"};const a=(0,t.Ay)("Sets whether or not the team sidebar is part of the grid layout (use setIsTeamSidebarVisible instead)");a.meta={name:"createAction",key:"createActionsetIsTeamSidebarVisibleInternal",description:"Sets whether or not the team sidebar is part of the grid layout (use setIsTeamSidebarVisible instead)"};const c=(0,t.Ay)("Sets whether or not the sidebar is part of the grid layout at normal window sizes (use setIsSidebarVisible instead)");c.meta={name:"createAction",key:"createActionsetIsSidebarVisibleInternal",description:"Sets whether or not the sidebar is part of the grid layout at normal window sizes (use setIsSidebarVisible instead)"};const o=(0,t.Ay)("Sets whether or not the sidebar is currently visible when in collapsed mode");o.meta={name:"createAction",key:"createActionsetIsSidebarVisibleWhenFloating",description:"Sets whether or not the sidebar is currently visible when in collapsed mode"};const r=(0,t.Ay)("Sets whether the user prefers a responsive sidebar");r.meta={name:"createAction",key:"createActionsetUserPrefersResponsiveSidebarInternal",description:"Sets whether the user prefers a responsive sidebar"}},894072650:(z,A,e)=>{"use strict";e.d(A,{A:()=>_});var t=e(3750057149),n=e(965001959),s=e(1185969935),a=e(2591023465),c=e(9733150292);const o={persistenceEnabled:!1,storeKey:"workspaceLayout"},r={inspectorWidthIntent:null,inspectorWidthMode:n.tR.AUTO,isSidebarVisible:!0,isSidebarVisibleWhenFloating:!1,isTeamSidebarVisible:!0,sidebarWidthIntent:null,sidebarWidthMode:n.tR.AUTO,userPrefersResponsiveSidebar:!0};try{r.sidebarWidthIntent=(0,c.W6)(n.ke)||null,r.inspectorWidthIntent=(0,c.W6)(n.j0)||null,r.sidebarWidthMode=(0,c.W6)(n.ts)||"auto",r.inspectorWidthMode=(0,c.W6)(n.mu)||"auto";const d=(0,c.W6)(n.jG);r.isSidebarVisible=(0,t.A)(d)?d:!0;const i=(0,c.W6)(n.Xg);r.isTeamSidebarVisible=(0,t.A)(i)?i:!0;const m=(0,c.W6)(n.Lb);r.userPrefersResponsiveSidebar=(0,t.A)(m)?m:!0}catch{}const _=(0,s.Ay)({},r,o).on(a.SP,(d,i)=>{let{sidebarWidthIntent:m,sidebarWidthMode:h}=i;return{...d,sidebarWidthIntent:m,sidebarWidthMode:h}}).on(a.lT,(d,i)=>{let{inspectorWidthIntent:m,inspectorWidthMode:h}=i;return{...d,inspectorWidthIntent:m,inspectorWidthMode:h}}).on(a.KY,(d,i)=>({...d,isSidebarVisible:i})).on(a.vm,(d,i)=>({...d,isSidebarVisibleWhenFloating:i})).on(a.FO,(d,i)=>({...d,isTeamSidebarVisible:i})).on(a.iJ,(d,i)=>({...d,userPrefersResponsiveSidebar:i}))},3674298388:(z,A,e)=>{"use strict";e.d(A,{In:()=>l,Vo:()=>o,r8:()=>r,xx:()=>_});var t=e(9829579108);const n=(0,t.Ay)(d=>{var i;return d==null||(i=d.workspaceLayout)===null||i===void 0?void 0:i.sidebarWidthIntent});n.meta={name:"createSelector",key:"createSelectorgetSidebarWidthIntent",description:d=>{var i;return d==null||(i=d.workspaceLayout)===null||i===void 0?void 0:i.sidebarWidthIntent}};const s=(0,t.Ay)(d=>{var i;return d==null||(i=d.workspaceLayout)===null||i===void 0?void 0:i.sidebarWidthMode});s.meta={name:"createSelector",key:"createSelectorgetSidebarWidthMode",description:d=>{var i;return d==null||(i=d.workspaceLayout)===null||i===void 0?void 0:i.sidebarWidthMode}};const a=(0,t.Ay)(d=>{var i;return d==null||(i=d.workspaceLayout)===null||i===void 0?void 0:i.inspectorWidthIntent});a.meta={name:"createSelector",key:"createSelectorgetInspectorWidthIntent",description:d=>{var i;return d==null||(i=d.workspaceLayout)===null||i===void 0?void 0:i.inspectorWidthIntent}};const c=(0,t.Ay)(d=>{var i;return d==null||(i=d.workspaceLayout)===null||i===void 0?void 0:i.inspectorWidthMode});c.meta={name:"createSelector",key:"createSelectorgetInspectorWidthMode",description:d=>{var i;return d==null||(i=d.workspaceLayout)===null||i===void 0?void 0:i.inspectorWidthMode}};const o=(0,t.Ay)(d=>{var i;return d==null||(i=d.workspaceLayout)===null||i===void 0?void 0:i.isSidebarVisible});o.meta={name:"createSelector",key:"createSelectorgetIsSidebarVisible",description:d=>{var i;return d==null||(i=d.workspaceLayout)===null||i===void 0?void 0:i.isSidebarVisible}};const r=(0,t.Ay)(d=>{var i;return d==null||(i=d.workspaceLayout)===null||i===void 0?void 0:i.isSidebarVisibleWhenFloating});r.meta={name:"createSelector",key:"createSelectorgetIsSidebarVisibleWhenFloating",description:d=>{var i;return d==null||(i=d.workspaceLayout)===null||i===void 0?void 0:i.isSidebarVisibleWhenFloating}};const l=(0,t.Ay)(d=>{var i;return d==null||(i=d.workspaceLayout)===null||i===void 0?void 0:i.isTeamSidebarVisible});l.meta={name:"createSelector",key:"createSelectorgetIsTeamSidebarVisible",description:d=>{var i;return d==null||(i=d.workspaceLayout)===null||i===void 0?void 0:i.isTeamSidebarVisible}};const _=(0,t.Ay)(d=>{var i;return d==null||(i=d.workspaceLayout)===null||i===void 0?void 0:i.userPrefersResponsiveSidebar});_.meta={name:"createSelector",key:"createSelectorgetUserPrefersResponsiveSidebar",description:d=>{var i;return d==null||(i=d.workspaceLayout)===null||i===void 0?void 0:i.userPrefersResponsiveSidebar}}},2802517438:(z,A,e)=>{"use strict";e.d(A,{A:()=>r});var t=e(4096483543),n=e(8414867410),s=e(5084575109),a=e(4522919696),c=e(3080748521);const r=u(l=>{if((0,t.A)()){const _=(0,c.MC)(l),d=_&&_.entityId,i=(0,n.US)(d);return(0,n.l1)(l,i)?i.id:(0,s.n)(d)?Object.keys(a.F).find(m=>a.F[m]===d):d}return l&&l.workspace&&l.workspace.primaryViewId},"getPrimaryView")},9083290776:(z,A,e)=>{"use strict";e.d(A,{Gy:()=>d,HO:()=>n,Hu:()=>o,K$:()=>r,Lo:()=>c,fw:()=>l,j0:()=>m,k0:()=>i,lH:()=>h,nG:()=>a,ne:()=>_,xW:()=>v});var t=e(2140362605);const n=(0,t.Ay)("Sets the primary view in workspace store");n.meta={name:"createAction",key:"createActionsetPrimaryViewInternal",description:"Sets the primary view in workspace store"};const s=n.getType(),a=(0,t.Ay)("Sets the secondary view in workspace store");a.meta={name:"createAction",key:"createActionsetSecondaryViewInternal",description:"Sets the secondary view in workspace store"};const c=(0,t.Ay)("Sets the flexpane origin store");c.meta={name:"createAction",key:"createActionsetFlexOriginInternal",description:"Sets the flexpane origin store"};const o=(0,t.Ay)("Sets the flexpane restore store");o.meta={name:"createAction",key:"createActionsetFlexRestoreInternal",description:"Sets the flexpane restore store"};const r=(0,t.Ay)("Sets the focused workspaces from the client-store");r.meta={name:"createAction",key:"createActionsetRecentlyFocusedWorkspaces",description:"Sets the focused workspaces from the client-store"};const l=(0,t.Ay)("Sets an object where the key is a workspace id and the value is the timestamp reflecting the last time the workspace was focused");l.meta={name:"createAction",key:"createActionsetRecentlyFocusedWorkspacesTimestamps",description:"Sets an object where the key is a workspace id and the value is the timestamp reflecting the last time the workspace was focused"};const _=(0,t.Ay)("Sets the props we need to re-open the last flexpane");_.meta={name:"createAction",key:"createActionsetPreviousFlexpane",description:"Sets the props we need to re-open the last flexpane"};const d=(0,t.Ay)("Sets channelDetailsOpen");d.meta={name:"createAction",key:"createActionsetChannelDetailsOpen",description:"Sets channelDetailsOpen"};const i=(0,t.Ay)("Sets flexpane highlight state");i.meta={name:"createAction",key:"createActionsetFlexpaneHighlight",description:"Sets flexpane highlight state"};const m=(0,t.Ay)("Sets flexpane section currently docked");m.meta={name:"createAction",key:"createActionsetDockedFlexpaneSection",description:"Sets flexpane section currently docked"};const h=(0,t.Ay)("Add or remove from list expanded inputs");h.meta={name:"createAction",key:"createActionsetMessageInputExpanded",description:"Add or remove from list expanded inputs"};const v=(0,t.Ay)("Sets the last tab for a given channel id");v.meta={name:"createAction",key:"createActionsetLastTabForChannelId",description:"Sets the last tab for a given channel id"}},5215813485:(z,A,e)=>{"use strict";e.d(A,{A:()=>m,U:()=>d});var t=e(8734174229),n=e(1031947056),s=e(5468652247),a=e(359615813),c=e(7610481478),o=e(5221490142),r=e(5737576046),l=e(7884000776),_=e(8439865561),d;(function(h){h.fancy="fancy",h.frowny="frowny",h.neutral="neutral",h.sadSurprise="sad_surprise"})(d||(d={}));const i=(0,n.Ay)("Add ephemeral feedback message to channel or thread",(h,v,y)=>{const{message:T,inputText:I,inputDelta:p,ephemeralType:g,ignoreExistingMessage:E}=y,f=y.temporary!==!1,O=T.channel,C=T.thread_ts,M=C?s.F.threadsTempSlashCmdFeedback:s.F.tempSlashCmdFeedback;if((I||p)&&O)if(C)(0,t.A)({inputText:I,inputDelta:p,channelId:O,threadTs:C});else{const D=(0,r.zC)({viewContext:l.Y.MESSAGE_PANE,channelId:O});D&&(p?D.setContents({contents:p.ops}):I&&D.setText(I))}f?h((0,c.w)({ephemeralType:g||M,message:T,ignoreExistingMessage:E})):(h((0,o.P)({ephemeralType:g||M,channelId:O})),h((0,a.F)({message:T}))),T!=null&&T.text&&h((0,_.rl)({message:T.text}))});i.meta={name:"createThunk",key:"createThunkaddEphemeralFeedback",description:"Add ephemeral feedback message to channel or thread"};const m=i},1116859610:(z,A,e)=>{"use strict";e.d(A,{A:()=>f});var t=e(2101927269),n=e(8840779375),s=e(3750057149),a=e(1031947056),c=e(9536404279),o=e(4350638406),r=e(10127715),l=e(3521202413),_=e(8847766420),d=e(3110884894),i=e(8040098042),m=e(6739248722),h=e(2791814261),v=e(4587446194),y=e(796111729),T=e(9190452268),I=e(1284885799),p=e(3528815215),g=e(5751973043);const E=(0,a.Ay)("Add messages from history",(O,C,M)=>{let{msgs:D,channelId:P,isLimited:k,latest:x,oldest:F,hasMore:W,loading:Y,forceUnreadCount:S,deleted:L=[]}=M;const w=C(),J=(0,T.Cy)({getState:C});(0,h.L)(w)&&J.mark("rmsgs_addMessagesFromHistory");const G=(0,t.A)(D,ve=>{const Q=(0,m.k)(w,{channelId:P,ts:ve.ts});return Q&&(0,y.Ay)({getState:C}).warn(`Filtering out ${ve.ts} in ${P} history response because it was deleted`),!Q}),X=k?D.filter(ve=>ve.is_beyond_free_limit).map(ve=>ve.ts):g.Ml,te=(0,n.A)(G,"ts"),le=(0,i.A)(P)?P:(0,d.Sb)(P).channelId;le&&(0,o.mY)((0,_.ZT)(w),le,te),O((0,r.tT)(G)),O((0,c.VG)({channelId:P,timestamps:te,isLimited:k,blurredMessages:X,latest:x,oldest:F,hasMore:W,loading:Y,forceUnreadCount:S})),(0,s.A)(Y)&&O(Y?(0,I.v)({channelId:P,loadingOlder:!!x}):(0,p.f)({channelId:P})),(0,h.L)(w)&&J.measureAndClear("rmsgs_addMessagesFromHistory","rmsgs_addMessagesFromHistory"),L.forEach(ve=>O((0,l.j)({deleted_ts:ve,channel:le}))),G.forEach(ve=>(0,v.IY)(C,O,ve,ve))});E.meta={name:"createThunk",key:"createThunkaddMessagesFromHistory",description:"Add messages from history"};const f=E},8243624171:(z,A,e)=>{"use strict";e.d(A,{Fj:()=>F,Vq:()=>x});var t=e(9706240641),n=e.n(t),s=e(6422693406),a=e(1069376685),c=e(4446301238),o=e(5274604535),r=e(5373179915),l=e(8170643398),_=e(5096647761),d=e(148278831),i=e(6536982570),m=e(2023092677),h=e(5184226701),v=e(3339229351),y=e(4327331459),T=e(4862221402),I=e(1031947056),p=e(1761027239),g=e(4761125736),E=e(8276911661),f=e(3730613858);const O=u((W,Y)=>Y.map(S=>S.pasted&&!S.entity?{value:S.value,entity:(0,E.nv)(W,S.value)}:S),"getMemberInfoForPastedMembers"),C=u(W=>{const Y=W.entity||{};return(0,y.A)(W==null?void 0:W.value)||(0,l.NB)(Y)},"isAMember"),M=u(W=>{const Y=W.entity||{};return(0,T.A)(W.value)||(0,m.PH)(Y)},"isAUserGroup"),D={[v.IS.ALREADY_IN_CHANNEL]:!0,[v.IS.CANNOT_INVITE_SELF]:!0,[v.IS.ALREADY_IN_CHANNEL_UG]:!0},P={},k=u(W=>{let{shouldPreserve:Y,teamId:S}=W;P[S]=Y},"setShouldPreserveModalsOnNavigation"),x=u(W=>{let{teamId:Y}=W;return P[Y]},"getShouldPreserveModalsOnNavigation"),F=(0,I.Ay)("Add users and user groups to channel",function(){var W=(0,t.coroutine)(function*(Y,S,L){let{selectedMembers:w,addMemberMode:J,channel:G,keepChannelHistory:X,teamId:te,shouldSkipInitialStage:le}=L;const ve={channelId:G.id,force:!0,reason:"submit-invite-channel-invite-modal"};let Q,Ae;if(J===a.D.AllMembers)ve.inviteAll=!0,Q=[],Ae=[];else{const ce=O(S(),w),j=(0,o.A)(S(),G),N=(0,r.R)(S(),G);Q=ce.reduce((b,R)=>{if(R&&C(R)&&R.entity){const K=R,B=(0,f.Sv)(S(),G.id,K.value);if(!B.isKnown||!B.isMember){const $=(0,i.dQ)(K.entity),Z=(0,d.S)(S(),K.entity,G);(N||(0,_.g)(K.entity)&&$&&j.includes($)||Z)&&b.push(K.value)}}return b},[]),ve.users=Q.join(","),Ae=w.reduce((b,R)=>(R&&M(R)&&b.push(R.value),b),[]),ve.subteams=Ae.join(",")}const ae=ve.inviteAll||!!ve.users||!!ve.subteams,he=(0,g._Z)(S(),"shared_channel_invite_requested_event")==="on",_e={addedExistingMembers:ae,userInviteResults:Q.map(ce=>({ok:!0,invitee:ce,inviteeType:h.T0.User,accessType:h.BD.Member,error:""})),groupInviteResults:Ae.map(ce=>({ok:!0,invitee:ce,inviteeType:h.T0.UserGroup,accessType:h.BD.Member})),newChannelId:void 0};let ee;try{if(X)ae&&(yield Y((0,c.Cw)(ve)).then(ce=>{const{requested_invites:j=[]}=ce;ee=j}),he&&(_e.userInviteResults=_e.userInviteResults.map(ce=>{const j=ee.find(N=>N.user_id===ce.invitee);return{...ce,accessType:j?h.BD.SharedChannel:ce.accessType,inviteeType:j?h.T0.Email:ce.inviteeType,...he&&{isRequestedInvite:!!j}}})));else{k({shouldPreserve:!le,teamId:te}),ve.propagateInviteResult=!0;const{channel:ce}=yield Y((0,p.t)(ve));_e.newChannelId=ce.id,k({shouldPreserve:!1,teamId:te})}}catch(ce){var de;k({shouldPreserve:!1,teamId:te});const j=ce==null||(de=ce.data)===null||de===void 0?void 0:de.errors;if(!j){var Ie;if(!D[ce==null||(Ie=ce.data)===null||Ie===void 0?void 0:Ie.error])throw ce}j==null||j.forEach(N=>{if(D[N.error])return;const b=_e.userInviteResults.filter(K=>K.invitee===N.user);if(b.length)b[0].ok=!1,b[0].error=N.error;else if(w.length===1&&!N.user&&le){var R;_e.userInviteResults=[{ok:!1,invitee:(R=w[0])===null||R===void 0?void 0:R.value,inviteeType:h.T0.User,error:N.error,accessType:h.BD.Member}]}else _e.userInviteResults.push({ok:!1,invitee:N.user,inviteeType:h.T0.User,error:N.error,accessType:h.BD.Member})})}return s.S.resolve(_e)});return function(Y,S,L){return W.apply(this,arguments)}}());F.meta={name:"createThunk",key:"createThunkaddUsersAndGroupsToChannel",description:"Add users and user groups to channel"}},5661379004:(z,A,e)=>{"use strict";e.d(A,{r:()=>_});var t=e(1031947056),n=e(8620339321),s=e(6533394955),a=e(6695353875),c=e(5223893135),o=e(8646192222);const r=(0,t.Ay)("Go back in history in fullscreen mode",(d,i)=>{window.history.back()});r.meta={name:"createThunk",key:"createThunkgoBackInFullscreenMode",description:"Go back in history in fullscreen mode"};var l=e(4326266690);const _=(0,t.Ay)("Go back in history",(d,i)=>{const m=i(),h=(0,a.yZ)(m),v=(0,o.iB)(m),y=(0,c.V)(m);if(v&&y)return d(r());if(h){(0,l.ud)((0,s.getStateForClientStore)())||(0,s.dispatchForClientStore)((0,n.oX)());return}window.history.back()});_.meta={name:"createThunk",key:"createThunkgoBackInWindowHistory",description:"Go back in history"}},7606925238:(z,A,e)=>{"use strict";e.d(A,{h:()=>s});var t=e(1031947056),n=e(6695353875);const s=(0,t.Ay)("Go forward in history",(a,c)=>{const o=c();(0,n.yZ)(o)||window.history.forward()});s.meta={name:"createThunk",key:"createThunkgoForwardInWindowHistory",description:"Go forward in history"}},8496310524:(z,A,e)=>{"use strict";e.d(A,{I:()=>c,u:()=>a});var t=e(5751973043),n=e(7969244833),s=e(9101533895);const a=u(o=>(o==null?void 0:o.name)||"","getActionName"),c=u((o,r,l)=>{const _=!l;let d=t.Ml;if(l){const i=(0,s.OL)(o,l);d=i&&(0,n.f)(o,i)||t.Ml}return r.teams&&(d.length||_)&&!r.isWorkspaceAgnostic?_?r.teams:r.teams.filter(m=>d.includes(m)):t.Ml},"getActionRelatedWorkspaces")},3982416567:(z,A,e)=>{"use strict";e.d(A,{O4:()=>a,OB:()=>o});var t=e(937317117),n=e(5597672932);const s="canvas_version_history_enabled",a=u(r=>(0,n.x)(r,s),"getCanvasVersionHistoryEnabledTeamPref"),c=u((r,l)=>{const _=(0,t.Lp)(r,l);return _?_.team_pref_version_history_enabled:!1},"getOwnerCanvasVersionHistoryEnabledTeamPref"),o=u((r,l)=>l?!!a(r)&&!!c(r,l):!1,"isCanvasVersionHistoryEnabled")},2063075339:(z,A,e)=>{"use strict";e.d(A,{Z:()=>a});var t=e(1407713935),n=e(6007206761),s=e(6113051341);const a=u((c,o)=>!(0,t.JM)(o)&&!(0,n.F)(o)&&!(0,s.N)(o),"canBeExternallyShared")},2912967402:(z,A,e)=>{"use strict";e.d(A,{B2:()=>r,Bw:()=>v,CM:()=>m,FA:()=>_,Jr:()=>h,Kg:()=>g,QS:()=>o,Vp:()=>I,bS:()=>p,bw:()=>l,oP:()=>i});var t=e(3078252698),n=e(735940183),s=e(4724591729),a=e(796111729);const c=new n.Ay("channels"),o=250,r=250;function l(f){return(0,t.A)(f)?f.length>o:((0,s.Cu)()&&(0,a.Wo)().warn("Argument `topic` passed to `channelTopicExceedsLimit()` is not a string"),!1)}u(l,"channelTopicExceedsLimit");const _="too_long",d="restricted_action",i="user_is_restricted",m="method_not_supported_for_channel_type",h="method_not_supported_for_dm";function v(f){switch(f){case _:return c.t("Channel topics can only include up to {max} characters \u2014 please make this topic shorter.",{max:o});case d:case i:return c.t("It looks like you don\u2019t have permission to change the channel topic. Please check with your workspace admin.");case m:return c.t("It\u2019s not possible to set a topic here, unfortunately.");case h:return c.t("Regrettably, direct messages do not have topics.");default:return c.t("It looks like setting the channel topic didn\u2019t work, for some reason. Try again?")}}u(v,"getChannelTopicError");const y="too_long",T="restricted_action",I="user_is_restricted",p="method_not_supported_for_channel_type",g="method_not_supported_for_dm";function E(f){switch(f){case y:return c.t("That purpose is too long. Please try again with fewer than {max} characters.",{max:r});case T:case I:return c.t("Uh oh! You don\u2019t have permission to change the purpose. Talk to your workspace admin.");case p:return c.t("It\u2019s not possible to set a purpose here, unfortunately.");case g:return c.t("Regrettably, direct messages do not have purposes.");default:return c.t("Uh oh! Something went wrong with setting the purpose. Please try again.")}}u(E,"getChannelPurposeError")},8243083011:(z,A,e)=>{"use strict";e.d(A,{q:()=>r});var t=e(3677514771),n=e(9101533895),s=e(1407713935),a=e(6113051341),c=e(6839188756),o=e(8040098042);const r=u((l,_)=>{if(!_||!(0,o.A)(_))return!1;const d=(0,t.H7)(l),i=(0,n.OL)(l,_),m=(0,s.JM)(i),h=(0,a.N)(i),v=(0,c.Ny)(d);return!(m||!v&&!h)},"doBroadcastKeywordPrefsApplyForChannel")},4559887502:(z,A,e)=>{"use strict";e.d(A,{i:()=>s});var t=e(9289081806),n=e(1407713935);const s=u((a,c)=>{if((0,n.JM)(c)||!a)return!1;const o=(0,t.mG)(c),r=o?a.get(o):null;return r?(r==null?void 0:r.length)>1:!1},"doesChannelHaveNonUniqueName")},7868634217:(z,A,e)=>{"use strict";e.d(A,{Z:()=>l,Y:()=>_});var t=e(5751973043),n=e(8701485242),s=e(8921478798),a=e(8276911661),c=e(3037015781),o=e(9262712126);function r(d,i,m){const h=!m;var v;const y=(v=(0,a.nv)(d,i,{preferNonExistentToNull:!1,fetchIfMissing:h}))!==null&&v!==void 0?v:void 0;return!y||m&&(0,c.mX)(y)?i:(0,o.wg)(y)}u(r,"getRealMemberNameById");const l=u((d,i)=>i?i.map(m=>({id:m,name:(0,s.I)(d,m)})).sort((m,h)=>(0,n.Ay)(m.name,h.name)).map(m=>m.id):t.Ml,"getAlphabeticallySortedMemberIds"),_=u((d,i)=>!i||!i.length?t.Ml:i.map(m=>({id:m,name:r(d,m)})).sort((m,h)=>(0,n.Ay)(m.name,h.name)).map(m=>m.id),"getRealNameAlphabeticallySortedMemberIds")},6045879501:(z,A,e)=>{"use strict";e.d(A,{H:()=>t});function t(n){return n&&n.emoji}u(t,"getEmojiCollectionEmoji")},370406050:(z,A,e)=>{"use strict";e.d(A,{M:()=>t});function t(n){return n&&n.name}u(t,"getEmojiCollectionName")},5071545805:(z,A,e)=>{"use strict";e.d(A,{j:()=>t});function t(n){return n&&n.installed}u(t,"isEmojiCollectionInstalled")},3890290905:(z,A,e)=>{"use strict";e.d(A,{Y:()=>t});const t=u(n=>n&&n.name,"getEmojiName")},4282439381:(z,A,e)=>{"use strict";e.d(A,{x:()=>n});var t=e(4761125736);const n=u(s=>(0,t._Z)(s,"a11y_emoji_group")==="on","isEmojiGroupEnabled")},6247499644:(z,A,e)=>{"use strict";e.d(A,{q:()=>t});function t(n){return/^[a-zA-Z0-9\u00E0\u00E1\u00E2\u00E4\u00E3\u00E8\u00E9\u00EA\u00EB\u00ED\u00EE\u00EF\u00F3\u00F6\u00F4\u00F5\u0153\u00FA\u00F9\u00FB\u00FC\u00FF\u00E7\u00DF\u00F1\u00C0\u00C1\u00C2\u00C4\u00C3\u00C8\u00C9\u00CA\u00CB\u00CD\u00CE\u00CF\u00D3\u00D6\u00D4\u00D5\u0152\u00DA\u00D9\u00DB\u00DC\u0178\u00C7\u00D1\uFF41-\uFF5A\uFF10-\uFF19-_+'\uFF3F\uFF0B\u30FC\u3005\u3041-\u3096\u30A0-\u30FF\uFF61-\uFF9F\u3400-\u4DB5\u4E00-\u9FFF\u2E80-\u2FD5\u1100-\u11FF\uA960-\uA97F\uAC00-\uD7A3\uD7B0-\uD7FF\u3139-\u318F\uF900-\uFAFF\u0400-\u04FF\u0500-\u052F]*$/.test(n)}u(t,"isValidEmojiName")},102566929:(z,A,e)=>{"use strict";e.d(A,{Fh:()=>_,Iz:()=>l,gC:()=>r});var t=e(9829579108),n=e(937317117),s=e(497761763),a=e(6078549397),c=e(5333401344);const o=(0,t.Ay)((d,i)=>{const{fileIdOrQuipThreadId:m}=(0,a.EX)(i);if((0,s.A)(m)){var h;return(h=(0,n.Lp)(d,m))!==null&&h!==void 0?h:null}return null});o.meta={name:"createSelector",key:"createSelectormaybeGetFileByCompoundId",description:(d,i)=>{const{fileIdOrQuipThreadId:m}=(0,a.EX)(i);if((0,s.A)(m)){var h;return(h=(0,n.Lp)(d,m))!==null&&h!==void 0?h:null}return null}};const r=(0,t.Ay)((d,i)=>{const m=o(d,i);return m&&(0,c.uz)(m)?m:null});r.meta={name:"createSelector",key:"createSelectormaybeGetExistentFileByCompoundId",description:(d,i)=>{const m=o(d,i);return m&&(0,c.uz)(m)?m:null}};function l(d){return d.linked_channel_id}u(l,"getLinkedChannelId");function _(d){return["spaces-example-onboarding-canvas","spaces-example-team-meeting"].includes(d)}u(_,"isSampleCanvas")},6470070112:(z,A,e)=>{"use strict";e.d(A,{$t:()=>cn,$z:()=>mt,A5:()=>Ht,Bn:()=>se,F7:()=>zt,Fm:()=>Re,Ft:()=>ze,Gb:()=>Ce,Gf:()=>Je,J6:()=>Wn,K8:()=>yt,Lb:()=>gn,MY:()=>vt,NZ:()=>fe,Pn:()=>$,Qj:()=>Lt,Qw:()=>ct,R1:()=>Tt,R8:()=>jt,RW:()=>Ye,Rc:()=>xe,S9:()=>Yt,TA:()=>Mn,U6:()=>De,UA:()=>nn,UE:()=>Cn,Ul:()=>Ne,VQ:()=>Pn,Vh:()=>Qt,WH:()=>rn,Wd:()=>Me,Xx:()=>ge,ZP:()=>_t,bD:()=>He,cq:()=>kn,df:()=>ft,eu:()=>lt,gG:()=>et,gO:()=>$n,hp:()=>Bt,hv:()=>un,kn:()=>hn,oz:()=>Ke,pZ:()=>at,pl:()=>pe,pt:()=>Te,pw:()=>pt,qp:()=>Rt,r5:()=>qt,rl:()=>Be,sp:()=>Wt,sx:()=>nt,uc:()=>$t,uz:()=>_n,vw:()=>Z,w1:()=>it,wc:()=>tt,wu:()=>Ft,xe:()=>Nt,xv:()=>Vn,xz:()=>Pe});var t=e(9113979368),n=e(8571983633),s=e(1703559452),a=e(2101927269),c=e(7174777686),o=e(5333401344),r=e(5795074931),l=e(8170643398),_=e(9262712126),d=e(3479134063),i=e(9101533895),m=e(7067820909),h=e(4761125736),v=e(5761207079),y=e(5597672932),T=e(2047021170),I=e(8163773562),p=e(387328355),g=e(9548972574),E=e(6251210828),f=e(9712681361),O=e(6007206761),C=e(395285811),M=e(4630136761),D=e(4262121634),P=e(9289081806),k=e(8798294025),x=e(1407713935),F=e(4827886670),W=e(6533394955),Y=e(5332875232),S=e(92886754),L=e(8276911661),w=e(8286248123),J=e(8233775522),G=e(7366481123),X=e(1990810649),te=e(9680914051),le=e(9744874022),ve=e(571104883),Q=e(735940183),Ae=e(8921478798),ae=e(5286203919),he=e(462591818),_e=e(4159322694),ee=e(3848681746),de=e(6575028637),Ie=e(8645544190),ce=e(1766818988),j=e(279118289),N=e(7884000776),b=e(3474336343),R=e(6827180593),K=e(1340402138),B=e(1289024643),$;(function(ue){ue.EXTERNALLY_SHARED_CHANNEL="externally_shared_channel",ue.ADMIN_DISABLED="admin_disabled",ue.UNSUPPORTED_BROWSER="unsupported_browser"})($||($={}));var Z;(function(ue){ue[ue.BROWSER=1]="BROWSER",ue[ue.MAC=2]="MAC",ue[ue.WINDOWS=3]="WINDOWS"})(Z||(Z={}));const re=new Q.Ay("huddles"),Te=(0,j.A)(ue=>{const ke=(0,K.R)(ue);return(((0,de.ss)(ue)?Tn(ue,"allow_huddles"):(0,y.x)(ue,"allow_huddles"))||!1)&&!ke});var Ce;(function(ue){ue.ACTIVE="active",ue.INACTIVE_BUT_LIVE="inactive-but-live",ue.MISSED="missed"})(Ce||(Ce={}));function Pe(ue,ke){if(!ke)return[!1,void 0];if((0,C.jT)(ke))return[!1,void 0];const Xe=Te(ue),dt=Xe||(0,ce.I)(ue,ke.id);if(!Xe&&!(0,ce.I)(ue,ke.id))return[!1,$.ADMIN_DISABLED];if(!(0,o.uz)(ke)||(0,D.V)(ue,ke)||(0,P.Gh)(ue,ke.id)||!(0,F.E)(ue,ke.id)&&!(0,x.PC)(ke)||(0,P.bU)(ke)||(0,O.F)(ke)||(0,M.Zz)(ke)||(0,_e.M)(ke)||(0,P.dq)(ue,ke)||!dt)return[!1,void 0];if((0,S.yh)())return[!1,$.UNSUPPORTED_BROWSER];const bt=(0,h._Z)(ue,"huddles_channel_properties")==="on";let be=!1;if(bt){var U;be=!!(!(ke==null||(U=ke.properties)===null||U===void 0)&&U.huddles_restricted)}else{const ne=(0,I.d)(ue,ke.id,"can_huddle");be=ne&&(ne==null?void 0:ne.enabled)===!1}const V=Dt(ue,ke.id);return be?[!1,$.ADMIN_DISABLED]:V===!1?[!1,$.ADMIN_DISABLED]:[!0,void 0]}u(Pe,"doesChannelSupportHuddlesWithReason");const fe=u(()=>{const ue=(0,W.getClientStoreInstance)();if(!ue)return!1;const ke=ue.getState(),Xe=(0,ae.Ak)(ke);return!(0,t.A)(Xe)},"hasActiveHuddleReferenceInClientStore"),pe=u(ue=>{const ke=Te(ue),Xe=fe();return ke||Xe},"isHuddleEnabledOrHasActiveHuddle");function q(ue,ke){var Xe;const dt=(Xe=getMemberById(ue,ke))!==null&&Xe!==void 0?Xe:void 0;return!isBotUser(dt)&&!isSlackbot(dt)&&!isExternal(dt)}u(q,"canUserBeInvitedToHuddle");function se(ue,ke){return Pe(ue,ke)[0]}u(se,"doesChannelSupportHuddles");function ge(ue,ke){return Te(ue)?(0,g.LY)(ue,ke)>0:!1}u(ge,"doesChannelHaveHuddle");function Oe(ue,ke){const Xe=getDisplayNameForChannel(ue,ke,{publicChannelIncludeHashSign:!1,imIncludeAtSign:!1});let dt=[],bt="";if(isMpim(ke))dt=getMpimMembersInAlphabeticalOrder(ue,ke)||[],bt="Waiting for others...";else if(isIm(ke)){const V=getMemberIdFromIm(ke);V&&dt.push(V),bt=`Waiting for ${Xe}`}else return Xe;const be=getAllConnectedPeers(ue)||[];if(be.length===0)return bt;const U=be.map(V=>V.userId);return dt.filter(V=>U.includes(V)).map(V=>getPrefCompliantMemberNameById(ue,V)).join(", ")}u(Oe,"getDisplayNameActiveParticipants");const Le=new Set([G.vT.SpeakingWhenMuted,G.vT.UpdateSlack,G.vT.RemotePeerMuted,G.vT.RemotePeerSlowConnection,G.vT.ScreenShareFreeTeam,G.vT.NoGroupCallsForFreeTeam,G.vT.PeerMuteRequest]),We=new Set([G.vT.SpeakingWhenMuted,G.vT.UpdateSlack,G.vT.RemotePeerMuted,G.vT.RemotePeerSlowConnection,G.vT.ScreenShareFreeTeam,G.vT.NoGroupCallsForFreeTeam]);function Re(ue){return(0,G.xw)(ue).find(Xe=>!Le.has(Xe.type))}u(Re,"getAlertForHuddlesBanner");function we(ue){return pe(ue)&&!!Re(ue)}u(we,"shouldShowHuddlesBanner");function Je(ue){const ke=(0,W.getStateForClientStore)();return we(ue)&&!(0,ae.j)(ke)}u(Je,"shouldShowHuddlesBannerInWorkspace");function it(ue,ke,Xe){const dt=(0,g.LY)(ue,ke),bt=(0,i.OL)(ue,ke),be=(0,x.mz)(bt)||void 0,U=(0,W.getStateForClientStore)(),{callId:V}=(0,ae.Qn)(U)||{};return{channel_id:ke,channel_type:be,num_participants:dt,is_recommended:Xe,room_id:V}}u(it,"getHuddlesClogContext");function et(ue,ke){return{...it(ue,ke),window_focused:(0,J.ko)(ue),window_visible:(0,m.Sr)(ue)}}u(et,"getHuddlesClogContextForBackgroundActions");function lt(ue){return[f.RJ.STARTING,f.RJ.PENDING,f.RJ.COMPLETING_PRE_JOIN].includes(ue)}u(lt,"isHuddleLoadingState");function nt(ue){return lt(ue)||ue===f.RJ.STARTED}u(nt,"isHuddleActiveState");function at(ue){return lt(ue)||ue===f.RJ.ENDING}u(at,"isHuddleTransitionState");function ze(ue){return[f.RJ.NOT_STARTED,f.RJ.SURVEY,f.RJ.SURVEY_GOOD].includes(ue)}u(ze,"isHuddleEndState");function Ke(ue){return[f.RJ.SURVEY,f.RJ.SURVEY_GOOD].includes(ue)}u(Ke,"isHuddleSurveyState");function He(ue,ke){const Xe=(0,r.WR)(ue);return!!(0,g.ft)(ue,ke).find(dt=>{let{id:bt}=dt;return bt===Xe})}u(He,"isUserHuddlingInChannel");function Ye(ue){var ke;const Xe=ue==null||(ke=ue.meeting)===null||ke===void 0?void 0:ke.ExternalMeetingId;var dt;return(dt=Xe==null?void 0:Xe.split("-")[1])!==null&&dt!==void 0?dt:null}u(Ye,"getRoomIdFromCredentials");function _t(ue,ke,Xe){if(!ke)return!1;const dt=(0,P.Mi)((0,i.Pu)(ue,ke.id));return!(!Te(ue)||!(0,o.uz)(ke)||(0,l.fy)(ke)&&!Xe||!(0,l.ls)(ke)||dt)}u(_t,"canHuddleWithMember");function vt(ue){return ue===f.J_.IN_PROGRESS_ALONE_NOTICE_ACTIVE||ue===f.J_.INITIAL_ALONE_NOTICE_ACTIVE}u(vt,"isAloneInHuddleCoachmarkOpen");function Tt(ue){return ue===f.J_.INITIAL_ALONE_NOTICE_DISMISSED||ue===f.J_.IN_PROGRESS_ALONE_NOTICE_DISMISSED}u(Tt,"isAloneInHuddleCoachmarkDismissed");function Lt(ue,ke,Xe){var dt,bt;if(ke===null||(0,g.LY)(ue,ke)>0||((dt=(0,ae.aQ)((0,W.getStateForClientStore)()))===null||dt===void 0?void 0:dt.channelId)===ke)return!1;const be=(0,i.OL)(ue,ke);if(!be||!(0,o.uz)(be))return!1;if(Xe)return!0;if(!be||(0,x.JM)(be))return!1;const U=(0,w.q8)(ue,ke),V=(0,T.ty)(ue,"huddles_show_shouty_rooster"),ne=U==null||(bt=U.counts)===null||bt===void 0?void 0:bt.member_count;return!(!ne||ne<=te.Qp||V===!1)}u(Lt,"shouldShowHuddlesShoutyRoosterWarning");function ft(ue){return(0,Y.nC)(ue)?te.yL:te.$s}u(ft,"getParticipantLimit");function mt(){return(0,ve.cX)()?(0,ve.y3)()?re.t("Command + Shift + H"):re.t("Command + Shift + Option + H"):(0,ve.y3)()?re.t("Ctrl + Shift + H"):re.t("Ctrl + Shift + Alt + H")}u(mt,"getHuddleToggleKeyboardShortcutString");const Yt=u((ue,ke,Xe)=>{const dt=Te(ue)&&(0,Y.Ms)(ue);if(ke)return dt&&_t(ue,ke);if(Xe){const bt=(0,i.OL)(ue,Xe),be=bt&&se(ue,bt);return dt&&be}return dt},"shouldShowCallMenuHuddleDiscoveryLink"),nn=u((ue,ke)=>(0,n.A)(ke)?(0,y.x)(ue,"allow_huddles_transcriptions")||!1:(0,de.ss)(ue)?ln(ue,"allow_huddles_transcriptions",ke):(0,y.x)(ue,"allow_huddles_transcriptions")||!1,"isHuddlesTranscriptionsEnabledForChannel"),jt=u(ue=>(0,de.ss)(ue)?Tn(ue,"allow_huddles_transcriptions"):(0,y.x)(ue,"allow_huddles_transcriptions")||!1,"isHuddlesTranscriptionsEnabledForOrgWorkspaces"),gn=u((ue,ke)=>{const Xe=(0,r.WR)(ue);return(0,L.nv)(ue,(0,p.fy)(ke)?Xe:ke.userId)},"getMemberFromPeer"),on=u((ue,ke)=>(0,v.a)(ue,ke==null?void 0:ke.id)?re.t("Name hidden"):(0,_.wg)(ke)||(0,_.Fh)(ke),"getMemberName"),Xt=u((ue,ke)=>{const Xe=getCurrentUserId(ue);if(isSelfPeerId({id:ke}))return getMemberById(ue,Xe);const dt=getPeerById(ue,ke);if(dt)return gn(ue,dt)},"getMemberFromPeerId"),rn=u((ue,ke)=>{const Xe=gn(ue,ke);return on(ue,Xe)},"getMemberNameFromPeer"),Zt=u((ue,ke)=>{if(!ke)return;const Xe=Xt(ue,ke);return on(ue,Xe)},"getMemberNameFromPeerId"),Ht=u((ue,ke)=>{const Xe=(0,L.nv)(ue,ke);return on(ue,Xe)},"getMemberNameFromUserId"),Bt=u((ue,ke)=>{const Xe=(0,L.nv)(ue,ke);return(0,l.fD)(Xe)},"getMemberPronounsFromUserId"),Qt=u(ue=>{let{state:ke,roomId:Xe}=ue;const dt=(0,g.P_)(ke,Xe);return!dt||dt.hasEnded?!1:dt.allParticipants.length===0?!0:!(dt.allParticipants.length>0&&dt.activeParticipants.length===0)},"isHuddleActive"),sn=u(ue=>{let{state:ke,roomId:Xe}=ue;const dt=(0,g.P_)(ke,Xe);return!dt||!!dt.hasEnded},"isHuddleEnded"),Mn=u(ue=>{let{state:ke,roomId:Xe,userId:dt}=ue;if(!Xe||!dt||!Qt({state:ke,roomId:Xe}))return!1;const bt=(0,g.P_)(ke,Xe);return bt?(0,s.A)(bt.activeParticipants,be=>(0,he.MZ)(be)&&be.slackId===dt):!1},"isUserInActiveHuddle"),ct=u((ue,ke)=>{if(!ke||!(0,Y.Z0)(ue))return!1;const Xe=(0,B.H6)(ue,ke);if(!Xe)return!1;const dt=(0,r.WR)(ue);return(0,Y.Z0)(ue)&&!!Xe.hasEnded&&dt in(Xe.missedParticipants||{})},"getDidUserMissHuddleInvite"),yt=u((ue,ke)=>{switch(!0){case Qt({state:ue,roomId:ke}):return Ce.ACTIVE;case!sn({state:ue,roomId:ke}):return Ce.INACTIVE_BUT_LIVE;case ct(ue,ke):return Ce.MISSED;default:return}},"getHuddleActivityStatus"),Rt=u(ue=>{let{state:ke,roomId:Xe,userId:dt}=ue;if(!Xe||!dt||Qt({state:ke,roomId:Xe}))return!1;const bt=(0,g.P_)(ke,Xe);return bt?(0,s.A)(bt.allParticipants,be=>(0,he.MZ)(be)&&be.slackId===dt):!1},"wasUserInEndedHuddle"),xe=u(ue=>{let{participantsIds:ke,userIdsToExclude:Xe}=ue;return!ke||!ke.length?[]:(0,a.A)(ke,dt=>!(0,c.A)(Xe,dt))},"getParticipantIdsFiltered"),Nt=u(ue=>{let{state:ke,channel:Xe,roomId:dt}=ue;if(!Xe||!dt||!(0,x.LI)(Xe))return!1;const bt=(0,k.e)(Xe),be=(0,g.P_)(ke,dt);return be?!Mn({state:ke,roomId:dt,userId:bt})&&(0,s.A)(be.allParticipants,U=>(0,he.MZ)(U)&&U.slackId===bt):!1},"hasImUserJoinedAndLeft"),Ft=u((ue,ke)=>{if(!ke)return!1;const Xe=(0,i.OL)(ue,ke);if(!Xe)return!1;const dt=se(ue,Xe);return!!Xe&&!(0,P.Ur)(Xe)&&!(0,D.V)(ue,Xe)&&!!dt},"isValidChannelForHuddleNux"),qt=u((ue,ke)=>{let{channelId:Xe}=ke;if(!Xe)return!1;const dt=(0,W.getStateForClientStore)(),be=(0,ae.hc)(dt)===Xe;return He(ue,Xe)&&!be},"isUserHuddlingOnAnotherDevice"),un=u(ue=>{let{isDM:ke,escImOrMpimMemberIds:Xe,huddlesDisabledUserIds:dt}=ue;return ke&&Xe&&dt&&dt.length===1&&dt[0]===Xe[0]},"isHuddleDisabledForDM"),tt=u(ue=>{let{isMPDM:ke,escImOrMpimMemberIds:Xe,huddlesDisabledUserIds:dt}=ue;return ke&&Xe&&dt&&dt.length===Xe.length-1},"isHuddleDisabledForMPDM"),pt=u(()=>(0,Ie.xY)()?(0,ve.cX)()?Z.MAC:Z.WINDOWS:Z.BROWSER,"getTitlebarVariant");function Dt(ue,ke){return ln(ue,"allow_huddles",ke)}u(Dt,"getIsHuddlesAllowedTeamPrefForChannel");function Wt(ue,ke){return(0,n.A)(ke)?(0,y.x)(ue,"allow_huddles_video")||!1:(0,de.ss)(ue)?ln(ue,"allow_huddles_video",ke):(0,y.x)(ue,"allow_huddles_video")||!1}u(Wt,"isHuddlesVideoEnabledForChannel");function zt(ue){return(0,de.ss)(ue)?Tn(ue,"allow_huddles_video"):(0,y.x)(ue,"allow_huddles_video")||!1}u(zt,"isHuddlesVideoEnabledForOrgWorkspaces");function ln(ue,ke,Xe){if((0,de.ss)(ue)){const dt=(0,i.OL)(ue,Xe);return(0,x.QR)(dt)?(0,ee.p$)(ue,ke):(0,ee.Bx)(ue,ke,Xe)}return(0,y.x)(ue,ke)||!1}u(ln,"getIsHuddlesOrgAllowedPrefEnabledForChannel");function Tn(ue,ke){return(0,ee.p$)(ue,ke)}u(Tn,"isCurrentUserWhoCanDoTeamPrefOnSelfWorkspaces");function cn(ue,ke){let{huddleId:Xe}=ke;var dt;const bt=(0,E.fG)(ue,{huddleId:Xe});return{canvas_thread_channel_id:bt==null?void 0:bt.channelId,canvas_thread_id:bt==null||(dt=bt.ts)===null||dt===void 0?void 0:dt.replace(".","")}}u(cn,"getHuddleClogContext");function hn(ue){return{canvas_huddle_session_id:(0,ae.oK)(ue)}}u(hn,"getHuddleClogClientContext");function Cn(ue){const ke=(0,ae.E9)(ue),Xe=(0,ae.hc)(ue);return{room_id:ke,channel_id:Xe}}u(Cn,"getHuddleClogCallsContext");function _n(){const ue=(0,W.getStateForClientStore)();return(0,ae.j)(ue)}u(_n,"isHuddleWindowOpenInClientStore");function Vn(ue){return!ue||ue.closed?null:ue.innerWidth<=le.m3?X.yG.WINDOW_COMPACT:X.yG.WINDOW_FULL}u(Vn,"getHuddleSurfaceFromWindowSize");function Wn(ue){const Xe=ue.screen.availTop,dt=isNaN(Xe)?!0:Math.abs(Xe-ue.screenTop)<=20,bt=ue.screen.availLeft,be=isNaN(bt)?!0:Math.abs(bt-ue.screenLeft)<=20,U=Math.abs(ue.screen.availHeight-ue.outerHeight)<=20,V=Math.abs(ue.screen.availWidth-ue.outerWidth)<=20;return dt&&be&&(U&&V)}u(Wn,"isHuddleWindowMaximized");function kn(ue){let{self:ke,peers:Xe}=ue;const bt=Xe.filter(U=>U.isCameraEnabled).length||ke.isCameraEnabled&&!ke.isHidingSelf,be=Xe.length+(ke.isHidingSelf?0:1);if(bt){if(be>=5)return le.ef;if(be===4)return le.oP;if(be===3)return le.v2}return le.v_}u(kn,"getCompactWindowDefaultHeight");const Pn=u(ue=>(0,Ie.qp)()?!!ue.document.fullscreenEnabled:!1,"isFullscreenEnabled"),$t=u(ue=>!!ue.document.fullscreenElement,"isWindowFullscreen"),$n=u((ue,ke)=>ke?ue.document.body.requestFullscreen():ue.document.exitFullscreen(),"setFullscreen");function De(ue){let{message:ke,parentMessage:Xe,viewContext:dt}=ue;return!!(Xe&&Xe.room_id&&(!dt||N.Y.MESSAGE_PANE===dt)&&(ke==null?void 0:ke.ts)!==(ke==null?void 0:ke.thread_ts))}u(De,"isMessageHuddleRecapMessage");function Ne(ue){if((0,b.Si)(ue))return!1;const Xe=(0,R.H)(ue);return Xe?Xe<=5:!0}u(Ne,"isSelfUserNewToHuddles");function Me(ue){return!!Te(ue)}u(Me,"isHuddlesPageEnabled");function Be(ue){const Xe=(0,i.h3)(ue),dt=[];return Xe.forEach(bt=>{dt.length<3&&se(ue,bt)&&dt.push(bt)}),dt}u(Be,"getChannelHuddleSuggestionsForNUX")},7148679525:(z,A,e)=>{"use strict";e.d(A,{eY:()=>C,QX:()=>P,dL:()=>M,oG:()=>k,Lz:()=>D,L7:()=>L,J5:()=>S,XH:()=>x,nY:()=>F});var t=e(2837660778),n=e(1340402138),s=e(7969244833),a=e(3792998666),c=e(8323393403),o=e(6839188756),r=e(7112191091),l=e(6693783993),_=e(4761125736),d=e(9951956014),i=e(8289365785);function m(w){return w&&{...w,type:(0,i.A)(w==null?void 0:w.type)==="owner"?["org_admin"]:["admin"]}}u(m,"mapToWhoCanStyle");function h(w,J){return(0,d.g)(w,"who_can_manage_guests",[J],m)}u(h,"canUserDoManageGuestsTeamPrefForTeamId");const v={mapToWhoCanStyle:m};var y=e(5795074931);const T=u((w,J)=>{if((0,_._Z)(w,"light_read_who_can_manage_guests_pref_migration")==="on"){const X=(0,y.TZ)(w);return J&&X?(0,l.l0)(w).includes(J.id):(0,l.mZ)(w)}return J?(0,o.r7)(J)?h(w,J.id)||!1:(0,r.Me)(w,J.id):!1},"canUserInviteGuests");var I=e(5184226701),p=e(7595282574),g=e(9101533895),E=e(8276911661),f=e(5597672932),O=e(3677514771);function C(w){let J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const G=(0,E.cA)(w),X=J??(0,O.H7)(w);if(!X)return!1;const te=(0,r.Me)(w,X.id),le=(0,l.tx)(w,{teamOrEnterpriseIds:[X.id]});return te||le?!0:(0,a.P)(G)?!1:(0,f.x)(w,"invites_only_admins",J==null?void 0:J.id)?T(w,X):!0}u(C,"canUserInviteMembersToWorkspace");function M(w,J,G){const X=J||(0,E.cA)(w),te=G||(0,O.H7)(w);return!(!te&&!te||(0,a.P)(X)||!(0,f.x)(w,"invite_requests_enabled",te.id))}u(M,"canUserRequestToInvite");function D(w){const J=(0,E.cA)(w),G=(0,O.H7)(w);return!G||(0,n.R)(w)?!1:(0,o.r7)(G)?!!(0,t.Mo)(w).filter(te=>M(w,J,te)||C(w,te)).length:!!(M(w,J,G)||C(w))}u(D,"canUserSeeInviteModal");function P(w,J){const G=(0,O.H7)(w);if(!G)return!1;const X=(0,g.OL)(w,J),te=(0,o.tc)(G),le=(0,o.r7)(G),ve=(0,c.D7)(w,J),Q=le?!F(w,X):D(w);return te&&Q||!te&&(Q||ve)}u(P,"canUserInviteToChannelByEmail");function k(w,J){const G=(0,E.cA)(w),X=J?(0,O._J)(w,J):(0,O.H7)(w);return!X||(0,o.tc)(X)?!1:M(w,G,X)?!0:T(w,X)}u(k,"canUserSeeAccountTypeOptions");function x(w,J){let{ignoreGuestSettings:G}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const X=(0,E.cA)(w),te=J?(0,O._J)(w,J):(0,O.H7)(w);if(!(0,o.r7)(te))return!1;const le=(0,r.Me)(w,te.id),ve=(0,l.tx)(w,{teamOrEnterpriseIds:[te.id]});return le||ve||!(0,f.x)(w,"invites_only_admins",te.id)||M(w,X,te)?!1:G?!0:T(w,te)}u(x,"shouldDisableFullMemberInviteOption");function F(w,J){const G=(0,s.f)(w,J);return!!(G!=null&&G.every(X=>x(w,X,{ignoreGuestSettings:!0})))}u(F,"shouldDisableFullMemberInviteOptionForChannel");function W(w){let{state:J,team:G,inviteType:X}=w,te=G;if(!G&&(te=getCurrentTeam(J),!te))return!1;const le=getTeamPref(J,"auth_mode"),ve=le==="google"||le==="saml";return isEnterpriseOrEnterpriseWorkspace(te)&&X===AccessType.Member||ve&&getTeamPref(J,"sso_auth_restrictions")===0}u(W,"shouldShowSsoAlert");function Y(w){let{state:J,inviteType:G}=w;const X=getTeamPref(J,"auth_mode"),te=getTeamPref(J,"sso_auth_restrictions");return X==="google"?G===AccessType.Member&&(te===0||te===1)||(G===AccessType.MultiChannelGuest||G===AccessType.SingleChannelGuest)&&te===0:!1}u(Y,"shouldShowGoogleDomainsNotice");function S(w){let{state:J,inviteType:G,team:X}=w;if(!G||!(0,I.LX)(G))throw new Error(`Invalid invite type: ${G}`);const te=X||(0,O.H7)(J);if(!te)return!1;const le=(0,f.x)(J,"invites_only_admins",te==null?void 0:te.id),ve=(0,r.Me)(J,te.id),Q=(0,l.tx)(J,{teamOrEnterpriseIds:[te.id]}),Ae=T(J,te);switch(G){case I.BD.Member:return ve||Q?!1:!!le;case I.BD.MultiChannelGuest:case I.BD.SingleChannelGuest:return!Ae;default:return!0}}u(S,"isRequestingInvitesForType");function L(w){let{state:J}=w;const G=(0,O.H7)(J);return(0,p.z$)()?!0:(0,o.r7)(G)?!!(0,f.x)(J,"hide_gsuite_invite_option"):!1}u(L,"isGoogleDirectoryDisabled")},9438480351:(z,A,e)=>{"use strict";e.d(A,{A:()=>s});var t=e(9101533895),n=e(9289081806);function s(a,c){const o=(0,t.Pu)(a,c&&c.id);return o?(0,n.$M)(o):null}u(s,"getImUnreadCountByMember")},9541658228:(z,A,e)=>{"use strict";e.d(A,{P:()=>o});var t=e(2003990933),n=e(5096647761),s=e(8847766420),a=e(6536982570),c=e(8170643398);function o(r,l){if(!r||!l||(0,n.g)(l))return!1;const _=(0,a.QI)(l);return(0,c.dk)(l)&&(_===(0,s.jV)(r)||_===(0,t.A)(l,"enterprise_user.enterprise_id"))}u(o,"isMemberFromOrg")},148278831:(z,A,e)=>{"use strict";e.d(A,{S:()=>l});var t=e(918457931),n=e(2298581483),s=e(6536982570),a=e(5096647761),c=e(2003903489),o=e(9541658228),r=e(893266994);const l=u((_,d,i)=>{if((0,a.g)(d))return!1;if((0,o.P)(_,d)){if((0,c.S)(i))return!0;if((0,t.t)(i))return(0,n.R)(_,i).some(v=>(0,s.nO)(d,v))}const m=(0,r.c)(i);return(0,s.nO)(d,m)},"isMemberOnSomeChannelWorkspace")},863407566:(z,A,e)=>{"use strict";e.d(A,{A:()=>T});var t=e(8455301571),n=e(2155512519),s=e(7606781622),a=e(3730613858),c=e(5795074931),o=e(8276911661),r=e(8170643398),l=e(4562579337),_=e(7334104107),d=e(9187449049),i=e(7616363684),m=e(1794107122),h=e(9290914927),v=e(1809170903);const y=23;function T(I,p,g){let E=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Math.max((0,n.UL)(),g),f=arguments.length>4?arguments[4]:void 0;if(!(0,t.si)(I,p))return[];const O=(0,t.r7)(I,p);if(!O||!O.timestamps)return[];const C=(0,s.h8)(I,p),M=O.timestamps.slice(-E),D=(0,c.WR)(I);let P=[],k=[],x=!1;const F=[],W=[],Y=[],S=[],L=[],w=[];let J=!1;for(let X=M.length-1;X>=0;X--){const te=C[M[X]],le=(0,_.Hr)(te);if(!le)continue;if(f&&le===D){J=!0;continue}if(!(f?F.includes(le)||Y.includes(le)||L.includes(le):P.includes(le))&&!(0,i.A)(te)&&(0,d.A)(te,D)){const Q=(0,a.Sv)(I,p,le),Ae=(0,o.nv)(I,le);if(x||(x=!(Q!=null&&Q.isKnown)||(0,r.t8)(Ae)),!x&&(Q!=null&&Q.isKnown)&&(Q!=null&&Q.isMember)&&!(0,l.A)(Ae)&&!(0,r.oy)(Ae)){if(f){if((0,h.gd)(I,le)==="active"?(0,v.Vd)(I,le)?(Y.push(le),S.push(Ae)):(F.push(le),W.push(Ae)):(L.push(le),w.push(Ae)),W.length===g||Y.length+w.length===y-g)break}else if(P.push(le),k.push(Ae),k.length===g)break}}}if(x)return[];if(f&&(W.length===g?(k=W,P=F):(k=W.concat(S.slice(0,g-W.length)),P=F.concat(Y.slice(0,g-L.length)),k.length<g&&(k=k.concat(w.slice(0,g-W.length)),P=P.concat(L.slice(0,g-L.length))))),k.length>=g)return k;const G=(0,m.$)(I,p);if(!G.length)return[];for(let X=0;X<G.length;X++){const te=G[X];if(te&&!P.includes(te)&&(f&&te===D?J=!0:(P.push(te),k.push((0,o.nv)(I,te)))),k.length===g)break}return k.length===0&&J&&(P.push(D),k.push((0,o.nv)(I,D))),k}u(T,"getLastNRelevantMembersInChannel")},7201482752:(z,A,e)=>{"use strict";e.d(A,{A:()=>c});var t=e(7334104107),n=e(7616363684),s=e(6457401668);const c=u(o=>!!((0,t.dK)(o)||(0,t.aw)(o)||(0,s.ys)(o)||(0,n.A)(o)),"isNonHumanMessage")},7616363684:(z,A,e)=>{"use strict";e.d(A,{A:()=>s});var t=e(7334104107),n=e(3339229351);function s(a){return(0,t.Hr)(a)===n.Q$}u(s,"isSlackbotMessage")},1521013946:(z,A,e)=>{"use strict";e.d(A,{$N:()=>f,Tg:()=>C,WJ:()=>M,Wm:()=>g,XN:()=>O,im:()=>I});var t=e(362134992),n=e(9101533895),s=e(3677514771),a=e(9457206156),c=e(4204210053),o=e(8234448831),r=e(497761763),l=e(4327331459),_=e(1233969417),d=e(110305600),i=e(8040098042),m=e(6212362990),h=e(462591818),v=e(6188550760),y=e(8959118205),T=e(311893736),I;(function(D){D.MESSAGE="message",D.FILE="file",D.MEMBER="member",D.ROOM="room",D.FREE_WILLY="free-willy",D.QUIP="quip",D.SEARCH="search",D.SLACKHELP="slackhelp",D.SHORTCUT_LINK_TRIGGER="shortcuts",D.HUDDLE="huddle",D.LIST="list",D.CHANNEL_CANVAS="canvas",D.ORG_CHART="org_chart",D.WIDGETS="widgets"})(I||(I={}));function p(D,P){if(!P)return null;const k=!1;return(0,n.OL)(D,P,k)||(0,n.Pu)(D,P.replace(/^@/,""))||(0,n.Os)(D,P)}u(p,"findChannelByIdentifier");function g(D){switch(D){case"archives":case"messages":case"conversation":return I.MESSAGE;case"file":case"files":return I.FILE;case"team":return I.MEMBER;case"calls":return I.ROOM;case"free-willy":return I.FREE_WILLY;case"docs":return I.QUIP;case"search":return I.SEARCH;case"slackhelp":return I.SLACKHELP;case"shortcuts":return I.SHORTCUT_LINK_TRIGGER;case"huddle":return I.HUDDLE;case"lists":return I.LIST;case"canvas":return I.CHANNEL_CANVAS;case"org_chart":return I.ORG_CHART;case"widgets":return I.WIDGETS;default:return null}}u(g,"getPermalinkType");function E(D,P,k,x){const F=(0,t.A)(P.split("/")),W=g(F[0]);switch(W){case I.MESSAGE:{var Y;const ve=F[1],Q=p(D,ve),Ae=Q&&Q.id||ve;if(!Ae)return null;if(F[2]==="tabs"){var S;return{type:W,channelId:Ae,tabId:(S=F[3])===null||S===void 0?void 0:S.toString()}}const ae=(0,a.nT)(k),he=(0,m.A)(F[2]),_e=(0,m.A)((Y=ae.thread_ts)===null||Y===void 0?void 0:Y.toString());return{type:W,channelId:Ae,ts:he,threadTs:_e}}case I.HUDDLE:{if(!F[1])return null;let ve=null,Q;if((0,i.A)(F[1])?ve=F[1]:(0,i.A)(F[2])&&(Q=F[1],ve=F[2]),ve){const Ae=p(D,ve),ae=Ae&&Ae.id||ve;return ae?{type:W,channelId:ae,teamId:Q}:null}return(0,h.bU)(F[1])?{type:W,roomId:F[1]}:null}case I.FILE:{const ve=F[2];return(0,r.A)(ve)?{type:W,fileId:ve}:null}case I.MEMBER:{const ve=F[1];return(0,l.A)(ve)?{type:W,memberId:ve}:null}case I.ROOM:{const ve=F[1];if(ve&&(0,h.bU)(ve))return{type:W,roomId:ve};const Q=F.length>2?F[2]:null;return Q&&(0,h.cd)(Q)?{type:W,callId:Q,channelId:F[1]}:Q&&(0,h.bU)(Q)?{type:W,roomId:Q,teamId:F[1]}:null}case I.FREE_WILLY:{const ve=F[2];return ve&&(0,h.cd)(ve)?{type:W,callId:ve,channelId:F[1]}:ve&&(0,h.bU)(ve)?{type:W,roomId:ve,teamId:F[1]}:null}case I.QUIP:{const ve=F[1],Q=F[2];if(Q&&(0,r.A)(Q)&&x!=="app"){var L,w;const Ae=(0,a.nT)(k),ae=(0,m.A)((L=Ae.focus_thread_ts)===null||L===void 0?void 0:L.toString())||"";return{type:W,fileId:Q,teamId:ve,focusThreadTs:ae,focusSectionId:((w=Ae.focus_section_id)===null||w===void 0?void 0:w.toString())||""}}return null}case I.LIST:{const ve=F[2];if(ve&&(0,r.A)(ve)){var J,G,X;const Q=(0,a.nT)(k),Ae=(0,m.A)((J=Q.focus_thread_ts)===null||J===void 0?void 0:J.toString())||"";return{type:W,fileId:ve,recordId:((G=Q.record_id)===null||G===void 0?void 0:G.toString())||"",viewId:((X=Q.view_id)===null||X===void 0?void 0:X.toString())||"",focusThreadTs:Ae}}return null}case I.SEARCH:{const ve=F[1];return{type:W,encodedSearchString:ve}}case I.SLACKHELP:{if(F.length>=2){if((0,_.A)(F[2]))return{type:W,articleId:F[2]};if(F[1]==="whats_new")return{type:W,articleId:"whats_new"}}return{type:W}}case I.SHORTCUT_LINK_TRIGGER:return(0,d.A)(F[1])?{type:W,triggerId:F[1]}:null;case I.CHANNEL_CANVAS:{var te,le;const ve=F[1],Q=p(D,ve),Ae=Q&&Q.id||ve;if(!Ae)return null;const ae={type:W,channelId:Ae},he=(0,a.nT)(k),_e=(te=he.focus_section_id)===null||te===void 0?void 0:te.toString(),ee=(le=he.last_read_ts)===null||le===void 0?void 0:le.toString();if(_e&&(ae.focusSectionId=_e),ee){const de=ee.length<13?1e3:1;ae.lastReadTs=Number(ee)*de}return ae}case I.ORG_CHART:{const ve=F[1];return(0,l.A)(ve)?{type:W,memberId:ve}:null}case I.WIDGETS:return{type:W,widgetId:F[1]};default:return null}}u(E,"getPermalinkParams");function f(D,P){if(!P)return null;const k=(0,o.Ay)(P);return O(D,k)}u(f,"parsePermalink");function O(D,P){const{hostname:k,pathname:x,search:F}=P;if(!k||!x||!(0,c.A)(k))return null;let W;k!=="slack.com"&&(W=k.split(".")[0]);const Y=E(D,x,F,W);return Y?{subdomain:W,...Y}:null}u(O,"parsePermalinkFromParsedUrl");function C(D,P){const k={channel:null,team:null};if(!D||!P)return k;const x=f(D,P);if(!x)return k;const{subdomain:F,channelId:W}=x,Y=(0,n.OL)(D,W),S=(0,s.lL)(D,F);return{channel:Y,team:S}}u(C,"getTeamAndChannelFromPermalink");function M(D,P){const k=(0,T.A)(D,P.subdomain);if(k)switch(P.type){case I.FILE:if(P.channelId&&P.fileId)return(0,v.M5)(y.De,{teamId:k,entityId:P.channelId,fileId:P.fileId});break;case I.MEMBER:if(P.channelId&&P.memberId)return P.ts?(0,v.M5)(y.Q$,{teamId:k,entityId:P.channelId,memberId:P.memberId,timestamp:P.ts}):(0,v.M5)(y.Q$,{teamId:k,entityId:P.channelId,memberId:P.memberId});break;case I.MESSAGE:if(P.channelId)return P.ts&&P.threadTs?(0,v.M5)(y.lM,{teamId:k,entityId:P.channelId,threadId:`${P.channelId}-${P.threadTs}`,replyTs:P.threadTs}):P.ts?(0,v.M5)(y._G,{teamId:k,entityId:P.channelId,timestamp:P.ts}):(0,v.M5)(y._G,{teamId:k,entityId:P.channelId});break;default:}}u(M,"getSonicUrlForPermalink")},9951956014:(z,A,e)=>{"use strict";e.d(A,{L:()=>_,g:()=>r});var t=e(9507365519),n=e(1328783052),s=e(8847766420),a=e(7969244833),c=e(9101533895),o=e(497537177);const r=u((d,i,m,h)=>{if((0,o.X)(d))return!0;const v=(0,t.p)(d,i,m);return Object.entries(v).map(y=>{let[T,I]=y;return[T,h(I)]}).some(y=>{let[T,I]=y;return(0,n.Ic)(d,I,T)})},"canUserDoCustomTeamPrefForTeamIds"),l=u((d,i,m,h)=>{if(!m)return!1;const v=(0,a.f)(d,m);return v?r(d,i,v,h):!1},"canUserDoCustomTeamPrefForChannel"),_=u(d=>({getWorkspaceIdsOnWhichUserCanDoCustomTeamPref:(i,m)=>(0,s.VO)(i).filter(v=>r(i,m,[v],d)),canUserDoCustomTeamPrefInSomeWorkspace:(i,m)=>{const h=(0,s.VO)(i);return r(i,m,h,d)},canUserDoCustomTeamPrefForChannel:(i,m,h)=>l(i,m,h,d),canUserDoCustomTeamPrefForChannelById:(i,m,h)=>{const v=(0,c.OL)(i,h);return l(i,m,v,d)}}),"createUserCanDoCustomTeamPrefRules")},5169892262:(z,A,e)=>{"use strict";e.d(A,{Cr:()=>c,DH:()=>a});var t=e(9951956014),n=e(1328783052);const s=u(l=>l?n.eT.ADMIN:n.eT.RA,"mapOnlyAdminToWhoCanStyle"),{getWorkspaceIdsOnWhichUserCanDoCustomTeamPref:a,canUserDoCustomTeamPrefInSomeWorkspace:c,canUserDoCustomTeamPrefForChannel:o,canUserDoCustomTeamPrefForChannelById:r}=(0,t.L)(s)},3769619294:(z,A,e)=>{"use strict";e.d(A,{V:()=>c,X:()=>a});var t=e(9101533895),n=e(7969244833),s=e(1328783052);const a=u((o,r,l)=>{if(!l)return!1;const _=(0,n.f)(o,l);return _?(0,s.TE)(o,r,_):!1},"canUserDoTeamPrefForChannel"),c=u((o,r,l)=>{const _=(0,t.OL)(o,l);return a(o,r,_)},"canUserDoTeamPrefForChannelById")},3683888369:(z,A,e)=>{"use strict";e.d(A,{l:()=>a});var t=e(1552255081),n=e(6839188756),s=e(3677514771);const a=u(c=>(0,t.F)(c)&&!(0,n.tc)((0,s.H7)(c)),"teamCanCreateStandaloneCanvas")},5757070316:(z,A,e)=>{"use strict";e.d(A,{J:()=>s});var t=e(78546762),n=e(1802262330);const s=u((a,c)=>{var o,r;let l,_,d;a&&(a.subtype==="file_comment"?[_,l]=["file_comment",a.comment]:(0,t.A)(a.subtype)?[_,l]=["file",c]:[_,l,d]=["message",a,a.channel]);const i=_==="message"?(o=l)===null||o===void 0?void 0:o.ts:(r=l)===null||r===void 0?void 0:r.id;return l&&(l._rxn_key||(0,n.B)(_,i,d))},"getReactionKey")},9001455011:(z,A,e)=>{"use strict";e.d(A,{t:()=>s});var t=e(9829579108),n=e(9889493721);const s=(0,t.Ay)(a=>!((0,n.Bf)(a)||!(0,n.pr)(a)));s.meta={name:"createSelector",key:"createSelectorshouldShowAppsLink",description:a=>!((0,n.Bf)(a)||!(0,n.pr)(a))}},2585735826:(z,A,e)=>{"use strict";e.d(A,{R:()=>_});var t=e(3677514771),n=e(1407713935),s=e(340763958),a=e(6113051341);const c=u((d,i)=>!(0,n.JM)(i)&&(0,s.ju)(i)&&!(0,a.N)(i),"canBeDisconnected");var o=e(1359849784),r=e(6839188756),l=e(6025726268);function _(d,i){if(i&&!c(d,i))return!1;if(i&&(0,l.M)(d,i))return!0;const m=(0,t.H7)(d);return(0,r.tc)(m)?!0:(0,o.I)(d,i)}u(_,"canUserDisconnectExternalSharedChannel")},8323393403:(z,A,e)=>{"use strict";e.d(A,{D7:()=>g,JO:()=>T,NU:()=>p,wi:()=>i});var t=e(6027162153),n=e(9101533895),s=e(3677514771),a=e(2063075339),c=e(7969244833),o=e(1407713935),r=e(5455782105),l=e(3916100664),_=e(6839188756),d=e(6841796315);const i={InvalidParams:Symbol("invalid_params"),FreeTeam:Symbol("free_team"),CannotRequest:Symbol("cannot_request_ext_shared"),InvalidChannel:Symbol("invalid_channel")},m={ok:!1,reason:i.InvalidParams},h={ok:!1,reason:i.FreeTeam},v={ok:!1,reason:i.CannotRequest},y={ok:!1,reason:i.InvalidChannel},T=u((E,f)=>{if(!(0,o.jq)(f))return m;const O=(0,r.k)(E),C=(0,_.qR)((0,s.H7)(E));if(!O&&!C)return h;const D=(0,l.lR)(E,{mustEveryWorkspaceBeAllowed:!0,teamIds:(0,c.f)(E,f)});return!(D!=null&&D.ok)&&(0,t.A)(D==null?void 0:D.reasons,l.jM.UserCannotCreateChannel,l.jM.AllowedWorkspacePref).length>0?v:(0,a.Z)(E,f)?d.O:y},"canUserInviteExternalMembersToChannelWithReason"),I=u((E,f)=>{const C=(0,n.OL)(E,f,!1);return C?T(E,C):m},"canUserInviteExternalMembersToChannelWithReasonById"),p=u((E,f)=>T(E,f).ok,"canUserInviteExternalMembersToChannel"),g=u((E,f)=>I(E,f).ok,"canUserInviteExternalMembersToChannelById")},1359849784:(z,A,e)=>{"use strict";e.d(A,{I:()=>g,r:()=>p});var t=e(4761125736),n=e(8276911661),s=e(6693783993),a=e(3677514771),c=e(598369692),o=e(9289081806),r=e(1407713935),l=e(5455782105),_=e(7224980887),d=e(3792998666),i=e(5861086925),m=e(5331698805),h=e(6839188756),v=e(7112191091),y=e(5510392579),T=e(7174777686),I=e(9087248458);function p(E){const f=(0,t._Z)(E,"light_read_who_can_manage_ext_shared_channels_pref_migration")==="on",O=(0,a.H7)(E);if(f)return(0,h.tc)(O)?!1:(0,s.Du)(E);const C=(0,n.cA)(E),M=(0,m.u)(E);if(!(M!=null&&M.value))return!1;if((0,l.k)(E)){let D=[];switch(M.value){case i.GX.ALL_ADMINS_AND_OWNERS:return(0,v.EC)(E)||(0,_.n5)(C)||(0,_.rr)(C);case i.GX.TOPLEVEL_ADMINS_AND_OWNERS_AND_SELECTED:return(0,_.n5)(C)||(0,_.rr)(C)?!0:(D=(0,c.QF)(E),!!((0,T.A)(M.users,C==null?void 0:C.id)||(0,I.A)(M.userGroups,D).length));case i.GX.EVERYONE:return!(0,d.Ez)(C);case i.GX.TOPLEVEL_ADMINS_AND_OWNERS:default:return(0,_.n5)(C)||(0,_.rr)(C)}}if((0,h.qR)(O))switch(M.value){case i.GX.TOPLEVEL_OWNERS:return(0,y.p2)(E);case i.GX.EVERYONE:return!(0,d.Ez)(C);case i.GX.TOPLEVEL_ADMINS_AND_OWNERS:default:return(0,y.p2)(E)||(0,y.Zo)(E)}return!1}u(p,"canUserManageExternalSharedChannels");function g(E,f){const O=(0,t._Z)(E,"light_read_who_can_manage_ext_shared_channels_pref_migration")==="on",C=(0,a.H7)(E);if(O){if((0,h.tc)(C)||!(0,r.jq)(f))return!1;const P=(0,o.FB)(f);return(0,s.Du)(E,{channelId:P})}const M=(0,n.cA)(E),D=(0,m.u)(E);if(!(D!=null&&D.value))return!1;if((0,l.k)(E)){let P=[];switch(D.value){case i.GX.ALL_ADMINS_AND_OWNERS:return(0,v.S4)(E,f);case i.GX.TOPLEVEL_ADMINS_AND_OWNERS_AND_SELECTED:return(0,_.n5)(M)||(0,_.rr)(M)?!0:(P=(0,c.QF)(E),!!((0,T.A)(D.users,M==null?void 0:M.id)||(0,I.A)(D.userGroups,P).length));case i.GX.EVERYONE:return!(0,d.Ez)(M);case i.GX.TOPLEVEL_ADMINS_AND_OWNERS:default:return(0,_.n5)(M)||(0,_.rr)(M)}}if((0,h.qR)(C))switch(D.value){case i.GX.TOPLEVEL_OWNERS:return(0,y.p2)(E);case i.GX.EVERYONE:return!(0,d.Ez)(M);case i.GX.TOPLEVEL_ADMINS_AND_OWNERS:default:return(0,y.p2)(E)||(0,y.Zo)(E)}return!1}u(g,"canUserManageSlackConnectChannel")},1273480023:(z,A,e)=>{"use strict";e.d(A,{u:()=>c});var t=e(3677514771),n=e(340763958),s=e(6839188756),a=e(2063075339);const c=u((o,r)=>{const l=(0,t.H7)(o);return(0,s.tc)(l)&&(0,n.ju)(r)&&(0,a.Z)(o,r)},"getIsCurrentTeamSponsoredInSlackConnectChannel")},8767621462:(z,A,e)=>{"use strict";e.d(A,{S:()=>o});var t=e(7600673124),n=e(8276911661),s=e(5096647761),a=e(8170643398),c=e(9107158149);const o=u((r,l)=>{const _=(0,n.nv)(r,l);return(0,a.Zx)(_)?!1:(0,s.g)(_)?!!((0,c.bo)(r,l)&&(0,c.zP)(r,l)&&!(0,t.y)(r,l)):!0},"isMemberConnectedById")},5331698805:(z,A,e)=>{"use strict";e.d(A,{u:()=>s});var t=e(5861086925),n=e(8087758879);const s=u(a=>{const c=t.yY.WHO_CAN_MANAGE_SHARED_CHANNELS;return(0,n.o)(a,c)},"getWhoCanManageSharedChannelsPref")},3212336858:(z,A,e)=>{"use strict";e.d(A,{DP:()=>N,qc:()=>$,qA:()=>Te,Bs:()=>B,Hv:()=>R,fK:()=>b,tY:()=>Ce,GE:()=>Z,b:()=>K,iH:()=>Pe,mE:()=>q});var t=e(7174777686),n=e(3245843483),s=e(5597672932),a=e(8276911661),c=e(9101533895),o=e(3792998666),r=e(3339229351),l=e(2791814261),_=e(8904182388),d=e(6165525655),i=e(591259428),m=e(9289081806),h=e(918457931),v=e(340763958),y=e(2585735826),T=e(6693783993),I=e(4761125736),p=e(1407713935),g=e(5343157203),E=e(9416626),f=e(395285811);const O={...E.u9,CantDisconnectExtShared:Symbol("cant_disconnect_ext_shared"),WhoCanManagePref:Symbol("who_can_manage_shared_channels")},C={ok:!1,reason:O.ChannelNotFound},M={ok:!1,reason:O.ChannelTypeNotSupported},D={ok:!1,reason:O.CantDisconnectExtShared},P={ok:!1,reason:O.WhoCanManagePref},k={ok:!0},x=u((ge,Oe)=>{const Le=(0,I._Z)(ge,"light_read_who_can_manage_shared_channels_pref_migration")==="on";if(!(0,p.jq)(Oe))return C;if((0,f.K3)(ge,Oe))return M;if((0,v.ju)(Oe)&&!(0,y.R)(ge,Oe))return D;const We=(0,m.FB)(Oe),Re=(0,T.Om)(ge,{channelId:We});if(!Le&&(0,h.t)(Oe)){if(Re)return k;if(!(0,g.E)(ge))return P}return(0,E.iz)(ge,Oe)},"canUserArchiveChannelWithReasons"),F=u((ge,Oe)=>x(ge,Oe).ok,"canUserArchiveChannel");var W=e(7563681762),Y=e(7148679525),S=e(6495946979),L=e(2912967402),w=e(571104883),J=e(735940183),G=e(5156662944);const X=u(ge=>ge&&(0,I._Z)(ge,"feedback_disabled_orgs")==="treatment","isOrgInFeedbackDisabledList");var te=e(529357503),le=e(7969244833),ve=e(6934022494);const Q=new J.Ay("cmd_handlers"),{UNKNOWN_COMMAND:Ae,UNSUPPORTED_IN_THREAD:ae,UNSUPPORTED_IN_SHORTCUTS_MENU:he,CUSTOM_ERROR:_e}=r.gu,ee=["/away","/collapse","/color","/colour","/dm","/expand","/feedback","/keys","/me","/msg","/s","/search","/shortcuts","/shrug","/slack_diagnostic_report","/slackdevtools","/star","/gif","/active","/giphy","/iamcal","/mute","/remind"],de=["/away","/active","/keys","/shortcuts","/apps","/rename","/feedback","/mute","/dnd","/leave","/part","/close","/call"],Ie=["/slackdebugunreads","/slackgov","/slackjspath","/slackstaging"],ce=["/slackaccessibility","/slackgov"],j=["/leave","/close","/part","/archive","/topic"],N=u(ge=>ge&&ge.alias_of,"getCommandAliasOf"),b=u(ge=>ge&&ge.name,"getCommandName"),R=u(ge=>ge&&(ge.desc||ge.description),"getCommandDesc"),K=u(ge=>ge&&ge.usage,"getCommandUsage"),B=u(ge=>ge&&(ge.canonical_name||ge.name),"getCommandCanonicalName"),$=u(ge=>ge&&ge.aliases,"getCommandAliases"),Z=u(ge=>ge&&ge.type,"getCommandType"),re=u(ge=>ge&&ge.app,"getCommandApp"),Te=u(ge=>ge==null?void 0:ge.appName,"getCommandAppName"),Ce=u((ge,Oe,Le)=>{const We=(0,c.OL)(ge,Le),Re=We?(0,le.f)(ge,We)||[]:[];return Oe.teams&&Re.length&&Oe.appName!=="Slack"&&!Oe.isWorkspaceAgnostic?Oe.teams.filter(Je=>Re.includes(Je)):[]},"getCommandRelatedWorkspaces"),Pe=u(function(ge,Oe){let{channelId:Le}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!Oe)return!1;const We=B(Oe);return We==="/leave"?(0,d.Y9)(ge,Le):We==="/remove"?(0,_.Vj)(ge,Le):["/topic","/search","/invite","/invite_people","/status","/dm","/msg"].indexOf(We)>-1?!1:!!Oe.autocomplete},"isAutocompleteCommand"),fe=u(ge=>!!(ge&&ge.isServer),"isServerCommand"),pe=u(function(ge){let Oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;switch(ge){case W.a_.InvalidDm:return Q.t("Direct messages don\u2019t even have a name! Ergo, regrettably, you can\u2019t change it.");case W.a_.OwnerRequired:return Q.t("Only Workspace Admins (or the channel creator) are allowed to rename channels.");case W.a_.InvalidParams:return Oe?Q.t("Channel names can\u2019t contain spaces, periods, or most punctuation. Try again?"):Q.t("You don\u2019t have permission to rename.");case W.a_.RestrictedUser:return Oe?Q.t("Your admins have limited who can rename multi-workspace channels."):Q.t("You don\u2019t have permission to rename.");case W.a_.OrgSharedSettings:return Oe?Q.t("Your admins have limited who can rename multi-workspace channels."):Q.t("You don\u2019t have permission to rename.");case W.a_.InvalidChannelType:return Q.t("This channel can\u2019t be renamed.",{fallbackHash:"796ff139eccb4a046e980e400012eb16b22449d8"});default:return Q.t("You don\u2019t have permission to rename.")}},"getRenameDisabledFeedback"),q=u(function(ge,Oe){let{channelId:Le,isThread:We,isShortcutsMenu:Re}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!ge||!Oe)return{isEnabled:!1,reason:Ae};const we=B(Oe),Je=Z(Oe),it=(0,c.OL)(ge,Le);if(!(0,l.L)(ge)&&(0,t.A)(Ie,we))return{isEnabled:!1,reason:Ae};if(!(0,w.y3)()&&(0,t.A)(ce,we))return{isEnabled:!1,reason:Ae};if((0,f.jT)(it)&&(0,t.A)(j,we))return{isEnabled:!1,reason:Ae};if(We&&!(0,t.A)(ee,we))return{isEnabled:!1,reason:ae};if(Re&&(0,t.A)(de,we))return{isEnabled:!1,reason:he};if(Je==="custom"||Je==="service"){const lt=(0,s.x)(ge,"commands_only_regular"),nt=(0,a.cA)(ge);if(lt&&(0,o.Ez)(nt))return{isEnabled:!1,reason:Ae}}if(Oe.teams){const lt=(0,le.f)(ge,it)||[];if(!Oe.teams.filter(at=>lt.includes(at)).length){const at=`Command not run. No intersection found between channel teams (${lt}) and command teams (${Oe.teams})`;return{isEnabled:!1,reason:_e,logString:at,feedback:Q.t("This command is not available in this channel")}}}if(we==="/open"||we==="/feed"){const lt=(0,a.cA)(ge);if((0,o.Ez)(lt))return{isEnabled:!1,reason:Ae}}else if(we==="/topic"){const{ok:lt,reason:nt}=(0,i.X)(ge,Le);if(!lt)return{isEnabled:!1,reason:_e,feedback:(0,L.Bw)(nt)}}else if(we==="/invite"){const lt=(0,a.cA)(ge);if((0,o.Yd)(lt))return{isEnabled:!1,reason:Ae};if(!(0,S.b)(it))return{isEnabled:!1,reason:_e,feedback:Q.t("You don\u2019t have permission to invite people.")};if((0,o.Ez)(lt)&&!(0,p.Zp)(it)||(0,te.A)(ge,lt,it))return{isEnabled:!1,reason:_e,feedback:Q.t("You don\u2019t have permission to invite people.")}}else if(we==="/invite_people"){if(!(0,Y.Lz)(ge))return{isEnabled:!1,reason:_e,feedback:Q.t("You don\u2019t have permission to invite people.")}}else if(we==="/rename"){const{ok:lt,reason:nt}=(0,W.be)(ge,Le);if(!lt)return{isEnabled:!1,reason:_e,feedback:pe(nt)}}else if(we==="/archive"){if(!F(ge,it))return{isEnabled:!1,reason:Ae}}else if(we==="/call"){if(!(0,G.lp)(ge,Le)||(0,G.tO)(ge))return{isEnabled:!1,reason:Ae}}else if(we==="/slacktrace"){if(!(0,n.Rg4)())return{isEnabled:!1,reason:_e,feedback:Q.t("Please run /slacktrace in the latest version of the Slack desktop app.")}}else if(we==="/feedback"){if(X(ge))return{isEnabled:!1,reason:Ae}}else if(we==="/gif"){if(!(0,ve.R4)(ge))return{isEnabled:!1,reason:Ae};if(!(0,ve.BH)(ge))return{isEnabled:!1,reason:_e,feedback:Q.t("Attach a GIF is not enabled.")}}return{isEnabled:!0}},"isSlashCommandEnabled"),se={getRenameDisabledFeedback:pe,TS_ONLY_COMMANDS:Ie,DESKTOP_APP_ONLY_COMMANDS:ce}},2105507084:(z,A,e)=>{"use strict";e.d(A,{X:()=>l,p:()=>r});var t=e(9829579108),n=e(8596717184),s=e(9289081806),a=e(9101533895),c=e(3677514771);const o=!1,r=(0,t.Ay)((_,d)=>{const i=(0,s.ne)(_,d),m=(0,c._J)(_,i,o);return(0,n.f)(m)});r.meta={name:"createSelector",key:"createSelectorgetExternalSelfWorkspaceAllowedOrgIdsForChannel",description:(_,d)=>{const i=(0,s.ne)(_,d),m=(0,c._J)(_,i,o);return(0,n.f)(m)}};const l=(0,t.Ay)((_,d)=>{const i=(0,a.OL)(_,d,o);return r(_,i)});l.meta={name:"createSelector",key:"createSelectorgetExternalSelfWorkspaceAllowedOrgIdsForChannelById",description:(_,d)=>{const i=(0,a.OL)(_,d,o);return r(_,i)}}},8596717184:(z,A,e)=>{"use strict";e.d(A,{f:()=>s});var t=e(5751973043),n;const s=u(a=>(n=a==null?void 0:a.allowed_org_ids)!==null&&n!==void 0?n:t.Ml,"getExternalSelfWorkspaceAllowedOrgIds")},2801540778:(z,A,e)=>{"use strict";e.d(A,{z:()=>a});var t=e(8847766420),n=e(1890276164),s=e(6839188756);function a(c,o){if(!c||!o)return!1;const r=(0,s.ZT)(o);if((0,t.Kc)(c)===r||(0,t.ZT)(c)===r)return!1;const l=(0,t.jV)(c);return l&&l===o.enterprise_id?!1:(0,n.R)(c,o.id)}u(a,"isTeamExternal")},958961878:(z,A,e)=>{"use strict";e.d(A,{Ay:()=>I,w2:()=>y});var t=e(9829579108),n=e(4887323608),s=e(4096483543),a=e(6564475562),c=e(2249017398),o=e(2615100822),r=e(5731054235),l=e(7823691483);const d=u(()=>(0,n.A)(),"isDarkModeFeatureEnabled");var i=e(571104883),m=e(506684971),h=e.n(m);const v=u(()=>{var g;const E=(0,i.y3)()||((g=window.matchMedia)===null||g===void 0?void 0:g.call(window,"(prefers-color-scheme)").media)!=="not all",f=(0,i.cX)()&&(0,l.Z)((0,l.P)(h().osversion),(0,l.P)("10.14"))>=0,O=(0,i.jy)(),C=(0,i.j9)()&&(0,i.dY)("4.36.136"),M=f||O||C,D=(0,i.y3)()||(0,s.A)()||(0,a.A)()||(0,c.A)()||(0,o.A)()||(0,r.A)();return(0,n.A)()&&E&&M&&D},"computeSystemSyncIsSupportedOnBoot"),y=v(),T=(0,t.Ay)(g=>!!y&&!!d(g));T.meta={name:"createSelector",key:"createSelectorgetSystemSyncIsSupported",description:g=>!!y&&!!d(g)};const I=T,p={computeSystemSyncIsSupportedOnBoot:v}},677609895:(z,A,e)=>{"use strict";e.d(A,{X:()=>c});var t=e(2384831516),n=e(5510392579),s=e(5597672932),a=e(3677514771);const c=(0,t.Mz)(o=>{const r=(0,a.Yc)(o);return(0,n.p2)(o,r.id)||(0,s.x)(o,"all_users_can_purchase")});c.meta={name:"createSelector",key:"createSelectorgetCanCurrentUserUpgradeSlack",description:o=>{const r=(0,a.Yc)(o);return(0,n.p2)(o,r.id)||(0,s.x)(o,"all_users_can_purchase")}}},4400471894:(z,A,e)=>{"use strict";e.d(A,{i:()=>c});var t=e(8276911661),n=e(5795074931),s=e(7224980887),a=e(3769619294);const c=u((o,r)=>{const l=(0,t.cA)(o);return(0,n.u8)(o)&&(0,s.n5)(l)?!0:(0,a.V)(o,"who_can_at_channel",r)},"canNonAdminsAtChannelOrGroupBySettings")},4746276247:(z,A,e)=>{"use strict";e.d(A,{g:()=>n});var t=e(3769619294);const n=u((s,a)=>(0,t.V)(s,"who_can_at_everyone",a),"canNonAdminsAtMentionEveryoneBySettings")},317660850:(z,A,e)=>{"use strict";e.d(A,{D:()=>c});var t=e(3559837422),n=e(5169892262),s=e(4761125736),a=e(6693783993);const c=u(o=>(0,s._Z)(o,"light_read_emoji_only_admins_pref_migration")==="on"?(0,a.eq)(o):!(0,t.sV)(o)&&(0,n.Cr)(o,"emoji_only_admins"),"canUserAddEmoji")},324756633:(z,A,e)=>{"use strict";e.d(A,{S:()=>_});var t=e(9101533895),n=e(4400471894),s=e(201941576),a=e(7112191091),c=e(4761125736),o=e(6693783993),r=e(1407713935);const l=u(d=>(0,c._Z)(d,"light_read_who_can_at_channel_pref_migration")==="on","shouldUsePermissions");function _(d,i){const m=(0,t.gT)(d,i)&&(0,t.OL)(d,i)||void 0;return l(d)?((0,r.yz)(m)?(0,o.E2)(d):(0,o.E2)(d,{channelId:i}))&&!(0,s.i)(d,m==null?void 0:m.id,{allowToAdmins:!0}):(0,a.yG)(d,m)?!0:(0,n.i)(d,i)&&!(0,s.i)(d,m==null?void 0:m.id,{allowToAdmins:!0})}u(_,"canUserAtChannelInChannelById")},641827819:(z,A,e)=>{"use strict";e.d(A,{W:()=>_});var t=e(4746276247),n=e(9101533895),s=e(201941576),a=e(6113051341),c=e(5795074931),o=e(4761125736),r=e(6693783993);const l=u(d=>(0,o._Z)(d,"light_read_who_can_at_everyone_pref_migration")==="on","shouldUsePermissions"),_=u((d,i)=>{const m=(0,n.gT)(d,i)&&(0,n.OL)(d,i)||void 0;return!i||!m||!(0,a.N)(m)?!1:l(d)?(0,c.u8)(d)?(0,r._7)(d,{channelId:i})&&!(0,s.i)(d,m==null?void 0:m.id,{allowToAdmins:!0}):(0,r._7)(d,{channelId:i}):(0,c.u8)(d)?(0,t.g)(d,i)&&!(0,s.i)(d,m==null?void 0:m.id,{allowToAdmins:!0}):(0,t.g)(d,i)},"canUserAtEveryoneInChannelById")},1612857492:(z,A,e)=>{"use strict";e.d(A,{i:()=>d,q:()=>_});var t=e(9289081806),n=e(6495946979),s=e(7112191091),a=e(1407713935),c=e(9101533895),o=e(4761125736),r=e(6693783993),l=e(8250322877);const _=u((i,m)=>{const h=(0,o._Z)(i,"restrict_channel_manager_ext_invites");if(!(0,a.jq)(m))return!1;const v=(0,t.FB)(m),y=(0,l.D)(i,m);return h?y&&((0,s.S4)(i,m)||(0,n.b)(m)&&(0,r.MN)(i,{channelId:v})):y},"canUserInviteExternalUsersToChannel"),d=u((i,m)=>{const v=(0,c.OL)(i,m,!1);return v?_(i,v):!1},"canUserInviteExternalUsersToChannelById")},9183417278:(z,A,e)=>{"use strict";e.d(A,{Q:()=>_,e:()=>d});var t=e(9289081806),n=e(6495946979),s=e(1407713935),a=e(7112191091),c=e(9101533895),o=e(4761125736),r=e(6693783993),l=e(8250322877);const _=u((i,m)=>{const h=(0,o._Z)(i,"invite_to_channel_permission")==="on";if(!(0,s.jq)(m))return!1;const v=(0,t.FB)(m),y=(0,l.D)(i,m);return h&&(0,s.Zp)(m)?y&&((0,a.S4)(i,m)||(0,n.b)(m)&&(0,r.oo)(i,{channelId:v})):y},"canUserInviteInternalUsersToChannel"),d=u((i,m)=>{const v=(0,c.OL)(i,m,!1);return v?_(i,v):!1},"canUserInviteInternalUsersToChannelById")},8250322877:(z,A,e)=>{"use strict";e.d(A,{D:()=>h,X:()=>v});var t=e(1340402138),n=e(9289081806),s=e(1407713935),a=e(6007206761),c=e(5373179915),o=e(6495946979),r=e(2350349607),l=e(7112191091),_=e(3559837422),d=e(9101533895),i=e(4761125736),m=e(6693783993);const h=u((y,T)=>{const I=(0,i._Z)(y,"invite_to_channel_permission")==="on",p=(0,i._Z)(y,"restrict_channel_manager_ext_invites")==="on";if(!(0,s.jq)(T))return!1;const g=(0,n.FB)(T);if((0,_.AB)(y)||(0,a.F)(T)||!(0,r.V)(T)||(0,t.R)(y)&&(0,c.R)(y,T))return!1;const E=p?(0,m.MN)(y,{channelId:g}):!0;return I&&(0,s.Zp)(T)?(0,l.S4)(y,T)||(0,o.b)(T)&&((0,m.oo)(y,{channelId:g})||E):(0,l.S4)(y,T)||(0,o.b)(T)},"canUserInviteToChannel"),v=u((y,T)=>{const p=(0,d.OL)(y,T,!1);return p?h(y,p):!1},"canUserInviteToChannelById")},8904182388:(z,A,e)=>{"use strict";e.d(A,{CE:()=>T,Vj:()=>O,VJ:()=>f});var t=e(9101533895),n=e(4761125736),s=e(6693783993),a=e(1407713935),c=e(6007206761),o=e(6841796315);const r={InvalidDm:Symbol("invalid_dm"),ArchivedChannel:Symbol("archived_channel"),RequiredChannel:Symbol("required_channel")},l={ok:!1,reason:r.ArchivedChannel},_={ok:!1,reason:r.InvalidDm},d={ok:!1,reason:r.RequiredChannel};function i(C,M){const D=(0,t.gT)(C,M)?(0,t.OL)(C,M):null;return(0,c.F)(D)?l:(0,a.LI)(D)||(0,a.yz)(D)?_:(0,a.gx)(D)?d:o.O}u(i,"isChannelKickableWithReason");function m(C,M){return i(C,M).ok}u(m,"isChannelKickable");var h=e(3559837422),v=e(3769619294),y=e(641744444);const T={...r,InvalidParams:Symbol("invalid_params"),UserIsRestricted:Symbol("user_is_restricted"),RestrictedPublicChannel:Symbol("restricted_public_channel"),RestrictedPrivateChannel:Symbol("restricted_private_channel")},I={ok:!1,reason:T.InvalidParams},p={ok:!1,reason:T.UserIsRestricted},g={ok:!1,reason:T.RestrictedPublicChannel},E={ok:!1,reason:T.RestrictedPrivateChannel};function f(C,M){const D=(0,t.gT)(C,M)?(0,t.OL)(C,M):null;if(!(0,a.jq)(D))return I;if((0,h.sV)(C))return p;const P=i(C,M);if(!P.ok)return{ok:!1,reason:P.reason};const k=(0,s.ou)(C,{channelId:M}),x=(0,s.sX)(C,{channelId:M});if((0,n._Z)(C,"channel_manager_enhancements")==="on"&&(0,a.rW)(D)&&k)return o.O;const W=(0,n._Z)(C,"light_read_who_can_kick_channels_migration")==="on",Y=(0,n._Z)(C,"light_read_who_can_kick_groups_pref_migration")==="on",S=(0,a.rW)(D)?"public":"private",L=S==="private"?y.Po:y.LI,w=S==="private"?y.tU:y.H7,J=L(C)||w(C);let G;if(W&&S==="public")G=k;else if(Y&&S==="private")G=x;else{const X=S==="private"?"who_can_kick_groups":"who_can_kick_channels";G=(0,v.X)(C,X,D)}return!J&&!G?S==="private"?E:g:o.O}u(f,"canUserKickFromChannelWithReason");function O(C,M){return f(C,M).ok}u(O,"canUserKickFromChannel")},641744444:(z,A,e)=>{"use strict";e.d(A,{Po:()=>I,tU:()=>g,LI:()=>T,H7:()=>p});var t=e(7174777686),n=e(8276911661),s=e(5597672932),a=e(3677514771),c=e(5455782105),o=e(9113979368),r=e(7224980887),l=e(8170643398),_=e(3559837422),d=e(5510392579),i=e(766806);const m=u((E,f)=>{let{prefName:O}=f;if((0,o.A)(O))return!1;const C=(0,n.cA)(E);if((0,l.QR)(C)||(0,_.sV)(E))return!1;const{type:M,user:D}=(0,i.SI)(E,O)||{};if((0,t.A)(D,C.id))return!0;switch(M==null?void 0:M[0]){case"PRIMARY_OWNER":return(0,r.nA)(C);case"ORG_OWNERS":return(0,r.rr)(C);case"ORG_ADMINS_AND_OWNERS":return(0,r.n5)(C);default:return(0,d.$G)(E)}},"checkChannelMgmtPrefCascade");var h=e(6839188756),v=e(4761125736),y=e(6693783993);const T=u(E=>(0,c.k)(E)?(0,v._Z)(E,"light_read_who_can_manage_public_channels_pref_migration")==="on"?(0,y.fl)(E):m(E,{prefName:"who_can_manage_public_channels"}):!1,"canUserManagePublicChannelsInOrgDash"),I=u(E=>(0,c.k)(E)?(0,v._Z)(E,"light_read_who_can_manage_private_channels_pref_migration")==="on"?(0,y.$5)(E):m(E,{prefName:"who_can_manage_private_channels"}):!1,"canUserManagePrivateChannelsInOrgDash"),p=u(E=>{const f=(0,a.H7)(E);return(0,h.Ny)(f)?(0,d.h3)(E):!1},"canUserManagePublicChannelsInTeamSite"),g=u(E=>{const f=(0,a.H7)(E),O=(0,v._Z)(E,"light_read_who_can_manage_private_channels_pref_migration")==="on";if(!(0,h.Ny)(f)||(0,h.NB)(f)&&!(0,s.x)(E,"has_compliance_export"))return!1;if(O)return(0,y.Ny)(E);const C=(0,s.x)(E,"who_can_manage_private_channels_at_workspace_level");if(!C)return!1;const M=(0,n.cA)(E);if((0,t.A)(C.user,M.id))return(0,d.h3)(E);const D=C.type;switch(D&&D.length!==0?D[0]:null){case"NO_ONE":return!1;case"WORKSPACE_PRIMARY_OWNER":return(0,d.$G)(E);case"WORKSPACE_OWNERS":return(0,d.p2)(E);default:return!1}},"canUserManagePrivateChannelsInTeamSite")},7563681762:(z,A,e)=>{"use strict";e.d(A,{JJ:()=>D,a_:()=>v,be:()=>C,rY:()=>M});var t=e(9101533895),n=e(6693783993),s=e(3490825458),a=e(5795074931),c=e(4761125736),o=e(641744444),r=e(918457931),l=e(1407713935),_=e(3559837422),d=e(7112191091),i=e(6025726268),m=e(5343157203),h=e(6841796315);const v={InvalidChannelType:Symbol("invalid_channel_type"),InvalidDm:Symbol("invalid_dm"),InvalidParams:Symbol("invalid_params"),OrgSharedSettings:Symbol("org_shared_settings"),OwnerRequired:Symbol("owner_required"),RestrictedUser:Symbol("restricted_user"),RestrictedAction:Symbol("restricted_action"),UserHasNoPermissions:Symbol("user_has_no_permissions")},y={ok:!1,reason:v.InvalidParams},T={ok:!1,reason:v.InvalidDm},I={ok:!1,reason:v.InvalidChannelType},p={ok:!1,reason:v.RestrictedUser},g={ok:!1,reason:v.OrgSharedSettings},E={ok:!1,reason:v.OwnerRequired},f={ok:!1,reason:v.UserHasNoPermissions},O=u((P,k)=>{const x=(0,c._Z)(P,"light_read_who_can_manage_shared_channels_pref_migration")==="on";if(!(0,l.jq)(k))return y;if((0,l.LI)(k)||(0,l.yz)(k))return T;if((0,l.rI)(k))return I;const F=(0,a.TZ)(P),W=(0,s.s)(P),Y=(0,s.R)(P);if(!F)return W&&((0,l.Zp)(k)&&(0,o.Po)(P)||(0,l.rW)(k)&&(0,o.LI)(P))||Y&&((0,l.Zp)(k)&&(0,o.tU)(P)||(0,l.rW)(k)&&(0,o.H7)(P))?h.O:f;if(x)return(0,n.bT)(P,{channelId:k.id})?h.O:f;const S=(0,m.E)(P)||(0,n.LN)(P);return(0,r.t)(k)&&!S?g:(0,i.M)(P,k)||(0,n.bT)(P,{channelId:k.id})?h.O:(0,_.sV)(P)||(0,_.AB)(P)?p:(0,d.S4)(P,k)?h.O:E},"canUserRenameChannelWithReason"),C=u((P,k)=>{const F=(0,t.OL)(P,k,!1);return F?O(P,F):y},"canUserRenameChannelWithReasonById"),M=u((P,k)=>O(P,k).ok,"canUserRenameChannel"),D=u((P,k)=>C(P,k).ok,"canUserRenameChannelById")},9416626:(z,A,e)=>{"use strict";e.d(A,{NG:()=>P,iz:()=>D,u9:()=>h});var t=e(5343157203),n=e(4761125736),s=e(6693783993),a=e(9289081806),c=e(6495946979),o=e(1407713935),r=e(6007206761),l=e(918457931),_=e(340763958),d=e(9846841407),i=e(7112191091),m=e(2585735826);const h={ChannelNotFound:Symbol("channel_not_found"),ChannelTypeNotSupported:Symbol("channel_type_not_supported"),CantArchiveGeneral:Symbol("cant_archive_general"),NotInChannel:Symbol("not_in_channel"),AlreadyArchived:Symbol("already_archived"),NotAllowedHomeExternallyShared:Symbol("not_allowed_home_ext_shared"),AwayExternallyShared:Symbol("away_ext_shared"),UserHasNoPermissions:Symbol("user_has_no_permissions"),DefaultOrgWideChannel:Symbol("default_org_wide_channel"),WhoCanManagePref:Symbol("who_can_manage_shared_channels")},v={ok:!1,reason:h.ChannelNotFound},y={ok:!1,reason:h.ChannelTypeNotSupported},T={ok:!1,reason:h.CantArchiveGeneral},I={ok:!1,reason:h.NotInChannel},p={ok:!1,reason:h.AlreadyArchived},g={ok:!1,reason:h.NotAllowedHomeExternallyShared},E={ok:!1,reason:h.AwayExternallyShared},f={ok:!1,reason:h.UserHasNoPermissions},O={ok:!1,reason:h.DefaultOrgWideChannel},C={ok:!1,reason:h.WhoCanManagePref},M={ok:!0},D=u((k,x)=>{const F=(0,n._Z)(k,"restrict_channel_permission_archive_channel")==="on",W=(0,n._Z)(k,"light_read_who_can_manage_shared_channels_pref_migration")==="on";if(!(0,o.jq)(x))return v;if((0,o.LI)(x)||(0,o.yz)(x))return y;if((0,o.gx)(x))return T;if((0,r.F)(x))return p;if((0,d.b)(k,x))return E;if(!(0,i.S4)(k,x)&&!(0,c.b)(x))return I;const S=(0,a.FB)(x);if(F&&(0,_.ju)(x)&&!(0,d.b)(k,x)&&!(0,m.R)(k,x))return g;const L=(0,s.Om)(k,{channelId:S});return!W&&(0,l.t)(x)&&!(0,t.E)(k)&&!(0,s.LN)(k,{channelId:S})?C:L?M:f},"canUserSeeArchiveChannelOptionWithReasons"),P=u((k,x)=>D(k,x).ok,"canUserSeeArchiveChannelOption")},591259428:(z,A,e)=>{"use strict";e.d(A,{P:()=>T,X:()=>y});var t=e(9101533895),n=e(4761125736),s=e(6495946979),a=e(2912967402),c=e(1407713935),o=e(6007206761),r=e(3559837422),l=e(340763958),_=e(4827886670),d=e(6693783993);const i={ok:!0},m={ok:!1,reason:a.CM},h={ok:!1,reason:a.Jr},v={ok:!1,reason:a.oP},y=u((I,p)=>{const g=(0,t.gT)(I,p)&&(0,t.OL)(I,p);return g?(0,c.JM)(g)&&(0,l.ju)(g)?h:(0,o.F)(g)?v:(0,n._Z)(I,"channel_manager_enhancements")==="on"&&(0,d.ig)(I,{channelId:p})?i:!(0,s.b)(g)||!(0,_.c)(I,g)||(0,r.sV)(I)||(0,r.AB)(I)?v:i:m},"canUserSetTopicForChannelWithReasonById"),T=u((I,p)=>y(I,p).ok,"canUserSetTopicForChannelById")},6025726268:(z,A,e)=>{"use strict";e.d(A,{M:()=>s});var t=e(8276911661),n=e(9289081806);const s=u((a,c)=>{const o=(0,t.cA)(a);return c?o.id===(0,n.Wb)(c):!1},"isCurrentUserChannelCreator")},4919351998:(z,A,e)=>{"use strict";e.d(A,{XT:()=>_,Xw:()=>n,gU:()=>c,l0:()=>r,xf:()=>s});var t=e(8234448831);const n=new RegExp("^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$","i");function s(d){const i=typeof d=="string"&&d.match(n);return i&&i.length===1&&i[0]===d||!1}u(s,"isEmail");function a(d){const{pathname:i,protocol:m}=parseUrl(d);return m==="mailto:"&&s(i)}u(a,"isEmailUrl");function c(d){const{pathname:i,protocol:m}=d;return m==="mailto:"&&s(i)}u(c,"isEmailUrlFromUrlObject");const o=/^[\w.-]+(?:\.[\w.-]+)+[\w\-.]+$/i;function r(d){const i=typeof d=="string"&&d.match(o);return i&&i.length===1&&i[0]===d||!1}u(r,"isDomain");function l(d){return d.includes("@slack-bots.com")}u(l,"isSlackBotEmail");function _(d){let{csv:i,min:m=0,max:h=10}=d;const v=i.split(/\s*,\s*/).length;return{minViolation:v<m,maxViolation:v>h}}u(_,"validateCSV")},8049923572:(z,A,e)=>{"use strict";e.d(A,{BM:()=>i,IN:()=>r});var t=e(3134334389),n=e(5950652755),s=e(5460331959),a=e(1641606663),c=e(4761125736);function o(){return o=Object.assign||function(m){for(var h=1;h<arguments.length;h++){var v=arguments[h];for(var y in v)Object.prototype.hasOwnProperty.call(v,y)&&(m[y]=v[y])}return m},o.apply(this,arguments)}u(o,"_extends");const r=u(m=>(0,c._Z)(m,"sk_responsive_menus")==="on","isSkResponsiveMenusEnabled");function l(m){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:250;const{windowRef:v}=(0,t.useContext)(a.M),y=u(I=>{!Array.isArray(I)||!I.length||requestAnimationFrame(()=>m(I))},"observer"),T=v.deref();return new T.ResizeObserver((0,n.A)(y,h))}u(l,"useResizeObserver");const _=u(()=>{var m,h,v;const{windowRef:y}=(0,t.useContext)(a.M),T=(0,t.useRef)((m=y.deref())===null||m===void 0?void 0:m.document.body),I=((h=T.current)===null||h===void 0?void 0:h.clientWidth)||0,p=((v=T.current)===null||v===void 0?void 0:v.clientHeight)||0,[g,E]=(0,t.useState)(I),[f,O]=(0,t.useState)(p),C=l(()=>{var M,D;E(((M=T.current)===null||M===void 0?void 0:M.clientWidth)||0),O(((D=T.current)===null||D===void 0?void 0:D.clientHeight)||0)},100);return(0,t.useEffect)(()=>{const M=T.current;return M&&C.observe(M),()=>{y&&M&&C.unobserve(M)}},[C,y]),{width:g,height:f}},"useWindowSize");function d(m){return h=>{const v=_();return t.createElement(m,o({},h,{windowSize:v}))}}u(d,"withWindowSize"),d.displayName="withWindowSize";function i(m){return h=>h.experimentSkResponsiveMenusGroupOn?t.createElement(s.A,null,v=>{let{measureRef:y,width:T,height:I}=v;return t.createElement(m,o({},h,{measureRef:y,containerSize:{width:T,height:I}}))}):t.createElement(m,o({},h))}u(i,"withContainerSize"),i.displayName="withContainerSize"},3824874166:(z,A,e)=>{"use strict";e.d(A,{RG:()=>P,f1:()=>F,fp:()=>x});var t=e(3134334389),n=e(5255740490),s=e(7715417323),a=e(1030162945),c=e(8822892075),o;(function(W){W.BaseHeart="mask__base-heart",W.SmallHeart="mask__small-heart",W.BaseSingleChannelGuestDnd="mask__base-single-channel-guest-dnd",W.BaseSingleChannelGuest="mask__base-single-channel-guest",W.SmallSingleChannelGuestDnd="mask__small-single-channel-guest-dnd",W.SmallSingleChannelGuest="mask__small-single-channel-guest",W.BaseGuestDnd="mask__base-guest-dnd",W.BaseGuest="mask__base-guest",W.SmallGuestDnd="mask__small-guest-dnd",W.SmallGuest="mask__small-guest",W.BaseMemberDnd="mask__base-member-dnd",W.BaseMember="mask__base-member",W.SmallMemberDnd="mask__small-member-dnd",W.SmallMember="mask__small-member"})(o||(o={}));function r(W){let{size:Y="base",userType:S="member",isDnd:L=!1}=W;return t.createElement("svg",{className:"sr-only"},S==="slackbot"&&(Y==="base"?t.createElement("clipPath",{id:o.BaseHeart,clipPathUnits:"objectBoundingBox"},t.createElement("path",{d:"M0,0 H1 V0.673 C0.986,0.669,0.971,0.667,0.954,0.667 C0.929,0.667,0.907,0.673,0.889,0.682 C0.87,0.673,0.849,0.667,0.824,0.667 C0.764,0.667,0.719,0.697,0.694,0.736 C0.672,0.77,0.667,0.807,0.667,0.832 C0.667,0.854,0.669,0.894,0.696,0.942 C0.707,0.962,0.721,0.981,0.739,1 H0 V0"})):t.createElement("clipPath",{id:o.SmallHeart,clipPathUnits:"objectBoundingBox"},t.createElement("path",{d:"M1,0 H0 V1 H0.801 C0.75,0.958,0.714,0.915,0.69,0.872 C0.653,0.807,0.65,0.753,0.65,0.723 C0.65,0.689,0.658,0.64,0.687,0.594 C0.721,0.541,0.781,0.5,0.862,0.5 C0.896,0.5,0.925,0.508,0.95,0.521 C0.965,0.513,0.982,0.507,1,0.504 V0"}))),S==="ura"&&(Y==="base"?L?t.createElement("clipPath",{id:o.BaseSingleChannelGuestDnd,clipPathUnits:"objectBoundingBox"},t.createElement("path",{d:"M1,0 H0 V1 H0.688 C0.673,0.958,0.68,0.907,0.718,0.87 L0.825,0.763 C0.821,0.752,0.819,0.741,0.819,0.729 C0.819,0.672,0.866,0.625,0.924,0.625 H1 V0"})):t.createElement("clipPath",{id:o.BaseSingleChannelGuest,clipPathUnits:"objectBoundingBox"},t.createElement("path",{d:"M1,0 H0 V1 H0.688 C0.673,0.958,0.68,0.907,0.718,0.87 L0.87,0.718 C0.907,0.68,0.958,0.673,1,0.688 V0"})):L?t.createElement("clipPath",{id:o.SmallSingleChannelGuestDnd,clipPathUnits:"objectBoundingBox"},t.createElement("path",{d:"M1,0 H0 V1 H0.707 C0.657,0.937,0.652,0.841,0.719,0.774 L0.864,0.63 C0.859,0.615,0.856,0.6,0.856,0.584 C0.856,0.507,0.919,0.444,0.997,0.444 H1 V0"})):t.createElement("clipPath",{id:o.SmallSingleChannelGuest,clipPathUnits:"objectBoundingBox"},t.createElement("path",{d:"M1,0 H0 V1 H0.707 C0.657,0.937,0.652,0.841,0.719,0.774 L0.924,0.569 C0.947,0.546,0.973,0.532,1,0.525 V0"}))),(S==="ra"||S==="external")&&(Y==="base"?L?t.createElement("clipPath",{id:o.BaseGuestDnd,clipPathUnits:"objectBoundingBox"},t.createElement("path",{d:"M1,0 H0 V1 H0.704 C0.698,0.985,0.694,0.969,0.694,0.951 V0.826 C0.694,0.754,0.753,0.695,0.825,0.694 C0.84,0.654,0.878,0.625,0.924,0.625 H1 V0"})):t.createElement("clipPath",{id:o.BaseGuest,clipPathUnits:"objectBoundingBox"},t.createElement("path",{d:"M1,0 H0 V1 H0.704 C0.698,0.985,0.694,0.969,0.694,0.951 V0.826 C0.694,0.754,0.754,0.694,0.826,0.694 H0.951 C0.969,0.694,0.985,0.698,1,0.704 V0"})):L?t.createElement("clipPath",{id:o.SmallGuestDnd,clipPathUnits:"objectBoundingBox"},t.createElement("path",{d:"M1,0 H0 V1 H0.73 C0.704,0.969,0.688,0.929,0.688,0.884 V0.716 C0.688,0.617,0.767,0.538,0.866,0.538 H1 V0"})):t.createElement("clipPath",{id:o.SmallGuest,clipPathUnits:"objectBoundingBox"},t.createElement("path",{d:"M1,0 H0 V1 H0.73 C0.704,0.969,0.688,0.929,0.688,0.884 V0.716 C0.688,0.617,0.767,0.538,0.866,0.538 H1 V0"}))),S==="member"&&(Y==="base"?L?t.createElement("clipPath",{id:o.BaseMemberDnd,clipPathUnits:"objectBoundingBox"},t.createElement("path",{d:"M1,0 H0 V1 H0.713 C0.692,0.968,0.681,0.93,0.681,0.889 C0.681,0.795,0.742,0.716,0.827,0.69 C0.843,0.652,0.88,0.625,0.924,0.625 H1 V0"})):t.createElement("clipPath",{id:o.BaseMember,clipPathUnits:"objectBoundingBox"},t.createElement("path",{d:"M1,0 H0 V1 H0.713 C0.692,0.968,0.681,0.93,0.681,0.889 C0.681,0.774,0.774,0.681,0.889,0.681 C0.93,0.681,0.968,0.692,1,0.713 V0"})):L?t.createElement("clipPath",{id:o.SmallMemberDnd,clipPathUnits:"objectBoundingBox"},t.createElement("path",{d:"M1,0 H0 V1 H0.752 C0.701,0.949,0.669,0.878,0.669,0.8 C0.669,0.674,0.752,0.567,0.867,0.531 C0.888,0.48,0.938,0.444,0.997,0.444 H1 V0"})):t.createElement("clipPath",{id:o.SmallMember,clipPathUnits:"objectBoundingBox"},t.createElement("path",{d:"M1,0 H0 V1 H0.752 C0.701,0.949,0.669,0.878,0.669,0.8 C0.669,0.645,0.795,0.519,0.95,0.519 C0.967,0.519,0.984,0.52,1,0.523 V0"}))))}u(r,"AvatarMasks");var l=e(9270432170),_=e(9332393661),d=e(2036354333),i=e(1610251172),m=e(9742374352),h=e(3501104594),v=e(698013937),y=e(2855755676),T=e(1563996154),I=e(82287009),p=e(735940183),g=e(485355941),E=e(1060768686),f=e.n(E),O=e(2979422297),C=e.n(O);function M(){return M=Object.assign||function(W){for(var Y=1;Y<arguments.length;Y++){var S=arguments[Y];for(var L in S)Object.prototype.hasOwnProperty.call(S,L)&&(W[L]=S[L])}return W},M.apply(this,arguments)}u(M,"_extends");const D=new p.Ay("avatar"),P={xlarge:72,large:56,medium:36,small:24,verySmall:20,tiny:16},k=t.memo(W=>{let{botEmoji:Y,canRenderEmoji:S}=W;return Y?S?t.createElement(a.Ay,{className:"c-avatar__emoji",text:Y,emojiSize:a.lw.LARGE,stopAnimations:!0,forceDisplay:!0}):t.createElement("img",{className:"c-avatar__image c-avatar__image--fallback",src:f(),srcSet:`${C()} 2x`,alt:""}):null});function x(W){let{isExternal:Y,teamId:S,team:L,showTooltip:w,badgeIconType:J,badgeIconClassName:G,allowTeamInitials:X=!0}=W;if(J){const te=G?{[G]:!!G}:{};return()=>t.createElement(i.A,{className:(0,n.A)("c-avatar__icon c-avatar__nonteam_icon",{...te}),type:J})}return Y&&S?()=>t.createElement(v.A,{className:"c-avatar__icon c-avatar__team_icon",id:S,team:L,size:16,showTooltip:w,allowTeamInitials:X,ariaHidden:!0}):()=>null}u(x,"getCustomBadgeIconRenderer"),x.displayName="getCustomBadgeIconRenderer";const F=u(W=>{let{size:Y,userId:S,isAdHocMember:L,botId:w,botProfile:J=void 0,imageUrl:G,imageUrl2x:X,additionalOverlay:te,onClick:le=void 0,className:ve,teamId:Q,isExternal:Ae=!1,isRestricted:ae=!1,isUltraRestricted:he=!1,isInToken:_e=!1,isDeleted:ee=!1,tokenSize:de=void 0,memberOrBotName:Ie=void 0,showTooltip:ce=!1,showCard:j=!1,showBadge:N=!0,showPresence:b=!1,badgeIconType:R=void 0,badgeIconClassName:K=void 0,isInteractive:B=!0,clogLinkClick:$=s.A,tabIndex:Z=0,ariaHidden:re=void 0,team:Te=void 0,botEmoji:Ce=void 0,canRenderEmoji:Pe=void 0,renderCustomBadge:fe=void 0,autoClogProps:pe=void 0,openProfile:q=s.A,showMemberProfileInWindow:se=s.A,propagateClickEvent:ge=!1,fromQuipDoc:Oe=!1,allowTeamInitials:Le=!0,disableLink:We=!1,isUserHidden:Re=!1,onLoad:we=s.A,onError:Je=s.A,navigate:it,resetIA:et,userType:lt,isDnd:nt,isSlackbot:at,"data-qa":ze,"data-stringify-ignore":Ke}=W;const He=(0,t.useCallback)(Nt=>(Nt.preventDefault(),B?(ge||Nt.stopPropagation(),$(),Oe||((0,g.Cz)(Nt)?se(S):it&&S?it((0,c.Fo)({memberId:S})):q({memberId:S,serviceId:w,botProfile:J})),le?le(Nt):null):null),[S,w,J,$,Oe,le,B,it,q,ge,se]),Ye=u(()=>S?`/team/${S}`:w&&!We?`/services/${w}`:"","getHrefAttr"),_t=u(()=>X?`${X} 2x`:"","getSrcSetAttribute"),vt=u(()=>{if(te){const Nt=te>9?"9+":`+${te}`;return t.createElement("div",{className:"c-avatar__additional_overlay"},Nt)}return null},"renderAdditionalOverlay");vt.displayName="renderAdditionalOverlay";const Tt=u(Nt=>{let{tooltipText:Ft,className:qt}=Nt,un=t.createElement("span",{className:"c-avatar__badge_inner"});ce&&(un=t.createElement(T.Ay,{tip:Ft},un));const tt=(0,n.A)("c-avatar__badge",qt);return t.createElement("span",{className:tt},un)},"renderBadgeElement");Tt.displayName="renderBadgeElement";const Lt=u(()=>{const Nt=de?y.n[de]:Y;if(fe!==void 0&&Nt>=32){const Ft=fe();if(Ft)return Ft}if(fe===void 0&&Nt>=32){const Ft=x({isExternal:Ae,teamId:Q,team:Te,showTooltip:ce,badgeIconType:R,badgeIconClassName:K,allowTeamInitials:Le})();if(Ft)return Ft}return b?t.createElement(h.A,{memberId:S,inline:!1,className:"c-avatar__presence",inheritIconSize:!0}):he&&Nt>=32?Tt({tooltipText:u(()=>D.rt("Single-Channel Guests <span>see a partial directory and can only access messages and files from the channel they belong to.</span>",null,qt=>{let{text:un}=qt;return t.createElement("span",{className:"c-avatar__tooltip_detail"},un)}),"tooltipText"),className:"c-avatar__badge--ultra_restricted"}):ae&&Nt>=32?Tt({tooltipText:u(()=>D.rt("Multi-Channel Guests <span>see only a partial directory and can only access messages and files from selected channels.</span>",null,qt=>{let{text:un}=qt;return t.createElement("span",{className:"c-avatar__tooltip_detail"},un)}),"tooltipText"),className:"c-avatar__badge--restricted"}):null},"renderBadgeOrPresence");Lt.displayName="renderBadgeOrPresence";const ft=u(()=>{let Nt=G||X;return de?(de==="large"&&X&&(Nt=X),t.createElement(_.A,{image:Nt,classes:"c-base_icon--token",srcSet:_t(),size:y.n[de],ariaHidden:!0,ariaRole:"img",widthOnly:!0,onLoad:we,onError:Je,resetIA:et})):null},"renderTokenAvatar");ft.displayName="renderTokenAvatar";const mt=u(()=>G||X?de||_e?ft():t.createElement(_.A,{image:G||X,size:Y,srcSet:_t(),ariaHidden:!0,widthOnly:!0,onLoad:we,onError:Je,resetIA:et}):null,"renderImageTag");mt.displayName="renderImageTag";const Yt=u(Nt=>{let{fallback:Ft=null}=Nt,qt=Ft;return(G||X)&&(qt=mt()),qt},"renderImageOrFallback"),nn=Ce?t.createElement(k,{botEmoji:Ce,canRenderEmoji:Pe}):null,jt=Y>26?"base":"small",gn=lt==="member",on=lt==="ra"||lt==="external",Xt=lt==="ura",rn=t.useMemo(()=>b?at&&jt==="base"?o.BaseHeart:at&&jt==="small"?o.SmallHeart:gn&&jt==="base"&&nt?o.BaseMemberDnd:gn&&jt==="base"?o.BaseMember:gn&&jt==="small"&&nt?o.SmallMemberDnd:gn&&jt==="small"?o.SmallMember:on&&jt==="base"&&nt?o.BaseGuestDnd:on&&jt==="base"?o.BaseGuest:on&&jt==="small"&&nt?o.SmallGuestDnd:on&&jt==="small"?o.SmallGuest:Xt&&jt==="base"&&nt?o.BaseSingleChannelGuestDnd:Xt&&jt==="base"?o.BaseSingleChannelGuest:Xt&&jt==="small"&&nt?o.SmallSingleChannelGuestDnd:Xt&&jt==="small"?o.SmallSingleChannelGuest:"":"",[b,nt,jt,on,gn,Xt,at]),Zt=(0,n.A)(ve,"c-avatar",{"c-avatar--no_image":!(G||X||nn),"c-avatar--interactive":B&&!L&&!We,"c-avatar--ad_hoc_member":L,"c-avatar--deleted_member":ee,"c-avatar--resetIA":et}),Ht=de?y.n[de]:Y,Bt={height:`${Ht}px`,width:`${Ht}px`};let Qt;w&&(Qt=B&&Ye());const sn=Ie&&(B||Qt)?D.t("View {name}\u2019s Profile",{name:Ie}):void 0,Mn=Yt({fallback:nn}),ct={...Bt,"--avatar-image-size":`${Ht}px`},yt=at?"slackbot":lt,Rt=b||N;let xe=t.createElement(t.Fragment,null,b&&lt&&t.createElement(r,{isDnd:nt,userType:yt,size:jt}),Re?t.createElement(l.A,{className:ve,size:Ht}):Mn,Rt&&Lt(),vt());return Qt?xe=t.createElement(m.A,{href:Qt,target:"_blank",rel:"noopener noreferrer",style:Bt,className:Zt,onClick:He,tabIndex:Z,"aria-hidden":re,"aria-label":sn,autoClogProps:pe,"data-qa":ze,"data-stringify-ignore":Ke},xe):B&&!We?xe=t.createElement(d.A,{style:Bt,className:Zt,"data-qa":ze,"data-stringify-ignore":Ke,"aria-hidden":re,"aria-label":sn,tabIndex:Z,onClick:He,autoClogProps:pe},xe):xe=t.createElement("span",M({style:ct,className:Zt},rn?{"data-mask":rn}:{},{"data-qa":ze,"data-stringify-ignore":Ke,"aria-hidden":re}),xe),B&&j&&Y>=P.medium?(0,I.yN)({memberId:S,serviceId:w,botProfile:J,children:xe}):xe},"BaseAvatar");F.displayName="BaseAvatar"},1912114396:(z,A,e)=>{"use strict";e.d(A,{A:()=>S});var t=e(3134334389),n=e(8300007136),s=e(8642919232),a=e(8032081845),c=e(5267010247),o=e(8822892075),r=e(3275490582),l=e(3244118357),_=e(6052448919),d=e(8170643398),i=e(3534324375),m=e(4562579337),h=e(6536982570),v=e(3824874166),y=e(3339229351),T=e(4724591729),I=e(6415587347),p=e(92812954),g=e(6045540917),E=e(8847766420),f=e(9786721596),O=e(9418991940),C=e(8677230210),M=e(6273556946),D=e(3829348308),P=e(4761125736),k=e(5761207079),x=e(3677514771);function F(){return F=Object.assign||function(L){for(var w=1;w<arguments.length;w++){var J=arguments[w];for(var G in J)Object.prototype.hasOwnProperty.call(J,G)&&(L[G]=J[G])}return L},F.apply(this,arguments)}u(F,"_extends");const W=(0,t.forwardRef)((L,w)=>{const J=(0,n.wA)();t.useImperativeHandle(w,()=>({props:L}),[L]);const{user:G,userId:X,botId:te,botProfile:le,size:ve,icons:Q,emoji:Ae,team:ae,slackbotFeels:he,isUnknown:_e,showPresence:ee,isExternal:de}=L;let Ie=null,ce=null,j,N,b,R,K,B=Ae,$,Z;const{member:re,bot:Te,memberIsHuman:Ce}=(0,O.Z2)(Ke=>(0,C.Od)(Ke,{userId:X,botId:te,botProfile:le})),{currentTab:Pe,channelId:fe}=(0,t.useContext)(a.d),pe=G||X||_e,q=pe?G||re:void 0,se=q&&!q.isUnknown&&!q.is_unknown,ge=(0,O.d4)(Ke=>(0,P._Z)(Ke,"bot_team_id_from_member")==="on");if(se){var Oe;te||($=Te==null?void 0:Te.id);let Ke;ge?Ke=(0,h.dQ)(q):Ke=(0,m.A)(q)?(0,h.D5)(q):(0,h.dQ)(q);const He=(0,I.Ay)({size:ve,teamOrEnterpriseId:Ke,memberId:q==null?void 0:q.id,avatarHash:q==null||(Oe=q.profile)===null||Oe===void 0?void 0:Oe.avatar_hash,slackbotFeels:he});Ie=He==null?void 0:He.imageUrl,ce=He==null?void 0:He.imageUrl2x,j=de||(q==null?void 0:q.isExternal),N=q==null?void 0:q.is_restricted,b=q.is_ultra_restricted,R=q.id,K=(0,d.oy)(q)}Z=(0,O.d4)(Ke=>se&&j?(0,h.Ux)(Ke,q):void 0);let Le=pe?void 0:Q||le&&le.icons;if(!pe){if(Te){Le=Le||Te.icons;const Ke=(0,T.Cu)()?M.O:M.U;(Te==null?void 0:Te.app_id)===Ke&&(Le=(Te==null?void 0:Te.icons)||Le)}if(!B&&Le&&(B=Le.emoji),!B){const Ke=(0,I.Ay)({size:ve,botImages:Le,isBot:!0});Ie=Ke.imageUrl,ce=Ke.imageUrl2x}}Z=(0,O.d4)(Ke=>pe?Z:(ae==null?void 0:ae.id)||(0,_.s)(Ke,{bot:Te,botProfile:le,botId:te})||void 0),j=(0,O.d4)(Ke=>pe?j:Z?Z!==(0,E.Kc)(Ke):!1);const We=(0,O.d4)(Ke=>{if(se)return(0,i.sE)(Ke,q);if(!pe)return(0,l.Hg)(Te)}),Re=(0,O.d4)(Ke=>{let He=B&&Z&&(0,D.ux)(Ke,{text:B,teamId:Z});if(!He&&B&&Z===(0,E.Kc)(Ke)){const Ye=(0,x.H7)(Ke),_t=Ye&&Ye.id;_t&&_t!==Z&&(He=(0,D.ux)(Ke,{text:B,teamId:_t}))}return He}),we=(0,O.d4)(Ke=>ee?(0,p.d)(Ke,X):void 0),Je=(0,O.d4)(Ke=>ee?(0,g.h)(Ke,X):!1);var it;const et=(it=X??R)!==null&&it!==void 0?it:"",lt=(0,O.d4)(Ke=>et?(0,k.a)(Ke,et):!1),nt=(0,t.useCallback)(Ke=>J((0,f.U)(Ke)),[J]),at=(0,t.useCallback)(Ke=>J((0,s.A)(Ke)),[J]),ze=(0,t.useCallback)(Ke=>J(Pe&&fe?(0,c.o)((0,o.sL)(Ke,fe,Pe.id)):(0,c.o)(Ke)),[J,Pe,fe]);return t.createElement(v.f1,F({},L,{userId:X,imageUrl:Ie||void 0,imageUrl2x:ce||void 0,botEmoji:B,canRenderEmoji:!!Re,teamId:Z,isRestricted:N,isUltraRestricted:b,isDeleted:K,memberOrBotName:We,botId:$||te,disableLink:!Ce&&(!Te||(0,d.v3)(Te)),isExternal:j,isUserHidden:lt,userType:we,isDnd:Je,isSlackbot:X===y.Q$,size:ve,openProfile:nt,showMemberProfileInWindow:at,navigate:ze}))}),Y=(0,r.A)(t.memo(W));Y.displayName="ConnectedAvatar";const S=Y},4775127335:(z,A,e)=>{"use strict";e.d(A,{Ay:()=>s,RG:()=>n.RG,f1:()=>n.f1,fp:()=>n.fp});var t=e(1912114396),n=e(3824874166);const s=t.A},9270432170:(z,A,e)=>{"use strict";e.d(A,{A:()=>c});var t=e(3134334389),n=e(5255740490),s=e(8683010724);function a(o){let{className:r="",size:l,"data-qa":_}=o;return t.createElement("span",{className:(0,n.A)(r,"c-hidden_user_avatar",{"c-hidden_user_avatar--small":l===16}),style:{width:`${l}px`,height:`${l}px`},"data-qa":_},t.createElement("span",{className:"c-hidden_user_avatar--icon"},t.createElement(s.A,{size:l<=24?"16":"24",name:"user-hide"})))}u(a,"HiddenUserAvatar"),a.displayName="HiddenUserAvatar";const c=t.memo(a)},9332393661:(z,A,e)=>{"use strict";e.d(A,{A:()=>m});var t=e(3134334389),n=e(5255740490),s=e(3398586081),a=e(7715417323),c=e(1610251172);const o=(0,s.A)(h=>({height:`${h}px`,width:`${h}px`}));function r(h){let{icon:v,classes:y=null,size:T=20,ariaHidden:I=void 0,ariaRole:p="img",ariaLabel:g=void 0}=h;const E=(0,n.A)("c-base_font_icon",y);return t.createElement("div",{className:E,style:o(T),"aria-hidden":I,role:p,"aria-label":g},t.createElement(c.A,{type:v}))}u(r,"BaseFontIcon"),r.displayName="BaseFontIcon";const l=r,_=(0,s.A)(h=>({height:`${h}px`,width:`${h}px`})),d=(0,s.A)(h=>({width:`${h}px`}));function i(h){let{image:v=void 0,size:y=20,srcSet:T="",classes:I=void 0,icon:p=void 0,ariaHidden:g=!1,ariaRole:E="img",ariaLabel:f=void 0,widthOnly:O=!1,onLoad:C=a.A,onError:M=a.A,resetIA:D,"data-qa":P}=h;if(v&&p)throw Error("Cannot pass in both image and icon!");if(!g&&!f)throw Error("If ariaHidden is false, we must have an ariaLabel for a11y!");const k=(0,n.A)("c-base_icon",I,{"c-base_icon--unknown":!v&&!p,"c-base_icon--image":v,"c-base_icon--resetIA":D});if(p)return t.createElement(l,{icon:p,classes:k,size:y,ariaHidden:g,ariaRole:E,ariaLabel:f});const x=t.createElement("img",{src:v,srcSet:T,className:k,style:O?d(y):_(y),"aria-hidden":g,role:E,"aria-label":f,alt:"",onLoad:C,onError:M,"data-qa":P});return O?t.createElement("span",{className:(0,n.A)("c-base_icon__width_only_container",{"c-base_icon--resetIA":D}),style:_(y)},x):x}u(i,"BaseIcon"),i.displayName="BaseIcon";const m=i},9574544148:(z,A,e)=>{"use strict";e.d(A,{A:()=>I});var t=e(3134334389),n=e(1649982175),s=e(3297051565),a=e.n(s),c=e(9262712126),o=e(8921478798),r=e(3534324375),l=e(735940183),_=e(9391594207),d=e(5761207079);function i(){return i=Object.assign||function(p){for(var g=1;g<arguments.length;g++){var E=arguments[g];for(var f in E)Object.prototype.hasOwnProperty.call(E,f)&&(p[f]=E[f])}return p},i.apply(this,arguments)}u(i,"_extends");const m=new l.Ay("files"),h={name:a().string.isRequired,isChannelFiles:a().bool,showMemberNameIfHidden:a().bool},v={isChannelFiles:!1,showMemberNameIfHidden:!1},y=u(p=>{const g=(0,n.A)(p,["id","name","dispatch","firstName","skipPrefCompliance","isChannelFiles","showMemberNameIfHidden"]);let E=p.name;if(p.isChannelFiles){const f=p.name;E=m.t("Shared by {memberName}",{memberName:f})}return t.createElement("span",i({},g),E)},"MemberName");y.displayName="MemberName",y.propTypes=h,y.defaultProps=v;const T=u((p,g)=>{const{id:E,member:f,skipPrefCompliance:O,showMemberNameIfHidden:C}=g;if(O)return{name:(0,c.wg)(f)};let M;return!C&&(0,d.a)(p,E)?M=m.t("Name hidden"):M=f?(0,r.sE)(p,f,!1,!1,O,!1):(0,o.I)(p,E,!1,!1,!1,!1),{name:M}},"mapStateToProps"),I=(0,_.N)(T)(y)},6496493732:(z,A,e)=>{"use strict";e.d(A,{A:()=>v});var t=e(3134334389),n=e(7715417323),s=e(6084388622),a=e(4979382452),c=e(4636370173),o=e(2465132699),r=e(8523371695),l=e(3606117573),_=e(8029613601),d=e(4947127560),i=e(735940183);const m=new i.Ay("generic_dialog"),h=u(y=>{let{title:T,children:I,submitButtonType:p="primary",submitButtonText:g=m.t("Confirm"),submitButtonIsDisabled:E=!1,submitButtonIsLoading:f=!1,showCancelButton:O=!0,showCloseButton:C=!0,showSubmitButton:M=!0,cancelButtonText:D=m.t("Cancel"),onSubmit:P=n.A,onCancel:k=n.A,onClose:x=n.A,"aria-describedby":F,"data-qa":W="dialog",className:Y,overlayClassName:S,submitAutoClogProps:L,cancelAutoClogProps:w,shouldReturnFocusAfterClose:J=!0}=y;return t.createElement(a.A,{describedby:F,closeModal:x,role:"dialog",className:Y,overlayClassName:S,dataQa:W,shouldReturnFocusAfterClose:J,showCloseButton:C},t.createElement(_.A,null,t.createElement(d.A,{title:T,"data-qa":`${W}_header`})),t.createElement(c.A,null,t.createElement(o.A,{"data-qa":`${W}_body`},I)),(O||M)&&t.createElement(r.A,{"data-qa":`${W}_footer`},t.createElement(l.A,null,O&&t.createElement(s.Ay,{type:"outline",onClick:k,"data-qa":`${W}_cancel`,autoClogProps:w},D),M&&t.createElement(s.lV,{type:p,onClick:P,loading:f,disabled:E,"data-qa":`${W}_go`,autoClogProps:L},g))))},"DialogModalProps");h.displayName="DialogModalProps";const v=h},8661826718:(z,A,e)=>{"use strict";e.d(A,{A:()=>O,k:()=>I});var t=e(3134334389),n=e(5255740490),s=e(1407713935),a=e(4559887502),c=e(6007206761),o=e(6194667569),r=e(3914799651),l=e(3654840599),_=e(2671211451),d=e(3877384923),i=e(9285382326),m=e(796111729),h=e(5356156303),v=e(9391594207),y=e(9101533895);function T(){return T=Object.assign||function(C){for(var M=1;M<arguments.length;M++){var D=arguments[M];for(var P in D)Object.prototype.hasOwnProperty.call(D,P)&&(C[P]=D[P])}return C},T.apply(this,arguments)}u(T,"_extends");function I(C){return!(0,s.LI)(C)&&!(0,s.yz)(C)}u(I,"shouldUseInlineChannelEntity");const p="INLINE-CHANNEL-ENTITY";function g(C){let{className:M,channel:D,bestFormerName:P,displayFormerNames:k=d.P.false,logger:x,boldIcon:F=!1,showTeam:W=!0,truncate:Y=!1,truncateWidth:S,overrideHiddenName:L,overrideHiddenIcon:w,withTruncationTooltip:J,channelNameClassName:G,omitNonExistentTooltip:X,channelHasNonUniqueName:te=!1,showDisambiguatingTeamName:le=!1}=C;const ve=(0,s.t8)(D),Q=(0,s.QR)(D||null),Ae=(0,t.useCallback)(ce=>{let{className:j,...N}=ce;return(!Q||w)&&t.createElement(l.A,T({},N,{bold:F,className:j,channel:D,overrideHiddenIcon:w}))},[D,F,Q,w]);if(!I(D||null))return x==null||x.warn(p,"InlineChannelEntity should not display IMs or MPIMs"),null;const ae=(0,n.A)(M,"c-inline_channel_entity"),he=(0,c.F)(D)?d.pI.dim:void 0,_e=D&&L?{...D,name:L}:D||void 0,ee=(0,n.A)(G,"c-inline_channel_entity__content"),de=te&&le,Ie=(ve||Q)&&!L?t.createElement(i.A,{"data-qa":"inline_channel_entity__missing",type:ve?"unknown":"non-existent",size:"small",width:S,omitNonExistentTooltip:X}):t.createElement("span",{className:ee},t.createElement(o.A,{bold:F,channel:_e,bestFormerName:P,displayFormerNames:k,showTeam:W,showTeamForLocalChannel:de,width:S,"data-qa":"inline_channel_entity__name",overrideHiddenName:L}));return t.createElement(_.A,{avatar:Ae,className:ae,"data-qa":"inline_channel_entity","data-channel-id":D&&D.id,style:he,truncate:Y,truncateWidth:S,withTruncationTooltip:J,primaryContent:Ie,secondaryContent:S&&t.createElement(t.Fragment,null,W&&t.createElement(r.A,{className:"c-inline_channel_entity__team",iconSize:14,channel:_e,"data-qa":"inline_channel_entity__team"}))})}u(g,"InlineChannelEntity"),g.displayName="InlineChannelEntity";function E(C){return Object.prototype.hasOwnProperty.call(C,"channel")}u(E,"propsContainsChannel");function f(C,M){const D=E(M)?M.channel:(0,y.OL)(C,M.channelId);let P;return M.showDisambiguatingTeamName&&(P=(0,a.i)((0,y.MS)(C),D)),{channel:D,channelHasNonUniqueName:P,logger:(0,m.Ay)({state:C})}}u(f,"mapStateToProps");const O=(0,v.N)(f,null,null,{areStatePropsEqual:h.kt})(g)},5387475318:(z,A,e)=>{"use strict";e.d(A,{A:()=>M});var t=e(3134334389),n=e(5255740490),s=e(6696292586),a=e(9289081806),c=e(1407713935),o=e(4559887502),r=e(6007206761),l=e(6119417095),_=e(6194667569),d=e(5273017660),i=e(3877384923),m=e(9285382326),h=e(796111729),v=e(735940183),y=e(9391594207),T=e(9101533895),I=e(8286248123);function p(){return p=Object.assign||function(D){for(var P=1;P<arguments.length;P++){var k=arguments[P];for(var x in k)Object.prototype.hasOwnProperty.call(k,x)&&(D[x]=k[x])}return D},p.apply(this,arguments)}u(p,"_extends");const g=new v.Ay("channel_entity"),E="SMALL-CHANNEL-ENTITY";function f(D){let{className:P,channel:k,bestFormerName:x,inlineNameSuffix:F,invert:W=!1,logger:Y,displayFormerNames:S=i.P.false,showTeamForLocalChannel:L,showDraftIcon:w=!1,showFilledIcon:J=!1,showTeam:G,memberCount:X,onlyBoldIfUnread:te=!1,showTruncatedChannelNameTooltip:le=!1,"data-qa":ve="small_channel_entity",channelHasNonUniqueName:Q=!1,showDisambiguatingTeamName:Ae=!1}=D;const ae=(0,t.useCallback)(K=>t.createElement(l.A,p({},K,{className:"c-small_channel_entity__icon",channel:k,size:i.RG.small,showDraftIcon:w,showFilledIcon:J})),[k,w,J]);if((0,c.LI)(k)||(0,c.yz)(k))return Y==null||Y.warn(E,"SmallChannelEntity should not display IMs or MPIMs"),null;const he=(0,n.A)(P,"c-small_channel_entity"),_e=!te||(0,a.KJ)(k),ee=(0,c.t8)(k),de=(0,c.QR)(k);let Ie=(0,r.F)(k)?i.pI.dim:void 0;W&&(Ie=i.pI.highlightDark);let ce=null;if((0,s.A)(X)){const K=g.t("{userCount, plural, =1 {# member} other {# members}}",{userCount:X,fallbackHash:"c8e3bc8a761a13ce8f87cea7ebb3009bccee1a21",fallbackHashNs:"user_group_entity"});ce=t.createElement("span",{className:"c-small_channel_entity__inline_name_suffix normal","aria-label":K},"(",X,")")}const j=Q&&Ae,N=t.createElement(_.A,{channel:k,bestFormerName:x,inlineNameSuffix:F,displayFormerNames:S,showTeamForLocalChannel:L||j,showTeam:G,bold:!!_e}),b=le?t.createElement(d.CG,{withTruncationTooltip:!0},N):N,R=(0,n.A)("c-small_channel_entity__content","c-small_channel_entity__content--xws",{"c-small_channel_entity__content--show-truncated-tooltip":le});return t.createElement(d.Ay,{avatar:ae,className:he,"data-qa":ve,size:"small",style:Ie,text:t.createElement(d.CG,null,ee||de?t.createElement(m.A,{type:ee?"unknown":"non-existent",invert:W,size:"small"}):t.createElement("span",{className:R},b,F&&t.createElement("span",{className:"c-small_channel_entity__inline_name_suffix"},F),ce))})}u(f,"SmallChannelEntity"),f.displayName="SmallChannelEntity";function O(D){return Object.prototype.hasOwnProperty.call(D,"channel")}u(O,"propsContainsChannel");function C(D,P){let k;if(P.showMemberCounts){var x;const Y=(0,I.q8)(D,O(P)?(0,a.FB)(P.channel):P.channelId);k=Y?Y==null||(x=Y.counts)===null||x===void 0?void 0:x.member_count:null}const F=O(P)?P.channel:(0,T.OL)(D,P.channelId);let W;return P.showDisambiguatingTeamName&&(W=(0,o.i)((0,T.MS)(D),F)),{memberCount:k,channel:F,logger:(0,h.Ay)({state:D,label:E}),channelHasNonUniqueName:W}}u(C,"mapStateToProps");const M=(0,y.N)(C)(f)},5103164797:(z,A,e)=>{"use strict";e.d(A,{A:()=>h});var t=e(3134334389),n=e(5387475318),s=e(2828836153),a=e(3877384923),c=e(9163962844),o=e(9391594207),r=e(9101533895);function l(){return l=Object.assign||function(v){for(var y=1;y<arguments.length;y++){var T=arguments[y];for(var I in T)Object.prototype.hasOwnProperty.call(T,I)&&(v[I]=T[I])}return v},l.apply(this,arguments)}u(l,"_extends");function _(v,y,T){if(v)return y||T?a.pI.highlightDim:a.pI.highlightDark;if(y||T)return a.pI.dim}u(_,"getBaseStyle");function d(v){let{className:y,secondaryContent:T,isActive:I=!1,isDeactivated:p=!1,isDisabled:g=!1,showUnreadBadge:E=!1,badgeCount:f=0,onlyBoldIfUnread:O=!1,...C}=v,M=T;E&&(M=t.createElement("div",{className:"c-small_channel_entity__secondary-content-badge"},T,t.createElement(c.A,{count:f,className:"c-channel_entity__mentions",style:I?"white":"red"})));const D=_(I,g,p);return t.createElement(s.A,{className:y,primaryContent:t.createElement(n.A,l({invert:D===a.pI.highlightDark,onlyBoldIfUnread:O},C)),secondaryContent:M,size:"small",style:D})}u(d,"SmallChannelListEntity"),d.displayName="SmallChannelListEntity";function i(v){return Object.prototype.hasOwnProperty.call(v,"channel")}u(i,"propsContainsChannel");function m(v,y){const T=i(y)?y.channel:(0,r.OL)(v,y.channelId),I=y.showUnreadBadge?y.badgeCount||(0,r.TJ)(v,T):0;return{channel:T,badgeCount:I}}u(m,"mapStateToProps");const h=(0,o.N)(m)(d)},6119417095:(z,A,e)=>{"use strict";e.d(A,{A:()=>d});var t=e(3134334389),n=e(5255740490),s=e(1407713935),a=e(890457517),c=e(3877384923),o=e(8683010724),r=e(9418991940);function l(){return l=Object.assign||function(i){for(var m=1;m<arguments.length;m++){var h=arguments[m];for(var v in h)Object.prototype.hasOwnProperty.call(h,v)&&(i[v]=h[v])}return i},l.apply(this,arguments)}u(l,"_extends");function _(i){let{size:m=c.RG.medium,className:h,channel:v,showDraftIcon:y=!1,showFilledIcon:T=!1}=i;const I=(0,s.t8)(v),p=(0,r.d4)(g=>(0,a.Ay)(g,v,{filled:T,showDraftIcon:y}));return m!==c.RG.small&&(p.inline=!0),t.createElement("span",{className:(0,n.A)("c-channel_icon",{"c-channel_icon--unknown":I,"c-channel_icon--with-background":m!==c.RG.small},h),"data-channel-type-icon":(p==null?void 0:p.name)||"unknown"},!I&&t.createElement(o.A,l({},m===c.RG.small?{size:"18"}:{},p)))}u(_,"ChannelIcon"),_.displayName="ChannelIcon";const d=_},6194667569:(z,A,e)=>{"use strict";e.d(A,{A:()=>P});var t=e(3134334389),n=e(5255740490),s=e(9113979368),a=e(6159136815),c=e(9289081806),o=e(6007206761),r=e(395285811),l=e(4630136761),_=e(2188787324),d=e(3634593162),i=e(6839188756),m=e(3914799651),h=e(3654840599),v=e(3877384923),y=e(82287009),T=e(1596328926),I=e(735940183),p=e(9391594207),g=e(937317117),E=e(3677514771);function f(){return f=Object.assign||function(k){for(var x=1;x<arguments.length;x++){var F=arguments[x];for(var W in F)Object.prototype.hasOwnProperty.call(F,W)&&(k[W]=F[W])}return k},f.apply(this,arguments)}u(f,"_extends");const O=new I.Ay("search"),C=new I.Ay("inline_channel");function M(k){const{bestFormerName:x,bold:F=!0,channel:W,channelName:Y,overrideHiddenName:S,width:L,displayFormerNames:w=v.P.true,isChannelFrozenAndInGracePeriod:J,showTeam:G=!0,showTeamForLocalChannel:X=!1,showTeamName:te,titleBlocks:le}=k,ve=(0,o.F)(W)&&!J;let Q=`${S??Y}${ve?` ${O.t("(archived)")}`:""}`,Ae;if(w)if(x){const he=t.createElement(h.A,{bold:F,className:"c-channel_name__former_channel_icon",channel:W}),_e=t.createElement("span",{className:"c-channel_name__former_name_text"},t.createElement(a.A,{text:x,showTooltips:!1}));Ae=x&&t.createElement("span",{className:"c-channel_name__suffix"},C.rt(" (formerly {icon}{name})",{icon:he,name:_e,note:'Shown when a user is typing the old name of a channel, e.g. "#dogs (formerly #cats)" or "#dogs (archived) (formerly #cats)"',fallbackHash:"b574996f0134b62e0fae6797e7d969b04de6b482"}))}else{let he;const _e=(0,c.Hx)(W);if(_e&&!(0,s.A)(_e)){const ee=_e.map(Ie=>`#${Ie}`);he=(0,I.jd)(ee,{noConj:!0}).join("")}he&&(Q+=` ${C.t("(formerly {names})",{names:he,note:'Shown when a user is typing the old name of a channel, e.g. "#dogs (formerly #cats)" or "#dogs (archived) (formerly #cats)"'})}`)}const ae=(0,n.A)("c-channel_entity__name",{"c-channel_entity__name--bold":F});return t.createElement(t.Fragment,null,t.createElement("span",f({className:ae},(0,T.A)(k)),le??t.createElement(t.Fragment,null,t.createElement(a.A,{text:Q,showTooltips:!1}),w&&Ae)),!L&&t.createElement(t.Fragment,null,G&&t.createElement(m.A,{className:"c-channel_entity__team",iconSize:v.RG.inline,channel:W,"data-qa":"channel_entity__team",shouldRender:X,showTeamName:te})))}u(M,"ChannelName"),M.displayName="ChannelName";function D(k,x){let{channel:F,includeChannelPrefix:W}=x;const Y=(0,E.H7)(k)||(0,E.lp)(k),S=(0,i.ZT)(Y),L=F&&(0,r.jT)(F)&&(0,d.l)(F.id),w=L?(0,g.Lp)(k,L):void 0,J=w&&(0,_.U9)(w)?(0,y.GU)({id:L,fileId:L,size:"caption",truncate:!1}):null;var G;return{channelName:(G=(0,c.SB)(k,F,{publicChannelIncludeHashSign:!!W,imIncludeAtSign:!1}))!==null&&G!==void 0?G:void 0,titleBlocks:J,isChannelFrozenAndInGracePeriod:(0,l.sP)(S,F)}}u(D,"mapStateToProps");const P=(0,p.N)(D)(M)},3914799651:(z,A,e)=>{"use strict";e.d(A,{A:()=>i});var t=e(3134334389),n=e(5255740490),s=e(9289081806),a=e(6839188756),c=e(9950739645),o=e(9391594207),r=e(9101533895),l=e(3677514771);let _=u(class extends t.Component{render(){const{shouldRender:h,team:v,className:y}=this.props;return!h||!v?null:t.createElement("div",{className:(0,n.A)("c-channel_team","c-channel_team--xws",y),"data-qa":"channel_team"},t.createElement("span",{className:"c-channel_team__name"},(0,a.F1)(v)))}},"ChannelTeam");_.displayName="ChannelTeam";const d=u((m,h)=>{let{channel:v,channelId:y,shouldRender:T}=h;const I=v||(0,r.OL)(m,y),p=!!(I!=null&&I.context_team_id&&(0,c.B)(m,I.context_team_id));let g;if((0,s.lo)(I))g=(0,l._J)(m,(0,s.bK)(m,I));else if(T||p){const E=(0,s.ne)(m,I);g=(E?(0,l._J)(m,E):void 0)||(0,l.H7)(m)}return{shouldRender:T||p||!!(0,s.lo)(I),team:g??void 0}},"mapStateToProps"),i=(0,o.N)(d)(_)},3654840599:(z,A,e)=>{"use strict";e.d(A,{A:()=>_});var t=e(3134334389),n=e(5255740490),s=e(1407713935),a=e(890457517),c=e(8683010724),o=e(9418991940);function r(){return r=Object.assign||function(d){for(var i=1;i<arguments.length;i++){var m=arguments[i];for(var h in m)Object.prototype.hasOwnProperty.call(m,h)&&(d[h]=m[h])}return d},r.apply(this,arguments)}u(r,"_extends");const l=u(d=>{let{className:i,filled:m,bold:h,channel:v,disableArchived:y,overrideHiddenIcon:T}=d;const I=(0,o.d4)(g=>T||(0,a.Ay)(g,v,{filled:m||(0,s.Zp)(v),bold:h,disableArchived:y})),p=(0,n.A)(i,{"c-inline_channel_icon c-inline_channel_icon--space":!0});return t.createElement("span",{className:p,"data-inline-channel-type-icon":I.name},t.createElement(c.A,r({inline:!0},I)))},"InlineChannelIcon");l.displayName="InlineChannelIcon";const _=t.memo(l)},890457517:(z,A,e)=>{"use strict";e.d(A,{Ay:()=>M,PR:()=>O,pH:()=>E});var t=e(5892132962),n=e(9289081806),s=e(1407713935),a=e(6007206761),c=e(395285811),o=e(4630136761),r=e(2188787324),l=e(3634593162),_=e(6839188756),d=e(9101533895),i=e(937317117),m=e(3677514771);const h={name:"archive"},v={name:"archive",variation:"filled"},y={name:"edit"},T={name:"edit",variation:"filled"},I={name:"file"},p={name:"lists"},g={name:"lock"},E={name:"lock",variation:"filled"},f={name:"channel"},O={name:"channel",variation:"filled"},C={name:"canvas"};function M(D,P){let{filled:k,bold:x,disableArchived:F,showDraftIcon:W}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{filled:!1,bold:!1,disableArchived:!1,showDraftIcon:!1};const Y=(0,m.H7)(D)||(0,m.lp)(D),S=(0,_.ZT)(Y);if(!(0,o.sP)(S,P)&&((0,a.F)(P)&&!F||(0,o.Zz)(P)))return k?v:h;if(W&&(0,n.yc)(D,P.id))return k?T:y;if((0,c.jT)(P)){const w=(0,i.Lp)(D,(0,l.l)(P.id));if((0,r.wL)(w))return C;if((0,r.aD)(w)){const J=(0,d.Pf)(D,w.id),G=(0,d.OL)(D,J);return(0,s.Zp)(G)||(0,s.JM)(G)?k?E:g:C}return(0,r.l7)(w)?p:I}const L=(0,t.sc)(P);return L||((0,s.Zp)(P)?k?E:g:x?O:f)}u(M,"getChannelIconType")},444524526:(z,A,e)=>{"use strict";e.d(A,{A:()=>I});var t=e(3134334389),n=e(5255740490),s=e(3750057149),a=e(3037015781),c=e(8170643398),o=e(9262712126),r=e(4562579337),l=e(1084169413),_=e(2671211451),d=e(3877384923),i=e(9391594207),m=e(5761207079),h=e(8276911661),v=e(3146663623);function y(p){const{className:g,forceRealName:E=!1,id:f,member:O,truncate:C=!1,truncateWidth:M,withTruncationTooltip:D=!1,"data-qa":P="inline_member_entity",isBold:k=!0,showAppOrBotBadge:x,isUserHidden:F=!1}=p,W=(0,n.A)(g,"c-inline_member_entity"),Y=(0,r.A)(O),S=(0,c.v3)(O),L=(0,c.oy)(O),w=(0,a.lv)(O),J=(0,a.mX)(O),G=(0,o.wg)(O),X=(0,o.Fh)(O);let te;E||!X?te=G:te=X;const le=L?d.pI.dim:void 0;return t.createElement(_.A,{className:W,"data-qa":P,"data-member-id":f||(O==null?void 0:O.id),style:le,truncate:C,truncateWidth:M,withTruncationTooltip:D,primaryContent:t.createElement("span",{className:"c-inline_member_entity__content"},t.createElement(l.A,{isBold:k,name:te,inline:!0,"data-qa":"inline_member_entity__name",isAppOrBot:Y,isWorkflowBot:S,isDeleted:L,isNonExistent:w,isUnknown:J,showAppOrBotBadge:x,isUserHidden:F}))})}u(y,"InlineMemberEntity"),y.displayName="InlineMemberEntity";function T(p,g){let{forceRealName:E,member:f,id:O}=g;const C=f||(0,h.nv)(p,O);return{member:C??void 0,forceRealName:(0,s.A)(E)?E:(0,v.E)(p),isUserHidden:C&&(0,m.a)(p,C.id)}}u(T,"mapStateToProps");const I=(0,i.N)(T)(y)},7076189804:(z,A,e)=>{"use strict";e.d(A,{Ay:()=>x,lP:()=>D});var t=e(3134334389),n=e(5255740490),s=e(2486585453),a=e(3037015781),c=e(9289081806),o=e(8170643398),r=e(9262712126),l=e(3534324375),_=e(4562579337),d=e(4775127335),i=e(1084169413),m=e(1464713483),h=e(51460783),v=e(161084047),y=e(3534100833),T=e(3877384923),I=e(9828955991),p=e(8683010724),g=e(82287009),E=e(9391594207),f=e(9101533895),O=e(5761207079),C=e(8276911661);function M(){return M=Object.assign||function(F){for(var W=1;W<arguments.length;W++){var Y=arguments[W];for(var S in Y)Object.prototype.hasOwnProperty.call(Y,S)&&(F[S]=Y[S])}return F},M.apply(this,arguments)}u(M,"_extends");const D={right:"right",bottom:"bottom"};function P(F){const{className:W,id:Y,invert:S=!1,member:L,memberPrimaryName:w,memberSecondaryName:J,secondaryContent:G,secondaryContentPosition:X=D.bottom,subtext:te,showSubtext:le=!0,showAvatar:ve=!0,showDraftIcon:Q=!1,showPresence:Ae=!0,showStatus:ae=!0,showTooltip:he=!0,showAppOrBotBadge:_e=!0,isDeactivated:ee=!1,useShortMode:de,showHoverCard:Ie=!1,forwardedRef:ce,"data-sk":j="medium_member_entity","data-qa":N="medium_member_entity",isUserHidden:b=!1,noStatusText:R=!1}=F,K=(0,_.A)(L),B=(0,o.v3)(L),$=(0,o.oy)(L),Z=(0,o.fy)(L),re=(0,o.hh)(L),Te=(0,a.lv)(L),Ce=(0,a.mX)(L),Pe=t.createElement(i.A,{"data-qa":"member-entity__primary-name",name:w,invert:S&&!ee,isAppOrBot:K,isWorkflowBot:B,showAppOrBotBadge:_e,isDeleted:$,isSelf:Z,isNonExistent:Te,isUnknown:Ce,isUserHidden:b}),fe=(0,g.yN)({memberId:Y,children:Pe}),pe=!b&&t.createElement(y.A,{className:"c-member__secondary-name","data-qa":"member-entity__secondary-name"},J),q=L&&t.createElement(v.A,{className:"c-member__title","data-qa":"member-entity__title"},(0,o.rN)(L)),se=!$&&!re&&t.createElement(I.Ay,{memberId:Y,className:"c-member__presence",invert:S&&!ee,"data-qa":"member-entity__presence",inline:!1}),ge=t.createElement(s.A,{memberId:Y,tooltip:he,animated:de,className:"c-member__current-status c-member__current-status--medium","data-qa":"member-entity__status",noText:R}),Oe=X===D.bottom&&G?t.createElement(h.A,{"data-qa":"member-entity__metadata"},G):null,Le=t.createElement("span",{className:"c-member__primary_content"},Ie?fe:Pe,Ae&&se,!de&&pe,ae&&ge),We=$||ee?T.pI.dim:void 0,Re=(0,n.A)(W,"c-member","c-member--medium",{"c-member--with-presence":Ae}),we=(0,t.useCallback)(Je=>ve&&(Q?t.createElement("span",{className:"c-member__draft_icon"},t.createElement(p.A,{name:"edit"})):t.createElement(d.Ay,M({},Je,{size:T.RG.medium,userId:Y,"data-qa":"member-entity__avatar",isInteractive:!1}))),[ve,Q,Y]);return t.createElement(m.A,{avatar:we,className:Re,size:"medium",style:We,text:Le,subtext:le&&(te||q),metadata:!$&&Oe,"data-qa":N,"data-sk":j,forwardedRef:ce})}u(P,"MediumMemberEntity"),P.displayName="MediumMemberEntity";function k(F,W){let{id:Y,isDraftContext:S,member:L,showStatus:w}=W;const J=L||(0,C.nv)(F,Y);let G=!1;if(S&&Y){const te=(0,f.Pu)(F,Y);G=!!(te&&(0,c.yc)(F,te.id))}const X=Y||(J==null?void 0:J.id);return{id:X,member:J??void 0,memberPrimaryName:(0,l.sE)(F,J,!1,!1),memberSecondaryName:(0,r.Mu)(F,J),showDraftIcon:G,showStatus:w&&(0,o.aH)(J),isUserHidden:!!X&&(0,O.a)(F,X)}}u(k,"mapStateToProps");const x=(0,E.N)(k)(P)},4822627003:(z,A,e)=>{"use strict";e.d(A,{A:()=>h});var t=e(3134334389),n=e(5255740490),s=e(9438480351),a=e(7076189804),c=e(2828836153),o=e(3877384923),r=e(2762351398),l=e(9391594207),_=e(8276911661);function d(){return d=Object.assign||function(v){for(var y=1;y<arguments.length;y++){var T=arguments[y];for(var I in T)Object.prototype.hasOwnProperty.call(T,I)&&(v[I]=T[I])}return v},d.apply(this,arguments)}u(d,"_extends");let i=u(class extends t.Component{render(){const{className:y,isActive:T=!1,isDeactivated:I=!1,isDisabled:p=!1,secondaryContent:g,secondaryContentPosition:E=a.lP.right,showUnreadCount:f=!1,showStatus:O,showPresence:C,useShortMode:M=!1,showHoverCard:D,forwardedRef:P,unreadCount:k,ariaLabel:x}=this.props,F=f&&k&&t.createElement(r.Ay,{className:"c-member__unread_count",count:k,style:r.rY.red}),W=g&&t.createElement("span",{className:"c-member__details","data-qa":"member-entity__secondary-content"},g),Y=(E===a.lP.right&&W||F)&&t.createElement("span",{className:"c-member__secondary_content"},E===a.lP.right&&W,F),S=(0,n.A)(y,"c-medium_member_list_entity");let L;return T?p||I?L=o.pI.highlightDim:L=o.pI.highlightLight:(p||I)&&(L=o.pI.dim),t.createElement(c.A,{"data-qa":"medium_member_list_entity",className:S,style:L,primaryContent:t.createElement(a.Ay,d({},this.props,{secondaryContent:E===a.lP.right?null:g,showStatus:O,showPresence:C,showHoverCard:D,useShortMode:M,forwardedRef:P})),secondaryContent:Y,size:"medium",ariaLabel:x})}},"MediumMemberListEntity");i.displayName="MediumMemberListEntity";function m(v,y){let{id:T}=y;const I=(0,_.nv)(v,T);return{member:I??void 0,unreadCount:(0,s.A)(v,I)}}u(m,"mapStateToProps");const h=(0,l.N)(m,null,null,{forwardRef:!0})(i)},5289504844:(z,A,e)=>{"use strict";e.d(A,{Ay:()=>G,Cg:()=>S});var t=e(3134334389),n=e(5255740490),s=e(3750057149),a=e(7278430876),c=e(3037015781),o=e(9289081806),r=e(8170643398),l=e(9438480351),_=e(9262712126),d=e(4562579337),i=e(5096647761),m=e(6536982570),h=e(4775127335),v=e(1084169413),y=e(5273017660),T=e(3534100833),I=e(3877384923),p=e(2762351398),g=e(8028620372),E=e(9828955991),f=e(8683010724),O=e(5484624422),C=e(735940183),M=e(9391594207),D=e(9101533895),P=e(4761125736),k=e(5761207079),x=e(8276911661),F=e(3146663623);function W(){return W=Object.assign||function(X){for(var te=1;te<arguments.length;te++){var le=arguments[te];for(var ve in le)Object.prototype.hasOwnProperty.call(le,ve)&&(X[ve]=le[ve])}return X},W.apply(this,arguments)}u(W,"_extends");const Y=20,S=16,L=new C.Ay("members");function w(X){const{className:te,id:le,invert:ve=!1,member:Q,teamId:Ae,showAvatar:ae=!0,showDraftIcon:he=!1,showPresence:_e=!0,showBadge:ee=!0,showStatus:de=!0,showTooltip:Ie=!0,showUnreadCount:ce=!1,showDeactivated:j=!0,isDeactivated:N=!1,unreadCount:b,useShortMode:R=!1,forceRealName:K=!1,tokenSize:B,truncateStatus:$=!1,withTruncationTooltip:Z,"data-sk":re="small_member_entity","data-qa":Te="small_member_entity",isBold:Ce,experimentSidebarPrefsApplyToMenusGroupOn:Pe=!1,isUserHidden:fe=!1}=X,pe=(0,d.A)(Q),q=(0,r.v3)(Q),se=(0,r.oy)(Q),ge=(0,i.g)(Q),Oe=(0,r.fy)(Q),Le=(0,r.hh)(Q),We=(0,c.lv)(Q),Re=(0,c.mX)(Q),we=We||Re,Je=ve&&!N,it=j&&se,et=(0,_.wg)(Q),lt=(0,_.Fh)(Q);let nt,at;fe?(nt=L.t("Name hidden"),at=L.t("Name hidden")):K||!lt?(nt=et,at=lt):(nt=lt,at=et);const ze=t.createElement(v.A,{"data-qa":"member-entity__primary-name",className:"c-member__member-name",name:nt,invert:Je,isAppOrBot:pe,isWorkflowBot:q,isDeleted:it,isSelf:Oe,isNonExistent:We,isUnknown:Re,withTruncationTooltip:Z,isBold:Ce}),Ke=!fe&&!Le&&t.createElement(T.A,{className:"c-member__secondary-name","data-qa":"member-entity__secondary-name"},at),He=(0,t.useMemo)(()=>!fe&&!se&&!Le&&t.createElement(E.Ay,{memberId:le||(Q==null?void 0:Q.id),className:"c-member__presence",invert:Je,inline:!1}),[fe,se,Le,le,Je,Q]),Ye=(0,t.useCallback)(nn=>ae?fe?t.createElement("span",{className:"c-search_autocomplete__hidden_member_icon "},t.createElement(f.A,{size:"20",name:"user-hide"})):we?t.createElement(g.A,W({},nn,{"data-qa":"member-entity__missing",isNonExistent:We,size:Y})):he?t.createElement("span",{className:"c-member__draft_icon"},t.createElement(f.A,{name:"edit"})):t.createElement(h.Ay,W({},nn,{"data-qa":"member-entity__avatar",size:I.RG.small,userId:le,user:Q,showBadge:ee,tabIndex:-1,isInteractive:!1,tokenSize:B})):_e&&Pe?He:null,[ae,le,We,we,Q,B,he,fe,He,_e,ee,Pe]),_t=ge&&t.createElement(O.A,W({},X,{"data-qa":"member-entity__team-icon",id:Ae,size:S,className:"c-member__team_icon"})),vt=t.createElement(a.A,{memberId:le||"",tooltip:Ie,animated:R,className:(0,n.A)("c-member__current-status","c-member__current-status--small",{overflow_ellipsis:$}),"data-qa":"member-entity__status"}),Tt=ce&&!!b&&t.createElement(p.Ay,{className:"c-member__unread_count",count:b,style:Je?"white":"red","data-qa":"member-entity__mention-badge"}),Lt=t.createElement("span",{className:"c-member__primary_content"},ze,_e&&!we&&ae&&He,!R&&Ke,de&&vt),ft=(_t||Tt)&&t.createElement("span",{className:"c-member__secondary_content"},_t,Tt),mt=se&&!ve?I.pI.dim:void 0,Yt=(0,n.A)(te,"c-member","c-member--small",{"c-member--with-presence":_e,"c-member--deleted":se,"c-base_entity--dim":fe});return t.createElement(y.Ay,{avatar:Ye,className:Yt,text:Lt,size:"small",style:mt,subtext:ft,"data-qa":Te,"data-sk":re})}u(w,"SmallMemberEntity"),w.displayName="SmallMemberEntity";function J(X,te){let{forceRealName:le,member:ve,id:Q,isDraftContext:Ae,showStatus:ae,onlyBoldIfUnread:he,useShortMode:_e,neverBold:ee}=te;const de=ve||(0,x.nv)(X,Q);let Ie;const ce=Q||(de==null?void 0:de.id);ce&&(Ae||he)&&(Ie=(0,D.Pu)(X,ce));const j=(0,k.a)(X,ce);let N=!0;j?N=!!_e:he?N=!!(Ie&&(0,o.KJ)(Ie)):ee&&(N=!1);let b;return Ae&&(b=!!(Ie&&(0,o.yc)(X,Ie.id))),{id:Q||(de==null?void 0:de.id),member:de??void 0,teamId:(0,m.Ux)(X,de),forceRealName:(0,s.A)(le)?le:(0,F.E)(X),unreadCount:(0,l.A)(X,de),showDraftIcon:b,showStatus:ae&&(0,r.aH)(de),isBold:N,experimentSidebarPrefsApplyToMenusGroupOn:(0,P._Z)(X,"sidebar_prefs_apply_to_menus")==="on",isUserHidden:j}}u(J,"mapStateToProps");const G=(0,M.N)(J)(w)},8300576667:(z,A,e)=>{"use strict";e.d(A,{A:()=>l});var t=e(3134334389),n=e(5255740490),s=e(5289504844),a=e(2828836153),c=e(3877384923);function o(){return o=Object.assign||function(_){for(var d=1;d<arguments.length;d++){var i=arguments[d];for(var m in i)Object.prototype.hasOwnProperty.call(i,m)&&(_[m]=i[m])}return _},o.apply(this,arguments)}u(o,"_extends");let r=u(class extends t.Component{render(){const{className:d,id:i,isActive:m=!1,isDeactivated:h=!1,isDisabled:v=!1,isDraftContext:y,showAvatar:T,showBadge:I,showPresence:p,showStatus:g,showTooltip:E,withTruncationTooltip:f,showUnreadCount:O,useShortMode:C,secondaryContent:M,onlyBoldIfUnread:D=!1,forceRealName:P}=this.props;let k;return m?v||h?k=c.pI.highlightDim:k=c.pI.highlightDark:(v||h)&&(k=c.pI.dim),t.createElement(a.A,{className:(0,n.A)(d,"c-small_member_list_entity"),primaryContent:t.createElement(s.Ay,o({id:i,invert:k===c.pI.highlightDark,isDeactivated:h,truncateStatus:!!M,showAvatar:T,showPresence:p,showBadge:I,useShortMode:C,showStatus:g,showTooltip:E,withTruncationTooltip:f,showUnreadCount:O,isDraftContext:y,onlyBoldIfUnread:D,forceRealName:P},this.props)),secondaryContent:M,size:"small",style:k})}},"SmallMemberListEntity");r.displayName="SmallMemberListEntity";const l=r},1084169413:(z,A,e)=>{"use strict";e.d(A,{A:()=>h});var t=e(3134334389),n=e(5255740490),s=e(9509635375),a=e(5273017660),c=e(3229001818),o=e(1596328926),r=e(3474919656),l=e(9418991940),_=e(4761125736);function d(){return d=Object.assign||function(v){for(var y=1;y<arguments.length;y++){var T=arguments[y];for(var I in T)Object.prototype.hasOwnProperty.call(T,I)&&(v[I]=T[I])}return v},d.apply(this,arguments)}u(d,"_extends");const i=new r.Ay("inline_member");function m(v){const{className:y,multiline:T=!1,inline:I=!1,invert:p=!1,name:g,isSelf:E=!1,isAppOrBot:f=!1,isWorkflowBot:O=!1,showAppOrBotBadge:C=!0,isDeleted:M=!1,isUnknown:D=!1,isNonExistent:P=!1,withTruncationTooltip:k=!1,isBold:x=!0,isUserHidden:F=!1,isChannelFiles:W=!1,isCreator:Y=!1,showMemberNameIfHidden:S=!1}=v,L=(0,l.d4)(X=>(0,_._Z)(X,"member_name_channel_files_view_two")==="on");let w;if(D||P)w=t.createElement(c.A,{type:P?"non-existent":"unknown","data-qa":"member_name__missing"});else if(F&&!S)w=i.t("Name hidden");else if(W){const X=L?i.rt("Created by {name}",{name:g}):`Created by ${g}`;w=Y?X:i.rt("Shared by {name}",{name:g})}else w=g;const J=(0,n.A)(y,"c-member_name",{"c-member_name--deactivated":M,"c-member_name--inverted":p}),G=x?"strong":"span";return t.createElement(a.CG,d({className:J,multiline:T,inline:I,withTruncationTooltip:k},(0,o.A)(v)),t.createElement(G,{"data-qa":"member_name"},w,E&&t.createElement("span",{className:"c-member_name__indicator","data-qa":"member_name__you"},i.t("(you)")),M&&t.createElement("span",{className:"c-member_name__indicator","data-qa":"member_name__deactivated"},i.t("(deactivated)")),(f||O)&&C&&t.createElement(s.A,{className:"c-member_name__indicator","data-qa":"member_name__app",inverse:p,isWorkflow:O})))}u(m,"MemberName"),m.displayName="MemberName";const h=m},8460568133:(z,A,e)=>{"use strict";e.d(A,{A:()=>_e});var t=e(3134334389),n=e(5255740490),s=e(3297051565),a=e.n(s),c=e(9418991940),o=e(5795074931),r=e(6989432693),l=e(735940183);const _=new l.Ay("channel_token"),d=10,i=u(ee=>{let{memberIds:de}=ee;var Ie;const ce=(Ie=(0,c.d4)(o.WR))!==null&&Ie!==void 0?Ie:void 0;let j=de.map((N,b)=>t.createElement(r.A,{key:N,userId:N,isFirst:b===0,isSelf:ce===N}));return de.length>d+1&&(j=j.slice(0,d).concat(_.rt("{count} others",{count:de.length-d}))),t.createElement(t.Fragment,null,(0,l.jd)(j))},"TooltipMemberNames");i.displayName="TooltipMemberNames";const m=i;var h=e(3037015781),v=e(9289081806),y=e(4775127335),T=e(5146991437),I=e(8170643398),p=e(3534324375),g=e(4562579337),E=e(1084169413),f=e(3877384923),O=e(8028620372),C=e(9391594207),M=e(8276911661);const D=20,P={id:a().string.isRequired,invert:a().bool,isDeactivated:a().bool,isHidden:a().bool,member:a().object,memberPrimaryName:a().string},k={member:void 0,memberPrimaryName:void 0,invert:!1,isDeactivated:!1,isHidden:!1},x=t.forwardRef((ee,de)=>{const{id:Ie,invert:ce,member:j,memberPrimaryName:N,isDeactivated:b,isHidden:R}=ee,K=(0,g.A)(j),B=(0,I.v3)(j),$=(0,I.oy)(j),Z=(0,h.lv)(j),re=(0,h.mX)(j),Te=Z||re,Ce=ce&&!b,Pe=t.createElement(E.A,{"data-qa":"mpim-entity__name",name:N,invert:Ce,isAppOrBot:K,isWorkflowBot:B,isDeleted:$,isNonExistent:Z,isUnknown:re});let fe;Te?fe=t.createElement(O.A,{isNonExistent:Z,size:D}):fe=t.createElement(y.Ay,{className:"c-small_mpim_entity__member_avatar","data-qa":"mpim-entity__avatar",size:f.RG.small,userId:Ie,tabIndex:-1,isInteractive:!1});const pe=(0,n.A)("c-small_mpim_entity__member",{"c-small_mpim_entity__member--deleted":$,"c-small_mpim_entity__member--hidden":R});return t.createElement("div",{className:pe,"data-id":Ie,ref:de},fe,Pe)});x.propTypes=P,x.defaultProps=k;function F(ee,de){let{id:Ie}=de;const ce=(0,M.nv)(ee,Ie);return{member:ce,memberPrimaryName:(0,p.sE)(ee,ce,!1,!1)}}u(F,"mapStateToProps");const W=(0,C.N)(F,null,null,{forwardRef:!0})(x);var Y=e(5273017660),S=e(2762351398),L=e(2312625946),w=e(8170659516),J=e(3852424459),G=e(9101533895),X=e(3328068409),te=e(4761125736);function le(){return le=Object.assign||function(ee){for(var de=1;de<arguments.length;de++){var Ie=arguments[de];for(var ce in Ie)Object.prototype.hasOwnProperty.call(Ie,ce)&&(ee[ce]=Ie[ce])}return ee},le.apply(this,arguments)}u(le,"_extends");const ve=f.RG.small,Q={className:a().string,"data-qa":a().string,"data-sk":a().string,mpim:a().object,id:a().string,invert:a().bool,isDeactivated:a().bool,memberIds:a().array,isActive:a().bool,clientTheme:a().oneOf(["light","dark"]),matchData:a().array,onlyBoldIfUnread:a().bool,showUnreadBadge:a().bool,unreadCount:a().number,shortenTooltipContents:a().bool,showAvatar:a().bool,experimentSidebarPrefsApplyToMenusGroupOn:a().bool},Ae={className:void 0,"data-qa":void 0,"data-sk":"small_mpim_entity",mpim:void 0,id:void 0,invert:!1,isDeactivated:!1,memberIds:[],isActive:!1,clientTheme:"light",matchData:[],onlyBoldIfUnread:!1,showUnreadBadge:!1,unreadCount:0,shortenTooltipContents:!1,showAvatar:!0,experimentSidebarPrefsApplyToMenusGroupOn:!1};function ae(ee){let{className:de,"data-qa":Ie,"data-sk":ce,id:j,invert:N,isDeactivated:b,mpim:R,memberIds:K,isActive:B,clientTheme:$,matchData:Z,onlyBoldIfUnread:re,showUnreadBadge:Te,unreadCount:Ce,shortenTooltipContents:Pe,showAvatar:fe,experimentSidebarPrefsApplyToMenusGroupOn:pe}=ee;const q=(0,h.lv)(R),se=(0,h.mX)(R),ge=(0,v.N4)(R),Oe=j||(R==null?void 0:R.id),Le=N&&!b,We=Te&&!!Ce&&t.createElement(S.Ay,{className:"c-member__unread_count",count:Ce,style:Le?"white":"red","data-qa":"member-entity__mention-badge"}),Re=We&&t.createElement("span",{className:"c-member__secondary_content"},We),we=(0,t.useCallback)(lt=>{if(q||se)return t.createElement(O.A,le({},lt,{isNonExistent:q,size:ve,invert:Le}));const nt=K==null?void 0:K[0];return t.createElement("span",{className:(0,n.A)("c-small_mpim_entity__mpim_avatars","c-small_mpim_entity__count",de,{"c-small_mpim_entity__mpim_avatars--inverted":Le,[`c-small_mpim_entity__mpim_avatars--${$}`]:$!=="light"})},fe&&t.createElement(y.Ay,{userId:nt,className:"c-small_mpim_entity__mpim_avatars_mpim1",size:14,isInteractive:!1,"data-qa":"small-mpim-entity-mpim-avatar"}),t.createElement("div",{className:(0,n.A)("c-small_mpim_entity__mpim_counter",{"c-small_mpim_entity__mpim_counter--count-only":!fe&&pe}),"data-qa":"small-mpim-entity-mpim-counter"},t.createElement("div",{"aria-hidden":!0,className:"c-small_mpim_entity__mpim_counter_inner"},ge)))},[de,$,q,se,ge,Le,K,fe,pe]),Je=(0,t.useCallback)(()=>{let lt;return Pe?lt=t.createElement(m,{memberIds:K}):lt=K.map(nt=>t.createElement(W,{id:nt,key:nt})),t.createElement(t.Fragment,null,lt)},[K,Pe]);let it=b?f.pI.dim:null;Le&&(it=f.pI.highlightDark);const et=t.createElement(Y.Ay,{"data-id":Oe,"data-qa":Ie,"data-sk":ce,avatar:we,className:de,size:"small",style:it,subtext:Re,text:t.createElement(T.A,{"data-qa":"name",id:Oe,mpim:R,invert:Le,matchData:Z,onlyBoldIfUnread:re})});return t.createElement(L.Ay,{tip:Je(),tipClassName:Pe?"":"c-small_mpim_entity__tooltip",position:"top-right",shouldForceVisible:B,shouldOnlyShowWhenTruncated:B,zIndex:"above_fs"},t.createElement("div",null,et))}u(ae,"SmallMpimEntity"),ae.displayName="SmallMpimEntity",ae.propTypes=Q,ae.defaultProps=Ae;function he(ee,de){let{id:Ie,mpim:ce,matchData:j}=de;const N=ce||(0,G.OL)(ee,Ie),b=(0,J.B)(ee,Ie),R=(0,te._Z)(ee,"sidebar_prefs_apply_to_menus")==="on",K=(0,w.A)({state:ee,mpim:N,matchData:j}),B=(0,X.to)(ee),$=(0,v.kR)(N,b);return{mpim:N,experimentSidebarPrefsApplyToMenusGroupOn:R,memberIds:K,clientTheme:B,unreadCount:$}}u(he,"small_mpim_entity_mapStateToProps");const _e=(0,C.N)(he)(ae)},5146991437:(z,A,e)=>{"use strict";e.d(A,{A:()=>g});var t=e(3134334389),n=e(9867500491),s=e(1703559452),a=e(3297051565),c=e.n(a),o=e(3037015781),r=e(9289081806),l=e(5273017660),_=e(7026348746),d=e(8170659516),i=e(9391594207),m=e(9101533895),h=e(8276911661);const v=4,y={className:c().string,mpim:c().object,multiline:c().bool,name:c().string,isAnyMemberUnknown:c().bool,invert:c().bool,inline:c().bool,onlyBoldIfUnread:c().bool},T={className:void 0,mpim:void 0,multiline:!1,name:void 0,isAnyMemberUnknown:!1,invert:!1,inline:void 0,onlyBoldIfUnread:!1};function I(E){let{className:f,mpim:O,multiline:C,name:M,invert:D,isAnyMemberUnknown:P,inline:k,onlyBoldIfUnread:x}=E;const F=(0,o.lv)(O),W=(0,o.mX)(O),Y=(0,r.N4)(O),S=!x||(0,r.KJ)(O);let L;return W||F||P?L=(0,n.A)(Y||v).map(w=>t.createElement(_.A,{key:w,className:"c-mpim_entity__missing_text",isNonExistent:F,size:"random",invert:D})):L=S?t.createElement("strong",{"data-qa":"mpim_name"},M):t.createElement("span",{"data-qa":"mpim_name"},M),t.createElement(l.CG,{className:f,multiline:C,breakWords:!1,inline:k},L)}u(I,"MpimName"),I.displayName="MpimName",I.propTypes=y,I.defaultProps=T;const p=u((E,f)=>{let{id:O,mpim:C,matchData:M}=f;const D=C||(0,m.OL)(E,O),P=(0,d.A)({state:E,mpim:D,matchData:M}),k=P&&P.map(W=>(0,h.nv)(E,W)),x=(0,s.A)(k,o.GU),F=(0,r.Xx)(E,D,P);return{mpim:D,name:F,isAnyMemberUnknown:x}},"mapStateToProps"),g=(0,i.N)(p)(I)},51460783:(z,A,e)=>{"use strict";e.d(A,{A:()=>o});var t=e(3134334389),n=e(5255740490),s=e(1596328926);function a(){return a=Object.assign||function(r){for(var l=1;l<arguments.length;l++){var _=arguments[l];for(var d in _)Object.prototype.hasOwnProperty.call(_,d)&&(r[d]=_[d])}return r},a.apply(this,arguments)}u(a,"_extends");function c(r){const{children:l,className:_}=r;return l?t.createElement("span",a({className:(0,n.A)(_,"c-base_entity__metadata")},(0,s.A)(r)),l):null}u(c,"BaseEntityMetadata"),c.displayName="BaseEntityMetadata";const o=c},161084047:(z,A,e)=>{"use strict";e.d(A,{A:()=>o});var t=e(3134334389),n=e(5255740490),s=e(1596328926);function a(){return a=Object.assign||function(r){for(var l=1;l<arguments.length;l++){var _=arguments[l];for(var d in _)Object.prototype.hasOwnProperty.call(_,d)&&(r[d]=_[d])}return r},a.apply(this,arguments)}u(a,"_extends");function c(r){const{children:l,className:_}=r;return l?t.createElement("span",a({className:(0,n.A)(_,"c-base_entity__subtext")},(0,s.A)(r)),l):null}u(c,"BaseEntitySubtext"),c.displayName="BaseEntitySubtext";const o=c},3534100833:(z,A,e)=>{"use strict";e.d(A,{A:()=>r});var t=e(3134334389),n=e(5255740490),s=e(8011352381),a=e(1596328926);function c(){return c=Object.assign||function(l){for(var _=1;_<arguments.length;_++){var d=arguments[_];for(var i in d)Object.prototype.hasOwnProperty.call(d,i)&&(l[i]=d[i])}return l},c.apply(this,arguments)}u(c,"_extends");function o(l){const{children:_=null,className:d="",multiline:i=!1,inline:m=!1,breakWords:h=!0,withTruncationTooltip:v=!1}=l;if(!_)return null;const y=i?2:1;return m?t.createElement("span",c({className:(0,n.A)(d,"c-base_entity__text")},(0,a.A)(l)),_):t.createElement("span",c({className:(0,n.A)(d,"c-base_entity__text")},(0,a.A)(l)),t.createElement(s.A,{lines:y,breakWords:h,withTooltip:v},_))}u(o,"BaseEntityText"),o.displayName="BaseEntityText";const r=o},1464713483:(z,A,e)=>{"use strict";e.d(A,{A:()=>d});var t=e(3134334389),n=e(5255740490),s=e(7715417323),a=e(3877384923),c=e(1596328926);function o(){return o=Object.assign||function(i){for(var m=1;m<arguments.length;m++){var h=arguments[m];for(var v in h)Object.prototype.hasOwnProperty.call(h,v)&&(i[v]=h[v])}return i},o.apply(this,arguments)}u(o,"_extends");const r=u((i,m,h,v)=>!(i!==a.ny.medium||!h||v||m),"shouldVerticallyCenter"),l={className:"c-base_entity__avatar"},_=u(i=>{const{size:m,style:h=a.pI.normal,text:v=null,className:y="",subtext:T=null,avatar:I=s.A,metadata:p=null,forwardedRef:g=null}=i,E=I(l),f=!!E;return t.createElement("div",o({className:(0,n.A)(y,"c-base_entity",`c-base_entity--${m}`,{"c-base_entity--has-avatar":f,"c-base_entity--dim":h===a.pI.dim,"c-base_entity--vertically-center":r(m,T,f,p)})},(0,c.A)(i),{ref:g}),E,t.createElement("div",{className:"c-base_entity__text-contents"},v,T,p))},"BaseEntity");_.displayName="BaseEntity";const d=_},5273017660:(z,A,e)=>{"use strict";e.d(A,{Ay:()=>c,CG:()=>a.A,Q:()=>n.A,sT:()=>s.A});var t=e(1464713483),n=e(51460783),s=e(161084047),a=e(3534100833);const c=t.A},2671211451:(z,A,e)=>{"use strict";e.d(A,{A:()=>i});var t=e(3134334389),n=e(5255740490),s=e(7715417323),a=e(8011352381),c=e(3877384923),o=e(1596328926);function r(){return r=Object.assign||function(m){for(var h=1;h<arguments.length;h++){var v=arguments[h];for(var y in v)Object.prototype.hasOwnProperty.call(v,y)&&(m[y]=v[y])}return m},r.apply(this,arguments)}u(r,"_extends");const l=u(m=>{let{children:h,truncate:v=!1,truncateWidth:y,withTruncationTooltip:T=!1}=m;const I=(0,t.useMemo)(()=>({maxWidth:y||void 0}),[y]);if(!v)return t.createElement("span",null,h);let p;return y?p=t.createElement("span",{className:"c-base_inline_entity__inline_wrapper",style:I},h):p=t.createElement("span",null,t.createElement(a.A,{lines:1,withTooltip:T},h)),p},"MaybeTruncate");l.displayName="MaybeTruncate";const _={className:"c-base_inline_entity__avatar","data-qa":"base_inline_entity__avatar"};let d=u(class extends t.Component{render(){const{className:h,avatar:v=s.A,primaryContent:y,secondaryContent:T,style:I=c.pI.normal,truncate:p=!1,truncateWidth:g,withTruncationTooltip:E=!1}=this.props,f=v(_),O=!!f;return t.createElement("span",r({className:(0,n.A)(h,"c-base_inline_entity",{"c-base_inline_entity--has_avatar":O,"c-base_inline_entity--truncate_block":p&&!g,"c-base_inline_entity--truncate_inline":p&&g,"c-base_inline_entity--dim":I===c.pI.dim,"c-base_inline_entity--highlight-dark":I===c.pI.highlightDark,"c-base_inline_entity--highlight-dim":I===c.pI.highlightDim,"c-base_inline_entity--highlight-light":I===c.pI.highlightLight})},(0,o.A)(this.props)),t.createElement(l,{truncate:p,truncateWidth:g,withTruncationTooltip:E},f,t.createElement("span",{className:"c-base_inline_entity__primary_content"},y),T&&t.createElement("span",{className:"c-base_inline_entity__secondary_content"},T)))}},"BaseInlineEntity");d.displayName="BaseInlineEntity";const i=d},2828836153:(z,A,e)=>{"use strict";e.d(A,{A:()=>r});var t=e(3134334389),n=e(5255740490),s=e(3877384923),a=e(1596328926);function c(){return c=Object.assign||function(l){for(var _=1;_<arguments.length;_++){var d=arguments[_];for(var i in d)Object.prototype.hasOwnProperty.call(d,i)&&(l[i]=d[i])}return l},c.apply(this,arguments)}u(c,"_extends");let o=u(class extends t.Component{render(){const{className:_,ariaLabel:d,primaryContent:i,secondaryContent:m,size:h=s.ny.medium,style:v=s.pI.normal,padding:y=s.FK.normal}=this.props;return t.createElement("div",c({className:(0,n.A)(_,"c-base_list_entity",`c-base_list_entity--${h}`,{"c-base_list_entity--dim":v===s.pI.dim,"c-base_list_entity--highlight-dark":v===s.pI.highlightDark,"c-base_list_entity--highlight-dim":v===s.pI.highlightDim,"c-base_list_entity--highlight-light":v===s.pI.highlightLight,"c-base_list_entity--no-pad":y===s.FK.none})},(0,a.A)(this.props),{"aria-label":d}),t.createElement("div",{className:"c-base_list_entity__primary_content"},i),m&&t.createElement("div",{className:"c-base_list_entity__secondary_content"},m))}},"BaseListEntity");o.displayName="BaseListEntity";const r=o},5415825258:(z,A,e)=>{"use strict";e.d(A,{A:()=>p});var t=e(3134334389),n=e(5255740490),s=e(6839188756),a=e(2023092677),c=e(5273017660),o=e(3877384923),r=e(4816967449),l=e(8683010724),_=e(735940183),d=e(9391594207),i=e(8847766420),m=e(3677514771),h=e(1835177371);function v(){return v=Object.assign||function(g){for(var E=1;E<arguments.length;E++){var f=arguments[E];for(var O in f)Object.prototype.hasOwnProperty.call(f,O)&&(g[O]=f[O])}return g},v.apply(this,arguments)}u(v,"_extends");const y=new _.Ay("user_group_entity");function T(g){let{className:E,invert:f,showDescription:O=!0,userGroup:C,userGroupTeamName:M,isDeactivated:D}=g;const P=D||!(0,a.V1)(C),k=(0,t.useCallback)(w=>t.createElement("span",{className:"margin_right_50"},t.createElement(l.A,v({},w,{name:"user-groups",size:"18"}))),[]);if((0,a.t8)(C)||(0,a.QR)(C)){const w=(0,n.A)("c-small_user_group__missing_icon",{"c-small_user_group__missing_icon--inverted":f});return t.createElement("div",{className:"c-small_user_group__missing"},t.createElement("div",{className:w},t.createElement(l.A,{name:"user-groups",size:"18"})),t.createElement(r.A,{type:(0,a.t8)(C)?"unknown":"non-existent",invert:f}))}const x=(0,a.ue)(C),F=t.createElement("span",{className:"c-user_group__name c-small_user_group__name"},x),W=(0,a.Br)(C),Y=M&&t.createElement(t.Fragment,null,"\xA0\xA0",t.createElement("span",{className:"c-small_user_group__team"},M)),S=t.createElement(t.Fragment,null,t.createElement("span",{className:"c-small_user_group__count"},"(",y.t("{userCount, plural, =1 {# member} other {# members}}",{userCount:W}),")"),Y);let L;return P?L=o.pI.dim:f&&(L=o.pI.highlightDark),t.createElement(c.Ay,{avatar:k,className:E,size:"small",style:L,text:t.createElement(c.CG,null,F,O&&S),"data-usergroup-id":C.id})}u(T,"SmallUserGroupEntity"),T.displayName="SmallUserGroupEntity";const I=u((g,E)=>{let{id:f,userGroup:O}=E;const C=O||(0,h.lJ)(g,f),M=(0,i.ZT)(g),D=(0,a.$Q)(C),P=D!==M&&(0,s.F1)((0,m._J)(g,D));return{userGroup:C,userGroupTeamName:P}},"mapStateToProps"),p=(0,d.N)(I)(T)},3877384923:(z,A,e)=>{"use strict";e.d(A,{FK:()=>s,P:()=>c,RG:()=>t,ny:()=>a,pI:()=>n});const t={xxlarge:102,xlarge:72,large:56,medium:36,small:20,inline:14},n={normal:"normal",dim:"dim",highlightDark:"highlight-dark",highlightDim:"highlight-dim",highlightLight:"highlight-light"},s={normal:"12px",none:"0"},a={small:"small",medium:"medium"},c={true:!0,bestOnly:"best_only",false:!1}},5375115868:(z,A,e)=>{"use strict";e.d(A,{A:()=>l});var t=e(3134334389),n=e(5255740490),s=e(5617110048),a=e(6244014364);function c(){return c=Object.assign||function(_){for(var d=1;d<arguments.length;d++){var i=arguments[d];for(var m in i)Object.prototype.hasOwnProperty.call(i,m)&&(_[m]=i[m])}return _},c.apply(this,arguments)}u(c,"_extends");const o={onChange:{action:a.UiAction.CLICK}};let r=u(class extends t.PureComponent{componentDidMount(){this.mayBeFocus()}componentDidUpdate(){this.mayBeFocus()}focus(){var d;(d=this.inputRef.current)===null||d===void 0||d.focus()}mayBeFocus(){const{autoFocus:d}=this.props;d&&this.focus()}render(){const{className:d,autoClogProps:i,autoFocus:m,...h}=this.props,v=(0,n.A)("c-input_radio",d),y=t.createElement("input",c({},h,{className:v,ref:this.inputRef,type:"radio"}));return i?t.createElement(s.A,{autoClogProps:i,actionProps:o,elementType:a.ElementType.RADIO},y):y}constructor(d){super(d),this.inputRef=t.createRef()}},"Radio");r.displayName="Radio",r.defaultProps={autoFocus:!1};const l=r},8472205500:(z,A,e)=>{"use strict";e.d(A,{A:()=>T});var t=e(3134334389),n=e(5255740490),s=e(2003990933),a=e(7715417323),c=e(5617110048),o=e(581167618),r=e(3391133100),l=e(2660476100),_=e(9205344153),d=e(8452232783),i=e(9665283624),m=e(2322735331),h=e(6244014364);function v(){return v=Object.assign||function(I){for(var p=1;p<arguments.length;p++){var g=arguments[p];for(var E in g)Object.prototype.hasOwnProperty.call(g,E)&&(I[E]=g[E])}return I},v.apply(this,arguments)}u(v,"_extends");const y={onChange:{action:h.UiAction.ENTER_TEXT}};let T=u(class extends t.PureComponent{componentDidMount(){if(this.getTextStyle(),this.props.focusOnMount){var p;(p=this.input.current)===null||p===void 0||p.focus()}}componentDidUpdate(p,g){if((this.props.value!==p.value||this.state.isFocused!==g.isFocused)&&this.getTextStyle(),this.props.value!==p.value&&!this.state.everReceivedUserInput&&this.setEverReceivedUserInput(),this.props.focusOnMount&&p.focusOnMount!==this.props.focusOnMount&&!this.state.isFocused){var E;(E=this.input.current)===null||E===void 0||E.focus()}}onBlur(){const{onBlur:p}=this.props;this.setFocus(!1),p&&p()}onFocus(){const{onFocus:p}=this.props;this.setFocus(!0),p&&p()}getTextStyle(){var p;const{maxCharacterLimit:g}=this.props;if(!g){this.setTextStyle({});return}const f={paddingRight:(p=this.characterCount)===null||p===void 0?void 0:p.getCharacterCountWidth()};this.setTextStyle(f)}setCharacterCountRef(p){this.characterCount=p}setEverReceivedUserInput(){this.setState(()=>({everReceivedUserInput:!0}))}setFocus(p){this.setState(()=>({isFocused:p}))}setInputRef(p){this.input=p}setTextStyle(p){this.setState(()=>({textStyle:p}))}blur(){this.input.current&&this.input.current.blur()}focus(){this.input.current&&this.input.current.focus()}getIsInputLengthTooShort(){const{isRequired:p,minCharacterLimit:g,value:E}=this.props,{everReceivedUserInput:f}=this.state;return!f||g==null||!p&&E.length===0?!1:E.length<g}getIsInputLengthTooLong(){const{maxCharacterLimit:p,value:g}=this.props;return p==null?!1:g.length>p}renderDeprecatedErrorMaybe(){const{showError:p,errorLevel:g,errorText:E,errorType:f,isRequired:O,maxCharacterLimit:C,minCharacterLimit:M,value:D}=this.props;return p?E?t.createElement(o.Ay,{id:this.state.errorId,level:g,type:f,className:"margin_bottom_100"},E):!O&&D.length===0?null:this.getIsInputLengthTooLong()?t.createElement(o.Ay,{id:this.state.errorId,level:o.A_.error,type:f,className:"margin_bottom_100"},(0,r.zI)(C)):this.getIsInputLengthTooShort()&&!this.state.isFocused?t.createElement(o.Ay,{id:this.state.errorId,level:o.A_.error,type:f,className:"margin_bottom_100"},(0,r.r7)(M)):null:null}renderErrorMaybe(){const{showError:p,errorText:g,isRequired:E,maxCharacterLimit:f,minCharacterLimit:O,value:C}=this.props;return p?g?t.createElement(i.A,{"data-qa":"form-text-area-inline-alert",id:this.state.errorId},g):!E&&C.length===0?null:this.getIsInputLengthTooLong()?t.createElement(i.A,{id:this.state.errorId,"data-qa":"form-text-area-max-char-alert"},(0,r.zI)(f)):this.getIsInputLengthTooShort()&&!this.state.isFocused?t.createElement(i.A,{id:this.state.errorId,"data-qa":"form-text-area-min-char-alert"},(0,r.r7)(O)):null:null}renderHintMaybe(){const{hintText:p}=this.props;return p?t.createElement(l.A,{id:this.state.hintId},p):null}renderTextArea(){const{className:p,showError:g,errorId:E,errorLevel:f,errorText:O,errorType:C,hintId:M,hintText:D,useInlineAlert:P,id:k,isRequired:x,isInvalid:F,labelId:W,name:Y,onChange:S,onFocus:L,onBlur:w,maxCharacterLimit:J,minCharacterLimit:G,focusOnMount:X,autoClogProps:te,ariaDescribedById:le,inputRef:ve,...Q}=this.props,{textStyle:Ae}=this.state,ae=!!O||this.getIsInputLengthTooLong()||this.getIsInputLengthTooShort()||F,he=(0,n.A)({[`c-input_textarea--with_${f}`]:ae,"c-input_textarea--with_hint":D,"c-input_textarea--with_character_count":!!J,"c-input_text--with_inline_alert":P},p),_e=(0,r.Yk)([W,ae?this.state.errorId:void 0]),ee=(0,r.Yk)([le,this.state.hintId,this.characterCounterId]),de=t.createElement(d.A,v({},Q,{ref:this.setInputRef,style:Ae,ariaDescribedby:ee,isInvalid:ae,ariaLabelledby:_e,ariaRequired:x,className:he,id:k,"data-qa":Q["data-qa"]||k,name:Y,onChange:S,onFocus:this.onFocus,onBlur:this.onBlur}));return te?t.createElement(c.A,{autoClogProps:te,actionProps:y,elementType:h.ElementType.TEXTAREA},de):de}renderWrappedTextareaMaybe(){const{value:p,maxCharacterLimit:g,size:E,isDisabled:f}=this.props;let O=this.renderTextArea();return g&&(O=t.createElement(_.A,{id:this.characterCounterId,ref:this.setCharacterCountRef,currentCount:p==null?void 0:p.length,isDisabled:f,maxCharacterLimit:g,type:"multiline",size:E},O)),O}render(){const p=this.props.useInlineAlert?this.renderErrorMaybe():this.renderDeprecatedErrorMaybe();return t.createElement("div",{"data-qa-formtextarea":!0,className:"c-input_textarea__wrapper"},this.renderWrappedTextareaMaybe(),p,this.renderHintMaybe())}constructor(p){super(p);const{id:g}=this.props;(0,m.v)(this,["onFocus","onBlur","setInputRef","setCharacterCountRef"]),this.state={errorId:(0,s.A)(this.props,"errorId",(0,r.Es)(g,"error")),hintId:(0,s.A)(this.props,"hintId",(0,r.Es)(g,"hint")),isFocused:!1,everReceivedUserInput:!1,textStyle:{}},this.props.maxCharacterLimit&&(this.characterCounterId=(0,r.Es)(g,"character-count")),this.input=t.createRef()}},"FormTextareaInput");T.displayName="FormTextareaInput",T.defaultProps={className:null,showError:!0,errorId:void 0,errorLevel:o.A_.error,errorText:null,errorType:o.QE.nestedBox,useInlineAlert:!1,hintText:null,hintId:void 0,isDisabled:!1,isRequired:!1,isInvalid:!1,labelId:null,onChange:a.A,onFocus:a.A,onBlur:a.A,placeholder:void 0,size:d.F.medium,value:"",maxCharacterLimit:null,minCharacterLimit:null,focusOnMount:!1,autoClogProps:void 0,type:void 0,ariaDescribedById:void 0,role:void 0,inputRef:void 0}},8452232783:(z,A,e)=>{"use strict";e.d(A,{A:()=>m,F:()=>l});var t=e(3134334389),n=e(5255740490),s=e(7715417323),a=e(5617110048),c=e(5797272849),o=e(6244014364);function r(){return r=Object.assign||function(h){for(var v=1;v<arguments.length;v++){var y=arguments[v];for(var T in y)Object.prototype.hasOwnProperty.call(y,T)&&(h[T]=y[T])}return h},r.apply(this,arguments)}u(r,"_extends");const l={small:"small",medium:"medium",large:"large"},_={onBlur:{action:o.UiAction.SAVE}};var d;let i=u(class extends(d=t.Component){componentDidMount(){var v;this.props.focusOnMount&&(!((v=this.textAreaRef)===null||v===void 0)&&v.current)&&this.textAreaRef.current.focus()}onChange(v){this.props.onChange(v.target.value)}render(){const{ariaDescribedby:v,isInvalid:y,ariaLabelledby:T,ariaRequired:I,className:p,placeholder:g,id:E,isDisabled:f,name:O,resize:C,size:M,focusOnMount:D,autoClogProps:P,...k}=this.props,x=(0,n.A)("c-input_textarea",{"c-input_textarea--large":M===l.large,"c-input_textarea--small":M===l.small,"c-input_textarea--resize_none":C==="none","c-input_textarea--resize_both":C==="both","c-input_textarea--resize_h":C==="horizontal","c-input_textarea--with_error":y,"c-input_textarea--with_inline_alert":y,[c.E.small]:M===l.small,[c.E.large]:M===l.large},p),F=t.createElement("textarea",r({},k,{"aria-describedby":v,"aria-invalid":y,"aria-labelledby":T,"aria-required":I,className:x,disabled:f,id:E,name:O,onChange:this.onChange,onFocus:this.props.onFocus,onBlur:this.props.onBlur,placeholder:g,ref:this.textAreaRef,value:this.props.value,style:this.props.style,maxLength:this.props.maxLength}));return P?t.createElement(a.A,{autoClogProps:P,actionProps:_,elementType:o.ElementType.TEXTAREA},F):F}constructor(v){super(v),this.onChange=this.onChange.bind(this),this.textAreaRef=t.createRef()}},"TextareaInput");i.displayName="TextareaInput",i.defaultProps={ariaDescribedby:"",isInvalid:!1,ariaLabelledby:"",ariaRequired:!1,className:null,isDisabled:!1,onChange:s.A,onFocus:s.A,onBlur:s.A,placeholder:"",resize:null,size:l.medium,style:void 0,maxLength:void 0,value:"",focusOnMount:!1,autoClogProps:void 0};const m=i},4967176632:(z,A,e)=>{"use strict";e.d(A,{A:()=>c});var t=e(3134334389),n=e(3564666345);function s(){return s=Object.assign||function(o){for(var r=1;r<arguments.length;r++){var l=arguments[r];for(var _ in l)Object.prototype.hasOwnProperty.call(l,_)&&(o[_]=l[_])}return o},s.apply(this,arguments)}u(s,"_extends");function a(o){let{className:r=void 0,initialValues:l,initialErrors:_=void 0,validate:d=void 0,validationSchema:i=void 0,validateOnBlur:m=!0,validateOnChange:h=!0,validateOnMount:v=!1,onReset:y=void 0,onSubmit:T,children:I,...p}=o;const g=y?{onReset:y}:{};return t.createElement(n.l1,s({initialValues:l,initialErrors:_,validate:d,validationSchema:i,validateOnBlur:m,validateOnChange:h,validateOnMount:v,onSubmit:T},g,p),E=>{let{handleSubmit:f,handleReset:O,...C}=E;return t.createElement("form",{className:r,onSubmit:f,onReset:O},I({...C}))})}u(a,"Form"),a.displayName="Form";const c=a},3155323475:(z,A,e)=>{"use strict";e.d(A,{A:()=>a});var t=e(3134334389),n=e(5255740490),s=e(9665283624);function a(c){let{className:o,errors:r}=c;var l;return r&&r.length>0?t.createElement(t.Fragment,null,r.map(_=>(0,t.isValidElement)(_.message)?t.cloneElement(_.message,{key:_.id,id:_.id,className:(0,n.A)(o,"c-field_input__helpers")}):(l=!!_.message&&t.createElement(s.A,{className:(0,n.A)(o,"c-field_input__helpers"),key:_.id,id:_.id},_.message))!==null&&l!==void 0?l:null)):null}u(a,"FieldErrors")},7811786890:(z,A,e)=>{"use strict";e.d(A,{DQ:()=>d,IM:()=>o,T$:()=>_,Wz:()=>h,Zr:()=>v,m4:()=>a,mw:()=>c});var t=e(9746734072),n=e(6313685253),s=e(9113979368);const a={email:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,phone:/^[0-9._+-]{8,15}$/i},c=u(y=>{const T=typeof y=="boolean",I=typeof y=="string",p=T&&!y,g=I&&(!y||!y.trim()),E=(0,t.A)(y)&&!y.length;return p||g||E||y===null?"Required":null},"required"),o=u((y,T)=>I=>(a[y]||y).test(I)?null:T,"regexPattern"),r=o(a.email,"Please enter a valid email address."),l=o(a.phone,"Please enter a valid phone number."),_=u(y=>T=>!T||T.length<y?`Minimum of ${y} characters`:null,"minCharacterCount"),d=u(y=>T=>T.length>y?`Max character limit is ${y}`:null,"maxCharacterCount"),i=u(y=>T=>{let I=null;return y.forEach(p=>{T===p&&(I=`Cannot use ${T}`)}),I},"tokenNotAllowed"),m=u(y=>T=>{let I=null,p;return T&&T.length&&(T.includes(",")?(p=T.split(",").filter(g=>!!y.includes(g)),I=`Cannot use ${p}`):y.includes(T)&&(p=T,I=`Cannot use ${p}`)),I},"tokensNotAllowed"),h=u(y=>T=>{const I=(0,n.A)(y,(p,g,E)=>{const f=g.map(O=>O(T[E],T)).filter(Boolean);return f.length>0&&(p[E]=f),p},{});return(0,s.A)(I)?void 0:I},"createValidation"),v=u(y=>T=>{const I=y.map(p=>p(T)).filter(Boolean);return(0,s.A)(I)?void 0:I},"createValidate")},9742374352:(z,A,e)=>{"use strict";e.d(A,{A:()=>i});var t=e(3134334389),n=e(5255740490),s=e(5617110048),a=e(3753517560),c=e(6538933722),o=e(6244014364),r=e(2907415594);function l(){return l=Object.assign||function(m){for(var h=1;h<arguments.length;h++){var v=arguments[h];for(var y in v)Object.prototype.hasOwnProperty.call(v,y)&&(m[y]=v[y])}return m},l.apply(this,arguments)}u(l,"_extends");const _={onClick:{action:o.UiAction.CLICK}},d=t.forwardRef(u(function(h,v){let{autoClogProps:y,className:T,href:I,invert:p=!1,children:g,hasKeyboardFocus:E=!1,...f}=h;const O=(0,n.A)("c-link",{"c-link--focus-visible":E,"c-link--invert":p},T),C=f.target==="_blank"||(I==null?void 0:I.startsWith("mailto:")),M=t.createElement("a",l({},(0,r.A)(f),{className:O,href:I,ref:v}),g,C&&t.createElement(c.A,null));return y?t.createElement(s.A,{autoClogProps:y,actionProps:_,elementType:o.ElementType.LINK},M):M},"BaseLink"));d.displayName="BaseLink";const i=(0,a.A)(d)},9163962844:(z,A,e)=>{"use strict";e.d(A,{A:()=>n,r:()=>t.rY});var t=e(2762351398);const n=t.Ay},2762351398:(z,A,e)=>{"use strict";e.d(A,{Ay:()=>l,rY:()=>c});var t=e(3134334389),n=e(5255740490),s=e(2312625946);function a(){return a=Object.assign||function(_){for(var d=1;d<arguments.length;d++){var i=arguments[d];for(var m in i)Object.prototype.hasOwnProperty.call(i,m)&&(_[m]=i[m])}return _},a.apply(this,arguments)}u(a,"_extends");const c={transparent:"transparent",black:"black",red:"red",white:"white",blue:"blue",minGray:"min_gray",minGrayDarken:"min_gray_darken",themed:"themed"},o=u((_,d)=>_>d?`${d}+`:String(_),"getCountText"),r=u(_=>{let{className:d,count:i,maxCount:m=9,style:h="black",toolTipText:v=""}=_;if(!i||i<0)return null;const y=v?s.Ay:t.Fragment,T=v?{tip:v}:{};return t.createElement(y,a({},T),t.createElement("span",{"aria-hidden":"true",className:(0,n.A)(d,"c-mention_badge",`c-mention_badge--${h}`,{"c-mention_badge--max":i>m},v&&"c-mention_badge--default"),"data-qa":"mention_badge"},o(i,m)))},"MentionBadge");r.displayName="MentionBadge";const l=t.memo(r)},3514831633:(z,A,e)=>{"use strict";e.d(A,{Ay:()=>l,Dr:()=>s.A,YJ:()=>t.YJ,a:()=>n.A,bX:()=>c.Ay,c$:()=>a.Ay,cQ:()=>o.A});var t=e(5152183509),n=e(8383646472),s=e(8245211418),a=e(7417231112),c=e(8184841524),o=e(7433650413),r=e(101973425);const l=t.Ay},8383646472:(z,A,e)=>{"use strict";e.d(A,{A:()=>g});var t=e(3134334389),n=e(2141441167),s=e(862210999),a=e(3297051565),c=e.n(a),o=e(7139225017),r=e(4902318931),l=e(6308822),_=e(5152183509),d=e(8245211418),i=e(7417231112),m=e(8184841524),h=e(8773153312),v=e(1959847761);function y(){return y=Object.assign||function(E){for(var f=1;f<arguments.length;f++){var O=arguments[f];for(var C in O)Object.prototype.hasOwnProperty.call(O,C)&&(E[C]=O[C])}return E},y.apply(this,arguments)}u(y,"_extends");const T={type:c().oneOf((0,n.A)(h.A)),label:c().node,description:c().oneOfType([c().string,c().element]),children:c().element,key:c().string,click:c().func,danger:c().bool,dataQa:c().string,checked:c().bool,indeterminate:c().bool,ariaHidden:c().bool,target:c().string,href:c().string,download:c().string,action:c().func,payload:c().object,autoClogProps:c().object},I={template:c().arrayOf(c().shape({...T,renderSubmenu:c().func,template:c().arrayOf(c().shape(T)),submenu:c().arrayOf(c().shape(T)),checked:c().bool})).isRequired};let p=u(class za extends t.PureComponent{render(){const{template:f,...O}=this.props,C=f.map((M,D)=>{if(!M)return null;if(M.type===h.A.separator)return t.createElement(m.Ay,y({},M,{key:M.key||`separator-${D}`}));if(M.type===h.A.sub_separator)return t.createElement(m.Ay,y({},M,{className:"c-menu_separator__li--sub",key:M.key||`separator-${D}`}));if(M.type===h.A.header)return t.createElement(i.Ay,{key:M.key||`header-${D}`,label:M.label,className:M.className});if(M.type===h.A.loading)return t.createElement(l.A,{key:M.key||"loading",size:"large"});const P={children:M.children,className:M.className,classNameListItem:M.classNameListItem,label:M.label,description:M.description,icon:M.icon,badgeCount:M.badgeCount,badgeLabel:M.badgeLabel,badgeClassName:M.badgeClassName,shortcut:M.shortcut,showEnter:M.showEnter,onSelected:M.click,target:M.target,href:M.href,download:M.download,danger:M.danger,type:M.type,"data-qa":M.dataQa,disabled:M.disabled,showOfflineIcon:M.showOfflineIcon,showLinkIndicatorIcon:M.showLinkIndicatorIcon,checked:M.checked,indeterminate:M.indeterminate,width:M.submenuWidth,autoClogProps:M.autoClogProps,megaphoneSpaceName:M.megaphoneSpaceName,megaphoneNotificationName:M.megaphoneNotificationName,onMount:M.onMount,onUnmount:M.onUnmount,ariaDescribedBy:M.ariaDescribedBy,ariaRole:M.ariaRole},k=M.key||M.label;if(M.type===h.A.submenu){const F=(0,s.A)(M.renderSubmenu)?M.renderSubmenu:W=>t.createElement(za,y({template:M.template||M.submenu},W,{width:M.submenuWidth}));return t.createElement(v.A,y({},P,{label:M.label,renderSubmenu:F,key:k}))}if(M.type===h.A.custom)return M.ariaHidden===!1&&!(0,o.A)()?M.children:t.createElement("div",{"aria-hidden":M.ariaHidden===!1?"false":"true",key:M.key,"data-qa":M.dataQa},M.children);if(M.type===h.A.subheaderChild)return t.createElement(d.A,y({key:k,type:h.A.subheaderChild},P));const x=t.createElement(d.A,y({key:k},P));return M.megaphoneSpaceName&&M.megaphoneNotificationName?t.createElement(r.Ay,{key:k,spaceName:M.megaphoneSpaceName,notifications:{[M.megaphoneNotificationName]:{component:()=>x}}}):x});return t.createElement(_.Ay,y({},O),C)}},"MenuFromTemplate");p.displayName="MenuFromTemplate",p.propTypes=I;const g=p},7417231112:(z,A,e)=>{"use strict";e.d(A,{$b:()=>_,Ay:()=>r,a6:()=>l});var t=e(3134334389),n=e(5255740490),s=e(7715417323);function a(){return a=Object.assign||function(d){for(var i=1;i<arguments.length;i++){var m=arguments[i];for(var h in m)Object.prototype.hasOwnProperty.call(m,h)&&(d[h]=m[h])}return d},a.apply(this,arguments)}u(a,"_extends");const c="_isSlackMenuItemHeader";function o(d){let{for:i,label:m,className:h,onMouseEnter:v=s.A}=d;return t.createElement("div",a({},i&&{id:_(i)},{"aria-hidden":"true",className:(0,n.A)("c-menu_item__header",h),onMouseEnter:v,"data-qa":"menu-item-header"}),m)}u(o,"MenuItemHeader"),o.displayName="MenuItemHeader",o[c]=!0;const r=o;function l(d){return!!(d!=null&&d[c])}u(l,"isMenuItemHeader");function _(d){return`${d}-label`}u(_,"getMenuItemHeaderIdForGroup")},8245211418:(z,A,e)=>{"use strict";e.d(A,{A:()=>f});var t=e(3134334389),n=e(5255740490),s=e(3078252698),a=e(7715417323),c=e(8049923572),o=e(6084388622),r=e(7420598276),l=e(1610251172),_=e(2762351398),d=e(8773153312),i=e(101973425),m=e(8683010724),h=e(6244014364),v=e(571104883),y=e(735940183),T=e(9391594207);const I=new y.Ay("menu");let p=u(class extends t.Component{componentDidMount(){this.props.onMount&&this.props.onMount()}componentWillUnmount(){this.props.onUnmount&&this.props.onUnmount()}onSelected(C){var M,D;(D=(M=this.props).menuCallbackBefore)===null||D===void 0||D.call(M,C),this.props.onSelected(C),this.props.menuCallback(this.props.menuCallbackId,C)}determineMenuRole(){const{type:C,ariaRole:M}=this.props;if(M)return M;switch(C){case d.A.radio:return"menuitemradio";case d.A.checkbox:return"menuitemcheckbox";default:return"menuitem"}}renderBadgeMaybe(){const{badgeLabel:C,badgeCount:M,badgeClassName:D,highlighted:P}=this.props;return M?t.createElement(_.Ay,{count:M,style:P?_.rY.white:_.rY.red}):C?t.createElement(r.A,{className:D},C):null}renderAdditionalIconMaybe(){const{additionalIcon:C}=this.props;return C?t.createElement("div",{className:"c-menu_item__additional-icon","data-qa":"menu_item_additional_icon",role:"presentation"},C):null}renderCaret(){return!this.props.withSubmenu||this.props.disabled?null:t.createElement("div",{className:"c-menu_item__submenu-indicator","data-qa":"menu_item_submenu_indicator",role:"presentation"},t.createElement(m.A,{name:this.props.showFullCarat?"caret-right-full":"caret-right"}))}renderEnterMaybe(){const{showEnter:C,highlighted:M}=this.props;return!C||!M?null:t.createElement(l.A,{legacy:!0,type:"enter",className:"c-menu_item__enter","data-qa":"menu_item_enter",role:"presentation"})}renderCheckmarkMaybe(){const{type:C,checked:M,indeterminate:D}=this.props,P=C===d.A.radio||C===d.A.checkbox;return P&&D?t.createElement(l.A,{className:"c-menu_item__checkbox_dash","data-qa":"menu_item_checkbox_dash",type:"form-checkbox-dash",size:"inherit",inline:!0}):P&&M?t.createElement("div",{className:"c-menu_item__checkmark"},t.createElement(m.A,{name:"check",size:"16",inline:!0,"data-qa":"menu_item_checkmark"})):null}renderIconMaybe(){const{icon:C}=this.props;return C?t.createElement("div",{className:"c-menu_item__icon","data-qa":"menu_item_icon",role:"presentation"},C):null}renderLinkIconMaybe(){const{href:C,showLinkIndicatorIcon:M}=this.props;return M===!1||M!==!0&&!C?null:t.createElement("div",{className:"c-menu_item__link_icon","data-qa":"menu_item_link_icon",role:"presentation"},t.createElement(m.A,{name:"new-window","data-qa":"menu_item_link_indicator"}))}renderShortcutMaybe(){const{shortcut:C,containerSize:M,experimentSkResponsiveMenusGroupOn:D,isResponsive:P}=this.props;if(!C||D&&P&&M&&M.width<300)return null;if(!(0,s.A)(C)&&"label"in C){const{label:k}=C;if(k&&(0,s.A)(k))return t.createElement("div",{className:"c-menu_item__shortcut"},k)}return t.createElement("div",{className:"c-menu_item__shortcut"},C)}render(){const{autoClogProps:C,children:M,className:D,classNameListItem:P,danger:k,description:x,disabled:F,showOfflineIcon:W,highlighted:Y,label:S,onMouseEnter:L,onMouseLeave:w,href:J,target:G,download:X,type:te,withSubmenu:le,standaloneHoverEffect:ve,checked:Q,indeterminate:Ae,measureRef:ae,containerSize:he,experimentSkResponsiveMenusGroupOn:_e,isResponsive:ee,ariaDescribedBy:de,ariaLabelledBy:Ie,ariaLabel:ce,disableHoverStyling:j}=this.props,N=(0,n.A)(D,"c-menu_item__button",{"c-menu_item__button--highlighted":Y&&!F&&!j,"c-menu_item__button--danger":k,"c-menu_item__button--disabled":F,"c-menu_item__button--with_submenu":le,"c-menu_item--button--subheader_child":te===d.A.subheaderChild,"c-menu_item__button--checked":(te===d.A.radio||te===d.A.checkbox)&&(Q||Ae),"c-menu_item--compact":te===d.A.compactItem,"c-menu_item--standalone":ve}),b=(0,n.A)(P,"c-menu_item__li",{"c-menu_item__li--highlighted":Y&&!j}),R=(0,n.A)(P,"c-menu_item__label",{"c-menu_item__label--with_description":x}),K=le?"true":void 0,B=x?t.createElement("div",{className:"c-menu_item__description"},x):"",$=this.props.activeMenuId,Z=this.props.featureSubmenuRoleDescription?I.t("submenu"):void 0,re=(0,v.cX)()&&le?Z:void 0;return t.createElement("div",{ref:ae,className:b,onMouseEnter:L,onMouseLeave:w,"data-qa":`${this.props["data-qa"]}-wrapper`},t.createElement(o.Nm,{autoClogProps:{...C,elementType:h.ElementType.MENU_ITEM},ref:this.buttonRef,id:$,className:N,disabled:F,onClick:this.onSelected,href:J,target:G,download:X,"data-qa":this.props["data-qa"],role:this.determineMenuRole(),checked:Q,"aria-checked":Ae?"mixed":Q,"aria-haspopup":K,tabIndex:-1,"aria-roledescription":re,"aria-describedby":de,"aria-labelledby":Ie,"aria-label":ce},this.renderCheckmarkMaybe(),this.renderIconMaybe(),t.createElement("div",{className:R},S,M,!(_e&&ee&&he&&he.width<300)&&B),this.renderShortcutMaybe(),this.renderBadgeMaybe(),this.renderAdditionalIconMaybe(),this.renderCaret(),this.renderEnterMaybe(),this.renderLinkIconMaybe(),W&&t.createElement("div",{className:"c-menu_item__icon c-menu_item__icon--offline","data-qa":"menu_item_icon",role:"presentation"},t.createElement(l.A,{type:"cloud-offline-small"}))))}constructor(C){super(C),this.onSelected=this.onSelected.bind(this),this.buttonRef=t.createRef()}},"MenuItem");p.displayName="MenuItem",p.defaultProps={children:void 0,highlighted:!1,onMouseEnter:a.A,onMouseLeave:a.A,onSelected:a.A,menuCallback:a.A,menuCallbackBefore:a.A,menuCallbackId:null,className:"",classNameListItem:"",label:"",description:"",danger:!1,disabled:!1,showOfflineIcon:!1,href:null,showLinkIndicatorIcon:void 0,icon:null,shortcut:void 0,badgeCount:void 0,badgeLabel:void 0,badgeClassName:void 0,showEnter:!1,target:void 0,download:void 0,type:d.A.default,withSubmenu:!1,"data-qa":"menu_item_button",activeMenuId:void 0,standaloneHoverEffect:void 0,autoClogProps:void 0,checked:void 0,indeterminate:void 0,featureSubmenuRoleDescription:!1,group:void 0,experimentSkResponsiveMenusGroupOn:!1,isResponsive:!0,ariaDescribedBy:void 0,ariaLabel:void 0,onMount:a.A,onUnmount:a.A,showFullCarat:!1,disableHoverStyling:!1};const g={MenuItem:p},E=u(O=>({experimentSkResponsiveMenusGroupOn:(0,c.IN)(O)}),"mapStateToProps"),f=(0,i.Ay)((0,T.N)(E)((0,c.BM)(p)))},8184841524:(z,A,e)=>{"use strict";e.d(A,{Ay:()=>c,HP:()=>o});var t=e(3134334389),n=e(5255740490);const s="_isSlackMenuSeparator";function a(r){let{className:l,noPadding:_,noPaddingAbove:d,noPaddingBelow:i,noFirstChild:m,noLastChild:h,dataQa:v="menu_separator__separator"}=r;const y=(0,n.A)("c-menu_separator__li",{padding_0:_,padding_top_0:d,padding_bottom_0:i,"c-menu_separator__li--no_first_child":m,"c-menu_separator__li--no_last_child":h},l);return t.createElement("div",{className:y},t.createElement("hr",{className:"c-menu_separator__separator","data-qa":v}))}u(a,"MenuSeparator"),a.displayName="MenuSeparator",a[s]=!0;const c=a;function o(r){return!!(r!=null&&r[s])}u(o,"isMenuSeparator")},7433650413:(z,A,e)=>{"use strict";e.d(A,{A:()=>o});var t=e(3134334389),n=e(5249175977),s=e(5751973043);function a(){return a=Object.assign||function(r){for(var l=1;l<arguments.length;l++){var _=arguments[l];for(var d in _)Object.prototype.hasOwnProperty.call(_,d)&&(r[d]=_[d])}return r},a.apply(this,arguments)}u(a,"_extends");const c=u(r=>{const{renderMenu:l,onPopoverOpen:_,onPopoverClose:d,isDisabled:i=!1,closeOnSelect:m=!0,onTriggerClose:h,onMenuItemSelected:v,onMenuKeyDown:y,...T}=r,I=u(()=>{_&&_()},"onOpenProp"),p=u(E=>{const{onClose:f,...O}=E,C=u((k,x)=>{f&&f(k),d&&d(k)},"onCloseProp"),P=l({...E,onTriggerClose:u(k=>{f&&f(k),h&&h(k)},"onTriggerClose"),onMenuItemSelected:u((k,x)=>{m&&(f&&f(x),d&&d(x)),v&&v(k,x)},"onMenuItemSelected"),onMenuKeyDown:y});return P?t.createElement(n.AM,a({shouldFade:!1,onClose:C,onOpen:I},O),P):!1},"renderPopover");if(p.displayName="renderPopover",i)return typeof r.children=="function"?r.children(s.t0):r.children;const g=r.isContextMenu?s.t0:{"aria-haspopup":"menu"};return t.createElement(n.Wv,a({},T,{triggerProps:g,renderPopover:p}),r.children)},"MenuTrigger");c.displayName="MenuTrigger";const o=c},8773153312:(z,A,e)=>{"use strict";e.d(A,{A:()=>n,y:()=>t});const t={default:"default",compactItem:"compact_item",separator:"separator",sub_separator:"sub_separator",submenu:"submenu",header:"header",loading:"loading",custom:"custom",subheaderChild:"subheader_child",radio:"radio",checkbox:"checkbox"},n=t},5152183509:(z,A,e)=>{"use strict";e.d(A,{Ay:()=>w,YJ:()=>W});var t=e(3134334389),n=e(5255740490),s=e(3078252698),a=e(9746734072),c=e(8424846741),o=e(7715417323),r=e(4481313819),l=e(4244379358),_=e(8049923572);const d=u(J=>{let{"aria-labelledby":G,"aria-owns":X}=J;return X?t.createElement("div",{className:"offscreen",role:"group","aria-owns":X,"aria-labelledby":G}):null},"MenuItemGroup");d.displayName="MenuItemGroup";const i=d;var m=e(7417231112),h=e(8184841524),v=e(101973425),y=e(1959847761),T=e(6244014364);function I(J){return t.isValidElement(J)&&"children"in J.props}u(I,"hasChildren");function p(J){return J!=null&&typeof J=="object"&&"type"in J&&J.type===t.Fragment}u(p,"isFragment");function g(J){return J instanceof Array?J.map(g):p(J)&&I(J)?g(J.props.children):J}u(g,"defragment");function E(J){return t.Children.toArray(g(J))}u(E,"flattenChildren");var f=e(796111729),O=e(3821598679),C=e(9391594207);function M(){return M=Object.assign||function(J){for(var G=1;G<arguments.length;G++){var X=arguments[G];for(var te in X)Object.prototype.hasOwnProperty.call(X,te)&&(J[te]=X[te])}return J},M.apply(this,arguments)}u(M,"_extends");function D(J){const G=J&&J.type;return!!G&&(0,v.l0)(G)}u(D,"isMenuItem");function P(J){const G=J&&J.type;return!!G&&(0,y.e)(G)}u(P,"isSubmenu");function k(J){const G=J&&J.type;return G&&(0,h.HP)(G)}u(k,"isSeparator");function x(J){const G=J&&J.type;return G&&(0,m.a6)(G)}u(x,"isMenuItemHeader");let F=0;function W(){return F>0}u(W,"isMenuVisible");const Y={ArrowUp:"selectprevious",Up:"selectprevious",ArrowDown:"selectnext",Down:"selectnext",ArrowLeft:"closesubmenu",Left:"closesubmenu",ArrowRight:"opensubmenu",Right:"opensubmenu",Escape:"closemenu",Enter:"select"," ":"select",Home:"selectfirst",End:"selectlast"};let S=u(class extends t.Component{componentDidMount(){this.focus(),F+=1}componentDidUpdate(G){this.props.kbNavActive&&!G.kbNavActive&&this.activateKBNav()}componentWillUnmount(){F-=1,this.props.onUnmount&&this.props.onUnmount()}onMenuNavigation(G){const X=this.getIndexOfNextMenuItemInDirection(G);this.setState(()=>({highlightedMenuItemIndex:X,highlightedMenuItemKbNavActive:!1,isKeyboardHighlight:!0}))}onMouseEnterMenuItem(G){const X=this.state.highlightCanChangeOnMouseMovement?G:this.state.highlightedMenuItemIndex;if(this.setState(()=>({highlightedMenuItemIndex:X,contingentHighlightedMenuItemIndex:G,highlightedMenuItemKbNavActive:!1,isKeyboardHighlight:!1})),!!this.state.highlightCanChangeOnMouseMovement&&document.activeElement!==this.ariaMenuNode){var te;(te=this.ariaMenuNode)===null||te===void 0||te.focus()}}getAllMenuItemIndices(){const G=[];return E(this.props.children).filter(t.isValidElement).forEach((X,te)=>{(D(X)||P(X))&&G.push(te)}),G}getIndexOfNextMenuItemInDirection(G){const X=this.getAllMenuItemIndices(),te=X.indexOf(this.state.highlightedMenuItemIndex),le=X.length-1;if(G==="selectnext"){const Q=te<le?te+1:0;return X[Q]}const ve=te-1>=0?te-1:le;return X[ve]}getSelectedMenuItem(){const{highlightedMenuItemIndex:G}=this.state;if(!(G<0)&&this.menuChildren)return this.menuChildren[G]}focus(){const{kbNavActive:G,isSubmenu:X}=this.props;if(!G)return;if(!X){this.ariaMenuNode&&this.ariaMenuNode.focus();return}const te=this.getAllMenuItemIndices();if(!te.length){var le;(le=this.ariaMenuNode)===null||le===void 0||le.focus();return}this.setState(()=>({highlightedMenuItemIndex:te[0]}),()=>{var ve;(ve=this.ariaMenuNode)===null||ve===void 0||ve.focus()})}registerKeyboardShortcutForMenuItem(G,X){if(!G||!X)return;const{label:te,key:le}=G;(0,s.A)(te)&&((0,s.A)(le)||(0,a.A)(le))&&(0,c.A)(le).forEach(ve=>{this.keyboardShortcutsMap[ve]=X})}renderMenuItem(G,X){const te=this.onMouseEnterMenuItem.bind(this,X),{highlightedMenuItemIndex:le,highlightedMenuItemKbNavActive:ve,isKeyboardHighlight:Q}=this.state,{onMenuItemSelectedBefore:Ae,stripTerminalSeparators:ae,isResponsive:he}=this.props;x(G)&&G.props.for&&(this.menuGroups||(this.menuGroups={}),this.menuGroups[G.props.for]={key:G.props.for,"aria-labelledby":(0,m.$b)(G.props.for),"aria-owns":[],index:X});const _e={...G.props,onMouseEnter:te,key:X},ee=`${this.activeMenuId}-${X}`,{shortcut:de}=G.props;if(de&&this.registerKeyboardShortcutForMenuItem(de,ee),D(G)||P(G)){const N=le===X;if(_e.activeMenuId=ee,N&&Q){var Ie,ce,j;(ce=(Ie=this.ariaMenuNode)===null||Ie===void 0?void 0:Ie.querySelector(`#${_e.activeMenuId}`))===null||ce===void 0||(j=ce.scrollIntoView)===null||j===void 0||j.call(ce)}_e.menuCallbackBefore=Ae,_e.menuCallback=this.onMenuItemSelected,_e.menuCallbackId||(_e.menuCallbackId=X),_e.highlighted=le===X,_e.isKeyboardHighlight=_e.highlighted&&Q,_e.group&&(this.menuGroups||(this.menuGroups={}),this.menuGroups[_e.group]||(this.menuGroups[_e.group]={key:_e.group,"aria-owns":[],index:X}),this.menuGroups[_e.group]["aria-owns"].push(_e.activeMenuId))}if(P(G)&&(_e.isOpen=_e.highlighted&&!Q||_e.highlighted&&ve,_e.kbNavActive=_e.highlighted&&ve,_e.returnKBNav=this.activateKBNav,_e.preventHighlightChange=this.preventHighlightChange,_e.allowHighlightChange=this.allowHighlightChange),k(G)&&ae)if(!this.menuChildren)(0,f.Wo)().warn("Menu.renderMenuItem called without this.menuChildren");else{const N=this.menuChildren[X-1];if(k(N))return null;_e.noFirstChild=!0,_e.noLastChild=!0}return D(G)&&(_e.isResponsive=he),t.cloneElement(G,_e)}renderMenuGroups(){return this.menuGroups?Object.values(this.menuGroups).filter(G=>G["aria-owns"].length>0).map(G=>({group:t.createElement(i,{key:G.key,"aria-labelledby":G["aria-labelledby"],"aria-owns":G["aria-owns"].join(" ")}),index:G.index})).sort((G,X)=>X.index-G.index):[]}renderMenuItems(){this.menuChildren=E(this.props.children).filter(t.isValidElement);const G=this.menuChildren.map(this.renderMenuItem,this);return this.renderMenuGroups().forEach(te=>{let{group:le,index:ve}=te;G.splice(ve,0,le)}),G}renderMenu(){const{noMargin:G,menuClassNames:X,"data-qa":te,isUnstyled:le,isResponsive:ve,experimentSkResponsiveMenusGroupOn:Q}=this.props,Ae=(0,n.A)("c-menu__items",{"c-menu__items--no_margin":G}),ae=this.state.highlightedMenuItemIndex!==-1?`${this.activeMenuId}-${this.state.highlightedMenuItemIndex}`:null,he=(0,n.A)({"c-menu":!le,"c-menu--responsive":ve&&Q},X);return t.createElement("div",{className:he,"data-qa":te,style:{width:this.props.width}},t.createElement("div",{className:"c-menu__items_scroller"},t.createElement("div",{"aria-activedescendant":ae??void 0,ref:this.setAriaMenuRef,className:Ae,onKeyDown:this.onMenuKeyDown,onMouseLeave:this.onMouseLeaveMenu,"data-qa":"menu_items",role:"menu","aria-label":this.props["aria-label"],"aria-describedby":this.props["aria-describedby"],"aria-labelledby":this.props["aria-labelledby"],tabIndex:-1,"no-bootstrap":1},this.renderMenuItems())))}render(){const G=this.renderMenu(),{autoClogProps:X}=this.props;return X?t.createElement(r.A,M({elementType:T.ElementType.MENU},X),G):G}constructor(G){super(G),this.activeMenuId=`menu-${(0,O.A)()}`,this.menuChildren=[],this.keyboardShortcutsMap={},this.menuGroups={},this.onMenuItemSelected=(X,te)=>{this.props.onMenuItemSelected&&this.props.onMenuItemSelected(X,te)},this.onMenuKeyDown=X=>{var te;const{kbNavActive:le,onMenuKeyDown:ve,onCloseSubmenu:Q,onTriggerClose:Ae,windowRef:ae}=this.props;if(!le)return;const{key:he}=X,_e=Y[he],ee=(te=this.keyboardShortcutsMap)===null||te===void 0?void 0:te[he],de=this.getSelectedMenuItem(),Ie=de&&P(de),ce=this.getAllMenuItemIndices();(_e||ee)&&(X.stopPropagation(),X.preventDefault()),(_e==="selectnext"||_e==="selectprevious")&&this.onMenuNavigation(_e),_e==="closesubmenu"&&(Q==null||Q(X)),(_e==="select"||_e==="opensubmenu")&&Ie&&this.setState(()=>({highlightedMenuItemKbNavActive:!0})),_e==="closemenu"&&(Ae==null||Ae(X)),_e==="selectfirst"&&this.setState(()=>({highlightedMenuItemIndex:ce[0],highlightedMenuItemKbNavActive:!1,isKeyboardHighlight:!0})),_e==="selectlast"&&this.setState(()=>({highlightedMenuItemIndex:ce[ce.length-1],highlightedMenuItemKbNavActive:!1,isKeyboardHighlight:!0}));const j=`${this.activeMenuId}-${this.state.highlightedMenuItemIndex}`;if(_e==="select"&&j&&!Ie){var N,b;(b=(N=ae.deref())===null||N===void 0?void 0:N.document.getElementById(j))===null||b===void 0||b.click(),Ae==null||Ae(X)}if(ee){var R,K;(K=(R=ae.deref())===null||R===void 0?void 0:R.document.getElementById(ee))===null||K===void 0||K.click(),Ae==null||Ae(X)}ve==null||ve(X,{isCurrentItemSubmenu:Ie,closeMenu:Ae,selectedMenuItem:de})},this.onMouseLeaveMenu=()=>{const X=this.state.highlightCanChangeOnMouseMovement?-1:this.state.highlightedMenuItemIndex;this.setState(()=>({highlightedMenuItemIndex:X,contingentHighlightedMenuItemIndex:-1}))},this.setAriaMenuRef=X=>{this.ariaMenuNode=X},this.activateKBNav=()=>{var X;(X=this.ariaMenuNode)===null||X===void 0||X.focus(),this.setState(te=>({highlightedMenuItemKbNavActive:!1,highlightedMenuItemIndex:te.highlightedMenuItemIndex===-1?this.getIndexOfNextMenuItemInDirection("selectnext"):te.highlightedMenuItemIndex}))},this.allowHighlightChange=()=>{this.setState(X=>({highlightedMenuItemIndex:X.contingentHighlightedMenuItemIndex,highlightCanChangeOnMouseMovement:!0})),this.props.allowHighlightChange&&this.props.allowHighlightChange()},this.preventHighlightChange=()=>{this.setState(()=>({highlightCanChangeOnMouseMovement:!!this.props.resetHighlightOnChange})),this.props.preventHighlightChange&&this.props.preventHighlightChange()},this.state={highlightedMenuItemIndex:-1,contingentHighlightedMenuItemIndex:-1,highlightedMenuItemKbNavActive:!1,highlightCanChangeOnMouseMovement:!0,isKeyboardHighlight:!1}}},"Menu");S.displayName="Menu",S.defaultProps={menuClassNames:void 0,onMenuItemSelected:o.A,onMenuItemSelectedBefore:o.A,onTriggerClose:o.A,onCloseSubmenu:o.A,width:void 0,noMargin:!1,kbNavActive:!0,stripTerminalSeparators:!1,preventHighlightChange:o.A,allowHighlightChange:o.A,resetHighlightOnChange:!1,"data-qa":"menu","aria-label":void 0,onMenuKeyDown:o.A,onUnmount:o.A,isSubmenu:!1,isUnstyled:!1,autoClogProps:void 0,experimentSkResponsiveMenusGroupOn:!1,isResponsive:!0};const L=u(J=>({experimentSkResponsiveMenusGroupOn:(0,_.IN)(J)}),"mapStateToProps"),w=(0,l.A)((0,C.N)(L,null,null,{forwardRef:!0})(S))},101973425:(z,A,e)=>{"use strict";e.d(A,{Ay:()=>_,KJ:()=>o,LN:()=>r,l0:()=>l});var t=e(2208015175),n=e(3297051565),s=e.n(n),a=e(4724591729),c=e(796111729);const o="_isSlackMenuItem",r={menuCallback:s().func,menuCallbackId:s().number,highlighted:s().bool};function l(d){return!!d[o]}u(l,"isMenuItem");function _(d){if((0,a.Cu)()){const i=d.propTypes||{};let m;Object.defineProperty(d,"propTypes",{get:()=>m,set:h=>{const v=d.displayName||d.name||"Component";(0,t.A)(r,(y,T)=>{const I=h[T];I&&I!==y&&I!==y.isRequired&&(0,c.Wo)().warn(`${v}'s ${T} prop type doesn't match menu item`)}),m={...r,...h}}}),d.propTypes=i}return d[o]=!0,d}u(_,"wrapMenuItem")},9285382326:(z,A,e)=>{"use strict";e.d(A,{A:()=>n});var t=e(6162189146);const n=t.A},6162189146:(z,A,e)=>{"use strict";e.d(A,{A:()=>d});var t=e(3134334389),n=e(5255740490),s=e(7026348746),a=e(8683010724),c=e(2312625946),o=e(653780586),r=e(735940183);const l=new r.Ay("channel_token"),_=u(i=>{let{type:m=o.A.Unknown,subtler:h=!1,size:v=o.o.Small,width:y="random",invert:T=!1,showHash:I=!0,omitNonExistentTooltip:p=!1}=i;const g=(0,n.A)("c-missing_channel",{"c-missing_channel--unknown":m===o.A.Unknown,"c-missing_channel--nonexistent":m===o.A.Nonexistent,"c-missing_channel--subtler":h,"c-missing_channel--medium":v===o.o.Medium,"c-missing_channel--unknown_inverted":m===o.A.Unknown&&T,"c-missing_channel--non_existent_inverted":m===o.A.Nonexistent&&T}),E=(0,n.A)("c-missing_channel--medium_hash",{"c-missing_channel--subtler":h});let f;if(m===o.A.Unknown)f=l.t("Loading...");else if(m===o.A.Nonexistent)f=l.t("You don\u2019t have access to this channel (ex. it\u2019s private or in a workspace you\u2019re not a part of), so its name isn\u2019t shown",{fallbackHash:"b63975b75ce4c6d6e1e8b8057209fc25f351bbcf"});else return null;if(m===o.A.Nonexistent){const O=t.createElement("span",{className:"c-missing_channel--private"},t.createElement(a.A,{name:"lock"}),t.createElement("span",null,l.t("private channel")));return p?O:t.createElement(c.Ay,{tip:f},O)}return v===o.o.Medium?t.createElement("div",null,t.createElement("div",{className:"c-missing_channel--medium-top"},I&&t.createElement("span",{className:E},t.createElement(a.A,{name:"channel"})),t.createElement(s.A,{tooltip:f,isNonExistent:!1,size:y,className:g})),t.createElement(s.A,{tooltip:f,isNonExistent:!1,size:y,className:g})):t.createElement(s.A,{tooltip:f,isNonExistent:!1,size:y,className:g})},"MissingChannel");_.displayName="MissingChannel";const d=t.memo(_)},8028620372:(z,A,e)=>{"use strict";e.d(A,{A:()=>c});var t=e(3134334389),n=e(5255740490),s=e(653780586);const a=u(o=>{let{className:r,isNonExistent:l=!1,size:_,subtler:d=!1,invert:i=!1,dataQa:m}=o;const{Unknown:h,Nonexistent:v}=s.A,y=l?v:h,T=(0,t.useMemo)(()=>({height:_,width:_}),[_]);return t.createElement("span",{className:(0,n.A)(r,"c-missing_icon",`c-missing_icon--${y}`,{"c-missing_icon--unknown_inverted":y===h&&i,"c-missing_icon--non_existent_inverted":y===v&&i,"c-missing_icon--subtler":d}),style:T,"data-qa":m})},"MissingIcon");a.displayName="MissingIcon";const c=a},7576317051:(z,A,e)=>{"use strict";e.d(A,{A:()=>n});var t=e(3229001818);const n=t.A},3229001818:(z,A,e)=>{"use strict";e.d(A,{A:()=>_});var t=e(3134334389),n=e(7026348746),s=e(653780586),a=e(735940183);const c=new a.Ay("member_token"),{Unknown:o,Nonexistent:r}=s.A,l=u(d=>{let{type:i=o,subtler:m=!1,className:h,"data-qa":v}=d;const y=i===o?c.t("Loading\u2026"):c.t("Private user info");return t.createElement(n.A,{className:h??"",isNonExistent:i===r,subtler:m,tooltip:y,"data-qa":v})},"MissingMember");l.displayName="MissingMember";const _=t.memo(l)},4816967449:(z,A,e)=>{"use strict";e.d(A,{A:()=>m});var t=e(3134334389),n=e(7026348746),s=e(653780586),a=e(735940183);const c=new a.Ay("user_group_token"),{Unknown:o,Nonexistent:r}=s.A,{Small:l,Medium:_}=s.o,d=u(h=>{let{invert:v=!1,size:y=l,type:T=o,subtler:I=!1}=h;const p=T===o?c.t("Loading..."):c.t("Private user group info");if(y===_){const g="\xA0\xA0\xB7\xA0\xA0";return t.createElement("div",{className:"p-browse_page_user_group_entity--missing"},t.createElement("div",null,t.createElement(n.A,{tooltip:p,isNonExistent:T===r,size:"small",invert:v})," ",t.createElement(n.A,{tooltip:p,isNonExistent:T===r,size:"small",invert:v})),t.createElement("div",null,t.createElement(n.A,{tooltip:p,isNonExistent:T===r,size:"small",invert:v}),g,t.createElement(n.A,{tooltip:p,isNonExistent:T===r,size:"large",invert:v})))}return t.createElement(n.A,{tooltip:p,isNonExistent:T===r,size:"random",subtler:I,invert:v})},"MissingUserGroup");d.displayName="MissingUserGroup";const m=d},4376397139:(z,A,e)=>{"use strict";e.d(A,{j:()=>o,A:()=>l});var t=e(3134334389),n=e(6105929840),s=e(735940183);const a=new s.Ay("generic_dialog");function c(_){let{onClick:d,...i}=_;return t.createElement(n.A,{className:"c-multi_pane_modal__back",icon:"chevron-large-left",onClick:d,"aria-label":a.t("Back",{fallbackHash:"b52b36b7269fbfc58ec24bb724691951a3decbe8",fallbackHashNs:"member_actions"}),"data-qa":i["data-qa"]})}u(c,"ModalBackButton"),c.displayName="ModalBackButton";const o=t.memo(c);var r=e(1427522952);const l=r.A},1427522952:(z,A,e)=>{"use strict";e.d(A,{A:()=>r});var t=e(3134334389),n=e(5255740490),s=e(7937864072),a=e(4979382452);function c(){return c=Object.assign||function(l){for(var _=1;_<arguments.length;_++){var d=arguments[_];for(var i in d)Object.prototype.hasOwnProperty.call(d,i)&&(l[i]=d[i])}return l},c.apply(this,arguments)}u(c,"_extends");function o(l){let{defaultPane:_,panes:d,forceFullRerenderOnPageChange:i=!0,...m}=l;const h=(0,s.A)(),[v,y]=(0,t.useState)({pane:_}),T=(0,t.useCallback)((g,E)=>y({pane:g,props:E}),[]),{render:I,modalProps:p}=d[v.pane];return I||h.error("MULTI_PANE_MODAL",`Unknown pane "${v.pane}"`),t.createElement(a.A,c({},m,p,{className:(0,n.A)(m.className,p==null?void 0:p.className,"c-multi_pane_modal")}),i?t.createElement(t.Fragment,{key:v.pane},I({switchPane:T,...v.props})):I({switchPane:T,...v.props}))}u(o,"MultiPaneModal"),o.displayName="MultiPaneModal";const r=o},3501104594:(z,A,e)=>{"use strict";e.d(A,{A:()=>I});var t=e(3134334389),n=e(7715417323),s=e(348699080),a=e(1251589538);function c(){return c=Object.assign||function(p){for(var g=1;g<arguments.length;g++){var E=arguments[g];for(var f in E)Object.prototype.hasOwnProperty.call(E,f)&&(p[f]=E[f])}return p},c.apply(this,arguments)}u(c,"_extends");const o=(0,t.memo)(p=>{let{addMemberToPresenceSubscription:g=n.A,memberId:E,removeMemberFromPresenceSubscription:f=n.A,renderDoublePresence:O=!1,firstElementExtraClassName:C="",...M}=p;return(0,s.A)(()=>(g(E),()=>f(E)),[E]),O?t.createElement(t.Fragment,null,t.createElement(a.Ay,c({},M,{className:`${M.className||""} ${C}`})),t.createElement(a.Ay,c({},M))):t.createElement(a.Ay,c({},M))});o.displayName="PresenceWithSubscriptions";const r=o;var l=e(3339229351),_=e(92812954),d=e(6045540917),i=e(9391594207),m=e(5241075893),h=e(5795074931),v=e(9290914927);const y=u((p,g)=>{const E=(0,v.gd)(p,g.memberId),f=(0,_.d)(p,g.memberId),O=(0,d.h)(p,g.memberId),C=(0,h.WR)(p)===g.memberId;return{...g,userType:f,isDnd:O,isSelf:C,isSlackbot:g.memberId===l.Q$,isActive:E==="active"}},"mapStateToProps"),T=u(p=>({addMemberToPresenceSubscription:g=>p((0,m.xz)({memberId:g})),removeMemberFromPresenceSubscription:g=>p((0,m.Fd)({memberId:g}))}),"mapDispatchToProps"),I=(0,i.N)(y,T)(r)},9828955991:(z,A,e)=>{"use strict";e.d(A,{Ay:()=>s});var t=e(3501104594),n=e(1251589538);const s=t.A},1251589538:(z,A,e)=>{"use strict";e.d(A,{Ay:()=>i});var t=e(3134334389),n=e(5255740490),s=e(2036354333),a=e(8683010724),c=e(1563996154),o=e(735940183);function r(){return r=Object.assign||function(m){for(var h=1;h<arguments.length;h++){var v=arguments[h];for(var y in v)Object.prototype.hasOwnProperty.call(v,y)&&(m[y]=v[y])}return m},r.apply(this,arguments)}u(r,"_extends");const l=new o.Ay("presence");function _(m,h){return m?h?l.t("Active, notifications snoozed"):l.t("Active"):h?l.t("Away, notifications snoozed"):l.t("Away")}u(_,"getPresenceText");const d=u(m=>{let{inheritIconSize:h=!1,inline:v=!0,isActive:y=!1,isDnd:T=!1,isSelf:I=!1,isSlackbot:p=!1,invert:g=!1,userType:E="member",focusable:f=!1,showText:O=!1,resetIA:C=!1,className:M}=m,D=y?{name:"status-member",variation:"filled"}:{name:"status-member"};const P=(0,n.A)(M,"c-presence",{"c-presence--active":y&&!g,"c-presence--resetIA":C,"c-presence--away":!y&&!g,"c-presence--inverted":g,"is-inline":v,block:!v}),k=_(y,T);E==="member"?T?D=y?{name:"status-member-dnd",variation:"filled"}:{name:"status-member-dnd"}:p&&(D={name:"status-slackbot",variation:"filled"}):E==="ra"||E==="external"?T?D=y?{name:"status-guest-dnd",variation:"filled"}:{name:"status-guest-dnd"}:D=y?{name:"status-guest",variation:"filled"}:{name:"status-guest"}:E==="ura"&&(T?D=y?{name:"status-single-channel-guest-dnd",variation:"filled"}:{name:"status-single-channel-guest-dnd"}:D=y?{name:"status-single-channel-guest",variation:"filled"}:{name:"status-single-channel-guest"});const x=t.createElement("span",{className:P},t.createElement(a.A,r({},D,{title:k,"aria-label":k,"aria-hidden":"false",size:h?"inherit":"20",inline:v,"data-qa":"presence_indicator","data-qa-type":D.name,"data-qa-presence-self":I,"data-qa-presence-active":y,"data-qa-presence-dnd":T})));return f?t.createElement(t.Fragment,null,t.createElement(c.Ay,{tip:k},t.createElement(s.A,null,x)),O&&t.createElement("span",{className:"padding_left_50","aria-hidden":"true"},k)):t.createElement(t.Fragment,null,x,O&&t.createElement("span",{className:"padding_left_50","aria-hidden":"true"},k))},"Presence");d.displayName="Presence";const i=t.memo(d)},5846524816:(z,A,e)=>{"use strict";e.d(A,{A:()=>W});var t=e(3134334389),n=e(5255740490),s=e(7715417323),a=e(3398586081),c=e(5617110048),o=e(3391133100),r=e(2660476100),l=e(3155323475),_=e(4505564445),d=e(4244379358),i=e(7193040700),m=e(8683010724),h=e(2322735331),v=e(735940183),y=e(5356156303);function T(){return T=Object.assign||function(Y){for(var S=1;S<arguments.length;S++){var L=arguments[S];for(var w in L)Object.prototype.hasOwnProperty.call(L,w)&&(Y[w]=L[w])}return Y},T.apply(this,arguments)}u(T,"_extends");const I=new v.Ay("select");let p=u(class extends t.Component{componentDidMount(){const{focusOnMount:S=!1}=this.props;S&&this.onClick()}componentDidUpdate(S){const{selectState:L}=this.props,{options:w}=L,{selectState:J}=S,{options:G}=J;!(0,y.Ay)(G,w,4)&&this.flattenOptions()}flattenOptions(){const{selectState:S}=this.props,{options:L}=S;this.allOptions=L&&L.reduce((w,J)=>(Object.prototype.hasOwnProperty.call(J,"options")&&Array.isArray(J.options)?w.push(...J.options):w.push(J),w),[])}onEscPressed(S){const{selectState:L,setSelectState:w}=this.props;L.isExpanded&&(S.stopPropagation(),w(()=>({isExpanded:!1})))}onKeyDown(S){if(!(S.shiftKey||S.ctrlKey||S.metaKey||S.altKey))switch(S.keyCode){case _._f:this.onEscPressed(S);break;case _.Fm:case _.I6:this.onClick();break;case _.i7:case _.n6:this.onUpOrDownPressed(S);break;case _.wn:this.onTabPressed();break;default:break}}onTabPressed(){const{setSelectState:S}=this.props;S(()=>({isExpanded:!1}))}onClick(){const{onClick:S=s.A,setSelectState:L,selectState:w}=this.props;this.updateOptionsListPosition(),S&&S(),L(()=>({isExpanded:!w.isExpanded}))}onUpOrDownPressed(S){const{selectState:L,setSelectState:w}=this.props,{isExpanded:J}=L;J||(S.stopPropagation(),this.updateOptionsListPosition(),w(()=>({isExpanded:!0})))}getSelectedOptionIndex(){const{selectState:S}=this.props,{selectedOption:L}=S;return L?this.allOptions.findIndex(w=>w.label===L.label&&w.value===L.value):-1}updateOptionsListPosition(){const{selectState:S}=this.props,{isExpanded:L}=S;if(!L&&this.measurePopoverEvent){var w;(w=this.props.windowRef.deref())===null||w===void 0||w.dispatchEvent(this.measurePopoverEvent)}}renderContent(S){var L;const{renderSelectedOption:w,selectState:J,textSelect:G=!1,textSelectLabel:X=void 0,selectDataQa:te=void 0,placeholderText:le=void 0}=this.props,{selectedOption:ve}=J,Q=ve?w(ve):t.createElement("span",{className:"c-select_button__placeholder"},le||I.t("Please select an option")),Ae=G&&X?t.createElement("span",{className:"c-select_button--text-select-label"},X):void 0,ae=(L=this.allOptions)===null||L===void 0?void 0:L.length,he=ae||void 0,_e=ae?this.getSelectedOptionIndex()+1:void 0,de=_e===void 0||_e===0?{}:{role:"option","aria-selected":!0,"aria-setsize":he,"aria-posinset":_e};return t.createElement("div",T({id:S},de,{"data-qa":te?`${te}-button-content`:null,className:"c-select_button__content"}),Ae,Q)}render(){const{ariaLabelledBy:S=void 0,ariaDescribedBy:L=void 0,ariaLabel:w=void 0,selectState:J,size:G,width:X,textSelect:te=!1,selectDataQa:le=void 0,classPrefix:ve=void 0,onBlur:Q=s.A,onMouseEnter:Ae=void 0,onMouseLeave:ae=void 0,refToForward:he}=this.props,{isDisabled:_e,isExpanded:ee,isInvalid:de,selectId:Ie}=J,ce=(0,n.A)("c-select_button",`c-select_button--${G}`,{"c-select_button--disabled":_e,"c-select_button--expanded":ee,"c-select_button--text-select":te,"c-select_button--invalid":de,[`${ve}__select_button`]:ve}),j=te?{}:{width:X},N=(0,o.Es)(Ie,"button"),b=`${N}-option`;return t.createElement("div",{role:"listbox",tabIndex:0,className:ce,onClick:this.onClick,onKeyDown:this.onKeyDown,style:j,"aria-disabled":_e?!0:void 0,"data-qa":le?`${le}-button`:null,id:N,onBlur:Q,onMouseEnter:Ae,onMouseLeave:ae,"aria-labelledby":S,"aria-describedby":L,"aria-label":w,"aria-invalid":de,"aria-activedescendant":de?void 0:b,ref:he,"aria-expanded":ee,"aria-multiselectable":!1},this.renderContent(b),t.createElement("div",{className:`c-select_button__icon c-select_button__icon--${G}`},t.createElement(m.A,{name:"caret-down",size:G===i.hu.SMALL?"inherit":"20"})))}constructor(S){super(S),this.allOptions=[],(0,h.v)(this,["onUpOrDownPressed","onKeyDown","updateOptionsListPosition","onClick","onEscPressed","onTabPressed"]);const{measurePopoverEventName:L=null}=this.props;L&&(this.measurePopoverEvent=new Event(L)),this.flattenOptions()}},"SelectButton");p.displayName="SelectButton";const g=(0,d.A)(p),E=t.forwardRef((Y,S)=>t.createElement(g,T({},Y,{refToForward:S})));var f=e(1162627626),O=e(4640201401),C=e(3650946343),M=e(6244014364);function D(){return D=Object.assign||function(Y){for(var S=1;S<arguments.length;S++){var L=arguments[S];for(var w in L)Object.prototype.hasOwnProperty.call(L,w)&&(Y[w]=L[w])}return Y},D.apply(this,arguments)}u(D,"basic_select_extends");const P={onClick:{action:M.UiAction.CLICK}},k=u(Y=>Y.map(S=>{let{id:L}=S;return L}),"getIdsFromHintOrErrors");let x=u(class extends t.Component{renderOptionsList(){const{ariaLabel:S,onOptionSelected:L,onOptionsListClose:w,renderOption:J,resultsInPopover:G,overlayClassName:X,listClassName:te,selectState:le,setSelectState:ve,width:Q,classPrefix:Ae,minOptionsListWidth:ae,optionsRowHeight:he,maxListHeight:_e,onScrollablePage:ee,dynamicHeight:de,forceMaxHeight:Ie,includePadding:ce,includeDividers:j,preventScroll:N}=this.props,{isDisabled:b}=le;return b?null:G?t.createElement(O.A,{className:te,selectState:le,setSelectState:ve,renderOption:J,ariaLabel:S,onOptionSelected:L,onOptionsListClose:w,width:Q,inputRef:this.inputContainerRef,measurePopoverEventName:this.measurePopoverEventName,classPrefix:Ae,selectDataQa:this.fallbackDataQa,minOptionsListWidth:ae,optionsRowHeight:he,focusOnMount:!0,popoverProps:X?{overlayClassName:X}:void 0,shouldAlwaysHaveActiveRow:!0,maxListHeight:_e,onScrollablePage:ee,dynamicHeight:de,forceMaxHeight:Ie,includePadding:ce,includeDividers:j,preventScroll:N}):t.createElement(f.A,{className:te,selectState:le,setSelectState:ve,renderOption:J,ariaLabel:S,onOptionSelected:L,onOptionsListClose:w,width:Q,inputRef:this.inputContainerRef,classPrefix:Ae,selectDataQa:this.fallbackDataQa,optionsRowHeight:he,maxListHeight:_e,focusOnMount:!0,shouldAlwaysHaveActiveRow:!0,dynamicHeight:de,forceMaxHeight:Ie,includePadding:ce,includeDividers:j,preventScroll:N})}render(){const{resultsInPopover:S,selectState:L,setSelectState:w,className:J,textSelect:G,textSelectLabel:X,focusOnMount:te,onBlur:le,ariaLabel:ve,ariaLabelledBy:Q,ariaDescribedBy:Ae,autoClogProps:ae,buttonRef:he,errors:_e,hints:ee,size:de,renderSelectedOption:Ie}=this.props,{isInvalid:ce}=L,j=(0,C.A)(_e),N=(0,C.A)(ee);let b;_e&&(b=j?k(_e):void 0);let R;ee&&(R=N?k(ee):void 0);const K=(0,o.Yk)([Ae,b,R]),B=t.createElement("div",{className:(0,n.A)(J,"c-basic-select"),"data-qa":this.fallbackDataQa,ref:this.inputContainerRef},t.createElement(E,D({},this.props,{size:de,renderSelectedOption:Ie,selectDataQa:this.fallbackDataQa,selectState:L,setSelectState:w,measurePopoverEventName:S?this.measurePopoverEventName:void 0,textSelect:G,textSelectLabel:X,focusOnMount:te,onBlur:le,ariaLabel:ve,ariaLabelledBy:Q,ariaDescribedBy:K,"aria-invalid":ce,ref:he})),j&&_e&&t.createElement(l.A,{errors:_e}),N&&ee&&ee.map($=>{let{id:Z,message:re}=$;return t.createElement(r.A,{key:Z,id:Z},re)}),this.renderOptionsList());return ae?t.createElement(c.A,{autoClogProps:ae,actionProps:P,elementType:M.ElementType.DROPDOWN},B):B}constructor(S){super(S),(0,h.v)(this,["renderOptionsList"]),this.inputContainerRef=t.createRef();const{selectId:L}=S.selectState;this.measurePopoverEventName=`measureSelectPopover--${L}`,this.fallbackDataQa=S.selectDataQa||L}},"ControlledBasicSelect");x.displayName="ControlledBasicSelect",x.defaultProps={renderOption:Y=>Y.label,renderSelectedOption:Y=>Y.label,size:i.hu.MEDIUM,width:225,optionsRowHeight:i.bJ,errors:[],hints:[],ariaLabelledBy:void 0,ariaDescribedBy:void 0,placeholderText:void 0,selectDataQa:void 0,resultsInPopover:!0,overlayClassName:void 0,listClassName:void 0,onClick:s.A,onOptionSelected:s.A,onOptionsListClose:s.A,className:void 0,classPrefix:void 0,textSelect:!1,textSelectLabel:void 0,minOptionsListWidth:void 0,focusOnMount:!1,onBlur:s.A,maxListHeight:void 0,autoClogProps:void 0,onScrollablePage:!1,buttonRef:void 0,dynamicHeight:!1,forceMaxHeight:!1,includePadding:!0,includeDividers:!0};let F=u(class extends t.Component{static getDerivedStateFromProps(S,L){const{selectedOption:w}=S,{selectedOption:J}=L;return!J||w!==void 0&&w!==J?{selectedOption:w}:null}setSelectState(S,L){return this.setState(S,L)}render(){const{isDisabled:S,isInvalid:L,isRequired:w,errors:J}=this.props,G=L||(0,C.A)(J),X=(0,a.A)(()=>({...this.state,isDisabled:S,isInvalid:G,isRequired:w}));return t.createElement(x,D({},this.props,{selectState:X(),setSelectState:this.setSelectState}))}constructor(S){super(S),this.state={activeRowIndex:null,isDisabled:S.isDisabled,isExpanded:S.isExpanded,isInvalid:S.isInvalid,isRequired:S.isRequired,options:S.options,selectId:S.selectId,selectedOption:S.selectedOption,selectType:i.US.BASIC},(0,h.v)(this,["setSelectState"])}},"BasicSelect");F.displayName="BasicSelect",F.defaultProps={isDisabled:!1,isExpanded:!1,isRequired:!0,isInvalid:!1,errors:[],hints:[],onOptionSelected:s.A,onOptionsListClose:s.A,selectedOption:void 0,selectId:`basic-select-${(0,o.r9)()}`,maxListHeight:void 0,autoClogProps:void 0};const W=F},5536692738:(z,A,e)=>{"use strict";e.d(A,{Ay:()=>c,HH:()=>s.A,P2:()=>a.A,Z1:()=>n.A});var t=e(5846524816),n=e(2727264612),s=e(8274994582),a=e(320706952);const c=t.A},7090824688:(z,A,e)=>{"use strict";e.d(A,{$c:()=>k,Ay:()=>D,Gn:()=>x,h7:()=>P,xn:()=>F,yW:()=>C});var t=e(3134334389),n=e(5255740490),s=e(7715417323),a=e(3398586081),c=e(5617110048),o=e(3391133100),r=e(2660476100),l=e(3155323475),_=e(868047630),d=e(1162627626),i=e(4640201401),m=e(9573786552),h=e(2742076544),v=e(3239909785),y=e(7193040700),T=e(3650946343),I=e(7772530643),p=e(2322735331),g=e(6244014364);function E(){return E=Object.assign||function(W){for(var Y=1;Y<arguments.length;Y++){var S=arguments[Y];for(var L in S)Object.prototype.hasOwnProperty.call(S,L)&&(W[L]=S[L])}return W},E.apply(this,arguments)}u(E,"_extends");const f={onOptionSelected:{action:g.UiAction.SELECT}},O=u(W=>W.map(Y=>{let{id:S}=Y;return S}),"getIdsFromHintOrErrors");let C=u(class extends t.Component{renderOptionsList(Y){var S,L;const{selectState:w,setSelectState:J,renderOption:G,emptyStateMessage:X,enableLoadingState:te,width:le,maxOptionsListHeight:ve,inputRef:Q,resultsInPopover:Ae,isLoading:ae,classPrefix:he,optionsRowHeight:_e,onOptionsListOpen:ee,onOptionsListClose:de,overlayClassName:Ie,onScrollablePage:ce,onOptionSelected:j,shouldOptionBeSelected:N,shouldTokenizeOnComma:b,shouldTokenizeOnSpace:R,autoClogProps:K,dynamicHeight:B,shouldAllowUnselectInMultiSelectMode:$,stayExpandedAfterSelection:Z,optionsListFooterBannerContent:re,offsetY:Te,offsetX:Ce}=this.props,{isDisabled:Pe,loadInBackground:fe}=w;if(Pe)return null;const pe={key:`${w.selectId}-popover`};Ie&&(pe.overlayClassName=Ie),Te&&(pe.offsetY=Te);var q,se;pe.offsetY=Y?(se=pe.offsetY)!==null&&se!==void 0?se:0-((q=(S=this.additionalInfoContainerRef)===null||S===void 0||(L=S.current)===null||L===void 0?void 0:L.offsetHeight)!==null&&q!==void 0?q:0):pe.offsetY,Ce&&(pe.offsetX=Ce);const ge=Ae?t.createElement(i.A,{selectState:w,setSelectState:J,renderOption:G,emptyStateMessage:X,enableLoadingState:te,width:le,maxListHeight:ve,multiSelectMode:!0,inputRef:Q,inputContainerRef:this.inputContainerRef,measurePopoverEventName:this.measurePopoverEventName,isLoading:ae&&!fe,classPrefix:he,selectDataQa:this.fallbackDataQa,optionsRowHeight:_e,onOpen:ee,onOptionsListClose:de,popoverProps:pe,onScrollablePage:ce,onOptionSelected:j,shouldOptionBeSelected:N,shouldTokenizeOnComma:b,shouldTokenizeOnSpace:R,autoClogProps:K,dynamicHeight:B,shouldAllowUnselectInMultiSelectMode:$,stayExpandedAfterSelection:Z,footerBannerContent:re}):t.createElement(d.A,{selectState:w,setSelectState:J,renderOption:G,emptyStateMessage:X,enableLoadingState:te,width:le,maxListHeight:ve,multiSelectMode:!0,classPrefix:he,selectDataQa:this.fallbackDataQa,optionsRowHeight:_e,onOptionsListClose:de,onOptionSelected:j,shouldOptionBeSelected:N,shouldTokenizeOnComma:b,shouldTokenizeOnSpace:R,dynamicHeight:B,footerBannerContent:re});return K?t.createElement(c.A,{elementType:g.ElementType.DROPDOWN,actionProps:f,autoClogProps:K},ge):ge}render(){const{selectState:Y,setSelectState:S,inputRef:L,maxHeight:w,placeholderText:J,size:G,width:X,isLoading:te,focusOnMount:le,resultsInPopover:ve,onSelectedItemsChange:Q,onKeyDown:Ae,onKeyUp:ae,className:he,classPrefix:_e,onFilterQueryChange:ee,onFilterQueryPaste:de,processOptions:Ie,onBlur:ce,onOptionsListClosedBlur:j,onOptionsListClose:N,expandOnFocus:b,ariaLabel:R,ariaLabelledBy:K,ariaDescribedBy:B,onTokenSelect:$,onInputFocused:Z,forceRealName:re,autoClogProps:Te,errors:Ce,hints:Pe,disableIdParsing:fe,customizeTokenProps:pe,iconType:q,isTokenEditable:se,ignoreSelectAllTokensAfterMount:ge,disableCloseOnTab:Oe,throttleForceRenderSelectContainer:Le,forceRenderSelectContainerThrottleRate:We}=this.props;let Re;Ce&&(Re=(0,T.A)(Ce));let we;Pe&&(we=(0,T.A)(Pe));let Je;Ce&&(Je=Re?O(Ce):void 0);let it;Pe&&(it=we?O(Pe):void 0);const et=(0,o.Yk)([B,Je,it]),lt=!!(Re&&Ce||we&&Pe);return t.createElement("div",{className:(0,n.A)(he,"c-multi-select"),"data-qa":this.fallbackDataQa,ref:this.inputContainerRef},t.createElement(_.A,{selectState:Y,setSelectState:S,size:G,width:X,maxHeight:w,placeholderText:J,isLoading:te,inputRef:L,focusOnMount:le,measurePopoverEventName:ve&&this.measurePopoverEventName,onSelectedItemsChange:Q,selectDataQa:this.fallbackDataQa,onKeyDown:Ae,onKeyUp:ae,classPrefix:_e,onFilterQueryChange:ee,onFilterQueryPaste:de,processOptions:Ie,onBlur:ce,onOptionsListClosedBlur:j,onOptionsListClose:N,expandOnFocus:b,ariaLabel:R,ariaLabelledBy:K,ariaDescribedBy:et,onTokenSelect:$,onInputFocused:Z,forceRealName:re,autoClogProps:Te,customizeTokenProps:pe,iconType:q,disableIdParsing:fe,isTokenEditable:se,ignoreSelectAllTokensAfterMount:ge,disableCloseOnTab:Oe,throttleForceRenderSelectContainer:Le,forceRenderSelectContainerThrottleRate:We}),t.createElement("div",{ref:this.additionalInfoContainerRef},Re&&Ce&&t.createElement(l.A,{errors:Ce}),we&&Pe&&Pe.map(nt=>{let{id:at,message:ze}=nt;return t.createElement(r.A,{key:at,id:at},ze)})),this.renderOptionsList(lt))}constructor(Y){super(Y),(0,p.v)(this,["renderOptionsList"]),this.inputContainerRef=t.createRef(),this.additionalInfoContainerRef=t.createRef();const{selectId:S}=Y.selectState;this.measurePopoverEventName=`measureSelectPopover--${S}`,this.fallbackDataQa=Y.selectDataQa||S}},"ControlledMultiSelect");C.displayName="ControlledMultiSelect",C.defaultProps={renderOption:W=>W.label,size:y.hu.MEDIUM,width:300,optionsRowHeight:y.bJ,maxHeight:void 0,maxOptionsListHeight:void 0,errors:[],hints:[],placeholderText:"",prefix:void 0,emptyStateMessage:void 0,isLoading:!1,resultsInPopover:!0,overlayClassName:void 0,offsetY:void 0,offsetX:void 0,enableLoadingState:!0,selectDataQa:void 0,focusOnMount:!1,onSelectedItemsChange:s.A,onKeyDown:s.A,onKeyUp:s.A,className:void 0,classPrefix:void 0,onFilterQueryChange:s.A,onFilterQueryPaste:s.A,processOptions:s.A,onBlur:s.A,onOptionsListClosedBlur:s.A,ariaLabel:void 0,ariaLabelledBy:void 0,ariaDescribedBy:void 0,expandOnFocus:!1,onTokenSelect:s.A,onInputFocused:s.A,forceRealName:void 0,onOptionsListOpen:s.A,onOptionsListClose:s.A,onScrollablePage:!1,onOptionSelected:s.A,shouldOptionBeSelected:s.A,shouldTokenizeOnComma:!1,shouldTokenizeOnSpace:!1,autoClogProps:void 0,dynamicHeight:!1,customizeTokenProps:{},iconType:void 0,disableIdParsing:!1,isTokenEditable:!1,ignoreSelectAllTokensAfterMount:!1,optionsListFooterBannerContent:void 0,throttleForceRenderSelectContainer:!1,forceRenderSelectContainerThrottleRate:void 0};let M=u(class extends t.Component{setSelectState(Y,S){this.setState(L=>{let w=Y();const{filter:J,options:G}=this.props;return w.filterQuery!==void 0&&w.filterQuery!==L.filterQuery&&J&&(w=J(G,w)),w},S)}render(){const{isDisabled:Y,isInvalid:S,isRequired:L,customControlledMultiSelectComponent:w,errors:J}=this.props,G=S||(0,T.A)(J),X=w??C,te=(0,a.A)(()=>({...this.state,isDisabled:Y,isInvalid:G,isRequired:L}));return t.createElement(X,E({},this.props,{selectState:te(),setSelectState:this.setSelectState,inputRef:this.inputRef}))}constructor(Y){super(Y),this.state={filterQuery:"",options:Y.options,isDisabled:Y.isDisabled,isExpanded:Y.isExpanded,isInvalid:Y.isInvalid,isRequired:Y.isRequired,selectId:Y.selectId,selectedOptions:Y.selectedOptions||[],shouldRefocusInputAfterSelection:!!Y.showConfirmDialog,selectedTokenIndexes:Y.selectedTokenIndexes||[]},this.inputRef=t.createRef(),(0,p.v)(this,["setSelectState"])}},"MultiSelect");M.displayName="MultiSelect",M.defaultProps={selectedOptions:null,isDisabled:!1,isExpanded:!1,isInvalid:!1,isRequired:!0,className:void 0,errors:[],hints:[],filter:I.k,selectId:`multi-select-${(0,o.r9)()}`,customControlledMultiSelectComponent:null,showConfirmDialog:void 0,autoClogProps:void 0,selectedTokenIndexes:[]};const D=M,P=(0,v.A)(C),k=(0,v.A)((0,m.A)(C)),x=(0,m.A)(C),F=(0,h.A)(C)},630868093:(z,A,e)=>{"use strict";e.d(A,{AM:()=>x,Ay:()=>P,Fw:()=>M,JJ:()=>C,mH:()=>F,uR:()=>k});var t=e(3134334389),n=e(5255740490),s=e(7715417323),a=e(3398586081),c=e(5617110048),o=e(3391133100),r=e(2660476100),l=e(3155323475),_=e(581574686),d=e(1162627626),i=e(4640201401),m=e(9573786552),h=e(2742076544),v=e(3239909785),y=e(7193040700),T=e(3650946343),I=e(7772530643),p=e(2322735331),g=e(6244014364);function E(){return E=Object.assign||function(W){for(var Y=1;Y<arguments.length;Y++){var S=arguments[Y];for(var L in S)Object.prototype.hasOwnProperty.call(S,L)&&(W[L]=S[L])}return W},E.apply(this,arguments)}u(E,"_extends");const f={onOptionSelected:{action:g.UiAction.SELECT}},O=u(W=>W.map(Y=>{let{id:S}=Y;return S}),"getIdsFromHintOrErrors");let C=u(class extends t.Component{maybeRenderOptionsList(){const{selectState:Y,setSelectState:S,renderOption:L,width:w,inputRef:J,ariaLabel:G,resultsInPopover:X,overlayClassName:te,offsetY:le,offsetX:ve,onOptionSelected:Q,className:Ae,classPrefix:ae,optionsRowHeight:he,onOpen:_e,emptyStateMessage:ee,minOptionsListWidth:de,maxOptionsListHeight:Ie,isLoading:ce,onOptionsListClose:j,onScrollablePage:N,enableLoadingState:b,autoClogProps:R,shouldAllowUnselectInSingleSelectMode:K,shouldOptionBeSelected:B,optionsListFooterBannerContent:$}=this.props;if(X&&(!this.props.inputRef||!this.props.inputRef.current))return null;const Z={key:`${Y.selectId}-popover`};te&&(Z.overlayClassName=te),le&&(Z.offsetY=le),ve&&(Z.offsetX=ve);const re=X?t.createElement(i.A,{selectState:Y,setSelectState:S,renderOption:L,width:w,inputRef:J,ariaLabel:G,onOptionSelected:Q,popoverProps:Z,measurePopoverEventName:this.measurePopoverEventName,className:Ae,classPrefix:ae,selectDataQa:this.fallbackDataQa,optionsRowHeight:he,onOpen:_e,emptyStateMessage:ee,minOptionsListWidth:de,maxListHeight:Ie,isLoading:ce,onOptionsListClose:j,onScrollablePage:N,enableLoadingState:b,autoClogProps:R,dropdownContainer:this.dropdownContainer,shouldAllowUnselectInSingleSelectMode:K,shouldOptionBeSelected:B,footerBannerContent:$}):t.createElement(d.A,{selectState:Y,setSelectState:S,renderOption:L,width:w,inputRef:J,ariaLabel:G,onOptionSelected:Q,classPrefix:ae,selectDataQa:this.fallbackDataQa,emptyStateMessage:ee,maxListHeight:Ie,optionsRowHeight:he,onOptionsListClose:j,enableLoadingState:b,shouldAllowUnselectInSingleSelectMode:K,shouldOptionBeSelected:B,footerBannerContent:$});return t.createElement(c.A,{elementType:g.ElementType.DROPDOWN,actionProps:f,autoClogProps:R},re)}render(){const{renderSelectedOption:Y,className:S,classPrefix:L,placeholderText:w,size:J,width:G,selectState:X,setSelectState:te,inputRef:le,focusOnMount:ve,showDropdownIcon:Q,isLoading:Ae,resultsInPopover:ae,isDisabled:he,isRequired:_e,onFocus:ee,onEsc:de,ariaLabelledBy:Ie,ariaDescribedBy:ce,inputIcon:j,maxCharacterLimit:N,onOptionsListClose:b,ariaLabel:R,expandOnClick:K,searchOnClick:B,autoClogProps:$,errors:Z,hints:re,expandOnFocus:Te,hideSelectedOptionOnDropdownOpen:Ce,retainPreviousSelectionOnDelete:Pe}=this.props,{isInvalid:fe}=X,pe=(0,T.A)(Z),q=(0,T.A)(re);let se;Z&&(se=pe?O(Z):void 0);let ge;re&&(ge=q?O(re):void 0);const Oe=(0,o.Yk)([ce,se,ge]),Le=fe||pe;return t.createElement("div",{className:(0,n.A)(S,"c-search-select"),"data-qa":this.fallbackDataQa},t.createElement(_.Ay,{selectState:{...X,isInvalid:Le,isRequired:_e,isDisabled:he},setSelectState:te,renderSelectedOption:Y,placeholderText:w,size:J,width:G,selectDataQa:this.fallbackDataQa,inputRef:le,focusOnMount:ve,showDropdownIcon:Q,isLoading:Ae,resultsInPopover:ae,measurePopoverEventName:ae?this.measurePopoverEventName:void 0,classPrefix:L,onBlur:this.onBlur,onFocus:ee,onEsc:de,"aria-label":R,ariaLabelledBy:Ie,ariaDescribedBy:Oe,icon:j,maxCharacterLimit:N,onOptionsListClose:b,expandOnClick:K,autoClogProps:$,searchOnClick:B,expandOnFocus:Te,hideSelectedOptionOnDropdownOpen:Ce,retainPreviousSelectionOnDelete:Pe}),pe&&Z&&t.createElement(l.A,{errors:Z}),q&&re&&re.map(We=>{let{id:Re,message:we,className:Je}=We;return we&&t.createElement(r.A,{key:Re,id:Re,className:Je},we)}),this.maybeRenderOptionsList())}constructor(Y){super(Y),this.onBlur=L=>{if(this.dropdownContainer){const w=this.dropdownContainer.current;if(w&&w.contains(L.relatedTarget)&&!this.props.isInvalidStateControlled){this.props.setSelectState(()=>({isInvalid:!1}));return}}this.props.onBlur&&this.props.onBlur(L)};const{selectId:S}=Y.selectState;this.measurePopoverEventName=`measureSelectPopover--${S}`,this.fallbackDataQa=Y.selectDataQa||S,this.dropdownContainer=t.createRef()}},"ControlledSearchSelect");C.displayName="ControlledSearchSelect",C.defaultProps={autoClogProps:void 0,className:void 0,classPrefix:void 0,renderOption:W=>W.label,renderSelectedOption:W=>W.label,resultsInPopover:!0,overlayClassName:void 0,offsetY:void 0,offsetX:void 0,size:y.hu.MEDIUM,width:360,optionsRowHeight:y.bJ,errors:[],hints:[],ariaLabel:null,ariaLabelledBy:void 0,ariaDescribedBy:void 0,placeholderText:void 0,onOptionSelected:s.A,selectDataQa:void 0,showDropdownIcon:!0,focusOnMount:!1,isLoading:!1,isDisabled:!1,isInvalid:!1,isRequired:!0,onBlur:s.A,onFocus:s.A,onEsc:s.A,onOpen:s.A,onOptionsListClose:s.A,emptyStateMessage:void 0,minOptionsListWidth:void 0,maxOptionsListHeight:void 0,inputIcon:void 0,maxCharacterLimit:void 0,onScrollablePage:!1,expandOnClick:!0,enableLoadingState:!0,searchOnClick:!1,shouldAllowUnselectInSingleSelectMode:!0,shouldOptionBeSelected:s.A,isInvalidStateControlled:!1};const M=(0,m.A)(C);let D=u(class extends t.Component{setSelectState(Y,S){this.setState(L=>{let w=Y();const{filter:J,options:G}=this.props;return w.filterQuery!==void 0&&w.filterQuery!==L.filterQuery&&J&&(w=J(G,w)),w},S)}render(){const{isRequired:Y,isInvalid:S,isDisabled:L,showConfirmDialog:w}=this.props,J=w?M:C,G=(0,a.A)(()=>({...this.state,isInvalid:S,isRequired:Y,isDisabled:L}));return t.createElement(J,E({},this.props,{selectState:G(),setSelectState:this.setSelectState,inputRef:this.inputRef}))}constructor(Y){super(Y),this.state={filterQuery:"",displayQuery:"",options:Y.options,selectId:Y.selectId,isExpanded:Y.isExpanded,isInvalid:Y.isInvalid,isDisabled:Y.isDisabled,selectedOption:Y.selectedOption},this.inputRef=this.props.inputRef?this.props.inputRef:t.createRef(),(0,p.v)(this,["setSelectState"])}},"SearchSelect");D.displayName="SearchSelect",D.defaultProps={autoClogProps:void 0,isDisabled:!1,isExpanded:!1,isInvalid:!1,isRequired:!0,errors:[],hints:[],filter:I.k,onOptionSelected:s.A,selectId:`search-select-${(0,o.r9)()}`,selectedOption:void 0,showConfirmDialog:void 0,inputIcon:void 0,maxCharacterLimit:void 0,inputRef:void 0};const P=D,k=(0,v.A)(C),x=(0,v.A)((0,m.A)(C)),F=(0,h.A)(C)},2727264612:(z,A,e)=>{"use strict";e.d(A,{A:()=>r});var t=e(3134334389),n=e(6044196829),s=e(8683010724),a=e(735940183);const c=new a.Ay("form_inputs"),o=u(l=>{let{onCtaClick:_,errorCopy:d,ctaCopy:i}=l;return t.createElement("div",{className:"c-multi_select_helper_text"},t.createElement("span",{className:"c-multi_select_helper_text__icon_container c-multi_select_helper_text__icon_container--error"},t.createElement(s.A,{name:"warning",inline:!0})),t.createElement("span",null,d||c.t("Selected entries contain errors."),t.createElement(n.A,{onClick:_,className:"margin_left_25"},i||c.t("Delete all errors"))))},"MultiSelectErrorText");o.displayName="MultiSelectErrorText";const r=o},868047630:(z,A,e)=>{"use strict";e.d(A,{A:()=>W});var t=e(3134334389),n=e(5255740490),s=e(8628145494),a=e(6696292586),c=e(3398586081),o=e(5950652755),r=e(7715417323),l=e(6422693406),_=e(5617110048),d=e(9797002255),i=e(4244379358),m=e(6308822),h=e(5797272849),v=e(3391133100),y=e(1610251172),T=e(7193040700),I=e(561151542),p=e(2322735331),g=e(6244014364),E=e(571104883),f=e(5356156303);function O(){return O=Object.assign||function(Y){for(var S=1;S<arguments.length;S++){var L=arguments[S];for(var w in L)Object.prototype.hasOwnProperty.call(L,w)&&(Y[w]=L[w])}return Y},O.apply(this,arguments)}u(O,"_extends");const C={onChange:{action:g.UiAction.ENTER_TEXT}},M={onClick:{action:g.UiAction.CLICK}},D=new Array(95).fill("").map((Y,S)=>String.fromCharCode(S+32)),P=u(Y=>t.createElement("span",O({className:"c-multi_select_input__space"},Y),"\xA0"),"makeSpace"),k=1e3,x={leading:!0,trailing:!1};let F=u(class extends t.PureComponent{componentDidMount(){this.inputHeight=this.getInputHeight(),this.props.focusOnMount&&this.focus(),this.attachMutationObserver()}componentDidUpdate(S){var L;const w=S.selectState,{selectState:J,onTokenSelect:G,onSelectedItemsChange:X,setSelectState:te,hasKeyboardFocus:le,isTokenEditable:ve}=this.props,{selectedOptions:Q,isExpanded:Ae,isDisabled:ae}=J,he=this.getSelectedTokenIndexes();if(this.doesMutationObserverExist()||(this.attachMutationObserver(),this.focus()),this.props.focusOnMount&&S.focusOnMount!==this.props.focusOnMount&&this.focus(),((L=J.filterQuery)===null||L===void 0?void 0:L.length)&&J.filterQuery!==w.filterQuery&&this.caretPosInFilterQuery!==-1&&this.updateCaretPosInFilterQuery(),this.possiblyRepositionOptionsList(w),this.haveSelectedTokens()&&!(0,f.Ay)(w.selectedTokenIndexes,he)&&Q&&(he==null||he.forEach(ce=>{G&&G(Q[ce])}),Ae&&te(()=>({isExpanded:!1})),this.scrollSelectedTokenIntoView()),w.isDisabled&&!ae&&this.moveCursorAndScrollToFilterQuery(),!(0,f.Ay)(w.selectedOptions,Q,3)){if(X&&typeof Q<"u"){if(ve){var de;const{isCurrentlyEditingToken:ce}=this.state;if((((de=w.selectedOptions)===null||de===void 0?void 0:de.length)||0)<Q.length){if(ce){const j=Q.pop();j&&Q.splice(this.state.editTokenIndex,0,j),this.setTokenState(!1,0)}}else ce&&Q.length===0&&this.setTokenState(!1,0)}X(Q)}this.scrollFilterQueryIntoView()}this.inputHeight=this.getInputHeight(),le&&!S.hasKeyboardFocus&&(0,s.A)(J.activeRowIndex)&&!this.allTokensAreSelected()&&this.selectAllTokens()}componentWillUnmount(){this.doesMutationObserverExist()&&this.removeMutationObserver(),this.updateQueryTimer&&clearTimeout(this.updateQueryTimer),this.forceRenderSelectContainerThrottled.cancel&&this.forceRenderSelectContainerThrottled.cancel()}onBlur(S){const{selectState:L,setSelectState:w,hideFilterQueryOnBlur:J,onBlur:G,onOptionsListClosedBlur:X}=this.props,{selectedOptions:te,filterQuery:le,isExpanded:ve}=L,Q=J&&le&&!ve;this.setState(()=>({focused:!1})),this.deselectAllTokens(),Q&&w(()=>({filterQuery:""})),this.caretPosInFilterQuery=-1,this.mouseDownOnToken=!1,G&&G(S,te),!ve&&X&&X()}onChange(){this.state.composing||this.onFilterQueryChanged()}setTokenState(S,L){this.props.isTokenEditable&&this.setState(()=>({isCurrentlyEditingToken:S,editTokenIndex:L}))}onFilterQueryChanged(){const{setSelectState:S,selectState:L,onFilterQueryChange:w}=this.props,J=this.filterQueryRef.current,G=J==null?void 0:J.textContent,X=L.filterQuery!==G;if(this.backspaceWasPressed&&!X){this.backspaceWasPressed=!1;return}const te=G?G.length>0:!1;this.saveCaretPosInFilterQuery(),S(()=>({filterQuery:G,isExpanded:te})),w&&w(G)}onFocus(S){this.setState(()=>({focused:!0}));const{expandOnFocus:L,onInputFocused:w,setSelectState:J,onFocus:G}=this.props;L&&J(()=>({isExpanded:!0})),this.mouseDownOnToken||this.moveCursorAndScrollToFilterQuery(),w&&w(S),this.mouseDownOnToken=!1,G&&G(S)}onCaretSelectionChange(){this.isCaretOutSideFilterQuery()?this.updateCaretPosInFilterQuery():this.saveCaretPosInFilterQuery()}onRangeSelectionChange(){var S;const L=(S=this.props.windowRef.deref())===null||S===void 0?void 0:S.getSelection(),w=L==null?void 0:L.getRangeAt(0),J=this.getTokensAsArray(),{selectState:G}=this.props,{filterQuery:X}=G,te=J.reduce((_e,ee,de)=>L!=null&&L.containsNode(ee)?[..._e,de]:_e,[]),le=te.length>0;if(!X&&!le&&!(L!=null&&L.isCollapsed)){this.ignoreSelectionChange=!0,L==null||L.collapseToEnd();return}if(this.isEntireFilterQuerySelected()&&!le){var ve;this.ignoreSelectionChange=!0,w==null||w.setStartBefore((ve=this.filterQueryRef.current)===null||ve===void 0?void 0:ve.firstChild);return}const Q=te[0],Ae=te[te.length-1],ae=J[Q],he=J[Ae];if(!X&&le){this.ignoreSelectionChange=!0,w==null||w.setStartBefore(ae),this.ignoreSelectionChange=!0,w==null||w.setEndAfter(he),this.setSelectedTokenIndexes(te);return}this.isEntireFilterQuerySelected()&&le&&(this.ignoreSelectionChange=!0,w==null||w.setStartBefore(ae),this.setSelectedTokenIndexes(te))}onSelectionChange(){var S;if(this.ignoreSelectionChange){this.ignoreSelectionChange=!1;return}const L=(S=this.props.windowRef.deref())===null||S===void 0?void 0:S.getSelection();let w=null;if(L){const{type:J}=L;w=J}w==="Caret"&&this.onCaretSelectionChange(),w==="Range"&&this.onRangeSelectionChange()}onKeyDown(S){if(this.state.composing)return;const{key:L,ctrlKey:w,metaKey:J,altKey:G,shiftKey:X}=S,{selectState:te,onKeyDown:le}=this.props,ve=(0,E.cX)()?J:w,Q=L==="Delete"&&((0,E.cX)()&&G||(0,E.uF)()&&ve);(L==="Backspace"||Q)&&this.onBackspace(S),!Q&&L==="Delete"&&this.onDelete(S),L==="Escape"&&this.onEscape(S),(L==="Home"||J&&!X&&L==="ArrowLeft"||J&&!X&&L==="ArrowUp")&&this.onHome(S),(L==="End"||J&&!X&&L==="ArrowRight"||J&&!X&&L==="ArrowDown")&&this.onEnd(S),!J&&L==="ArrowLeft"&&!this.leftArrowKeyWasPressed&&(this.leftArrowKeyWasPressed=!0,this.onLeftArrow(S)),!J&&L==="ArrowRight"&&this.onRightArrow(S),L==="Tab"&&this.onTab(S),(L==="ArrowUp"||L==="ArrowDown")&&S.preventDefault(),L==="Enter"&&S.preventDefault(),!ve&&D.includes(L)&&this.onCharacterKey(),le&&le(S,{hasActiveRowIndex:(0,a.A)(te.activeRowIndex),isExpanded:!!te.isExpanded})}onHome(S){S.preventDefault();const{selectState:L}=this.props,{selectedOptions:w}=L;w!=null&&w.length?this.setSelectedTokenIndexes([0],{initiator:S.type}):this.moveCursorToFilterQuery({cursorAtStart:!0})}onEnd(S){S.preventDefault();const{selectState:L}=this.props,{selectedTokenIndexes:w}=L;w!=null&&w.length&&this.deselectAllTokens(),this.moveCursorAndScrollToFilterQuery()}onKeyUp(S){const{selectState:L,onKeyUp:w}=this.props,J=this.getSelectedTokenIndexes(),G=this.getTokensAsArray();this.shouldMoveCursorToFilterQuery&&(this.moveCursorToFilterQuery({cursorAtStart:!0}),this.shouldMoveCursorToFilterQuery=!1),this.updateSelectionOnKeyUp&&(J!=null&&J.length)&&(this.selectTextInNode(G[J[0]]),this.updateSelectionOnKeyUp=!1),this.leftArrowKeyWasPressed&&(this.leftArrowKeyWasPressed=!1),w&&w(S,{hasActiveRowIndex:(0,a.A)(L.activeRowIndex)})}onInputContainerMouseDown(S){S.preventDefault(),this.haveSelectedTokens()&&this.deselectAllTokens(),this.state.focused?this.moveCursorAndScrollToFilterQuery():this.focus()}onPaste(S){if(!S||!S.clipboardData)return;const{onFilterQueryPaste:L}=this.props;L&&L(S)}onCharacterKey(){if(!this.haveSelectedTokens())return;const{setSelectState:S}=this.props,{selectState:L}=this.props,{filterQuery:w,selectedOptions:J}=L,G=this.getSelectedTokenIndexes(),X=J==null?void 0:J.filter((ve,Q)=>(G==null?void 0:G.indexOf(Q))===-1),te=this.getSelectedFilterQueryText(),le=w==null?void 0:w.replace(te,"");S(()=>({selectedOptions:X,selectedTokenIndexes:[],filterQuery:le})),this.moveCursorToFilterQuery()}onBackspace(S){const{setSelectState:L}=this.props,{selectState:w,isTokenEditable:J}=this.props,{filterQuery:G}=w;if(this.ignoreSelectionChange=!0,this.allTokensAreSelected()&&(this.isEntireFilterQuerySelected()||!G)){S.preventDefault(),L(()=>({selectedOptions:[],selectedTokenIndexes:[],filterQuery:"",isExpanded:!1}));return}if(J&&(G==null?void 0:G.length)===1){S.preventDefault(),L(()=>({filterQuery:"",isExpanded:!1})),this.setTokenState(!1,0),this.moveCursorToFilterQuery();return}if(this.isEntireFilterQuerySelected()){S.preventDefault(),L(()=>({filterQuery:"",isExpanded:!1}));return}const te=this.getTokensAsArray().length,le=this.getSelectedTokenIndexes(),ve=this.isCaretAtStartOfFilterQuery();if(this.backspaceWasPressed=!0,ve&&te===0){S.preventDefault();return}if(!ve&&!this.haveSelectedTokens()&&G)return;if(S.preventDefault(),!this.haveSelectedTokens()){this.setSelectedTokenIndexes([te-1],{initiator:S.type});return}le==null||le.forEach(he=>{this.removeToken(he,"backspaceKey")});const Q=le&&le[0],Ae=Q===0;let ae=null;Q&&(ae=Ae?[0]:[Q-1]),ae!=null&&ae.length&&this.setSelectedTokenIndexes(ae,{initiator:S.type})}onDelete(S){const{setSelectState:L}=this.props;if(this.ignoreSelectionChange=!0,this.isEntireFilterQuerySelected()){S.preventDefault(),L(()=>({filterQuery:"",isExpanded:!1}));return}const J=this.getTokensAsArray().length,G=this.getSelectedTokenIndexes();if(J===0||!this.haveSelectedTokens()||(S.preventDefault(),G==null||G.forEach(ve=>{this.removeToken(ve,"deleteKey")}),!(G!=null&&G.length)))return;const te=G[G.length-1]===J-1,le=(G==null?void 0:G.length)===J;(te||le)&&(this.moveCursorToFilterQuery({cursorAtStart:!0}),this.deselectAllTokens())}onEscape(S){const{selectState:L,setSelectState:w,onOptionsListClose:J}=this.props;L.isExpanded&&(S.stopPropagation(),J&&J(),w(()=>({isExpanded:!1})))}onLeftArrow(S){var L;const J=this.getTokensAsArray().length,G=this.getSelectedTokenIndexes(),X=(G==null?void 0:G.length)&&G[0],te=(L=this.props.windowRef.deref())===null||L===void 0?void 0:L.getSelection();let le=null,ve=null;if(te){const{type:ee,anchorOffset:de}=te;le=ee,ve=de}const Q=le==="Caret",Ae=le==="Range";if(S.shiftKey&&Ae&&this.isRangeSelectionOfFilterQueryComplete(ve)){S.preventDefault();return}const ae=Q&&this.isCaretAtStartOfFilterQuery();if(J===0&&ae){S.preventDefault();return}if(J===0)return;if(this.props.isTokenEditable&&this.state.isCurrentlyEditingToken&&ae){S.preventDefault();return}if(this.allTokensAreSelected()){this.setSelectedTokenIndexes([0],{initiator:S.type});return}if(!this.haveSelectedTokens()&&ae){this.setSelectedTokenIndexes([J-1],{initiator:S.type});return}if(Ae&&this.haveSelectedTokens()&&X===0){S.preventDefault();return}this.haveSelectedTokens()&&typeof X=="number"&&this.setSelectedTokenIndexes([X-1],{initiator:S.type})}onRightArrow(S){var L;const w=(L=this.props.windowRef.deref())===null||L===void 0?void 0:L.getSelection(),J=(w==null?void 0:w.type)==="Range",X=this.getTokensAsArray().length,te=this.getSelectedTokenIndexes(),le=(te==null?void 0:te.length)&&te[0];if(typeof le!="number")return;if(!(J&&this.haveSelectedTokens()&&le<X-1)&&this.haveSelectedTokens()||this.allTokensAreSelected()){S.preventDefault(),this.shouldMoveCursorToFilterQuery=!0,this.deselectAllTokens();return}this.haveSelectedTokens()&&typeof le=="number"&&this.setSelectedTokenIndexes([le+1],{initiator:S.type})}onTab(S){const{shiftKey:L}=S,{expandOnFocus:w,selectState:J,onOptionsListClose:G,setSelectState:X,disableCloseOnTab:te}=this.props;te||(G&&G(),(L||w&&J.activeRowIndex===null)&&X(()=>({isExpanded:!1})))}onTokenMouseDown(S,L){const{focused:w,isCurrentlyEditingToken:J}=this.state,{selectState:G,isTokenEditable:X}=this.props;if(G.isDisabled)return;if(S.preventDefault(),this.mouseDownOnToken=!0,S.stopPropagation(),X&&!J){this.onTokenEdit(L);return}w||this.focus();const te=this.getTokensAsArray();this.selectTextInNode(te[L]);const le=this.getSelectedTokenIndexes();L!==(le==null?void 0:le[0])&&this.setSelectedTokenIndexes([L])}onTokenEdit(S){const{selectState:L,setSelectState:w,processOptions:J}=this.props,{selectedOptions:G}=L;this.setTokenState(!0,S);let X="";G&&G[S]&&(typeof G[S].label=="string"&&G[S].label!==G[S].value?X=G[S].label:X=G[S].value),this.removeToken(S,"editToken"),this.updateFilterQueryValue(X),J&&J([],X).then(te=>{w(()=>({isExpanded:!0,options:te,filterQuery:X}))})}onTokenRemoveMouseDown(S,L){const{focused:w,isCurrentlyEditingToken:J,editTokenIndex:G}=this.state;S.preventDefault(),this.mouseDownOnToken=!0,S.stopPropagation(),w||this.focus(),this.moveCursorToFilterQuery(),this.props.isTokenEditable&&J&&L<G&&this.setTokenState(!0,G-1),this.removeToken(L,"iconClick")}onFilterQueryMouseDown(S){var L;this.state.focused&&(!((L=this.filterQueryRef.current)===null||L===void 0)&&L.textContent)&&S.stopPropagation(),this.haveSelectedTokens()&&this.deselectAllTokens()}updateFilterQueryValue(S){const{onFilterQueryChange:L}=this.props;this.updateQueryTimer=setTimeout(()=>{L&&L(S),this.moveCursorToFilterQuery(),clearTimeout(this.updateQueryTimer)})}onPlaceholderMouseDown(){this.focus()}onSelectAll(S){var L;const{setSelectState:w}=this.props;S.preventDefault(),w(()=>({selectedTokenIndexes:[],isExpanded:!1}));const J=(L=this.filterQueryRef)===null||L===void 0?void 0:L.current;J!=null&&J.textContent&&this.selectTextInNode(J)}onCompositionStart(){this.setState(()=>({composing:!0}))}onCompositionEnd(){this.setState(()=>({composing:!1})),this.onFilterQueryChanged()}onCut(){const{selectState:S}=this.props,{filterQuery:L,selectedOptions:w}=S,J=this.getSelectedTokenIndexes(),G=w==null?void 0:w.filter((le,ve)=>(J==null?void 0:J.indexOf(ve))===-1),X=this.getSelectedFilterQueryText(),te=L==null?void 0:L.replace(X,"");this.selectStateAfterMutation={selectedTokenIndexes:[],selectedOptions:G,filterQuery:te,isExpanded:!1}}onNodeAdded(S){const{nodeName:L}=S;(L==="B"||L==="I")&&(this.removeMutationObserver(),this.runForceRenderSelectContainer())}onNodeRemoved(S){const{setSelectState:L}=this.props;if(this.selectStateAfterMutation){this.caretPosInFilterQuery=0,this.removeMutationObserver(),this.runForceRenderSelectContainer(!0),L(()=>this.selectStateAfterMutation),this.selectStateAfterMutation=null;return}S===this.filterQueryRef.current&&(this.removeMutationObserver(),this.runForceRenderSelectContainer(!0))}onMutation(S){S.forEach(L=>{L.addedNodes.forEach(this.onNodeAdded),L.removedNodes.forEach(this.onNodeRemoved)})}getAriaPlaceholderText(){const{selectState:S,placeholderText:L}=this.props,{filterQuery:w,selectedOptions:J}=S;if(!w&&!(J&&J.length>0))return L}getAriaActiveDescendant(){const{selectState:S}=this.props,{selectId:L,activeRowIndex:w}=S;return(0,a.A)(w)?(0,v.Es)(L,`option_${w}`):void 0}getInputHeight(){const{inputRef:S}=this.props,L=S==null?void 0:S.current;return L?L.offsetHeight:null}getTokensAsArray(){var S,L;const w=(S=this.props.inputRef)===null||S===void 0||(L=S.current)===null||L===void 0?void 0:L.querySelectorAll(".c-token");return Array.prototype.slice.call(w)}getSelectedFilterQueryText(){var S;const{selectState:L}=this.props,{filterQuery:w}=L;if((w==null?void 0:w.length)===0)return"";const J=(S=this.props.windowRef.deref())===null||S===void 0?void 0:S.getSelection(),G=J==null?void 0:J.toString();if(!(J==null?void 0:J.containsNode(this.filterQueryRef.current,!0)))return"";const te=G==null?void 0:G.split(`
`);return te!=null&&te.length?te[te.length-1].trim():""}setSelectedTokenIndexes(S){let{initiator:L}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};L==="keydown"&&(this.updateSelectionOnKeyUp=!0,this.ignoreSelectionChange=!0);const{setSelectState:w}=this.props;w(()=>({selectedTokenIndexes:S}))}getSelectedTokenIndexes(){const{selectState:S}=this.props,{selectedTokenIndexes:L}=S;return L||[]}allTokensAreSelected(){const S=this.getSelectedTokenIndexes(),L=this.getTokensAsArray();return S!=null&&S.length?S.length>0&&S.length===L.length:!1}attachMutationObserver(){var S;if(this.mutationObserver=new MutationObserver(this.onMutation),!((S=this.props.inputRef)===null||S===void 0)&&S.current){var L;this.mutationObserver.observe((L=this.props.inputRef)===null||L===void 0?void 0:L.current,{subtree:!0,childList:!0})}}deselectAllTokens(){this.setSelectedTokenIndexes([])}determineCaretPosInFilterQuery(){const{selectState:S}=this.props,{filterQuery:L}=S;if(this.caretPosInFilterQuery===-1||!L)return 0;const w=L==null?void 0:L.length;return typeof this.caretPosInFilterQuery=="number"&&this.caretPosInFilterQuery>w?w:this.caretPosInFilterQuery}doesMutationObserverExist(){return!!this.mutationObserver}removeMutationObserver(){var S;(S=this.mutationObserver)===null||S===void 0||S.disconnect(),this.mutationObserver=null}focus(){var S;const L=(S=this.props.inputRef)===null||S===void 0?void 0:S.current;L==null||L.focus()}forceRenderSelectContainer(){this.setState(()=>({selectContainerKey:Date.now()}))}runForceRenderSelectContainer(S){const{isLoading:L,throttleForceRenderSelectContainer:w}=this.props;w?(S&&this.forceRenderSelectContainerThrottled.cancel&&this.forceRenderSelectContainerThrottled.cancel(),L||this.forceRenderSelectContainerThrottled()):this.forceRenderSelectContainer()}haveSelectedTokens(){var S;return!!(!((S=this.getSelectedTokenIndexes())===null||S===void 0)&&S.length)}isCaretAtStartOfFilterQuery(){var S;if(this.isCaretOutSideFilterQuery())return!1;const{selectState:L}=this.props,{filterQuery:w}=L;if(!w)return!0;const J=(S=this.props.windowRef.deref())===null||S===void 0?void 0:S.getSelection();let G=null;if(J){const{anchorOffset:X}=J;G=X}return G===0}isCaretOutSideFilterQuery(){var S,L;const w=(S=this.props.windowRef.deref())===null||S===void 0?void 0:S.getSelection();let J=null;if(w){const{anchorNode:G}=w;J=G}return!(!((L=this.filterQueryRef.current)===null||L===void 0)&&L.contains(J))}isRangeSelectionOfFilterQueryComplete(S){const L=this.getSelectedFilterQueryText();if(!L)return!1;const{selectState:w}=this.props,J=w.filterQuery;return!J||!S?!1:L.substr(0,S)===(J==null?void 0:J.substr(0,S))}isEntireFilterQuerySelected(){const{selectState:S}=this.props,L=this.getSelectedFilterQueryText();return!!L&&L===S.filterQuery}moveCursorAndScrollToFilterQuery(){this.scrollFilterQueryIntoView(),this.moveCursorToFilterQuery()}moveCursorToFilterQuery(){let{cursorAtStart:S}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{cursorAtStart:!1};var L,w,J,G;const X=document.createRange(),te=(L=this.props.windowRef.deref())===null||L===void 0?void 0:L.getSelection();te==null||te.removeAllRanges();const le=(w=this.filterQueryRef)===null||w===void 0?void 0:w.current,ve=(le==null?void 0:le.firstChild)||le,Q=S?0:(G=le==null||(J=le.textContent)===null||J===void 0?void 0:J.trim())===null||G===void 0?void 0:G.length;ve!==null&&typeof Q=="number"&&X.setStart(ve,Q),X.collapse(!0),te==null||te.addRange(X)}possiblyRepositionOptionsList(S){if(!this.measurePopoverEvent)return;const{selectState:L}=this.props,w=L.isExpanded&&!S.isExpanded,J=this.getInputHeight(),G=this.inputHeight!==J;if(w||G){var X;(X=this.props.windowRef.deref())===null||X===void 0||X.dispatchEvent(this.measurePopoverEvent)}}removeToken(S,L){const{selectState:w,setSelectState:J,isTokenEditable:G}=this.props,{selectedOptions:X,pendingQueries:te,filterQuery:le}=w,ve=te?te.length:0,Q=X&&X[S]&&X[S].queryId,ae=Q&&ve?te==null?void 0:te.filter(he=>{let{queryId:_e}=he;return _e!==Q}):te;J(()=>({selectedOptions:X==null?void 0:X.filter((he,_e)=>_e!==S),selectedTokenIndexes:[],removalInitiator:L,removedItemIndex:S,pendingQueries:ae})),G&&this.state.isCurrentlyEditingToken&&this.updateFilterQueryValue(le)}saveCaretPosInFilterQuery(){var S;const L=(S=this.props.windowRef.deref())===null||S===void 0?void 0:S.getSelection();this.caretPosInFilterQuery=L==null?void 0:L.anchorOffset}scrollFilterQueryIntoView(){const S=this.filterQueryRef.current;S&&S!=null&&S.scrollIntoView&&(S==null||S.scrollIntoView({block:"nearest"}))}scrollSelectedTokenIntoView(){const S=this.getSelectedTokenIndexes();if(!this.haveSelectedTokens())return;const L=this.getTokensAsArray();if(!(S!=null&&S.length))return;const w=S[S.length-1],J=L[w];J&&J.scrollIntoView&&J.scrollIntoView({block:"nearest"})}selectAllTokens(){var S;if(this.state.ignoreSelectAllTokensAfterMount){this.setState(()=>({ignoreSelectAllTokensAfterMount:!1}));return}const L=this.getTokensAsArray();if(L.length===0)return;const w=L[0],J=L[L.length-1],G=(S=this.props.windowRef.deref())===null||S===void 0?void 0:S.getSelection(),X=document.createRange();G==null||G.removeAllRanges(),X.setStartBefore(w),X.setEndAfter(J),G==null||G.addRange(X)}selectTextInNode(S){var L;if(!S)return;const w=(L=this.props.windowRef.deref())===null||L===void 0?void 0:L.getSelection(),J=document.createRange();this.ignoreSelectionChange=!0,w==null||w.removeAllRanges();const G=(0,E.cX)()?S:S.querySelector(".c-token__content");J.selectNode(G),this.ignoreSelectionChange=!0,w==null||w.addRange(J)}updateCaretPosInFilterQuery(){var S,L;const w=(S=this.filterQueryRef)===null||S===void 0?void 0:S.current;if(!w)return;const J=document.createRange(),G=(L=this.props.windowRef.deref())===null||L===void 0?void 0:L.getSelection();G==null||G.removeAllRanges();const X=this.determineCaretPosInFilterQuery();typeof X=="number"&&J.setStart((w==null?void 0:w.firstChild)||w,X),J.collapse(!0),G==null||G.addRange(J)}renderFilterQuery(){const{selectState:S,isTokenEditable:L,size:w}=this.props,{filterQuery:J,isDisabled:G}=S,{isCurrentlyEditingToken:X,editTokenIndex:te}=this.state,le=G?void 0:this.onFilterQueryMouseDown,ve=(0,n.A)({"c-multi_select_input__filter_query":!0,[`c-multi_select_input__${w}_filter_query--edit`]:L&&X});return t.createElement("span",{className:ve,ref:this.filterQueryRef,onMouseDown:le,key:te},J)}renderInput(){const{selectState:S,selectDataQa:L,inputRef:w,ariaLabelledBy:J,ariaLabel:G,autoClogProps:X,iconType:te,isTokenEditable:le}=this.props,{selectId:ve,isDisabled:Q,isExpanded:Ae,isInvalid:ae}=S,he=Q?void 0:0,_e=Q?void 0:this.getAriaActiveDescendant(),ee=!Q,de=ee,Ie=Q?void 0:this.onFocus,ce=Q?void 0:this.onBlur,j=Q?void 0:this.onChange,N=Q?void 0:this.onPaste,b=Q?void 0:this.onKeyDown,R=Q?void 0:this.onKeyUp,K=Q?void 0:this.onSelectionChange,B=Q?void 0:this.onCut,$=Q?void 0:this.onCompositionStart,Z=Q?void 0:this.onCompositionEnd,re=(0,n.A)({"c-multi_select_input__input":!0,"c-multi_select_input__input--with-icon":!!te}),Te=t.createElement("div",{role:"combobox","aria-disabled":Q,"aria-autocomplete":"list","aria-expanded":Ae,"aria-controls":(0,v.Es)(ve,"listbox"),"aria-activedescendant":_e,"aria-labelledby":J,"aria-label":G,"aria-placeholder":this.getAriaPlaceholderText(),"aria-invalid":ae,id:ve,className:re,tabIndex:he,contentEditable:ee,suppressContentEditableWarning:de,"data-qa":L?`${L}-input`:void 0,ref:w,onFocus:Ie,onBlur:ce,onInput:j,onCompositionStart:$,onCompositionEnd:Z,onPaste:N,onKeyDown:b,onKeyUp:R,onSelect:K,onCut:B,"aria-multiline":!1},P(),le&&this.state.isCurrentlyEditingToken?this.renderEditableTokens():t.createElement(t.Fragment,null,this.renderTokens(),this.renderFilterQuery()),P({contentEditable:!1}));return X?t.createElement(_.A,{autoClogProps:X,actionProps:C,elementType:g.ElementType.INPUT},Te):Te}renderLoadingIndicator(){const{isLoading:S,size:L}=this.props;return S?t.createElement(m.A,{className:"c-multi_select_input__spinner",color:"blue",size:L===T.hu.LARGE?T.hu.LARGE:T.hu.MEDIUM}):null}renderPlaceholder(){const{selectState:S,placeholderText:L,iconType:w}=this.props,{filterQuery:J,selectedOptions:G,isDisabled:X}=S;if(this.state.composing||J||G&&G.length>0)return null;const te=X?void 0:this.onPlaceholderMouseDown,le=(0,n.A)({"c-multi_select_input__placeholder":!0,"c-multi_select_input__placeholder--with-icon":!!w});return t.createElement("div",{"aria-hidden":"true",className:le,onMouseDown:te},L)}renderToken(S,L){let{icon:w,svgIcon:J,value:G,label:X,hoverText:te,isLoading:le,isError:ve,isMemberError:Q,isTeamError:Ae,isUnknown:ae,emailTeam:he}=S;const{forceRealName:_e,size:ee,selectState:de,customizeTokenProps:Ie,disableIdParsing:ce}=this.props,j=this.getSelectedTokenIndexes(),N=(j==null?void 0:j.indexOf(L))!==-1,{isDisabled:b,restrictedSelectedTokenIndexes:R,disabledSelectedTokenIndexes:K,invalidSelectedTokenIndexes:B}=de,$=!!R&&(R==null?void 0:R.indexOf(L))!==-1,Z=!!K&&(K==null?void 0:K.indexOf(L))!==-1,re=!!B&&(B==null?void 0:B.indexOf(L))!==-1,Te=b||Z,Ce=Te?void 0:pe=>this.onTokenMouseDown(pe,L),Pe=Te?void 0:()=>this.renderTokenRemoveIcon(L),fe=ee;return t.createElement(t.Fragment,null,t.createElement(I.A,O({"data-qa":"multi_select_token_wrapper",className:"c-multi_select_input__token"},Ce?{onMouseDown:Ce}:{},{isDisabled:Te,entityId:G,label:X,hoverText:te,isLoading:le,isError:ve,isMemberError:Q,isTeamError:Ae,isUnknown:ae},ee?{size:fe}:{},{isSelected:N},Pe?{renderIcon:Pe}:{},{forceRealName:_e,icon:w,svgIcon:J,tabIndex:-1,contentEditable:!1},Ie,{disableIdParsing:ce},he?{emailTeam:he}:{},{isRestricted:$,isInvalid:re})),"\xA0")}renderTokenRemoveIcon(S){return t.createElement(_.A,{actionProps:M,elementType:g.ElementType.BUTTON},t.createElement(y.A,{type:"times-medium",className:"c-multi_select_input__remove_token",id:"multi_select_input__remove_token","data-qa":"token_remove_icon","aria-hidden":"true",onMouseDown:(0,c.A)(L=>{this.onTokenRemoveMouseDown(L,S)})}))}renderTokens(){const{selectedOptions:S}=this.props.selectState;return S==null?void 0:S.map((L,w)=>t.createElement(t.Fragment,{key:L.key||L.value},this.renderToken(L,w)))}renderEditableTokens(){const{isCurrentlyEditingToken:S,editTokenIndex:L}=this.state,w=this.renderTokens()||[],J=this.renderFilterQuery();return S?w.splice(L,0,J):w==null||w.push(J),w}renderIcon(){const{iconType:S}=this.props;return S?t.createElement(y.A,{type:S,inline:!0}):null}render(){const{maxHeight:S,width:L,selectState:w,classPrefix:J,size:G}=this.props,{isDisabled:X,isInvalid:te,selectedOptions:le}=w,ve=le==null?void 0:le.length,Q=(0,n.A)("c-multi_select_input",{"c-multi_select_input--disabled":X,"c-multi_select_input--focused":this.state.focused&&!X,"c-multi_select_input--large":G===T.hu.LARGE,"c-multi_select_input--invalid":te,"c-multi_select_input--initial":!ve,[`${J}__multi_select_input`]:J,[h.E.large]:G===T.hu.LARGE}),Ae=X?void 0:this.onInputContainerMouseDown;return t.createElement("div",{className:Q,style:{width:L,maxHeight:S},onMouseDown:Ae,key:this.state.selectContainerKey},this.renderIcon(),this.renderInput(),this.renderLoadingIndicator(),this.renderPlaceholder())}constructor(S){super(S),(0,p.v)(this,["onFocus","onBlur","onChange","onPaste","onKeyDown","onKeyUp","onInputContainerMouseDown","onFilterQueryMouseDown","onPlaceholderMouseDown","onSelectionChange","onCut","onMutation","onNodeRemoved","onNodeAdded","onCompositionStart","onCompositionEnd"]);var L;this.state={composing:!1,focused:!1,selectContainerKey:Date.now(),isCurrentlyEditingToken:!1,editTokenIndex:0,ignoreSelectAllTokensAfterMount:(L=S.ignoreSelectAllTokensAfterMount)!==null&&L!==void 0?L:!1},this.caretPosInFilterQuery=-1,this.ignoreSelectionChange=!1,this.updateSelectionOnKeyUp=!1,S.measurePopoverEventName&&(this.measurePopoverEvent=new Event(S.measurePopoverEventName));var w;this.forceRenderSelectContainerThrottled=(0,o.A)(this.forceRenderSelectContainer,(w=S.forceRenderSelectContainerThrottleRate)!==null&&w!==void 0?w:k,x),this.filterQueryRef=t.createRef()}},"MultiSelectInput");F.displayName="MultiSelectInput",F.defaultProps={inputRef:t.createRef(),maxHeight:96,placeholderText:void 0,onKeyDown:r.A,onKeyUp:r.A,size:T.hu.MEDIUM,width:300,isLoading:!1,classPrefix:void 0,selectDataQa:void 0,focusOnMount:!1,measurePopoverEventName:null,onSelectedItemsChange:r.A,onFilterQueryChange:r.A,onFilterQueryPaste:r.A,ariaLabelledBy:void 0,ariaLabel:void 0,expandOnFocus:!1,onTokenSelect:r.A,onInputFocused:r.A,forceRealName:void 0,onOptionsListClose:r.A,processOptions:Y=>l.S.resolve(Y),isTokenEditable:!1,hideFilterQueryOnBlur:!0,autoClogProps:void 0,customizeTokenProps:{},iconType:void 0,disableIdParsing:!1,hasKeyboardFocus:!1,onFocus:r.A,onBlur:r.A,onOptionsListClosedBlur:r.A,ignoreSelectAllTokensAfterMount:!1,throttleForceRenderSelectContainer:!1,forceRenderSelectContainerThrottleRate:k};const W=(0,i.A)((0,d.A)(F))},8274994582:(z,A,e)=>{"use strict";e.d(A,{A:()=>o});var t=e(3134334389),n=e(6308822),s=e(735940183);const a=new s.Ay("form_inputs"),o=u(r=>{let{count:l,clientTheme:_,spinnerSize:d="large"}=r;return t.createElement("div",{className:"c-multi_select_helper_text c-multi_select_helper_text--loading"},t.createElement("span",{className:"c-multi_select_helper_text__icon_container"},t.createElement(n.A,{color:_==="dark"?"white":"blue",size:d,inline:!0})),a.t("Loading {count, plural, =1 {# entry} other {# entries}}",{count:l}))},"MultiSelectLoadingText")},320706952:(z,A,e)=>{"use strict";e.d(A,{A:()=>o});var t=e(3134334389),n=e(8683010724),s=e(735940183);const a=new s.Ay("form_inputs"),o=u(r=>{let{count:l}=r;return t.createElement("div",{className:"c-multi_select_helper_text"},t.createElement("span",{className:"c-multi_select_helper_text__icon_container c-multi_select_helper_text__icon_container--unknown"},t.createElement(n.A,{name:"emoji-missing",variation:"filled",inline:!0})),a.t("{count, plural, =1 {# entry has} other {# entries have}} multiple matches. Select entry to resolve.",{count:l}))},"MultiSelectUnknownText")},581574686:(z,A,e)=>{"use strict";e.d(A,{Ay:()=>C});var t=e(3134334389),n=e(5255740490),s=e(6696292586),a=e(7715417323),c=e(1641606663),o=e(6308822),r=e(3391133100),l=e(2219904496),_=e(5166368300),d=e(7193040700),i=e(8683010724),m=e(2322735331),h=e(735940183),v=e(7640408795);function y(){return y=Object.assign||function(M){for(var D=1;D<arguments.length;D++){var P=arguments[D];for(var k in P)Object.prototype.hasOwnProperty.call(P,k)&&(M[k]=P[k])}return M},y.apply(this,arguments)}u(y,"_extends");const T=new h.Ay("select"),I=1e4,p={ArrowLeft:!0,ArrowRight:!0},g={ArrowUp:!0,ArrowDown:!0},E={Backspace:!0,Delete:!0};let f=u(class extends t.Component{componentDidMount(){const{inputRef:D,focusOnMount:P,expandOnFocus:k}=this.props,x=D&&D.current;P&&(!this.state.hasFocus&&x&&x.focus(),k&&this.showOptionsList())}componentDidUpdate(D,P){const{inputRef:k,selectState:x,focusOnMount:F}=this.props,{selectedOption:W}=x,{selectState:Y}=D,{selectedOption:S}=Y,L=k&&k.current,{hasFocus:w,focusedViaMouse:J}=this.state;W&&w&&!J&&(W!==S||!P.hasFocus)&&setTimeout(()=>{L==null||L.select()},50),F&&D.focusOnMount!==F&&(this.state.hasFocus||L==null||L.focus())}componentWillUnmount(){this.blurTimeout&&clearTimeout(this.blurTimeout)}onClick(D){const{inputRef:P,selectState:k,onClick:x,expandOnClick:F,searchOnClick:W}=this.props,{isDisabled:Y,isExpanded:S,selectedOption:L}=k;if(Y)return;const w=P&&P.current;this.state.hasFocus||(this.setState(()=>({focusedViaMouse:!0})),w==null||w.focus()),(F||L)&&!S&&this.showOptionsList({searchOnClick:W}),x&&x(D)}onBlur(D){const{onBlur:P}=this.props;this.setState(()=>({hasFocus:!1,focusedViaMouse:!1,cursorVisible:!1}),()=>{P&&P(D)})}onFocus(D){const{onFocus:P}=this.props;this.setState(()=>({hasFocus:!0}),()=>{P&&P(D)})}onInputChanged(D){const{selectState:P,setSelectState:k,expandOnClick:x,retainPreviousSelectionOnDelete:F}=this.props,{isExpanded:W,selectedOption:Y}=P;if(this.backspaceOrDeletePressed&&D.length===0&&Y){k(()=>({filterQuery:D,displayQuery:D,...F?{}:{selectedOption:null}}));return}W?!x&&!D&&k(()=>({isExpanded:!1})):this.showOptionsList(),k(()=>({filterQuery:D,displayQuery:D}))}onKeyPressedEnter(D){this.props.selectState.isExpanded?D.preventDefault():(this.showOptionsList(),D.stopPropagation())}onKeyPressedEscape(D){const{selectState:P,setSelectState:k,resultsInPopover:x,onEsc:F,onOptionsListClose:W}=this.props;P.isExpanded&&x&&(D.stopPropagation(),F&&F(),W&&W(),k(()=>({isExpanded:!1})))}onKeyPressedTab(){const{setSelectState:D,onOptionsListClose:P,selectState:k}=this.props;P&&P();const{activeRowIndex:x,initialActiveOption:F}=k;typeof x!="number"&&!F&&D(()=>({isExpanded:!1}))}onUpOrDownPressed(D){D.preventDefault(),this.props.selectState.isExpanded||(this.showOptionsList(),D.stopPropagation())}onWrapperKeyDown(D){const{key:P}=D;if(g[P]){this.onUpOrDownPressed(D);return}if(P==="Enter"){this.onKeyPressedEnter(D);return}if(P==="Escape"){this.onKeyPressedEscape(D);return}P==="Tab"&&this.onKeyPressedTab()}onInputKeyDown(D){const{key:P}=D,k=E[P],x=p[P],F=k||x||(0,v.A)(D);this.setState(()=>({cursorVisible:F})),this.backspaceOrDeletePressed=k}maybeRenderIconOrLoading(){const{showDropdownIcon:D,isLoading:P,size:k,expandOnClick:x}=this.props;return P?t.createElement(o.A,{className:"c-select_input__spinner",color:"blue",size:k===d.hu.LARGE?"large":"medium"}):!D||!x?null:t.createElement("span",{className:"c-select_input__icon"},t.createElement(i.A,{name:"caret-down",size:"20"}))}showOptionsList(){let D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{searchOnClick:P}=D;this.updateOptionsListPosition(),this.props.setSelectState(()=>({isExpanded:!0,searchOnClick:P}))}updateOptionsListPosition(){const{selectState:D}=this.props,{isExpanded:P}=D;if(!P&&this.measurePopoverEvent){var k;(k=this.context.windowRef.deref())===null||k===void 0||k.dispatchEvent(this.measurePopoverEvent)}}renderInputContent(){const{selectState:D,renderSelectedOption:P,classPrefix:k,selectDataQa:x,hideSelectedOptionOnDropdownOpen:F}=this.props,{isExpanded:W,selectedOption:Y}=D;if(this.state.cursorVisible||!Y||W&&(F||D.filterQuery))return null;const S=(0,n.A)("c-select_input__content",{[`${k}__select_input_content`]:k});return t.createElement("div",{className:S,"data-qa":x?`${x}-input-content`:null},t.createElement("span",{className:"c-select_input__content_text"},P&&P(Y)))}renderTextInput(){const{selectDataQa:D,inputRef:P,classPrefix:k,ariaLabelledBy:x,ariaDescribedBy:F,icon:W,maxCharacterLimit:Y,size:S,selectState:L,autoClogProps:w,hideSelectedOptionOnDropdownOpen:J}=this.props,{activeRowIndex:G,filterQuery:X,isDisabled:te,isExpanded:le,isInvalid:ve,isRequired:Q,selectedOption:Ae,selectId:ae=""}=L;let he;X||!le&&Ae||Ae&&le&&!J?he=null:he=this.props.placeholderText||T.t("Please select an option");const _e=le&&(0,s.A)(G)?(0,r.Es)(ae,`option_${G}`):null,ee=!this.state.cursorVisible&&Ae&&!le,de=(0,n.A)("c-select_input",{"c-select_input--offscreen":ee,"c-select_input--invalid":ve,[`${k}__select_input`]:k}),Ie=(0,r.Yk)([F,(0,r.Es)(ae,"initial-focus")]),j=!this.state.focusedViaMouse&&this.state.hasFocus&&!this.state.cursorVisible&&J?X||Ae&&Ae.label:X,N={spellCheck:!1,className:de,id:ae,name:ae,"aria-activedescendant":_e,"aria-autocomplete":"list","aria-expanded":le,"aria-owns":(0,r.Es)(ae,"listbox"),"aria-required":Q,"aria-label":this.props["aria-label"],"aria-labelledby":x,"aria-describedby":Ie,isInvalid:ve,autoComplete:"off",isDisabled:te,onChange:this.onInputChanged,placeholder:he,value:j||"","data-qa":D?`${D}-input`:null,onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onInputKeyDown,role:"combobox",autoClogProps:w};return W||Y?t.createElement(l.A,y({},N,{icon:W,size:S,maxCharacterLimit:Y,showError:!1,type:"text",inputRef:P,isInvalid:ve})):t.createElement(_.A,y({},N,{ref:P}))}render(){const{icon:D,size:P,selectDataQa:k,width:x,classPrefix:F,showDropdownIcon:W,selectState:Y}=this.props,{isInvalid:S}=Y,L=(0,n.A)("c-select_input__wrapper",{[`c-select_input--${P}`]:P,"c-select_input--with_icon_right":W,"c-select_input--with_icon_left":!!D,"c-select_input--invalid":S,[`${F}__select_input_wrapper`]:F}),w=(0,n.A)("c-select_input__input_container",{[`${F}__select_input_container`]:F});return t.createElement("div",{role:"presentation",className:L,style:{width:x},onClick:this.onClick,onKeyDown:this.onWrapperKeyDown,"data-qa":k?`${k}-wrapper`:null},t.createElement("div",{className:w},this.renderTextInput(),this.renderInputContent()),t.createElement("div",{className:"c-select_input__icon_container"},this.maybeRenderIconOrLoading()))}constructor(D){super(D),(0,m.v)(this,["onClick","onFocus","onBlur","onUpOrDownPressed","onKeyPressedEnter","onKeyPressedEscape","onKeyPressedTab","onWrapperKeyDown","onInputKeyDown","onInputChanged","showOptionsList","updateOptionsListPosition"]),this.selectInputRef=t.createRef(),this.backspaceOrDeletePressed=!1,this.measurePopoverEvent=void 0,this.blurTimeout=void 0,this.state={hasFocus:!1,focusedViaMouse:!1,cursorVisible:!1},D.measurePopoverEventName&&(this.measurePopoverEvent=new Event(D.measurePopoverEventName))}},"SelectInput");f.displayName="SelectInput",f.defaultProps={autoClogProps:void 0,inputRef:null,onClick:a.A,placeholderText:void 0,width:360,selectDataQa:void 0,showDropdownIcon:!0,icon:void 0,maxCharacterLimit:void 0,focusOnMount:!1,isLoading:!1,classPrefix:void 0,onFocus:a.A,onBlur:a.A,onEsc:a.A,resultsInPopover:!0,ariaLabelledBy:void 0,ariaDescribedBy:void 0,onOptionsListClose:a.A,expandOnClick:!0,searchOnClick:!1,expandOnFocus:!0,hideSelectedOptionOnDropdownOpen:!0},f.contextType=c.M;const O={SelectInput:f},C=f},1162627626:(z,A,e)=>{"use strict";e.d(A,{A:()=>R});var t=e(3134334389),n=e(5255740490),s=e(2053254856),a=e.n(s),c=e(45851552),o=e(1699044291),r=e(7715417323),l=e(6696292586),_=e(2003990933),d=e(3478664464),i=e(166097325),m=e(3398586081),h=e(9268023148),v=e(9636077426),y=e(6882609392),T=e(3652828077),I=e(1641606663),p=e(6308822),g=e(3391133100),E=e(7193040700),f=e(1398359918),O=e(8786006583),C=e(3821598679);function M(K){let B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return(0,f.A)(K,(Z,re)=>{if(Z.type==="divider")return{type:"divider"};if(Z.options){const{options:Te,label:Ce,...Pe}=Z,fe=`${Z.label.toLowerCase()}${E.Sx}${(0,C.A)()}`,pe=[{type:"heading",label:Z.label,group:fe,optionsCount:Z.options&&Z.options.length||0,extras:Pe}].concat(Z.options.map((q,se)=>{const ge={type:"option",option:q,optgroup:fe};return se===0&&(ge.isFirstChild=!0),se===Z.options.length-1&&(ge.isLastChild=!0),ge}));if(B){if(K[re-1]&&K[re-1].value&&!K[re-1].options&&pe.unshift({type:"divider"}),(0,O.A)(K)===Z)return pe;pe.push({type:"divider"})}return pe}return{type:"option",option:Z}})}u(M,"formatOptions");var D=e(2322735331),P;(function(K){K[K.ELEMENT=1]="ELEMENT",K[K.ATTRIBUTE=2]="ATTRIBUTE",K[K.TEXT=3]="TEXT",K[K.CDATA_SECTION=4]="CDATA_SECTION",K[K.ENTITY_REFERENCE=5]="ENTITY_REFERENCE",K[K.ENTITY=6]="ENTITY",K[K.PROCESSING_INSTRUCTION=7]="PROCESSING_INSTRUCTION",K[K.COMMENT=8]="COMMENT",K[K.DOCUMENT=9]="DOCUMENT",K[K.DOCUMENT_TYPE=10]="DOCUMENT_TYPE",K[K.DOCUMENT_FRAGMENT=11]="DOCUMENT_FRAGMENT",K[K.NOTATION=12]="NOTATION"})(P||(P={}));const k=new Set(["INPUT","TEXTAREA","SELECT"]),x=new Set([...k,"BUTTON"]),F="http://www.w3.org/1999/xhtml",W="http://www.w3.org/2000/svg";function Y(K){return(K==null?void 0:K.nodeType)===P.TEXT}u(Y,"isTextNode");function S(K){return(K==null?void 0:K.nodeType)===P.ELEMENT}u(S,"isElement");function L(K){return S(K)&&K.namespaceURI===F}u(L,"isHtmlElement");function w(K){return S(K)&&K.namespaceURI===W}u(w,"isSvgElement");function J(K){return L(K)||w(K)}u(J,"isHtmlOrSvgElement");function G(K){return L(K)||w(K)}u(G,"isElementCssInlineStyle");function X(K){return le(K,"a")}u(X,"isAnchorElement");function te(K){return L(K)&&x.has(K.tagName)}u(te,"isInteractiveElement");function le(K,B){return L(K)&&K.localName===B}u(le,"isHtmlElementWithTagName");function ve(K){return Y(K)?K:null}u(ve,"asTextNode");function Q(K){return S(K)?K:null}u(Q,"asElement");function Ae(K){return L(K)?K:null}u(Ae,"asHtmlElement");function ae(K,B){const $=K;return $.hasAttribute&&$.hasAttribute(B)}u(ae,"hasAttribute");function he(K,B){return ae(K,`data-${B}`)}u(he,"hasData");var _e=e(735940183),ee=e(2355676689),de=e(6979898962),Ie=e(5356156303);function ce(){return ce=Object.assign||function(K){for(var B=1;B<arguments.length;B++){var $=arguments[B];for(var Z in $)Object.prototype.hasOwnProperty.call($,Z)&&(K[Z]=$[Z])}return K},ce.apply(this,arguments)}u(ce,"_extends");const j=new _e.Ay("select"),N=a()("esc");let b=u(class extends de.B{getCurrentActiveElement(){var B,$;return($=(B=this.context.windowRef.deref())===null||B===void 0?void 0:B.document.activeElement)!==null&&$!==void 0?$:null}componentDidUpdate(B){var $;const{selectState:Z,setSelectState:re,shouldIncludeActiveOption:Te=!1,dynamicHeight:Ce=!1,optionsShallowEqualComparisonDepth:Pe=4,shouldRerenderOnOptionChange:fe=!1}=this.props,{filterQuery:pe,options:q,initialActiveOption:se}=Z,ge=!(0,Ie.Ay)(B.selectState.options,q,Pe),Oe=pe!==B.selectState.filterQuery;if(ge||Oe){const Re=typeof se<"u"?this.getInitialActiveRowIndex():this.getFirstSelectableRowIndex();re(()=>({activeRowIndex:Re,...Te?{activeOption:this.getOptionFromList(Re)}:null}));const we=Re||Re===0;this.list.current&&we&&(this.list.current.forceUpdateGrid(),this.list.current.scrollToRow(Re))}if(ge&&!Oe&&fe){var Le;(Le=this.list.current)===null||Le===void 0||Le.recomputeRowHeights()}if(Ce&&(Z==null?void 0:Z.options)!==(($=B.selectState)===null||$===void 0?void 0:$.options)){var We;(We=this.cellMeasurerCache)===null||We===void 0||We.clearAll(),this.list.current&&this.list.current.recomputeRowHeights()}this.removeAriaAttrsFromGridNode()}clearDynamicRowHeight(B){var $;($=this.cellMeasurerCache)===null||$===void 0||$.clear(B,0),this.list.current&&this.list.current.recomputeRowHeights(B)}getInitialActiveRowIndex(){const{selectState:B}=this.props,{initialActiveOption:$}=B;if(!$)return null;const Z=(0,c.A)(this.getOptionsList(),["option.value",$.value]);return Z>=0?Z:null}getFirstSelectableRowIndex(){const{selectState:B,multiSelectMode:$=!1,customOptionCompare:Z,shouldAlwaysHaveActiveRow:re=!1}=this.props,{filterQuery:Te}=B,Ce=this.getOptionsList();let Pe=null;if((Te||re)&&Ce.length){const fe=(0,c.A)(Ce,pe=>pe.type!=="heading"&&pe.type!=="divider"&&!this.isOptionSelected(B,pe.option,$,Z),0);fe!==-1&&(Pe=fe)}return Pe}componentDidMount(){this.keyCommands=this.initKeyCommands();const{focusOnMount:B=!1,selectState:$,setSelectState:Z,shouldIncludeActiveOption:re=!1,multiSelectMode:Te=!1}=this.props,{selectedOption:Ce,selectType:Pe}=$;Pe===E.US.BASIC&&B&&this.open();let fe=null;if(!Te&&Ce){const pe=(0,c.A)(this.getOptionsList(),["option.value",Ce.value]);pe!==-1&&(fe=pe)}else fe=this.getFirstSelectableRowIndex();Z(()=>({activeRowIndex:fe,...re?{activeOption:this.getOptionFromList(fe)}:null})),this.list.current&&typeof fe=="number"&&this.list.current.scrollToRow(fe),this.removeAriaAttrsFromGridNode()}componentWillUnmount(){const{focusOnMount:B=!1,preventScroll:$=!1}=this.props,{selectType:Z}=this.props.selectState;this.keyCommands&&this.keyCommands.reset(),B&&Z===E.US.BASIC&&this.previousFocus&&this.getCurrentActiveElement()!==this.previousFocus&&this.previousFocus.focus({preventScroll:$})}open(){const{focusOnMount:B=!1,selectState:$}=this.props,{selectType:Z}=$;!B&&Z!==E.US.BASIC||(this.previousFocus=this.getCurrentActiveElement(),this.listBody&&this.listBody.current&&this.listBody.current.focus())}close(B){N===B.keyCode&&this.onKeyPressedEsc(B);const{focusOnMount:$=!1,preventScroll:Z=!1}=this.props,{selectType:re}=this.props.selectState;!$&&re!==E.US.BASIC||this.previousFocus&&this.getCurrentActiveElement()!==this.previousFocus&&this.previousFocus.focus({preventScroll:Z})}onKeyPressedDown(B){if(this.isMouseMoveEnabled=!1,!this.shouldInterceptKeyEvent(B))return;const{selectState:$,setSelectState:Z,shouldIncludeActiveOption:re=!1}=this.props,{isExpanded:Te,activeRowIndex:Ce}=$,Pe=this.getNextActiveRowIndex(Ce);Te&&B.preventDefault(),Z(()=>{var fe;return{activeRowIndex:Pe,...re?{activeOption:this.getOptionFromList(Pe)}:null,displayQuery:(fe=this.getOptionFromList(Pe))===null||fe===void 0?void 0:fe.value}}),this.debouncedEnableMouseMove(),this.list.current&&(this.list.current.forceUpdateGrid(),Pe===1&&this.isFirstItemUnselectable()?this.list.current.scrollToRow(0):this.list.current.scrollToRow(Pe))}onKeyPressedUp(B){if(this.isMouseMoveEnabled=!1,!this.shouldInterceptKeyEvent(B))return;const{selectState:$,setSelectState:Z,shouldIncludeActiveOption:re=!1}=this.props,{isExpanded:Te,activeRowIndex:Ce}=$,Pe=this.getPreviousActiveRowIndex(Ce);if(Te&&B.preventDefault(),Z(()=>{var q;return{activeRowIndex:Pe,...re?{activeOption:this.getOptionFromList(Pe)}:null,displayQuery:(q=this.getOptionFromList(Pe))===null||q===void 0?void 0:q.value}}),this.debouncedEnableMouseMove(),this.list.current){this.list.current.forceUpdateGrid();const q=this.getOptionsList();if(Pe){var fe,pe;if(((fe=q[Pe])===null||fe===void 0||(pe=fe.option)===null||pe===void 0?void 0:pe.height)!==0)this.list.current.scrollToRow(Pe);else{const se=(0,o.A)(q.slice(0,Pe)).findIndex(ge=>{var Oe;return(ge==null||(Oe=ge.option)===null||Oe===void 0?void 0:Oe.height)!==0});this.list.current.scrollToRow(Pe-se-1)}}}}onKeyPressedEsc(B){const{shouldIncludeActiveOption:$=!1}=this.props;if(!this.props.selectState.isExpanded||!this.shouldInterceptKeyEvent(B))return;B.preventDefault();const{onOptionsListClose:Z=r.A}=this.props;Z&&Z(),this.props.setSelectState(()=>({isExpanded:!1,activeRowIndex:null,...$?{activeOption:null}:null,filterQuery:"",displayQuery:""}))}onMouseEnteredOption(B){const{shouldIncludeActiveOption:$=!1}=this.props;this.isMouseMoveEnabled&&(this.props.setSelectState(()=>({activeRowIndex:B,...$?{activeOption:this.getOptionFromList(B)}:null})),this.list.current&&this.list.current.forceUpdateGrid())}onMouseLeftOption(){const{shouldAlwaysHaveActiveRow:B=!1}=this.props;!this.isMouseMoveEnabled||B||this.clearActive()}onKeyPressedEnter(B){if(this.props.shouldDisableKeyPressedEnter||!this.shouldInterceptKeyEvent(B))return;B.preventDefault();const{activeRowIndex:$,initialActiveOption:Z}=this.props.selectState,re=this.getOptionsList();let Te;typeof $=="number"&&(Te=re[$]&&re[$].option||re[$]),Te=Te||Z,!(Te&&(Te.isDisabled||Te.nonInteractive))&&(this.onOptionSelected(Te),this.close(B))}onKeyPressedShiftTab(B){if(!this.shouldInterceptKeyEvent(B))return;const{onKeyPressedShiftTab:$=r.A}=this.props;$&&$!==r.A&&$(B)}onKeyPressedTab(B){const{selectState:$,disableSelectOnTab:Z=!1}=this.props;if(Z||!this.shouldInterceptKeyEvent(B)||!$.isExpanded)return;const{onKeyPressedTab:re=r.A}=this.props;if(re&&re!==r.A){re(B);return}const{activeRowIndex:Te,initialActiveOption:Ce}=$,Pe=this.getOptionsList();let fe;typeof Te=="number"&&(fe=Pe[Te]&&Pe[Te].option||Pe[Te]),fe=fe||Ce,fe&&B.preventDefault(),!(fe&&(fe.isDisabled||fe.nonInteractive))&&this.onOptionSelected(fe)}onOptionClicked(B){this.onOptionSelected(B,!0)}onScroll(B){const{onScroll:$=r.A}=this.props;$&&$(B)}getClassName(B,$){const{unstyled:Z=!1}=this.props;return Z&&$?(0,n.A)($):(0,n.A)($,B)}getRowHeight(B){var $;const{optionsRowHeight:Z=E.bJ,headingRowHeight:re=null,dividerRowHeight:Te=E.r3}=this.props;return B.option&&(0,l.A)(B.option.height)?Number(B.option.height):B.type&&B.type==="divider"?Te:B.type==="heading"&&(0,l.A)(($=B.extras)===null||$===void 0?void 0:$.height)?Number(B.extras.height):B.type&&B.type==="heading"&&re!==null?re:Z}clearActive(){const{shouldIncludeActiveOption:B=!1}=this.props;this.props.setSelectState(()=>({activeRowIndex:null,...B?{activeOption:null}:null})),this.list.current&&this.list.current.forceUpdateGrid()}focusNode(B){B&&this.getCurrentActiveElement()!==B&&B.focus()}getOptionFromList(B){const $=this.getOptionsList();return(0,_.A)($,`[${B}].option`,null)}getOptionsList(){const{multiSelectMode:B=!1,selectState:$,includeDividers:Z=!0}=this.props,{options:re,isRequired:Te,selectedOption:Ce,filterQuery:Pe,minQueryLength:fe}=$;let pe=[];return fe&&fe>0&&Ce&&!Pe&&(pe=[Ce]),re&&(!B&&Ce&&!Te?pe=[E.az,...re]:pe=re),pe=[...this.formatOptions(pe,Z)],pe}enableMouseMove(){this.isMouseMoveEnabled=!0}getDataQaTag(B,$){const{selectDataQa:Z=void 0,selectState:re}=this.props,{isRequired:Te}=re,Ce=B.value?B.value:B.label;let Pe="";typeof Ce=="string"&&(Pe=Ce.replace(/[^\w\s]/g,"").replace(/\s/g,"_").toLowerCase());const fe=Te?$:$-1;return B.value?`${Z}_option_${fe}`:`${Z}_option_header_${Pe}`}isFirstItemUnselectable(){var B,$,Z;const re=this.getOptionsList();return((B=re[0])===null||B===void 0?void 0:B.type)==="heading"||(($=re[0])===null||$===void 0||(Z=$.option)===null||Z===void 0?void 0:Z.nonInteractive)}getNextActiveRowIndex(B){const $=this.getOptionsList(),Z=this.isFirstItemUnselectable();if(B===null&&!Z)return 0;if(B===null&&Z)return 1;let re=null;return typeof B=="number"&&(re=(0,c.A)($,Te=>{var Ce;return Te.type!=="heading"&&Te.type!=="divider"&&!(!(Te==null||(Ce=Te.option)===null||Ce===void 0)&&Ce.nonInteractive)},B+1)),typeof re=="number"&&$[re]?re:Z?1:0}getPreviousActiveRowIndex(B){const $=this.getOptionsList();let Z,re;return typeof B=="number"&&(Z=(0,o.A)($.slice(0,B)).findIndex(Te=>{var Ce;return Te.type!=="heading"&&Te.type!=="divider"&&!(!(Te==null||(Ce=Te.option)===null||Ce===void 0)&&Ce.nonInteractive)}),re=B-Z-1),$&&!$.length?null:re===B?$.length-1:typeof re=="number"&&typeof B=="number"&&$[re]&&B>0?re:$.length-1}initKeyCommands(){var B;const{shouldTokenizeOnComma:$,shouldTokenizeOnSpace:Z}=this.props,re=new y.A((B=this.context.windowRef.deref())===null||B===void 0?void 0:B.document),Te=["enter"];return $&&Te.push("comma"),Z&&Te.push("space"),re.bindAll([{keys:["down"],handler:this.onKeyPressedDown},{keys:Te,handler:this.onKeyPressedEnter,filter:Ce=>Ce.code.toLowerCase()==="comma"&&Ce.key!==","},{keys:["up"],handler:this.onKeyPressedUp},{keys:["tab"],handler:this.onKeyPressedTab},{keys:["shift+tab"],handler:this.onKeyPressedShiftTab}]),re}handleClear(){const{selectState:B,setSelectState:$,onOptionSelected:Z=r.A,multiSelectMode:re=!1,onMultiSelectClear:Te=void 0}=this.props,{selectedOption:Ce,selectedOptions:Pe}=B;let fe=!1;Ce?($(()=>({selectedOption:null,isExpanded:!1,filterQuery:"",displayQuery:""}),()=>{Z&&Z({value:null})}),fe=!0):re&&Pe&&Pe.length&&($(()=>({selectedOptions:[],isExpanded:!1,filterQuery:"",displayQuery:""}),()=>{Te&&Te()}),fe=!0),this.list.current&&fe&&this.list.current.forceUpdateGrid()}onOptionSelected(B){let $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const{onOptionSelected:Z=r.A,onOptionUnselected:re=r.A,selectState:Te,setSelectState:Ce,multiSelectMode:Pe=!1,inputRef:fe,customOptionCompare:pe,shouldIncludeActiveOption:q=!1,shouldOptionBeSelected:se,shouldAllowUnselectInMultiSelectMode:ge=!1,shouldAllowUnselectInSingleSelectMode:Oe=!0,stayExpandedAfterSelection:Le=!1}=this.props;if(B&&!B.isDisabled&&!B.nonInteractive){if(se&&se(B)===!1){Ce(()=>({activeRowIndex:null,filterQuery:"",isExpanded:!1}),()=>{Z(B)});return}if(B.value===E.yk)this.handleClear();else if(Pe){const{selectedOptions:We,shouldRefocusInputAfterSelection:Re}=Te;if(!this.isOptionSelected(Te,B,Pe,pe)&&We)Ce(()=>({selectedOptions:[...We,B],activeRowIndex:null,...q?{activeOption:null}:null,filterQuery:"",isExpanded:Le}),()=>{Z&&Z(B)});else if(ge){const Je=(0,d.A)(We,[B],(it,et)=>it.value===et.value);Ce(()=>({selectedOptions:Je,activeRowIndex:null,...q?{activeOption:null}:null,filterQuery:"",isExpanded:Le}),()=>{re&&re(B)})}!Re&&!B.fromUnknown&&fe&&fe.current&&fe.current.focus()}else{const We={isExpanded:!1,filterQuery:"",displayQuery:"",selectedOption:Oe?null:Te.selectedOption};!(0,i.A)(Te.selectedOption,B)&&(We.selectedOption=B),Ce(()=>({...We}),()=>{Z&&Z(B,$)}),Te.shouldRefocusInputAfterSelection&&fe&&fe.current&&fe.current.focus()}}}getArialabelForItem(B){var $,Z,re,Te;const{isFirstChild:Ce,isLastChild:Pe,optgroup:fe}=B;if(!fe)return null;const pe=j.t("First item in group {group}, {value}",{group:fe&&fe.split(E.Sx).slice(0,-1).join("-"),value:typeof(($=B.option)===null||$===void 0?void 0:$.label)=="string"?(Z=B.option)===null||Z===void 0?void 0:Z.label:""}),q=j.t("Last item in group {group}, {value}",{group:fe&&fe.split(E.Sx).slice(0,-1).join("-"),value:typeof((re=B.option)===null||re===void 0?void 0:re.label)=="string"?(Te=B.option)===null||Te===void 0?void 0:Te.label:""});return Ce?pe:Pe?q:null}getEmptyStateMessage(){const{emptyStateMessage:B,selectState:$}=this.props,{filterQuery:Z,minQueryLength:re}=$;if(B)return B(Z);if(re){if(!Z)return j.t("Type to search\u2026");if(Z.length<re)return j.t("Keep typing\u2026")}return j.t("No items")}shouldInterceptKeyEvent(B){return!B.target||!S(B.target)?!1:!!(ae(B.target,"aria-autocomplete")||ae(B.target,"aria-haspopup")||this.listBody.current&&this.listBody.current.contains(B.target))}removeAriaAttrsFromGridNode(){const B=this.listBody.current,$=B&&B.querySelector(".ReactVirtualized__Grid");$&&($.removeAttribute("aria-label"),$.removeAttribute("aria-readonly"))}renderEmptyState(){const{unstyled:B=!1,width:$,isLoading:Z=!1,selectDataQa:re=void 0,includeWrapper:Te=!0}=this.props;if(Z)return t.createElement(t.Fragment,null);const Ce=this.getEmptyStateMessage();if(Ce===null)return t.createElement(t.Fragment,null);const Pe=B||!Te?+$:+$-E.$_;return t.createElement("div",{"data-qa":re?`${re}-empty-state`:null,className:this.getClassName("c-select_options_list__empty_state"),style:{width:Pe}},t.createElement("div",{role:"alert",className:this.getClassName("c-select_options_list__option c-select_options_list__option--empty-state")},Ce))}getContainerStyle(){return{position:"relative",overflow:"visible"}}getListStyle(B){return{padding:B?E.Hy:void 0,boxSizing:"content-box"}}renderList(){const{maxListHeight:B,width:$,includePadding:Z,unstyled:re=!1,useSlackScrollbar:Te,dynamicHeight:Ce=!1,forceMaxHeight:Pe,includeWrapper:fe=!0,classPrefix:pe=void 0}=this.props,q=this.getOptionsList(),se=B||E.CK,ge=q.map(we=>this.getRowHeight(we)||0).reduce((we,Je)=>we+Je,0),Oe=Pe||ge>=se?se:ge,Le=re||!fe?+$:+$-E.$_,We=(0,n.A)("c-select_options_list__virtual_list",{"c-select_options_list__virtual_list--slack_scrollbar":Te,[`${pe}__virtual_list`]:!!pe}),Re=Ce&&this.cellMeasurerCache?this.cellMeasurerCache.rowHeight:we=>{let{index:Je}=we;return this.getRowHeight(q[Je])};return this.cellMeasurerCache?t.createElement(T.O,{className:We,containerRole:"presentation",containerStyle:this.getContainerStyle(),style:this.getListStyle(Z),height:Oe,deferredMeasurementCache:this.cellMeasurerCache,noRowsRenderer:this.renderEmptyState,onScroll:this.debouncedOnScroll,ref:this.list,rowCount:q?q.length:0,rowHeight:Re,rowRenderer:this.renderRow,tabIndex:null,role:"presentation","no-bootstrap":1,width:Le}):t.createElement(T.O,{className:We,containerRole:"presentation",containerStyle:this.getContainerStyle(),style:this.getListStyle(Z),height:Oe,noRowsRenderer:this.renderEmptyState,onScroll:this.debouncedOnScroll,ref:this.list,rowCount:q?q.length:0,rowHeight:Re,rowRenderer:this.renderRow,tabIndex:null,role:"presentation","no-bootstrap":1,width:Le})}renderListBody(){const{enableLoadingState:B=!0,isLoading:$=!1}=this.props;if($&&B)return this.renderLoadingState();const Z=this.getOptionsList();return!Z||Z&&!Z.length?this.renderEmptyState():this.renderList()}renderLoadingState(){const{width:B}=this.props,$=j.t("Loading results\u2026");return t.createElement("div",{className:this.getClassName("c-select_options_list__loading_state"),style:{width:B}},t.createElement(p.A,{size:"medium",inline:!0}),t.createElement("div",null,$))}renderRow(B){let{index:$,key:Z,style:re,parent:Te}=B;var Ce;const{classPrefix:Pe=void 0,selectState:fe,multiSelectMode:pe=!1,customOptionCompare:q,unstyled:se=!1,dynamicHeight:ge=!1,hideOptionsListCheckbox:Oe=!1}=this.props,{selectId:Le}=fe,We=this.getOptionsList();let Re;We[$].option?Re=We[$].option:Re=We[$];const{isPlaceholder:we}=Re,{activeRowIndex:Je}=fe,{selectedOption:it,selectedOptions:et}=fe;let lt;typeof Je=="number"&&(lt=this.isOptionActive({activeRowIndex:Je},We,Re));const nt=this.isOptionSelected({selectedOptions:et,selectedOption:it},Re,pe,q),at=Re.value===E.yk,ze=We[$].type==="heading",Ke=!!We[$].optgroup,He=We[$].type==="divider",Ye=!!Re.isDisabled,_t=!!Re.nonInteractive,vt=nt&&!ze&&!He,Tt=ze||_t||He,Lt=We.filter(Zt=>Zt.type!=="heading"&&Zt.type!=="divider"&&!Zt.nonInteractive),ft=(0,c.A)(Lt,Zt=>Zt.option===Re,0),mt=Pe?`${Pe}__option`:"",Yt=(0,n.A)("c-select_options_list__option",mt,(0,_.A)(Re,"overrides.className",!1),{"c-select_options_list__option--active":lt&&(0,_.A)(Re,"overrides.useHoverStyles",!0),"c-select_options_list__option--placeholder":we,"c-select_options_list__option--selected":vt,"c-select_options_list__option--disabled":Ye,"c-select_options_list__group_header":ze,"c-select_options_list__group_option":Ke,"c-select_options_list__divider":He,"c-select_options_list__clear_option":at});let nn=at?Re.label:t.createElement("hr",{className:this.getClassName("c-select_options__divider")});!He&&!at&&(nn=this.props.renderOption(Re,{index:$,isActive:lt,isGroupHeader:ze,isClearOption:at,isSelected:nt&&!ze&&!He,clearDynamicRowHeight:this.clearDynamicRowHeight}));let jt;if(se||!((Ce=Re.overrides)===null||Ce===void 0)&&Ce.unstyled)jt=nn;else{var gn;jt=t.createElement("span",{"data-qa":Re.value,className:this.getClassName("c-select_options_list__option_label",{normal_wrap:(gn=Re.extras)===null||gn===void 0?void 0:gn.forceHeaderWrap})},nn)}const on=Lt.length,Xt=ft===-1?void 0:ft+1,rn=t.createElement("div",ce({"aria-hidden":Tt?"true":null,"aria-selected":pe?nt:lt,"aria-label":ze?null:this.getArialabelForItem(We[$]),className:this.getClassName(Yt,mt),"data-qa":He?void 0:this.getDataQaTag(Re,$),id:(0,g.Es)(Le,`option_${$}`),key:Z},re?{style:re}:{},{onClick:Ye||_t?(0,m.A)(()=>this.onOptionSelected(Re)):(0,m.A)(()=>{this.onOptionClicked(Re)}),onMouseEnter:Ye||_t?r.A:(0,m.A)(()=>{this.onMouseEnteredOption($)}),onMouseLeave:Ye||_t?r.A:this.onMouseLeftOption,role:"option",tabIndex:-1,"data-is-active":lt?"true":void 0,ref:lt?this.currentRow:null,optgroup:Ke?We[$].optgroup:void 0,"aria-disabled":Ye||null,"aria-setsize":on,"aria-posinset":Xt}),vt&&!Oe&&t.createElement("span",{className:"c-select_options_list__selected","aria-hidden":"true"}),jt);return!ge||!this.cellMeasurerCache?rn:t.createElement(v.dl,{cache:this.cellMeasurerCache,columnIndex:0,rowIndex:$,key:Z,parent:Te},rn)}isOptionSelected(B,$,Z,re){let{selectedOptions:Te,selectedOption:Ce}=B;return Z&&(!Te||Te&&!Te.length)||!Z&&!Ce?!1:Z?!re&&$?Te&&Te.some(Pe=>Pe.value===$.value):Te&&Te.some(Pe=>re({selectedOption:Pe,listOption:$})):Ce&&$&&Ce.value===$.value}isOptionActive(B,$,Z){let{activeRowIndex:re}=B;if(!re&&re!==0)return!1;const Ce=$[re];return(Ce&&Ce.option?Ce.option:Ce)===Z}render(){const{className:B,ariaLabel:$,classPrefix:Z=void 0,multiSelectMode:re=!1,selectDataQa:Te=void 0,selectState:Ce,dropdownContainer:Pe=void 0,footerBannerContent:fe}=this.props,{isExpanded:pe,activeRowIndex:q,selectId:se,selectType:ge}=Ce,Oe=(0,n.A)("c-select_options_list",{[`${Z}_options_list`]:Z}),Le=ge===E.US.BASIC&&pe&&(0,l.A)(q)?(0,g.Es)(se,`option_${q}`):void 0,We=t.createElement("div",{className:Oe,ref:this.listBody,"data-qa":Te?`${Te}-options-list`:null,id:(0,g.Es)(se,"listbox"),"aria-activedescendant":Le,"aria-label":$,"aria-multiselectable":!!re,role:"listbox",tabIndex:-1,onMouseMove:this.enableMouseMove},this.renderListBody()),{includeWrapper:Re=!0}=this.props;if(!Re)return We;const we=(0,n.A)("c-select_options_list__wrapper",{[`${B}`]:B,[`${Z}_options_list_wrapper`]:Z});return t.createElement("div",ce({className:this.getClassName(we),"data-qa":Te?`${Te}-options-list-wrapper`:"sk-select-options-list-wrapper"},Pe?{ref:Pe}:{}),We,fe&&t.createElement("div",{className:"c-select_options_list__footer_banner"},fe))}constructor(B){super(B),this.isMouseMoveEnabled=!1,(0,D.v)(this,["getOptionsList","getOptionFromList","handleClear","onKeyPressedDown","onKeyPressedEnter","onKeyPressedTab","onKeyPressedShiftTab","onKeyPressedUp","onMouseLeftOption","onScroll","renderRow","clearDynamicRowHeight","initKeyCommands"]),this.listBody=t.createRef(),this.list=t.createRef(),this.currentRow=t.createRef(),this.keyCommands=void 0,this.previousFocus=null,this.cellMeasurerCache=void 0,this.formatOptions=(0,ee.A)(M),this.enableMouseMove=this.enableMouseMove.bind(this),this.debouncedEnableMouseMove=(0,h.A)(this.enableMouseMove,200),this.debouncedOnScroll=(0,h.A)(this.onScroll.bind(this),200),E.az.label=j.t("Clear selection");const{optionsRowHeight:$=E.bJ,dynamicHeight:Z=!1}=B;Z&&(this.cellMeasurerCache=new v.jS({defaultHeight:$,fixedWidth:!0}))}},"SelectOptionsList");b.displayName="SelectOptionsList",b.contextType=I.M;const R=b},4640201401:(z,A,e)=>{"use strict";e.d(A,{A:()=>g});var t=e(3134334389),n=e(7715417323),s=e(9268023148),a=e(5617110048),c=e(1641606663),o=e(5249175977),r=e(1162627626),l=e(7193040700),_=e(2322735331),d=e(6244014364);function i(){return i=Object.assign||function(E){for(var f=1;f<arguments.length;f++){var O=arguments[f];for(var C in O)Object.prototype.hasOwnProperty.call(O,C)&&(E[C]=O[C])}return E},i.apply(this,arguments)}u(i,"_extends");const m={onClose:{action:d.UiAction.CLOSE},onOpen:{action:d.UiAction.OPEN}},h=50,v=50,y=12,T=4,I=32;let p=u(class extends t.Component{componentDidMount(){this.maybeInstallListener(),this.measureOptionsListAndSetState()}componentDidUpdate(){this.maybeInstallListener()}componentWillUnmount(){this.maybeUninstallListener()}isMouseEvent(f){return(f==null?void 0:f.type)==="click"}didClickInput(f){const{inputRef:O}=this.props;if(!(O!=null&&O.current)||!this.isMouseEvent(f))return;const C=f.clientX,M=f.clientY,D=O.current.getBoundingClientRect();return C>D.left&&C<D.right&&M>D.top&&M<D.bottom}onClose(f){var O;const{selectState:C,inputRef:M,onOptionsListClose:D,setSelectState:P}=this.props;if(C.isExpanded){if(f instanceof KeyboardEvent){var k;(k=this.optionsListRef.current)===null||k===void 0||k.close(f)}M==null||(O=M.current)===null||O===void 0||O.focus(),D==null||D(this.didClickInput(f)),P(()=>({isExpanded:!1,activeRowIndex:null,filterQuery:"",displayQuery:""}))}}getOptionsListBounds(){const{inputRef:f,inputContainerRef:O=null}=this.props,C=O||f;return C&&C.current?C.current.getBoundingClientRect():null}getPopoverPosition(f){let{top:O,bottom:C}=f;var M;const D=O,P=(((M=this.context.windowRef.deref())===null||M===void 0?void 0:M.innerHeight)||0)-C,{selectState:k,maxListHeight:x=l.CK}=this.props,{options:F}=k;let W=0;const Y=u(L=>L.map(w=>this.getRowHeight(w)).reduce((w,J)=>w+J,0),"calculateRowHeight");if(F){const L=[];F.forEach(w=>{if(w.options){L.push(w.label),w.options.forEach(J=>L.push(J));return}L.push(w)}),W=Y(L)}const S=Math.min(W,x);return P<S&&P<D?"top-left":"bottom-left"}getRowHeight(f){const{optionsRowHeight:O=l.bJ}=this.props;return f.type&&f.type==="divider"?l.r3:O}maybeInstallListener(){var f,O;if(this.listenerInstalled)return;(f=this.context.windowRef.deref())===null||f===void 0||f.addEventListener("resize",this.onResize),(O=this.context.windowRef.deref())===null||O===void 0||O.addEventListener("scroll",this.onScroll);const{measurePopoverEventName:C=null}=this.props;if(C){var M;(M=this.context.windowRef.deref())===null||M===void 0||M.addEventListener(C,this.measureOptionsListAndSetState)}this.listenerInstalled=!0}maybeUninstallListener(){const{measurePopoverEventName:f=null}=this.props;if(this.listenerInstalled){var O,C;if(this.onResize.cancel(),this.onScroll.cancel(),(O=this.context.windowRef.deref())===null||O===void 0||O.removeEventListener("resize",this.onResize),(C=this.context.windowRef.deref())===null||C===void 0||C.removeEventListener("scroll",this.onScroll),f){var M;(M=this.context.windowRef.deref())===null||M===void 0||M.removeEventListener(f,this.measureOptionsListAndSetState)}this.listenerInstalled=!1}}measureOptionsListAndSetState(){this.listenerInstalled&&this.setState(()=>({optionsListBounds:this.getOptionsListBounds()}))}render(){var f,O;const{popoverProps:C={},selectState:M,minOptionsListWidth:D=null,onOpen:P=n.A,onScrollablePage:k=!1,autoClogProps:x=void 0,maxListHeight:F=l.CK,shouldAllowUnselectInSingleSelectMode:W,shouldAllowUnselectInMultiSelectMode:Y,stayExpandedAfterSelection:S}=this.props,{selectId:L}=M,w=this.state.optionsListBounds||{width:0,bottom:0,left:0},J=this.getPopoverPosition({top:w.top,bottom:w.bottom}),G=J==="top-left",X=((f=this.context.windowRef.deref())===null||f===void 0?void 0:f.innerWidth)||0;let te=w.width;D&&w.width<D&&(te=D);const le=w.left-y+te;let ve=0;D&&le>X&&(ve=D-w.width);const Ae=(G?w.top:(((O=this.context.windowRef.deref())===null||O===void 0?void 0:O.innerHeight)||0)-w.bottom)-I,ae=Math.min(Ae,F),he={...this.props,autoClogProps:x,width:te+y*2,maxListHeight:ae,shouldAllowUnselectInSingleSelectMode:W,shouldAllowUnselectInMultiSelectMode:Y,stayExpandedAfterSelection:S},{pageYOffset:_e}=this.context.windowRef.deref()||{},ee={top:w.top+_e+T,bottom:w.bottom+_e-T,left:w.left-(y+ve),width:te};let de;if(k){var Ie;de={height:(Ie=this.context.windowRef.deref())===null||Ie===void 0?void 0:Ie.document.body.scrollHeight}}return t.createElement(a.A,i({elementType:d.ElementType.DROPDOWN,actionProps:m},x?{autoClogProps:x}:{}),t.createElement(o.AM,i({position:J,allowanceX:-y,ref:this.popover},C,{onClose:this.onClose,isOpen:!!M.isExpanded,key:`${L}-popover`,shouldFocusAfterRender:!1,targetBounds:ee,ariaHideApp:!1,onOpen:P},typeof de<"u"?{overlayStyle:de}:{},{shouldPropagateOnClose:!0}),t.createElement(r.A,i({},he,{ref:this.optionsListRef}))))}constructor(f){super(f),this.popover=t.createRef(),this.optionsListRef=t.createRef(),this.state={optionsListBounds:null},(0,_.v)(this,["measureOptionsListAndSetState","onClose"]),this.onResize=(0,s.A)(this.measureOptionsListAndSetState,h,{maxWait:h}),this.onScroll=(0,s.A)(this.measureOptionsListAndSetState,v,{maxWait:v}),this.listenerInstalled=null}},"SelectPopoverOptionsList");p.displayName="SelectPopoverOptionsList",p.contextType=c.M,p.defaultProps={includePadding:!0,window};const g=p},9573786552:(z,A,e)=>{"use strict";e.d(A,{A:()=>o});var t=e(3134334389),n=e(166097325),s=e(3297051565),a=e.n(s);function c(){return c=Object.assign||function(r){for(var l=1;l<arguments.length;l++){var _=arguments[l];for(var d in _)Object.prototype.hasOwnProperty.call(_,d)&&(r[d]=_[d])}return r},c.apply(this,arguments)}u(c,"_extends");function o(r){const l={showConfirmDialog:a().func,setSelectState:a().func.isRequired,selectedOptions:a().array,selectedOption:a().object},_={selectedOptions:[],selectedOption:null,showConfirmDialog:void 0};let d=u(class extends t.Component{setSelectState(m,h){const v=m();v.selectedOptions&&!(0,n.A)(v.selectedOptions,this.selectedOptions)||v.selectedOption&&!(0,n.A)(v.selectedOption,this.selectedOption)?(this.props.setSelectState(()=>({isExpanded:!1})),this.props.showConfirmDialog({onGo:()=>{this.props.setSelectState(m,h),this.selectedOptions=v.selectedOptions||this.selectedOptions,this.selectedOption=v.selectedOption||this.selectedOption}})):(this.props.setSelectState(m,h),this.selectedOptions=v.selectedOptions||this.selectedOptions,this.selectedOption=v.selectedOption||this.selectedOption)}render(){const{showConfirmDialog:m}=this.props,h=m?this.setSelectState:this.props.setSelectState;return t.createElement(r,c({},this.props,{setSelectState:h}))}constructor(m){super(m),this.setSelectState=this.setSelectState.bind(this),this.selectedOptions=m.selectedOptions,this.selectedOption=m.selectedOption}},"ConfirmSelectWrapper");return d.displayName="ConfirmSelectWrapper",d.propTypes=l,d.defaultProps=_,d}u(o,"withConfirm")},2742076544:(z,A,e)=>{"use strict";e.d(A,{A:()=>d});var t=e(3134334389),n=e(166097325),s=e(9113979368),a=e(7715417323),c=e(9268023148),o=e(6422693406),r=e(796111729);function l(){return l=Object.assign||function(i){for(var m=1;m<arguments.length;m++){var h=arguments[m];for(var v in h)Object.prototype.hasOwnProperty.call(h,v)&&(i[v]=h[v])}return i},l.apply(this,arguments)}u(l,"_extends");const _=(0,r.Wo)();function d(i){let m=u(class extends t.Component{componentDidMount(){const{searchOnClick:v,disableSearchOnMount:y,expandOnFocus:T,minQueryLength:I}=this.props,{filterQuery:p}=this.state;if(!v&&!y||T){const g=!I||p&&p.length>=I;p!==void 0&&g&&this.search(p)}}componentDidUpdate(v){const{isInvalid:y,selectedOption:T,selectedOptions:I,isDisabled:p,minQueryLength:g}=this.props,E={};v.isInvalid!==y&&(E.isInvalid=y),v.isDisabled!==p&&(E.isDisabled=p),(0,n.A)(v.selectedOption,T)||(E.selectedOption=T),(0,n.A)(v.selectedOptions,I)||(E.selectedOptions=I),(0,n.A)(v.minQueryLength,g)||(E.minQueryLength=g),(0,s.A)(E)||this.setSelectState(()=>E)}componentWillUnmount(){this.searchPromise&&this.searchPromise.cancel&&this.searchPromise.cancel()}setSelectState(v,y){const T=v();(T.filterQuery!==void 0&&T.filterQuery!==this.state.filterQuery||T.searchOnClick)&&(this.searchPromise&&this.searchPromise.cancel&&this.searchPromise.cancel(),!this.state.minQueryLength||T.filterQuery&&T.filterQuery.length>=this.state.minQueryLength?(this.setState(()=>({isLoading:!0,searchOnClick:!1})),this.search(T.filterQuery)):this.setState(()=>({isLoading:!1,options:[]}))),this.setState(()=>T,y)}search(v){const{search:y,onSearch:T=a.A,onSearchError:I=a.A,selectId:p,processOptions:g=u(E=>o.S.resolve(E),"processOptions")}=this.props;T(v),this.searchPromise=y(v).then(E=>{g(E,v).then(f=>{this.setSelectState(()=>({options:f})),this.setState(()=>({isLoading:!1}))})}).catch(E=>{this.setState(()=>({isLoading:!1})),_.error(`Error when searching for select id: ${p}, error: ${E}`),I(E)})}render(){const v=this.props.inputRef||this.inputRef;return t.createElement(i,l({},this.props,{selectState:this.state,setSelectState:this.setSelectState,inputRef:v,isLoading:this.state.isLoading}))}constructor(v){super(v),this.inputRef=t.createRef(),this.searchPromise=null,this.setSelectState=this.setSelectState.bind(this),this.state={filterQuery:"",displayQuery:"",options:[],isExpanded:v.isExpanded,expandOnFocus:v.expandOnFocus,selectId:v.selectId,selectedOptions:v.selectedOptions||[],selectedOption:v.selectedOption||null,isRequired:v.isRequired,isLoading:!1,isDisabled:v.isDisabled,isInvalid:v.isInvalid,searchOnClick:v.searchOnClick,minQueryLength:v.minQueryLength},this.search=(0,c.A)(this.search,v.debounceWaitPeriod)}},"CustomSearchWrapper");return m.displayName="CustomSearchWrapper",m.defaultProps={isRequired:!0,selectedOptions:null,selectedOption:null,isExpanded:!1,expandOnFocus:!1,isDisabled:!1,isInvalid:!1,debounceWaitPeriod:50,minQueryLength:0,onSearch:a.A,onSearchError:a.A,searchOnClick:!1,disableSearchOnMount:!1,processOptions:h=>o.S.resolve(h),shouldAllowUnselectInMultiSelectMode:!1},m}u(d,"withCustomSearch")},3239909785:(z,A,e)=>{"use strict";e.d(A,{A:()=>Ae});var t=e(9706240641),n=e(3134334389),s=e(7715417323),a=e(166097325),c=e(9113979368),o=e(9524650809),r=e(235108050),l=e(362134992),_=e(2208015175),d=e(8086952004),i=e(4360875129),m=e(2394306156),h=e(9746734072),v=e(2101927269),y=e(8840779375),T=e(9268023148),I=e(5950652755),p=e(3297051565),g=e.n(p),E=e(6422693406),f=e(6987519067),O=e(145735569),C=e(3708320478),M=e(6543729974),D=e(2170574487);function P(ae){return[...ae.filter(he=>!he.isError&&!he.isUnknown),...ae.filter(he=>!he.isError&&he.isUnknown),...ae.filter(he=>he.isError)]}u(P,"sortTokens");var k=e(9236644324),x=e(56548687),F=e(796111729),W=e(735940183),Y=e(4327331459),S=e(3707193570),L=e(4862221402),w=e(9868740303),J=e(4342685672),G=e(5356156303),X=e(9391594207),te=e(8847766420);function le(){return le=Object.assign||function(ae){for(var he=1;he<arguments.length;he++){var _e=arguments[he];for(var ee in _e)Object.prototype.hasOwnProperty.call(_e,ee)&&(ae[ee]=_e[ee])}return ae},le.apply(this,arguments)}u(le,"_extends");const ve=(0,F.Wo)(),Q=new W.Ay("form_inputs");function Ae(ae){const he={searcherOptions:g().object.isRequired,selectId:g().string.isRequired,inputRef:g().object,isRequired:g().bool,selectedOptions:g().array,selectedOption:g().object,isExpanded:g().bool,isDisabled:g().bool,isInvalid:g().bool,focusOnMount:g().bool,searchOnPaste:g().bool,expandOnFocus:g().bool,expandOnClick:g().bool,searchBatchSize:g().number,debounceWaitPeriod:g().number,onFilterQueryPaste:g().func,onInputFocused:g().func,onSearch:g().func,onSearchError:g().func,onSearchResolved:g().func,onOptionsListClose:g().func,splitPastedQuery:g().func,processOptions:g().func,processSelectedOptions:g().func,clogger:g().object.isRequired,search:g().func.isRequired,teamId:g().string.isRequired,useSearcherSessions:g().bool,showConfirmDialog:g().func,restrictedSelectedTokenIndexes:g().array,disabledSelectedTokenIndexes:g().array,invalidSelectedTokenIndexes:g().array,useBulkSearch:g().bool},_e={isRequired:!0,selectedOptions:null,selectedOption:null,inputRef:null,isExpanded:!1,isDisabled:!1,isInvalid:!1,focusOnMount:!1,searchOnPaste:!1,expandOnFocus:void 0,expandOnClick:void 0,searchBatchSize:1,debounceWaitPeriod:50,onFilterQueryPaste:s.A,onInputFocused:s.A,onSearch:s.A,onSearchError:s.A,onSearchResolved:s.A,onOptionsListClose:s.A,splitPastedQuery:D.I,processOptions:ce=>E.K.resolve(ce),processSelectedOptions:void 0,useSearcherSessions:!1,showConfirmDialog:void 0,restrictedSelectedTokenIndexes:[],disabledSelectedTokenIndexes:[],invalidSelectedTokenIndexes:[],useBulkSearch:!1};let ee=u(class extends n.Component{componentDidMount(){this.props.focusOnMount&&this.setState(()=>({isLoading:!0})),this.searchQuery(this.state.filterQuery)}componentDidUpdate(j,N){const{isDisabled:b,isInvalid:R,selectedOptions:K,selectedOption:B,searchOnPaste:$,expandOnFocus:Z,expandOnClick:re,restrictedSelectedTokenIndexes:Te,disabledSelectedTokenIndexes:Ce,invalidSelectedTokenIndexes:Pe}=this.props,fe={};if(j.isInvalid!==R&&(fe.isInvalid=R),j.isDisabled!==b&&(fe.isDisabled=b),(0,a.A)(j.selectedOptions,K)||(fe.selectedOptions=K),(0,a.A)(j.selectedOption,B)||(fe.selectedOption=B),(j.expandOnFocus&&!Z||j.expandOnClick&&!re)&&(fe.isExpanded=!1),this.wasUnknownTokenResolved(this.state.selectedOptions,N.selectedOptions)){var q,se;const we=this.getNextUnknownTokenIndex();fe.selectedTokenIndexes=[we],(q=this.inputRef)===null||q===void 0||(se=q.current)===null||se===void 0||se.focus()}j.restrictedSelectedTokenIndexes!==Te&&(fe.restrictedSelectedTokenIndexes=Te),j.disabledSelectedTokenIndexes!==Ce&&(fe.disabledSelectedTokenIndexes=Ce),j.invalidSelectedTokenIndexes!==Pe&&(fe.invalidSelectedTokenIndexes=Pe);const{isLoading:ge,pendingQueries:Oe,selectedOptions:Le,pendingEscapeQueries:We,filterQuery:Re}=this.state;if($&&!ge){if(!(0,c.A)(Oe))fe.isLoading=!0,fe.loadInBackground=!0,this.searchQueryObjects(Oe);else if(N.isLoading){if(this.updateDisabled(!1),We.length>0&&Re===""){const we=(0,W.jd)(We.map(nt=>nt.query),{noConj:!0}).join(""),Je=We[0],{options:it}=Je,et=u(nt=>nt.map(at=>{const{query:ze,options:Ke,...He}=at,Ye=Ke?{options:et(Ke)}:{};return{...He,...Ye,query:we}}),"getUpdatedOptions"),lt={...Je,options:et(it),query:we};fe.pendingEscapeQueries=[],fe.options=lt.options,fe.filterQuery=we,fe.isExpanded=!0,fe.isLoading=!1}if(Le.length){const we=Le.filter(it=>it.isError||it.isUnknown).length,Je=we?Q.t("Loading complete. There {count, plural, =1 {is # unknown entry} other {are # unknown entries}}.",{count:we}):Q.t("Loading complete.");this.updateAriaTextThrottled.cancel&&this.updateAriaTextThrottled.cancel(),this.updateAriaTextThrottled(Je)}}}(0,c.A)(fe)||this.setSelectState(()=>fe)}componentWillUnmount(){this.updateAriaText.cancel&&this.updateAriaText.cancel(),this.searchPromise&&this.searchPromise.cancel&&this.searchPromise.cancel(),this._isMounted=!1}onFilterQueryPaste(j){var N=this;return(0,t.coroutine)(function*(){const{searchOnPaste:b,searcherOptions:R,splitPastedQuery:K,processOptions:B}=N.props;if(!b||!j&&!j.clipboardData)return;j.preventDefault();const $=j.clipboardData.getData("text/plain")?"text/plain":"Text",Z=(0,k.i_)(j),re=Z.text,Te=K(re,{...R,fromMetadata:Z.text!==j.clipboardData.getData($)});N.props.onFilterQueryPaste(Te);const Ce=[],Pe=[];yield E.K.all(Te.map(fe=>{const pe=N.getQueryId();return(0,Y.A)(fe)||(0,L.A)(fe)||(0,S.Ay)(fe)?B([{key:pe,pasted:!0,fromMetadata:!0,value:fe,label:Z.members?Z.members[fe]:fe}]).then(q=>(q[0]&&Pe.push(q[0]),E.K.resolve())):(Ce.push({query:fe,queryId:pe,pasted:!0}),Pe.push({label:fe,queryId:pe,isLoading:!0,key:pe,pasted:!0}),E.K.resolve())})),N.setSelectState(fe=>({pendingQueries:fe.pendingQueries.concat(Ce),selectedOptions:fe.selectedOptions.concat(Pe)})),N.updateDisabled(!(0,c.A)(Ce)),N.updateAriaTextThrottled.cancel&&N.updateAriaTextThrottled.cancel()})()}onInputFocused(){this.props.onInputFocused(),!(this.props.expandOnClick||this.shouldExpandOnFocus())&&this.setState(()=>({isExpanded:!1,options:[]}))}onOptionsListClose(j){const{isLoading:N,isExpanded:b,filterQuery:R}=this.state;!N&&b&&R.length>0&&this.clogSearcherResults(),this.props.onOptionsListClose(j)}onTokenSelect(j){var N=this;return(0,t.coroutine)(function*(){if(!(N.props.expandOnClick||N.shouldExpandOnFocus())){if(j&&!j.isUnknown)N.setState(()=>({isExpanded:!1,options:[]}));else if(j){const b=yield N.props.processOptions(j.resultOptions.map(R=>({...R,fromUnknown:!0})),j.label);N.lastShownSearchDetails=j.searcher,N.setState(()=>({isExpanded:!0,options:b}))}}})()}getQueryId(){return(0,o.A)("query__")}setSelectState(j,N){var b=this;return(0,t.coroutine)(function*(){var R;const{processSelectedOptions:K}=b.props;let B=j(b.state);const{selectedOption:$,selectedOptions:Z}=b.state;B.filterQuery!==void 0&&B.filterQuery!==b.state.filterQuery&&(B.isLoading=!0,B.loadInBackground=!1,b.searchQuery(B.filterQuery));const{searchOnPaste:re}=b.props;if(re&&B.selectedOptions){const Ce=B.selectedOptions.map(fe=>{let{key:pe}=fe;return pe}),Pe=(0,r.A)((0,l.A)(Ce.filter(fe=>Ce.indexOf(fe)!==Ce.lastIndexOf(fe))));(0,_.A)(Pe,fe=>{const pe=(0,d.A)(B.selectedOptions,se=>{let{key:ge,isUnknown:Oe}=se;return ge===fe&&!Oe}),q=(0,l.A)(B.selectedOptions.map(se=>se.key===fe?se.isUnknown?pe:null:se));B.selectedOptions=q})}if(B.selectedOptions!==void 0&&!(0,a.A)(B.selectedOptions,Z)){const Ce=B.selectedOptions.filter(fe=>{let{isLoading:pe,isUnknown:q}=fe;return!pe&&!q}),[Pe]=(0,i.A)(Ce,Z,"value");Pe&&b.clogSearcherResults(Pe)}B.selectedOption!==void 0&&B.selectedOption!==null&&((R=B.selectedOption)===null||R===void 0?void 0:R.value)!==($==null?void 0:$.value)&&b.clogSearcherResults(B.selectedOption);const Te=!!B.removalInitiator;if(B.selectedOptions&&!Te&&K){if(B=(0,m.A)(B),B.isLoading!==void 0){const Ce=B.isLoading;b.setState(()=>({isLoading:Ce})),delete B.isLoading}B.selectedOptions=yield K(B.selectedOptions)}b.setState(()=>B,N)})()}getNextUnknownTokenIndex(){return this.state.selectedOptions.findIndex(j=>j.isUnknown&&j.queryId)}wasUnknownTokenResolved(j,N){const b=j.filter(K=>K.isUnknown).length,R=N.filter(K=>K.isUnknown).length;return b<R}shouldExpandOnFocus(){const{expandOnFocus:j}=this.props,{selectedOptions:N}=this.state,b=(0,M.A)(N);return j&&!b}clogSearcherResults(j){if(this.lastShownSearchDetails===null)return;const{clogger:N,selectId:b,useSearcherSessions:R,teamId:K}=this.props,{query:B,results:$}=this.lastShownSearchDetails,Z={source:b,query:B,results:$};j?(Z.selectedItemId=j.value,R?(0,w.A)({teamId:K,key:b}).clogSearcherAccept({clogger:N,data:Z}):(0,f.DC)({clogger:N,data:Z})):R?(0,w.A)({teamId:K,key:b}).clogSearcherReject({clogger:N,data:Z}):(0,f.Yb)({clogger:N,data:Z})}processSearchResults(j){const{searchOnPaste:N,onSearchResolved:b,searcherOptions:R}=this.props,{escapeHatchEnabled:K,escapeHatchKeys:B}=R,$=this.state.selectedOptions.slice(0);N&&j.forEach(Z=>{let{queryId:re,options:Te,searcher:Ce}=Z;const Pe=$.findIndex(q=>q.queryId===re),fe=$[Pe];let pe=null;if(fe){this.lastShownSearchDetails=Ce;let q;Te.length===1?(q=Te[0],K&&Ce&&Ce.results&&Ce.results.length===0&&Ce.pasted&&B&&B[q.key]&&this.setState(ge=>({pendingEscapeQueries:[...ge.pendingEscapeQueries,{query:Ce.query,options:[q]}]})),this.clogSearcherResults(q)):Te.length?q={isUnknown:!0}:(q={isError:!0},this.clogSearcherResults()),pe={...fe,...q,resultOptions:Te,searcher:Ce,isLoading:!1},$[Pe]=pe}b({result:Te,selectedOption:pe})}),this.setState(Z=>{if((0,G.Ay)(Z.selectedOptions,$,2)){const{options:re,searcher:Te}=j[0];return this.lastShownSearchDetails=Te,Z.loadInBackground?null:{options:re}}return{selectedOptions:P($)}})}runBatchedSearch(j){const N=j.slice(0,this.props.searchBatchSize);if(j.length>1&&this.props.useBulkSearch){const R=N.some(B=>!!B.pasted),K=N.some(B=>!!B.initial);return this.runSingleSearch({query:N,pasted:R,initial:K})}const b=N.map(R=>{let{query:K,queryId:B,pasted:$,initial:Z}=R;return this.runSingleSearch({query:K,queryId:B,pasted:$,initial:Z})});return E.K.all(b)}runSingleSearch(j){let{query:N,queryId:b,pasted:R,initial:K}=j;const{onSearch:B,onSearchError:$,processOptions:Z,searcherOptions:re,selectId:Te,useSearcherSessions:Ce,teamId:Pe,useBulkSearch:fe}=this.props;let pe,q,se=!1;const ge=b||this.getQueryId(),Oe=new Map;if((0,h.A)(N)&&fe?(pe=N.map(Re=>(Oe.set(Re.queryId,Re.query),{query:(0,D.t)(Re.query,re),queryId:Re.queryId})),se=!0):q=(0,D.t)(N,re),q&&B(N)===!1)return Z([],q).then(Re=>({queryId:ge,options:Re,searcher:this.lastShownSearchDetails}));let Le;Ce&&(!R||se)?Le=(0,w.A)({teamId:Pe,key:K?ge:Te}).search({query:se?pe:q,options:{...re,sort:{source:Te,...re.sort},returnMetadata:!0}}):Le=this.props.search({query:se?pe:q,options:{...re,sort:{source:Te,...re.sort},returnMetadata:!0}});var We=this;return Le.then(function(){var Re=(0,t.coroutine)(function*(we){We.lastShownSearchDetails={query:se?pe:q,results:we};const Je=(we||[]).map((lt,nt)=>{var at;return{key:se?lt.queryId:`${ge}_${nt}`,value:lt.item.id,label:lt.name||((at=lt.item)===null||at===void 0?void 0:at.name)||(se?Oe.get(lt.queryId):N),entity:lt.item,matchData:lt.subqueryScoresByMember}}),{selectedOption:it}=We.state;q===""&&it&&((0,d.A)(Je,["value",it.value])||Je.unshift(it));const et=yield Z(Je,N,{pasted:R});return{queryId:ge,options:et,searcher:{...We.lastShownSearchDetails,pasted:R}}});return function(we){return Re.apply(this,arguments)}}()).catch(Re=>{ve.error(`Error when searching for select id: ${Te}, error: ${Re}`),$(Re);const we=[];return{queryId:ge,options:we,searcher:{query:se?pe:q,results:we,pasted:R,isError:!0}}})}searchQuery(j){this._isMounted&&this.searchQueryObjects([{query:j}])}searchQueryObjects(j){if((0,c.A)(j))return;if(this.searchPromise&&this.searchPromise.cancel&&this.searchPromise.cancel(),!this.props.searchOnPaste){const{query:b,queryId:R}=j[0];this.searchPromise=this.runSingleSearch({query:b,queryId:R}).then(K=>{let{options:B}=K;this.setSelectState(()=>({options:B})),this.setState(()=>({isLoading:!1}))});return}this.searchPromise=this.runBatchedSearch(j).then(b=>{let R=b;this.props.useBulkSearch&&(R=this.generateBulkSearchResultsArray(R)),this.processSearchResults(R);const K=R.map(B=>{let{queryId:$}=B;return $});this.setState(B=>({pendingQueries:B.pendingQueries.filter(Z=>{let{queryId:re}=Z;return!K.includes(re)}),isLoading:!1}))});const N=Q.t("Loading {count, plural, =1 {# more entry} other {# more entries}}",{count:j.length});this.updateAriaTextThrottled(N)}updateAriaText(j){this.setState(N=>N.ariaText===j?null:{ariaText:j})}updateDisabled(j){this.setState(N=>N.isDisabled===j?null:{isDisabled:j})}generateBulkSearchResultsArray(j){var N;if(!(!(j==null||(N=j.options)===null||N===void 0)&&N.length))return j.splice(0);const{options:b,searcher:R}=j,{pasted:K,query:B,results:$}=R;return B.map(re=>({options:b.filter(Te=>Te.key===re.queryId),queryId:re.queryId,searcher:{pasted:K,query:re.query,results:$.filter(Te=>Te.queryId===re.queryId)}}))}render(){return n.createElement(n.Fragment,null,n.createElement(ae,le({},this.props,{expandOnFocus:this.shouldExpandOnFocus(),inputRef:this.inputRef,selectState:this.state,setSelectState:this.setSelectState,onOptionsListClose:this.onOptionsListClose,onFilterQueryPaste:this.onFilterQueryPaste,onTokenSelect:this.onTokenSelect,onInputFocused:this.onInputFocused,isLoading:this.state.isLoading})),n.createElement(C.A,{message:this.state.ariaText}))}constructor(j){super(j),this.searchPromise=null,this.setSelectState=this.setSelectState.bind(this),this.onOptionsListClose=this.onOptionsListClose.bind(this),this.onFilterQueryPaste=this.onFilterQueryPaste.bind(this),this.onTokenSelect=this.onTokenSelect.bind(this),this.onInputFocused=this.onInputFocused.bind(this);const{selectedOptions:N,searchOnPaste:b}=j,R=(0,v.A)(N,B=>(0,O.iC)(B));let K=[];b&&(K=(0,l.A)((0,y.A)(R,B=>!B.label||!B.queryId?null:{query:B.label,queryId:B.queryId,initial:!0}))),this.state={filterQuery:"",options:[],isExpanded:j.isExpanded,selectId:j.selectId,selectedOptions:j.selectedOptions||[],selectedOption:j.selectedOption||null,isRequired:j.isRequired,isLoading:!1,isDisabled:j.isDisabled,isInvalid:j.isInvalid,pendingQueries:K||[],loadInBackground:!1,ariaText:"",shouldRefocusInputAfterSelection:!!j.showConfirmDialog,pendingEscapeQueries:[],selectedTokenIndexes:[],restrictedSelectedTokenIndexes:j.restrictedSelectedTokenIndexes||[],disabledSelectedTokenIndexes:j.disabledSelectedTokenIndexes||[],invalidSelectedTokenIndexes:j.invalidSelectedTokenIndexes||[]},this.searchQuery=(0,T.A)(this.searchQuery,j.debounceWaitPeriod),this.updateAriaTextThrottled=(0,I.A)(this.updateAriaText,3e4),this.lastShownSearchDetails=null,this.inputRef=j.inputRef||n.createRef(),this._isMounted=!0}},"SearcherSelectWrapper");ee.displayName="SearcherSelectWrapper",ee.propTypes=he,ee.defaultProps=_e;const de=u(ce=>({clogger:(0,x.e)({state:ce}),teamId:(0,te.JY)(ce),useSearcherSessions:(0,J.nK)(ce)}),"mapStateToProps"),Ie={search:function(){for(var ce=arguments.length,j=new Array(ce),N=0;N<ce;N++)j[N]=arguments[N];return(0,f.$P)(...j)}};return(0,X.N)(de,Ie)(ee)}u(Ae,"withSearcher")},2864323261:(z,A,e)=>{"use strict";e.d(A,{A:()=>s});var t=e(2825917518);const n=u(function(a){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],r=arguments.length>3?arguments[3]:void 0;if(!r)return o;const{label:l,options:_}=r,d=new t.A(a,{fuzzyLimit:3,...c});if(!_)isFinite(d.normalizeAndScore(l))&&o.push(r);else{const i=[];_.forEach(m=>{const{label:h}=m;isFinite(d.normalizeAndScore(h))&&i.push(m)}),i.length&&o.push({label:r.label,options:i})}return o},"findMatches");function s(a,c){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return c?a.reduce((r,l)=>n(c,o,r,l),[]):a}u(s,"defaultFilter")},6543729974:(z,A,e)=>{"use strict";e.d(A,{A:()=>a});var t=e(9113979368),n=e(1703559452),s=e(145735569);function a(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return(0,t.A)(c)?!1:(0,n.A)(c,o=>(0,s.hH)(o))}u(a,"__WEBPACK_DEFAULT_EXPORT__")},3650946343:(z,A,e)=>{"use strict";e.d(A,{A:()=>c});var t=e(9113979368),n=e(2101927269),s=e(4724591729),a=e(796111729);function c(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if((0,t.A)(o))return!1;const r=(0,n.A)(o,l=>(l&&!l.message&&(0,s.Cu)()&&(0,a.Wo)({label:"Invalid Error or Hint Object"}).error(`The following error or hint object is invalid: { id: ${l.id}, message: ${l.message}}`),l&&!!l.message));return!(0,t.A)(r)}u(c,"__WEBPACK_DEFAULT_EXPORT__")},2170574487:(z,A,e)=>{"use strict";e.d(A,{I:()=>r,t:()=>l});var t=e(3044566667);const n=[",","\uFF0C","\u3001",";","\uFF1B","|","\uFF5C","\\t","\\n","\\r"],s=new RegExp(`[${n}]`),a=new RegExp(`<(${t.gy})>`,"i"),c=new RegExp(`\\((${t.gy})\\)`,"i"),o=/(?=\s+[@\uFF20])/g;function r(_){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=[];return d.entities&&d.entities.members&&d.entities.members.matchEmailField&&(a.test(_)||c.test(_))?i=_.match(new RegExp(t.tN.CONTAINS_EMAIL,"gi")):s.test(_)?i=_.split(s):d.fromMetadata?i=_.split(/\s+/):d.entities&&d.entities.members&&o.test(_)&&(i=_.split(o)),(!i||!i.length)&&(i=_.split(/\s+/)),i.map(m=>m.trim()).filter(m=>Boolean(m))}u(r,"defaultSplitQuery");function l(_){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=_;return d.entities&&d.entities.members&&d.entities.members.matchEmailField&&t.tN.CONTAINS_EMAIL.test(_)&&(i=_.match(t.tN.CONTAINS_EMAIL)[0]),i}u(l,"parseQueryForSearch")},7772530643:(z,A,e)=>{"use strict";e.d(A,{k:()=>n});var t=e(2864323261);const n=u(function(a,c){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return c.filterQuery===void 0?c:{...c,options:(0,t.A)(a,c.filterQuery,o)}},"defaultFilter"),s=u((a,c)=>a.reduce((o,r)=>r(o),c),"applyTransforms")},1959847761:(z,A,e)=>{"use strict";e.d(A,{A:()=>s,e:()=>n.ex});var t=e(1211063534),n=e(5139334449);const s=t.A},1211063534:(z,A,e)=>{"use strict";e.d(A,{A:()=>p});var t=e(3134334389),n=e(5255740490),s=e(5950652755),a=e(7715417323),c=e(1641606663),o=e(8245211418),r=e(5139334449),l=e(3256698098);function _(){return _=Object.assign||function(g){for(var E=1;E<arguments.length;E++){var f=arguments[E];for(var O in f)Object.prototype.hasOwnProperty.call(f,O)&&(g[O]=f[O])}return g},_.apply(this,arguments)}u(_,"_extends");const d=1,i=10,m=10,h=2,v=12,y=50;let T=u(class extends t.PureComponent{componentDidMount(){if(this.state.isOpen){var E;(E=this.context.windowRef.deref())===null||E===void 0||E.document.addEventListener("mousemove",this.onMouseMove)}}static getDerivedStateFromProps(E,f){return E.isOpen!==f.passedIsOpen?{isOpen:E.isOpen,passedIsOpen:E.isOpen}:null}componentDidUpdate(E){if(E.isOpen!==this.props.isOpen)if(this.state.isOpen){var f;this.forceUpdate(),(f=this.context.windowRef.deref())===null||f===void 0||f.document.addEventListener("mousemove",this.onMouseMove)}else{var O;(O=this.context.windowRef.deref())===null||O===void 0||O.document.removeEventListener("mousemove",this.onMouseMove)}this.state.isOpen||(this.initialTriggerBounds=void 0)}componentWillUnmount(){var E;(E=this.context.windowRef.deref())===null||E===void 0||E.document.removeEventListener("mousemove",this.onMouseMove)}onMouseMove(E){const f={x:E.clientX,y:E.clientY},O=this.mouseProgressingTowardsSubmenu(f);O!==this.state.mouseProgressingTowardsSubmenu&&(O?this.props.preventHighlightChange():this.state.highlightChangePrevented||this.props.allowHighlightChange()),this.setState(()=>({mouseCoordinates:f,mouseProgressingTowardsSubmenu:O}))}onSubmenuItemSelected(E,f){this.props.menuCallback(this.props.menuCallbackId,f)}getContentBounds(){return this.submenuContainer?this.submenuContainer.getBoundingClientRect():void 0}getSubmenuContainerStyle(){const E=this.getContentBounds(),f=this.getTriggerBounds(),O={...this.props.submenuStyle},C=this.context.windowRef.deref();if((E==null?void 0:E.width)===void 0||(f==null?void 0:f.left)===void 0||!C)return O;const M=f.right+E.width>C.innerWidth,D=f.left>E.width,P=this.props.forceLeft||M&&D;M&&!D?O.left=C.innerWidth-E.width-i:P?O.left=f.left-E.width+h:O.left=f.right-h;const x=f.top-v,F=x+E.height>C.innerHeight-m;return O.top=F?C.innerHeight-m-E.height:x,O}getTriggerBounds(){return this.initialTriggerBounds||(this.initialTriggerBounds=this.trigger?this.trigger.getBoundingClientRect():void 0),this.initialTriggerBounds||void 0}setSubmenuRef(E){this.submenuContainer=E}setTriggerRef(E){this.trigger=E}allowHighlightChange(){this.setState(E=>({...E,highlightChangePrevented:!1}))}closeSubmenu(){this.props.returnKBNav(),this.setState(()=>({isOpen:!1}),()=>{var E;(E=this.context.windowRef.deref())===null||E===void 0||E.document.removeEventListener("mousemove",this.onMouseMove)})}mouseProgressingTowardsSubmenu(E){const{mouseCoordinates:f}=this.state,O=this.getContentBounds();if(O){const{left:C,right:M,top:D,bottom:P}=O;if(E.x>=C&&E.x<=M&&E.y>=D&&E.y<=P)return!0;if(f){const x=Math.abs(M-f.x)>Math.abs(C-f.x),F={x:x?C:M,y:D-d},W={x:x?C:M,y:P+d},Y={x:x?f.x-d:f.x+d,y:f.y};return(0,l._i)(E,Y,F,W)}}return!1}preventHighlightChange(){this.setState(E=>({...E,highlightChangePrevented:!0}))}renderSubmenu(){if(!this.state.isOpen||this.props.disabled)return null;const E=this.props.renderSubmenu({onTriggerClose:this.closeSubmenu,onCloseSubmenu:this.closeSubmenu,onMenuItemSelected:this.onSubmenuItemSelected,kbNavActive:this.props.kbNavActive,preventHighlightChange:this.preventHighlightChange,allowHighlightChange:this.allowHighlightChange,isSubmenu:!0}),f=this.getSubmenuContainerStyle(),O=(0,n.A)("c-submenu__container",{"c-submenu__container--legacy":!this.props.renderLegacySubmenu});return t.createElement("div",{role:"presentation",className:O,ref:this.setSubmenuRef,style:f,"data-qa":"submenu_container"},E)}render(){const{menuCallback:E,menuCallbackId:f,...O}=this.props;return t.createElement("div",{role:"presentation",className:"c-submenu","data-qa":"submenu_trigger_wrapper",ref:this.setTriggerRef},t.createElement(o.A,_({},O,{withSubmenu:!0})),this.renderSubmenu())}constructor(E){super(E),this.state={isOpen:!1,passedIsOpen:!1,mouseCoordinates:void 0,mouseProgressingTowardsSubmenu:!1,highlightChangePrevented:!1},this.closeSubmenu=this.closeSubmenu.bind(this),this.setSubmenuRef=this.setSubmenuRef.bind(this),this.setTriggerRef=this.setTriggerRef.bind(this),this.onMouseMove=(0,s.A)(this.onMouseMove.bind(this),y),this.onSubmenuItemSelected=this.onSubmenuItemSelected.bind(this),this.preventHighlightChange=this.preventHighlightChange.bind(this),this.allowHighlightChange=this.allowHighlightChange.bind(this)}},"Submenu");T.displayName="Submenu",T.defaultProps={isOpen:!1,menuCallback:a.A,menuCallbackId:null,kbNavActive:!1,returnKBNav:a.A,preventHighlightChange:a.A,allowHighlightChange:a.A,renderLegacySubmenu:!0,forceLeft:!1,submenuStyle:void 0,disabled:!1,showFullCarat:!1,icon:null},T.contextType=c.M;const I={Submenu:T,SUBMENU_OVERLAP:h,MENU_VERTICAL_MARGIN:v,ALLOWANCE_X:i,ALLOWANCE_Y:m},p=(0,r.Ay)(T)},5139334449:(z,A,e)=>{"use strict";e.d(A,{Ay:()=>d,ex:()=>_});var t=e(2208015175),n=e(3297051565),s=e.n(n),a=e(101973425),c=e(4724591729),o=e(796111729);const r="_isSlackSubmenuItem",l={...a.LN,kbNavActive:s().bool,stealKBNav:s().func,returnKBNav:s().func,preventHighlightChange:s().func,allowHighlightChange:s().func};function _(i){return!!i[r]}u(_,"isSubmenu");function d(i){if((0,c.Cu)()){const m=i.propTypes||{};let h;Object.defineProperty(i,"propTypes",{get:()=>h,set:v=>{const y=i.displayName||i.name||"Component";(0,t.A)(l,(T,I)=>{const p=v[I];p&&p!==T&&p!==T.isRequired&&(0,o.Wo)().warn(`${y}'s ${I} prop type doesn't match submenu`)}),h={...l,...v}}}),i.propTypes=m}return i[r]=!0,i[a.KJ]=!0,i}u(d,"wrapSubmenu")},4525741652:(z,A,e)=>{"use strict";e.d(A,{A:()=>c});var t=e(3134334389),n=e(5255740490);function s(){return s=Object.assign||function(o){for(var r=1;r<arguments.length;r++){var l=arguments[r];for(var _ in l)Object.prototype.hasOwnProperty.call(l,_)&&(o[_]=l[_])}return o},s.apply(this,arguments)}u(s,"_extends");const c=(0,t.forwardRef)((o,r)=>{let{tabContent:l,fullHeight:_,className:d,role:i="tabpanel",...m}=o;const h=(0,n.A)(d,"c-tabs__tab_panel","c-tabs__tab_panel--active",{"c-tabs__tab_panel--full_height":_});return t.createElement("div",s({role:i,className:h,"data-qa":"tabs_content_container",ref:r},m),l)})},6130762911:(z,A,e)=>{"use strict";e.d(A,{T:()=>s});var t=e(3134334389);const n={isSelected:!1,hasMouseHover:!1,hasKeyboardFocus:!1,isUserAttentionOnTab:!1},s=(0,t.createContext)(n)},2598612765:(z,A,e)=>{"use strict";e.d(A,{A:()=>C});var t=e(3134334389),n=e(5255740490),s=e(8628145494),a=e(9268023148),c=e(4980558152),o=e(2309855086),r=e(7946439528),l=e(3749524846),_=e(9332393661),d=e(6084388622),i=e(1610251172),m=e(8683010724),h=e(6130762911),v=e(7239742441),y=e(698347924);function T(M){return/\.(jpe?g|png|gif|bmp)$/i.test(M)}u(T,"hasImageExtention");const I=T;function p(){return p=Object.assign||function(M){for(var D=1;D<arguments.length;D++){var P=arguments[D];for(var k in P)Object.prototype.hasOwnProperty.call(P,k)&&(M[k]=P[k])}return M},p.apply(this,arguments)}u(p,"_extends");const g=u(M=>{let{icon:D,svgIcon:P,customIcon:k,className:x}=M;return t.createElement("div",{className:x,"data-qa":"tabs_item_render_icon"},!k&&D&&!P&&t.createElement(i.A,{type:D,size:"inherit",inline:!0}),!k&&P&&!D&&t.createElement(m.A,p({},P)),k&&k)},"TabsItemIcon");g.displayName="TabsItemIcon";const E=u(M=>M>=1e4?(0,v.$k)(M,{precision:4,decimal_places:0,lowercase:!0}):(0,y.Ay)(M),"formatNumber"),f=u(M=>{let{shouldFormatCount:D,titleCount:P,maxTitleCount:k}=M;return D&&P?E(P):k&&P&&P>k?`${k}+`:P},"formatCount"),C=(0,t.forwardRef)((M,D)=>{let{label:P,onClick:k,title:x,isSelected:F,isFocused:W,focusOnMount:Y,fullWidth:S,titleCount:L,maxTitleCount:w,icon:J,svgIcon:G,customIcon:X,formatCount:te,isLoading:le,isCountLoading:ve,isDisabled:Q,iconPosition:Ae="right",className:ae="",contextMenuAriaLabel:he,contextMenuTemplate:_e,...ee}=M;const de=(0,o.A)(D),[Ie,ce]=(0,t.useState)(!1),j=(0,t.useContext)(l.A),N=(0,n.A)(ae,"c-tabs__tab","js-tab",{"c-tabs__tab--active":F,"c-tabs__tab--full_width":S}),b=P||x,R=typeof b=="string"&&I(b)?t.createElement(_.A,{classes:"c-tabs__tab_image",image:b,ariaHidden:!0}):b,K=ee.id,B=(0,t.useCallback)(Oe=>{k&&k(K,Oe)},[K,k]),$=f({shouldFormatCount:te,titleCount:L,maxTitleCount:w}),Z=(0,s.A)(W)?F:W,re=(0,r.A)(Z);(0,t.useEffect)(()=>{if(!Z)return;const Oe=(0,s.A)(re);if(Oe&&Y||!Oe&&!re){var Le;(Le=de.current)===null||Le===void 0||Le.focus()}},[Z,re,Y,de]);const Te=(0,t.useCallback)(()=>_e,[_e]),Ce=(0,a.A)(()=>ce(!0),25),Pe=(0,a.A)(()=>ce(!1),25),fe=(0,t.useCallback)(()=>{Pe.cancel(),Ce()},[Ce,Pe]),pe=(0,t.useCallback)(()=>{Ce.cancel(),Pe()},[Ce,Pe]),q=j&&(W??!1),se=(0,t.useMemo)(()=>({isSelected:F??!1,hasMouseHover:Ie,hasKeyboardFocus:q,isUserAttentionOnTab:F||Ie||q}),[q,Ie,F]);let ge=t.createElement(d.Nm,p({},ee,{onClick:B,onMouseOver:fe,onMouseOut:pe,role:"tab",className:N,"aria-selected":F,tabIndex:Z?0:-1,disabled:Q,ref:de}),le?t.createElement("span",{className:"c-tabs__tab_placeholder","data-qa":"tabs_item_placeholder"}):t.createElement(t.Fragment,null,(!!J||!!G||!!X)&&Ae==="left"&&t.createElement(g,{icon:J,svgIcon:G,customIcon:X,className:"c-tabs__tab_icon--left"}),t.createElement("span",{className:"c-tabs__tab_content"},R),Number.isFinite(L)&&t.createElement("span",{className:"c-tabs__tab_count","data-qa":"tabs_item_render_count"},$),ve&&t.createElement("span",{className:"c-tabs__tab_count_placeholder","data-qa":"tabs_item_render_count_placeholder"}),(!!J||!!G||!!X)&&Ae==="right"&&t.createElement(g,{icon:J,svgIcon:G,customIcon:X,className:"c-tabs__tab_icon--right"})));return _e&&(ge=t.createElement(c.A,{getTemplate:Te,desktopAppOnly:!1,showSlackKitContextMenuOnDesktop:!0,width:"auto",menuAriaLabel:he},ge)),t.createElement(h.T.Provider,{value:se},ge)})},3214129289:(z,A,e)=>{"use strict";e.d(A,{A:()=>Q});var t=e(3134334389),n=e(5255740490),s=e(7715417323),a=e(3514831633),c=e(8773153312),o=e(8683010724),r=e(2598612765),l=e(2312625946);const _={name:"ellipsis-horizontal",variation:"filled"},i=(0,t.forwardRef)((Ae,ae)=>{let{renderMenu:he,position:_e,label:ee,id:de,isSelected:Ie,isFocused:ce}=Ae;return t.createElement(a.cQ,{renderMenu:he,position:_e||"bottom-left"},t.createElement(l.Ay,{tip:ee,position:"top",offsetY:6},t.createElement(r.A,{id:de,"aria-label":ee,isSelected:Ie,isFocused:ce,className:"c-tabs__tab_overflow",svgIcon:_,ref:ae})))});var m=e(5238395322);const h=53,v=27;function y(Ae){const ae=Ae.ownerDocument.defaultView;if(!ae)return Ae.offsetWidth;const he=ae.getComputedStyle(Ae),_e=parseFloat(he.getPropertyValue("margin-left"))+parseFloat(he.getPropertyValue("margin-right"));return Ae.offsetWidth+_e}u(y,"getWidth");function T(Ae){const ae=Ae.ownerDocument.defaultView;if(!ae)return Ae.offsetHeight;const he=ae.getComputedStyle(Ae),_e=parseFloat(he.getPropertyValue("margin-top"))+parseFloat(he.getPropertyValue("margin-bottom"));return Ae.offsetHeight+_e}u(T,"getHeight");const I=u((Ae,ae)=>{let{outerElement:he,innerElement:_e,threshold:ee,totalTabsLength:de,childElements:Ie,containerSize:ce,isHorizontal:j}=Ae;if(!he||!_e||!Ie||de===0)return;const N=ce-ee,b=j?y:T,R=Array.from(Ie).map(re=>b(re));if((0,m.A)(R)<N&&R.length===de){ae(de);return}let B=j?h:v,$=N,Z=1;R.forEach(re=>{B+=re,B<N&&re<=$&&(Z+=1),$-=re}),ae(Z)},"recalculateVisibleTabs");var p=e(4525741652),g=e(8214116048),E=e(3078252698);const O=u(Ae=>(0,E.A)(Ae),"isReactNodeAString");var C=e(2322735331),M=e(6244014364),D=e(4806483452),P=e(4724591729),k=e(3688641936),x=e(796111729),F=e(8873262110),W=e(735940183),Y=e(3821598679);function S(){return S=Object.assign||function(Ae){for(var ae=1;ae<arguments.length;ae++){var he=arguments[ae];for(var _e in he)Object.prototype.hasOwnProperty.call(he,_e)&&(Ae[_e]=he[_e])}return Ae},S.apply(this,arguments)}u(S,"_extends");const L=new W.Ay("slack-kit"),w=85,J=52,G=["ArrowLeft"],X=["ArrowRight"],te=G.concat("ArrowUp"),le=X.concat("ArrowDown");let ve=u(class extends t.PureComponent{setVisibleTabs(ae){this.setState(()=>({numOfVisibleTabsShown:ae}))}onResize(){var ae,he,_e,ee,de,Ie,ce,j,N,b;const R=this.props.orientation===g.t4.Horizontal,K=R?(ae=this.tabsContainerRef)===null||ae===void 0||(he=ae.current)===null||he===void 0?void 0:he.clientWidth:(_e=this.tabsContainerRef)===null||_e===void 0||(ee=_e.current)===null||ee===void 0?void 0:ee.clientHeight;if(!K)return;const B=R?w:J,$={outerElement:(de=this.tabsContainerRef)===null||de===void 0||(Ie=de.current)===null||Ie===void 0?void 0:Ie.getBoundingClientRect(),innerElement:(ce=this.lastVisibleTabRef)===null||ce===void 0||(j=ce.current)===null||j===void 0?void 0:j.getBoundingClientRect(),totalTabsLength:this.props.tabs.length,numOfVisibleTabsShown:this.state.numOfVisibleTabsShown,childElements:(N=this.tabsContainerRef)===null||N===void 0||(b=N.current)===null||b===void 0?void 0:b.children};I({...$,threshold:B,containerSize:K,isHorizontal:R},this.setVisibleTabs),this.setState(()=>({isResizeCalculationCompleted:!0}),()=>{var Z,re;return(re=(Z=this.props).onTabsResized)===null||re===void 0?void 0:re.call(Z)})}componentDidMount(){this._isMounted=!0;const{maxSize:ae}=this.props;if(ae&&!this.resizeListener){var he;this.resizeListener=(0,F.A)(this.onResize),this.resizeListener.observe((he=this.tabsContainerRef)===null||he===void 0?void 0:he.current)}}componentDidUpdate(ae,he){var _e;const{defaultTabId:ee,tabs:de,manualTabActivation:Ie}=this.props;var ce;((ce=(_e=ae.tabs)===null||_e===void 0?void 0:_e.length)!==null&&ce!==void 0?ce:0)!==de.length&&this.updateSelectedTab(),ee!==ae.defaultTabId&&ee&&this.selectTab(ee,void 0);const j=he.numOfVisibleTabsShown!==this.state.numOfVisibleTabsShown,N=he.selectedTabId!==this.state.selectedTabId&&!Ie;(j||N)&&this.updateFocusedTabIndex(),this.focusWhenVisible&&(this.focusWhenVisible=!1,this.focus())}componentWillUnmount(){if(this._isMounted=!1,this.resizeListener){var ae;(ae=this.resizeListener)===null||ae===void 0||ae.disconnect(),this.resizeListener=null}}onFocus(ae){const{focusedTabIndex:he}=this.state,_e=this.getTabIndexById(ae.target.id);_e!==he&&this.focusTab(_e)}onKeyDown(ae){const he=ae.key;if(ae.shiftKey||ae.metaKey||ae.ctrlKey||ae.altKey)return;const ee=this.props.orientation==="vertical",de=ee?le:X,Ie=ee?te:G;if(!["Home","End"].concat(de,Ie).includes(he))return;const j=de.includes(he),N=Ie.includes(he);ae.preventDefault(),j&&this.onNextArrow(ae),N&&this.onPreviousArrow(ae),he==="Home"&&this.onHome(ae),he==="End"&&this.onEnd(ae)}isSelectedTabVisible(){return this.getVisibleTabIds().includes(this.state.selectedTabId)}getHiddenTabs(){const{tabs:ae}=this.props,{numOfVisibleTabsShown:he}=this.state;return ae.slice(he,ae.length)}getVisibleTabs(){var ae,he;const{tabs:_e,maxSize:ee}=this.props;if(!!!ee)return _e;const Ie=((ae=this)===null||ae===void 0||(he=ae.state)===null||he===void 0?void 0:he.numOfVisibleTabsShown)||_e.length;return _e.length===Ie?_e:_e.slice(0,Ie).concat({id:this.overflowTabId})}getVisibleTabIds(){return this.getVisibleTabs().map(ae=>{let{id:he}=ae;return he})}getTabById(ae){var he;return(he=this.props.tabs)===null||he===void 0?void 0:he.find(_e=>_e.id===ae)}getTabIndexById(ae){return this.getVisibleTabIds().indexOf(ae)}onHome(ae){if(this.state.focusedTabIndex===0)return;const{onTabWillChange:he,manualTabActivation:_e,onTabChange:ee}=this.props,de=this.getVisibleTabIds(),Ie=0;if(this.focusTab(Ie),_e)return;const ce=de[Ie];ce!==this.overflowTabId&&(he==null?void 0:he(ce))!==!1&&this.setState(()=>({selectedTabId:ce}),()=>{ee==null||ee(ce,ae)})}onEnd(ae){const he=this.getVisibleTabIds(),_e=he.length-1;if(this.state.focusedTabIndex===_e)return;const{onTabWillChange:ee,manualTabActivation:de,onTabChange:Ie}=this.props;if(this.focusTab(_e),de)return;const ce=he[_e];ce!==this.overflowTabId&&(ee==null?void 0:ee(ce))!==!1&&this.setState(()=>({selectedTabId:ce}),()=>Ie==null?void 0:Ie(ce,ae))}onNextArrow(ae){const{onTabWillChange:he,manualTabActivation:_e,onTabChange:ee}=this.props,de=this.getVisibleTabIds(),Ie=this.getTabIndexById(ae.target.id),ce=Ie>=de.length-1?0:Ie+1;if(this.focusTab(ce),_e)return;const j=de[ce];j!==this.overflowTabId&&(he==null?void 0:he(j))!==!1&&this.setState(()=>({selectedTabId:j}),()=>ee==null?void 0:ee(j,ae))}onPreviousArrow(ae){const{onTabWillChange:he,manualTabActivation:_e,onTabChange:ee}=this.props,de=this.getVisibleTabIds(),Ie=this.getTabIndexById(ae.target.id),ce=Ie===0?de.length-1:Ie-1;if(this.focusTab(ce),_e)return;const j=de[ce];j!==this.overflowTabId&&(he==null?void 0:he(j))!==!1&&this.setState(()=>({selectedTabId:j}),()=>ee==null?void 0:ee(j,ae))}getNextTabId(){const{defaultTabId:ae,tabs:he,currentTabId:_e}=this.props,ee=ae?this.getTabIndexById(ae):void 0,de=_e?this.getTabIndexById(_e):void 0;return _e&&de?_e:ae&&ee?ae:he[0].id}updateSelectedTab(){if(!this._isMounted||!this.props.tabs.length)return;const ae=this.getNextTabId();ae!==this.state.selectedTabId&&this.setState(()=>({selectedTabId:ae}))}focus(){if(this.isHidden)return this.focusWhenVisible=!0,!1;this.focusWhenVisible=!1;const{current:ae}=this.focusedTabRef;if(ae)return ae.focus(),!0;const he=this.props.currentTabId||this.state.selectedTabId,_e=this.getTabIndexById(he)||0;return this.focusTab(_e),!0}focusTab(ae){this.setState(()=>({focusedTabIndex:ae}))}selectTab(ae,he){const{onTabWillChange:_e,onTabChange:ee}=this.props,de=this.getTabById(ae);if(!de)return null;if((_e==null?void 0:_e(ae))!==!1){if(de.isExternalLink){var Ie;return(Ie=de.onClick)===null||Ie===void 0?void 0:Ie.call(de,ae,he)}return this.setState(()=>({selectedTabId:ae}),()=>{if(ee==null||ee(ae,he),this.props.focusOnFirstFocusableChildOnChange){const ce=this.panelRef&&this.panelRef.current,j=(0,k.Fp)(ce);j==null||j.focus()}}),null}}updateFocusedTabIndex(){const ae=this.isSelectedTabVisible()?this.state.selectedTabId:this.overflowTabId;this.setState(()=>({focusedTabIndex:this.getVisibleTabIds().indexOf(ae)}))}onTabClick(ae,he){var _e;const ee=this.getTabById(ae);ee&&(ee.isExternalLink||this.selectTab(ee.id,he),ee==null||(_e=ee.onClick)===null||_e===void 0||_e.call(ee,ee.id,he))}get isHidden(){return!!this.props.maxSize&&!this.state.isResizeCalculationCompleted}renderOverflowTabLabel(ae){const he=L.t("More\u2026",{fallbackHash:"4ac8baf107e91d808d6840701812f4abed7fa3b5",fallbackHashNs:"mentions"});if(this.isSelectedTabVisible())return he;const _e=this.getTabById(ae);if(!_e)return he;const ee=_e["aria-label"]||_e.label||_e.title;return!ee||!O(ee)?he:L.t("More: {selectedTabLabel}",{selectedTabLabel:ee,fallbackHash:"4ac8baf107e91d808d6840701812f4abed7fa3b5",fallbackHashNs:"mentions"})}renderTabsItem(ae,he){const{tabs:_e,fullWidthMenu:ee,orientation:de,iconPosition:Ie,focusOnMount:ce}=this.props,j=this.state.focusedTabIndex===he,N=j?this.focusedTabRef:void 0,b=ae.autoClogProps?{...this.autoClogProps,...ae.autoClogProps,elementType:M.ElementType.TAB}:this.autoClogProps,R=he===_e.length-1?this.lastVisibleTabRef:void 0,K=R?(0,D.A)(N,R):N,B=this.props.currentTabId||this.state.selectedTabId,$=B===ae.id;return ae.id===this.overflowTabId?t.createElement(i,{renderMenu:this.renderOverflowMenu,position:"bottom-left",label:this.renderOverflowTabLabel(B),isSelected:!this.isSelectedTabVisible(),isFocused:j,ref:K,id:ae.id,key:ae.id}):t.createElement(r.A,{key:ae.id,id:ae.id,icon:ae.icon,svgIcon:ae.svgIcon,customIcon:ae.customIcon,label:ae.label||ae.title,onClick:this.onTabClick,autoClogProps:b,isSelected:$,isFocused:j,focusOnMount:ce,isDisabled:ae.isDisabled,fullWidth:ee||de==="vertical",titleCount:ae.titleCount,maxTitleCount:ae.maxTitleCount,"aria-label":ae["aria-label"],"aria-describedby":ae["aria-describedby"],"data-qa":ae["data-qa"]||"tabs_item","aria-haspopup":ae["aria-haspopup"],ref:K,formatCount:this.props.formatCount,isLoading:ae.isLoading,isCountLoading:ae.isCountLoading,iconPosition:Ie,className:ae.className,contextMenuAriaLabel:ae.contextMenuAriaLabel,contextMenuTemplate:ae.contextMenuTemplate})}renderTabsItems(){return this.getVisibleTabs().map((he,_e)=>{typeof he.label!="string"&&!t.isValidElement(he.label)&&typeof he.title!="string"&&!t.isValidElement(he.title)&&!he["aria-label"]&&((0,P.Cu)()||(0,P.b3)())&&(0,x.Wo)().error("Tabs requires either a label of type string, or an aria-label.");const ee=this.renderTabsItem(he,_e);return he.renderWrapper?t.createElement(t.Fragment,{key:he.id},he.renderWrapper(ee)):ee})}renderOverflowMenu(ae){var he;const{selectedTabId:_e}=this.state,ee=(he=this.getHiddenTabs())===null||he===void 0?void 0:he.map(de=>({label:de.label||de.title,id:de.id,click:Ie=>this.onTabClick(de.id,Ie),key:de.id,type:c.A.radio,checked:de.id===_e,icon:de.svgIcon?t.createElement(o.A,S({size:"18"},de.svgIcon)):null,className:"c-tabs__tab_overflow_menu_item"}));return t.createElement(a.a,S({width:"200px"},ae,{template:ee}))}renderTabPanelLabel(ae){const he=this.getTabById(ae);if(!he)return;const _e=he["aria-label"]||he.label||he.title;if(O(_e))return _e}render(){var ae;const{fullHeight:he,fullWidthMenu:_e,className:ee,orientation:de,tabMenuClassnames:Ie,tabPanelClassnames:ce,ariaLabel:j,currentTabId:N,maxSize:b}=this.props,R=N||this.state.selectedTabId;var K;const B=(K=(ae=this.getTabById(R))===null||ae===void 0?void 0:ae.content)!==null&&K!==void 0?K:"",$=(0,n.A)(ee,{"c-tabs__tab_container--full_height":he,"c-tabs__tab_container--vertical":de==="vertical","c-tabs__tab_menu--overflow_ellipsis":!!b}),Z=(0,n.A)(Ie,"c-tabs__tab_menu",{"c-tabs__tab_menu--full_width":_e,"c-tabs__tab_menu--vertical":de==="vertical","c-tabs__tab_menu--hidden":this.isHidden}),re=(0,n.A)(ce,{"c-tabs__tab_panel--vertical":de==="vertical"});return t.createElement("div",{className:$,"data-qa":"tabs_full_height_class"},t.createElement("div",{role:"tablist",className:Z,"data-qa":"tabs_full_width_class",onKeyDown:this.onKeyDown,onFocus:this.onFocus,"aria-orientation":de,"aria-label":j,ref:this.tabsContainerRef},this.renderTabsItems()),B&&t.createElement(p.A,{tabContent:B,fullHeight:he,ref:this.panelRef,className:re,"aria-label":this.renderTabPanelLabel(R)}))}constructor(ae){var he;super(ae),(0,C.v)(this,["onKeyDown","onFocus","onTabClick","onResize","renderOverflowMenu","setVisibleTabs"]),this.focusedTabRef=t.createRef(),this.panelRef=t.createRef(),this.tabsContainerRef=t.createRef(),this.lastVisibleTabRef=t.createRef(),this.resizeListener=null,this._isMounted=!1,this.focusWhenVisible=!1,ae.autoClogProps&&(this.autoClogProps={...ae.autoClogProps,elementType:M.ElementType.TAB});const _e=ae.currentTabId||ae.defaultTabId||((he=ae.tabs[0])===null||he===void 0?void 0:he.id),ee=this.getTabIndexById(_e);this.state={selectedTabId:_e,focusedTabIndex:ee!==-1?ee:0,numOfVisibleTabsShown:this.getVisibleTabs().length,isResizeCalculationCompleted:!1},this.overflowTabId=`sk-overflow-tab-${(0,Y.A)()}`}},"Tabs");ve.displayName="Tabs",ve.defaultProps={onTabChange:s.A,orientation:"horizontal",iconPosition:"right",manualTabActivation:!1,focusOnFirstFocusableChildOnChange:!0};const Q=ve},4275787242:(z,A,e)=>{"use strict";e.d(A,{A:()=>a});var t=e(3134334389),n=e(3708320478),s=e(5733135148);const a=u(c=>{let{children:o,duration:r,svgIconProps:l,toastClasses:_,position:d,offsetX:i,offsetY:m,showCloseButton:h,onCloseComplete:v,shouldAutoFade:y,shouldSkipToastDismissal:T,closeButtonClasses:I,svgIconClassName:p,announceContentAsAssertive:g}=c;return t.createElement(s.Ay,{fadeDelay:r,svgIconClassName:p,svgIconProps:l,toastClasses:_,offsetX:i,offsetY:m,position:d,showCloseButton:h,onCloseComplete:v,shouldAutoFade:y,shouldSkipToastDismissal:T,closeButtonClasses:I},t.createElement(n.z,{assertive:g},o))},"Toast");a.displayName="Toast",a.defaultProps={duration:6e3}},2855755676:(z,A,e)=>{"use strict";e.d(A,{F:()=>t,n:()=>n});const t={small:"small",medium:"medium",large:"large"},n={small:22,medium:26,large:32}},561151542:(z,A,e)=>{"use strict";e.d(A,{A:()=>J,L:()=>L});var t=e(3134334389),n=e(5255740490),s=e(7715417323),a=e(126225536),c=e(1030162945),o=e(7969928607),r=e(1407713935),l=e(4559887502),_=e(8798294025),d=e(6839188756),i=e(6308822),m=e(5387475318),h=e(5289504844),v=e(8460568133),y=e(5415825258),T=e(1610251172),I=e(7193040700),p=e(3267847539),g=e(8683010724),E=e(5484624422),f=e(2312625946),O=e(82287009),C=e(8040098042),M=e(6112179660),D=e(4327331459),P=e(3707193570),k=e(4862221402),x=e(9391594207),F=e(2235302340),W=e(9101533895),Y=e(3677514771);function S(){return S=Object.assign||function(G){for(var X=1;X<arguments.length;X++){var te=arguments[X];for(var le in te)Object.prototype.hasOwnProperty.call(te,le)&&(G[le]=te[le])}return G},S.apply(this,arguments)}u(S,"_extends");let L=u(class extends t.Component{renderChannelToken(X){const{channel:te,showMemberCounts:le,isSelected:ve,channelHasNonUniqueName:Q}=this.props;let Ae;return(0,r.LI)(te)?Ae=t.createElement(h.Ay,{id:(0,_.e)(te),className:"c-token_channel"}):(0,r.yz)(te)?Ae=t.createElement(v.A,{mpim:te,className:"c-token_channel",isActive:ve}):Ae=t.createElement(m.A,{channel:te,className:"c-token_channel",displayFormerNames:!1,showFilledIcon:!0,showMemberCounts:le,showTeamForLocalChannel:Q}),t.createElement("span",{className:X,"data-qa":"token_channel"},Ae)}renderContent(){const{isLoading:X,isUnknown:te,isError:le,isMemberError:ve,isTeamError:Q,isInvalid:Ae,channel:ae,memberId:he,teamName:_e,userGroupId:ee,channelSection:de,contentInnerClassName:Ie,emailTeam:ce}=this.props;let j=(0,n.A)("c-token_content__inner",Ie);return X&&!Ae?(j+=" c-token_content__inner--loading",this.renderLoadingToken(j)):te?(j+=" c-token_content__inner--unknown",this.renderUnknownToken(j)):le?(j+=" c-token_content__inner--error",this.renderErrorToken(j)):ce?(j+=" c-token_content__inner--email_with_team_icon",this.renderEmailTokenWithTeamIcon(j)):he&&ve?(j+=" c-token_content__inner--error",this.renderMemberErrorToken(j)):he?(j+=" c-token_content__inner--member",this.renderMemberToken()):ae?this.renderChannelToken(j):_e&&Q?(j+=" c-token_content__inner--error",this.renderTeamErrorToken(j)):_e?(j+=" c-token_content__inner--team",this.renderTeamToken(j)):de?(j+=" c-token_content__inner--channel_section",this.renderChannelSectionToken(j)):ee?(j+=" c-token_content__inner--usergroup",this.renderUserGroupToken(j)):this.renderPlainToken(j)}renderErrorToken(X){const{label:te}=this.props;return t.createElement("div",{className:"inline_flex"},t.createElement("span",{className:"c-token__error_icon_container"},t.createElement(g.A,{size:"18",name:"warning","data-qa":"token_error_icon"})),t.createElement("span",{className:(0,n.A)(X,"c-token_content__label"),"data-qa":"token_error"},te))}renderLoadingToken(X){const{size:te,label:le}=this.props;return t.createElement("div",{className:"inline_flex"},t.createElement("span",{className:"c-token__loading_icon_container"},t.createElement(i.A,S({},te?{size:te}:{},{"data-qa":"token_loading_icon"}))),t.createElement("span",{className:(0,n.A)(X,"c-token_content__label"),"data-qa":"token_loading"},le))}renderMemberToken(){const{forceRealName:X,isDisabled:te,memberId:le,size:ve}=this.props;return t.createElement(h.Ay,{id:le,isDeactivated:te,showPresence:!1,showTooltip:!1,useShortMode:!0,forceRealName:X,showStatus:!1,className:"c-token--member c-token__avatar margin_right_25","data-qa":"token_member",tokenSize:ve})}renderMemberErrorToken(X){const{forceRealName:te,isDisabled:le,memberId:ve,size:Q}=this.props;return t.createElement(h.Ay,{id:ve,isDeactivated:le,showPresence:!1,showTooltip:!1,useShortMode:!0,forceRealName:te,showStatus:!1,className:(0,n.A)(X,"c-token--member c-token__avatar"),"data-qa":"token_member",tokenSize:Q})}renderIcon(){const{icon:X,svgIcon:te}=this.props;return te?t.createElement("span",{className:"c-token_content__icon"},t.createElement(g.A,S({"data-qa":"token_plain_icon",inline:!0,size:"inherit"},te))):X?t.createElement(T.A,{"data-qa":"token_plain_icon",size:"inherit",className:"c-token_content__icon",type:X,inline:!0}):null}renderPlainToken(X){const{label:te}=this.props;return t.createElement("span",{className:X},this.renderIcon(),t.createElement("span",{className:"c-token_content__label","data-qa":"token_plain_label"},t.createElement(o.A,{text:te,inputIsEscaped:!0,emojiSize:c.lw.MEDIUM})))}renderEmailTokenWithTeamIcon(X){const{icon:te,label:le,emailTeam:ve}=this.props;return t.createElement("span",{className:X},te&&t.createElement(T.A,{"data-qa":"token_email_with_team_icon_icon",size:"inherit",className:"c-token_content__icon margin_right_50",type:te,inline:!0}),t.createElement("span",{className:"c-token_content__label margin_right_25","data-qa":"token_email_with_team_icon_content_label"},t.createElement(o.A,{text:le,inputIsEscaped:!0,emojiSize:c.lw.MEDIUM})),ve&&t.createElement("span",{className:"c-member__secondary_content"},t.createElement(E.A,{team:ve,"data-qa":"token_email_with_team_icon",size:h.Cg,className:"c-member__team_icon"})))}renderTeamToken(X){const{teamId:te,teamName:le}=this.props;return t.createElement("div",{className:"inline_flex"},t.createElement(E.A,{id:te,size:26,className:"c-token__team_icon","data-qa":"token_team_icon"}),t.createElement("span",{className:(0,n.A)(X,"c-token_content__label"),"data-qa":"token_team_name"},le))}renderTeamErrorToken(X){const{teamId:te,teamName:le}=this.props;return t.createElement("div",{className:"inline_flex"},t.createElement(E.A,{id:te,size:26,className:"c-token__team_icon","data-qa":"token_team_icon_error"}),t.createElement("span",{className:(0,n.A)(X,"c-token_content__label"),"data-qa":"token_team_name_error"},le))}renderChannelSectionToken(X){const{channelSection:te}=this.props;return te?t.createElement("span",{className:(0,n.A)(X,"c-token_content__label")},t.createElement(a.A,{channelSection:te})):null}renderUnknownToken(X){const{label:te}=this.props;return t.createElement("div",{className:"inline_flex"},t.createElement("span",{className:"c-token__unknown_icon_container"},t.createElement(g.A,{size:"18",name:"emoji-missing",variation:"filled","data-qa":"token_unknown_icon"})),t.createElement("span",{className:(0,n.A)(X,"c-token_content__label"),"data-qa":"token_unknown"},te))}renderUserGroupToken(X){const{userGroupId:te}=this.props;return t.createElement(y.A,{id:te,showDescription:!1,className:(0,n.A)(X,"c-token_content__label")})}render(){const{isDisabled:X,isInvalid:te,isError:le,memberId:ve,isMemberError:Q,isTeamError:Ae,isUnknown:ae,isLoading:he,isSelected:_e,size:ee,hoverText:de,tabIndex:Ie,contentEditable:ce,className:j,onMouseDown:N,enableProfileHoverCard:b,customizeProfileHoverCardProps:R,isRestricted:K}=this.props,B=(0,n.A)("c-token",j,`c-token--${ee}`,{"c-token--selected":_e,"c-token--disabled":X,"c-token--invalid":te,"c-token--restricted":K,"c-token--error":le||Q||Ae,"c-token--unknown":ae,"c-token--loading":he}),$=this.renderContent();let Z=$;de&&$?Z=t.createElement(f.Ay,{tip:de},$):ve&&b&&(Z=(0,O.yN)({...R||{},memberId:ve,children:$}));const re=this.props.renderIcon(this.props);return t.createElement("span",{className:B,"data-id":this.props["data-id"],"data-qa":this.props["data-qa"],tabIndex:Ie,contentEditable:ce,onMouseDown:N},t.createElement("span",{className:"c-token__content","data-qa":"token_content"},Z),re)}},"Token");L.displayName="Token",L.defaultProps={"data-qa":"select_token",isDisabled:!1,isInvalid:!1,isError:!1,isUnknown:!1,isLoading:!1,isSelected:!1,size:I.hu.MEDIUM,renderIcon:s.A,forceRealName:!1,contentEditable:!1,channelHasNonUniqueName:!1};const w=u((G,X)=>{const{entityId:te,disableIdParsing:le}=X;let ve;(0,D.A)(te)&&!le&&(ve=te);let Q,Ae;if(((0,P.Ay)(te)||(0,P.JV)(te))&&!le){const Ie=(0,Y._J)(G,te);Ie&&(Q=te,Ae=(0,d.F1)(Ie))}let ae;(0,M.A)(te)&&!le&&(ae=(0,F.xe)(G,te));let he;(0,k.A)(te)&&!le&&(he=te);const _e=(0,W.OL)(G,te),ee=(0,W.MS)(G);let de;return(0,C.A)(te)&&_e&&(de=(0,l.i)(ee,_e)),{channel:_e,memberId:ve,teamName:Ae,teamId:Q,userGroupId:he,channelSection:ae,channelHasNonUniqueName:de}},"mapStateToProps"),J=(0,p.nM)((0,x.N)(w,null)(L))},2312625946:(z,A,e)=>{"use strict";e.d(A,{Ay:()=>k,PK:()=>I,Ws:()=>C,YU:()=>i.Y,n1:()=>p});var t=e(3134334389),n=e(862210999),s=e(4332857818),a=e(4505564445),c=e(1293324111),o=e(1641606663),r=e(7331519201),l=e(348699080),_=e(1523057168),d=e(5249175977),i=e(1926356522),m=e(8214116048),h=e(5751973043),v=e(8869734951),y=e(3821598679);function T(){return T=Object.assign||function(F){for(var W=1;W<arguments.length;W++){var Y=arguments[W];for(var S in Y)Object.prototype.hasOwnProperty.call(Y,S)&&(F[S]=Y[S])}return F},T.apply(this,arguments)}u(T,"_extends");const I=300,p=60,g=3,E=3;let f=u(class{track(W){this.instance&&W!==this.instance&&this.instance.hide(),this.instance=W}stopTracking(W){W===this.instance&&(this.instance=void 0)}hideActive(){this.instance&&(this.instance.hide(),this.instance=void 0)}},"TooltipManager");const O=new f;function C(){O.hideActive()}u(C,"hideVisibleTooltip");function M(F){const W=u(Y=>((Y==null?void 0:Y.offsetWidth)||0)<((Y==null?void 0:Y.scrollWidth)||0)||((Y==null?void 0:Y.offsetHeight)||0)<((Y==null?void 0:Y.scrollHeight)||0),"retIsTruncated");if(F!=null&&F.querySelector){const Y=F.querySelector(".c-truncate");if(Y)return W(Y)}return W(F)}u(M,"isElementTruncated");function D(F,W){return F.width.toFixed(2)===(W==null?void 0:W.width.toFixed(2))&&F.height.toFixed(2)===(W==null?void 0:W.height.toFixed(2))&&F.left.toFixed(2)===(W==null?void 0:W.left.toFixed(2))&&F.right.toFixed(2)===(W==null?void 0:W.right.toFixed(2))&&F.top.toFixed(2)===(W==null?void 0:W.top.toFixed(2))&&F.bottom.toFixed(2)===(W==null?void 0:W.bottom.toFixed(2))}u(D,"areBoundsEqual");const P=t.forwardRef((F,W)=>{let{children:Y,position:S=m.yX.Top,delay:L=150,shouldFade:w=!0,tip:J,tipClassName:G,tipArrowOffset:X,"data-qa":te,status:le=i.Y.Info,offsetX:ve=0,offsetY:Q=0,zIndex:Ae="menu",shouldForceVisible:ae=!1,shouldOnlyShowWhenTruncated:he=!1,onShow:_e,onHide:ee,onClick:de,maxWidth:Ie,hideFromScreenReader:ce=!1,automaticallyPositionTip:j=!0,tipAnchorRef:N,...b}=F;const R=t.Children.only(Y),{windowRef:K}=(0,t.useContext)(o.M),B=(0,t.useRef)(),$=(0,t.useRef)(null),Z=(0,t.useRef)(),re=(0,t.useRef)(!1),[Te,Ce]=(0,t.useState)(!1),[Pe,fe]=(0,t.useState)(!1),[pe,q]=(0,t.useState)(!1),[se,ge]=(0,t.useState)(),Oe=(0,t.useContext)(_.A),Le=M(Z.current),We=Le||!he,Re=ae||Te||Pe,we=!!se&&We,Je=(0,t.useMemo)(()=>(0,v.P)($,W),[W]),it=(0,t.useCallback)((Xt,rn)=>j?{top:Xt,left:rn}:void 0,[j]),et=(0,t.useMemo)(()=>`sk-tooltip-${(0,y.A)()}`,[]),lt=(0,t.useCallback)(()=>{q(!0)},[]),[nt,at]=(0,r.i)(lt),ze=(0,t.useMemo)(()=>({id:et,hide:()=>{at(),re.current&&q(!1),ee==null||ee()}}),[et,at,ee]),Ke=(0,t.useCallback)(()=>{at(),O.stopTracking(ze)},[ze,at]),He=(0,t.useCallback)(()=>{ae||Oe?q(!0):nt(L),_e==null||_e({isTruncated:Le}),O.track(ze)},[ae,Oe,_e,Le,ze,nt,L]),Ye=(0,t.useCallback)(()=>{Ke(),pe&&(q(!1),ee==null||ee())},[Ke,pe,ee]),_t=(0,t.useCallback)(Xt=>{R.props.onKeyDown&&R.props.onKeyDown(Xt),Xt.which===a._f&&pe&&Oe&&(Xt.nativeEvent.stopImmediatePropagation(),Xt.stopPropagation(),q(!1))},[q,pe,Oe,R.props]),vt=(0,t.useCallback)(Xt=>{R.props.onMouseEnter&&R.props.onMouseEnter(Xt),Ce(!0),pe||(B.current=Xt)},[R.props,pe]),Tt=(0,t.useCallback)(Xt=>{R.props.onFocus&&R.props.onFocus(Xt),Oe&&fe(!0)},[R.props,Oe]),Lt=(0,t.useCallback)(Xt=>{R.props.onMouseLeave&&R.props.onMouseLeave(Xt),Ce(!1),B.current=void 0},[R.props]),ft=(0,t.useCallback)(Xt=>{R.props.onBlur&&R.props.onBlur(Xt),fe(!1)},[R.props]);(0,t.useEffect)(u(function(){Z.current||(Z.current=(0,s.findDOMNode)($.current))},"syncChildDOMNodeRef")),(0,t.useEffect)(()=>{const Xt=K.deref(),rn=u(Zt=>{Zt.which===a._f&&Ye()},"hoverEscHide");if(Xt)return Te?(Xt.addEventListener("keydown",rn),()=>{Xt.removeEventListener("keydown",rn)}):()=>{Xt.removeEventListener("keydown",rn)}},[Te,K,Ye]),(0,t.useEffect)(()=>(re.current=!0,()=>{re.current=!1}),[]),(0,l.A)(u(function(){let rn=Z.current;if(N!=null&&N.current&&(rn=(0,s.findDOMNode)(N.current)),Re&&rn){const Zt=se,Ht=rn.getClientRects();let Bt=Ht[0];if(B.current){const yt=B.current,Rt=Array.from(Ht).find(xe=>yt.clientY>=xe.top&&yt.clientY<=xe.bottom&&yt.clientX>=xe.left&&yt.clientX<=xe.right);Rt&&(Bt=Rt)}if(!Bt)return;const Qt=K.deref(),sn=Qt?Qt.scrollX||Qt.pageXOffset:0,Mn=Qt?Qt.scrollY||Qt.pageYOffset:0,ct={height:Bt.height,width:Bt.width,left:Bt.left+sn,right:Bt.right+sn,top:Bt.top+Mn,bottom:Bt.bottom+Mn};D(ct,Zt)||ge(ct)}},"maybeCalculateContentBounds"),[Re,N]),(0,l.A)(u(function(){we&&Re?He():Ye()},"showOrHideTooltip"),[we,Re]);const mt=R.props["aria-label"],Yt=(0,t.useMemo)(()=>mt===J||ce?h.t0:{"aria-describedby":pe?et:void 0},[mt,ce,pe,J,et]),nn=(0,t.useMemo)(()=>t.cloneElement(R,{...b,...R.props,...Yt,onClick:de||R.props.onClick,onFocus:Tt,onBlur:ft,onKeyDown:_t,onMouseEnter:vt,onMouseLeave:Lt,"data-sk":"tooltip_parent"}),[Yt,R,ft,de,Tt,_t,vt,Lt,b]),jt=(0,t.useMemo)(()=>{if(X)return X;if(se)return se.width/2},[se,X]),gn=(0,t.useMemo)(()=>({position:S,arrowOffset:jt,status:le,className:G,"data-qa":te,maxWidth:Ie}),[te,Ie,S,le,G,jt]),on=(0,t.useMemo)(()=>pe?t.createElement(d.AM,{isOpen:pe,position:S,targetBounds:se,overlayClassName:"c-popover c-popover--no-pointer",offsetX:ve,offsetY:Q,allowanceX:g,allowanceY:E,key:"tooltip-popover",zIndex:Ae,shouldFocusAfterRender:!1,shouldFade:w,ariaHideApp:!1,tryOppositePosition:!0,id:et,ariaRole:"tooltip",dataAttributes:{qa:"tooltip-popover"},disableOverlaysContextProvider:!0},Xt=>{let{position:rn,top:Zt,left:Ht,targetBounds:Bt}=Xt;const Qt=(0,n.A)(J)?J({hasKeyboardFocus:Oe}):J;return t.createElement(i.A,T({},gn,{position:rn,tipBounds:it(Zt,Ht),targetBounds:Bt}),Qt)}):null,[pe,se,S,ve,Q,Ae,w,J,Oe,gn,it,et]);return t.createElement(t.Fragment,null,t.createElement(c.V,{ref:Je},nn),on)});P.displayName="Tooltip";const k=P;Object.defineProperty({isElementTruncated:M,areBoundsEqual:D},"isElementTruncated",{get:()=>M,set:F=>{M=F}})},5184226701:(z,A,e)=>{"use strict";e.d(A,{BD:()=>t,Cz:()=>a,LH:()=>c,LX:()=>o,T0:()=>n,UC:()=>s});const t={SharedChannel:"shared_channel",SingleChannelGuest:"ultra_restricted",MultiChannelGuest:"restricted",Member:"regular",ExternalSharedWorkspaceMember:"external_shared_workspace_member"},n={User:"user_invite",UserGroup:"user_group_invite",Email:"email_invite",Member:"member"},s={OpenConfirmationScreen:"add_to_channel_open_confirmation_screen"},a={OpenInviteTypeExternal:"comprehensible_invites_open_invite_type_external",InviteTypeExternalDefaultActionDisallowed:"comprehensible_invites_invite_type_external_default_action_disallowed",OpenSharedChannelNoteExternal:"comprehensible_invites_open_shared_channel_note_external",OpenSharedChannelExternalLimitedExternal:"comprehensible_invites_open_shared_channel_external_limited_external",OpenInviteTypeInternal:"comprehensible_invites_open_invite_type_internal",InviteTypeInternalDefaultActionDisallowed:"comprehensible_invites_invite_type_internal_default_action_disallowed",OpenSharedChannelNoteInternal:"comprehensible_invites_open_shared_channel_note_internal",OpenSharedChannelExternalLimitedInternal:"comprehensible_invites_open_shared_channel_external_limited_internal"};class c{constructor(l){this.ok=l.ok,this.invitee=l.email,this.inviteeType=n.Email,this.accessType=l.inviteType||t.Member,this.error=l.error}}u(c,"InviteResult");function o(r){return r===t.Member||r===t.MultiChannelGuest||r===t.SingleChannelGuest}u(o,"isBaseInviteType")},8178126019:(z,A,e)=>{"use strict";e.d(A,{Ao:()=>o.k,FQ:()=>c.q,IU:()=>l,Jg:()=>s.G,RW:()=>n.jB,YB:()=>d,fe:()=>t.T,iV:()=>_,mF:()=>a.I,on:()=>r,qU:()=>n.Sv});var t=e(1614054140),n=e(4349526263),s=e(5216556985),a=e(8485081141),c=e(6515569951),o=e(2164700852);const r={Generic:"generic",InternalInviteNotMember:"internal_not_member",InternalInviteNotMemberCanRequest:"internal_not_member_can_request",InternalInviteNoAccess:"internal_no_access",InternalInviteWasPreviouslyConnected:"internal_was_previously_connected",InternalInviteWasPreviouslyConnectedButNotMember:"internal_was_previously_connected_but_not_member",InvalidRecipientTeam:"invalid_recipient_team"};function l(i){return!!i&&!!i.channel}u(l,"isSharedChannelInvite");function _(i){return!!i&&!l(i)&&!d(i)}u(_,"isDirectMessageInvite");function d(i){return!!i&&!!i.shared_workspace}u(d,"isSharedWorkspaceInvite")},266169032:(z,A,e)=>{"use strict";e.d(A,{M:()=>t});const t={shareChannelCreate:"share_channel_create",channelInviteModal:"channel_invite_modal",scdmFreeStartTrialBanner:"scdm_free_start_trial_banner",messageLimitTrialOfferModal:"message_limit_trial_offer_modal",huddlesTrialEntryPointModal:"huddles_trial_entry_point_modal",slackConnectTrialEntryPointModal:"slack_connect_trial_entry_point_modal",canvasTrialOfferModal:"canvas_trial_offer_modal",workflowBuilderFreemiumTrialOfferModal:"unlimited_workflows_trial_offer_modal",noCommitment:"no_commitment",autoCharge:"auto_charge"}},1305633231:(z,A,e)=>{"use strict";e.d(A,{A:()=>N});var t=e(6696292586),n=e(498506970),s=e(1835177371),a=e(8276911661),c=e(9101533895),o=e(8847766420),r=e(3037015781),l=e(9289081806),_=e(6495946979),d=e(9262712126),i=e(1407713935),m=e(5577180258),h=e(4282439381),v=e(6188550180),y=e(8389327410),T=e(8193414630),I=e(2756015265),p=e(972463850),g=e(4695291896),E=e(6345573615),f=e(8525228540);function O(b){if(b<=0)return"";let R="",K=b;for(;K>0;)K-=1,R=String.fromCharCode("a".charCodeAt(0)+K%26)+R,K=Math.floor(K/26);return R}u(O,"convertNumberToLetterIncrement");const C=["","c","cc","ccc","cd","d","dc","dcc","dccc","cm","","x","xx","xxx","xl","l","lx","lxx","lxxx","xc","","i","ii","iii","iv","v","vi","vii","viii","ix"];function M(b){if(b<=0)return"";const R=b.toString().split("");let K="";for(let Z=2;Z>=0;Z--){const re=parseInt(R.pop()||"0",10);K=(C[re+Z*10]||"")+K}const B=R.join("")||"0",$=parseInt(B,10)+1;return Array($).join("m")+K}u(M,"convertNumberToRomanNumeral");var D=e(735940183),P=e(3270010894),k=e(8983164438),x=e(6795568989),F=e(3695531806),W=e(2188787324),Y=e(937317117),S=e(3574134525);const L=new D.Ay("channel_token"),w=new D.Ay("emoji"),J=u((b,R)=>R.text||"","textToText"),G=u((b,R)=>`@${R.range}`,"broadcastToText"),X=u((b,R)=>R.value||"","colorToText"),te=u((b,R,K)=>{let{linkFormat:B}=K;const{text:$="",url:Z=""}=R;if(!$&&!Z)return"";if(!$)return Z;switch(B){case"default":return $;case"prefer_url":return Z;case"bracket":return`[ ${$}: ${Z} ]`;default:(0,T.Kh)(B)}},"linkToText"),le=u((b,R)=>{const K=(0,a.nv)(b,R.user_id);return`@${(0,d.Gt)(K)||R.user_id}`},"userToText"),ve=u((b,R)=>{const K=(0,s.lJ)(b,R.usergroup_id);if(K===!1)return(0,g.A)({userGroupHandle:"",isUnknown:!0,isNonExistent:!0});const B=(0,r.lv)(K);var $;return(0,g.A)({userGroupHandle:B?"":($=K.handle)!==null&&$!==void 0?$:"",isUnknown:(0,r.mX)(K),isNonExistent:(0,r.lv)(K)})},"userGroupToText"),Q=u((b,R)=>{const K=(0,c.OL)(b,R.channel_id);var B;const $=(B=(0,l.SB)(b,K,{publicChannelIncludeHashSign:!1,imIncludeAtSign:!1}))!==null&&B!==void 0?B:"",Z=(0,r.mX)(K),re=(0,r.lv)(K),Te=(0,i.Zp)(K),Ce=(0,_.b)(K);return re||Te&&!Ce?`#${L.t("private-channel")}`:(0,E.A)({channelName:$,isUnknown:Z,isNonExistent:re})},"channelToText"),Ae=u((b,R,K)=>{let{convertEmoji:B}=K;const $=(0,v.A)(R,{state:b,localize:!1}),Z=(0,f.bR)({state:b,locale:(0,D.Yp)(),name:$});return B==="phrase"?(0,I.A)(Z||"",{state:b})||"":B==="unicode"&&(R!=null&&R.unicode)&&(0,x.d)(R.unicode)?(0,F.z)({codePointLikeString:R.unicode})||"":B==="unicode"&&!(R!=null&&R.unicode)?(0,p.A)(b,{messageText:$,teamId:(0,o.ZT)(b)}):Z??""},"emojiToText"),ae=u((b,R)=>{const K=(0,Y.Lp)(b,R.file_id);return(0,W.SB)(K)||R.file_id},"fileToText"),he=u((b,R,K)=>{let{convertEmoji:B}=K;const $=(0,v.A)({...R,type:y.Lv.EMOJI},{state:b,localize:!1}),Z=(0,f.bR)({state:b,locale:(0,D.Yp)(),name:$});if(B==="phrase"){var re;return(re=(0,I.U)(Z||"",R.size||0,{state:b}))!==null&&re!==void 0?re:""}var Te;const Ce=(Te=B==="unicode"?(0,p.A)(b,{messageText:$,teamId:(0,o.ZT)(b)}):Z)!==null&&Te!==void 0?Te:"";return(0,h.x)(b)?w.t("{size} {emojiName} {size, plural, =1 {emoji} other {emojis}}",{emojiName:Ce,size:R.size}):`${R.size} ${Ce} emojis`},"emojiGroupToText"),_e=u((b,R)=>!R.timestamp&&R.fallback?R.fallback:(0,P.Yq)(R.timestamp,R.format,{...R.fallback&&{fallbackString:R.fallback}}),"dateToText"),ee=u((b,R)=>{const K=b.workflowBuilder.workflowEditor.variables.list,B=(0,S.x)(K,R.id);return B?`@${B.label}`:R.id},"workflowTokenToText"),de={[y.Lv.TEXT]:J,[y.Lv.USER]:le,[y.Lv.USERGROUP]:ve,[y.Lv.CHANNEL]:Q,[y.Lv.BROADCAST]:G,[y.Lv.DATE]:_e,[y.Lv.COLOR]:X,[y.Lv.LINK]:te,[y.Lv.EMOJI]:Ae,[y.Lv.FILE]:ae,[y.Lv.CANVAS]:ae,[y.Lv._EMOJI_GROUP]:he,[y.Lv.WORKFLOWTOKEN]:ee};function Ie(b){let{indent:R}=b;return!(0,t.A)(R)||R%3===0?"\u2022":R%3===1?"\u25E6":R%3===2?"\u25A0":"\u2022"}u(Ie,"getUnorderedListCharacter");function ce(b){let{indent:R,incr:K}=b;return!(0,t.A)(R)||R%3===0?K:R%3===1?O(K):R%3===2?M(K):K}u(ce,"getOrderedListCharacter");function j(b,R){return(0,h.x)(b)?(0,m.A)((0,n.A)(R)):R}u(j,"maybeGroupEmojies");function N(b,R){let{convertEmoji:K="text",linkFormat:B="default"}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!R||!R.length)return"";const $=u(Te=>{if(!Te||!Te.elements)return"";const Ce=[];return Te.elements.forEach(Pe=>{if(!Pe||!Pe.type)return;const fe=de[Pe.type];var pe;const q=(pe=fe==null?void 0:fe(b,Pe,{convertEmoji:K,linkFormat:B}))!==null&&pe!==void 0?pe:"";Ce.push(q)}),Ce.join("")},"convertSection"),Z=[];return j(b,R[0].elements).forEach(Te=>{if(!(!Te||!Te.type))if((0,k.C)(Te)){const Ce=Te.offset||0,Pe=Te.indent||0;let fe=1+Ce;Te.elements.forEach(pe=>{const q=$(pe);if(Te.style==="ordered"){const se=ce({indent:Pe,incr:fe});Z.push(`${se}. ${q}.`),fe+=1}else{const se=Ie({indent:Pe});Z.push(`${se} ${q}.`)}})}else Z.push($(Te))}),Z.join(`
`)}u(N,"convertRichTextToPlainText")},6188550180:(z,A,e)=>{"use strict";e.d(A,{A:()=>o});var t=e(8389327410),n=e(8525228540),s=e(735940183),a=e(3829348308),c=e(6795568989);function o(r,l){let{state:_,localize:d}=l;if(!r||r.type!==t.Lv.EMOJI)return"";const i=r.skinTone||r.skin_tone,m=r.unicode;let h;return!m&&i?h=`:${r.name}::skin-tone-${i}:`:!i&&!m?h=`:${r.name}:`:m&&(0,c.d)(m)&&(h=`:${(0,a.qJ)(_,m)}:`),d?(0,n.bR)({state:_,locale:(0,s.Yp)(),name:h})||"":h}u(o,"getEmojiElementAsText")},411655882:(z,A,e)=>{"use strict";e.d(A,{A:()=>a});var t=e(362134992),n=e(9671714094),s=e(8933111773);function a(){return(0,t.A)(Object.entries(n.N).filter(c=>{let[o,r]=c;return r.is_enabled_by_default}).map(c=>{let[o,r]=c;return(0,s.A)(o)}))}u(a,"getAllBroadcastKeywords")},2229186:(z,A,e)=>{"use strict";e.d(A,{A:()=>y});var t=e(362134992),n=e(9101533895),s=e(6113051341),a=e(1407713935),c=e(2350349607),o=e(9289081806),r=e(641827819),l=e(324756633),_=e(8933111773),d=e(2233365467),i=e(1190344069),m=e(9548888903),h=e(9280052135),v=e(3339229351);function y(T,I){const p=(0,n.OL)(T,I),g=(0,h.l)(T);if(!p)return[];const E=[];if((0,r.W)(T,I)&&E.push((0,_.A)("BKeveryone")),((0,c.V)(p)||(0,a.yz)(p))&&(!(0,s.N)(p)||(0,r.W)(T,I))&&(0,l.S)(T,I)&&(E.push((0,_.A)("BKchannel")),E.push((0,_.A)("BKhere"))),(0,i.hm)(T)&&(0,a.U_)(p))switch((0,d.dM)(p)){case m.hM.Account:E.push((0,_.A)("BKsf:accountteam",(0,o.SB)(T,p),!0));break;case m.hM.Opportunity:E.push((0,_.A)("BKsf:dealteam",(0,o.SB)(T,p),!0));break;default:break}if(g){const f=(0,n.Pu)(T,v.Q$);(p==null?void 0:p.id)===(f==null?void 0:f.id)&&E.push((0,_.A)("BKassistant:einstein",null,!1,!0))}return(0,t.A)(E)}u(y,"getBroadcastKeywordsForUser")},755982243:(z,A,e)=>{"use strict";e.d(A,{w:()=>s});var t=e(3193155968);function n(a){var c;return(c=a.ownerDocument)===null||c===void 0?void 0:c.defaultView}u(n,"getWindowForElement");function s(a){return!t.TQ.includes(a)}u(s,"shouldViewNavigateInContext")},1236965385:(z,A,e)=>{"use strict";e.d(A,{$A:()=>o,ce:()=>c,hO:()=>s});var t=e(3134334389),n=e(6244014364);const s=u(r=>({action:n.UiAction.IMPRESSION,uiPage:window.location.href,...r}),"getAuthImpressionTrackParams"),a=u(r=>({action:n.UiAction.CLICK,uiPage:window.location.href,...r}),"getAuthClickTrackParams"),c=u(r=>({uiPage:window.location.href,...r}),"getAuthTrackParams");function o(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const l=(0,t.useRef)(null),_=(0,t.useCallback)(m=>h=>{if(l.current={track:h},r){var v;l==null||(v=l.current)===null||v===void 0||v.track(s(m))}},[l,r]),d=(0,t.useCallback)(m=>()=>{var h;l==null||(h=l.current)===null||h===void 0||h.track(a(m))},[l]),i=(0,t.useCallback)(m=>()=>{var h;l==null||(h=l.current)===null||h===void 0||h.track(c(m))},[l]);return{trackClog:l,trackClogAuthRef:_,clogAuthLoginClick:d,clogAuthLoginAction:i}}u(o,"useAuthClogger")},3044566667:(z,A,e)=>{"use strict";e.d(A,{gy:()=>n,tN:()=>s,zQ:()=>t});const t={EMPTY:"empty",INVALID:"invalid",INVALID_DOMAIN:"invalid_domain",TOO_MANY:"too_many"},n="[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?",s={EMAIL:new RegExp(`^${n}$`,"i"),CONTAINS_EMAIL:new RegExp(`${n}`,"i"),DOMAIN:/^@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i}},2756015265:(z,A,e)=>{"use strict";e.d(A,{A:()=>_,U:()=>l});var t=e(735940183),n=e(5799716058),s=e(8525228540),a=e(9907843289),c=e(4282439381);const o=new t.Ay("emoji");function r(d,i){const m=(0,t.Yp)();return(0,s.WX)({state:d,locale:m,text:i})}u(r,"getLocalizedEmojiName");function l(d,i,m){let{state:h}=m;const v=r(h,d),y=(0,c.x)(h),T=v&&(0,n.Y)(v,i,y);return v?(0,a.DU)()?T:` ${T} `:y?o.t("{size} {emojiName} {size, plural, =1 {emoji} other {emojis}}",{emojiName:d,size:i}):`${i} ${d} emojis`}u(l,"convertEmojiGroupNameToPhrase");function _(d,i){let{state:m}=i;const h=r(m,d),v=h&&(0,n.A)(h);return h?(0,a.DU)()?v:` ${v} `:d}u(_,"convertEmojiNameToPhrase")},6818330210:(z,A,e)=>{"use strict";e.d(A,{H:()=>s});var t=e(9113979368),n=e(9936232041);function s(a,c){if(!c||(0,t.A)(c))return{name:a};const o=(0,n.A)(a);if(!o)return{name:a};const{name:r,skinTone:l}=o,_=c[r];if(!_||(0,t.A)(_))return{name:a};const d=_.display_alias,i=d??r,m=l?`:${i}::skin-tone-${l}:`:`:${i}:`,h=_.display_url;return{name:m,url:h}}u(s,"getEmojiDisplayInfoFromMap")},2354051480:(z,A,e)=>{"use strict";e.d(A,{A:()=>s});var t=e(3339229351);let n;const s=u(()=>{if(n)return n;const a=Object.keys(t.dq).map(c=>c.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"));return n=new RegExp(`(^|\\s)(${a.join("|")})(?=$|[\\s|\\?\\.,!])`,"g"),n},"__WEBPACK_DEFAULT_EXPORT__")},7854655276:(z,A,e)=>{"use strict";e.d(A,{A:()=>a});var t=e(3078252698),n=e(735940183);const s=new n.Ay("emoji");function a(c){const o=(0,t.A)(c)?c:c.toString(),r={1:()=>s.t("No skin tone"),2:()=>s.t("light skin tone"),3:()=>s.t("medium-light skin tone"),4:()=>s.t("medium skin tone"),5:()=>s.t("medium-dark skin tone"),6:()=>s.t("dark skin tone")},l={"2-3":()=>s.t("left light skin tone and right medium-light skin tone"),"2-4":()=>s.t("left light skin tone and right medium skin tone"),"2-5":()=>s.t("left light skin tone and right medium-dark skin tone"),"2-6":()=>s.t("left light skin tone and right dark skin tone"),"3-2":()=>s.t("left medium-light skin tone and right light skin tone"),"3-4":()=>s.t("left medium-light skin tone and right medium skin tone"),"3-5":()=>s.t("left medium-light skin tone and right medium-dark skin tone"),"3-6":()=>s.t("left medium-light skin tone and right dark skin tone"),"4-2":()=>s.t("left medium skin tone and right light skin tone"),"4-3":()=>s.t("left medium skin tone and right medium-light skin tone"),"4-5":()=>s.t("left medium skin tone and right medium-dark skin tone"),"4-6":()=>s.t("left medium skin tone and right dark skin tone"),"5-2":()=>s.t("left medium-dark skin tone and right light skin tone"),"5-3":()=>s.t("left medium-dark skin tone and right medium-light skin tone"),"5-4":()=>s.t("left medium-dark skin tone and right medium skin tone"),"5-6":()=>s.t("left medium-dark skin tone and right dark skin tone"),"6-2":()=>s.t("left dark skin tone and right light skin tone"),"6-3":()=>s.t("left dark skin tone and right medium-light skin tone"),"6-4":()=>s.t("left dark skin tone and right medium skin tone"),"6-5":()=>s.t("left dark skin tone and right medium-dark skin tone")},_=l[o]?l[o]():null;return _||r[o]&&r[o]()}u(a,"__WEBPACK_DEFAULT_EXPORT__")},5799716058:(z,A,e)=>{"use strict";e.d(A,{A:()=>r,Y:()=>o});var t=e(735940183),n=e(9936232041),s=e(7854655276);const a=/_|-/g,c=new t.Ay("emoji"),o=u(function(l,_){let d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(!l||!_)return null;const{name:i,skinTone:m}=(0,n.A)(l)||{};if(!i)return d?c.t("{size} {emojiName} {size, plural, =1 {emoji} other {emojis}}",{emojiName:l,size:_}):`${_} ${l} emojis`;const h=i.replace(a," "),v=d?c.t("{size} {emojiName} {size, plural, =1 {emoji} other {emojis}}",{emojiName:h,size:_}):`${_} ${h} emojis`;if(!m)return v;const y=(0,s.A)(m);return y===""?v:d?c.t("{size} {emojiName} {size, plural, =1 {emoji} other {emojis}} with {skinToneDescription}",{emojiName:h,size:_,skinToneDescription:y}):`${_} ${h} emojis with ${y}`},"makePhraseForEmojiGroup");function r(l){let _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!l)return l;const{name:d,skinTone:i}=(0,n.A)(l)||{};if(!d)return l;const m=d.replace(a," "),h=c.t("{emojiPhrase} emoji",{emojiPhrase:m});if(!i)return h===""?m:h;const v=(0,s.A)(i);return v===""?h===""?m:h:_?c.t("React with {emojiPhrase} emoji {skinToneDescription}",{emojiPhrase:m,skinToneDescription:v}):c.t("{emojiPhrase} emoji with {skinToneDescription}",{emojiPhrase:m,skinToneDescription:v})}u(r,"__WEBPACK_DEFAULT_EXPORT__")},3259512346:(z,A,e)=>{"use strict";e.d(A,{s:()=>s});var t=e(7823691483),n=e(571104883);function s(a){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:window.process&&window.process.versions&&window.process.versions.electron,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:window.navigator.userAgent;if(!(0,n.y3)(o)||!c)return!1;const r=(0,t.P)(a),l=(0,t.P)(c);return(0,t.Z)(l,r)>=0}u(s,"isElectronAndAtLeastVersion")},4875732686:(z,A,e)=>{"use strict";e.d(A,{y:()=>s});var t=e(3924251130),n=e(2368561198);const s=u(a=>(0,t.YM)(a)||(0,n.i)(a),"isExternalWorkspaceInvitesEnabled")},665229739:(z,A,e)=>{"use strict";e.d(A,{U:()=>s});var t=e(4761125736);const n="files_explorer_prototype";function s(a){return(0,t._Z)(a,n)==="on"}u(s,"isFilesExplorerPrototypeEnabled")},6212362990:(z,A,e)=>{"use strict";e.d(A,{A:()=>n,h:()=>s});const t=/^p?(\d{10})\.?(\d{6})$/;function n(a){return!a||!t.test(a)?null:a.replace(t,"$1.$2")}u(n,"formatMessageTimestamp");function s(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Date.now();if(!a)return null;const c=String((+a/1e3).toFixed(6));return n(c)}u(s,"getFormattedMessageTimestamp")},1033764764:(z,A,e)=>{"use strict";e.d(A,{UK:()=>l,Z$:()=>a,hZ:()=>o});const t=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],n=["B","kB","MB","GB","TB","PB","EB","ZB","YB"],s=u(function(d,i,m){let h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:2,v=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0;if(d===0)return 0;if(i===m)return parseFloat(d.toFixed(h));const y=v?1024:1e3,T=v?t:n,I=T.findIndex(g=>g.toLowerCase()===i.toLowerCase()),p=T.findIndex(g=>g.toLowerCase()===m.toLowerCase());if(I===-1)throw new Error(`Unknown currentType '${i}' passed to convertToSize`);if(p===-1)throw new Error(`Unknown desiredType '${m}' passed to convertToSize`);return I<p?parseFloat((d/y**(p-I)).toFixed(h)):parseFloat((d*y**(I-p)).toFixed(h))},"convertToSize"),a=u(function(d){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"B",m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:2,h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;if(d===0)return{size:0,type:"B"};const v=h?1024:1e3,y=h?t:n;let T=Math.log(d)/Math.log(v);T<1&&(T=-Math.floor(Math.log(Math.abs(T))/Math.log(10)+1));const I=y.findIndex(g=>g.toLowerCase()===i.toLowerCase()),p=Math.max(Math.min(I+Math.floor(T),y.length-1),0);if(I===-1)throw new Error(`Unknown currentType '${i}' passed to convertToSize`);return{size:s(d,i,y[p],m,h),type:y[p]}},"convertToOptimumSize"),c=u(function(d){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return s(d,"B","KB",i,!1)},"convertBytesToKilobytes"),o=u(function(d){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return s(d,"B","MB",i,!1)},"convertBytesToMegabytes"),r=u(function(d){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return s(d,"B","GB",i,!1)},"convertBytesToGigabytes"),l=u(function(d){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return s(d,"KB","MB",i,!1)},"convertKilobytesToMegabytes"),_=u(function(d){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return s(d,"KB","GB",i,!1)},"convertKilobytesToGigabytes")},6333950786:(z,A,e)=>{"use strict";e.d(A,{A:()=>S});var t=e(6249041335),n=e(5342516244),s=e(1842363787),a=e(8847766420),c=e(6533394955),o=e(2047021170),r=e(6866036454),l=e(1317368584),_=e(3829348308),d=e(735940183),i=e(9846149684),m=e(8207536819),h=e(4862221402),v=e(8040098042),y=e(2414816894),T=e(1707481146),I=e(6106767915);function p(L,w,J){const G=[];return{text:L.replace(i.Y,(te,le,ve)=>{let Q;if((0,y.A)(le)?Q=`<!${(0,I.A)(le)}>`:(0,T.A)(le)?Q=w?(0,m.A)(ve):ve:(0,h.A)(le)?Q=`<!subteam^${le}|${ve}>`:(0,v.A)(le)?Q=J?`<#${le}|${ve.substr(1)}>`:void 0:Q=`<@${le}>`,!Q)return te;const ae=`mention-${G.length+1}-${Date.now()}`;return G.push({mention:Q,placeholder:ae}),ae}),mentions:G}}u(p,"replaceFormatMentions");const g=/(^|\n)>(?![\W_](?:<|>|[|/\\[\]{}()Dpb](?=\s|$)))(([^\n]*)(\n>[^\n]*)*)/g;function E(L){const w=[];let J=0;return{text:L.replace(g,X=>{J+=1;const te=`quoted-text-placeholder-${Date.now()}-${J}`;return w.push({match:X,placeholder:te}),te}),quotedSections:w}}u(E,"replaceQuotedText");var f=e(2354051480),O=e(3339229351);const C=/[-[\]{}()*+?.,\\^$|#\s]/g,M=/\n?(6\)|7\))/,D=u(L=>{let w=0;const J=[];let G=L.replace((0,f.A)(),(X,te,le,ve)=>{const Q=w;w=ve+X.length;const Ae=le.indexOf("(")!==-1,ae=le.indexOf(")")!==-1;if((Ae||ae)&&J.indexOf(le)===-1&&J.push(le),ae&&!Ae){const he=L.substring(Q,ve);if(he.indexOf("(")!==-1&&he.indexOf(")")===-1)return X}if(X===`
8)`){const he=L.substring(0,ve);if(M.test(he))return X}return O.dq[le]?`${te}:${O.dq[le]}:`:X});if(J.length){const X=J.map(le=>le.replace(C,"\\$&")),te=new RegExp(`(\\(.+)(${X.join("|")})(.+\\))`,"g");G=G.replace(te,(le,ve,Q,Ae)=>O.dq[Q]?`${ve}:${O.dq[Q]}:${Ae}`:le)}return G},"replace_emoticons_with_colons");var P=e(8525228540),k=e(9421999304),x=e(4797500022),F=e(9599231336);const W=/(^|\s|\{|\[|\(|&gt;|&lt;|\*|_|\/|"|\u201C|\u2018|')#([^~`!@#$%^&*()+=[\]{}\\|;:'"\u201D\u2019,.<>/?\s]+)/g,Y=/(^|\S)( +)(\n|$)/gm;function S(L,w){let{isInternalMessage:J}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!L||!w)return"";const G=!J,X=(0,l.A)(L),te=(0,o.ty)(L,"convert_emoticons"),le=(0,r.A)(L),ve=(0,F.P)(L),Q=!0;let Ae=w,ae=[];Ae=(0,n.A)(Ae),Ae=(0,s.kW)(ae,Ae,{replace_pre:!0,replace_code:!0});const he=p(Ae,G,Q);if(Ae=he.text,Ae=Ae.replace(Y,"$1$3"),te&&!ve){const ee=E(Ae);Ae=ee.text,Ae=D(Ae),ee.quotedSections.forEach(de=>{Ae=Ae.replace(de.placeholder,()=>de.match)})}if(G&&(Ae=(0,s.wx)(Ae,"CLEAN",{jumbomoji:X,allow_intra_word_formatting:!0})),he.mentions.forEach(ee=>{Ae=Ae.replace(ee.placeholder,()=>ee.mention)}),!d.EZ){const ee=(0,a.ZT)(L);Ae=(0,c.dispatchForTeamId)(ee,(0,P.Z_)({text:Ae,locale:(0,k.JK)()}))}const _e=(0,_.CK)(L);return ae=ae.map(ee=>{const de={...ee},Ie=(0,i.A)(de.str,{highlightWords:le,shouldRenderEmojiAsText:ve,emojiNames:_e,locale:(0,d.Yp)(),useChannelTagging:Q});return de.str=(0,x.A)(Ie),G&&(de.str=(0,s.wx)(de.str,"CLEAN",{jumbomoji:X,allow_intra_word_formatting:!0})),de}),Ae=(0,s.Ki)(ae,Ae),(0,t.A)(Ae)}u(S,"clean_message_text_with_state")},972463850:(z,A,e)=>{"use strict";e.d(A,{A:()=>o});var t=e(3297051565),n=e.n(t),s=e(647040695),a=e(3829348308);const c=u(function(r){let{messageText:l,teamId:_}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!l||!_)return"";const d=(0,s.A)();return l.replace(d,i=>{const m=(0,a.Zc)(r,{text:i,teamId:_});return m||i})},"replaceTextEmojiWithNative"),o=c;c.propTypes={messageText:n().string,teamId:n().string}},5342516244:(z,A,e)=>{"use strict";e.d(A,{A:()=>t});const t=u(n=>n?n.replace(/\u00A0/g," ").replace(/\u000D/g,`
`).replace(/\u000A/g,`
`):"","__WEBPACK_DEFAULT_EXPORT__")},3802883493:(z,A,e)=>{"use strict";e.d(A,{TU:()=>s});const t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",n=10;function s(d,i){let m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t,h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:n;if(d!==null&&_(d,m,h),i!==null&&_(i,m,h),d!==null&&i!==null&&d>=i)throw new Error(`${d} >= ${i}`);if(d===null){if(i===null){const f=5*10**(h-1);return r(f,h)}const E=o(i,h);return E.toString()<i&&i.slice(h+1)!==""?r(E,h):r(E-1,h)}if(i===null){const E=o(d,h);return r(E+1,h)}const v=o(d,h),y=o(i,h),T=d.slice(h+1),I=i.slice(h+1);if(v===y){const E=c(T,I,m);return`${r(v,h)}.${E}`}const p=v+1;if(p<y)return r(p,h);const g=c(T,null,m);return`${r(v,h)}.${g}`}u(s,"generateKeyBetween");function a(d,i,m){let h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:t,v=arguments.length>4&&arguments[4]!==void 0?arguments[4]:n;if(m===0)return[];if(m===1)return[s(d,i,h,v)];if(i===null){let I=s(d,i,h,v);const p=[I];for(let g=0;g<m-1;g++)I=s(I,i,h,v),p.push(I);return p}if(d===null){let I=s(d,i,h,v);const p=[I];for(let g=0;g<m-1;g++)I=s(d,I,h,v),p.push(I);return p.reverse(),p}const y=Math.floor(m/2),T=s(d,i,h,v);return[...a(d,T,y,h,v),T,...a(T,i,m-y-1,h,v)]}u(a,"generateNKeysBetween");function c(d,i,m){const h=m[0];if(i!==null&&d>=i)throw new Error(`${d} >= ${i}`);if(d.slice(-1)===h||i&&i.slice(-1)===h)throw new Error("trailing zero");if(i){let T=0;for(;(d[T]||h)===i[T];)T+=1;if(T>0)return i.slice(0,T)+c(d.slice(T),i.slice(T),m)}const v=d?m.indexOf(d[0]):0,y=i!==null?m.indexOf(i[0]):m.length;if(y-v>1){const T=Math.round(.5*(v+y));return m[T]}return i&&i.length>1?i.slice(0,1):m[v]+c(d.slice(1),null,m)}u(c,"midpoint");function o(d,i){const m=d.slice(0,i);return Number(m)}u(o,"getIntegerPart");function r(d,i){if(d>=10**i)throw new Error(`Integer overflow at ${d} for fixed length ${i}`);if(d<0)throw new Error(`Integer underflow at ${d} for fixed length ${i}`);return d.toString().padStart(i,"0")}u(r,"formatInteger");function l(d,i){const m=d.length;if(m<i)throw new Error("Invalid integer portion, length too short");if(m===i){const h=d.indexOf(".");if(h>=0)throw new Error(`Unexpected . at position ${h} in string of exact length ${i}`);const v=Number(d);if(isNaN(v))throw new Error(`Invalid integer portion - not a valid integer ${d}`)}else if(d[i]!==".")throw new Error(`Expected . after int_fixed length ${i} and got ${d[i]}`)}u(l,"validateIntegerLength");function _(d,i,m){if(l(d,m),m!==d.length&&d.slice(m).endsWith(i[0]))throw new Error(`Fractional portion must not end with ${i[0]}`)}u(_,"validateOrderKey")},3256698098:(z,A,e)=>{"use strict";e.d(A,{_i:()=>a});function t(o,r,l,_){let d=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1e-15;const i=[_.x-r.x,_.y-r.y],m=[l.x-r.x,l.y-r.y],h=[o.x-r.x,o.y-r.y],v=i[0]*i[0]+i[1]*i[1],y=i[0]*m[0]+i[1]*m[1],T=i[0]*h[0]+i[1]*h[1],I=m[0]*m[0]+m[1]*m[1],p=m[0]*h[0]+m[1]*h[1],g=1/(v*I-y*y),E=(I*T-y*p)*g,f=(v*p-y*T)*g;return E>=-d&&f>=-d&&E+f<1+d}u(t,"isPointInTriangle");function n(o,r,l){const _=(l.x-r.x)**2+(l.y-r.y)**2,d=((o.x-r.x)*(l.x-r.x)+(o.y-r.y)*(l.y-r.y))/_;return d<0?(o.x-r.x)**2+(o.y-r.y)**2:d<=1?(r.x-o.x)**2+(r.y-o.y)**2-d**2*_:(o.x-l.x)**2+(o.y-l.y)**2}u(n,"distanceSquarePointToSegment");function s(o,r,l,_){let d=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1e-15;const i=Math.min(r.x,Math.min(l.x,_.x))-d,m=Math.max(r.x,Math.max(l.x,_.x))+d,h=Math.min(r.y,Math.min(l.y,_.y))-d,v=Math.max(r.y,Math.max(l.y,_.y))+d;return o.x>i&&o.x<m&&o.y>h&&o.y<v}u(s,"pointInTriangleBoundingBox");function a(o,r,l,_){let d=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1e-15;if(!s(o,r,l,_,d))return!1;const i=d**2;return t(o,r,l,_,0)||n(o,r,l)<=i||n(o,l,_)<=i||n(o,_,r)<=i}u(a,"accurateIsPointInTriangle");var c={accurateIsPointInTriangle:a,isPointInTriangle:t}},1596328926:(z,A,e)=>{"use strict";e.d(A,{A:()=>s});var t=e(1516013259),n=e(2774532222);function s(a){return(0,t.A)(a,(c,o)=>(0,n.A)(o,"data-"))}u(s,"getDataProps")},8556787853:(z,A,e)=>{"use strict";e.d(A,{Ac:()=>h,Ay:()=>i,lF:()=>m});var t=e(9706240641),n=e.n(t),s=e(7174777686),a=e(2047021170),c=e(2364576462),o=e(3339229351),r=e(6839188756),l=e(3677514771),_=e(9397223697);const d=u((v,y,T)=>{const I=T?v*2:v,p=T?y*2:y,E=I>o.QI||p>o.Jo?Math.min(o.QI/I,o.Jo/p):1,f=Math.floor(I*E),O=Math.floor(p*E);return{width:f,height:O}},"getConstrainedMediaDimensions");function i(v){let{url:y,width:T,height:I,rotate:p,renderSvg:g,stopAnimations:E,sizeForRetina:f,convertIco:O,isEmoji:C}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!y)return null;const M=(0,r.Uz)((0,l.H7)(v));if(!M||y.indexOf(M)===0||y.indexOf("/img/")===0)return y;if(y.indexOf("https://")===0&&!C){const W=(0,c.yz)(y,!0),Y=(0,_.QL)();if((0,s.A)(Y,W)){if(E&&W==="slack-imgs.com"){const S=new URL(y),L=S.searchParams.has("o1")?`${S.searchParams.get("o1")}.gu`:"gu";return S.searchParams.set("o1",L),S.href}return y}}const D=new URL(M);D.searchParams.set("c",o.lW);const{width:P,height:k}=T&&I?d(T,I,f):{},x=[];return P&&k&&(x.push(`wi${P}`),x.push(`he${k}`),x.push("si")),p&&x.push("ro"),g&&x.push("sv2"),(E||!(0,a.ty)(v,"a11y_animations"))&&x.push("gu"),O&&x.push("ip"),x.length&&D.searchParams.set("o1",x.join(".")),D.searchParams.set("url",y),D.href}u(i,"getImgProxyUrl");const m=function(){var v=(0,t.coroutine)(function*(y){const T=new URL(y);try{return!!(yield fetch(`https://${T.hostname}/?url=${T.searchParams.get("url")}`,{method:"HEAD",mode:"cors"})).headers.get("x-slack-animated")}catch(I){if(I)return!1}return!1});return u(function(T){return v.apply(this,arguments)},"isImageAnimated")}(),h=u(v=>v.replace(".gu",""),"getAnimatedImgUrl")},6415587347:(z,A,e)=>{"use strict";e.d(A,{Ay:()=>_n});var t=e(4063699741),n=e.n(t),s=e(7129884748),a=e.n(s),c=e(4840951141),o=e.n(c),r=e(9241168512),l=e.n(r),_=e(9602720019),d=e.n(_),i=e(9777215928),m=e.n(i),h=e(9833689275),v=e.n(h),y=e(2981982679),T=e.n(y),I=e(9267813754),p=e.n(I),g=e(3963460214),E=e.n(g),f=e(9948433110),O=e.n(f),C=e(2295488157),M=e.n(C),D=e(5908867676),P=e.n(D),k=e(4948097913),x=e.n(k),F=e(5156772208),W=e.n(F),Y=e(3333214639),S=e.n(Y),L=e(9825918216),w=e.n(L),J=e(1302153452),G=e.n(J),X=e(474239361),te=e.n(X),le=e(350135845),ve=e.n(le),Q=e(7428983508),Ae=e.n(Q),ae=e(1001408479),he=e.n(ae),_e=e(7331486018),ee=e.n(_e),de=e(669259003),Ie=e.n(de),ce=e(1889110914),j=e.n(ce),N=e(7183565897),b=e.n(N),R=e(4814900690),K=e.n(R),B=e(3710970638),$=e.n(B),Z=e(1023719767),re=e.n(Z),Te=e(4165874747),Ce=e.n(Te),Pe=e(3431559584),fe=e.n(Pe),pe=e(2261459203),q=e.n(pe),se=e(7272988726),ge=e.n(se),Oe=e(2200759559),Le=e.n(Oe),We=e(451984622),Re=e.n(We),we=e(77360885),Je=e.n(we),it=e(7523979550),et=e.n(it),lt=e(4245237474),nt=e.n(lt),at=e(1957386787),ze=e.n(at),Ke=e(8390767423),He=e.n(Ke),Ye=e(983107878),_t=e.n(Ye),vt=e(3224273568),Tt=e.n(vt),Lt=e(2979422297),ft=e.n(Lt),mt=e(4923972147),Yt=e.n(mt),nn=e(1060768686),jt=e.n(nn),gn=e(5098468056),on=e.n(gn),Xt=e(6906793909),rn=e.n(Xt),Zt=e(3708998647),Ht=e.n(Zt),Bt=e(2256285620),Qt=e.n(Bt),sn=e(2316786074),Mn=e.n(sn),ct=e(3783723764),yt=e(8840779375),Rt=e(2604971659),xe=e(4103274853),Nt=e(2208015175),Ft=e(3339229351),qt=e(397660785),un=e(6363331542);function tt(Vn){return(0,ct.A)((0,yt.A)((0,Rt.A)(Vn),Wn=>parseInt(Wn,10)),null,"desc")}u(tt,"makeOrderedIconSizes");function pt(Vn){return(0,xe.A)(Vn,Wn=>tt(Wn))}u(pt,"makeOrderedNamedIconSizes");const Dt={24:Mn(),32:Ht(),36:on(),72:Yt(),192:Tt()},Wt={24:Qt(),32:rn(),36:jt(),72:ft(),192:_t()},zt={fancy:{20:He(),24:ze(),32:nt(),36:et(),48:Je(),72:Re(),192:Le(),360:ge(),512:q(),1024:fe()},frowny:{20:Ce(),24:re(),32:$(),36:K(),48:b(),72:j(),192:Ie(),360:ee(),512:he(),1024:Ae()},neutral:{20:ve(),24:te(),32:G(),36:w(),48:S(),72:W(),192:x(),360:P(),512:M(),1024:O()},sad_surprise:{20:E(),24:p(),32:T(),36:v(),48:m(),72:d(),192:l(),360:o(),512:a(),1024:n()}},ln=24,Tn=tt(Wt),cn=pt(zt),hn="image_";function Cn(Vn){const Wn=[];return(0,Nt.A)(Vn,(kn,Pn)=>{if(Pn.indexOf(hn)!==0)return;const $t=Pn.slice(hn.length);Wn.unshift(parseInt($t,10))}),Wn}u(Cn,"getSizeOptionsFromProfile");function _n(Vn){let{size:Wn,teamOrEnterpriseId:kn,memberId:Pn,avatarHash:$t,emoji:$n,isBot:De=!1,botImages:Ne=!1,slackbotFeels:Me=null,isUserHidden:Be=!1}=Vn,ue,ke,Xe=!1;if(!Wn||!De&&!Be&&(!kn||!Pn||!$t)&&!$n)return{};if($n)return{emoji:$n,isDefault:!1};if(Be){const dt=(0,un.A)(Wn,Tn),bt=(0,un.A)(Wn*2,Tn);ue=Dt[dt||ln],ke=Dt[bt||ln],Xe=!0}else if(Pn===Ft.Q$&&Me&&zt[Me]){const dt=(0,un.A)(Wn,cn[Me]),bt=(0,un.A)(Wn*2,cn[Me]);ue=zt[Me][dt||ln],ke=zt[Me][bt||ln]}else if(!De||kn&&Pn&&$t){const dt=(0,un.A)(Wn),bt=(0,un.A)(Wn*2),be=(0,qt.Z)(kn);ue=`${be}${kn}-${Pn}-${$t}-${dt}`,ke=`${be}${kn}-${Pn}-${$t}-${bt}`}else if(Ne){const dt=Cn(Ne),bt=(0,un.A)(Wn,dt),be=(0,un.A)(Wn*2,dt);ue=Ne[hn+bt],ke=Ne[hn+be]}if(De&&!ue&&!ke&&!$n){const dt=(0,un.A)(Wn,Tn),bt=(0,un.A)(Wn*2,Tn);ue=Wt[dt||ln],ke=Wt[bt||ln],Xe=!0}return{imageUrl:ue,imageUrl2x:ke,emoji:$n,isDefault:Xe}}u(_n,"getMemberProfileImage")},92812954:(z,A,e)=>{"use strict";e.d(A,{d:()=>a});var t=e(8276911661),n=e(3792998666),s=e(5096647761);function a(c,o){if(!o)return"member";const r=(0,t.nv)(c,o);let l="member";return(0,s.g)(r)?l="external":(0,n.Ez)(r)&&!(0,n.Yd)(r)?l="ra":(0,n.Yd)(r)&&(l="ura"),l}u(a,"getMemberType")},8873262110:(z,A,e)=>{"use strict";e.d(A,{A:()=>s});var t=e(6061527706),n=e(5950652755);function s(a){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:250;const o=u(r=>{!Array.isArray(r)||!r.length||requestAnimationFrame(()=>a(r))},"observer");return new t.A((0,n.A)(o,c))}u(s,"getResizeObserver")},3695531806:(z,A,e)=>{"use strict";e.d(A,{z:()=>n});var t=e(6795568989);const n=u(s=>{let{codePointLikeString:a}=s;if(!(0,t.d)(a))return;const c=16;return a.split("-").map(o=>String.fromCodePoint(parseInt(o,c))).join("")},"getUnicodeFromCodePointLikeString")},8958249318:(z,A,e)=>{"use strict";e.d(A,{A:()=>t});function t(){var n,s;return(s=(n=window.navigator)===null||n===void 0?void 0:n.userAgent)!==null&&s!==void 0?s:"no-ua"}u(t,"getUserAgent")},5770715593:(z,A,e)=>{"use strict";e.d(A,{C9:()=>r,Gl:()=>c,VQ:()=>o,XU:()=>n,dL:()=>s,rU:()=>a,x_:()=>l});var t=e(4761125736);const n=u(_=>{var d;return(d=(0,t._Z)(_,"help_shareables_tm")==="on")!==null&&d!==void 0?d:!1},"isHelpShareablesTmExperimentOn"),s=u(_=>{var d;return(d=(0,t._Z)(_,"help_articles_in_search")==="treatment")!==null&&d!==void 0?d:!1},"isHelpArticlesInSearchExperimentTreatment"),a=u(_=>{var d;return(d=(0,t._Z)(_,"help_smarticles")==="on")!==null&&d!==void 0?d:!1},"isHelpSmarticlesExperimentOn"),c=u(_=>{var d;return(d=(0,t._Z)(_,"help_navigation")==="on")!==null&&d!==void 0?d:!1},"isHelpNavigationExperimentOn"),o=u(_=>{var d;return(d=(0,t._Z)(_,"help_tour")==="treatment")!==null&&d!==void 0?d:!1},"isHelpTourExperimentTreatment"),r=u(_=>{var d;return(d=(0,t._Z)(_,"help_tips")==="on")!==null&&d!==void 0?d:!1},"isHelpTipsExperimentOn"),l=u(_=>{var d;return(d=(0,t._Z)(_,"help_slider_a11y_translations")==="on")!==null&&d!==void 0?d:!1},"isHelpSliderA11yTranslationsExperimentOn")},1251564078:(z,A,e)=>{"use strict";e.d(A,{v:()=>n});var t=e(9907843289);function n(s){const a=(0,t.Yp)().toLowerCase();return a==="en-us"?s:`/intl/${a}${s}`}u(n,"getLocalizedPath")},4240442510:(z,A,e)=>{"use strict";e.d(A,{A:()=>a});var t=e(3193155968),n=e(735940183);const s=new n.Ay("view");function a(c){let{tab:o,experimentSlackAiInboxGroupOn:r,experimentFilesExplorerPrototypeGroupOn:l,experimentSolutionsBecomeTemplatesGroupOn:_,experimentAskSlackViewGroupOn:d}=c,i;switch(o){case t.k6.Home:i=r?s.t("Channels",{ns:"search"}):s.t("Home");break;case t.k6.DMs:i=s.t("DMs");break;case t.k6.Activity:i=r?s.t("Inbox"):s.t("Activity");break;case t.k6.Later:i=s.t("Later");break;case t.k6.SalesHome:i=s.t("Sales");break;case t.k6.Search:i=s.t("Search");break;case t.k6.Canvases:i=s.t("Canvases",{fallbackHash:"e2d397a06197e996f48faa9c0abfd3a2a80d15de",fallbackHashNs:"search"});break;case t.k6.Files:i=s.t("Files",{ns:"search"});break;case t.k6.FilesPrototype:i=l?s.t("Files"):"Files";break;case t.k6.Channels:i=s.t("Channels",{ns:"search"});break;case t.k6.People:i=s.t("People",{ns:"search"});break;case t.k6.Platform:i=s.t("Automations",{fallbackHash:"4186e4384191cd367f88423e6488c26e96a3807d",fallbackHashNs:"search"});break;case t.k6.ExternalConnections:case t.k6.ExternalConnectionsTemp:i=s.t("External");break;case t.k6.Huddles:i=s.t("Huddles",{fallbackHash:"cfed893a3dc774c76cbd9efb20d641aad32eff33x`",fallbackHashNs:"search"});break;case t.k6.Assistant:i=d?s.t("Ask Slack"):"Ask Slack";break;case t.k6.Browse:i=s.t("More");break;case t.k6.Lists:i=s.t("Lists");break;case t.k6.Todos:i="Todos";break;case t.k6.Solutions:i=_?s.t("Templates"):s.t("Solutions");break;case t.k6.SlackKitPlayground:i="Slack Kit Playground";break;case t.k6.BBM:i="";break;default:i="";break}return i}u(a,"getTabLabel")},6910192640:(z,A,e)=>{"use strict";e.d(A,{A:()=>f,o:()=>g});var t=e(8956161330),n=e(2384831516),s=e(3193155968),a=e(1552255081),c=e(6642124196),o=e(920478515),r=e(1340402138),l=e(6470070112),_=e(9280052135),d=e(665229739),i=e(7244076749),m=e(4626613428),h=e(2711189973),v=e(5332875232),y=e(3290693121),T=e(2664997725);const I=!1,p={[s.k6.Home]:O=>!(0,r.R)(O),[s.k6.Activity]:O=>(0,m.Ty)(O)&&!(0,y.x)(O),[s.k6.DMs]:O=>(0,m.Ty)(O),[s.k6.FilesPrototype]:O=>(0,d.U)(O)&&(0,m.Ty)(O),[s.k6.SlackKitPlayground]:O=>(0,i.b)()&&(0,m.Ty)(O),[s.k6.Solutions]:O=>(0,T.x)(O)&&(0,m.Ty)(O),[s.k6.Later]:O=>(0,o.Bp)(O),[s.k6.Assistant]:O=>(0,_.l)(O)&&(0,m.Ty)(O),[s.k6.Canvases]:O=>(0,a.F)(O)&&!(0,r.R)(O)&&!(0,d.U)(O),[s.k6.Files]:O=>!(0,r.R)(O)&&(0,m.Ty)(O),[s.k6.Channels]:O=>!(0,r.R)(O)&&(0,m.Ty)(O),[s.k6.Platform]:()=>!0,[s.k6.People]:O=>!(0,r.R)(O)&&(0,m.Ty)(O),[s.k6.Huddles]:O=>(0,l.Wd)(O)&&!(0,v.LS)(O)&&!(0,r.R)(O),[s.k6.SalesHome]:O=>(0,t.hx)(O),[s.k6.Lists]:O=>(0,c.Il)(O)&&!(0,r.R)(O)&&!(0,d.U)(O),[s.k6.Todos]:O=>(0,c.tl)(O),[s.k6.ExternalConnections]:O=>(0,h.y)(O,I),[s.k6.ExternalConnectionsTemp]:O=>!(0,h.y)(O,I)},g=u(O=>(0,n.Mz)(C=>p[O](C)),"makeSelectVisibleTab"),f=u((O,C)=>g(C)(O),"getTabVisibility")},505908973:(z,A,e)=>{"use strict";e.d(A,{A:()=>Y});var t=e(6644049054),n=e(352142497),s=e(5657872960),a=e(6642124196),c=e(3559837422),o=e(6839188756),r=e(3677514771),l=e(8956161330),_=e(1552255081),d=e(7274827479),i=e(4761125736),m=e(418103123),h=e(1190344069),v=e(9889493721),y=e(7069714209),T=e(665229739),I=e(9280052135),p=e(7244076749),g=e(2711189973),E=e(5332875232),f=e(2052624953),O=e(9132066222),C=e(3856748711),M=e(8646192222),D=e(3875705815),P=e(6695353875),k=e(2664997725);const x=!1,F={[n.D.KeyboardShortcuts]:()=>!0,[n.D.WhatsNew]:()=>!0,[n.D.RecentCanvases]:()=>!1,[n.D.CanvasesSharedWithYou]:S=>(0,i._Z)(S,"canvas_collection_prototype")==="on"&&(0,_.F)(S),[n.D.CanvasesCreatedByYou]:S=>(0,i._Z)(S,"canvas_collection_prototype")==="on"&&(0,_.F)(S),[n.D.BrowseCanvases]:S=>(0,_.F)(S),[n.D.RecentFiles]:()=>!0,[n.D.FilesCreatedByYou]:()=>!0,[n.D.FilesSharedWithYou]:()=>!0,[n.D.BrowseExternalWorkspace]:y.U,[n.D.BrowseChannels]:()=>!0,[n.D.BrowsePeople]:()=>!0,[n.D.ExternalOrganizations]:S=>(0,g.y)(S,x),[n.D.ExternalOrganization]:S=>(0,g.y)(S,x),[n.D.ExternalPeople]:()=>!1,[n.D.SlackConnectChannels]:()=>!1,[n.D.SlackConnectInvitations]:S=>(0,g.y)(S,x),[n.D.BrowseUserGroups]:S=>!(0,c.sV)(S)&&(0,o.qR)((0,r.H7)(S)),[n.D.SlackConnect]:S=>(0,t.A)(S),[n.D.Channel]:()=>!0,[n.D.AppSpace]:()=>!0,[n.D.Quip]:()=>!0,[n.D.RecentPlatform]:S=>(0,v.MA)(S),[n.D.BrowseWorkflowsManagedByYou]:S=>(0,v.EH)(S),[n.D.BrowseYourWorkflowTemplates]:S=>(0,v.M7)(S),[n.D.BrowseShortcuts]:S=>(0,v.S0)(S),[n.D.BrowseWorkflowTemplates]:S=>(0,v.fh)(S),[n.D.BrowseApps]:S=>(0,v.pr)(S),[n.D.OrgDirectory]:()=>!0,[n.D.Page]:()=>!0,[n.D.Threads]:()=>!0,[n.D.Thread]:()=>!0,[n.D.Profile]:()=>!0,[n.D.FileDetails]:()=>!0,[n.D.Help]:()=>!0,[n.D.UserGroup]:()=>!0,[n.D.Feedback]:()=>!0,[n.D.List]:S=>(0,a.Fh)(S),[n.D.ListRecord]:S=>(0,a.Fh)(S),[n.D.ListRecordDetails]:S=>(0,a.Fh)(S),[n.D.ListRecordThread]:S=>(0,a.Fh)(S),[n.D.ListRecordHistory]:S=>(0,a.Fh)(S),[n.D.MyItems]:S=>(0,a.$7)(S),[n.D.DeletedLists]:S=>(0,a.bb)(S),[n.D.Tasks]:S=>(0,a.tl)(S),[n.D.AssignedTasks]:S=>(0,a.tl)(S),[n.D.Reminders]:S=>(0,a.tl)(S),[n.D.Saved]:S=>(0,a.tl)(S),[n.D.ComposeList]:()=>!0,[n.D.Compose]:()=>!0,[n.D.QuipCommentThread]:()=>!0,[n.D.QuipCommentStream]:()=>!0,[n.D.QuipActivityHistory]:()=>!0,[n.D.QuipAutomationsOverview]:()=>!0,[n.D.Canvas]:()=>!0,[n.D.ChannelCanvas]:()=>!0,[n.D.CanvasBrowser]:S=>(0,_.F)(S),[n.D.PaidBenefits]:()=>!0,[n.D.Setup]:()=>!0,[n.D.SearchEmpty]:()=>!0,[n.D.AboutWorkspace]:()=>!1,[n.D.Unknown]:()=>!0,[n.D.MorePeopleSidebar]:()=>!0,[n.D.MoreCanvasesSidebar]:()=>!0,[n.D.AppPopout]:()=>!0,[n.D.ChannelList]:()=>!0,[n.D.BrowseFiles]:()=>!0,[n.D.BrowseFilesPrototype]:S=>(0,T.U)(S),[n.D.SlackKitPlayground]:()=>(0,p.b)(),[n.D.Solutions]:S=>(0,k.x)(S),[n.D.BrowseLists]:S=>(0,a.Il)(S),[n.D.DmsList]:()=>!0,[n.D.BrowseList]:()=>!0,[n.D.ActivityList]:()=>!0,[n.D.LaterList]:S=>(0,s.c)(S),[n.D.Search]:()=>!0,[n.D.MoreFilesSidebar]:()=>!0,[n.D.MoreListsSidebar]:()=>!0,[n.D.MoreTodosSidebar]:()=>!0,[n.D.FilesPrototypeSidebar]:S=>(0,T.U)(S),[n.D.MoreChannelsSidebar]:()=>!1,[n.D.MorePlatformSidebar]:()=>!0,[n.D.MoreHuddlesSidebar]:()=>!0,[n.D.MoreExternalConnectionsSidebar]:S=>(0,g.y)(S,x),[n.D.HelpBrowser]:()=>!0,[n.D.Huddle]:()=>!0,[n.D.BrowseHuddles]:S=>(0,E.LS)(S),[n.D.KeyboardShortcutsBrowser]:()=>!0,[n.D.WhatsNewBrowser]:()=>!0,[n.D.FeedbackBrowser]:()=>!0,[n.D.ExternalWorkspaceAllowedOrgPane]:()=>!1,[n.D.ExternalWorkspaceSidebar]:()=>!1,[n.D.ExternalWorkspacePeopleBrowser]:()=>!1,[n.D.ExternalWorkspaceChannelBrowser]:()=>!1,[n.D.PostEvent]:()=>!1,[n.D.AiSummaryDetails]:S=>(0,d._z)(S),[n.D.DailyDigest]:S=>(0,d.sS)(S),[n.D.MoreAiSummarySidebar]:S=>(0,d.M1)(S),[n.D.SearchSummary]:S=>(0,d.lQ)(S),[n.D.AssistantList]:S=>(0,I.l)(S),[n.D.Today]:S=>(0,m._)(S),[n.D.Record]:S=>(0,h.hm)(S),[n.D.RecordChannelCreate]:S=>(0,h.hm)(S),[n.D.RecordChannelRelatedList]:S=>(0,h.dw)(S),[n.D.SalesAdministration]:()=>!0,[n.D.SalesBulkGrid]:()=>!0,[n.D.SalesHome]:S=>(0,l.hx)(S),[n.D.SalesLogActivity]:()=>!0,[n.D.SalesListViewBrowser]:()=>!0,[n.D.SalesSidebar]:()=>!0,[n.D.SalesNotifications]:()=>!0,[n.D.AssistantThread]:()=>!0,[n.D.ChannelFiles]:S=>(0,i._Z)(S,"channel_canvas_in_bbar")==="on",[n.D.AiApp]:S=>(0,f.wP)(S),[n.D.WorkflowDetails]:S=>(0,i._Z)(S,"workflow_progress_fe")==="on",[n.D.WorkflowEditor]:S=>(0,i._Z)(S,"wfb_in_client")==="on",[n.D.BookmarksFolder]:S=>(0,O.U6)(S),[n.D.ActionItems]:S=>(0,d.FV)(S),[n.D.Inbox]:S=>(0,C.y)(S),[n.D.BBMMain]:S=>(0,M.mL)(S)&&(0,D.V)(S),[n.D.BBMWorkspaceSwitcher]:S=>(0,M.mL)(S)&&(0,D.V)(S),[n.D.SearchInChannel]:S=>(0,P.k8)(S),[n.D.HuddleTranscriptDetails]:S=>(0,E.P3)(S),[n.D.HuddlePageCanvas]:()=>!0,[n.D.BBMMore]:S=>(0,M.mL)(S)&&(0,D.V)(S)},Y=u((S,L)=>F[L](S),"getViewTypeVisibility")},4900557724:(z,A,e)=>{"use strict";e.d(A,{BB:()=>l,GP:()=>_,Uf:()=>d});var t=e(9706240641),n=e.n(t),s=e(3398586081),a=e(7715417323),c=e(6422693406);const o={didTimeout:!0,timeRemaining:()=>0},r=(0,s.A)(()=>!!(window.requestIdleCallback&&window.cancelIdleCallback));function l(m,h){return r()?window.requestIdleCallback(m,h):window.setTimeout(()=>m(o))}u(l,"requestIdleCallback");function _(m){return r()?window.cancelIdleCallback(m):window.clearTimeout(m)}u(_,"cancelIdleCallback");function d(m){return new c.S(function(h,v){let y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:a.A;const T=l(function(){var I=(0,t.coroutine)(function*(p){try{const g=yield c.S.resolve(m(p));h(g)}catch(g){v(g)}});return function(p){return I.apply(this,arguments)}}());y(()=>{_(T)})})}u(d,"awaitIdleCallback");const i={IDLE_DEADLINE_FALLBACK:o}},5731054235:(z,A,e)=>{"use strict";e.d(A,{A:()=>s});var t=e(9636997165);let n=null;function s(){if(n===null){var a,c;n=(document==null||(a=document.documentElement)===null||a===void 0||(c=a.dataset)===null||c===void 0?void 0:c.app)===t.u.APP_POPOUTS}return n}u(s,"isAppPopouts")},8800777280:(z,A,e)=>{"use strict";e.d(A,{A:()=>t});function t(n,s){return!n||!s?!1:s(n)?!0:t(n.parentElement||void 0,s)}u(t,"isContainedBy")},6045540917:(z,A,e)=>{"use strict";e.d(A,{h:()=>a});var t=e(8276911661),n=e(8170643398),s=e(3986753718);function a(c,o){if(!o)return!1;const r=(0,t.nv)(c,o);return!(0,n.zU)(r)&&!!o&&!!(0,s.t6)(c,o)}u(a,"isDnd")},7640408795:(z,A,e)=>{"use strict";e.d(A,{A:()=>t});function t(n){var s;return!n||n.metaKey||n.ctrlKey?!1:((s=n.key)===null||s===void 0?void 0:s.length)===1}u(t,"isPrintableKeyEvent")},6605261507:(z,A,e)=>{"use strict";e.d(A,{Dl:()=>a,Mk:()=>n,qF:()=>s});var t=e(1269024372);const n=["about","canvas"],s=["app","about","settings","chat"];function a(c){return n.indexOf(c)!==-1||s.indexOf(c)!==-1||Object.keys(t.e).indexOf(c)!==-1}u(a,"isValidTabRoute")},5587260451:(z,A,e)=>{"use strict";e.d(A,{L:()=>t,c:()=>n});const t=["invitations","contacts"];function n(s){return t.includes(s)}u(n,"isValidViewName")},2249017398:(z,A,e)=>{"use strict";e.d(A,{A:()=>s});var t=e(9636997165);let n=null;function s(){if(n===null){var a,c;n=(document==null||(a=document.documentElement)===null||a===void 0||(c=a.dataset)===null||c===void 0?void 0:c.app)===t.u.WORKFLOW_BUILDER}return n}u(s,"isWorkflowBuilder")},1233969417:(z,A,e)=>{"use strict";e.d(A,{A:()=>n});const t=/^\d+$/;function n(s){return t.test(s)}u(n,"looksLikeHelpArticleId")},110305600:(z,A,e)=>{"use strict";e.d(A,{A:()=>n});const t=/^Ft[A-Z0-9]{7,}$/;function n(s){return t.test(s)}u(n,"looksLikeHermesTriggerId")},1466694191:(z,A,e)=>{"use strict";e.d(A,{A:()=>n});const t=/^(quip|Qp):F[A-Z0-9]{8,}-(Qpv:[a-z0-9:]{8,}&Qpvs:[0-9]{1,})?$/;function n(s){return s?t.test(s):!1}u(n,"looksLikeQuipHistoryId")},8305125093:(z,A,e)=>{"use strict";e.d(A,{A:()=>n});const t=/^Wt[A-Z0-9]{7,}$/;function n(s){return t.test(s)}u(n,"looksLikeWorkflowTemplateId")},1269024372:(z,A,e)=>{"use strict";e.d(A,{e:()=>n,k:()=>s});var t=e(352142497);const n={recent:t.D.RecentPlatform,"workflows-managed-by-you":t.D.BrowseWorkflowsManagedByYou,workflows:t.D.BrowseShortcuts,"all-workflows":t.D.BrowseShortcuts,templates:t.D.BrowseWorkflowTemplates,apps:t.D.BrowseApps};function s(a){return n[a]}u(s,"maybeGetAutomationsTab")},264208541:(z,A,e)=>{"use strict";e.d(A,{Ey:()=>o,Hn:()=>r,gs:()=>l,mw:()=>d,nS:()=>_});var t=e(8665296019),n=e(1033764764),s;let a=!!(!(window==null||(s=window.performance)===null||s===void 0)&&s.memory);function c(){return a?window.performance.memory.jsHeapSizeLimit:null}u(c,"getMemoryLimit");function o(){return a?window.performance.memory.totalJSHeapSize:null}u(o,"getMemoryTotal");function r(){return a?window.performance.memory.usedJSHeapSize:null}u(r,"getMemoryUsed");function l(){return a}u(l,"supportsMemoryMeasurement");function _(m){const h=m/1e3/1e3;return`${h<100?h.toPrecision(3):Math.round(h)} MB`}u(_,"humanizeBytes");function d(m,h){const v=(0,t.A)(m,y=>{let{memory:T}=y;return T[h]||0});return Math.ceil((0,n.UK)(v))}u(d,"sumMemoryMetricsByKey"),Object.defineProperties({},{SUPPORTS_MEMORY_MEASUREMENT:{get:()=>a,set:m=>{a=m}}})},5737576046:(z,A,e)=>{"use strict";e.d(A,{Pw:()=>d,bC:()=>r,wn:()=>_,zC:()=>l});var t=e(1703559452),n=e(1022424641),s=e(796111729),a=e(9470581768),c=e(8800777280);const o={};function r(i){let{channelId:m,functions:h,getInputInstance:v,threadTs:y,viewContext:T}=i;if(!v)throw new Error('Missing required "getInputInstance" param');const I=`${T}-${m}-${y}`;return o[I]&&(0,s.Ay)().warn(`Registering duplicate input (key: "${I}")`),o[I]={clear:()=>{var p,g;(p=v())===null||p===void 0||(g=p.clear)===null||g===void 0||g.call(p)},clearHistory:()=>{var p,g;(p=v())===null||p===void 0||(g=p.clearHistory)===null||g===void 0||g.call(p)},focus:()=>{var p,g;(p=v())===null||p===void 0||(g=p.focus)===null||g===void 0||g.call(p)},getContents:()=>{var p,g;return(p=v())===null||p===void 0||(g=p.getContents)===null||g===void 0?void 0:g.call(p)},getDisplayValue:()=>{var p,g;return(p=v())===null||p===void 0||(g=p.displayValue)===null||g===void 0?void 0:g.call(p)},getLength:()=>{var p,g;return(p=v())===null||p===void 0||(g=p.getLength)===null||g===void 0?void 0:g.call(p)},getSelection:()=>{var p,g;return(p=v())===null||p===void 0||(g=p.getSelection)===null||g===void 0?void 0:g.call(p)},getText:()=>{var p,g;return(p=v())===null||p===void 0||(g=p.value)===null||g===void 0?void 0:g.call(p)},hasFocus:()=>{var p,g;return(p=v())===null||p===void 0||(g=p.hasFocus)===null||g===void 0?void 0:g.call(p)},insertContentsAtCursor:function(){for(var p=arguments.length,g=new Array(p),E=0;E<p;E++)g[E]=arguments[E];var f,O;(f=v())===null||f===void 0||(O=f.insertContentsAtCursor)===null||O===void 0||O.call(f,...g)},isEmpty:()=>{var p,g;return!!(!((p=v())===null||p===void 0||(g=p.isEmpty)===null||g===void 0)&&g.call(p))},isEnabled:()=>{var p,g;return!!(!((p=v())===null||p===void 0||(g=p.isEnabled)===null||g===void 0)&&g.call(p))},prependContents:p=>{var g,E;(g=v())===null||g===void 0||(E=g.prependContents)===null||E===void 0||E.call(g,p)},setContents:function(){for(var p=arguments.length,g=new Array(p),E=0;E<p;E++)g[E]=arguments[E];var f,O;(f=v())===null||f===void 0||(O=f.setContents)===null||O===void 0||O.call(f,...g)},setCursor:function(){for(var p=arguments.length,g=new Array(p),E=0;E<p;E++)g[E]=arguments[E];var f,O;(f=v())===null||f===void 0||(O=f.setCursor)===null||O===void 0||O.call(f,...g)},setCursorAtEnd:()=>{var p,g;(p=v())===null||p===void 0||(g=p.setCursorAtEnd)===null||g===void 0||g.call(p)},setText:function(){for(var p=arguments.length,g=new Array(p),E=0;E<p;E++)g[E]=arguments[E];var f,O;(f=v())===null||f===void 0||(O=f.value)===null||O===void 0||O.call(f,...g)},...h},()=>{delete o[I]}}u(r,"registerInputAuto");function l(i){let{viewContext:m,channelId:h,threadTs:v}=i;return o[`${m}-${h}-${v||void 0}`]}u(l,"getInputProxy");function _(i){if(!i||!(0,a.A)(i))return null;let m,h,v;return(0,c.A)(i,T=>T.getAttribute("data-message-input")?(m=T.getAttribute("data-channel-id"),h=T.getAttribute("data-thread-ts"),v=T.getAttribute("data-view-context"),!0):!1)?l({viewContext:v,channelId:m,threadTs:h}):null}u(_,"getProxyForElement");function d(){let{channelId:i,threadTs:m}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const h=`${i}-${m}`,v=Object.keys(o);return(0,t.A)(v,y=>(0,n.A)(y,h))}u(d,"isInputRegistered")},4394722864:(z,A,e)=>{"use strict";e.d(A,{Q:()=>t});const t=u(()=>null,"noopNull")},662226046:(z,A,e)=>{"use strict";e.d(A,{R2:()=>y,bP:()=>T,ec:()=>f,fU:()=>E,p6:()=>M,qe:()=>O,x2:()=>P,yj:()=>D});var t=e(6858020025),n=e(3783303734),s=e(796111729),a=e(571104883),c=e(5795074931),o=e(8847766420),r=e(2872463257),l=e(3855029223);const _="notification:sent",d="notification:received",i="notification:opened",m="notification:quick_reply",h="notification:read_in_app",v=100;function y(k){try{return JSON.stringify(k)}catch(x){return(0,s.Wo)().warn("encodeNotificationTracePassthrough json stringify error",x),""}}u(y,"encodeNotificationTracePassthrough");function T(k){try{const{traceId:x,parentSpanId:F}=JSON.parse(k);return{traceId:x,parentSpanId:F}}catch(x){return(0,s.Wo)().warn("decodeNotificationTracePassthrough json parse error",x),{traceId:"",parentSpanId:""}}}u(T,"decodeNotificationTracePassthrough");function I(k){let{tracer:x,name:F,parentSpanId:W,traceId:Y}=k;return x.createSpan({name:F,samplingOptions:{sampleType:r.nl.ALWAYS},options:{parentSpanId:W,traceId:Y}})}u(I,"createSpan");function p(k){let{tracer:x,name:F,parentSpanId:W,traceId:Y}=k;const S=I({tracer:x,name:F,parentSpanId:W,traceId:Y});return S.close(),S}u(p,"createAndCloseSpan");function g(k,x){let{tracer:F,message:W}=x;const Y=p({tracer:F,name:_}),S=(0,a.y3)()?"desktop":"browser",L=(0,c.WR)(k),w=(0,o.ZT)(k),J=(0,t.A)(W==null?void 0:W.ts,".",""),G=W==null?void 0:W.channel,X=`${L}-${G}-${J}`;return Y.addTags({platform:S,encoded_user_id:L,encoded_team_id:w,encoded_channel_id:G,message_ts:J,notification_id:X}),Y}u(g,"createAndCloseNotificationSentSpan");function E(k,x){let{message:F}=x;if(!F||!(F!=null&&F.ts)||!(F!=null&&F.channel))return;const W=(0,l.E)({state:k});let Y,S;const L=[];if((F==null?void 0:F.type)==="desktop_notification"&&(F!=null&&F.trace_ctx))Y=F.trace_ctx["x-b3-traceid"],S=F.trace_ctx["x-b3-spanid"];else{const J=g(k,{tracer:W,message:F});L.push(J),S=J.getId(),Y=J.getTraceId()}const w=p({name:d,tracer:W,traceId:Y,parentSpanId:S});return L.push(w),W.reportSpans(L),{traceId:Y,parentSpanId:S}}u(E,"traceNotificationSentAndReceived");function f(k,x){let{notificationTracePassthroughData:F}=x;if(!F)return;const{traceId:W,parentSpanId:Y}=F,S=(0,l.E)({state:k}),L=p({tracer:S,traceId:W,parentSpanId:Y,name:i});S.reportSpans([L])}u(f,"traceNotificationOpened");function O(k,x){let{notificationTracePassthroughData:F,clientMsgId:W}=x;if(!F||!W)return;const{traceId:Y,parentSpanId:S}=F,L=(0,l.E)({state:k}),w=p({tracer:L,traceId:Y,parentSpanId:S,name:m});w.addTags({reply_message_client_message_id:W}),L.reportSpans([w])}u(O,"traceNotificationQuickReply");let C={};function M(k){return!!C[k]}u(M,"messageHasPendingNotificationTrace");function D(k,x){let{timestamp:F,notificationTracePassthroughData:W}=x;if(!W)return;(0,n.A)(C)>v&&((0,s.Ay)({state:k}).error("notification-tracing-utils: notificationTracePassThroughData exceeded maximum size"),C={});const{traceId:Y,parentSpanId:S}=W,L=(0,l.E)({state:k}),w=I({tracer:L,traceId:Y,parentSpanId:S,name:h});C[F]=w}u(D,"openNotificationReadSpan");function P(k,x){let{timestamp:F}=x;if(!F)return;const W=C[F];if(!W)return;const Y=(0,l.E)({state:k});W.close(),Y.reportSpans([W]),delete C[F]}u(P,"closeAndReportNotificationReadSpan")},6979898962:(z,A,e)=>{"use strict";e.d(A,{B:()=>s,I:()=>a.A});var t=e(3134334389),n=e(5356156303);let s=u(class extends t.Component{shouldComponentUpdate(o,r){return!(0,n.Ay)(o,this.props,2)||!(0,n.Ay)(r,this.state,2)}},"PureComponentDepth2");var a=e(8993095355)},8993095355:(z,A,e)=>{"use strict";e.d(A,{A:()=>s});var t=e(3134334389),n=e(5356156303);let s=u(class extends t.Component{shouldComponentUpdate(c,o){return!(0,n.Ay)(c,this.props,3)||!(0,n.Ay)(o,this.state,3)}},"PureComponentDepth3")},7948868735:(z,A,e)=>{"use strict";e.d(A,{F:()=>s});var t=e(6422693406),n=e(4615579178);class s extends n.l{fetchData(){return t.S.resolve()}onCacheData(c){super.onCacheData(c);const o=1e3*60*60*4;this.refreshTimer&&clearTimeout(this.refreshTimer),this.refreshTimer=null,this.refreshTimer=setTimeout(()=>{this._callCacheGet()},this.timeoutMs+Math.random()*o)}getStaleWhileRevalidate(c){return this.isStaleOrUndefined()&&(this._callCacheGet(),this.cachedData===void 0)?c:this.cachedData}constructor(){super(()=>this.fetchData(),1008e5,!1),this.refreshTimer=null}}u(s,"AutocompleteCache")},1948374838:(z,A,e)=>{"use strict";e.d(A,{X:()=>c});var t=e(2223860501),n=e(8847766420);let s=u(class{isStale(){return Date.now()-this.updatedDate>this.timeoutMs}isPrefixStale(){return Date.now()-this.prefixUpdatedDate>this.prefixTimeoutMs}clearIfStale(){this.isStale()&&(this.queryCache.clear(),this.updatedDate=Date.now())}clearPrefixIfStale(){this.isPrefixStale()&&(this.prefixQueryCache.clear(),this.prefixUpdatedDate=Date.now())}contains(r){const l=this.queryCache.has(r);return this.clearIfStale(),l}containsPrefixOf(r){return this.clearPrefixIfStale(),this.prefixQueryCache.containsPrefix(r)}add(r){return this.clearIfStale(),this.queryCache.add(r)}addAsPrefix(r){return this.clearPrefixIfStale(),this.prefixQueryCache.add(r)}setRequestInFlight(){this.inFlightRequestStartTime=Date.now()}clearRequestInFlight(){delete this.inFlightRequestStartTime}isRequestInFlight(){return this.inFlightRequestStartTime?Date.now()-this.inFlightRequestStartTime<this.inFlightRequestTimeoutMs:!1}reset(){this.queryCache.clear(),this.updatedDate=Date.now(),this.prefixQueryCache.clear(),this.prefixUpdatedDate=Date.now(),this.clearRequestInFlight()}constructor(){this.queryCache=new t.A,this.prefixQueryCache=new t.A,this.updatedDate=Date.now(),this.prefixUpdatedDate=Date.now(),this.timeoutMs=1e3*60*60*8,this.prefixTimeoutMs=1e3*60*15,this.inFlightRequestTimeoutMs=400}},"WorkflowTriggersAutocompleteQueryCache");const a={};function c(o){const r=(0,n.ZT)(o),_=(0,n.jV)(o)||r||"";return a[_]||(a[_]=new s),a[_]}u(c,"getWorkflowTriggersAutocompleteQueryCache")},6125148745:(z,A,e)=>{"use strict";e.d(A,{O:()=>I,w:()=>y});var t=e(9706240641),n=e.n(t),s=e(6422693406),a=e(6987519067),c=e(9289081806),o=e(1407713935),r=e(8798294025),l=e(8040098042),_=e(926136447),d=e(9752307e3),i=e(9150404500),m=e(9101533895),h=e(2036289572),v=e(2505585477);function y(E,f){const O=(0,v.YR)(E),C=new RegExp(`\\b(${(0,i.av)().in}|in):(#([^\\s]+))`,"g"),M=d.dn.fromString(E,O),D={};return M.suggestionTokenList.forEach(k=>{if(k instanceof _.tT){const{id:x,name:F}=k.getRawIdAndNameForXwsChannelWorkaround();x&&(0,l.A)(x)&&F&&(D[F]||(D[F]=[]),D[F].push({id:x,name:F}))}}),f.replace(C,(k,x,F,W)=>{if(D[W]&&D[W].length>0){const{id:Y,name:S}=D[W].shift()||{};return`${x}:<#${Y}|${S}>`}return k})}u(y,"convertUserQueryXwsChannelStringsForXwsChannelWorkaround");function T(E,f){if((0,o.LI)(f))return`<@${(0,r.e)(f)}>`;const O=(0,c.SB)(E,f,{publicChannelIncludeHashSign:!1,imIncludeAtSign:!1});return O?`<#${f.id}|${O}>`:`<#${f.id}>`}u(T,"formatInChannelValue");function I(E,f,O){const C=f(),M={},D=[],P={};((0,v.Zi)(C)||[]).forEach(F=>{const W=(0,m.OL)(C,F);W&&D.push(W)});const x=new RegExp(`\\b(${(0,i.av)().in}|in):(#([^\\s]+))`,"g");return p(O,x,(F,W,Y,S)=>{const L=D.find(J=>(0,c.mG)(J)===S&&!M[J.id]&&!P[J.id]);if(L)return M[L.id]=!0,P[L.id]=!0,s.S.resolve(`${W}:${T(C,L)}`);const w=(0,m.Os)(C,S);return w&&!M[w.id]?(M[w.id]=!0,s.S.resolve(`${W}:${T(C,w)}`)):E((0,a.$P)({query:S,options:{fuzzyLimit:0,limit:150,entities:{channels:{includeArchived:!0,includeFromAnotherTeam:!0}},sort:{frecency:!1}}})).then(J=>{const G=f(),X=S&&S.replace("#",""),te=J.find(ve=>ve.name===X&&!M[ve.id]);if(!te)return`${W}:${Y}`;M[te.id]=!0;const le=(0,v.C6)(G).queryFilter;return le.in=Array.from(new Set([...le.in||[],te.id])),E((0,h.c3)({queryFilter:le})),`${W}:${T(C,te)}`})})}u(I,"convertContentsStringForEncodedXwsChannels");function p(E,f,O){return g.apply(this,arguments)}u(p,"replaceAsync");function g(){return g=(0,t.coroutine)(function*(E,f,O){const C=[];E.replace(f,function(D){for(var P=arguments.length,k=new Array(P>1?P-1:0),x=1;x<P;x++)k[x-1]=arguments[x];const F=O(D,...k);return C.push(F),E});const M=yield s.S.all(C);return E.replace(f,()=>M.shift()||"")}),g.apply(this,arguments)}u(g,"_replaceAsync")},2825917518:(z,A,e)=>{"use strict";e.d(A,{A:()=>a,u:()=>s});var t=e(6617433054),n=e(9422011462);const s=/[- _'.\u{2019}\u{200b}()/\uFF0F]/gu;let a=u(class Ds{normalizeAndScore(o){const r=(0,n.B)(o);return r===this.normalizedQuery?0:this.score(r)}score(o){if(!o||this.queryNoSeparators.length>o.replace(s,"").length||!Ds.containsAllLetters(o,this.queryNode)||!this.queryNode)return 1/0;const l=Ds.lettersToGraph(o,this.options);if(!l)return 1/0;const _=Ds.searchWordBoundariesOnly(l,this.queryNode,this.options);if(!_)return 1/0;const d=Ds.countResult(_);return d>this.fuzzyLimit?1/0:d}static scoreOnce(o,r,l){const _=(0,n.B)(r),d=(0,n.B)(o);return new Ds(_,l).score(d)}static lettersToGraph(o,r){const l=o.split(""),_=l.shift();return Ds.lettersToGraphWorker(_,null,l,[],0,r)}static lettersToGraphWorker(o,r,l,_,d){let i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};if(!o)return null;const m=(0,t.A)(o),h=Ds.makeLetterNode(o,r,_,d,m);if(Ds.shouldAddJump(r,h,i)){const y=i.fuzzyJumpLimit||5;_.length<y&&_.push(h)}const v=Ds.lettersToGraphWorker(l.shift(),h,l,_,d+1,i);return v&&(h.next=v),h}static shouldAddJump(o,r){let l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return r.ignored?!1:!!(!o||o.ignored&&!r.ignored||l.fuzzyCJK&&(o.isCJK!==r.isCJK||r.isCJK))}static makeLetterNode(o,r,l,_,d){return{letter:o,ignored:o.match(s),next:null,prev:r,jumps:l,visited:!1,index:_,isCJK:d}}static queryToLinkedList(o){if(!o)return null;let r=o.split("");return r.length>1024&&(r=r.slice(0,1024)),Ds.queryToLinkedListWorker(r,0)}static queryToLinkedListWorker(o,r){if(r>=o.length)return null;const l=o[r],_=!!(l.match(s)&&(r!==0||o.length>1));return{letter:l,isSeparator:_,isSpace:l===" ",next:Ds.queryToLinkedListWorker(o,r+1),index:r}}static searchWordBoundariesOnly(o,r){let l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},_=Ds.searchWordBoundariesOnlyWorker(o,r,0,l);return _||(_=o.jumps.reduce((d,i)=>d||i===o?d:Ds.searchWordBoundariesOnlyWorker(i,r,1,l),null)),_}static searchWordBoundariesOnlyWorker(o,r,l){let _=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};if(!o||!r)return null;let d;if(!o.visited&&(o.letter===r.letter||o.ignored&&r.isSeparator)&&(d={node:o,count:l}),!d)return null;if(!r.next)return d;o.visited=!0;let i=Ds.searchWordBoundariesOnlyWorker(o.next,r.next,0,_),m=r.next;for(;m.isSeparator&&m.next;)m=m.next;return i||(i=o.jumps.reduce((h,v)=>h||v.visited||v===o||(_.searchForwardOnly||_.substringsOnly)&&v.index<o.index||_.substringsOnly&&v.index>o.index+2?h:Ds.searchWordBoundariesOnlyWorker(v,m,1,_),null)),o.visited=!1,i?(d.next=i,d):null}static countResult(o){return o?o.count+Ds.countResult(o.next):0}static containsAllLetters(o,r){let l=r;for(;l;){if(!(l.isSeparator||o.includes(l.letter)))return!1;l=l.next}return!0}constructor(o,r={}){this.normalizedQuery=(0,n.B)(o),this.queryNode=Ds.queryToLinkedList(this.normalizedQuery),this.options=r;var l;this.fuzzyLimit=(l=this.options.fuzzyLimit)!==null&&l!==void 0?l:1/0,this.queryNoSeparators=this.normalizedQuery.replace(s,"")}},"FuzzyMatcher")},8170659516:(z,A,e)=>{"use strict";e.d(A,{A:()=>c});var t=e(9289081806),n=e(8921478798),s=e(8701485242),a=e(5795074931);function c(o){let{state:r,mpim:l,matchData:_}=o;const d=(0,a.WR)(r);let i=[];if((0,t.Ug)(l)&&(i=(0,t.Ug)(l).filter(T=>d!==T)),!_)return i;const m=!1,h=!1,v=[];_.forEach(T=>{T.map(p=>({name:(0,n.I)(r,p.id,m,h),...p})).sort((p,g)=>p.score<g.score?1:p.score>g.score?-1:(0,s.Ay)(p.name,g.name)).filter(p=>isFinite(p.score)).forEach(p=>{i.includes(p.id)&&(v.push(p.id),i.splice(i.indexOf(p.id),1))})});const y=i.map(T=>({id:T,name:(0,n.I)(r,T,m,h)})).sort((T,I)=>(0,s.Ay)(T.name,I.name)).map(T=>T.id);return[...v,...y]}u(c,"getMemberDisplayOrderForSearcherMPIM")},220244708:(z,A,e)=>{"use strict";e.d(A,{B:()=>a});var t=e(6495946979),n=e(8170643398),s=e(3730613858);function a(c,o,r){if((0,n.fy)(o))return(0,t.b)(r);const l=(0,s.Ql)(c,r.id,o.id);return!!(l.isKnown&&l.isMember)}u(a,"isUserKnownToBeMemberOfChannel")},1072784641:(z,A,e)=>{"use strict";e.d(A,{A:()=>he});var t=e(7715417323),n=e(5729325965),s=e(1703559452),a=e(4249070636),c=e(5238395322),o=e(8086952004),r=e(2003990933),l=e(3037015781),_=e(8496310524),d=e(7111365413),i=e(9289081806),m=e(1407713935),h=e(8798294025),v=e(395285811),y=e(3890290905);const T=u(_e=>_e&&(_e.displayName||_e.display_name||(0,y.Y)(_e)),"getEmojiDisplayName"),I=u(_e=>_e?(_e.aliases?[_e,..._e.aliases]:[_e]).map(de=>({name:(0,y.Y)(de),displayName:T(de)})):null,"getAllEmojiNameObjects");var p=e(2188787324),g=e(102566929),E=e(5455782105),f=e(8170643398),O=e(9262712126),C=e(6120301420),M=e(3212336858),D=e(6839188756),P=e(2023092677),k=e(1033870301),x=e(796111729);const F={china:["pinching_hand","pinching-hand"],dead:["older_adult"],dump:["hindu_temple"],fail:["family"],gross:["flag-progress-pride"],hi:["shit"],hit:["shit"],hitler:["white_flower"],it:["shit"],macht:["mannlichkeitssymbol"],sh:["shit"],shi:["shit"],shoot:["school_satchel"],s:["shit"],sit:["shit"],sith:["person_with_headscarf"],war:["man-wearing-turban"],whine:["menorah_with_nine_branches"],worst:["woman-wrestling"],wrong:["woman-rowing-boat"]};var W=e(1917953477),Y=e(2825917518),S=e(9422011462),L=e(3482349120),w=e(2332798892);const J=u(_e=>(_e||"").split(/\s+/)[0],"getFirstWord"),G=u(_e=>["/","\uFF0F"].includes((_e||"").charAt(0))?_e:`/${_e}`,"prependSlashToStr"),X=u(_e=>((_e||"").split(/[^\S\n\r]+/g)||[]).length>1,"strHasSpace");var te=e(8847766420),le=e(2762206868),ve=e(9101533895),Q=e(4761125736),Ae=e(8276911661),ae=e(3677514771);let he=u(class{filterMembers(ee,de){let Ie=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.A;return de.reduce((ce,j)=>{if((0,f.Zx)(j)||this.shouldFilterItem(j,Ie))return ce;if(!this.query&&this.allowEmptyQuery){const K={item:j,score:0,id:j.id};return this.selfFirst&&(0,f.fy)(j)&&(K.isSelf=!0),ce.push(K),ce}const{score:N,scoreDetails:b}=this.scoreMember(j),R={item:j,score:N,scoreDetails:b,id:j.id};return!this.avoidExactMatchForMembers&&this.preferExactMatch&&(R.isExactMatch=this.isMemberExactMatch(j),R.exactMatchDetails=this.getMemberExactMatchDetails(j)),this.selfFirst&&(0,f.fy)(j)&&(R.isSelf=!0),N<=this.fuzzyLimit&&ce.push(R),ce},[])}scoreMember(ee){let de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.matcher;const Ie=1/0,ce={};if(this.queryIsMaybeSelf&&(0,f.fy)(ee))ce.self_score=0;else{const R=(0,O.j_)(ee),K=(0,O.sJ)(ee);ce.real_name=R?de.score(R):Ie,ce.display_name=K?de.score(K):Ie}if(this.shouldMatchEmail){const R=(0,O.ZL)(ee);ce.email=R?this.forwardOnlyMatcher.score(R):1/0}var j;const N=(j=(0,n.A)(Object.values(ce)))!==null&&j!==void 0?j:Ie,b=Object.entries(ce).reduce((R,K)=>{let[B,$]=K;return isFinite($)&&(R[B]=$),R},{});return{score:N,scoreDetails:b}}filterChannels(ee,de){let Ie=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.A;return de.reduce((ce,j)=>{if((0,m.PC)(j)||(0,m.Zx)(j)||(0,v.jT)(j)||this.shouldFilterItem(j,Ie))return ce;if(!this.query&&this.allowEmptyQuery)return ce.push({item:j,score:0,id:j.id}),ce;const N=(0,S.B)((0,i.SB)(ee,j,{publicChannelIncludeHashSign:!1})),b=this.matcher.score(N),R={item:j,score:b,id:j.id};this.preferExactMatch&&(R.isExactMatch=this.isChannelExactMatchPreNormalized(N));const K=this.options.entities&&this.options.entities.channels&&this.options.entities.channels.searchPreviousNames,B=j.previous_names&&j.previous_names.length;let $=!1;if(K&&B){var Z;const re=j==null||(Z=j.previous_names)===null||Z===void 0?void 0:Z.map(Pe=>({score:this.matcher.normalizeAndScore(Pe),name:Pe}));R.previousNameScores=re,$=(0,s.A)(re,Pe=>Pe.score<=this.fuzzyLimit);const Te=$&&b>this.fuzzyLimit;let Ce;if(Te){const Pe=(0,a.A)(re,"score");Ce=Pe&&Pe.name}R.bestPreviousNameMatch=Ce}return b<=this.fuzzyLimit||$?ce.push(R):this.rawQuery===j.id&&ce.push({item:j,score:0,id:j.id}),ce},[])}filterTeams(ee,de){let Ie=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.A;return de.reduce((ce,j)=>{if((0,D.Zx)(j)||this.shouldFilterItem(j,Ie))return ce;if(!this.query&&this.allowEmptyQuery)return ce.push({item:j,score:0,id:j.id}),ce;const N=this.matcher.normalizeAndScore((0,D.F1)(j)),b={item:j,score:N,id:j.id};return this.preferExactMatch&&(b.isExactMatch=this.isTeamExactMatch(j)),N<=this.fuzzyLimit&&ce.push(b),ce},[])}filterUserGroups(ee,de){let Ie=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.A;return de.reduce((ce,j)=>{if((0,P.Zx)(j)||this.shouldFilterItem(j,Ie))return ce;if(!this.query&&this.allowEmptyQuery)return ce.push({item:j,score:0,id:j.id}),ce;const N=this.scoreUserGroupName(j),b={item:j,score:N,id:j.id};return this.preferExactMatch&&(b.isExactMatch=this.isUsergroupExactMatch(j)),N<=this.fuzzyLimit&&ce.push(b),ce},[])}scoreUserGroupName(ee){let de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.matcher,Ie=1/0,ce=1/0;const j=(0,P.TZ)(ee)||(0,P.ue)(ee).toLocaleLowerCase(),N=(0,P.x_)(ee,{includeAtSign:!1});return Ie=de.normalizeAndScore(j),N&&(ce=de.normalizeAndScore(N)),Math.min(Ie,ce)}getSubQueryMatchers(){return this.query.split(/[,| ]/).filter(de=>!!de).map(de=>{const Ie=de.charAt(0)==="@"?de.substring(1):de;return new Y.A(Ie,{fuzzyLimit:this.fuzzyLimit})})}filterMpims(ee,de){let Ie=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.A;return de.reduce((ce,j)=>{if(this.shouldFilterItem(j,Ie))return ce;if(!this.query&&this.allowEmptyQuery)return ce.push({item:j,score:0,id:j.id}),ce;const N=(0,i.Ug)(j);if(!N)return ce;const b=N.map(Ce=>(0,Ae.nv)(ee,Ce)).filter(Ce=>!(0,f.fy)(Ce)&&!(0,f.Zx)(Ce)),R={},K={},B=[];let $=0;const Z=this.getSubQueryMatchers();for(const Ce of Z){const Pe=[];let fe=1/0;for(const pe of b){const{score:q,scoreDetails:se}=this.scoreMember(pe,Ce),ge=R==null?void 0:R[pe.id];q<(ge!==void 0?ge:1/0)&&(R[pe.id]=q,K[pe.id]={score_details:se}),Pe.push({id:pe.id,score:q}),q<fe&&(fe=q)}B.push(Pe),$+=fe}let re;isFinite($)?re=(0,c.A)(Object.values(R).filter(isFinite)):re=$;const Te={id:j.id,item:j,score:re,scoreDetailsByMember:K,subqueryScoresByMember:B};return re<=this.fuzzyLimit?ce.push(Te):this.rawQuery===j.id&&ce.push({item:j,score:0,id:j.id}),ce},[])}filterIms(ee,de){let Ie=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.A;return de.reduce((ce,j)=>{if(this.shouldFilterItem(j,Ie))return ce;const N=(0,h.e)(j);if(!N)return ce;const b=(0,Ae.nv)(ee,N);if((0,f.Zx)(b))return ce;if(!this.query&&this.allowEmptyQuery)return ce.push({item:j,score:0,id:j.id}),ce;const{score:R,scoreDetails:K}=this.scoreMember(b),B={item:j,score:R,scoreDetails:K,id:j.id};return!this.avoidExactMatchForMembers&&this.preferExactMatch&&(B.isExactMatch=this.isMemberExactMatch(b),B.exactMatchDetails=this.getMemberExactMatchDetails(b)),R<=this.fuzzyLimit?ce.push(B):this.rawQuery===j.id&&ce.push({item:j,score:0,id:j.id}),ce},[])}filterViews(ee,de){let Ie=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.A;return de.reduce((ce,j)=>{if(this.shouldFilterItem(j,Ie))return ce;if(!this.query&&this.allowEmptyQuery)return ce.push({item:j,score:0,id:j.id}),ce;const N=this.matcher.normalizeAndScore(j.name),b={item:j,score:N,id:j.id};return this.preferExactMatch&&(b.isExactMatch=this.isViewOrModalExact(j)),N<=this.fuzzyLimit&&ce.push(b),ce},[])}filterModals(ee,de){let Ie=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.A;return de.reduce((ce,j)=>{if(this.shouldFilterItem(j,Ie))return ce;if(!this.query&&this.allowEmptyQuery)return ce.push({item:j,score:0,id:j.id}),ce;const N=this.matcher.normalizeAndScore(j.name),b={item:j,score:N,id:j.id};return this.preferExactMatch&&(b.isExactMatch=this.isViewOrModalExact(j)),N<=this.fuzzyLimit&&ce.push(b),ce},[])}filterAppActions(ee,de){let Ie=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.A;return de.reduce((ce,j)=>{if((0,l.GU)(j)||this.shouldFilterItem(j,Ie))return ce;if(!this.query&&this.allowEmptyQuery)return ce.push({item:j,score:0,id:j.id}),ce;const N=(0,_.u)(j),b=(0,le.sO)(ee,j.app_id),R=!(0,l.GU)(b)&&(0,d.fj)(b),K=R?[`${N} ${R}`,`${R} ${N}`]:[N],B=K.map(re=>this.matcher.normalizeAndScore(re)),$=Math.min(...B),Z={item:j,score:$,id:j.id};return this.preferExactMatch&&(Z.isExactMatch=!!(this.query&&K.map(S.B).includes(this.query))),$<=this.fuzzyLimit&&ce.push(Z),ce},[])}filterApps(ee,de,Ie,ce){let j=arguments.length>4&&arguments[4]!==void 0?arguments[4]:t.A;const N={};return de!=null&&de.length&&de.forEach(b=>{const R=b.app_id;R&&!N[R]&&(N[R]={id:R,name:b.appName})}),Ie!=null&&Ie.length&&Ie.forEach(b=>{const R=b==null?void 0:b.appId;R&&!N[R]&&(N[R]={id:R,name:b==null?void 0:b.appName})}),ce!=null&&ce.length&&ce.forEach(b=>{const R=b.appId;R&&!N[R]&&(N[R]={id:R,name:b.appName})}),this.filterShortcuts(ee,Object.values(N),!1,j)}filterShortcuts(ee,de){let Ie=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,ce=arguments.length>3&&arguments[3]!==void 0?arguments[3]:t.A;return de.reduce((j,N)=>{if((0,l.GU)(N)||this.shouldFilterItem(N,ce))return j;if(!this.query&&this.allowEmptyQuery)return j.push({item:N,score:0,id:N.id}),j;const{score:b,scoreDetails:R,bestNameMatch:K,bestNameIsExactMatch:B}=this.scoreShortcut(N,Ie),$={item:N,id:N.id,score:b};if(Ie){$.firstWordOfRawQuery=J(this.query);const Z=(0,w.A)(N,G($.firstWordOfRawQuery),{allowPartialMatches:!1});$.commandMatch=Z&&this.isOpenedWithSlash,$.isExactMatch=$.commandMatch}return $.scoreDetails=R,$.bestNameMatch=K,$.bestNameIsExactMatch=B,$.isExactMatch=$.isExactMatch||B,(b<=this.fuzzyLimit||$.commandMatch)&&j.push($),j},[])}scoreShortcut(ee){let de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,Ie=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.matcher;const ce=this.isQueryExactlySlash?[]:ee.aliases||[];let j=(0,S.B)((0,M.fK)(ee));const N={name:Ie.score(j),label:Ie.normalizeAndScore(ee.label),desc:Ie.normalizeAndScore((0,M.Hv)(ee)),app_name:Ie.normalizeAndScore((0,M.qA)(ee))};de&&N.name!==void 0&&N.name>0&&(N.name-=1);let b,R,K;ce.forEach(re=>{let Te=(0,S.B)(re);!this.query.startsWith("/")&&!this.query.startsWith("\uFF0F")&&(Te=(0,W.O)(Te));const Ce=Ie.score(Te);Te=(0,W.O)(Te),!K&&(b===void 0||Ce<b)&&(b=Ce,R=Te),this.normalizedQuery===Te&&(K=!0,R=Te)}),b!==void 0&&isFinite(b)&&(N.aliases=b);var B;const $=(B=(0,n.A)(Object.values(N)))!==null&&B!==void 0?B:1/0;j=(0,W.O)(j),!K&&isFinite(N.name)&&(b===void 0||N.name<b)&&(R=j),this.normalizedQuery===j&&(K=!0,R=j);const Z=Object.entries(N).reduce((re,Te)=>{let[Ce,Pe]=Te;return isFinite(Pe)&&(re[Ce]=Pe),re},{});return{score:$,scoreDetails:Z,bestNameMatch:R,bestNameIsExactMatch:K}}filterWorkflowTriggers(ee,de){return de.reduce((Ie,ce)=>{if(!this.query&&this.allowEmptyQuery)return Ie.push({item:ce,score:0,id:ce.id}),Ie;const j=this.scoreWorkflowTrigger(ce),N={item:ce,score:j,id:ce.id};return this.preferExactMatch&&(N.isExactMatch=this.isTriggerExactMatch(ce)),j<=this.fuzzyLimit&&Ie.push(N),Ie},[])}scoreWorkflowTrigger(ee){let de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.matcher;var Ie;const ce={name:de.normalizeAndScore(ee.name),description:de.normalizeAndScore(ee.description),appName:de.normalizeAndScore((Ie=ee.workflow.app)===null||Ie===void 0?void 0:Ie.name)};var j;return(j=(0,n.A)(Object.values(ce)))!==null&&j!==void 0?j:1/0}filterBroadcastKeywords(ee,de){let Ie=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.A;return de.reduce((ce,j)=>{if(this.shouldFilterItem(j,Ie))return ce;if(!this.query&&this.allowEmptyQuery)return ce.push({item:j,score:0,id:j.id}),ce;const N=this.scoreBroadcastKeyword(j),b={item:j,score:N,id:j.id};return this.preferExactMatch&&(b.isExactMatch=this.isBroadcastKeywordExactMatch(j)),N<=this.fuzzyLimit&&ce.push(b),ce},[])}scoreBroadcastKeyword(ee){let de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.matcher,Ie=1/0,ce=1/0;const j=de.normalizeAndScore(ee.name);return ee.id==="BKchannel"&&(Ie=de.normalizeAndScore("group")),ee.ms_name!==ee.name&&(ce=de.normalizeAndScore(ee.ms_name)),Math.min(j,ce,Ie)}filterEmoji(ee,de){let Ie=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.A;const ce=[];return de.forEach(j=>{if(this.shouldFilterItem(j,Ie))return;if(!this.query&&this.allowEmptyQuery){var N;ce.push({item:j,emojiScore:0,emojiMatchIndices:[],score:0,id:(N=j.id)!==null&&N!==void 0?N:j.name});return}var b;const R=(b=I(j))!==null&&b!==void 0?b:[];let K=1/0,B,$,Z,re,Te,Ce;R.forEach(ge=>{let{name:Oe,displayName:Le}=ge;if(Oe){const We=(0,S.B)(Oe),Re=this.scoreEmojiName(We);(Re.score<K||K===1/0)&&(K=Re.score,B=Re.matchIndices,$=Oe,Z=Oe,Te=Re.queryLengthRatio,Ce=Re.totalComboBreaks,re=this.query===We||Oe==="ok_hand"&&this.query==="ok")}if(Le&&Le!==Oe){const We=(0,S.B)(Le),Re=this.scoreEmojiName(We);(Re.score<K||K===1/0)&&(K=Re.score,B=Re.matchIndices,$=Le,Z=Oe,Te=Re.queryLengthRatio,Ce=Re.totalComboBreaks,re=this.query===We)}});const Pe=this.options&&this.options.entities&&this.options.entities.emoji&&this.options.entities.emoji.matchKeywords,fe=j.keywords,pe=!!(fe&&fe.length&&Array.isArray(fe));fe&&fe.length&&!Array.isArray(fe)&&(0,x.Ay)({state:ee}).error("https://slack.zendesk.com/agent/tickets/2393782",`Emoji keywords for ${j.name} is not an array - ${j.keywords}`);let q=!1;if(K===1/0&&Pe&&pe&&(q=j.keywords.some(ge=>this.matcher.normalizeAndScore(ge)<1/0),q&&($=j&&(j.displayName||j.name))),K!==1/0||q){const ge=(0,o.A)(R,We=>{let{name:Re}=We;return Re===Z}),Oe=ge&&ge.displayName;var se;const Le={item:j,score:K,emojiScore:K,emojiBestNameMatch:$,emojiBestNameMatchCanonical:Z,emojiBestNameMatchLocalized:Oe,emojiMatchIndices:B,emojiQueryLengthRatio:Te,emojiTotalComboBreaks:Ce,id:(se=j.id)!==null&&se!==void 0?se:j.name};this.preferExactMatch&&(Le.isExactMatch=re,Le.isEmojiExactMatch=re),ce.push(Le)}}),ce}scoreEmojiName(ee){const de={score:1/0,matchIndices:[],queryLengthRatio:0,totalComboBreaks:null};if(!ee)return de;if(ee==="ok_hand"&&this.query==="ok")return{score:0,matchIndices:[0,1],queryLengthRatio:1,totalComboBreaks:0};if(F[this.query]&&F[this.query].indexOf(ee)!==-1)return de;const Ie=this.query.length,ce=[];let j=2,N=5;Ie<3?(j=0,N=0):Ie===3?(j=1,N=1):Ie===4&&(j=1);let b=1/0,R=0,K=null,B=ee.indexOf(this.query);if(B===-1&&(B=ee.indexOf(this.query[0])),B!==-1){const $=/\s+/g,Z=/[-]+/g,re=this.query.replace($,"").replace(Z,"_"),Te=ee.replace(Z,"_"),Ce=re.split("");K=0;let Pe=0,fe=0,pe=!0;for(let q=B;q<Te.length;q++){if(Te[q]===Ce[0]){if(pe=!0,ce.push(q),Ce.shift(),fe>Pe&&(Pe=fe),fe=0,Ce.length===0)break}else pe&&(K+=1),pe=!1,fe+=1;if(K>j)return{score:b,matchIndices:ce,queryLengthRatio:R,totalComboBreaks:K};if(fe>N)return{score:b,matchIndices:ce,queryLengthRatio:R,totalComboBreaks:K}}if(Ce.length>0)return de;R=re.length/Te.length,b=1-R,K>0&&(b+=K)}return{score:b,matchIndices:ce,queryLengthRatio:R,totalComboBreaks:K}}filterFiles(ee,de){let Ie=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.A;const ce=(0,C.hq)(ee),j=(0,te.Kc)(ee),N=(0,ae._J)(ee,j),b=(0,E.k)(ee),R=N&&(0,D.qR)(N),K=!b&&!R,B=(0,Q._Z)(ee,"native_dlp_canvas")==="on";return de.reduce(($,Z)=>{var re,Te;if((0,l.GU)(Z)||(0,p.sR)(Z))return $;const Ce=(re=this.options)===null||re===void 0||(Te=re.entities)===null||Te===void 0?void 0:Te.files,Pe=!!(Ce!=null&&Ce.includeChannelCanvases)||!!(Ce!=null&&Ce.onlyChannelCanvases);if(Z&&(0,p.aD)(Z)&&!Pe)return $;const fe=Z&&(0,p.CA)(Z),pe=Z==null?void 0:Z.user_team,q=pe?(0,ae._J)(ee,pe):null;var se;const Oe=((se=(0,D.Ss)(q??void 0))!==null&&se!==void 0?se:pe)!==j;if(fe&&(Oe||K)||B&&(0,p.Sp)(Z)||Z&&ce&&(Ce!=null&&Ce.onlyChannelCanvases||K)&&(0,p.wL)(Z)||this.shouldFilterItem(Z,Ie))return $;if(!this.query&&this.allowEmptyQuery)return $.push({item:Z,score:0,id:Z.id}),$;const Le=this.scoreFile(ee,Z),We={item:Z,score:Le,id:Z.id};return this.preferExactMatch&&(We.isExactMatch=this.isFileExactMatch(Z)),Le<=this.fuzzyLimit&&$.push(We),$},[])}scoreFile(ee,de){let Ie=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.matcher;const ce=de.name?Ie.normalizeAndScore(de.name):1/0,j=de.title&&de.name!==de.title?Ie.normalizeAndScore(de.title):1/0,N=de.external_url?Ie.normalizeAndScore(de.external_url):1/0,b=de.permalink?Ie.normalizeAndScore(de.permalink):1/0;let R=1/0;if((0,p.aD)(de)){const K=(0,g.Iz)(de),B=(0,ve.OL)(ee,K);if(B){const $=(0,S.B)((0,i.SB)(ee,B,{publicChannelIncludeHashSign:!1}));R=this.matcher.score($)}}return Math.min(ce,j,N,b,R)}filterLists(ee,de){let Ie=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.A;return de.reduce((ce,j)=>{if(this.shouldFilterItem(j,Ie))return ce;if(!this.query&&this.allowEmptyQuery)return ce.push({item:j,score:0,id:j.id}),ce;const N=this.scoreList(j),b={item:j,score:N,id:j.id};return this.preferExactMatch&&(b.isExactMatch=this.isListExactMatch(j)),N<=this.fuzzyLimit&&ce.push(b),ce},[])}scoreList(ee){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.matcher).normalizeAndScore(ee.title)}filterListRecords(ee,de){let Ie=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.A;return de.reduce((ce,j)=>{if(this.shouldFilterItem(j,Ie)||!j.name||!j.listTitle)return ce;if(!this.query&&this.allowEmptyQuery)return ce.push({item:j,score:0,id:j.id}),ce;const N=this.scoreListRecord(j),b={item:j,score:N,id:j.id};return this.preferExactMatch&&(b.isExactMatch=this.isListRecordExactMatch(j)),N<=this.fuzzyLimit&&ce.push(b),ce},[])}scoreListRecord(ee){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.matcher).normalizeAndScore(ee.name)}filterChannelSections(ee,de){let Ie=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.A;return de.reduce((ce,j)=>{if(this.shouldFilterItem(j,Ie))return ce;const N=(0,k.v2)(ee,j),b=this.matcher.normalizeAndScore(N),R={item:j,score:b,id:j.id};return!this.query&&this.allowEmptyQuery?(ce.push(R),ce):(b<=this.fuzzyLimit&&ce.push(R),ce)},[])}shouldFilterItem(ee,de){return de(ee)===!1||this.filter(ee)===!1}getMemberExactMatchDetails(ee){const de={},Ie=(0,O.j_)(ee),ce=(0,O.sJ)(ee);return de.real_name=Ie===this.query,de.display_name=ce===this.query,this.shouldMatchEmail&&(de.email=(0,O.ZL)(ee)===this.query),de}isMemberExactMatch(ee){return!this.query||!this.query.length?!1:(0,s.A)(this.getMemberExactMatchDetails(ee),Boolean)}isChannelExactMatchPreNormalized(ee){return!this.query||!this.query.length?!1:ee===this.query}isFileExactMatch(ee){if(!this.query||!this.query.length)return!1;var de,Ie;return(0,S.B)(ee.name)===this.query||(0,S.B)(ee.title)===this.query||(0,S.B)((de=ee.external_url)!==null&&de!==void 0?de:void 0)===this.query||(0,S.B)((Ie=ee.permalink)!==null&&Ie!==void 0?Ie:void 0)===this.query}isListExactMatch(ee){return!this.query||!this.query.length?!1:(0,S.B)(ee.title)===this.query}isListRecordExactMatch(ee){return!this.query||!this.query.length?!1:(0,S.B)(ee.name)===this.query}isTeamExactMatch(ee){return!this.query||!this.query.length?!1:(0,S.B)((0,D.F1)(ee))===this.query}isUsergroupExactMatch(ee){return!this.query||!this.query.length?!1:(0,S.B)((0,P.x_)(ee))===this.query||(0,S.B)((0,P.ue)(ee))===this.query}isTriggerExactMatch(ee){return!this.query||!this.query.length?!1:(0,S.B)(ee.name)===this.query}isBroadcastKeywordExactMatch(ee){return!this.query||!this.query.length?!1:(0,S.B)(ee.name)===this.query||(0,S.B)(ee.ms_name)===this.query}isViewOrModalExact(ee){return!this.query||!this.query.length?!1:(0,S.B)(ee.name)===this.query}filterHelpArticles(ee,de){const ce=de.reduce((j,N)=>{const b=(0,S.B)(N.title),R=this.substringMatcher.normalizeAndScore(N.title);return R>this.fuzzyLimit?j:j.concat({item:{...N,id:String(N.id)},score:R,isExactMatch:b===this.query,id:String(N.id)})},[]).sort((j,N)=>j.score-N.score);return ce.slice(0,Math.min(5,ce.length))}filterSalesforceRecordSuggestions(ee,de){const ce=de.reduce((j,N)=>{const b=N.label;if(!b)return j;const R=(0,S.B)(b),K=this.substringMatcher.normalizeAndScore(R);if(K>this.fuzzyLimit)return j;const B=N.id;return j.concat({item:{...N,name:b,recordType:N.objectType},score:K,isExactMatch:R===this.query,id:B})},[]).sort((j,N)=>j.score-N.score);return ce.slice(0,Math.min(5,ce.length))}filterSalesListViews(ee,de){return de.reduce((ce,j)=>{const N=j.label;if(!N)return ce;const b=(0,S.B)(N),R=this.substringMatcher.normalizeAndScore(b);if(R>this.fuzzyLimit)return ce;const K=j.id;return ce.concat({item:{...j,id:K,name:N},score:R,isExactMatch:b===this.query,id:K})},[])}constructor({query:ee="",options:de={entities:{}}}){var Ie,ce,j,N,b,R,K,B,$,Z,re,Te,Ce;this.options=de,this.rawQuery=ee,this.query=(0,S.B)(ee);var Pe;this.fuzzyLimit=(Pe=this.options.fuzzyLimit)!==null&&Pe!==void 0?Pe:3,this.allowEmptyQuery=!!this.options.allowEmptyQuery,this.preferExactMatch=!!(this.options.sort&&this.options.sort.preferExactMatch),this.avoidExactMatchForMembers=!!(!((Ie=this.options)===null||Ie===void 0||(ce=Ie.sort)===null||ce===void 0)&&ce.avoidExactMatchForMembers),this.selfFirst=!!(!((j=this.options)===null||j===void 0||(N=j.sort)===null||N===void 0)&&N.selfFirst),this.filter=this.options.filter||t.A,this.shouldMatchEmail=(0,r.A)(this.options,"entities.members.matchEmailField")||(0,r.A)(this.options,"entities.channels.matchEmailField"),this.queryIsMaybeSelf=(0,L.t)(ee),this.normalizedQuery=this.query,!((b=this.options)===null||b===void 0||(R=b.entities)===null||R===void 0||(K=R.shortcuts)===null||K===void 0)&&K.queryStartsWithSlash&&(this.query=G(this.query)),this.matcher=new Y.A(this.query,{fuzzyLimit:this.fuzzyLimit,fuzzyJumpLimit:this.options.fuzzyJumpLimit,fuzzyCJK:this.options.fuzzyCJK}),this.forwardOnlyMatcher=new Y.A(this.query,{fuzzyLimit:this.fuzzyLimit,fuzzyJumpLimit:this.options.fuzzyJumpLimit,fuzzyCJK:this.options.fuzzyCJK,searchForwardOnly:this.options.fuzzyEmailSearchForwardOnly}),this.substringMatcher=new Y.A(this.query,{fuzzyLimit:this.fuzzyLimit,fuzzyJumpLimit:this.options.fuzzyJumpLimit,fuzzyCJK:this.options.fuzzyCJK,substringsOnly:!0}),this.isOpenedWithSlash=!!(!((B=this.options)===null||B===void 0||($=B.entities)===null||$===void 0||(Z=$.shortcuts)===null||Z===void 0)&&Z.isOpenedWithSlash),this.isQueryExactlySlash=!!(!((re=this.options)===null||re===void 0||(Te=re.entities)===null||Te===void 0||(Ce=Te.shortcuts)===null||Ce===void 0)&&Ce.isQueryExactlySlash)}},"SearcherMatcher")},1399977320:(z,A,e)=>{"use strict";e.d(A,{A:()=>E});var t=e(3367239067),n=e(1703559452),s=e(7264301376),a=e(129753175),c=e(9289081806),o=e(1407713935),r=e(6007206761),l=e(6495946979),_=e(8170643398),d=e(3534324375),i=e(6839188756),m=e(9190452268),h=e(8701485242),v=e(181849556),y=e(220244708),T=e(5795074931),I=e(9101533895),p=e(8276911661);const g={starredChannel:10,memberOfThisChannel:25,archivedChannel:-50,deactivatedMember:-50,mpimWithDeactivatedMember:-50,channelFromAnotherTeam:-15,notInChannel:-25,userGroupOrKeyword:-25,fuzzyMatch:50,emojiMatch:150,exactMatch:100,matchesPreviousName:-50,workflowAssociatedWithChannel:250,popularEmoji:1,isSelf:250};let E=u(class{sort(O,C){var M;const D=(0,m.Cy)({state:O});D.mark("modern-searcher-sorting-mark");const{members:P,channels:k,mpims:x,ims:F,teams:W,userGroups:Y,emoji:S,broadcastKeywords:L,views:w,modals:J,appActions:G,channelSections:X,emails:te,files:le,lists:ve,listRecords:Q,slashCommands:Ae,slackGlobalActions:ae,quipShortcutCommands:he,channelActions:_e,fakeGlobalActions:ee,callActions:de,apps:Ie,helpArticles:ce,salesforceRecords:j,workflowTriggers:N,salesListViews:b}=C,R={memberChannels:[],nonmemberChannels:[],archivedChannels:[]};k&&k.reduce((Te,Ce)=>(0,r.F)(Ce.item)?(Te.archivedChannels.push(Ce),Te):((0,l.b)(Ce.item)?Te.memberChannels.push(Ce):Te.nonmemberChannels.push(Ce),Te),R);let K=[...P||[],...R.memberChannels,...x||[],...F||[],...S||[],...Y||[],...L||[],...w||[],...J||[],...G||[],...X||[],...te||[],...le||[],...ve||[],...Q||[],...de||[],..._e||[],...ee||[],...Ie||[],...ce||[],...N||[],...j||[],...b||[]],B=[...R.nonmemberChannels,...W||[],...Ae||[],...ae||[],...he||[]],$=R.archivedChannels;const Z=this.getSortFuzzyFunction(O,{localeAware:!0});this.options.flat||(K=this.precomputeMatchNames(O,K).sort(Z),B=this.precomputeMatchNames(O,B).sort(Z),$=this.precomputeMatchNames(O,$).sort(Z));let re=[...K,...B,...$];return this.options.flat&&re.sort(Z),this.options.preferExactMatch&&(re=[...(0,t.A)(re,Ce=>Ce.isExactMatch),...re]),this.options.frecency&&(this.options.normalize=!0,D.mark("modern-searcher-frecency-sort-mark"),this.options.modelOnly?re=(0,v.jW)(O,{query:this.query,list:re,bonusPoints:this.getFrecencyBonusPointsFunction(O)}):re=(0,v.Zh)(O,{query:this.query,list:re,bonusPoints:this.getFrecencyBonusPointsFunction(O)}),D.measureAndClear("modern-searcher-frecency-sort-mark","modern-searcher-frecency-sort")),this.options.selfFirst&&!(!((M=re[0])===null||M===void 0)&&M.isSelf)&&(re=[...(0,t.A)(re,Ce=>Ce.isSelf),...re]),D.measureAndClear("modern-searcher-sorting-mark","modern-searcher-sorting"),re}precomputeMatchNames(O,C){return C.map(M=>({...M,name:this.getNameForComparison(O,M)}))}getSortFuzzyFunction(O,C){let{localeAware:M}=C;return(D,P)=>{if((0,o.yz)(D.item)&&!(0,o.yz)(P.item))return 1;if((0,o.yz)(P.item)&&!(0,o.yz)(D.item)||(0,o.LI)(D.item)&&!(0,o.LI)(P.item))return-1;if((0,o.LI)(P.item)&&!(0,o.LI)(D.item))return 1;if(!(0,o.yz)(D.item)&&!(0,o.yz)(P.item)){const L=D.score-P.score;if(L!==0)return L}if((0,o.yz)(D.item)&&(0,o.yz)(P.item)){const L=D.score-P.score;if(L!==0)return L;var k,x;const w=((k=(0,c.N4)(D.item))!==null&&k!==void 0?k:0)-((x=(0,c.N4)(P.item))!==null&&x!==void 0?x:0);if(w!==0)return w}var F;const W=(F=D.name)!==null&&F!==void 0?F:"";var Y;const S=(Y=P.name)!==null&&Y!==void 0?Y:"";return M?(0,h.Ay)(W,S):W>S?1:S>W?-1:0}}getFrecencyBonusPointsFunction(O){return C=>{var M,D;const{item:P}=C,k={};if((0,o.yz)(P)){if(k.isMpim=0,this.options.preferMpimsWithActiveMembers){const x=(0,c.Ug)(P);if(!x)return k;const F=x.map(W=>(0,p.nv)(O,W));(0,n.A)(F,W=>(0,_.oy)(W)||(0,_.eJ)(W))&&(k.isMpimWithDeactivatedMember=g.mpimWithDeactivatedMember)}return k}if(C.isExactMatch?(k.isExactMatch=g.exactMatch,C.isEmojiExactMatch&&(k.isEmojiExactMatch=g.exactMatch)):C.emojiScore?k.emojiScoreBonus=this.calculateNormalizedFuzzyBonusPoints(C,"emojiScore",g.emojiMatch):(0,r.F)(P)||(0,_.oy)(P)||(0,_.eJ)(P)||(k.fuzzyScoreBonus=this.calculateNormalizedFuzzyBonusPoints(C,"score",g.fuzzyMatch)),C.bestPreviousNameMatch&&(k.onlyMatchesPreviousName=g.matchesPreviousName),this.options.preferChannelMembers&&P.presence&&this.options.currentChannel&&(0,y.B)(O,P,this.options.currentChannel)&&(k.isMemberOfThisChannel=g.memberOfThisChannel),(0,o.jq)(P)&&(0,c.m2)(O,P)&&(k.isStarred=g.starredChannel),(0,_.NB)(P)){const x=(0,I.Pu)(O,P.id);x&&(0,c.m2)(O,x)&&(k.isStarred=g.starredChannel)}return P.is_emoji&&(P.name==="thumbsup"||P.name==="point_up")&&(k.isPopularEmojiVariant=g.popularEmoji),this.options.selfFirst&&(0,_.fy)(P)&&(k.isSelf=g.isSelf),this.options.preferChannelWorkflows&&P.type==="channel_action"&&P.channelId===((M=this.options)===null||M===void 0||(D=M.currentChannel)===null||D===void 0?void 0:D.id)&&(k.isWorkflowAssociatedWithChannel=g.workflowAssociatedWithChannel),((0,o.rW)(P)||(0,o.Zp)(P))&&((0,r.F)(P)&&(k.isArchived=g.archivedChannel),(0,o.rW)(P)&&this.options.preferChannelsUserBelongsTo&&!(0,r.F)(P)&&!(0,l.b)(P)&&(k.isNotChannelMember=g.notInChannel),(0,T.u8)(O)&&(0,c.lo)(P)&&(k.isChannelFromAnotherTeam=g.channelFromAnotherTeam)),(0,_.NB)(P)&&((0,_.oy)(P)||(0,_.eJ)(P))&&(k.isDeactivatedMember=g.deactivatedMember),(P.is_usergroup||P.is_broadcast_keyword)&&(k.isUserGroupOrKeyword=g.userGroupOrKeyword),k}}calculateNormalizedFuzzyBonusPoints(O,C,M){const D=O[C];if(!(0,s.A)(D))return 0;const P=.5**D;return Math.round(M*P)}getNameForComparison(O,C){let M;const D=C.item;return(0,o.yz)(D)?M=D.name_normalized:(0,o.mz)(D)?M=(0,a.A)((0,c.SB)(O,D,{publicChannelIncludeHashSign:!1})):(0,_.NB)(D)?M=(0,d.sE)(O,D):D.is_usergroup?M=D.handle||D.name:D.team_name?M=(0,a.A)((0,i.F1)(D)):D.isEmail?M=(0,a.A)(D.value):D.title?M=D.title:M=D.name,M}constructor({query:O,options:C={}}){this.options=C,this.query=O}},"SearcherSorter")},9868740303:(z,A,e)=>{"use strict";e.d(A,{A:()=>Te});var t=e(8571983633),n=e(9746734072),s=e(9113979368),a=e(897091071),c=e(7715417323),o=e(1703559452),r=e(2141441167),l=e(5503876160),_=e(6422693406),d=e(8737667238),i=e(7599421656),m=e(6987519067),h=e(9552526132),v=e(4423055085),y=e(5613323535),T=e(1197508738),I=e(5455782105),p=e(3212336858),g=e(9931116838),E=e(411655882),f=e(2229186),O=e(6244014364),C=e(5751973043),M=e(82287009),D=e(9190452268),P=e(5770715593),k=e(6617433054),x=e(4096483543),F=e(6471801899),W=e(1917953477),Y=e(1072784641),S=e(1399977320),L=e(8956261571),w=e(8847766420),J=e(4119164726),G=e(6533394955),X=e(6451390137),te=e(2854654447),le=e(9107158149),ve=e(7688940281),Q=e(2235302340),Ae=e(9101533895),ae=e(6728717861),he=e(7600673124),_e=e(3829348308),ee=e(4761125736),de=e(937317117),Ie=e(761034736),ce=e(5987902639),j=e(9706240641),N=e(1031947056),b=e(9174292896);const R=(0,N.Ay)("Fetch list records for lists mentions",function(){var Ce=(0,j.coroutine)(function*(Pe,fe,pe){let{query:q}=pe;const se=(0,F.V3)(q);if(!se)return;const{listTitle:ge}=se,Oe=(0,ce.Mr)(fe()),Le=(0,F.xL)(Oe,ge);if(!Le)return;const We=Le.id;yield Pe((0,b.D)({listId:We}))});return function(Pe,fe,pe){return Ce.apply(this,arguments)}}());R.meta={name:"createThunk",key:"createThunkfetchForMentions",description:"Fetch list records for lists mentions"};var K=e(4525672255),B=e(8276911661),$=e(1835177371);class Z{search(Pe){let{query:fe,options:pe}=Pe;var q;if(this.maybeStartSession(fe),((0,t.A)(fe)||!fe.length)&&!pe.allowEmptyQuery)return _.S.resolve(C.Ml);if((0,n.A)(fe))return this.bulkSearch({queryRecords:fe,options:pe});const se=(0,G.getStateByTeamId)(this.teamId),ge=(0,D.Cy)({state:se}),Oe=(0,d.A)();ge.mark(`modern-searcher-search-mark-${Oe}`);const Le=(0,W.O)(fe??"");y.LI.start({label:y.gC.Searcher,id:Oe,options:{teamId:(0,w.ZT)(se),tags:this.getTraceTags({query:Le,options:pe})}});const We=(q=y.LI.get({label:y.gC.Searcher,id:Oe}))===null||q===void 0?void 0:q.createChildSpan({name:"searcher:search"}),Re=(0,m.aw)(pe,m.lp,fe);if((0,s.A)(Re))return _.S.resolve(C.Ml);if((0,T.x)(se)!==ae.M9.ONLINE||!(pe!=null&&pe.allowEmptyQueryRemoteSearch)&&!Le.length&&(0,x.A)()&&(0,ee._Z)(se,"searcher_local_empty_string")==="treatment"&&!pe.entities.lists)return _.S.resolve(this.searchLocal({query:Le,options:Re,autoTraceId:Oe,parentSpanId:We==null?void 0:We.getId()}));const we=this.fetchRemote({query:Le,options:Re,autoTraceId:Oe,parentSpanId:We==null?void 0:We.getId()}).then(Je=>this.processFetchedEntities({query:Le,data:Je,options:Re,autoTraceId:Oe,parentSpanId:We==null?void 0:We.getId()}));if(Re.tiered){const Je=this.searchLocal({query:Le,options:Re,autoTraceId:Oe,parentSpanId:We==null?void 0:We.getId()});return Je.promise=we.finally(()=>{We==null||We.close(),y.LI.stop({label:y.gC.Searcher,id:Oe})}),_.S.resolve(Je).finally(()=>{ge.measureAndClear(`modern-searcher-search-mark-${Oe}`,"modern-searcher-search-tiered")})}return we.finally(()=>{ge.measureAndClear(`modern-searcher-search-mark-${Oe}`,"modern-searcher-search"),We==null||We.close(),y.LI.stop({label:y.gC.Searcher,id:Oe})})}flattenResultsWithQueryId(Pe){let{returnedResults:fe,queryIds:pe}=Pe;const q=fe;for(let se=0;se<fe.length;se++)for(let ge=0;ge<fe[se].length;ge++)q[se][ge].queryId=pe[se];return(0,a.A)(q)}bulkSearch(Pe){let{queryRecords:fe,options:pe}=Pe;const q=(0,G.getStateByTeamId)(this.teamId),se=(0,D.Cy)({state:q}),ge=(0,d.A)();se.mark(`modern-searcher-search-mark-${ge}`);const Oe=(0,m.aw)(pe,m.lp,"");if((0,s.A)(Oe))return _.S.resolve(C.Ml);const Le=fe.map(et=>et.query),We=fe.map(et=>et.queryId),Re=Le.map(et=>(0,W.O)(et));let we,Je;if((0,T.x)(q)!==ae.M9.ONLINE)return Je=Re.map(et=>this.searchLocal({query:et,options:Oe})),we=this.flattenResultsWithQueryId({returnedResults:Je,queryIds:We}),_.S.resolve(we);const it=this.fetchRemote({query:Re,options:Oe}).then(et=>(Je=et.map((lt,nt)=>this.processFetchedEntities({query:Re[nt],data:lt,options:Oe})),this.flattenResultsWithQueryId({returnedResults:Je,queryIds:We})));return Oe.tiered?(Je=Re.map(et=>this.searchLocal({query:et,options:Oe})),we=this.flattenResultsWithQueryId({returnedResults:Je,queryIds:We}),we.promise=it,_.S.resolve(we).finally(()=>{se.measureAndClear(`modern-searcher-search-mark-${ge}`,"modern-searcher-search-tiered")})):it.finally(()=>{se.measureAndClear(`modern-searcher-search-mark-${ge}`,"modern-searcher-search")})}searchLocal(Pe){let{query:fe,options:pe,autoTraceId:q,parentSpanId:se}=Pe;var ge;const Oe=(0,G.getStateByTeamId)(this.teamId);let Le=q;Le||(Le=(0,d.A)(),y.LI.start({label:y.gC.Searcher,id:Le,options:{teamId:(0,w.ZT)(Oe),tags:this.getTraceTags({query:fe,options:pe})}}));const We=(ge=y.LI.get({label:y.gC.Searcher,id:Le}))===null||ge===void 0?void 0:ge.createChildSpan({name:"searcher:search_local",additionalSpanOptions:{parentSpanId:se}});if(!fe.length&&!pe.allowEmptyQuery)return[];const Re=(0,m.aw)(pe,m.lp,fe);if((0,s.A)(Re))return[];const we=(0,W.O)(fe),Je=this.fetchLocal({query:fe,options:Re}),it=this.processFetchedEntities({query:we,data:Je,options:Re,autoTraceId:Le,parentSpanId:We==null?void 0:We.getId()});return We==null||We.close(),it}fetchRemote(Pe){let{query:fe,options:pe,autoTraceId:q,parentSpanId:se}=Pe;var ge;const Oe=(0,G.getStateByTeamId)(this.teamId),Le=(ge=y.LI.get({label:y.gC.Searcher,id:q}))===null||ge===void 0?void 0:ge.createChildSpan({name:"searcher:fetch_remote",additionalSpanOptions:{parentSpanId:se}});this.pendingRequests.forEach(He=>He.cancel()),this.pendingRequests=[];const We=[],Re=[],{channels:we,emoji:Je,files:it,lists:et,members:lt,teams:nt,userGroups:at,appActions:ze,workflowTriggers:Ke}=pe.entities;if(lt){let He;(0,n.A)(fe)?He=(0,G.dispatchForTeamId)(this.teamId,(0,m.U7)({queries:fe,options:pe})):He=(0,G.dispatchForTeamId)(this.teamId,(0,m.QH)({query:fe,options:pe})),this.pendingRequests.push(He),lt.runaway?Re.push(He):We.push(He)}if(we&&!(0,n.A)(fe)){const He=(0,G.dispatchForTeamId)(this.teamId,(0,m.J6)({query:fe,options:pe}));this.pendingRequests.push(He),we.runaway?Re.push(He):We.push(He)}if(Je&&!(0,n.A)(fe)){const He=(0,G.dispatchForTeamId)(this.teamId,(0,m.LR)({query:fe,options:pe}));this.pendingRequests.push(He),Je.runaway?Re.push(He):We.push(He)}if(it&&!(0,n.A)(fe)&&((0,k.A)(fe)||fe.length>3)){const He=(0,G.dispatchForTeamId)(this.teamId,(0,m.cD)({query:fe,options:pe}));this.pendingRequests.push(He),it.runaway?Re.push(He):We.push(He)}if(et&&!(0,n.A)(fe)){const He=(0,G.dispatchForTeamId)(this.teamId,fe.indexOf(">")<0?(0,K.E)({query:fe}):R({query:fe}));this.pendingRequests.push(He),et.runaway?Re.push(He):We.push(He)}if(at){let He;(0,n.A)(fe)?He=(0,G.dispatchForTeamId)(this.teamId,(0,m.eR)({queries:fe,options:pe})):He=(0,G.dispatchForTeamId)(this.teamId,(0,m.UC)({query:fe,options:pe})),this.pendingRequests.push(He),at.runaway?Re.push(He):We.push(He)}if(nt&&((0,I.k)(Oe)||nt.onlyExternal||nt.includeExternal)&&!(0,n.A)(fe)){const He=(0,G.dispatchForTeamId)(this.teamId,(0,m.DF)({query:fe,options:pe}));this.pendingRequests.push(He),nt.runaway?Re.push(He):We.push(He)}if((0,g.e)(Oe)&&ze){const He=(0,G.dispatchForTeamId)(this.teamId,(0,te.G)()).timeout(2e3).catch(c.A);this.pendingRequests.push(He),ze.runaway?Re.push(He):We.push(He)}if(Ke&&!(0,n.A)(fe)){const He=(0,G.dispatchForTeamId)(this.teamId,(0,m.fx)({query:fe}));Ke.runaway?Re.push(He):We.push(He)}return _.S.all(We).then(He=>{let Ye;if((0,n.A)(fe))Ye=fe.map(Lt=>this.fetchLocal({query:Lt,options:pe})).map(Lt=>{const ft={...Lt};return ft.remoteIds=(0,m.jl)(He),ft});else{if(Ye=this.fetchLocal({query:fe,options:pe}),Ye.remoteIds=(0,m.jl)(He),lt&&lt.onlyFromExternalWorkspaceId){var _t,vt;Ye.members=(vt=(_t=He.find(Lt=>!!Lt.members))===null||_t===void 0?void 0:_t.members)!==null&&vt!==void 0?vt:C.Ml}const Tt=(0,o.A)((0,r.A)(Ye),"length");if(Re.length&&!Tt)return _.S.all(Re).then(()=>this.fetchLocal({query:fe,options:pe}))}return Le==null||Le.close(),Ye}).finally(()=>{this.pendingRequests=[]})}fetchLocal(Pe){let{query:fe,options:pe}=Pe;const q=(0,G.getStateByTeamId)(this.teamId);(0,m.ZD)(pe);const se={},{members:ge,channels:Oe,teams:Le,userGroups:We,appActions:Re,views:we,broadcastKeywords:Je,emoji:it,files:et,lists:lt,channelSections:nt,emails:at,modals:ze,shortcuts:Ke,workflowTriggers:He,helpArticles:Ye}=pe.entities;if(Oe&&(Oe.includePublic||Oe.includePrivate)&&(se.channels=(0,m.AC)(q,pe)),Oe&&Oe.includeMpims&&(se.mpims=(0,Ae.FS)(q)),Oe&&Oe.includeIms&&(se.ims=(0,Ae._B)(q)),ge&&(se.members=ge.onlyFromExternalWorkspaceId?C.Ml:(0,B.I_)(q).filter(Tt=>(0,le.zP)(q,Tt.id)&&!(0,he.y)(q,Tt.id))),Le&&(se.teams=(0,m.mi)(q,pe)),We&&(se.userGroups=(0,$.jJ)(q)),Re&&(se.appActions=(0,i.B)(q)?(0,X.PL)(q):(0,m.g2)(q,Re.channel)),et&&(se.files=(0,de.Gn)(q)),lt&&(fe.indexOf(">")<0?se.lists=(0,ce.C0)(q):se.listRecords=(0,ce.vD)(q,fe)),we&&(se.views=(0,m.mK)(q)),ze&&(se.modals=(0,m.A$)(q)),Je){var _t;const Tt=Je.currentChannel?Je.currentChannel.id:null;se.broadcastKeywords=!((_t=pe.entities.broadcastKeywords)===null||_t===void 0)&&_t.includeAll||!Tt?(0,E.A)():(0,f.A)(q,Tt)}if(it&&(se.emoji=(0,_e.Gt)(q)),nt&&(se.channelSections=(0,r.A)((0,Q.jV)(q))),(Ke!=null&&Ke.slashCommands||Ke!=null&&Ke.fakeGlobalActions)&&!(Ke!=null&&Ke.isAnnounceOnly)&&(se.slashCommands=(0,i.B)(q)?(0,M.A_)(q,Ke.channel,!!Ke.threadTs,!0).map(Tt=>({...Tt,id:(0,p.Bs)(Tt),isSlashCommand:!0})):(0,m.lS)(q,Ke.channel,Ke.threadTs)),Ke!=null&&Ke.slackGlobalActions&&(se.slackGlobalActions=(0,M.Yk)(q,Ke.channel,Ke.threadTs)),Ke!=null&&Ke.quipShortcutCommands&&(se.quipShortcutCommands=(0,J.Aw)(q,!!fe)),Ke!=null&&Ke.channelActions&&(se.channelActions=(0,ve.fo)(q,Ke.channel)),Ke!=null&&Ke.fakeGlobalActions&&(se.fakeGlobalActions=(0,M.JL)(q,Ke.channel,Ke.threadTs)),Ke!=null&&Ke.callActions&&(se.callActions=(0,M.Uw)(q,Ke.channel,Ke.threadTs,Ke.isAnnounceOnly)),He){const Tt=(0,M.NJ)(q);He.includeAutomated?se.workflowTriggers=Tt:se.workflowTriggers=Tt.filter(Lt=>Lt.type===h.M.Shortcut)}at&&(se.emails=(0,m.FF)(fe));const vt=(0,P.dL)(q);return Ye&&vt&&(se.helpArticles=(0,Ie.Fb)(q,"searcher/fetch_all_articles")),(0,m.S)(),se}processFetchedEntities(Pe){let{query:fe,data:pe,options:q,autoTraceId:se,parentSpanId:ge}=Pe;var Oe,Le,We;const Re=(0,G.getStateByTeamId)(this.teamId),we=(Oe=y.LI.get({label:y.gC.Searcher,id:se}))===null||Oe===void 0?void 0:Oe.createChildSpan({name:"searcher:process",additionalSpanOptions:{parentSpanId:ge}});(0,m.ZD)(q);const Je={},it=new Y.A({query:fe,options:q}),et=(0,D.Cy)({state:Re});et.mark("modern-searcher-matching-mark");const lt=(Le=y.LI.get({label:y.gC.Searcher,id:se}))===null||Le===void 0?void 0:Le.createChildSpan({name:"searcher:searcher_match",additionalSpanOptions:{parentSpanId:we==null?void 0:we.getId()}});if(pe.channels&&(Je.channels=it.filterChannels(Re,pe.channels,(0,m.sr)(Re,q.entities.channels))),pe.members&&(Je.members=it.filterMembers(Re,pe.members,(0,m.bE)(Re,q.entities.members))),pe.emails&&pe.members&&!(!(Je==null||(We=Je.members)===null||We===void 0)&&We.length)&&(Je.emails=pe.emails),pe.mpims&&(Je.mpims=it.filterMpims(Re,pe.mpims,(0,m.AQ)(Re,q.entities.channels))),pe.ims&&(Je.ims=it.filterIms(Re,pe.ims,(0,m.EM)(Re,q.entities.channels))),pe.userGroups&&(Je.userGroups=it.filterUserGroups(Re,pe.userGroups,(0,m.H9)(Re,q.entities.userGroups))),pe.teams&&(Je.teams=it.filterTeams(Re,pe.teams,(0,m.A1)(Re,q.entities.teams))),pe.views&&(Je.views=it.filterViews(Re,pe.views)),pe.modals&&(Je.modals=it.filterModals(Re,pe.modals)),pe.appActions&&(Je.appActions=it.filterAppActions(Re,pe.appActions)),pe.slashCommands&&(Je.slashCommands=it.filterShortcuts(Re,pe.slashCommands,!0)),pe.slackGlobalActions&&(Je.slackGlobalActions=it.filterShortcuts(Re,pe.slackGlobalActions)),pe.quipShortcutCommands&&(Je.quipShortcutCommands=it.filterShortcuts(Re,pe.quipShortcutCommands)),pe.channelActions&&(Je.channelActions=it.filterShortcuts(Re,pe.channelActions)),pe.fakeGlobalActions&&(Je.fakeGlobalActions=it.filterShortcuts(Re,pe.fakeGlobalActions)),pe.callActions&&(Je.callActions=it.filterShortcuts(Re,pe.callActions)),pe.workflowTriggers&&(Je.workflowTriggers=it.filterWorkflowTriggers(Re,pe.workflowTriggers)),pe.broadcastKeywords&&(Je.broadcastKeywords=it.filterBroadcastKeywords(Re,pe.broadcastKeywords)),pe.emoji&&(Je.emoji=it.filterEmoji(Re,pe.emoji)),pe.channelSections&&(Je.channelSections=it.filterChannelSections(Re,pe.channelSections,Lt=>{var ft,mt;return!!(!((ft=q.entities.channelSections)===null||ft===void 0||(mt=ft.includeTypes)===null||mt===void 0)&&mt[Lt.type])})),pe.files&&(Je.files=it.filterFiles(Re,pe.files,(0,m.Do)(Re,q.entities.files))),pe.lists&&(Je.lists=it.filterLists(Re,pe.lists)),pe.listRecords){var nt;const{recordQuery:Lt}=(nt=(0,F.V3)(fe))!==null&&nt!==void 0?nt:{},ft=new Y.A({query:Lt,options:q});Je.listRecords=ft.filterListRecords(Re,pe.listRecords)}pe.helpArticles&&(Je.helpArticles=it.filterHelpArticles(Re,pe.helpArticles)),et.measureAndClear("modern-searcher-matching-mark","modern-searcher-matching"),lt==null||lt.close();const at=(0,m.SI)(Je,pe.remoteIds||{});let ze=(0,a.A)(Object.values(at));const Ke=500,He=3;var Ye;const _t=Math.min(((Ye=q==null?void 0:q.limit)!==null&&Ye!==void 0?Ye:1)*He,Ke);if(q.sort&&!q.sort.bypassSorting){var vt;let Lt=!1;ze.length<_t&&(Lt=!0);const ft=new S.A({query:fe,options:{modelOnly:Lt,...q.sort}}),mt=(vt=y.LI.get({label:y.gC.Searcher,id:se}))===null||vt===void 0?void 0:vt.createChildSpan({name:"searcher:searcher_sort",additionalSpanOptions:{parentSpanId:we==null?void 0:we.getId()}});ze=ft.sort(Re,at),mt==null||mt.close()}if(q.sort&&q.sort.frecency&&!q.sort.bypassSorting){var Tt;const Lt=(Tt=y.LI.get({label:y.gC.Searcher,id:se}))===null||Tt===void 0?void 0:Tt.createChildSpan({name:"searcher:sorter_sort",additionalSpanOptions:{parentSpanId:we==null?void 0:we.getId()}});ze=new L.A({query:fe,options:q.sort,teamId:(0,w.ZT)(Re),enterpriseId:(0,I.k)(Re)&&(0,w.jV)(Re)?(0,w.jV)(Re):void 0}).sort(Re,ze.slice(0,_t)),Lt==null||Lt.close()}return q.limit&&(ze=(0,l.A)(ze,q.limit)),q.returnMetadata||(ze=ze.map(Lt=>Lt.item)),(0,m.S)(),ze||[]}clogSearcherAccept(Pe){let{clogger:fe,data:pe}=Pe;const{source:q,query:se,results:ge,selectedItemId:Oe,displayedItemIds:Le}=pe,We=15;if(!Oe)return;const Re=Le?Le.length:ge.length,we=Le?Le.indexOf(Oe):ge.findIndex(_t=>_t.item.id===Oe);if(we<0)return;const Je=ge.find(_t=>_t.item.id===Oe);if(!Je)return;const it=Je.type||"other",et=(0,n.A)(se)?se.map(_t=>(0,W.O)(_t)):(0,W.O)(se),lt=Je.source||"local";let nt;Je.type==="mpim"?nt=Je.scoreDetailsByMember:Je.type==="member"?nt={[Oe]:{is_exact_match:Je.isExactMatch,exact_match_details:Je.exactMatchDetails,score_details:Je.scoreDetails}}:Je.type==="emoji"&&(nt={[Oe]:{is_exact_match:Je.isExactMatch}});let at=[];ge.some(_t=>_t.featureVectorRaw)&&(Le?at=Le.map(_t=>{const vt=ge.find(Tt=>Tt.item.id===_t);return vt&&vt.featureVectorRaw.serialize()||""}):at=ge.map(_t=>{var vt,Tt;return _t==null||(vt=_t.featureVectorRaw)===null||vt===void 0||(Tt=vt.serialize)===null||Tt===void 0?void 0:Tt.call(vt)}));let Ke;(0,n.A)(et)?Ke=et.reduce((_t,vt)=>_t+(0,m.Cs)((0,W.O)(vt)),0):Ke=(0,m.Cs)(et);var He;const Ye={source:q,query_length:et.length?et.length:0,query_terms_length:Ke,results_length:Re,selected_position:we,selected_type:it,selected_source:lt,selected_match_details:nt,feature_vector_list:at.slice(0,We),session_length:Date.now()-((He=this.sessionTs)!==null&&He!==void 0?He:0)};fe.track(O.EventId.SEARCHER_ACCEPT,Ye),this.endSession()}clogSearcherReject(Pe){let{clogger:fe,data:pe}=Pe;const{source:q,query:se,results:ge,displayedItemIds:Oe}=pe,Le=Oe!==void 0?Oe.length:ge.length,We=(0,n.A)(se)?se.map(it=>(0,W.O)(it)):(0,W.O)(se);let Re;(0,n.A)(We)?Re=We.reduce((it,et)=>it+(0,m.Cs)((0,W.O)(et)),0):Re=(0,m.Cs)(We);var we;const Je={source:q,query_length:We.length?We.length:0,query_terms_length:Re,results_length:Le,session_length:Date.now()-((we=this.sessionTs)!==null&&we!==void 0?we:0)};fe.track(O.EventId.SEARCHER_REJECT,Je),this.endSession()}maybeStartSession(Pe){!this.sessionId&&Pe!==void 0&&Pe.length&&(this.sessionTs=Date.now(),this.sessionId=(0,d.A)())}endSession(){this.sessionTs=null,this.sessionId=null}getTraceTags(Pe){let{query:fe,options:pe}=Pe;var q;const se=pe.entities;return{source:(pe==null?void 0:pe.searchViewContext)||((q=pe.sort)===null||q===void 0?void 0:q.source),tiered:pe.tiered,is_searcher_sessions:!0,entities:Object.keys(se).filter(ge=>!!se[ge]).sort().toString(),query_length:fe.length}}constructor(Pe){this.teamId=Pe,this.pendingRequests=[],this.sessionId=null,this.sessionTs=null}}u(Z,"Searcher");const re={};function Te(Ce){let{teamId:Pe,key:fe}=Ce;if(!Pe)throw new Error("Searcher must be instantiated with a team id");return re[Pe]&&!re[Pe][fe]&&(re[Pe][fe]=new Z(Pe)),re[Pe]||(re[Pe]={},re[Pe][fe]=new Z(Pe)),re[Pe][fe]}u(Te,"getSearcher"),(0,v.ul)("searcherObj",{search:(Ce,Pe)=>new Z(Ce).search(Pe),searchLocal:(Ce,Pe)=>{new Z(Ce).searchLocal(Pe)}})},4342685672:(z,A,e)=>{"use strict";e.d(A,{In:()=>s,KV:()=>n,nK:()=>a});var t=e(4761125736);const n="autocompleteFallback";function s(){return n}u(s,"getModelForSorter");function a(c){return(0,t._Z)(c,"searcher_sessions_phase_1")==="treatment"}u(a,"shouldUseSearcherSessions")},8956261571:(z,A,e)=>{"use strict";e.d(A,{A:()=>rs});var t=e(3367239067),n=e(1703559452),s=e(9816084745),a=e(5141066605),c=e(3037015781),o=e(9289081806),r=e(1407713935),l=e(6007206761),_=e(6495946979);function d(H){var me;const Fe=(me=H.actions)===null||me===void 0?void 0:me[0];if(!Fe)return 0;const ut=parseFloat(Fe.ts);return isNaN(ut)?0:ut}u(d,"getLatestActionTs");var i=e(8170643398),m=e(9262712126),h=e(5096647761),v=e(6536982570),y=e(9190452268),T=e(3879245650),I=e(735940183),p=e(4096483543),g=e(8040098042),E=e(4496040127),f=e(6422693406),O=e(1520110262),C=e(3707193570),M=e(7948868735),D=e(6533394955);const P=.014,k=.094,x=.148,F=.132,W=.179;class Y extends M.F{fetchData(){return(0,C.Am)(this.teamId)?(0,D.dispatchForTeamId)(this.teamId,(0,O.yp)()).catch(me=>({exception:me})).then(me=>new S({topEmojis:me.top_emojis,topMpims:me.top_mpims,topChannels:me.top_channels,topUsers:me.top_users,emojiFeatures:me.emoji_features,mpimFeatures:me.mpim_features,channelFeatures:me.channel_features,userFeatures:me.user_features,mpimCtr:me.mpim_ctr,channelCtr:me.channel_ctr,userCtr:me.user_ctr,emojiCtr:me.emoji_ctr,otherCtr:me.other_ctr,defaultFeatureNames:me.default_features,topAppActions:me.top_app_actions,topGlobalActions:me.top_global_actions,topSlashCommands:me.top_slash_commands,topWorkflowTriggers:me.top_workflow_triggers,topChannelActions:me.top_channel_actions,appActionCtr:me.app_action_ctr,globalActionCtr:me.global_action_ctr,slashCommandCtr:me.slash_command_ctr,workflowTriggerCtr:me.workflow_trigger_ctr,channelActionCtr:me.channel_action_ctr,usersHasDmed:me.users_has_dmed})):f.S.resolve(new S)}getStaleWhileRevalidate(){return super.getStaleWhileRevalidate(new S)}constructor(me){super(),this.teamId=me}}u(Y,"AutocompleteFeaturesCache");class S{getFeatures(me,Fe){const ut=this.topEntities[Fe],An=this.featureNames[Fe]||this.featureNames.default,vn=this.defaultEntityFeatures[Fe],Hn=ut&&ut[me];if(Hn&&An){const Kt={};for(let _s=0;_s<An.length;_s++)Kt[An[_s]]=Hn[_s];const ts={team_ctr_90dd:vn.team_ctr_90dd,user_ctr_30dd:vn.user_ctr_30dd};for(const _s of Object.keys(vn))ts[_s]=Kt[_s]||vn[_s];return ts}return vn}getEntityCtr(me){return this.entityCtr[me]||this.otherEntityCtr}getUserDmChannelMetadata(me){return this.usersHasDmed?this.usersHasDmed[me]:null}constructor({topEmojis:me,topMpims:Fe,topChannels:ut,topUsers:An,emojiFeatures:vn,mpimFeatures:Hn,channelFeatures:Kt,userFeatures:ts,mpimCtr:_s,channelCtr:ps,userCtr:Rs,emojiCtr:gs,otherCtr:is,defaultFeatureNames:Is,topAppActions:Ge,topGlobalActions:It,topSlashCommands:Ve,topWorkflowTriggers:st,topChannelActions:At,appActionCtr:St,globalActionCtr:Ot,slashCommandCtr:xt,workflowTriggerCtr:tn,channelActionCtr:En,usersHasDmed:an}={}){this.topEntities={emoji:me,mpim:Fe,channel:ut,member:An,appAction:Ge,globalAction:It,slashCommand:Ve,workflowTrigger:st,channelAction:At},this.featureNames={emoji:vn,mpim:Hn,channel:Kt,member:ts,default:Is},this.otherEntityCtr=is??W,this.entityCtr={mpim:_s??P,channel:ps??x,member:Rs??F,emoji:gs??k,appAction:St??this.otherEntityCtr,globalAction:Ot??this.otherEntityCtr,slashCommand:xt??this.otherEntityCtr,workflowTrigger:tn??this.otherEntityCtr,channelAction:En??this.otherEntityCtr},this.defaultEntityFeatures={};for(const Vt of Object.keys(this.entityCtr))this.defaultEntityFeatures[Vt]={team_ctr_90dd:this.getEntityCtr(Vt),user_ctr_30dd:this.getEntityCtr(Vt)};this.usersHasDmed=an}}u(S,"AutocompleteFeatures");const L={};function w(H){let{teamId:me,enterpriseId:Fe}=H;const ut=Fe||me||"_default";return L[ut]||(L[ut]=new Y(me)),L[ut]}u(w,"getAutocompleteFeaturesCache");var J=e(1041273904),G=e(5238395322),X=e(8571983633),te=e(2774532222),le=e(7110454183),ve=e(1022424641),Q=e(8274921051),Ae=e(4630136761),ae=e(4562579337),he=e(796111729),_e=e(3051657319),ee=e(7715417323);class de{writeNumericalFeature(me,Fe){!me||!isFinite(me)||(this.writeIdAndType(Fe,Q.c.NUMERICAL),this.ensureCapacity(4),this.view.setFloat32(this.offset,me),this.offset+=4)}writeBinaryFeature(me,Fe){me&&this.writeIdAndType(Fe,Q.c.BINARY)}writeTextFeature(me,Fe){if(!me)return;this.writeIdAndType(Fe,Q.c.TEXT);const ut=unescape(encodeURIComponent(me));this.ensureCapacity(2+ut.length),this.view.setUint16(this.offset,ut.length),this.offset+=2,(0,_e.A)(ut.length).forEach(An=>{this.view.setUint8(this.offset,ut.charCodeAt(An)),this.offset+=1})}writeNullFeature(){(0,ee.A)()}writeIdAndType(me,Fe){this.ensureCapacity(2),this.view.setUint16(this.offset,me<<3|Fe),this.offset+=2}ensureCapacity(me){this.offset+me>this.buffer.byteLength&&this.resize(this.offset+me)}resize(me){if(this.buffer.byteLength>=me)return;const Fe=new ArrayBuffer(2*this.buffer.byteLength);new Uint8Array(Fe).set(new Uint8Array(this.buffer)),this.buffer=Fe,this.view=new DataView(this.buffer)}serialize(){return btoa(String.fromCharCode(...new Uint8Array(this.buffer.slice(0,this.offset))))}constructor(){this.buffer=new ArrayBuffer(256),this.view=new DataView(this.buffer),this.offset=0}}u(de,"BinaryFeatureVectorSerializer");var Ie=e(3395271606);const ce=(0,Ie.A)(Q.Q);function j(H){return ce[H]}u(j,"getFeatureNameFromId");var N=e(9150404500);const b={globalFeatures:["ID","FRECENCY","RAW_FRECENCY","FRECENCY_BONUS","FRECENCY_LOG_HIT_COUNT","FRECENCY_LOG_HIT_COUNT_SCALED","FRECENCY_HIT_COUNT","FRECENCY_WEIGHT_HIT_VISITS","FRECENCY_WEIGHT_ITEM_VISITS","FRECENCY_ITEM_COUNT","FRECENCY_LOG_ITEM_COUNT","FRECENCY_LOG_ITEM_COUNT_SCALED","FRECENCY_HIT_VISITS_4H","FRECENCY_HIT_VISITS_1D","FRECENCY_HIT_VISITS_3D","FRECENCY_HIT_VISITS_1W","FRECENCY_HIT_VISITS_1M","FRECENCY_HIT_VISITS_90D","FRECENCY_ITEM_VISITS_4H","FRECENCY_ITEM_VISITS_1D","FRECENCY_ITEM_VISITS_3D","FRECENCY_ITEM_VISITS_1W","FRECENCY_ITEM_VISITS_1M","FRECENCY_ITEM_VISITS_90D","FUZZY_SCORE","FUZZY_SCORE_50","FUZZY_SCORE_25","FUZZY_SCORE_ALL","FUZZY_SCORE_SCALED_EXP","FUZZY_SCORE_SCALED_FLIPPED","FUZZY_SCORE_SCALED_SUBTRACT","NAV_EXACT_MATCH","NAV_EXACT_PREFIX_MATCH","NAV_NORMAL_MATCH","NAV_NORMAL_PREFIX_MATCH","NAV_NORMAL_MATCH_NO_USER","NAV_NORMAL_PREFIX_MATCH_NO_USER","NAV_QUERY_LENGTH","NAV_TEXT_LENGTH","NAV_QUERY_RATIO_LENGTH_STRING","EXACT_MATCH_LOG_RESULTS","USER_ENTITY_TYPE_CTR_30DD","NUM_RESULTS"],userFeatures:["TYPE_NAVIGATION_USER","USER_PRIORITY","USER_IS_ACTIVE","USER_IS_EXTERNAL","USER_IS_CURRENT_USER","MEMBER_OF_CURRENT_CHANNEL","CURRENT_USER_TEXTY","USER_SAME_TEAM","USER_IS_BOT","USER_DM_IS_UNREAD","USER_DM_IS_STARRED","USER_DM_READ_AGE_DECAY_7D","USER_DM_READ_AGE_DECAY_2H","USER_DM_READ_AGE_DECAY_7D_V2","USER_DM_READ_AGE_DECAY_2H_V2","USER_DM_LATEST_MSG_AGE_DECAY_7D","USER_DM_LATEST_MSG_AGE_DECAY_2H","USER_DM_LATEST_MSG_AGE_DECAY_7D_V2","USER_DM_LATEST_MSG_AGE_DECAY_2H_V2","USER_DM_IS_FROZEN","USER_DM_HAS_DRAFT","USER_DM_NULL","USER_DM_EMPTY","USER_DM_NOT_OPEN","USER_DM_OPEN","USER_DM_LATEST_OLDER_30D","USER_DM_LATEST_OLDER_90D","USER_DM_EMPTY_V2","USER_DM_LATEST_OLDER_30D_V2","USER_DM_LATEST_OLDER_90D_V2","USER_HAS_DMED","USER_DM_READ_AGE_DECAY_2H_V3","USER_DM_READ_AGE_DECAY_7D_V3","USER_DM_READ_OLDER_7D","USER_DM_READ_OLDER_30D","USER_DM_READ_OLDER_90D","USER_QUERY_RATIO_LENGTH_STRING","NAV_NORMAL_PREFIX_MATCH_USER","NAV_NORMAL_MATCH_USER","USER_FIRST_NAME_NORMAL_MATCH","USER_FIRST_NAME_NORMAL_PREFIX_MATCH","USER_FIRST_NAME_EXACT_MATCH","USER_FIRST_NAME_EXACT_PREFIX_MATCH","USER_LAST_NAME_NORMAL_MATCH","USER_LAST_NAME_NORMAL_PREFIX_MATCH","USER_LAST_NAME_EXACT_MATCH","USER_LAST_NAME_EXACT_PREFIX_MATCH","USER_EMAIL_MATCH","USER_EMAIL_ONLY_MATCH","QUERY_IS_SELF","HISTORY_AGE_DECAY_2H","HISTORY_AGE_DECAY_7D","HISTORY_POSITION","USER_MPIM_READ_AGE_DECAY_7D","USER_MPIM_READ_AGE_DECAY_2H","USER_MPIM_LATEST_MSG_AGE_DECAY_7D","USER_MPIM_LATEST_MSG_AGE_DECAY_2H","USER_MPIM_FRECENCY_LOG_ITEM_COUNT","USER_MPIM_FRECENCY_LOG_HIT_COUNT"],channelFeatures:["TYPE_NAVIGATION_CHANNEL","CHANNEL_IS_MEMBER","CHANNEL_PRIORITY","CHANNEL_IS_STARRED","CHANNEL_IS_ARCHIVED","CHANNEL_IS_OTHER_TEAM","CHANNEL_IS_FROZEN","CHANNEL_HAS_DRAFT","CHANNEL_QUERY_RATIO_LENGTH_STRING","QUERY_LENGTH_DECAY_NORMAL_MATCH_CHANNEL","NAV_NORMAL_MATCH_CHANNEL_LOG_RESULTS","CHANNEL_IS_UNREAD","CHANNEL_READ_AGE_DECAY_2H","CHANNEL_READ_AGE_DECAY_7D","CHANNEL_LATEST_MSG_AGE_DECAY_7D","CHANNEL_LATEST_MSG_AGE_DECAY_2H","CHANNEL_IS_PREVIOUS_NAME_EXACT_MATCH","CHANNEL_IS_PREVIOUS_NAME_PREFIX_MATCH","ONLY_MATCHES_PREVIOUS_NAME","CHANNEL_TEAM_CTR_90DD","CHANNEL_USER_CTR_30DD","HISTORY_AGE_DECAY_2H","HISTORY_AGE_DECAY_7D","HISTORY_POSITION"],mpimFeatures:["TYPE_NAVIGATION_MPIM","MPIM_IS_STARRED","MPIM_READ_AGE_DECAY_2H","MPIM_READ_AGE_DECAY_7D","MPIM_LATEST_MSG_AGE_DECAY_2H","MPIM_LATEST_MSG_AGE_DECAY_7D","MPIM_IS_UNREAD","MPIM_WITH_DEACTIVATED_USER","MPIM_PRIORITY","MPIM_QUERY_RATIO_LENGTH_STRING","MPIM_MEMBERS","MPIM_MEMBER_NAME_MATCHES","MPIM_MEMBER_ALL_MATCHES","MPIM_MATCHER_SCORE","MPIM_MATCHER_SCORE_0","MPIM_MATCHER_SCORE_1","MPIM_MATCHER_SCORE_2","MPIM_MATCHER_SCORE_3","MPIM_TEAM_CTR_90DD","MPIM_USER_CTR_30DD","HISTORY_AGE_DECAY_2H","HISTORY_AGE_DECAY_7D","HISTORY_POSITION","MPIM_USERS_MAX_LATEST_MSG_AGE_DECAY_2H","MPIM_USERS_MAX_LATEST_MSG_AGE_DECAY_7D","MPIM_USERS_AVG_LATEST_MSG_AGE_DECAY_2H","MPIM_USERS_AVG_LATEST_MSG_AGE_DECAY_7D","MPIM_USERS_MAX_MSG_READ_AGE_DECAY_2H","MPIM_USERS_MAX_MSG_READ_AGE_DECAY_7D","MPIM_USERS_AVG_MSG_READ_AGE_DECAY_2H","MPIM_USERS_AVG_MSG_READ_AGE_DECAY_7D","MPIM_USERS_PCT_NON_EMPTY_DMS","MPIM_USERS_PCT_NON_NULL_DMS","MPIM_USERS_ALL_INTERNAL"],viewFeatures:["TYPE_NAVIGATION_VIEW"],fileFeatures:["TYPE_NAVIGATION_FILE","FILE_SUGGESTION_SCORE","FILE_AGE_DECAY_7D","FILE_AGE_DECAY_28D","FILE_AGE_DECAY_90D","FILE_FROM_CURRENT_USER","FILE_LOG_PUBLIC_SHARES","FILE_LOG_PRIVATE_SHARES","FILE_LOG_ACTIONS","FILE_LATEST_ACTION_AGE_DECAY_2H","FILE_LATEST_ACTION_AGE_DECAY_7D","FILE_LATEST_ACTION_AGE_DECAY_90D","FILE_LATEST_SHARE_AGE_DECAY_2H","FILE_LATEST_SHARE_AGE_DECAY_7D","FILE_LATEST_SHARE_AGE_DECAY_90D","FILE_CHANNEL_CTR","FILE_SUGGESTIONS_SEARCHER","FILE_USER_CTR","FILE_NAME_CONTAINS_QUERY_NORMALIZED","FILE_IS_CANVAS","FILE_HAS_DMS_WITH_CREATOR","FILE_HAS_DMS_WITH_CREATOR_V2","FILE_LATEST_VIEW_BY_USER_OLDER_90D"],linkFeatures:["TYPE_NAVIGATION_LINK"],modalFeatures:["TYPE_NAVIGATION_MODAL"],teamFeatures:["TYPE_NAVIGATION_TEAM"],emojiFeatures:["EMOJI_EXACT_MATCH","EMOJI_QUERY_LENGTH_RATIO","EMOJI_TOTAL_COMBO_BREAKS","EMOJI_COMBO_BREAK_0","EMOJI_COMBO_BREAK_1","EMOJI_COMBO_BREAK_2","EMOJI_COMBO_BREAK_3","TYPE_EMOJI","FRECENCY_HIT_VISIT_DECAY_2H","FRECENCY_HIT_VISIT_DECAY_7D","FRECENCY_ITEM_VISIT_DECAY_2H","FRECENCY_ITEM_VISIT_DECAY_7D","EMOJI_TEAM_CTR_90DD","EMOJI_USER_CTR_30DD"],broadcastKeywordFeatures:["IS_BROADCAST_KEYWORD","HERE_KEYWORD","HERE_KEYWORD_EXACT_MATCH","BROADCAST_KEYWORD_NORMAL_MATCH"],queryFeatures:["TYPE_QUERY","TYPE_USER_QUERY","TYPE_QUERY_HISTORY","ACTIVE_TOKEN_STRING","ACTIVE_TOKEN_MEMBER","ACTIVE_TOKEN_PHRASE","ACTIVE_TOKEN_QUERY_SUGGESTION","ACTIVE_TOKEN_FILTER_DURING","ACTIVE_TOKEN_FILTER_FROM","ACTIVE_TOKEN_FILTER_IN","ACTIVE_TOKEN_FILTER_TO","ACTIVE_TOKEN_FILTER_BEFORE","ACTIVE_TOKEN_FILTER_HAS","ACTIVE_TOKEN_FILTER_IS","ACTIVE_TOKEN_FILTER_ON","ACTIVE_TOKEN_FILTER_AFTER","ACTIVE_TOKEN_FILTER_WITH","QUERY_SUGGESTION_SCORE_V2","QUERY_FRECENCY_RAW","QUERY_FRECENCY_WEIGHT_HIT_VISITS","QUERY_FRECENCY_HIT_COUNT","QUERY_FRECENCY_WEIGHT_ITEM_VISITS","QUERY_FRECENCY_ITEM_COUNT","QUERY_FUZZY_SCORE","QUERY_FRECENCY_BONUS","QUERY_HISTORY_AGE_DECAY_30D","QUERY_HISTORY_LOG_INDEX","FILTER_USER_IS_ACTIVE","FILTER_USER_IS_CURRENT_USER","FILTER_USER_DM_IS_STARRED","FILTER_USER_DM_IS_UNREAD","FILTER_USER_DM_READ_AGE_DECAY_7D","FILTER_USER_DM_READ_AGE_DECAY_2H","FILTER_USER_DM_LATEST_MSG_AGE_DECAY_7D","FILTER_USER_DM_LATEST_MSG_AGE_DECAY_2H","FILTER_USER_FIRST_NAME_NORMAL_MATCH","FILTER_USER_FIRST_NAME_NORMAL_PREFIX_MATCH","FILTER_USER_LAST_NAME_NORMAL_MATCH","FILTER_USER_LAST_NAME_NORMAL_PREFIX_MATCH","FILTER_USER_PRIORITY","FILTER_CHANNEL_IS_ARCHIVED","FILTER_CHANNEL_IS_MEMBER","FILTER_CHANNEL_IS_STARRED","FILTER_CHANNEL_IS_UNREAD","FILTER_CHANNEL_READ_AGE_DECAY_7D","FILTER_CHANNEL_READ_AGE_DECAY_2H","FILTER_CHANNEL_PRIORITY","STRING_EXACT_MATCH","STRING_EXACT_PREFIX_MATCH","STRING_NORMAL_MATCH","STRING_NORMAL_PREFIX_MATCH","STRING_SAME_NUMBER_WORDS","EXCESS_STRING_LENGTH","SUGGESTION_TEXT_LENGTH","QUERY_LENGTH","QUERY_RATIO_LENGTH_STRING","QUERY_TOKEN_NORMAL_MATCH","QUERY_TOKEN_NORMAL_PREFIX_MATCH","QUERY_LOG_HIT_COUNT"],appActionFeatures:["TYPE_APP_ACTION","APP_ACTION_TEAM_CTR","APP_ACTION_USER_CTR","OS_APP_ACTION"],shortcutFeatures:["APP_NAME_PREFIX_MATCH","SHORTCUT_ENTITY_TYPE_CTR","BEST_NAME_MATCH_LOG_RESULTS"],slashCommandFeatures:["TYPE_SLASH_COMMAND","SLASH_COMMAND_TEAM_CTR","SLASH_COMMAND_USER_CTR"],globalActionFeatures:["TYPE_GLOBAL_ACTION","IS_INVITE_WORKSPACE","GLOBAL_ACTION_TEAM_CTR","GLOBAL_ACTION_USER_CTR"],channelActionFeatures:["TYPE_CHANNEL_ACTION","CHANNEL_ACTION_TEAM_CTR","CHANNEL_ACTION_USER_CTR"],appFeatures:["TYPE_APP"],messageFeatures:["TYPE_NAVIGATION_MESSAGE"],workflowTriggerFeatures:["TYPE_WORKFLOW_TRIGGER","WORKFLOW_TRIGGER_TEAM_CTR","WORKFLOW_TRIGGER_USER_CTR"],channelAssociatedWorkflowFeatures:["HAS_CHANNEL_ASSOCIATION"]};var R=e(9422011462);function K(H,me){return Qt.fromSuggestion(H,me)}u(K,"featureVectorForSuggestion");function B(){return(0,he.Wo)({label:"SORTER-RANKING"})}u(B,"getLogger");function $(H){return Number.isInteger(H)}u($,"isIntegerWithType");const Z=60*60,re=24*Z;var Te,Ce,Pe,fe,pe,q,se,ge,Oe,Le,We,Re,we,Je,it,et,lt,nt,at,ze,Ke,He,Ye,_t,vt,Tt,Lt,ft,mt,Yt,nn,jt,gn,on,Xt,rn,Zt,Ht;const Bt={FRECENCY:H=>xe({id:Q.Q.FRECENCY,value:Ft(H)}),TYPE_NAVIGATION_CHANNEL:(H,me)=>{let{itemIsChannel:Fe}=me;return xe({id:Q.Q.TYPE_NAVIGATION_CHANNEL,value:Fe})},TYPE_NAVIGATION_FILE:H=>xe({id:Q.Q.TYPE_NAVIGATION_FILE,value:H.suggestionType===N.fd.FILE_NAVIGATION}),TYPE_NAVIGATION_LINK:H=>xe({id:Q.Q.TYPE_NAVIGATION_LINK,value:H.suggestionType===N.fd.LINK_NAVIGATION}),TYPE_NAVIGATION_MODAL:H=>xe({id:Q.Q.TYPE_NAVIGATION_MODAL,value:H.suggestionType===N.fd.MODAL_NAVIGATION}),TYPE_NAVIGATION_MPIM:H=>xe({id:Q.Q.TYPE_NAVIGATION_MPIM,value:!!(0,r.yz)(H.item)}),TYPE_NAVIGATION_USER:(H,me)=>{let{itemIsMember:Fe}=me;return xe({id:Q.Q.TYPE_NAVIGATION_USER,value:Fe})},TYPE_QUERY:H=>xe({id:Q.Q.TYPE_QUERY,value:H.suggestionType===N.fd.QUERY}),TYPE_QUERY_HISTORY:H=>xe({id:Q.Q.TYPE_QUERY_HISTORY,value:H.suggestionType===N.fd.QUERY_HISTORY}),ACTIVE_TOKEN_FILTER_IN:H=>xe({id:Q.Q.ACTIVE_TOKEN_FILTER_IN,value:H.lastSuggestionToken&&H.lastSuggestionToken.type===N.S6.FILTER_IN}),ACTIVE_TOKEN_FILTER_FROM:H=>xe({id:Q.Q.ACTIVE_TOKEN_FILTER_FROM,value:H.lastSuggestionToken&&H.lastSuggestionToken.type===N.S6.FILTER_FROM}),ACTIVE_TOKEN_FILTER_TO:H=>xe({id:Q.Q.ACTIVE_TOKEN_FILTER_TO,value:H.lastSuggestionToken&&H.lastSuggestionToken.type===N.S6.FILTER_TO}),ACTIVE_TOKEN_FILTER_BEFORE:H=>xe({id:Q.Q.ACTIVE_TOKEN_FILTER_BEFORE,value:H.lastSuggestionToken&&H.lastSuggestionToken.type===N.S6.FILTER_BEFORE}),ACTIVE_TOKEN_FILTER_DURING:H=>xe({id:Q.Q.ACTIVE_TOKEN_FILTER_DURING,value:H.lastSuggestionToken&&H.lastSuggestionToken.type===N.S6.FILTER_DURING}),ACTIVE_TOKEN_FILTER_ON:H=>xe({id:Q.Q.ACTIVE_TOKEN_FILTER_ON,value:H.lastSuggestionToken&&H.lastSuggestionToken.type===N.S6.FILTER_ON}),ACTIVE_TOKEN_FILTER_AFTER:H=>xe({id:Q.Q.ACTIVE_TOKEN_FILTER_AFTER,value:H.lastSuggestionToken&&H.lastSuggestionToken.type===N.S6.FILTER_AFTER}),ACTIVE_TOKEN_FILTER_HAS:H=>xe({id:Q.Q.ACTIVE_TOKEN_FILTER_HAS,value:H.lastSuggestionToken&&H.lastSuggestionToken.type===N.S6.FILTER_HAS}),ACTIVE_TOKEN_FILTER_IS:H=>xe({id:Q.Q.ACTIVE_TOKEN_FILTER_IS,value:H.lastSuggestionToken&&H.lastSuggestionToken.type===N.S6.FILTER_IS}),ACTIVE_TOKEN_FILTER_WITH:H=>xe({id:Q.Q.ACTIVE_TOKEN_FILTER_WITH,value:H.lastSuggestionToken&&H.lastSuggestionToken.type===N.S6.FILTER_WITH}),ACTIVE_TOKEN_MEMBER:H=>xe({id:Q.Q.ACTIVE_TOKEN_MEMBER,value:H.lastSuggestionToken&&H.lastSuggestionToken.type===N.S6.MEMBER}),ACTIVE_TOKEN_STRING:H=>xe({id:Q.Q.ACTIVE_TOKEN_STRING,value:H.lastSuggestionToken&&H.lastSuggestionToken.type===N.S6.STRING}),ACTIVE_TOKEN_PHRASE:H=>xe({id:Q.Q.ACTIVE_TOKEN_PHRASE,value:H.lastSuggestionToken&&H.lastSuggestionToken.type===N.S6.PHRASE}),STRING_EXACT_MATCH:H=>Nt({id:Q.Q.STRING_EXACT_MATCH,suggestion:H,extractionFunction:Vn}),STRING_EXACT_PREFIX_MATCH:H=>Nt({id:Q.Q.STRING_EXACT_PREFIX_MATCH,suggestion:H,extractionFunction:Wn}),STRING_NORMAL_MATCH:H=>Nt({id:Q.Q.STRING_NORMAL_MATCH,suggestion:H,extractionFunction:kn}),STRING_NORMAL_PREFIX_MATCH:H=>Nt({id:Q.Q.STRING_NORMAL_PREFIX_MATCH,suggestion:H,extractionFunction:Pn}),STRING_SAME_NUMBER_WORDS:H=>Nt({id:Q.Q.STRING_SAME_NUMBER_WORDS,suggestion:H,extractionFunction:$t}),EXCESS_STRING_LENGTH:H=>Nt({id:Q.Q.EXCESS_STRING_LENGTH,suggestion:H,extractionFunction:$n}),ID:H=>xe({id:Q.Q.ID,value:H.logId||H.id}),FILE_SUGGESTION_SCORE:H=>xe({id:Q.Q.FILE_SUGGESTION_SCORE,value:un(H)}),ACTIVE_TOKEN_QUERY_SUGGESTION:H=>xe({id:Q.Q.ACTIVE_TOKEN_QUERY_SUGGESTION,value:H.lastSuggestionToken&&H.lastSuggestionToken.type===N.S6.API}),QUERY_SUGGESTION_SCORE_V2:H=>xe({id:Q.Q.QUERY_SUGGESTION_SCORE_V2,value:qt(H)}),TYPE_NAVIGATION_TEAM:H=>xe({id:Q.Q.TYPE_NAVIGATION_TEAM,value:H&&H.suggestionType===N.fd.TEAM_NAVIGATION}),TYPE_NAVIGATION_VIEW:H=>xe({id:Q.Q.TYPE_NAVIGATION_VIEW,value:H&&H.suggestionType===N.fd.VIEW_NAVIGATION}),TYPE_USER_QUERY:H=>xe({id:Q.Q.TYPE_USER_QUERY,value:H&&H.suggestionType===N.fd.QUERY_USER}),NAV_EXACT_MATCH:H=>Nt({id:Q.Q.NAV_EXACT_MATCH,suggestion:H,extractionFunction:Vn,text:Dt(H)}),NAV_EXACT_PREFIX_MATCH:H=>Nt({id:Q.Q.NAV_EXACT_PREFIX_MATCH,suggestion:H,extractionFunction:Wn,text:Dt(H)}),NAV_NORMAL_MATCH:H=>Nt({id:Q.Q.NAV_NORMAL_MATCH,suggestion:H,extractionFunction:kn,text:Dt(H)}),CHANNEL_IS_PREVIOUS_NAME_EXACT_MATCH:(H,me)=>{let{itemIsChannel:Fe}=me;var ut,An;return Nt({id:Q.Q.CHANNEL_IS_PREVIOUS_NAME_EXACT_MATCH,suggestion:H,extractionFunction:vn=>{let{text:Hn,query:Kt}=vn;return Hn?(0,n.A)(Hn.split(",").map(ts=>Vn({text:ts,query:Kt}))):!1},text:Fe?(ut=H.item)===null||ut===void 0||(An=ut.previous_names)===null||An===void 0?void 0:An.join(","):null})},CHANNEL_IS_PREVIOUS_NAME_PREFIX_MATCH:(H,me)=>{let{itemIsChannel:Fe}=me;var ut,An;return Nt({id:Q.Q.CHANNEL_IS_PREVIOUS_NAME_PREFIX_MATCH,suggestion:H,extractionFunction:vn=>{let{text:Hn,query:Kt}=vn;return Hn?(0,n.A)(Hn.split(",").map(ts=>Wn({text:ts,query:Kt}))):!1},text:Fe?H==null||(ut=H.item)===null||ut===void 0||(An=ut.previous_names)===null||An===void 0?void 0:An.join(","):null})},CHANNEL_IS_ARCHIVED:(H,me)=>{let{itemIsChannel:Fe}=me;return xe({id:Q.Q.CHANNEL_IS_ARCHIVED,value:Fe&&(0,l.F)(H.item)})},CHANNEL_IS_MEMBER:(H,me)=>{let{itemIsChannel:Fe}=me;return xe({id:Q.Q.CHANNEL_IS_MEMBER,value:Fe&&(0,_.b)(H.item)})},CHANNEL_IS_STARRED:(H,me)=>{let{itemIsChannel:Fe}=me;return xe({id:Q.Q.CHANNEL_IS_STARRED,value:Fe&&H.isStarred})},MPIM_IS_STARRED:H=>xe({id:Q.Q.MPIM_IS_STARRED,value:(0,r.yz)(H.item)&&H.isStarred}),CHANNEL_IS_UNREAD:(H,me)=>{let{itemIsChannel:Fe}=me;return xe({id:Q.Q.CHANNEL_IS_UNREAD,value:Fe&&(0,o.KJ)(H.item)})},MPIM_IS_UNREAD:H=>xe({id:Q.Q.MPIM_IS_UNREAD,value:(0,r.yz)(H.item)&&(0,o.KJ)(H.item)}),CHANNEL_IS_OTHER_TEAM:(H,me)=>{let{itemIsChannel:Fe}=me;return xe({id:Q.Q.CHANNEL_IS_OTHER_TEAM,value:Fe&&(0,o.lo)(H.item)})},USER_IS_ACTIVE:(H,me)=>{let{itemIsMember:Fe}=me;return xe({id:Q.Q.USER_IS_ACTIVE,value:Fe&&(0,i.ls)(H.item)})},USER_IS_EXTERNAL:(H,me)=>{let{itemIsMember:Fe}=me;return xe({id:Q.Q.USER_IS_EXTERNAL,value:Fe&&(0,h.g)(H.item)})},USER_IS_BOT:(H,me)=>{let{itemIsMember:Fe}=me;return xe({id:Q.Q.USER_IS_BOT,value:Fe&&(0,ae.A)(H.item)})},USER_SAME_TEAM:(H,me)=>{let{itemIsMember:Fe}=me;return xe({id:Q.Q.USER_SAME_TEAM,value:Fe&&!!H.sameTeam})},USER_IS_CURRENT_USER:(H,me)=>{let{isCurrentUser:Fe}=me;return xe({id:Q.Q.USER_IS_CURRENT_USER,value:Fe})},USER_DM_IS_STARRED:(H,me)=>{let{itemIsMember:Fe}=me;return xe({id:Q.Q.USER_DM_IS_STARRED,value:Fe&&H.im&&H.imIsStarred})},USER_DM_IS_UNREAD:(H,me)=>{let{itemIsMember:Fe}=me;return xe({id:Q.Q.USER_DM_IS_UNREAD,value:Fe&&H.im&&(0,o.KJ)(H.im)})},CHANNEL_PRIORITY:(H,me)=>{let{itemIsChannel:Fe}=me;return xe({id:Q.Q.CHANNEL_PRIORITY,value:Fe&&(H==null?void 0:H.priority)})},CHANNEL_READ_AGE_DECAY_7D:(H,me)=>{let{itemIsChannel:Fe,now:ut}=me;return xe({id:Q.Q.CHANNEL_READ_AGE_DECAY_7D,value:Fe&&ue(ut,parseFloat((Te=H.lastReadTs)!==null&&Te!==void 0?Te:""),7*re)||0})},CHANNEL_READ_AGE_DECAY_2H:(H,me)=>{let{itemIsChannel:Fe,now:ut}=me;return xe({id:Q.Q.CHANNEL_READ_AGE_DECAY_2H,value:Fe&&ue(ut,parseFloat((Ce=H.lastReadTs)!==null&&Ce!==void 0?Ce:""),2*Z)||0})},MPIM_READ_AGE_DECAY_2H:(H,me)=>{let{now:Fe}=me;return xe({id:Q.Q.MPIM_READ_AGE_DECAY_2H,value:(0,r.yz)(H.item)&&ue(Fe,parseFloat((Pe=H.lastReadTs)!==null&&Pe!==void 0?Pe:""),2*Z)||0})},MPIM_READ_AGE_DECAY_7D:(H,me)=>{let{now:Fe}=me;return xe({id:Q.Q.MPIM_READ_AGE_DECAY_7D,value:(0,r.yz)(H.item)&&ue(Fe,parseFloat((fe=H.lastReadTs)!==null&&fe!==void 0?fe:""),7*re)||0})},USER_DM_READ_AGE_DECAY_7D:(H,me)=>{let{itemIsMember:Fe,now:ut}=me;return xe({id:Q.Q.USER_DM_READ_AGE_DECAY_7D,value:Fe&&H.im&&ue(ut,parseFloat((pe=H.lastReadTs)!==null&&pe!==void 0?pe:""),7*re)||0})},USER_DM_READ_AGE_DECAY_7D_V2:(H,me)=>{let{itemIsMember:Fe,now:ut}=me;return xe({id:Q.Q.USER_DM_READ_AGE_DECAY_7D_V2,value:Fe&&H.im&&ue(ut,parseFloat((q=H.lastReadImTs)!==null&&q!==void 0?q:""),7*re)||0})},USER_DM_READ_AGE_DECAY_7D_V3:(H,me)=>{let{itemIsMember:Fe,now:ut}=me;return xe({id:Q.Q.USER_DM_READ_AGE_DECAY_7D_V3,value:Fe&&ue(ut,parseFloat((se=_n(H))!==null&&se!==void 0?se:""),7*re)||0})},USER_DM_READ_AGE_DECAY_2H:(H,me)=>{let{itemIsMember:Fe,now:ut}=me;return xe({id:Q.Q.USER_DM_READ_AGE_DECAY_2H,value:Fe&&H.im&&ue(ut,parseFloat((ge=H.lastReadTs)!==null&&ge!==void 0?ge:""),2*Z)||0})},USER_DM_READ_AGE_DECAY_2H_V2:(H,me)=>{let{itemIsMember:Fe,now:ut}=me;return xe({id:Q.Q.USER_DM_READ_AGE_DECAY_2H_V2,value:Fe&&H.im&&ue(ut,parseFloat((Oe=H.lastReadImTs)!==null&&Oe!==void 0?Oe:""),2*Z)||0})},USER_DM_READ_AGE_DECAY_2H_V3:(H,me)=>{let{itemIsMember:Fe,now:ut}=me;return xe({id:Q.Q.USER_DM_READ_AGE_DECAY_2H_V3,value:Fe&&ue(ut,parseFloat((Le=_n(H))!==null&&Le!==void 0?Le:""),2*Z)||0})},USER_DM_NULL:(H,me)=>{let{itemIsMember:Fe}=me;return xe({id:Q.Q.USER_DM_NULL,value:Fe&&!H.im})},USER_DM_EMPTY:(H,me)=>{let{itemIsMember:Fe}=me;return xe({id:Q.Q.USER_DM_EMPTY,value:Fe&&H.im&&!parseFloat((We=H.latestTs)!==null&&We!==void 0?We:"")})},USER_DM_EMPTY_V2:(H,me)=>{let{itemIsMember:Fe}=me;return xe({id:Q.Q.USER_DM_EMPTY_V2,value:Fe&&H.im&&!parseFloat((Re=H.latestImTs)!==null&&Re!==void 0?Re:"")})},USER_HAS_DMED:(H,me)=>{let{itemIsMember:Fe}=me;return xe({id:Q.Q.USER_HAS_DMED,value:Fe&&!!parseFloat((we=_n(H))!==null&&we!==void 0?we:"")})},USER_DM_NOT_OPEN:(H,me)=>{let{itemIsMember:Fe}=me;return xe({id:Q.Q.USER_DM_NOT_OPEN,value:Fe&&H.im&&!(0,o.nT)(H.im)})},USER_DM_OPEN:(H,me)=>{let{itemIsMember:Fe}=me;return xe({id:Q.Q.USER_DM_OPEN,value:Fe&&H.im&&(0,o.nT)(H.im)})},USER_DM_LATEST_OLDER_30D:(H,me)=>{let{itemIsMember:Fe,now:ut}=me;return xe({id:Q.Q.USER_DM_LATEST_OLDER_30D,value:Fe&&Xe(ut,parseFloat((Je=H.latestTs)!==null&&Je!==void 0?Je:""),30*re)})},USER_DM_LATEST_OLDER_30D_V2:(H,me)=>{let{itemIsMember:Fe,now:ut}=me;return xe({id:Q.Q.USER_DM_LATEST_OLDER_30D_V2,value:Fe&&Xe(ut,parseFloat((it=H.latestImTs)!==null&&it!==void 0?it:""),30*re)})},USER_DM_LATEST_OLDER_90D:(H,me)=>{let{itemIsMember:Fe,now:ut}=me;return xe({id:Q.Q.USER_DM_LATEST_OLDER_90D,value:Fe&&Xe(ut,parseFloat((et=H.latestTs)!==null&&et!==void 0?et:""),90*re)})},USER_DM_LATEST_OLDER_90D_V2:(H,me)=>{let{itemIsMember:Fe,now:ut}=me;return xe({id:Q.Q.USER_DM_LATEST_OLDER_90D_V2,value:Fe&&Xe(ut,parseFloat((lt=H.latestImTs)!==null&&lt!==void 0?lt:""),90*re)})},USER_DM_READ_OLDER_7D:(H,me)=>{let{itemIsMember:Fe,now:ut}=me;return xe({id:Q.Q.USER_DM_READ_OLDER_7D,value:Fe&&Xe(ut,parseFloat((nt=_n(H))!==null&&nt!==void 0?nt:""),7*re)})},USER_DM_READ_OLDER_30D:(H,me)=>{let{itemIsMember:Fe,now:ut}=me;return xe({id:Q.Q.USER_DM_READ_OLDER_30D,value:Fe&&Xe(ut,parseFloat((at=_n(H))!==null&&at!==void 0?at:""),30*re)})},USER_DM_READ_OLDER_90D:(H,me)=>{let{itemIsMember:Fe,now:ut}=me;return xe({id:Q.Q.USER_DM_READ_OLDER_90D,value:Fe&&Xe(ut,parseFloat((ze=_n(H))!==null&&ze!==void 0?ze:""),90*re)})},USER_MPIM_READ_AGE_DECAY_7D:(H,me)=>{let{itemIsMember:Fe,now:ut}=me;return xe({id:Q.Q.USER_MPIM_READ_AGE_DECAY_7D,value:Fe&&H.mpimFeatures&&ue(ut,H.mpimFeatures.lastReadTs,7*re)||0})},USER_MPIM_READ_AGE_DECAY_2H:(H,me)=>{let{itemIsMember:Fe,now:ut}=me;return xe({id:Q.Q.USER_MPIM_READ_AGE_DECAY_2H,value:Fe&&H.mpimFeatures&&ue(ut,H.mpimFeatures.lastReadTs,2*Z)||0})},USER_MPIM_LATEST_MSG_AGE_DECAY_7D:(H,me)=>{let{itemIsMember:Fe,now:ut}=me;return xe({id:Q.Q.USER_MPIM_LATEST_MSG_AGE_DECAY_7D,value:Fe&&H.mpimFeatures&&ue(ut,H.mpimFeatures.latestMsgTs,7*re)||0})},USER_MPIM_LATEST_MSG_AGE_DECAY_2H:(H,me)=>{let{itemIsMember:Fe,now:ut}=me;return xe({id:Q.Q.USER_MPIM_LATEST_MSG_AGE_DECAY_2H,value:Fe&&H.mpimFeatures&&ue(ut,H.mpimFeatures.latestMsgTs,2*Z)||0})},USER_MPIM_FRECENCY_LOG_ITEM_COUNT:(H,me)=>{let{itemIsMember:Fe}=me;var ut;return xe({id:Q.Q.USER_MPIM_FRECENCY_LOG_ITEM_COUNT,value:Fe&&((ut=H.mpimFeatures)===null||ut===void 0?void 0:ut.itemCount)&&Math.log1p(H.mpimFeatures.itemCount)||0})},USER_MPIM_FRECENCY_LOG_HIT_COUNT:(H,me)=>{let{itemIsMember:Fe}=me;var ut;return xe({id:Q.Q.USER_MPIM_FRECENCY_LOG_HIT_COUNT,value:Fe&&((ut=H.mpimFeatures)===null||ut===void 0?void 0:ut.hitCount)&&Math.log1p(H.mpimFeatures.hitCount)||0})},QUERY_LENGTH:H=>Nt({id:Q.Q.QUERY_LENGTH,suggestion:H,extractionFunction:Me}),NAV_QUERY_LENGTH:H=>Nt({id:Q.Q.NAV_QUERY_LENGTH,suggestion:H,extractionFunction:Me,text:Dt(H)}),SUGGESTION_TEXT_LENGTH:H=>Nt({id:Q.Q.SUGGESTION_TEXT_LENGTH,suggestion:H,extractionFunction:Be}),NAV_TEXT_LENGTH:H=>Nt({id:Q.Q.NAV_TEXT_LENGTH,suggestion:H,extractionFunction:Be,text:Dt(H)}),RAW_FRECENCY:H=>xe({id:Q.Q.RAW_FRECENCY,value:H.rawFrecencyScore}),MPIM_PRIORITY:H=>xe({id:Q.Q.MPIM_PRIORITY,value:(0,r.yz)(H.item)&&(H==null?void 0:H.priority)}),QUERY_RATIO_LENGTH_STRING:H=>Nt({id:Q.Q.QUERY_RATIO_LENGTH_STRING,suggestion:H,extractionFunction:De}),NAV_QUERY_RATIO_LENGTH_STRING:H=>Nt({id:Q.Q.NAV_QUERY_RATIO_LENGTH_STRING,suggestion:H,extractionFunction:De,text:Dt(H)}),USER_QUERY_RATIO_LENGTH_STRING:H=>Nt({id:Q.Q.USER_QUERY_RATIO_LENGTH_STRING,suggestion:H,extractionFunction:De,text:Wt(H,N.fd.USER_NAVIGATION)}),CHANNEL_QUERY_RATIO_LENGTH_STRING:H=>Nt({id:Q.Q.CHANNEL_QUERY_RATIO_LENGTH_STRING,suggestion:H,extractionFunction:De,text:Wt(H,N.fd.CHANNEL_NAVIGATION)}),MPIM_QUERY_RATIO_LENGTH_STRING:H=>Nt({id:Q.Q.MPIM_QUERY_RATIO_LENGTH_STRING,suggestion:H,extractionFunction:De,text:Wt(H,N.fd.MPIM_NAVIGATION)}),MPIM_WITH_DEACTIVATED_USER:H=>xe({id:Q.Q.MPIM_WITH_DEACTIVATED_USER,value:(0,r.yz)(H.item)&&H.isMpimWithDeactivatedMember}),NAV_NORMAL_PREFIX_MATCH:H=>Nt({id:Q.Q.NAV_NORMAL_PREFIX_MATCH,suggestion:H,extractionFunction:Pn,text:Dt(H)}),FRECENCY_BONUS:H=>xe({id:Q.Q.FRECENCY_BONUS,value:(0,G.A)(Object.values(H.bonusPointMap||{}))||0}),USER_FIRST_NAME_EXACT_MATCH:(H,me)=>{let{itemIsMember:Fe}=me;return Nt({id:Q.Q.USER_FIRST_NAME_EXACT_MATCH,suggestion:H,extractionFunction:Vn,text:Fe&&(0,i.XS)(H.item)})},USER_FIRST_NAME_EXACT_PREFIX_MATCH:(H,me)=>{let{itemIsMember:Fe}=me;return Nt({id:Q.Q.USER_FIRST_NAME_EXACT_PREFIX_MATCH,suggestion:H,extractionFunction:Wn,text:Fe&&(0,i.XS)(H.item)})},USER_FIRST_NAME_NORMAL_MATCH:(H,me)=>{let{itemIsMember:Fe}=me;return Nt({id:Q.Q.USER_FIRST_NAME_NORMAL_MATCH,suggestion:H,extractionFunction:kn,text:Fe&&(0,i.XS)(H.item)})},USER_FIRST_NAME_NORMAL_PREFIX_MATCH:(H,me)=>{let{itemIsMember:Fe}=me;return Nt({id:Q.Q.USER_FIRST_NAME_NORMAL_PREFIX_MATCH,suggestion:H,extractionFunction:Pn,text:Fe&&(0,i.XS)(H.item)})},USER_LAST_NAME_EXACT_MATCH:(H,me)=>{let{itemIsMember:Fe}=me;return Nt({id:Q.Q.USER_LAST_NAME_EXACT_MATCH,suggestion:H,extractionFunction:Vn,text:Fe&&(0,i.lQ)(H.item)})},USER_LAST_NAME_EXACT_PREFIX_MATCH:(H,me)=>{let{itemIsMember:Fe}=me;return Nt({id:Q.Q.USER_LAST_NAME_EXACT_PREFIX_MATCH,suggestion:H,extractionFunction:Wn,text:Fe&&(0,i.lQ)(H.item)})},USER_LAST_NAME_NORMAL_MATCH:(H,me)=>{let{itemIsMember:Fe}=me;return Nt({id:Q.Q.USER_LAST_NAME_NORMAL_MATCH,suggestion:H,extractionFunction:kn,text:Fe&&(0,i.lQ)(H.item)})},USER_LAST_NAME_NORMAL_PREFIX_MATCH:(H,me)=>{let{itemIsMember:Fe}=me;return Nt({id:Q.Q.USER_LAST_NAME_NORMAL_PREFIX_MATCH,suggestion:H,extractionFunction:Pn,text:Fe&&(0,i.lQ)(H.item)})},USER_EMAIL_MATCH:H=>{var me,Fe;return xe({id:Q.Q.USER_EMAIL_MATCH,value:((me=H.scoreDetails)===null||me===void 0?void 0:me.email)!==void 0?((Fe=H.scoreDetails)===null||Fe===void 0?void 0:Fe.email)>=0:!1})},USER_EMAIL_ONLY_MATCH:H=>{var me,Fe;return xe({id:Q.Q.USER_EMAIL_ONLY_MATCH,value:((me=H.scoreDetails)===null||me===void 0?void 0:me.email)!==void 0&&((Fe=H.scoreDetails)===null||Fe===void 0?void 0:Fe.email)>=0&&Object.keys((Ke=H.scoreDetails)!==null&&Ke!==void 0?Ke:{}).length===1})},USER_PRIORITY:(H,me)=>{let{itemIsMember:Fe}=me;return xe({id:Q.Q.USER_PRIORITY,value:Fe&&H.im&&(H==null?void 0:H.priority)||0})},ONLY_MATCHES_PREVIOUS_NAME:H=>xe({id:Q.Q.ONLY_MATCHES_PREVIOUS_NAME,value:H.bestPreviousNameMatch?1:null}),FRECENCY_WEIGHT_HIT_VISITS:H=>xe({id:Q.Q.FRECENCY_WEIGHT_HIT_VISITS,value:H.weightHitVisits}),FRECENCY_HIT_VISITS_4H:H=>xe({id:Q.Q.FRECENCY_HIT_VISITS_4H,value:H.hitVisits4h}),FRECENCY_HIT_VISITS_1D:H=>xe({id:Q.Q.FRECENCY_HIT_VISITS_1D,value:H.hitVisits1d}),FRECENCY_HIT_VISITS_3D:H=>xe({id:Q.Q.FRECENCY_HIT_VISITS_3D,value:H.hitVisits3d}),FRECENCY_HIT_VISITS_1W:H=>xe({id:Q.Q.FRECENCY_HIT_VISITS_1W,value:H.hitVisits1w}),FRECENCY_HIT_VISITS_1M:H=>xe({id:Q.Q.FRECENCY_HIT_VISITS_1M,value:H.hitVisits1m}),FRECENCY_HIT_VISITS_90D:H=>xe({id:Q.Q.FRECENCY_HIT_VISITS_90D,value:H.hitVisits90d}),FRECENCY_ITEM_VISITS_4H:H=>xe({id:Q.Q.FRECENCY_ITEM_VISITS_4H,value:H.itemVisits4h}),FRECENCY_ITEM_VISITS_1D:H=>xe({id:Q.Q.FRECENCY_ITEM_VISITS_1D,value:H.itemVisits1d}),FRECENCY_ITEM_VISITS_3D:H=>xe({id:Q.Q.FRECENCY_ITEM_VISITS_3D,value:H.itemVisits3d}),FRECENCY_ITEM_VISITS_1W:H=>xe({id:Q.Q.FRECENCY_ITEM_VISITS_1W,value:H.itemVisits1w}),FRECENCY_ITEM_VISITS_1M:H=>xe({id:Q.Q.FRECENCY_ITEM_VISITS_1M,value:H.itemVisits1m}),FRECENCY_ITEM_VISITS_90D:H=>xe({id:Q.Q.FRECENCY_ITEM_VISITS_90D,value:H.itemVisits90d}),FRECENCY_HIT_COUNT:H=>xe({id:Q.Q.FRECENCY_HIT_COUNT,value:H.hitCount}),FRECENCY_WEIGHT_ITEM_VISITS:H=>xe({id:Q.Q.FRECENCY_WEIGHT_ITEM_VISITS,value:H.weightItemVisits}),FRECENCY_ITEM_COUNT:H=>xe({id:Q.Q.FRECENCY_ITEM_COUNT,value:H.itemCount}),NAV_NORMAL_MATCH_USER:H=>Nt({id:Q.Q.NAV_NORMAL_MATCH_USER,suggestion:H,extractionFunction:me=>{let{text:Fe,normalizedQuery:ut}=me;return kn({text:Fe,normalizedQuery:ut})&&!Pn({text:(0,i.XS)(H.item),normalizedQuery:ut})},text:Wt(H,N.fd.USER_NAVIGATION)}),NAV_NORMAL_PREFIX_MATCH_USER:H=>Nt({id:Q.Q.NAV_NORMAL_PREFIX_MATCH_USER,suggestion:H,extractionFunction:me=>{let{text:Fe,normalizedQuery:ut}=me;return Pn({text:Fe,normalizedQuery:ut})&&!Pn({text:(0,i.XS)(H.item),normalizedQuery:ut})},text:Wt(H,N.fd.USER_NAVIGATION)}),NAV_NORMAL_MATCH_NO_USER:H=>Nt({id:Q.Q.NAV_NORMAL_MATCH_NO_USER,suggestion:H,extractionFunction:kn,text:zt(H)}),NAV_NORMAL_PREFIX_MATCH_NO_USER:H=>Nt({id:Q.Q.NAV_NORMAL_PREFIX_MATCH_NO_USER,suggestion:H,extractionFunction:Pn,text:zt(H)}),CHANNEL_LATEST_MSG_AGE_DECAY_7D:(H,me)=>{let{itemIsChannel:Fe,now:ut}=me;return xe({id:Q.Q.CHANNEL_LATEST_MSG_AGE_DECAY_7D,value:Fe&&ue(ut,parseFloat((He=H.latestTs)!==null&&He!==void 0?He:""),7*re)||0})},CHANNEL_LATEST_MSG_AGE_DECAY_2H:(H,me)=>{let{itemIsChannel:Fe,now:ut}=me;return xe({id:Q.Q.CHANNEL_LATEST_MSG_AGE_DECAY_2H,value:Fe&&ue(ut,parseFloat((Ye=H.latestTs)!==null&&Ye!==void 0?Ye:""),2*Z)||0})},MPIM_LATEST_MSG_AGE_DECAY_2H:(H,me)=>{let{now:Fe}=me;return xe({id:Q.Q.MPIM_LATEST_MSG_AGE_DECAY_2H,value:(0,r.yz)(H.item)&&ue(Fe,parseFloat((_t=H.latestTs)!==null&&_t!==void 0?_t:""),2*Z)||0})},MPIM_USERS_MAX_LATEST_MSG_AGE_DECAY_2H:(H,me)=>{let{now:Fe}=me;return xe({id:Q.Q.MPIM_USERS_MAX_LATEST_MSG_AGE_DECAY_2H,value:(0,r.yz)(H.item)&&ue(Fe,H.maxLatestMsgTsOfAllMembers,2*Z)||0})},MPIM_USERS_MAX_LATEST_MSG_AGE_DECAY_7D:(H,me)=>{let{now:Fe}=me;return xe({id:Q.Q.MPIM_USERS_MAX_LATEST_MSG_AGE_DECAY_7D,value:(0,r.yz)(H.item)&&ue(Fe,H.maxLatestMsgTsOfAllMembers,7*re)||0})},MPIM_USERS_AVG_LATEST_MSG_AGE_DECAY_2H:(H,me)=>{let{now:Fe}=me;return xe({id:Q.Q.MPIM_USERS_AVG_LATEST_MSG_AGE_DECAY_2H,value:(0,r.yz)(H.item)&&ue(Fe,H.avgLatestMsgTsOfAllMembers,2*Z)||0})},MPIM_USERS_AVG_LATEST_MSG_AGE_DECAY_7D:(H,me)=>{let{now:Fe}=me;return xe({id:Q.Q.MPIM_USERS_AVG_LATEST_MSG_AGE_DECAY_7D,value:(0,r.yz)(H.item)&&ue(Fe,H.avgLatestMsgTsOfAllMembers,7*re)||0})},MPIM_USERS_MAX_MSG_READ_AGE_DECAY_2H:(H,me)=>{let{now:Fe}=me;return xe({id:Q.Q.MPIM_USERS_MAX_MSG_READ_AGE_DECAY_2H,value:(0,r.yz)(H.item)&&ue(Fe,H.maxLastReadTsOfAllMembers,2*Z)||0})},MPIM_USERS_MAX_MSG_READ_AGE_DECAY_7D:(H,me)=>{let{now:Fe}=me;return xe({id:Q.Q.MPIM_USERS_MAX_MSG_READ_AGE_DECAY_7D,value:(0,r.yz)(H.item)&&ue(Fe,H.maxLastReadTsOfAllMembers,7*re)||0})},MPIM_USERS_AVG_MSG_READ_AGE_DECAY_2H:(H,me)=>{let{now:Fe}=me;return xe({id:Q.Q.MPIM_USERS_AVG_MSG_READ_AGE_DECAY_2H,value:(0,r.yz)(H.item)&&ue(Fe,H.avgLastReadTsOfAllMembers,2*Z)||0})},MPIM_USERS_AVG_MSG_READ_AGE_DECAY_7D:(H,me)=>{let{now:Fe}=me;return xe({id:Q.Q.MPIM_USERS_AVG_MSG_READ_AGE_DECAY_7D,value:(0,r.yz)(H.item)&&ue(Fe,H.avgLastReadTsOfAllMembers,7*re)||0})},MPIM_USERS_PCT_NON_EMPTY_DMS:H=>xe({id:Q.Q.MPIM_USERS_PCT_NON_EMPTY_DMS,value:(0,r.yz)(H.item)&&H.pctNonEmptyDmsForAllMembers||0}),MPIM_USERS_PCT_NON_NULL_DMS:H=>xe({id:Q.Q.MPIM_USERS_PCT_NON_NULL_DMS,value:(0,r.yz)(H.item)&&H.pctNonNullDmsForAllMembers||0}),MPIM_USERS_ALL_INTERNAL:H=>xe({id:Q.Q.MPIM_USERS_ALL_INTERNAL,value:(0,r.yz)(H.item)&&H.isMpimWithOnlyInternalMembers}),MPIM_LATEST_MSG_AGE_DECAY_7D:(H,me)=>{let{now:Fe}=me;return xe({id:Q.Q.MPIM_LATEST_MSG_AGE_DECAY_7D,value:(0,r.yz)(H.item)&&ue(Fe,parseFloat((vt=H.latestTs)!==null&&vt!==void 0?vt:""),7*re)||0})},USER_DM_LATEST_MSG_AGE_DECAY_7D:(H,me)=>{let{itemIsMember:Fe,now:ut}=me;return xe({id:Q.Q.USER_DM_LATEST_MSG_AGE_DECAY_7D,value:Fe&&H.im&&ue(ut,parseFloat((Tt=H.latestTs)!==null&&Tt!==void 0?Tt:""),7*re)||0})},USER_DM_LATEST_MSG_AGE_DECAY_7D_V2:(H,me)=>{let{itemIsMember:Fe,now:ut}=me;return xe({id:Q.Q.USER_DM_LATEST_MSG_AGE_DECAY_7D_V2,value:Fe&&H.im&&ue(ut,parseFloat((Lt=H.latestImTs)!==null&&Lt!==void 0?Lt:""),7*re)||0})},USER_DM_LATEST_MSG_AGE_DECAY_2H:(H,me)=>{let{itemIsMember:Fe,now:ut}=me;return xe({id:Q.Q.USER_DM_LATEST_MSG_AGE_DECAY_2H,value:Fe&&H.im&&ue(ut,parseFloat((ft=H.latestTs)!==null&&ft!==void 0?ft:""),2*Z)||0})},USER_DM_LATEST_MSG_AGE_DECAY_2H_V2:(H,me)=>{let{itemIsMember:Fe,now:ut}=me;return xe({id:Q.Q.USER_DM_LATEST_MSG_AGE_DECAY_2H_V2,value:Fe&&H.im&&ue(ut,parseFloat((mt=H.latestImTs)!==null&&mt!==void 0?mt:""),2*Z)||0})},FRECENCY_LOG_HIT_COUNT:H=>xe({id:Q.Q.FRECENCY_LOG_HIT_COUNT,value:Math.log1p((Yt=H.hitCount)!==null&&Yt!==void 0?Yt:0)||0}),FRECENCY_LOG_HIT_COUNT_SCALED:H=>xe({id:Q.Q.FRECENCY_LOG_HIT_COUNT_SCALED,value:H.logHitCountScaled}),FRECENCY_LOG_ITEM_COUNT:H=>xe({id:Q.Q.FRECENCY_LOG_ITEM_COUNT,value:Math.log1p((nn=H.itemCount)!==null&&nn!==void 0?nn:0)||0}),FRECENCY_LOG_ITEM_COUNT_SCALED:H=>xe({id:Q.Q.FRECENCY_LOG_ITEM_COUNT_SCALED,value:H.logItemCountScaled}),QUERY_FRECENCY_RAW:H=>xe({id:Q.Q.QUERY_FRECENCY_RAW,value:(H.suggestionType===N.fd.QUERY||H.suggestionType===N.fd.QUERY_USER)&&H.scoringContext.frecencyScoreRaw}),QUERY_FRECENCY_WEIGHT_HIT_VISITS:H=>xe({id:Q.Q.QUERY_FRECENCY_WEIGHT_HIT_VISITS,value:(H.suggestionType===N.fd.QUERY||H.suggestionType===N.fd.QUERY_USER)&&H.scoringContext.frecencyWeightHitVisits}),QUERY_FRECENCY_HIT_COUNT:H=>xe({id:Q.Q.QUERY_FRECENCY_HIT_COUNT,value:(H.suggestionType===N.fd.QUERY||H.suggestionType===N.fd.QUERY_USER)&&H.scoringContext.frecencyHitCount}),QUERY_LOG_HIT_COUNT:H=>xe({id:Q.Q.QUERY_LOG_HIT_COUNT,value:(H.suggestionType===N.fd.QUERY||H.suggestionType===N.fd.QUERY_USER)&&dt(H.scoringContext.frecencyHitCount)||H.suggestionType===N.fd.QUERY_HISTORY&&dt((jt=H.count)!==null&&jt!==void 0?jt:0)||0}),QUERY_FRECENCY_WEIGHT_ITEM_VISITS:H=>xe({id:Q.Q.QUERY_FRECENCY_WEIGHT_ITEM_VISITS,value:(H.suggestionType===N.fd.QUERY||H.suggestionType===N.fd.QUERY_USER)&&H.scoringContext.frecencyWeightItemVisits}),QUERY_FRECENCY_ITEM_COUNT:H=>xe({id:Q.Q.QUERY_FRECENCY_ITEM_COUNT,value:(H.suggestionType===N.fd.QUERY||H.suggestionType===N.fd.QUERY_USER)&&H.scoringContext.frecencyItemCount}),QUERY_FUZZY_SCORE:H=>xe({id:Q.Q.QUERY_FUZZY_SCORE,value:(H.suggestionType===N.fd.QUERY||H.suggestionType===N.fd.QUERY_USER)&&H.scoringContext.fuzzyScore}),QUERY_FRECENCY_BONUS:H=>{var me;return xe({id:Q.Q.QUERY_FRECENCY_BONUS,value:(H.suggestionType===N.fd.QUERY||H.suggestionType===N.fd.QUERY_USER)&&(0,G.A)(Object.values(((me=H.scoringContext)===null||me===void 0?void 0:me.frecencyScoreBonus)||{}))||0})},QUERY_HISTORY_LOG_INDEX:H=>xe({id:Q.Q.QUERY_HISTORY_LOG_INDEX,value:H.suggestionType===N.fd.QUERY_HISTORY&&dt(H.index)||0}),QUERY_HISTORY_AGE_DECAY_30D:(H,me)=>{let{now:Fe}=me;return xe({id:Q.Q.QUERY_HISTORY_AGE_DECAY_30D,value:H.suggestionType===N.fd.QUERY_HISTORY&&ue(Fe,H.lastUpdateTs,30*re)||0})},FUZZY_SCORE:H=>xe({id:Q.Q.FUZZY_SCORE,value:H.score}),FUZZY_SCORE_SCALED_EXP:H=>xe({id:Q.Q.FUZZY_SCORE_SCALED_EXP,value:$(H.score)&&.5**Math.min(H.score,10)}),FUZZY_SCORE_SCALED_FLIPPED:H=>xe({id:Q.Q.FUZZY_SCORE_SCALED_FLIPPED,value:$(H.score)&&10-Math.min(H.score,10)}),FUZZY_SCORE_SCALED_SUBTRACT:H=>xe({id:Q.Q.FUZZY_SCORE_SCALED_SUBTRACT,value:$(H.score)&&Math.min(H.score,10)-1}),FUZZY_SCORE_50:H=>xe({id:Q.Q.FUZZY_SCORE_50,value:H.bonusPointMap&&H.bonusPointMap.fuzzyScoreBonus===50}),FUZZY_SCORE_25:H=>xe({id:Q.Q.FUZZY_SCORE_25,value:H.bonusPointMap&&H.bonusPointMap.fuzzyScoreBonus===25}),FUZZY_SCORE_ALL:H=>xe({id:Q.Q.FUZZY_SCORE_ALL,value:H.bonusPointMap&&H.bonusPointMap.fuzzyScoreBonus&&H.bonusPointMap.fuzzyScoreBonus<25}),FILTER_USER_IS_ACTIVE:H=>xe({id:Q.Q.FILTER_USER_IS_ACTIVE,value:H.lastSuggestionToken&&H.lastTokenMemberOrNull&&(0,i.ls)(H.lastTokenMemberOrNull)}),FILTER_USER_IS_CURRENT_USER:H=>xe({id:Q.Q.FILTER_USER_IS_CURRENT_USER,value:H.lastSuggestionToken&&H.lastTokenMemberOrNull&&(0,i.fy)(H.lastTokenMemberOrNull)}),FILTER_USER_DM_IS_STARRED:H=>xe({id:Q.Q.FILTER_USER_DM_IS_STARRED,value:H.lastTokenIm&&H.lastTokenImIsStarred}),FILTER_USER_DM_IS_UNREAD:H=>xe({id:Q.Q.FILTER_USER_DM_IS_UNREAD,value:H.lastTokenIm&&(0,o.KJ)(H.lastTokenIm)}),FILTER_USER_DM_READ_AGE_DECAY_7D:(H,me)=>{let{now:Fe}=me;return xe({id:Q.Q.FILTER_USER_DM_READ_AGE_DECAY_7D,value:H.lastTokenIm&&ue(Fe,H.lastTokenImLastRead,7*re)||0})},FILTER_USER_DM_READ_AGE_DECAY_2H:(H,me)=>{let{now:Fe}=me;return xe({id:Q.Q.FILTER_USER_DM_READ_AGE_DECAY_2H,value:H.lastTokenIm&&ue(Fe,H.lastTokenImLastRead,2*Z)||0})},FILTER_USER_DM_LATEST_MSG_AGE_DECAY_7D:(H,me)=>{let{now:Fe}=me;return xe({id:Q.Q.FILTER_USER_DM_LATEST_MSG_AGE_DECAY_7D,value:H.lastTokenIm&&ue(Fe,parseFloat((gn=H.lastTokenImLatest)!==null&&gn!==void 0?gn:""),7*re)||0})},FILTER_USER_DM_LATEST_MSG_AGE_DECAY_2H:(H,me)=>{let{now:Fe}=me;return xe({id:Q.Q.FILTER_USER_DM_LATEST_MSG_AGE_DECAY_2H,value:H.lastTokenIm&&ue(Fe,parseFloat((on=H.lastTokenImLatest)!==null&&on!==void 0?on:""),2*Z)||0})},FILTER_USER_FIRST_NAME_NORMAL_MATCH:H=>Nt({id:Q.Q.FILTER_USER_FIRST_NAME_NORMAL_MATCH,suggestion:H,extractionFunction:kn,text:cn(H)}),FILTER_USER_FIRST_NAME_NORMAL_PREFIX_MATCH:H=>Nt({id:Q.Q.FILTER_USER_FIRST_NAME_NORMAL_PREFIX_MATCH,suggestion:H,extractionFunction:Pn,text:cn(H)}),FILTER_USER_LAST_NAME_NORMAL_MATCH:H=>Nt({id:Q.Q.FILTER_USER_LAST_NAME_NORMAL_MATCH,suggestion:H,extractionFunction:kn,text:hn(H)}),FILTER_USER_LAST_NAME_NORMAL_PREFIX_MATCH:H=>Nt({id:Q.Q.FILTER_USER_LAST_NAME_NORMAL_PREFIX_MATCH,suggestion:H,extractionFunction:Pn,text:hn(H)}),FILTER_USER_PRIORITY:H=>xe({id:Q.Q.FILTER_USER_PRIORITY,value:H.lastTokenIm&&(H==null?void 0:H.priority)}),HERE_KEYWORD:H=>xe({id:Q.Q.HERE_KEYWORD,value:H.name==="here"}),HERE_KEYWORD_EXACT_MATCH:H=>xe({id:Q.Q.HERE_KEYWORD_EXACT_MATCH,value:H.name==="here"&&H.query==="here"}),IS_BROADCAST_KEYWORD:H=>xe({id:Q.Q.IS_BROADCAST_KEYWORD,value:!!(H.type&&H.type==="broadcastKeyword")}),BROADCAST_KEYWORD_NORMAL_MATCH:H=>xe({id:Q.Q.BROADCAST_KEYWORD_NORMAL_MATCH,value:!!(H.type&&H.type==="broadcastKeyword"&&kn({text:(Xt=H.name)!==null&&Xt!==void 0?Xt:"",normalizedQuery:H.normalizedQuery}))}),EMOJI_EXACT_MATCH:H=>xe({id:Q.Q.EMOJI_EXACT_MATCH,value:H.bonusPointMap&&H.bonusPointMap.isEmojiExactMatch&&1}),QUERY_TOKEN_NORMAL_MATCH:H=>Nt({id:Q.Q.QUERY_TOKEN_NORMAL_MATCH,suggestion:H,extractionFunction:kn,text:Cn(H)}),QUERY_TOKEN_NORMAL_PREFIX_MATCH:H=>Nt({id:Q.Q.QUERY_TOKEN_NORMAL_PREFIX_MATCH,suggestion:H,extractionFunction:Pn,text:Cn(H)}),FILTER_CHANNEL_IS_ARCHIVED:H=>xe({id:Q.Q.FILTER_CHANNEL_IS_ARCHIVED,value:(0,l.F)(H.lastTokenChannelOrNull)}),FILTER_CHANNEL_IS_MEMBER:H=>xe({id:Q.Q.FILTER_CHANNEL_IS_MEMBER,value:(0,_.b)(H.lastTokenChannelOrNull)}),FILTER_CHANNEL_IS_STARRED:H=>xe({id:Q.Q.FILTER_CHANNEL_IS_STARRED,value:H.lastTokenChannelIsStarred}),FILTER_CHANNEL_IS_UNREAD:H=>xe({id:Q.Q.FILTER_CHANNEL_IS_UNREAD,value:(0,o.KJ)(H.lastTokenChannelOrNull)}),FILTER_CHANNEL_READ_AGE_DECAY_7D:(H,me)=>{let{now:Fe}=me;return xe({id:Q.Q.FILTER_CHANNEL_READ_AGE_DECAY_7D,value:ue(Fe,H.lastTokenChannelLastRead,7*re)})},FILTER_CHANNEL_READ_AGE_DECAY_2H:(H,me)=>{let{now:Fe}=me;return xe({id:Q.Q.FILTER_CHANNEL_READ_AGE_DECAY_2H,value:ue(Fe,H.lastTokenChannelLastRead,2*Z)})},FILTER_CHANNEL_PRIORITY:H=>xe({id:Q.Q.FILTER_CHANNEL_PRIORITY,value:H==null?void 0:H.priority}),CHANNEL_IS_FROZEN:(H,me)=>{let{itemIsChannel:Fe}=me;return xe({id:Q.Q.CHANNEL_IS_FROZEN,value:Fe&&(0,Ae.Zz)(H.item)})},USER_DM_IS_FROZEN:(H,me)=>{let{itemIsMember:Fe}=me;return xe({id:Q.Q.USER_DM_IS_FROZEN,value:Fe&&H.im&&(0,Ae.Zz)(H.im)})},CHANNEL_HAS_DRAFT:H=>xe({id:Q.Q.CHANNEL_HAS_DRAFT,value:H.hasDraft}),USER_DM_HAS_DRAFT:H=>xe({id:Q.Q.USER_DM_HAS_DRAFT,value:H.imHasDraft}),EMOJI_QUERY_LENGTH_RATIO:H=>xe({id:Q.Q.EMOJI_QUERY_LENGTH_RATIO,value:H.emojiQueryLengthRatio}),EMOJI_TOTAL_COMBO_BREAKS:H=>xe({id:Q.Q.EMOJI_TOTAL_COMBO_BREAKS,value:H.emojiTotalComboBreaks}),EMOJI_COMBO_BREAK_0:H=>xe({id:Q.Q.EMOJI_COMBO_BREAK_0,value:H.emojiTotalComboBreaks===0}),EMOJI_COMBO_BREAK_1:H=>xe({id:Q.Q.EMOJI_COMBO_BREAK_1,value:H.emojiTotalComboBreaks===1}),EMOJI_COMBO_BREAK_2:H=>xe({id:Q.Q.EMOJI_COMBO_BREAK_2,value:H.emojiTotalComboBreaks===2}),EMOJI_COMBO_BREAK_3:H=>xe({id:Q.Q.EMOJI_COMBO_BREAK_3,value:H.emojiTotalComboBreaks===3}),TYPE_APP_ACTION:H=>xe({id:Q.Q.TYPE_APP_ACTION,value:H.suggestionType===N.fd.APP_ACTION}),OS_APP_ACTION:(H,me)=>{let{source:Fe}=me;return xe({id:Q.Q.OS_APP_ACTION,value:(Fe==null?void 0:Fe.startsWith("omniswitcher"))&&H.suggestionType===N.fd.APP_ACTION})},TYPE_APP:H=>xe({id:Q.Q.TYPE_APP,value:H.suggestionType===N.fd.APP}),TYPE_SLASH_COMMAND:H=>xe({id:Q.Q.TYPE_SLASH_COMMAND,value:H.suggestionType===N.fd.SLASH_COMMAND}),TYPE_GLOBAL_ACTION:H=>xe({id:Q.Q.TYPE_GLOBAL_ACTION,value:H.suggestionType===N.fd.GLOBAL_ACTION}),IS_INVITE_WORKSPACE:H=>xe({id:Q.Q.IS_INVITE_WORKSPACE,value:H.id==="slack-invite-to-workspace"}),TYPE_CHANNEL_ACTION:H=>xe({id:Q.Q.TYPE_CHANNEL_ACTION,value:H.suggestionType===N.fd.CHANNEL_ACTION}),TYPE_WORKFLOW_TRIGGER:H=>xe({id:Q.Q.TYPE_WORKFLOW_TRIGGER,value:H.suggestionType===N.fd.WORKFLOW_TRIGGER}),TYPE_NAVIGATION_MESSAGE:H=>xe({id:Q.Q.TYPE_NAVIGATION_MESSAGE,value:H.suggestionType===N.fd.MESSAGE_NAVIGATION}),TYPE_EMOJI:H=>xe({id:Q.Q.TYPE_EMOJI,value:H.suggestionType===N.fd.EMOJI}),HAS_CHANNEL_ASSOCIATION:H=>xe({id:Q.Q.HAS_CHANNEL_ASSOCIATION,value:H.associatedWithCurrentChannel}),MEMBER_OF_CURRENT_CHANNEL:H=>xe({id:Q.Q.MEMBER_OF_CURRENT_CHANNEL,value:H.isMemberOfCurrentChannel}),QUERY_LENGTH_DECAY_NORMAL_MATCH_CHANNEL:H=>Nt({id:Q.Q.QUERY_LENGTH_DECAY_NORMAL_MATCH_CHANNEL,suggestion:H,extractionFunction:Ne,text:Wt(H,N.fd.CHANNEL_NAVIGATION)}),FRECENCY_HIT_VISIT_DECAY_2H:(H,me)=>{let{now:Fe}=me;return xe({id:Q.Q.FRECENCY_HIT_VISIT_DECAY_2H,value:ue(Fe,H.latestHitVisit,2*Z)||0})},FRECENCY_HIT_VISIT_DECAY_7D:(H,me)=>{let{now:Fe}=me;return xe({id:Q.Q.FRECENCY_HIT_VISIT_DECAY_7D,value:ue(Fe,H.latestHitVisit,7*re)||0})},FRECENCY_ITEM_VISIT_DECAY_2H:(H,me)=>{let{now:Fe}=me;return xe({id:Q.Q.FRECENCY_ITEM_VISIT_DECAY_2H,value:ue(Fe,H.latestItemVisit,2*Z)||0})},FRECENCY_ITEM_VISIT_DECAY_7D:(H,me)=>{let{now:Fe}=me;return xe({id:Q.Q.FRECENCY_ITEM_VISIT_DECAY_7D,value:ue(Fe,H.latestItemVisit,7*re)||0})},MPIM_MEMBERS:H=>xe({id:Q.Q.MPIM_MEMBERS,value:H.item.members.length}),MPIM_MEMBER_NAME_MATCHES:H=>xe({id:Q.Q.MPIM_MEMBER_NAME_MATCHES,value:H.scoreDetailsByMember&&Object.values(H.scoreDetailsByMember).filter(me=>((rn=me.score_details.real_name)!==null&&rn!==void 0?rn:-1/0)>=0||((Zt=me.score_details.display_name)!==null&&Zt!==void 0?Zt:-1/0)>=0).length}),MPIM_MEMBER_ALL_MATCHES:H=>xe({id:Q.Q.MPIM_MEMBER_ALL_MATCHES,value:H.scoreDetailsByMember&&Object.keys(H.scoreDetailsByMember).length}),MPIM_MATCHER_SCORE:H=>xe({id:Q.Q.MPIM_MATCHER_SCORE,value:H.score}),MPIM_MATCHER_SCORE_0:H=>xe({id:Q.Q.MPIM_MATCHER_SCORE_0,value:H.score===0}),MPIM_MATCHER_SCORE_1:H=>xe({id:Q.Q.MPIM_MATCHER_SCORE_1,value:H.score===1}),MPIM_MATCHER_SCORE_2:H=>xe({id:Q.Q.MPIM_MATCHER_SCORE_2,value:H.score===2}),MPIM_MATCHER_SCORE_3:H=>xe({id:Q.Q.MPIM_MATCHER_SCORE_3,value:H.score===3}),EMOJI_TEAM_CTR_90DD:H=>{var me;return xe({id:Q.Q.EMOJI_TEAM_CTR_90DD,value:(me=H.offlineFeatures)===null||me===void 0?void 0:me.team_ctr_90dd})},EMOJI_USER_CTR_30DD:H=>{var me;return xe({id:Q.Q.EMOJI_USER_CTR_30DD,value:(me=H.offlineFeatures)===null||me===void 0?void 0:me.user_ctr_30dd})},MPIM_TEAM_CTR_90DD:H=>{var me;return xe({id:Q.Q.MPIM_TEAM_CTR_90DD,value:(me=H.offlineFeatures)===null||me===void 0?void 0:me.team_ctr_90dd})},MPIM_USER_CTR_30DD:H=>{var me;return xe({id:Q.Q.MPIM_USER_CTR_30DD,value:(me=H.offlineFeatures)===null||me===void 0?void 0:me.user_ctr_30dd})},CHANNEL_TEAM_CTR_90DD:H=>{var me;return xe({id:Q.Q.CHANNEL_TEAM_CTR_90DD,value:(me=H.offlineFeatures)===null||me===void 0?void 0:me.team_ctr_90dd})},CHANNEL_USER_CTR_30DD:H=>{var me;return xe({id:Q.Q.CHANNEL_USER_CTR_30DD,value:(me=H.offlineFeatures)===null||me===void 0?void 0:me.user_ctr_30dd})},USER_ENTITY_TYPE_CTR_30DD:H=>xe({id:Q.Q.USER_ENTITY_TYPE_CTR_30DD,value:H.entityTypeCtr}),NUM_RESULTS:H=>xe({id:Q.Q.NUM_RESULTS,value:H.numResults}),QUERY_IS_SELF:H=>{var me;return xe({id:Q.Q.QUERY_IS_SELF,value:((me=H.scoreDetails)===null||me===void 0?void 0:me.self_score)===0})},CURRENT_USER_TEXTY:(H,me)=>{let{isCurrentUser:Fe,source:ut}=me;return xe({id:Q.Q.CURRENT_USER_TEXTY,value:ut==="texty-autocomplete"&&Fe})},FILE_AGE_DECAY_7D:(H,me)=>{let{now:Fe}=me;return xe({id:Q.Q.FILE_AGE_DECAY_7D,value:H.item&&ue(Fe,H.item.created,7*re)})},FILE_AGE_DECAY_28D:(H,me)=>{let{now:Fe}=me;return xe({id:Q.Q.FILE_AGE_DECAY_28D,value:H.item&&ue(Fe,H.item.created,28*re)})},FILE_AGE_DECAY_90D:(H,me)=>{let{now:Fe}=me;return xe({id:Q.Q.FILE_AGE_DECAY_90D,value:H.item&&ue(Fe,H.item.created,90*re)})},FILE_FROM_CURRENT_USER:H=>xe({id:Q.Q.FILE_FROM_CURRENT_USER,value:H.fromCurrentUser}),NAV_NORMAL_MATCH_CHANNEL_LOG_RESULTS:H=>Nt({id:Q.Q.NAV_NORMAL_MATCH_CHANNEL_LOG_RESULTS,suggestion:H,extractionFunction:kn,text:Wt(H,N.fd.CHANNEL_NAVIGATION),multiplier:dt(H.numResults)}),FILE_LOG_PUBLIC_SHARES:H=>{var me,Fe;return xe({id:Q.Q.FILE_LOG_PUBLIC_SHARES,value:((me=H.item)===null||me===void 0||(Fe=me.shares)===null||Fe===void 0?void 0:Fe.public)&&dt(Object.keys(H.item.shares.public).length)})},FILE_LOG_PRIVATE_SHARES:H=>{var me,Fe;return xe({id:Q.Q.FILE_LOG_PRIVATE_SHARES,value:((me=H.item)===null||me===void 0||(Fe=me.shares)===null||Fe===void 0?void 0:Fe.private)&&dt(Object.keys(H.item.shares.private).length)})},FILE_LOG_ACTIONS:H=>{var me;return xe({id:Q.Q.FILE_LOG_ACTIONS,value:((me=H.item)===null||me===void 0?void 0:me.actions)&&dt(H.item.actions.length)})},FILE_LATEST_ACTION_AGE_DECAY_2H:(H,me)=>{let{now:Fe}=me;return xe({id:Q.Q.FILE_LATEST_ACTION_AGE_DECAY_2H,value:ue(Fe,H.latestActionTs,2*Z)})},FILE_LATEST_ACTION_AGE_DECAY_7D:(H,me)=>{let{now:Fe}=me;return xe({id:Q.Q.FILE_LATEST_ACTION_AGE_DECAY_7D,value:ue(Fe,H.latestActionTs,7*re)})},FILE_LATEST_ACTION_AGE_DECAY_90D:(H,me)=>{let{now:Fe}=me;return xe({id:Q.Q.FILE_LATEST_ACTION_AGE_DECAY_90D,value:ue(Fe,H.latestActionTs,90*re)})},FILE_LATEST_SHARE_AGE_DECAY_2H:(H,me)=>{let{now:Fe}=me;return xe({id:Q.Q.FILE_LATEST_SHARE_AGE_DECAY_2H,value:ue(Fe,H.latestShareTs,2*Z)})},FILE_LATEST_SHARE_AGE_DECAY_7D:(H,me)=>{let{now:Fe}=me;return xe({id:Q.Q.FILE_LATEST_SHARE_AGE_DECAY_7D,value:ue(Fe,H.latestShareTs,7*re)})},FILE_LATEST_SHARE_AGE_DECAY_90D:(H,me)=>{let{now:Fe}=me;return xe({id:Q.Q.FILE_LATEST_SHARE_AGE_DECAY_90D,value:ue(Fe,H.latestShareTs,90*re)})},FILE_CHANNEL_CTR:H=>xe({id:Q.Q.FILE_CHANNEL_CTR,value:H.fileChannelCtr}),FILE_SUGGESTIONS_SEARCHER:H=>xe({id:Q.Q.FILE_SUGGESTIONS_SEARCHER,value:H.fileSuggestionsFromSearcher}),FILE_USER_CTR:H=>xe({id:Q.Q.FILE_USER_CTR,value:H.fileUserCtr}),FILE_NAME_CONTAINS_QUERY_NORMALIZED:H=>Nt({id:Q.Q.FILE_NAME_CONTAINS_QUERY_NORMALIZED,suggestion:H,extractionFunction:bt,text:Wt(H,N.fd.FILE_NAVIGATION)}),FILE_IS_CANVAS:H=>xe({id:Q.Q.FILE_IS_CANVAS,value:ln(H,"quip")}),FILE_HAS_DMS_WITH_CREATOR:H=>xe({id:Q.Q.FILE_HAS_DMS_WITH_CREATOR,value:H.hasNonNullDmsWithCreator}),FILE_HAS_DMS_WITH_CREATOR_V2:H=>xe({id:Q.Q.FILE_HAS_DMS_WITH_CREATOR_V2,value:H.hasNonNullLocalOrRemoteDmsWithCreator}),FILE_LATEST_VIEW_BY_USER_OLDER_90D:(H,me)=>{let{now:Fe}=me;return xe({id:Q.Q.FILE_LATEST_VIEW_BY_USER_OLDER_90D,value:Xe(Fe,parseFloat((Ht=H.lastReadTs)!==null&&Ht!==void 0?Ht:"")/1e3,90*re)})},APP_NAME_PREFIX_MATCH:H=>{var me;return Nt({id:Q.Q.APP_NAME_PREFIX_MATCH,suggestion:H,extractionFunction:Pn,text:(me=H.item)===null||me===void 0?void 0:me.appName})},BEST_NAME_MATCH_LOG_RESULTS:H=>xe({id:Q.Q.BEST_NAME_MATCH_LOG_RESULTS,value:H.bestNameIsExactMatch&&dt(H.numResults)}),SLASH_COMMAND_USER_CTR:H=>{var me;return xe({id:Q.Q.SLASH_COMMAND_USER_CTR,value:(me=H.offlineFeatures)===null||me===void 0?void 0:me.user_ctr_30dd})},WORKFLOW_TRIGGER_USER_CTR:H=>{var me;return xe({id:Q.Q.WORKFLOW_TRIGGER_USER_CTR,value:(me=H.offlineFeatures)===null||me===void 0?void 0:me.user_ctr_30dd})},GLOBAL_ACTION_USER_CTR:H=>{var me;return xe({id:Q.Q.GLOBAL_ACTION_USER_CTR,value:(me=H.offlineFeatures)===null||me===void 0?void 0:me.user_ctr_30dd})},CHANNEL_ACTION_USER_CTR:H=>{var me;return xe({id:Q.Q.CHANNEL_ACTION_USER_CTR,value:(me=H.offlineFeatures)===null||me===void 0?void 0:me.user_ctr_30dd})},APP_ACTION_USER_CTR:H=>{var me;return xe({id:Q.Q.APP_ACTION_USER_CTR,value:(me=H.offlineFeatures)===null||me===void 0?void 0:me.user_ctr_30dd})},SLASH_COMMAND_TEAM_CTR:H=>{var me;return xe({id:Q.Q.SLASH_COMMAND_TEAM_CTR,value:(me=H.offlineFeatures)===null||me===void 0?void 0:me.team_ctr_90dd})},WORKFLOW_TRIGGER_TEAM_CTR:H=>{var me;return xe({id:Q.Q.WORKFLOW_TRIGGER_TEAM_CTR,value:(me=H.offlineFeatures)===null||me===void 0?void 0:me.team_ctr_90dd})},GLOBAL_ACTION_TEAM_CTR:H=>{var me;return xe({id:Q.Q.GLOBAL_ACTION_TEAM_CTR,value:(me=H.offlineFeatures)===null||me===void 0?void 0:me.team_ctr_90dd})},CHANNEL_ACTION_TEAM_CTR:H=>{var me;return xe({id:Q.Q.CHANNEL_ACTION_TEAM_CTR,value:(me=H.offlineFeatures)===null||me===void 0?void 0:me.team_ctr_90dd})},APP_ACTION_TEAM_CTR:H=>{var me;return xe({id:Q.Q.APP_ACTION_TEAM_CTR,value:(me=H.offlineFeatures)===null||me===void 0?void 0:me.team_ctr_90dd})},SHORTCUT_ENTITY_TYPE_CTR:H=>xe({id:Q.Q.SHORTCUT_ENTITY_TYPE_CTR,value:H.entityTypeCtr}),EXACT_MATCH_LOG_RESULTS:H=>xe({id:Q.Q.EXACT_MATCH_LOG_RESULTS,value:(H.isExactMatch?1:0)*dt(H.numResults)}),HISTORY_AGE_DECAY_2H:(H,me)=>{let{now:Fe}=me;return xe({id:Q.Q.HISTORY_AGE_DECAY_2H,value:ue(Fe,H.historyTs,2*Z)})},HISTORY_AGE_DECAY_7D:(H,me)=>{let{now:Fe}=me;return xe({id:Q.Q.HISTORY_AGE_DECAY_7D,value:ue(Fe,H.historyTs,7*re)})},HISTORY_POSITION:H=>xe({id:Q.Q.HISTORY_POSITION,value:H.historyPosition})};class Qt{serialize(){const me=new de;this.featureList.forEach(ut=>Rt({feature:ut,serializer:me}));const Fe=me.serialize();return`${this.featuresVersion}:${Fe}`}valueForFeature(me){let Fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(me==null)return B().error(`Invalid feature id: ${me}`),null;const ut=this.featureList.find(An=>An.id===me);if(!(0,X.A)(ut))return Fe?yt(ut)||"":ct(ut)||0}static fromSuggestion(me,Fe){const ut=Date.now()/1e3,An=!!(0,i.NB)(me.item),vn=!!((0,r.rW)(me.item)||(0,r.Zp)(me.item)),Hn=An&&(0,i.fy)(me.item),Kt={itemIsChannel:vn,itemIsMember:An,now:ut,isCurrentUser:Hn,source:Fe};return new this(sn(me,Fe).map(ts=>Bt[ts]&&Bt[ts](me,Kt)||null))}constructor(me){this.featureList=me,this.featuresVersion="v8"}}u(Qt,"SuggestionFeatureVector");function sn(H,me){return me==="slash-command-menu"?[...b.globalFeatures]:H.suggestionType===N.fd.USER_NAVIGATION?[...b.globalFeatures,...b.userFeatures]:H.suggestionType===N.fd.CHANNEL_NAVIGATION?[...b.globalFeatures,...b.channelFeatures]:H.suggestionType===N.fd.MPIM_NAVIGATION?[...b.globalFeatures,...b.mpimFeatures]:H.suggestionType===N.fd.VIEW_NAVIGATION?[...b.globalFeatures,...b.viewFeatures]:H.suggestionType===N.fd.FILE_NAVIGATION?[...b.globalFeatures,...b.fileFeatures,...b.queryFeatures]:H.suggestionType===N.fd.LINK_NAVIGATION?[...b.globalFeatures,...b.linkFeatures]:H.suggestionType===N.fd.MODAL_NAVIGATION?[...b.globalFeatures,...b.modalFeatures]:H.suggestionType===N.fd.TEAM_NAVIGATION?[...b.globalFeatures,...b.teamFeatures]:H.type==="emoji"?[...b.globalFeatures,...b.emojiFeatures]:H.type==="broadcastKeyword"?[...b.globalFeatures,...b.broadcastKeywordFeatures]:H.suggestionType===N.fd.QUERY||H.suggestionType===N.fd.QUERY_USER?[...b.globalFeatures,...b.queryFeatures]:H.suggestionType===N.fd.APP_ACTION?[...b.globalFeatures,...b.shortcutFeatures,...b.appActionFeatures]:H.suggestionType===N.fd.SLASH_COMMAND?[...b.globalFeatures,...b.shortcutFeatures,...b.slashCommandFeatures]:H.suggestionType===N.fd.GLOBAL_ACTION?[...b.globalFeatures,...b.shortcutFeatures,...b.globalActionFeatures]:H.suggestionType===N.fd.CHANNEL_ACTION?[...b.globalFeatures,...b.shortcutFeatures,...b.channelActionFeatures]:H.suggestionType===N.fd.WORKFLOW_TRIGGER?[...b.globalFeatures,...b.shortcutFeatures,...b.workflowTriggerFeatures]:H.suggestionType===N.fd.APP?[...b.globalFeatures,...b.appFeatures]:H.suggestionType===N.fd.MESSAGE_NAVIGATION?[...b.globalFeatures,...b.messageFeatures]:H.suggestionType===N.fd.QUERY_HISTORY?[...b.globalFeatures,...b.queryFeatures]:b.globalFeatures}u(sn,"getFeaturesForExtraction");class Mn{constructor({id:me,value:Fe}){me==null&&B().error(`Invalid feature id: ${me}`);const ut=j(me);ut||B().error(`Missing feature name for id: ${me}`),this.id=me,this.name=ut,this.valueOrNull=Fe}}u(Mn,"Feature");function ct(H){return typeof H.valueOrNull=="number"&&isFinite(H.valueOrNull)?H.valueOrNull:typeof H.valueOrNull=="boolean"&&H.valueOrNull?1:0}u(ct,"getNumericValueForFeature");function yt(H){return H.valueOrNull===null||H.valueOrNull===void 0?"":H.valueOrNull.toString()}u(yt,"getStringValueForFeature");function Rt(H){let{feature:me,serializer:Fe}=H;me.valueOrNull===null&&Fe.writeNullFeature(),typeof me.valueOrNull=="number"&&Fe.writeNumericalFeature(me.valueOrNull,me.id),typeof me.valueOrNull=="boolean"&&Fe.writeBinaryFeature(me.valueOrNull,me.id),typeof me.valueOrNull=="string"&&Fe.writeTextFeature(me.valueOrNull,me.id)}u(Rt,"serializeFeature");function xe(H){let{id:me,value:Fe}=H;const ut=(0,X.A)(Fe)?null:Fe;return new Mn({id:me,value:ut})}u(xe,"makeFeature");function Nt(H){let{id:me,suggestion:Fe,extractionFunction:ut,text:An=pt(Fe),multiplier:vn=1}=H;if(!An)return xe({id:me,value:null});const Hn=ut({text:An,query:Fe.query||"",normalizedQuery:Fe.normalizedQuery||""}),Kt=Hn===!0?1:Hn===!1?0:Hn;return xe({id:me,value:(Kt??0)*vn})}u(Nt,"makeTextFeature");function Ft(H){let me=null;return(H.suggestionType===N.fd.QUERY||H.suggestionType===N.fd.QUERY_USER||H.suggestionType===N.fd.CHANNEL_NAVIGATION||H.suggestionType===N.fd.MPIM_NAVIGATION||H.suggestionType===N.fd.USER_NAVIGATION||H.suggestionType===N.fd.TEAM_NAVIGATION||H.suggestionType===N.fd.VIEW_NAVIGATION||H.suggestionType===N.fd.FILE_NAVIGATION)&&(me=H.frecencyScore),me}u(Ft,"getFrecencyScoreForSuggestion");function qt(H){let me=null;return H.suggestionType===N.fd.QUERY&&H.lastSuggestionToken&&H.lastSuggestionToken.type===N.S6.API&&(me=H.lastSuggestionToken.querySuggestionScore),me}u(qt,"getQuerySuggestionScoreV2");function un(H){let me=null;return H.suggestionType===N.fd.FILE_NAVIGATION&&(me=H.rawScore),me}u(un,"getFileSuggestionScore");function tt(H){return H&&H.lastSuggestionToken?H.lastSuggestionToken.toString():""}u(tt,"getLastSuggestionTokenString");function pt(H){return Tn(H)?tt(H):H.suggestionType===N.fd.FILE_NAVIGATION?H.name:null}u(pt,"getTextOrNullFromQuerySuggestion");function Dt(H){return H.isNavigational||H.isAction||H.isApp?H.name:null}u(Dt,"getTextOrNullFromNavigationalSuggestion");function Wt(H,me){return H.suggestionType===me?H.name:null}u(Wt,"getTextOrNullFromSuggestionWithType");function zt(H){return H.suggestionType===N.fd.USER_NAVIGATION||(0,X.A)(H.name)?null:H.name}u(zt,"getTextOrNullFromSuggestionNotUser");function ln(H,me){return H.suggestionType!==N.fd.FILE_NAVIGATION?!1:H.fileType===me}u(ln,"isFileTypeMatch");function Tn(H){return H.lastSuggestionToken?H.lastSuggestionToken.type===N.S6.STRING||H.lastSuggestionToken.type===N.S6.PHRASE||H.lastSuggestionToken.type===N.S6.API:!1}u(Tn,"isActiveTokenStringLike");function cn(H){return H.lastTokenMemberOrNull&&H.lastTokenMemberOrNull.profile&&H.lastTokenMemberOrNull.profile.first_name}u(cn,"getLastTokenUserFirstName");function hn(H){return H.lastTokenMemberOrNull&&H.lastTokenMemberOrNull.profile&&H.lastTokenMemberOrNull.profile.last_name}u(hn,"getLastTokenUserLastName");function Cn(H){return H.lastTokenMemberName||H.lastTokenChannelName||null}u(Cn,"lastTokenName");function _n(H){return H?H.im&&H.lastReadImTs?H.lastReadImTs:H.remoteImMetadata&&H.lastReadRemoteImMetadataTs?(H.lastReadRemoteImMetadataTs/1e6).toString():null:null}u(_n,"lastReadFromLocalClientElseCachedRemote");function Vn(H){let{text:me,query:Fe}=H;return me===Fe}u(Vn,"isExactMatch");function Wn(H){let{text:me,query:Fe}=H;return!!(Fe&&me&&(0,te.A)(me,Fe))}u(Wn,"isPrefixMatch");function kn(H){let{text:me,normalizedQuery:Fe}=H;return(0,R.B)(me).replace(/^[@#]/g,"")===Fe}u(kn,"isNormalizedExactMatch");function Pn(H){let{text:me,normalizedQuery:Fe}=H;const ut=(0,R.B)(me).replace(/^[@#]/g,"");return!!(ut&&Fe&&(0,te.A)(ut,Fe))}u(Pn,"isNormalizedPrefixMatch");function $t(H){let{text:me,query:Fe}=H;return(0,le.A)(me).length+((0,ve.A)(me," ")?1:0)===(0,le.A)(Fe).length}u($t,"stringSameNumberWordsValueFromSuggestion");function $n(H){let{text:me,query:Fe}=H;return Math.max(0,me.length-Fe.length)}u($n,"excessStringLengthValueFromSuggestion");function De(H){let{text:me,query:Fe}=H;return me.length>0?Fe.length/me.length:0}u(De,"queryRatioLengthValueFromSuggestion");function Ne(H){let{text:me,normalizedQuery:Fe}=H;return kn({text:me,normalizedQuery:Fe})&&Fe.length>1?2**-Fe.length:null}u(Ne,"queryLengthDecayNormalMatch");function Me(H){let{normalizedQuery:me}=H;return me.length}u(Me,"queryLength");function Be(H){let{text:me}=H;return me.length}u(Be,"suggestionTextLength");function ue(H,me,Fe){if(me){var ut;return Math.min(1,Math.exp(Math.log(.5)/Fe*((ut=ke(H,me))!==null&&ut!==void 0?ut:0)))}return 0}u(ue,"expAgeDecay");function ke(H,me){return me?Math.max(0,H-me):null}u(ke,"age");function Xe(H,me,Fe){if(!me)return!0;const ut=ke(H,me);return!ut||ut>Fe}u(Xe,"ageLatestOlderOrMissing");function dt(H){return H>0?Math.log1p(H):0}u(dt,"log1pSafe");function bt(H){let{text:me,normalizedQuery:Fe}=H;const ut=(0,R.B)(me).replace(/^[@#]/g,"");return ut&&Fe&&ut.includes(Fe)}u(bt,"stringContainsQueryNormalized");class be{score(me){let Fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ut=0;const An=me.featureList.length;for(let vn=0;vn<An;vn++)ut+=this._weightForFeature(me.featureList[vn],Fe.source||null)*(ct(me.featureList[vn])||0);return ut}explain(me){let Fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const ut=Fe.source||null,An=me.featureList.map(Kt=>({id:Kt.id,name:Kt.name,value:Kt.valueOrNull,weight:this._weightForFeature(Kt,ut),globalWeight:this._globalWeightForFeature(Kt),score:this._weightForFeature(Kt,ut)*ct(Kt)})),vn=An.filter(Kt=>Kt.score).sort((Kt,ts)=>ts.score-Kt.score),Hn=An.filter(Kt=>Kt.value&&!Kt.score&&Kt.name!=="ID");return{score:this.score(me,Fe),features:[...vn,...Hn],remoteModel:this.isRemote}}_globalWeightForFeature(me){return this.weights[me.name]||0}_weightForFeature(me){let Fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,ut=0;me.name==="USER_IS_EXTERNAL"&&(ut=-1);const An=this.weights[me.name]||0,Hn=Fe&&(Fe==="composer_page__destination"||Fe.startsWith("share"))?"WRITE":"READ",Kt=this.weights[`${Hn}_${me.name}`]||0;return An+Kt+ut}constructor(me,Fe=!1){this.isRemote=Fe,this.weights=me}}u(be,"LinearModel");class U extends M.F{fetchData(){return(0,D.dispatchForTeamId)(this.teamId,(0,O.ej)({reason:"AutocompleteModelCache"})).catch(me=>({model:null,omniswitcherModel:null,exception:me})).then(me=>{const Fe={model:null,omniswitcherModel:null};if(me.model){const ut=(0,J.A)(Object.entries(me.model).map(An=>{let[vn,Hn]=An;return[vn.toUpperCase(),Hn]}));Fe.model=new be(ut,!0)}else return null;if(me.omniswitcher_model){const ut=(0,J.A)(Object.entries(me.omniswitcher_model).map(An=>{let[vn,Hn]=An;return[vn.toUpperCase(),Hn]}));Fe.omniswitcherModel=new be(ut,!0)}else Fe.omniswitcherModel=Fe.model;return Fe})}constructor(me){super(),this.teamId=me}}u(U,"AutocompleteModelCache");let V=null;function ne(H){return V||(V=new U(H)),V}u(ne,"getAutocompleteModelCache");var ie=e(1917953477),Ue=e(220244708);const Qe=new be({ACTIVE_TOKEN_FILTER_AFTER:-1.3342286966503,ACTIVE_TOKEN_FILTER_BEFORE:-1.5840743442206,ACTIVE_TOKEN_FILTER_DURING:-1.5067377681356,ACTIVE_TOKEN_FILTER_FROM:-.32097975590927,ACTIVE_TOKEN_FILTER_HAS:.12307720392367,ACTIVE_TOKEN_FILTER_IN:-.20437151727999,ACTIVE_TOKEN_FILTER_ON:-.2331890332635,ACTIVE_TOKEN_FILTER_TO:-.39179992363572,ACTIVE_TOKEN_FILTER_WITH:-2.6491467875516,ACTIVE_TOKEN_MEMBER:3.3152339724625,ACTIVE_TOKEN_PHRASE:1.6227243782418,ACTIVE_TOKEN_STRING:1.2377431959723,APP_NAME_PREFIX_MATCH:.41310546603391,CHANNEL_ACTION_TEAM_CTR:5.3683432201332,CHANNEL_ACTION_USER_CTR:-3.0316210543763,CHANNEL_IS_ARCHIVED:-.87858649301233,CHANNEL_IS_MEMBER:.77730174627333,CHANNEL_IS_OTHER_TEAM:-.61919041941926,CHANNEL_IS_STARRED:.42983549335324,CHANNEL_IS_UNREAD:.32493583671244,CHANNEL_READ_AGE_DECAY_7D:1.7862684517169,CURRENT_USER_TEXTY:-2.0962311707595,EMOJI_COMBO_BREAK_0:.034181103626295,EMOJI_COMBO_BREAK_1:-1.5404314842404,EMOJI_COMBO_BREAK_2:-2.2796470967609,EMOJI_EXACT_MATCH:.183283071987,EMOJI_QUERY_LENGTH_RATIO:1.0690358111219,EMOJI_USER_CTR_30DD:5.1931307714537,FILE_AGE_DECAY_7D:.094311459141267,FILE_AGE_DECAY_90D:-.068414601197763,FILE_FROM_CURRENT_USER:-.053638049001005,FILE_HAS_DMS_WITH_CREATOR:-.0061128361931085,FILE_IS_CANVAS:.3,FILE_LATEST_ACTION_AGE_DECAY_90D:.22470956185502,FILE_LATEST_VIEW_BY_USER_OLDER_90D:-1.5,FILE_LOG_ACTIONS:.31755825349717,FILE_LOG_PRIVATE_SHARES:.63647050316634,FILE_LOG_PUBLIC_SHARES:-.4105759438314,FILE_NAME_CONTAINS_QUERY_NORMALIZED:1,FILTER_USER_DM_READ_AGE_DECAY_2H:-.39943623618561,FILTER_USER_DM_READ_AGE_DECAY_7D:.8400841724556,FILTER_USER_IS_ACTIVE:.42798763518113,FILTER_USER_PRIORITY:.71416734958181,FRECENCY_BONUS:.0083562726103486,FRECENCY_LOG_HIT_COUNT_SCALED:1.0221320483578,FRECENCY_LOG_ITEM_COUNT_SCALED:.93494415431914,FRECENCY_WEIGHT_HIT_VISITS:.010783602348951,FRECENCY_WEIGHT_ITEM_VISITS:.019341183576389,FUZZY_SCORE_50:.95744512772969,FUZZY_SCORE_ALL:-2.1179514334905,GLOBAL_ACTION_USER_CTR:6.0311738732755,HERE_KEYWORD_EXACT_MATCH:2.8669041266612,HISTORY_AGE_DECAY_7D:.66414153833523,IS_BROADCAST_KEYWORD:3.4759283393419,MEMBER_OF_CURRENT_CHANNEL:3.3022467998568,MPIM_MATCHER_SCORE_0:-.02289922354073,MPIM_MATCHER_SCORE_1:-1.2162030026989,MPIM_MATCHER_SCORE_2:-2.3109629676003,MPIM_MATCHER_SCORE_3:-2.545746172366,MPIM_MEMBER_ALL_MATCHES:.040175375087294,MPIM_MEMBER_NAME_MATCHES:.071667207602181,MPIM_READ_AGE_DECAY_7D:2.0911081748312,MPIM_USER_CTR_30DD:10.134770283044,MPIM_WITH_DEACTIVATED_USER:-1.1657978882602,NAV_NORMAL_MATCH_CHANNEL_LOG_RESULTS:.49306597435127,NAV_NORMAL_MATCH_USER:.83230837935037,NAV_NORMAL_PREFIX_MATCH_NO_USER:.4852904832645,NAV_NORMAL_PREFIX_MATCH_USER:-.12081821144909,ONLY_MATCHES_PREVIOUS_NAME:-1.248003231081,OS_APP_ACTION:-1.381807580371,QUERY_FRECENCY_BONUS:.011725693517502,QUERY_FRECENCY_RAW:.0071433931825349,QUERY_FRECENCY_WEIGHT_HIT_VISITS:.0047962209104509,QUERY_TOKEN_NORMAL_PREFIX_MATCH:.38593901851901,SLASH_COMMAND_USER_CTR:3.2204170381454,STRING_EXACT_PREFIX_MATCH:-.53245135333594,STRING_NORMAL_PREFIX_MATCH:-.4692069451129,TYPE_APP:-2.0995766663586,TYPE_APP_ACTION:-.15299090921826,TYPE_CHANNEL_ACTION:-.97398280475431,TYPE_GLOBAL_ACTION:.24313716972704,TYPE_NAVIGATION_CHANNEL:-.99949500941624,TYPE_NAVIGATION_FILE:-.60870055140391,TYPE_NAVIGATION_MODAL:-1.2540608783032,TYPE_NAVIGATION_MPIM:-.13640397661212,TYPE_NAVIGATION_TEAM:-.74505579518249,TYPE_NAVIGATION_USER:.19845685040217,TYPE_NAVIGATION_VIEW:-.06828592658814,TYPE_QUERY:-.34666651828357,TYPE_QUERY_HISTORY:-.89886675989568,TYPE_SLASH_COMMAND:-.18074491193454,TYPE_USER_QUERY:1.2730815188112,TYPE_WORKFLOW_TRIGGER:-1.2028127578536,USER_DM_EMPTY_V2:1.4226370781581,USER_DM_LATEST_MSG_AGE_DECAY_7D_V2:.40074999941377,USER_DM_LATEST_OLDER_90D_V2:-1.2419114598606,USER_EMAIL_ONLY_MATCH:-1.2756812486684,USER_ENTITY_TYPE_CTR_30DD:3.7407446891213,USER_FIRST_NAME_NORMAL_MATCH:.36402719522123,USER_IS_ACTIVE:.58279556397075,USER_IS_BOT:-.76450720727465,USER_IS_EXTERNAL:.27225738168756,USER_LAST_NAME_NORMAL_MATCH:.19972040917946,USER_MPIM_READ_AGE_DECAY_7D:.56565249217787,USER_PRIORITY:.29699660378898,USER_SAME_TEAM:.17696933968657}),je=new be({FRECENCY_LOG_ITEM_COUNT:1}),ht=new be({FRECENCY:1}),ot=new be({APP_NAME_PREFIX_MATCH:.3,TYPE_SLASH_COMMAND:-1.6,TYPE_GLOBAL_ACTION:1,TYPE_CHANNEL_ACTION:2,TYPE_WORKFLOW_TRIGGER:1,TYPE_APP_ACTION:0,TYPE_APP:-1,IS_INVITE_WORKSPACE:-2,BEST_NAME_MATCH_LOG_RESULTS:.3,FRECENCY_BONUS:.0045945271239138,FRECENCY_LOG_HIT_COUNT:.032078623014737,FRECENCY_LOG_HIT_COUNT_SCALED:.45581873094776,FRECENCY_LOG_ITEM_COUNT:.052896301981039,FRECENCY_LOG_ITEM_COUNT_SCALED:.49730870089138,FRECENCY_WEIGHT_HIT_VISITS:.0071810620916759,FRECENCY_WEIGHT_ITEM_VISITS:.011716715132603,FUZZY_SCORE_25:-.2832109013491,FUZZY_SCORE_50:.25841493146403,FUZZY_SCORE_ALL:-1.5527553376163,NAV_NORMAL_PREFIX_MATCH_NO_USER:.38239541164536,RAW_FRECENCY:-.0027578100310599,READ_FRECENCY_BONUS:.0040115607674155,READ_FRECENCY_LOG_HIT_COUNT:.038436899804508,READ_FRECENCY_LOG_HIT_COUNT_SCALED:.45560596775616,READ_FRECENCY_LOG_ITEM_COUNT:.05525020998482,READ_FRECENCY_LOG_ITEM_COUNT_SCALED:.50026628273703,READ_FRECENCY_WEIGHT_HIT_VISITS:.0073619177800187,READ_FRECENCY_WEIGHT_ITEM_VISITS:.012099980951325,READ_FUZZY_SCORE_25:-.2503777797125,READ_FUZZY_SCORE_50:.24335243348473,READ_FUZZY_SCORE_ALL:-1.5175861934325,READ_NAV_NORMAL_PREFIX_MATCH_NO_USER:.40022884927117,READ_RAW_FRECENCY:-.0031687787672375}),gt=new be({APP_NAME_PREFIX_MATCH:.3,TYPE_SLASH_COMMAND:-1.6,TYPE_GLOBAL_ACTION:1,TYPE_CHANNEL_ACTION:2,TYPE_APP_ACTION:0,TYPE_APP:-1,IS_INVITE_WORKSPACE:-2,BEST_NAME_MATCH_LOG_RESULTS:.3,FRECENCY_LOG_HIT_COUNT_SCALED:4,FRECENCY_BONUS:.0045945271239138,FRECENCY_LOG_HIT_COUNT:.032078623014737,FRECENCY_LOG_ITEM_COUNT:.052896301981039,FRECENCY_LOG_ITEM_COUNT_SCALED:.49730870089138,FRECENCY_WEIGHT_HIT_VISITS:.0071810620916759,FRECENCY_WEIGHT_ITEM_VISITS:.011716715132603,FUZZY_SCORE_25:-.2832109013491,FUZZY_SCORE_50:.25841493146403,FUZZY_SCORE_ALL:-1.5527553376163,NAV_NORMAL_PREFIX_MATCH_NO_USER:.38239541164536,RAW_FRECENCY:-.0027578100310599,READ_FRECENCY_BONUS:.0040115607674155,READ_FRECENCY_LOG_HIT_COUNT:.038436899804508,READ_FRECENCY_LOG_HIT_COUNT_SCALED:.45560596775616,READ_FRECENCY_LOG_ITEM_COUNT:.05525020998482,READ_FRECENCY_LOG_ITEM_COUNT_SCALED:.50026628273703,READ_FRECENCY_WEIGHT_HIT_VISITS:.0073619177800187,READ_FRECENCY_WEIGHT_ITEM_VISITS:.012099980951325,READ_FUZZY_SCORE_25:-.2503777797125,READ_FUZZY_SCORE_50:.24335243348473,READ_FUZZY_SCORE_ALL:-1.5175861934325,READ_NAV_NORMAL_PREFIX_MATCH_NO_USER:.40022884927117,READ_RAW_FRECENCY:-.0031687787672375}),wt=new be({ACTIVE_TOKEN_QUERY_SUGGESTION:1,BM25_SCORE:1,CHANNEL_IS_MEMBER:0,EXCESS_STRING_LENGTH:1,FRECENCY:.01,MPIM_IS_STARRED:0,NAV_EXACT_MATCH:0,NAV_EXACT_PREFIX_MATCH:0,NAV_EXCESS_STRING_LENGTH:2.5,NAV_NORMAL_MATCH:0,QUERY_SUGGESTION_SCORE_V2:3,STRING_EXACT_PREFIX_MATCH:1,STRING_NORMAL_PREFIX_MATCH:1,TYPE_NAVIGATION_CHANNEL:4,TYPE_NAVIGATION_EXPERT_CHANNEL:2,TYPE_NAVIGATION_MPIM:7,TYPE_NAVIGATION_USER:4,TYPE_QUERY:1,HERE_KEYWORD_EXACT_MATCH:5}),Dn=new be({FRECENCY:.01,TYPE_NAVIGATION_USER:4,TYPE_NAVIGATION_CHANNEL:4,QUERY_SUGGESTION_SCORE_V2:3,TYPE_NAVIGATION_EXPERT_CHANNEL:2,TYPE_NAVIGATION_MPIM:7}),Sn={testing:wt,testing_2:Dn,frecency:ht,autocompleteFallback:Qe,shortcuts1:ot,shortcuts3:gt,emojiFrequentlyUsed:je};var Bn=e(5795074931),pn=e(5267557974),yn=e(9101533895),jn=e(4761125736),Zn=e(8719147933),Es=e(8276911661),Us=e(6562711329);const bs=new I.Ay("search"),Ss="autocompleteFallback";let rs=u(class{sort(me,Fe){var ut;const An=(0,y.Cy)({state:me});An.mark("sorter-sort-mark");const vn=this.prepSuggestions(me,Fe);this.extractFeatures(me,vn);const Hn=this.scoreItems(me,vn),Kt=((ut=this.options)===null||ut===void 0?void 0:ut.dryRun)===!0?Hn:this.sortByScore(Hn);An.measureAndClear("sorter-sort-mark","sorter-sort");const ts=2,_s=this.boostExactMatches(Kt,ts);return this.forceMatches(_s)}boostExactMatches(me,Fe){const ut=me.slice(0,Fe),An=[],vn=[];for(let Hn=Fe;Hn<me.length;Hn++){const Kt=me[Hn];Kt.isExactMatch||Kt.bestNameIsExactMatch?An.push(Kt):vn.push(Kt)}return[...ut,...An,...vn]}forceMatches(me){var Fe,ut;return!((Fe=this.options)===null||Fe===void 0)&&Fe.selfFirst&&!(!((ut=me[0])===null||ut===void 0)&&ut.isSelf)?[...(0,t.A)(me,vn=>vn.isSelf),...me]:me}getModels(me,Fe){let ut=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const An={model:Sn[me],omniswitcherModel:Sn[me]};if(!ut&&Fe){const Hn=ne(Fe).getStaleWhileRevalidate(An);return Hn===null||Hn.model===null||Hn.model===void 0?An:Hn}return An}getHistoryChannels(me){if((0,jn._Z)(me,"sq_sorter_history")!=="treatment")return{};if(!(0,p.A)())return{};var Fe;const ut=[...(Fe=(0,Zn.t)((0,D.getStateForClientStore)()))!==null&&Fe!==void 0?Fe:[]];if(!ut)return{};for(let vn=0;vn<ut.length;vn++)ut[vn].position=vn+1;const An={};return ut.filter(vn=>!(0,E.VA)()&&vn.teamId!==this.teamId||!vn.primaryView?!1:(0,g.A)(vn.primaryView)).forEach(vn=>{if(vn.primaryView&&!(vn.primaryView in An)){var Hn;An[vn.primaryView]={ts:vn.ts/1e3,position:(Hn=vn==null?void 0:vn.position)!==null&&Hn!==void 0?Hn:-1}}}),An}prepSuggestions(me,Fe){var ut,An,vn;const Hn=(0,R.B)((0,ie.O)(this.query));if(!((ut=this.options)===null||ut===void 0)&&ut.currentChannel&&Hn.length<=1&&!(0,r.yz)((An=this.options)===null||An===void 0?void 0:An.currentChannel)&&!(0,r.LI)((vn=this.options)===null||vn===void 0?void 0:vn.currentChannel)){const Ge=Fe.filter(It=>It.type==="member"||(0,i.NB)(It.item)).map(It=>(It.item||It).id);(0,D.dispatchForTeamId)(this.teamId,(0,Us.z)({channelId:this.options.currentChannel.id,userIds:Ge}))}let Kt=null;if((0,jn._Z)(me,"snd_autocomplete_features_cache")==="treatment"&&this.teamId){var ts;Kt=w({teamId:this.teamId,enterpriseId:(ts=this.enterpriseId)!==null&&ts!==void 0?ts:void 0}).getStaleWhileRevalidate()}const _s=Fe.length,ps=(0,Bn.WR)(me),Rs=(0,Es.cA)(me),gs=(0,v.dQ)(Rs),is=this.getHistoryChannels(me),Is={};return Fe.forEach(Ge=>{const It=Ge.item;(Ge.type==="mpim"||(0,r.yz)(Ge.item))&&((0,o.Ug)(It)||[]).forEach(st=>{if(st!==ps){const At=Is[st]||{itemCount:0,hitCount:0},St=(0,o._V)(me,It),Ot=St?parseFloat(St):void 0,xt=(0,pn.b)(me,It.id),tn=xt?parseFloat(xt):void 0;Ot&&(At.lastReadTs?At.lastReadTs=Math.max(At.lastReadTs,Ot):At.lastReadTs=Ot),tn&&(At.latestMsgTs?At.latestMsgTs=Math.max(At.latestMsgTs,tn):At.latestMsgTs=tn),At.hitCount+=(Ge==null?void 0:Ge.hitCount)||0,At.itemCount+=(Ge==null?void 0:Ge.itemCount)||0,Is[st]=At}})}),Fe.map(Ge=>{const It=Ge.item||Ge,Ve={...Ge,query:this.query,normalizedQuery:Hn,id:It.id,suggestionType:N.fd.UNKNOWN,numResults:_s};if(Ge.type==="member"||(0,i.NB)(Ge.item)){var st,At,St;const Ut=It.id&&(0,yn.Pu)(me,It.id),ns=It.id&&Kt&&Kt.getUserDmChannelMetadata(It.id);Ve.remoteImMetadata=ns,Ve.im=Ut,Ve.latestImTs=Ut&&(0,pn.b)(me,Ut.id),Ve.imHasDraft=Ut&&(0,o.yc)(me,Ut.id),Ve.imIsStarred=Ut&&(0,o.m2)(me,Ut),Ve.name=(0,m.Gt)(Ge.item),Ve.lastReadImTs=(0,o._V)(me,Ut),Ve.lastReadRemoteImMetadataTs=ns==null?void 0:ns.last_read_abs,(0,v.dQ)(Ge.item)===gs&&(Ve.sameTeam=!0);let Kn;if(!((st=this.options)===null||st===void 0)&&st.currentChannel&&(Kn=this.options.currentChannel),Kn)if((0,r.yz)(Kn)){var Ot,xt;Ve.isMemberOfCurrentChannel=(xt=Kn==null||(Ot=Kn.members)===null||Ot===void 0?void 0:Ot.includes(Ge.item.id))!==null&&xt!==void 0?xt:!1}else(0,r.LI)(Kn)||(Ve.isMemberOfCurrentChannel=(0,Ue.B)(me,It,Kn));Ve.priority=(0,o.dh)(me,Ut),Ve.suggestionType=N.fd.USER_NAVIGATION,Ve.isNavigational=!0,Ve.historyTs=Ut&&((At=is[Ut.id])===null||At===void 0?void 0:At.ts),Ve.historyPosition=Ut&&((St=is[Ut.id])===null||St===void 0?void 0:St.position);const Jn=Is[It.id];Jn&&(Ve.mpimFeatures=Jn)}else Ve.name=It.name||It.string;if(Ge.type==="channel"||(0,r.jq)(Ge.item)){var tn,En;Ve.suggestionType=N.fd.CHANNEL_NAVIGATION,Ve.isNavigational=!0,Ve.isChannelMember=(0,r.rW)(It)&&!(0,l.F)(It)&&(0,_.b)(It),Ve.hasDraft=(0,o.yc)(me,It.id),Ve.offlineFeatures=Kt&&Kt.getFeatures(Ge.item.id,"channel"),Ve.historyTs=(tn=is[It.id])===null||tn===void 0?void 0:tn.ts,Ve.historyPosition=(En=is[It.id])===null||En===void 0?void 0:En.position,Ve.latestTs=(0,pn.b)(me,It.id),Ve.lastReadTs=(0,o._V)(me,It),Ve.priority=(0,o.dh)(me,It),Ve.isStarred=(0,o.m2)(me,It)}if(Ge.type==="mpim"||(0,r.yz)(Ge.item)){var an,Vt;Ve.suggestionType=N.fd.MPIM_NAVIGATION,Ve.isNavigational=!0;const ns=((0,o.Ug)(It)||[]).map(ss=>(0,Es.nv)(me,ss));Ve.isMpimWithDeactivatedMember=(0,n.A)(ns,ss=>(0,i.oy)(ss)||(0,i.eJ)(ss)),Ve.isMpimWithOnlyInternalMembers=(0,s.A)(ns,ss=>!(0,h.g)(ss)),Ve.hasDraft=(0,o.yc)(me,It.id),Ve.name=(0,o.Oi)(me,Ge.item),Ve.offlineFeatures=Kt&&Kt.getFeatures(Ge.item.id,"mpim"),Ve.historyTs=(an=is[It.id])===null||an===void 0?void 0:an.ts,Ve.historyPosition=(Vt=is[It.id])===null||Vt===void 0?void 0:Vt.position,Ve.priority=(0,o.dh)(me,It),Ve.maxLastReadTsOfAllMembers=null,Ve.maxLatestMsgTsOfAllMembers=null;let Kn=0,Jn=0,zn=0,ds=0,mn=0;ns.forEach(ss=>{if(ss.id!==ps){const Xn=ss.id?(0,yn.Pu)(me,ss.id):void 0,Os=Xn&&(0,o._V)(me,Xn),Ls=ss.id&&Kt&&Kt.getUserDmChannelMetadata(ss.id),As=Ls&&Ls.last_read_abs/1e6,Ps=Xn||Ls,Ms=Os?parseFloat(Os):As;if(Ps){if(mn+=1,Ms){zn+=1;var fs;Ve.maxLastReadTsOfAllMembers=Math.max((fs=Ve.maxLastReadTsOfAllMembers)!==null&&fs!==void 0?fs:-1/0,Ms),Kn+=Ms}const xs=(0,pn.b)(me,Xn==null?void 0:Xn.id),rt=Xn&&xs?parseFloat(xs):void 0;if(rt){ds+=1;var ls;Ve.maxLatestMsgTsOfAllMembers=Math.max((ls=Ve.maxLatestMsgTsOfAllMembers)!==null&&ls!==void 0?ls:-1/0,rt),Jn+=rt}}}}),Ve.avgLastReadTsOfAllMembers=Kn===0?null:Kn/zn,Ve.avgLatestMsgTsOfAllMembers=Jn===0?null:Jn/ds,Ve.pctNonEmptyDmsForAllMembers=zn/(ns.length-1)*100,Ve.pctNonNullDmsForAllMembers=mn/(ns.length-1)*100}if(Ge.type==="team"&&(Ve.suggestionType=N.fd.TEAM_NAVIGATION,Ve.isNavigational=!0),Ge.type==="view"&&(Ve.suggestionType=N.fd.VIEW_NAVIGATION,Ve.isNavigational=!0),Ge.type==="appAction"&&(Ve.suggestionType=N.fd.APP_ACTION,Ve.isAction=!0,Ve.offlineFeatures=Kt&&Kt.getFeatures(Ge.item.id,"appAction")),Ge.type==="app"&&(Ve.suggestionType=N.fd.APP,Ve.isApp=!0),Ge.type==="emoji"&&(Ve.name=Ve.emojiBestNameMatch,Ve.suggestionType=N.fd.EMOJI,Ve.isNavigational=!0,Ve.offlineFeatures=Kt&&Kt.getFeatures(Ge.item.id,"emoji")),Ge.type==="slashCommand"){var dn;Ve.suggestionType=N.fd.SLASH_COMMAND,Ve.isApp=!0,Ve.name=(dn=Ve.name)===null||dn===void 0?void 0:dn.substring(1),Ve.firstWordOfRawQuery&&(Ve.query=Ve.firstWordOfRawQuery,Ve.normalizedQuery=Ve.firstWordOfRawQuery),Ve.offlineFeatures=Kt&&Kt.getFeatures(Ge.item.id,"slashCommand")}if(Ge.type==="globalAction"&&(Ve.suggestionType=N.fd.GLOBAL_ACTION,Ve.isApp=!0,Ve.offlineFeatures=Kt&&Kt.getFeatures(Ge.item.id,"globalAction")),Ge.type==="quipShortcutCommand"&&(Ve.suggestionType=N.fd.QUIP_SHORTCUT),Ge.type==="channelAction"&&(Ve.suggestionType=N.fd.CHANNEL_ACTION,Ve.isApp=!0,Ve.offlineFeatures=Kt&&Kt.getFeatures(Ge.item.id,"channelAction")),Ge.type==="workflowTrigger"&&(Ve.suggestionType=N.fd.WORKFLOW_TRIGGER,Ve.isApp=!0,Ve.offlineFeatures=Kt&&Kt.getFeatures(Ge.item.id,"workflowTrigger")),Ge.type==="file"){Ve.suggestionType=N.fd.FILE_NAVIGATION,Ve.isNavigational=!0,Ve.fileSuggestionsFromSearcher=!0;const Ut=Ve.item;Ve.id=Ut.id,Ve.fileId=Ut.id,Ve.logId=Ut.id,Ve.fileType=Ut.highlight_type||Ut.filetype,Ve.name=Ut.title,Ve.fileTypeDescription=Ut.is_external?(0,a.A)(Ut,me):Ut.pretty_type,Ve.fileTypeDescription==="Arugula"&&(Ve.fileTypeDescription=bs.t("Post")),Ve.fromCurrentUser=Ut.user===ps;const ns=Ut.user&&(0,yn.Pu)(me,Ut.user),Kn=Ut.user&&Kt&&Kt.getUserDmChannelMetadata(Ut.user);if(Ve.hasNonNullDmsWithCreator=ns!==null,Ve.hasNonNullLocalOrRemoteDmsWithCreator=ns!==null||Kn!==null,Ve.lastReadTs=Ut.last_read,Ut.shares){const zn=Ut.shares.public&&Math.max(...Object.values(Ut.shares.public).flatMap(mn=>mn.map(ss=>ss.ts?parseFloat(ss.ts):-1/0))),ds=Ut.shares.private&&Math.max(...Object.values(Ut.shares.private).flatMap(mn=>mn.map(ss=>ss.ts?parseFloat(ss.ts):-1/0)));zn&&ds?Ve.latestShareTs=zn>ds?zn:ds:Ve.latestShareTs=zn||ds}const Jn=d(Ut);if(Jn&&(Ve.latestActionTs=Jn),Kt){const zn=Ut.channels&&Array.isArray(Ut.channels)&&Ut.channels.length&&Math.max(...Ut.channels.map(mn=>Kt.getFeatures(mn,"channel").user_ctr_30dd)),ds=Ut.groups&&Array.isArray(Ut.groups)&&Ut.groups.length&&Math.max(...Ut.groups.map(mn=>Kt.getFeatures(mn,"mpim").user_ctr_30dd));zn>0&&ds>0?Ve.fileChannelCtr=Math.max(zn,ds):zn>0?Ve.fileChannelCtr=zn:ds>0&&(Ve.fileChannelCtr=ds),Ut.user?Ve.fileUserCtr=Kt.getFeatures(Ut.user,"member").user_ctr_30dd:Ve.fileUserCtr=Kt.getEntityCtr("member")}}if(Ge.type==="link"&&(Ve.suggestionType=N.fd.LINK_NAVIGATION,Ve.isNavigational=!0,Ve.name=Ge.item.title||Ge.item.url),Ge.type==="modal"&&(Ve.suggestionType=N.fd.MODAL_NAVIGATION,Ve.name=Ge.item.name),Ge.type==="queryHistory"&&(Ve.suggestionType=N.fd.QUERY_HISTORY,Ve.is_type_query_history=!0,Ve.id=(0,T.B)(Ge.id||Ge.name||Ge.string),Ve.logId=Ve.id,Ve.exact_string=Ge.string),Ge.type==="query"||Ge.type==="queryUser"||Ge.type==="queryHistory"){var Un,On,Fn;Ve.is_type_query_completion=!0,Ve.lastSuggestionToken=!Ve.suggestionTokenList||Ve.suggestionTokenList.length<1?null:Ve.suggestionTokenList[Ve.suggestionTokenList.length-1],Ve.frecencyScore=Ve.lastSuggestionToken&&Ve.lastSuggestionToken._frecencyScore,Ve.scoringContext=((Un=Ve.lastSuggestionToken)===null||Un===void 0?void 0:Un._scoringContext)||{},Ve.lastTokenMemberOrNull=null,Ve.lastTokenChannelOrNull=null;const Ut=Ve.lastSuggestionToken&&(Ve.lastSuggestionToken.type===N.S6.FILTER_FROM||Ve.lastSuggestionToken.type===N.S6.FILTER_TO||Ve.lastSuggestionToken.type===N.S6.FILTER_WITH),ns=Ve.lastSuggestionToken&&Ve.lastSuggestionToken.type===N.S6.FILTER_IN;if(!((On=Ve.lastSuggestionToken)===null||On===void 0)&&On._id&&(Ve.lastTokenMemberOrNull=Ut&&(0,Es.nv)(me,Ve.lastSuggestionToken._id),Ve.lastTokenChannelOrNull=ns&&((0,yn.OL)(me,Ve.lastSuggestionToken._id)||(0,yn.Pu)(me,Ve.lastSuggestionToken._id)),Ve.priority=Ve.lastTokenChannelOrNull?(0,o.dh)(me,Ve.lastTokenChannelOrNull):void 0),Ve.lastSuggestionToken&&Ve.lastSuggestionToken._name&&(Ve.lastTokenMemberOrNull||(Ve.lastTokenMemberOrNull=Ut&&(0,Es.H6)(me,Ve.lastSuggestionToken._name)),Ve.lastTokenChannelOrNull||(Ve.lastTokenChannelOrNull=ns&&(0,yn.Os)(me,Ve.lastSuggestionToken._name))),(0,c.GU)(Ve.lastTokenMemberOrNull)&&(Ve.lastTokenMemberOrNull=null),Ve.lastTokenMemberName=(0,m.Gt)(Ve.lastTokenMemberOrNull)||void 0,(0,c.GU)(Ve.lastTokenChannelOrNull))Ve.lastTokenChannelOrNull=null;else{const Jn=(0,o._V)(me,Ve.lastTokenChannelOrNull);Ve.lastTokenChannelLastRead=Jn?parseFloat(Jn):void 0,Ve.lastTokenChannelIsStarred=(0,o.m2)(me,Ve.lastTokenChannelOrNull)}Ve.lastTokenChannelName=(0,o.SB)(me,Ve.lastTokenChannelOrNull)||null,Ve.lastTokenIm=Ve.lastTokenMemberOrNull&&Ve.lastTokenMemberOrNull.id?(0,yn.Pu)(me,Ve.lastTokenMemberOrNull.id):void 0,Ve.lastTokenImLatest=(0,pn.b)(me,(Fn=Ve.lastTokenIm)===null||Fn===void 0?void 0:Fn.id);const Kn=(0,o._V)(me,Ve.lastTokenIm);Kn&&(Ve.lastTokenImLastRead=Kn?parseFloat(Kn):void 0),Ve.lastTokenIm&&(Ve.priority=(0,o.dh)(me,Ve.lastTokenIm)),Ve.lastTokenImIsStarred=(0,o.m2)(me,Ve.lastTokenIm)}if(Ge.type==="query"&&(Ve.suggestionType=N.fd.QUERY),Ge.type==="queryUser"&&(Ve.suggestionType=N.fd.QUERY_USER),Ge.type==="queryHistory"&&(Ve.suggestionType=N.fd.QUERY_HISTORY),Ge.type==="query"||Ge.type==="queryUser"||Ge.type==="queryHistory"){var xn;Ve.normalizedQuery=(0,R.B)((0,ie.O)(Ve.query)),Ve.logId=((xn=Ve.lastSuggestionToken)===null||xn===void 0?void 0:xn.logId)||"";var ms;Ve.name=((ms=Ve.suggestionTokenList)!==null&&ms!==void 0?ms:[]).map(Ut=>Ut.toString()).join(" ")}return Ge.type==="quickMessage"&&(Ve.isNavigational=!0,Ve.suggestionType=N.fd.MESSAGE_NAVIGATION),Ge.type==="salesforceRecord"&&(Ve.suggestionType=N.fd.SALESFORCE_RECORD),Ve.entityTypeCtr=Kt?Kt.getEntityCtr(Ge.type):void 0,Ve})}extractFeatures(me,Fe){Fe.forEach(ut=>{var An;const vn=K(ut,(An=this.options)===null||An===void 0?void 0:An.source);this.featureVectors[ut.id]=vn})}selectModelForScoring(){return this.model}scoreItems(me,Fe){var ut;const An={source:(ut=this.options)===null||ut===void 0?void 0:ut.source},vn=this.selectModelForScoring();return Fe.map(Hn=>{var Kt;const ts=this.featureVectors[Hn.id],_s=vn.score(ts,An);let ps;return!((Kt=this.options)===null||Kt===void 0)&&Kt.explain&&(ps=vn.explain(ts,An)),{...Hn,modelScore:_s,featureVectorRaw:ts,explain:ps}})}sortByScore(me){var Fe,ut;return me.sort((An,vn)=>((Fe=vn==null?void 0:vn.modelScore)!==null&&Fe!==void 0?Fe:0)-((ut=An==null?void 0:An.modelScore)!==null&&ut!==void 0?ut:0))}constructor({query:me,options:Fe={},teamId:ut=null,enterpriseId:An=null}){this.query=me,this.options=Fe;let vn=Fe.model;vn===void 0&&(vn=Ss);var Hn;const Kt=this.getModels(vn,ut||An,(Hn=this.options.modelLocal)!==null&&Hn!==void 0?Hn:!1);this.model=Kt.model,this.omniswitcherModel=Kt.omniswitcherModel,this.teamId=ut,this.enterpriseId=An,this.featureVectors={}}},"Sorter")},1763226059:(z,A,e)=>{"use strict";e.d(A,{M:()=>c,W:()=>a});var t=e(2371143272),n=e(7002741921),s=e(4724591729);function a(o,r){const l={resources:[],frames:[],stacks:[],samples:[]},_=new Map,d=new Map,i=new Map;function m(I){if(i.has(I))return i.get(I);const p=l.resources.length;return l.resources.push(o.resources[I]),i.set(I,p),p}u(m,"mapResource");function h(I){if(d.has(I))return d.get(I);const p=o.frames[I],g=l.frames.length;return p.resourceId!=null?l.frames.push({...p,resourceId:m(p.resourceId)}):l.frames.push(p),d.set(I,g),g}u(h,"mapFrame");function v(I){if(_.has(I))return _.get(I);const p=o.stacks[I],g=p.parentId?v(p.parentId):void 0,E=h(p.frameId),f=l.stacks.length;return l.stacks.push(g!=null?{parentId:g,frameId:E}:{frameId:E}),_.set(I,f),f}u(v,"mapStack");function y(I){I.stackId==null?l.samples.push(I):l.samples.push({timestamp:I.timestamp,stackId:v(I.stackId)})}u(y,"addSample");let T=0;for(const{start:I,end:p}of r){for(;T<o.samples.length&&o.samples[T].timestamp<I;)T+=1;for(;T<o.samples.length&&o.samples[T].timestamp<=p;)y(o.samples[T]),T+=1}return l}u(a,"filterTrace");function c(){return!(0,s.b3)()&&(0,n.A)("self_profiling","enabled")&&!(0,t.b)()}u(c,"isProfilingEnabled")},2332798892:(z,A,e)=>{"use strict";e.d(A,{A:()=>_});var t=e(1703559452),n=e(7174777686),s=e(735940183);const a=["`","\xB4","\u02C6","\xA8","\u02DC"],c=new RegExp(`[${a.join("")}]$`);function o(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:"").replace(c,"")}u(o,"trim_trailing_composition_char");const r={COMPOSITION_CHARS:a};var l=e(3212336858);function _(d,i){let{allowPartialMatches:m=!1}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!i||!d)return!1;let h=i.toLowerCase().replace(/^\uFF0F/,"/");h=(0,s.dV)(h),h=o(h);const v=[(0,l.fK)(d),(0,l.Bs)(d),...(0,l.qc)(d)||[]];return(0,t.A)(v,y=>{const T=(0,s.dV)(y);return m?(0,n.A)(T,h):T===h})}u(_,"is_match_for_command")},8664881451:(z,A,e)=>{"use strict";e.d(A,{Dd:()=>T,Rj:()=>p,TQ:()=>I,ZH:()=>h,ds:()=>y,qG:()=>i});var t=e(9706240641),n=e.n(t),s=e(796111729),a=e(2001112473),c=e(571104883);const o={},r={},l={},_=(0,s.Wo)({label:"SOUND-PLAYBACK"});function d(g){return`${g}-repeat`}u(d,"createRepeatKey");const i=u(g=>{g&&I(g)},"addSoundToInMemoryCache"),m=function(){var g=(0,t.coroutine)(function*(E){try{if(!E||!("setSinkId"in E)||(0,c.gm)())return;const f=(0,a._o)();yield E.setSinkId(f)}catch(f){_.warn(`Failed to set sink id with reason: ${f}`)}});return u(function(f){return g.apply(this,arguments)},"maybeSetAudioSinkId")}(),h=function(){var g=(0,t.coroutine)(function*(E){let f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!E)return null;const O=T(E)||I(E);O.loop=!!f.loop,O.currentTime=0;var C;O.volume=(C=f.volume)!==null&&C!==void 0?C:1,yield m(O);try{yield O.play()}catch(M){_.warn(`Failed to play sound: ${E} with reason: ${M}`)}});return u(function(f){return g.apply(this,arguments)},"play")}(),v=function(){var g=(0,t.coroutine)(function*(E){let f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!E)return null;const O=d(E),C=u(()=>{r[O]-=1,r[O]>0&&(_.info(`lounge music looping: ${E}`),f.pause?l[O]=setTimeout(()=>{h(O)},f.pause):h(O))},"ended");f.repeat&&(r[O]=f.repeat);const M=T(O)||I(E,{ended:C,customCacheKey:O});M.currentTime=0,yield m(M);try{yield M.play()}catch(D){_.warn(`Failed to play repeated sound: ${E} with reason: ${D}`)}});return u(function(f){return g.apply(this,arguments)},"playRepeat")}();function y(g){let{logFailure:E}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{logFailure:!0};const f=T(g),O=d(g),C=T(O);if(!f&&!C){E&&_.warn(`Tried to stop sound, but no sound was playing matching url: ${g}. Available cached element urls are ${Object.keys(o).join(", ")}`);return}if(C){C.pause(),clearTimeout(l[O]),r[O]=0;const M=C.src;C.src="",C.src=M}if(f){f.pause();const M=f.src;f.src="",f.src=M}}u(y,"stop");function T(g){return o[g]}u(T,"getAudioElement");function I(g){let E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const f=new Audio(g);E.ended&&f.addEventListener("ended",E.ended);const O=E.customCacheKey||g;return o[O]=f,f}u(I,"createAudioElement");function p(g,E,f){if(!g||!E||!f)return;const O=T(g);O&&O.removeEventListener(E,f)}u(p,"removeAudioElementListener")},6106767915:(z,A,e)=>{"use strict";e.d(A,{A:()=>n});var t=e(2414816894);function n(s){return(0,t.A)(s)?s.replace(/^BK/,""):""}u(n,"getBroadcastKeyword")},2414816894:(z,A,e)=>{"use strict";e.d(A,{A:()=>n});var t=e(4897863105);function n(s){return(0,t.c)().indexOf(s)!==-1}u(n,"mentionIdIsKeyword")},1707481146:(z,A,e)=>{"use strict";e.d(A,{A:()=>t});function t(n){return n==="UNVERIFIED"}u(t,"mentionIdIsUnverified")},6764196364:(z,A,e)=>{"use strict";e.d(A,{A:()=>n});var t=e(6968387112);function n(){return`https://${(0,t.Xk)()}`}u(n,"getSlackRootUrl")},4204210053:(z,A,e)=>{"use strict";e.d(A,{A:()=>s});var t=e(6968387112);const n=/^[^.]*\.?(((enterprise\.)?(staging|staging-master|staging-release|staging-sandbox|dev\d*|qa\d*)|enterprise)\.)?[^.]+\.[^.]+$/;function s(a){return a?(0,t.Ed)(a)&&!!a.match(n):!1}u(s,"isValidSlackPermalinkHostName")},1881693845:(z,A,e)=>{"use strict";e.d(A,{A:()=>t});function t(){return!0}u(t,"isIaLayoutEnabled")},965001959:(z,A,e)=>{"use strict";e.d(A,{Lb:()=>L,Pc:()=>O,Xg:()=>S,YZ:()=>d,_e:()=>w,hh:()=>t,iR:()=>m,j0:()=>F,jG:()=>Y,ke:()=>k,mi:()=>p,mu:()=>W,tR:()=>i,ts:()=>x,vd:()=>n,x:()=>C});const t=180,n=600,s=260,a=310,c=1e3,o=24,r=289,l=321,_=385,d=15;var i;(function(G){G.MANUAL="manual",G.AUTO="auto"})(i||(i={}));const m=500,h=140,v=[{minWidth:1420,sidebar:260,inspector:400},{minWidth:1200,sidebar:260,inspector:380},{minWidth:1080,sidebar:260,inspector:340},{minWidth:960,sidebar:220,inspector:320},{minWidth:860,sidebar:220,inspector:310},{minWidth:0,sidebar:200,inspector:310}],y=[{min:t,max:220,className:"p-workspace__sidebar--tiny"},{min:n-50,max:n,className:"p-workspace__sidebar--large"}],T=[{min:s,max:300,className:"p-workspace__secondary_view--tiny"},{min:301,max:399,className:"p-workspace__secondary_view--medium"},{min:400,max:c,className:"p-workspace__secondary_view--large"}],I=[{min:s,max:300,className:"p-workspace__tiles--tiny"},{min:301,max:499,className:"p-workspace__tiles--medium"},{min:500,max:c,className:"p-workspace__tiles--large"}],p=[{min:1,max:400,className:"p-workspace__primary_view--tiny"},{min:401,max:600,className:"p-workspace__primary_view--small"}],g=260,E=400,f=400,O=8,C=16,M=60,D=44,P=40,k="sidebarWidthIntent",x="sidebarWidthMode",F="inspectorWidthIntent",W="inspectorWidthMode",Y="isSidebarVisible",S="isTeamSidebarVisible",L="userPrefersResponsiveSidebar",w="calculatedSidebarWidth",J="LAYOUT"},7216810781:(z,A,e)=>{"use strict";e.d(A,{z:()=>i});var t=e(3134334389),n=e(5255740490),s=e(4173072539),a=e(3694049677),c=e(2408732225),o=e(9874616273),r=e(9892470785),l=e(735940183),_=e(2786906754);const d=new l.Ay("shared_channel_invites"),i=u(m=>{let{invite:h,bottomMargin:v}=m;if(!h)return null;const{inviting_team:y,inviting_user:T,shared_workspace:I}=h,p=!!(0,_.qN)(window.location.search).is_link,g=t.createElement(c.n,{team:y,user:T,size:40,shouldRenderTeamBadge:!0,allowDefaultProfileImage:!0,allowTeamInitials:!0,isInteractive:!1,className:"margin_right_75",hideUserIcon:p}),E=t.createElement(a.A,{invitingUser:T}),f=t.createElement(s.A,{invitingTeam:y}),O=t.createElement(r.A,{id:I.id,team:I,bold:!0});return t.createElement("div",{className:(0,n.A)("p-accept_slack_connect_workspace_invite_header__header_container",{margin_bottom_200:v})},t.createElement("div",{className:"p-accept_slack_connect_workspace_invite_header__header_subcontainer"},t.createElement(o.A,{width:160,height:40,className:"margin_bottom_125"}),t.createElement("div",{className:"p-accept_slack_connect_workspace_invite_header padding_0"},g,t.createElement("span",null,p?d.rt("You were invited by {invitingTeamNameStyled} to join {sharedWorkspaceName}.",{invitingTeamNameStyled:f,sharedWorkspaceName:O}):d.rt("You were invited by <strong>{invitingUserName}</strong> from {invitingTeamNameStyled} to join {sharedWorkspaceName}.",{invitingTeamNameStyled:f,invitingUserName:E,sharedWorkspaceName:O})))))},"AcceptSlackConnectWorkspaceHeader");i.displayName="AcceptSlackConnectWorkspaceHeader"},1073393277:(z,A,e)=>{"use strict";e.d(A,{Sp:()=>I,a5:()=>p});var t=e(1729646737),n=e(4509434386),s=e(9733150292),a=e(3245843483),c=e(4923013394),o=e(252204565),r=e(4496040127),l=e(5829624088),_=e(965001959);const d=".p-client_container_placeholder",i=".p-client_container_placeholder__nav",m=260,h=64,v=76;function y(E){let{name:f,hex:O,iaTheming:C,customTheme:M}=E;const D=(0,t.zK)({hex:O,name:f}),P=(C==null?void 0:C.mode)||"light",k=(C==null?void 0:C.brightness)||n.GK,x=(0,n.XW)({mode:(0,l.Gk)(C,C==null?void 0:C.mode),primary:C==null?void 0:C.primary,highlight1:C==null?void 0:C.highlight1,brightness:k,useCustomHex:M&&(C==null?void 0:C.useCustomHex)});let F;f.includes("Primary")?F=x.primary.shade:F=x.highlight1.shade;const W=n.sC.indexOf(F);return{shade:F,value:P==="light"?D.light[W].value:D.dark[W].value}}u(y,"generateCustomHEXChromeColors");function T(E){let{iaTheming:f,customTheme:O}=E;return!f.primary.custom||!t.$V.test(f.primary.custom)?null:y({name:"bootPrimary",hex:f.primary.custom.startsWith("#")?f.primary.custom:`#${f.primary.custom}`,iaTheming:f,customTheme:O})}u(T,"getBootPrimary");function I(E){let{teamId:f,showTeamSwitcher:O=!1}=E;const C=(0,s._z)(f,"is_unified_user_client_enabled"),M=(0,s._z)(f,"channelSidebarBackground"),D=parseInt((0,s.W6)("viewLayoutLastSidebarWidth"),10)||m,P=(0,s._z)(f,"teamSwitcherBackground"),k=(0,s._z)(f,"textColor"),x=(0,s._z)(f,"topNavBackground")||M,F=(0,s._z)(f,"topNavTextColor")||k,W=document.querySelector(d),Y=(0,s._z)(f,"iaTheming"),S=(0,s._z)(f,"customTheme"),L=(0,s._z)(f,"windowGradient"),w=(0,s._z)(f,"isCreatorInSetupFlow"),J=(0,s.W6)("viewLayoutIsWorkspaceSwitcherVisible"),G=J?h:0;if(!W)return;const X=W.querySelector(i);if(!M||w){p();return}if(C){if(X&&k&&M){const Q=document.createElement("div");Q.classList.add("p-ia4_client_container_placeholder--sidebar"),Q.style.width=`${D}px`;const Ae=document.createElement("div");Ae.classList.add("p-ia4_client_container_placeholder--tab_rail");const ae=document.createElement("div");if(ae.classList.add("p-ia4_client_container_placeholder--content"),ae.style.left=`${G+v+D}px`,W.appendChild(Q),J&&(W.appendChild(Ae),Q.classList.add("p-ia4_client_container_placeholder--sidebar_with_workspace_switcher"),Y!=null&&Y.sidebarInverted&&(Q.style.boxShadow="-1px 0px 0px 0px rgba(255, 255, 255, 0.15)"),ae.classList.add("p-ia4_client_container_placeholder--content_with_workspace_switcher")),W.appendChild(ae),W.classList.add("p-ia4_client_container_placeholder--theme-background"),Y){let he="#ffffffB3";const _e="#1012148c";if(Y.mode==="light"&&Y.sidebarInverted&&(he="#ffffff1A"),Y.mode==="dark"){var te,le;he=_e,(le=(te=window.document)===null||te===void 0?void 0:te.querySelector("body"))===null||le===void 0||le.classList.add(n.RD)}if(Q.style.backgroundColor=he,S&&Y.useCustomHex){if(Y.primary.custom){const ee="bootPrimary",de=T({iaTheming:Y,customTheme:S});de&&W.style.setProperty(`--dt_color-plt-${ee}-${de.shade}`,de.value)}if(Y.highlight1.custom){const ee="bootHighlight1",de=y({name:"bootHighlight1",hex:Y.highlight1.custom.startsWith("#")?Y.highlight1.custom:`#${Y.highlight1.custom}`,iaTheming:Y,customTheme:S});W.style.setProperty(`--dt_color-plt-${ee}-${de.shade}`,de.value)}}if(L){const ee=(0,n.Lp)({mode:(0,l.Gk)(Y,Y.mode),primary:Y.primary,highlight1:Y.highlight1,brightness:Y.brightness,useCustomHex:S&&Y.useCustomHex}).replace(/primary/g,"bootPrimary").replace(/highlight1/g,"bootHighlight1");W.style.background=ee}else{const ee="bootPrimary",de=T({iaTheming:Y,customTheme:!!S}),Ie=(0,l.Gk)(Y,Y.mode),ce=(0,n.VS)({mode:Ie,role:Ie==="light-inverted-sidebar"?"highlight1":"primary",brightness:(Y==null?void 0:Y.brightness)||n.GK});W.style.backgroundColor=S&&Y.useCustomHex&&de?`rgb(var(--dt_color-plt-${ee}-${de.shade}))`:`rgb(var(--dt_color-plt-${Y.primary.palette}-${ce}))`}}else if(Q.style.backgroundColor=M,x){const he=x,_e=(0,o.fl)(x,25);W.style.background=`radial-gradient(
						circle at 50% 50%,
						${he} 20%,
						transparent 80%
					),
					conic-gradient(
            from 45deg at 50% 50%,
            ${_e} 0%,
            ${he} 25%,
            ${_e} 50%,
            ${he} 75%,
            ${_e} 100%
          )`}X.classList.add("p-ia4_client_container_placeholder--top-nav"),(0,c.ve)()&&x&&a.ea3.isAvailable()&&(0,a.ea3)((0,a.Xgz)(),{color:x,symbolColor:F})}W.style.opacity="1"}else{if((0,r.VA)()&&O&&(W.classList.add("p-client_container_placeholder--with-team-switcher"),P&&(W.style.borderLeftColor=P)),X&&k&&M){const he=(0,o.Lh)(k,M,.1),_e=(0,o.Ko)(k,.1);W.style.borderRightColor=he,(0,c.ve)()&&x&&a.ea3.isAvailable()&&(0,a.ea3)((0,a.Xgz)(),{color:x,symbolColor:F}),x&&(X.style.backgroundColor=x),X.style.color=_e,(0,r.VA)()&&O&&(W.style.removeProperty("border-left-color"),W.style.boxShadow=`-60px 0px 0px 0px ${M}`,X.classList.add("p-client_container_placeholder__nav--with-team-switcher"))}let Q=M;var ve;const Ae=(ve=(0,s._z)(f,_._e))!==null&&ve!==void 0?ve:"",ae=parseInt(Ae,10);isNaN(ae)||(W.style.width=`${Ae+1}px`,(0,r.VA)()&&O&&ae===0&&(W.style.width="60px",Q="none",W.style.borderRight="none")),W.style.backgroundColor=Q,W.style.opacity="1"}}u(I,"renderBootPlaceholder");function p(){const E=document.querySelector(d);E&&E.remove()}u(p,"removeBootPlaceholder"),Object.defineProperty({removeBootPlaceholder:p},"removeBootPlaceholder",{get:()=>p,set:E=>{p=E}})},1486505410:(z,A,e)=>{"use strict";var t=e(9706240641),n=e(2069372582),s=e(1535672935),a=e(6533394955);function c(rt,Et){var Mt,kt,fn,Gt,In;const wn=(0,a.getClientStoreInstance)();if(wn.dispatch((0,s.setWorkspaceFailedToBoot)(rt)),!(Et==null||(Mt=Et.data)===null||Mt===void 0)&&Mt.active_migration){var qn,es;wn.dispatch((0,s.setWorkspaceIsMigrating)({teamId:rt,migrationId:Et==null||(qn=Et.data)===null||qn===void 0?void 0:qn.migration_id,canViewMigrationStatus:Et==null||(es=Et.data)===null||es===void 0?void 0:es.can_view_migration_status})),(0,n.R8)("BOOT",`(${rt}) Workspace boot failed due to active migration`)}if((Et==null||(kt=Et.data)===null||kt===void 0?void 0:kt.error)==="accesslimited"&&wn.dispatch((0,s.setWorkspaceIsAccessLimited)(rt)),(Et==null||(fn=Et.data)===null||fn===void 0?void 0:fn.error)==="two_factor_setup_required"&&wn.dispatch((0,s.setWorkspaceNeeds2FASetup)(rt)),(Et==null||(Gt=Et.data)===null||Gt===void 0?void 0:Gt.error)==="user_in_no_workspaces"&&wn.dispatch((0,s.setUserNotMemberOfAnyWorkspaceInOrg)(rt)),(Et==null||(In=Et.data)===null||In===void 0?void 0:In.error)==="user_needs_to_accept_custom_tos"){var Fs;wn.dispatch((0,s.setWorkspaceNeedsToAcceptCustomTOS)({teamId:rt,url:Et==null||(Fs=Et.data)===null||Fs===void 0?void 0:Fs.url}))}}u(c,"markTeamBootFailed");var o=e(6188550760),r=e(7515251865),l=e(9012396182);function _(rt){const Et=(0,a.getClientStoreInstance)();var Mt;const kt=(Mt=(0,l.getNavigateToUnbootedWorkspace)(Et.getState()))!==null&&Mt!==void 0?Mt:{},{bootingTeamId:fn,navigateToRouteProps:Gt}=kt;return fn===rt?((0,o._U)((Gt==null?void 0:Gt.routeName)||r.o,{teamId:rt,...(Gt==null?void 0:Gt.params)||{}},{reason:"delayed-unbooted-team-switch",...(Gt==null?void 0:Gt.options)||{}}),Et.dispatch((0,s.setNavigateToUnbootedWorkspace)({})),!0):!1}u(_,"maybeNavigateToUnbootedWorkspace");function d(rt,Et){if(!rt)throw new Error("Missing team id, cannot thin boot team.");c(rt,Et),_(rt)}u(d,"thinBootTeam");var i=e(1073393277),m=e(2212859256),h=e(1044468604);const v={[h.F9.API]:y,[h.F9.BOOT_APP]:T,[h.F9.BOOT_TEAM]:I,[h.F9.DEFAULT]:p};function y(rt,Et,Mt){var kt;const fn=Mt==null?void 0:Mt.teamId;if(window.isReloading){(0,n.pq)("BOOT",`(${fn}) Ongoing reload detected during Gantry API error handler; Halting error handler.`);return}h.XB[h.F9.API](rt,Et,{...Mt,shouldDisplayErrorView:!1,shouldBeaconError:(rt==null||(kt=rt.data)===null||kt===void 0?void 0:kt.error)!=="user_needs_to_accept_custom_tos"}),d(fn,rt),Et!=null&&Et.isForegroundTeam&&Promise.all([e.e("gantry-v2-vendors-async"),e.e("gantry-v2-async-client-render-client")]).then(e.bind(e,4314530609)).then(Gt=>{let{renderClient:In}=Gt;(0,i.a5)(),In()})}u(y,"handleApiError");function T(rt,Et,Mt){(0,i.a5)(),h.XB[h.F9.BOOT_APP](rt,Et,Mt)}u(T,"handleBootAppError");function I(rt,Et,Mt){if(Mt){const{teamId:kt}=Mt;(0,m.y)(kt)}(0,i.a5)(),h.XB[h.F9.BOOT_TEAM](rt,Et,Mt)}u(I,"handleBootTeamError");function p(rt,Et,Mt){(0,i.a5)(),h.XB[h.F9.DEFAULT](rt,Et,Mt)}u(p,"handleDefaultError");const g={handleApiError:y,handleBootAppError:T,handleBootTeamError:I,handleDefaultError:p};var E=e(9113979368),f=e(1197598850),O=e(1092614768),C=e(2325478352),M=e(796111729),D=e(2250002584),P=e(2872463257);const k="cse-api",x="cse-boot-api";function F(rt){return W.apply(this,arguments)}u(F,"fetchBootData");function W(){return W=(0,t.coroutine)(function*(rt){const{teamId:Et,userId:Mt,isBootingWarm:kt}=rt,fn=yield kt,Gt=fn?"deferred-data":"initial-data";let In=null;(0,C.EZ)()&&fn&&(In=yield(0,O.z6)({teamId:Et,userId:Mt}));const wn=f.V$.bind(null,{...rt,reason:Gt,minChannelUpdated:In});return Y(wn,{teamId:Et,userId:Mt,reason:Gt})}),W.apply(this,arguments)}u(W,"_fetchBootData");function Y(rt){let Et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const Mt=(0,D.F)(),kt=Mt.createTrace({traceName:k,tags:Et,samplingOptions:{sampleType:P.nl.ALWAYS}});if(!(kt!=null&&kt.traceFn))return(0,M.Wo)().warn("BOOT","Trace or traceFn is undefined; Unable to trace client.userBoot data fetch."),rt();const fn=u((In,wn)=>{if((0,E.A)(wn)){const qn={state:P.$m.SUCCESS,message:"client_userBoot_empty"};In==null||In.addTags(qn),In==null||In.close(),Mt.reportTrace(kt)}else Mt.clearTrace(kt)},"onResolve"),Gt=u((In,wn)=>{var qn;const es={state:P.$m.ERROR};wn!=null&&wn.status&&(es.status=wn.status),wn!=null&&wn.message&&(es.message=wn.message),!(wn==null||(qn=wn.data)===null||qn===void 0)&&qn.error&&(es.reason=wn.data.error),In==null||In.addTags(es),In==null||In.close(),Mt.reportTrace(kt)},"onError");return kt.traceFn({name:x,onError:Gt,onResolve:fn},rt)}u(Y,"maybeTraceClientUserBootDataFetch"),Object.defineProperty({CSE_API_TRACE_LABEL:k,CLIENT_BOOT_SPAN_LABEL:x},"fetchBootData",{get:()=>F,set:rt=>{F=rt}});var L=e(3398586081),w=e(6422693406),J=e(9733150292),G=e(6575028637);const X=(0,L.A)(ve,rt=>rt.enterpriseId);function te(rt){return le.apply(this,arguments)}u(te,"maybeFetchEnterpriseData");function le(){return le=(0,t.coroutine)(function*(rt){return rt.enterpriseId?X(rt):{}}),le.apply(this,arguments)}u(le,"_maybeFetchEnterpriseData");function ve(rt){return Q.apply(this,arguments)}u(ve,"fetchAllEnterpriseData");function Q(){return Q=(0,t.coroutine)(function*(rt){const{teamId:Et,enterpriseId:Mt}=rt;var kt;let fn=(kt=(0,J._z)(Et??"","enterprise_api_token"))!==null&&kt!==void 0?kt:"";if(Et&&(0,G.ZN)(Et)&&!fn){var Gt;fn=(Gt=(0,J._z)(Et,"token"))!==null&&Gt!==void 0?Gt:""}const[In,wn]=yield w.S.all([(0,f.YH)(rt),(0,f.O5)({...rt,token:fn})]),qn={enterprise_id:Mt,page_needs_enterprise:!0,enterprise_api_token:fn};return{enterpriseData:In==null?void 0:In.enterprise,enterprisePrefsData:wn,enterpriseBootData:qn}}),Q.apply(this,arguments)}u(Q,"_fetchAllEnterpriseData");const Ae={resetMemoizedFetchEnterpriseDataCache:()=>{X.cache.clear()}};var ae=e(1460808057),he=e(8187930033),_e=e(8414867410),ee=e(5084575109),de=e(8834730594),Ie=e(8040098042),ce=e(2960290117);function j(rt){return N.apply(this,arguments)}u(j,"maybeFetchMessagesData");function N(){return N=(0,t.coroutine)(function*(rt){const{bootQueue:Et,token:Mt,teamId:kt}=rt;if(!Mt)return(0,M.Ay)({teamOrEnterpriseId:kt,label:"BOOT"}).error(new Error("Token missing; Unable to fetch messages data.")),null;if(!kt)return(0,M.Ay)({teamOrEnterpriseId:kt,label:"BOOT"}).error(new Error("teamId missing; Unable to fetch messages data.")),null;const fn=yield(0,ae.E)({contextualInfo:rt});return b({bootQueue:Et,token:Mt,teamId:kt,routeInfo:fn})}),N.apply(this,arguments)}u(N,"_maybeFetchMessagesData");function b(rt){return R.apply(this,arguments)}u(b,"fetchMessagesDataForRoute");function R(){return R=(0,t.coroutine)(function*(rt){let{bootQueue:Et,token:Mt,teamId:kt,routeInfo:fn}=rt;var Gt;const In=fn==null||(Gt=fn.params)===null||Gt===void 0?void 0:Gt.entityId;return In&&(0,Ie.A)(In)&&!(0,ee.n)(In)&&!(0,_e.bd)(In)&&!(0,de.A)(In)&&!(0,ce.Ay)(In)?((0,n.pq)("BOOT",`Booting into channel: ${In}`),K({bootQueue:Et,token:Mt,teamId:kt,id:In})):!(0,ee.n)(In)&&!(0,_e.bd)(In)&&!(0,de.A)(In)&&!(0,ce.Ay)(In)?((0,n.pq)("BOOT","Couldn't determine boot channel. Falling back to default channel"),K({bootQueue:Et,token:Mt,teamId:kt})):null}),R.apply(this,arguments)}u(R,"_fetchMessagesDataForRoute");function K(rt){let{bootQueue:Et,token:Mt,teamId:kt,id:fn}=rt;const Gt={token:Mt,canonical_avatars:!0,no_user_profile:!0,ignore_replies:!0,no_self:!0,include_full_users:!0,include_use_case:!0,include_stories:!0,no_members:!0,include_mutation_timestamps:!0,count:28};fn&&(Gt.channel=fn),Gt.include_free_team_extra_messages=!0;const In=new he.Ay({method:"conversations.view",args:Gt,teamId:kt});return Et.q(In).catch(wn=>((0,M.Ay)({teamOrEnterpriseId:kt,label:"BOOT"}).error(new Error(`unable to fetch messages data ${wn}`)),null))}u(K,"fetchMessagesData");const B={fetchMessagesData:K};var $=e(4892637646),Z=e(6998663753),re=e(9706702639),Te=e(5313493085);function Ce(rt){let{params:Et,routeName:Mt}=rt;const kt=Et.teamId||Et.teamOrEnterpriseId,{dispatch:fn}=(0,a.getStoreInstanceByTeamId)(kt);fn((0,Te.M)({routeName:Mt,routeParams:Et}))}u(Ce,"channelCanvasListener");var Pe=e(1881693845),fe=e(2591023465),pe=e(3674298388);const q=u(rt=>{let{prevTeamId:Et,nextTeamId:Mt}=rt;if(Et!==Mt)return;const fn=(0,a.getStoreInstanceByTeamId)(Mt).getState();(0,Pe.A)()&&(0,pe.r8)(fn)&&(0,a.dispatchForClientStore)((0,fe.vm)(!1))},"dismiss_floating_sidebar");var se=e(9268451279),ge=e(2805462396),Oe=e(4386248732),Le=e(7765212398),We=e(9460580631);function Re(rt){let{params:Et,prevRouteInfo:Mt,prevTeamId:kt}=rt;const fn=Mt==null?void 0:Mt.params;if(!fn||fn.entityId!=="composer"||!fn.draftId||fn.draftId===(Et==null?void 0:Et.draftId))return!0;const{dispatch:Gt,getState:In}=(0,a.getStoreInstanceByTeamId)(kt),wn=In(),qn=(0,Oe.di)(fn.draftId);if(!qn)return!0;const es=(0,Le.YI)(wn,qn);return(0,se.v7)(es,{trimWhitespace:!0})||(0,ge.A)(wn,es)||Gt((0,We.A)({ids:[qn],reason:"draftsListenerBefore"})),!0}u(Re,"draftsListenerBefore");var we=e(4446301238),Je=e(9289081806),it=e(1407713935),et=e(9101533895),lt=e(7053828403);function nt(rt,Et){return at.apply(this,arguments)}u(nt,"ensureChannel");function at(){return at=(0,t.coroutine)(function*(rt,Et){const Mt=rt.getState(),kt=(0,et.OL)(Mt,Et,!1);return(0,it.hc)(kt)?kt:rt.dispatch((0,we.pX)({ids:[Et],reason:"sonic/route-listeners/ensure-channel",callSource:we.aI.EnsureChannel})).then(fn=>{if(!fn)return;const{channels:Gt,resolved:In}=fn;if(!(!In||!In.includes(Et)))return Gt[0]})}),at.apply(this,arguments)}u(at,"_ensureChannel");const ze=function(){var rt=(0,t.coroutine)(function*(Et){let{prevTeamId:Mt,nextTeamId:kt,routeName:fn,params:Gt={}}=Et;const In=(0,a.getStoreInstanceByTeamId)(kt);if(!(0,Ie.A)(Gt.entityId))return w.S.resolve(void 0);const wn=Gt.entityId;return nt(In,wn).then(qn=>{if(qn&&!(0,Je.lo)(qn))return w.S.resolve(void 0);if(Mt!==kt){const es=(0,lt.EI)(In.getState(),{mainView:!0});return es===wn?w.S.reject(new Error("fallback channel ID === target channel ID, can\u2019t switch workspaces")):((0,o._U)(fn,{...Gt,entityId:es},{shouldReplaceState:!0}),w.S.resolve(!1))}return qn?w.S.reject(new Error("tried to switch to a channel from another team")):w.S.resolve(!1)})});return function(Et){return rt.apply(this,arguments)}}();var Ke=e(1530920905);function He(rt){let{nextTeamId:Et,prevTeamId:Mt}=rt;const{dispatch:kt}=(0,a.getStoreInstanceByTeamId)(Et);Mt!==Et&&kt((0,Ke.yh)({teamId:Et}))}u(He,"permissionsListener");var Ye=e(2542612541),_t=e(9005797924),vt=e(4496040127);const Tt=u(rt=>{let{prevTeamId:Et,nextTeamId:Mt}=rt;if(!(0,vt.VA)()||Et===Mt||!Mt)return!0;if((0,Ye.A)(Mt,Et))return!1;const kt=(0,a.getStateForClientStore)();return(0,l.isWorkspaceExpired)(kt,Mt)||(0,l.isWorkspacePendingAuth)(kt,Mt)?((0,_t.A)(Mt),!1):!0},"maybe_finish_signin");var Lt=e(4992650731);const ft=u(rt=>{let{prevTeamId:Et,nextTeamId:Mt,routeName:kt,params:fn}=rt;if((0,vt.VA)()||Et===Mt)return!0;const Gt=(0,o.M5)(kt,{...fn,teamId:Mt});if(!Mt)return!0;const In=(0,a.getStateForClientStore)(),wn=(0,l.getWorkspacesMeta)(In),qn=wn&&wn[Mt]&&wn[Mt].subdomain,es=(0,vt.eb)(qn)||`_team_${Mt}`;return(0,Lt.A)(Gt,es),!1},"maybe_open_other_team_in_browser");var mt=e(8959118205),Yt=e(4588963228),nn=e(497761763),jt=e(4327331459),gn=e(3707193570),on=e(4862221402),Xt=e(6427150145);const rn=/^[\d]{13}$/;function Zt(rt){return rt?rn.test(rt):!1}u(Zt,"looksLikeLastReadTs");var Ht=e(1826991857),Bt=e(7174777686),Qt=e(7752506476);function sn(rt){return(0,Bt.A)(Qt.M,rt)||rt===""}u(sn,"looksLikeFlexpaneSectionId");var Mn=e(6471801899),ct=e(1233969417);const yt=[/^people[ -~]{1,27}$/,/^contacts[ -~]{1,27}$/,/^otherContacts[ -~]{1,27}$/,/^slackUsers[ -~]{1,27}$/];function Rt(rt){return yt.some(Et=>Et.test(rt))}u(Rt,"looksLikeContactExternalId");var xe=e(6605261507),Nt=e(5587260451);const Ft=["received","sent"];function qt(rt){return Ft.includes(rt)}u(qt,"looksLikeInvitationsTabRouteParam");var un=e(3468466741),tt=e(8538260492),pt=e(4425811520),Dt=e(7770205178),Wt=e(9132066222),zt=e(8237194282),ln=e(8305125093);function Tn(rt){return!!mt.as[rt]}u(Tn,"isEntityRedirectKey");const cn=u(rt=>Object.keys(mt.as).includes(rt),"isRedirectRoute"),hn={entityId:rt=>(0,de.A)(rt)||(0,Yt.A)(rt)||(0,Ie.A)(rt)||(0,nn.A)(rt)||(0,jt.A)(rt)||(0,gn.Ay)(rt)||(0,on.A)(rt)||(0,ee.n)(rt)||(0,_e.bd)(rt)||cn(rt)||(0,ce.Ay)(rt)||(0,pt.xL)(rt),appOrServiceId:rt=>(0,Yt.A)(rt)||(0,de.A)(rt),timestamp:Xt.A,threadId:Ht.A,threadPageId:Ht.A,replyTs:Xt.A,sectionId:sn,tabId:rt=>(0,xe.Dl)(rt),viewName:rt=>(0,Nt.c)(rt),listsViewName:Mn.FO,draftId:Oe.ai,invitationsTabId:qt,channelId:Ie.A,channelFilesId:rt=>/^files-.+/.test(rt),searchQuery:rt=>/^search-.+/.test(rt),articleId:rt=>(0,ct.A)(rt),tileEntityId:rt=>(0,Ie.A)(rt)||(0,ee.n)(rt)||(0,_e.bd)(rt),scTeamOrEnterpriseId:rt=>(0,gn.Am)(rt),quipDocId:ce.Ay,channelCanvasId:ce.Ay,contactExternalId:Rt,itemId:un.Ny,recordId:Mn.pq,focusRecordId:Mn.or,listViewId:Mn._o,lastReadTs:Zt,canvasOpenedFromId:rt=>(0,Ie.A)(rt)||(0,jt.A)(rt)||rt===tt.eE.QUIP_FILES,externalWorkspacePage:Dt.W_,channelTabId:Wt.jK,salesforceRecordId:zt.V,workflowTemplateId:ln.A},Cn={[r.o]:{paths:["/"]},[mt._G]:{paths:["/:entityId","/:entityId/:timestamp","/:entityId/:tabId","/:entityId/:viewName","/:entityId/:viewName/:invitationsTabId","/:entityId/:listsViewName","/:entityId/:listsViewName/:focusRecordId","/:entityId/:listsViewName/:listViewId","/:entityId/:draftId","/:entityId/:threadPageId","/:entityId/:searchQuery","/:entityId/:channelFilesId","/:entityId/:scTeamOrEnterpriseId","/:entityId/:itemId","/:entityId/:channelCanvasId","/:entityId/:canvasOpenedFromId","/:entityId/:externalWorkspacePage","/:entityId/tabs/:channelTabId","/:entityId/:salesforceRecordId"]},[mt.lM]:{paths:["/:entityId/thread/:threadId","/:entityId/thread/:threadId/:replyTs","/:entityId/:timestamp/thread/:threadId","/:entityId/:viewName/thread/:threadId","/:entityId/:viewName/:invitationsTabId/thread/:threadId","/:entityId/:tabId/thread/:threadId","/:entityId/:draftId/thread/:threadId","/:entityId/:searchQuery/thread/:threadId","/:entityId/:channelFilesId/thread/:threadId","/:entityId/:scTeamOrEnterpriseId/thread/:threadId","/:entityId/:listsViewName/thread/:threadId","/:entityId/:canvasOpenedFromId/thread/:threadId"]},[mt.w7]:{paths:["/:entityId/messages/:channelId","/:entityId/messages/:channelId/:timestamp"]},[mt.Vy]:{paths:["/:entityId/channel_info","/:entityId/:timestamp/channel_info","/:entityId/:viewName/channel_info","/:entityId/:viewName/:invitationsTabId/channel_info","/:entityId/:tabId/channel_info","/:entityId/:draftId/channel_info","/:entityId/:threadPageId/channel_info","/:entityId/:searchQuery/channel_info","/:entityId/:channelFilesId/channel_info","/:entityId/:scTeamOrEnterpriseId/channel_info","/:entityId/:listsViewName/channel_info","/:entityId/:canvasOpenedFromId/channel_info"]},[mt.o6]:{paths:["/:entityId/inspect/:channelId","/:entityId/inspect/:channelId/:sectionId"]},[mt.p3]:{paths:["/:entityId/activity","/:entityId/:timestamp/activity","/:entityId/:viewName/activity","/:entityId/:viewName/:invitationsTabId/activity","/:entityId/:tabId/activity","/:entityId/:draftId/activity","/:entityId/:threadPageId/activity","/:entityId/:searchQuery/activity","/:entityId/:channelFilesId/activity","/:entityId/:scTeamOrEnterpriseId/activity","/:entityId/:canvasOpenedFromId/activity"]},[mt.W2]:{paths:["/:entityId/starred_items","/:entityId/:timestamp/starred_items","/:entityId/:viewName/starred_items","/:entityId/:viewName/:invitationsTabId/starred_items","/:entityId/:tabId/starred_items","/:entityId/:draftId/starred_items","/:entityId/:threadPageId/starred_items","/:entityId/:searchQuery/starred_items","/:entityId/:channelFilesId/starred_items","/:entityId/:scTeamOrEnterpriseId/starred_items","/:entityId/:listsViewName/starred_items","/:entityId/:canvasOpenedFromId/starred_items"]},[mt.ym]:{paths:["/:entityId/saved","/:entityId/:timestamp/saved","/:entityId/:viewName/saved","/:entityId/:viewName/:invitationsTabId/saved","/:entityId/:tabId/saved","/:entityId/:draftId/saved","/:entityId/:threadPageId/saved","/:entityId/:searchQuery/saved","/:entityId/:channelFilesId/saved","/:entityId/:scTeamOrEnterpriseId/saved","/:entityId/:listsViewName/saved","/:entityId/:canvasOpenedFromId/saved"]},[mt.fr]:{paths:["/:entityId/appspane","/:entityId/:timestamp/appspane","/:entityId/:viewName/appspane","/:entityId/:viewName/:invitationsTabId/appspane","/:entityId/:tabId/appspane","/:entityId/:draftId/appspane","/:entityId/:threadPageId/appspane","/:entityId/:searchQuery/appspane","/:entityId/:channelFilesId/appspane","/:entityId/:scTeamOrEnterpriseId/appspane","/:entityId/:listsViewName/appspane","/:entityId/:canvasOpenedFromId/appspane"]},[mt.M9]:{paths:["/:entityId/files","/:entityId/:timestamp/files","/:entityId/:viewName/files","/:entityId/:viewName/:invitationsTabId/files","/:entityId/:tabId/files","/:entityId/:draftId/files","/:entityId/:threadPageId/files","/:entityId/:searchQuery/files","/:entityId/:channelFilesId/files","/:entityId/:scTeamOrEnterpriseId/files","/:entityId/:listsViewName/files"]},[mt.T$]:{paths:["/:entityId/filespane","/:entityId/:timestamp/filespane","/:entityId/:viewName/filespane","/:entityId/:viewName/:invitationsTabId/filespane","/:entityId/:tabId/filespane","/:entityId/:draftId/filespane","/:entityId/:threadPageId/filespane","/:entityId/:searchQuery/filespane","/:entityId/:channelFilesId/filespane","/:entityId/:scTeamOrEnterpriseId/filespane","/:entityId/:listsViewName/filespane"]},[mt.De]:{paths:["/:entityId/files/:fileId","/:entityId/:timestamp/files/:fileId","/:entityId/:viewName/files/:fileId","/:entityId/:viewName/:invitationsTabId/files/:fileId","/:entityId/:tabId/files/:fileId","/:entityId/:draftId/files/:fileId","/:entityId/:threadPageId/files/:fileId","/:entityId/:searchQuery/files/:fileId","/:entityId/:channelFilesId/files/:fileId","/:entityId/:scTeamOrEnterpriseId/files/:fileId","/:entityId/:listsViewName/files/:fileId","/:entityId/:canvasOpenedFromId/files/:fileId"]},[mt.wA]:{paths:["/:entityId/comments/:quipDocId","/:entityId/:canvasOpenedFromId/comments/:quipDocId"]},[mt.li]:{paths:["/:entityId/history/:quipDocId","/:entityId/:canvasOpenedFromId/history/:quipDocId"]},[mt.mj]:{paths:["/:entityId/docs/:quipDocId","/:entityId/docs/:quipDocId/:lastReadTs","/:entityId/:timestamp/docs/:quipDocId","/:entityId/:viewName/docs/:quipDocId","/:entityId/:viewName/:invitationsTabId/docs/:quipDocId","/:entityId/:tabId/docs/:quipDocId","/:entityId/:draftId/docs/:quipDocId","/:entityId/:threadPageId/docs/:quipDocId","/:entityId/:searchQuery/docs/:quipDocId","/:entityId/:channelFilesId/docs/:quipDocId","/:entityId/:listsViewName/docs/:quipDocId"]},[mt.y0]:{paths:["/:entityId/files/type","/:entityId/:timestamp/files/type","/:entityId/:viewName/files/type","/:entityId/:viewName/:invitationsTabId/files/type","/:entityId/:tabId/files/type","/:entityId/:draftId/files/type","/:entityId/:threadPageId/files/type","/:entityId/:searchQuery/files/type","/:entityId/:channelFilesId/files/type","/:entityId/:scTeamOrEnterpriseId/files/type","/:entityId/:listsViewName/files/type"]},[mt.Nh]:{paths:["/:entityId/files/:memberId","/:entityId/:timestamp/files/:memberId","/:entityId/:viewName/files/memberId","/:entityId/:viewName/:invitationsTabId/files/memberId","/:entityId/:tabId/files/:memberId","/:entityId/:draftId/files/:memberId","/:entityId/:threadPageId/files/:memberId","/:entityId/:searchQuery/files/:memberId","/:entityId/:channelFilesId/files/:memberId","/:entityId/:scTeamOrEnterpriseId/files/:memberId","/:entityId/:listsViewName/files/:memberId","/:entityId/:canvasOpenedFromId/files/:memberId"]},[mt.$s]:{paths:["/:entityId/user_groups","/:entityId/:timestamp/user_groups","/:entityId/:viewName/user_groups","/:entityId/:viewName/:invitationsTabId/user_groups","/:entityId/:tabId/user_groups","/:entityId/:draftId/user_groups","/:entityId/:threadPageId/user_groups","/:entityId/:searchQuery/user_groups","/:entityId/:channelFilesId/user_groups","/:entityId/:scTeamOrEnterpriseId/user_groups","/:entityId/:listsViewName/user_groups","/:entityId/:canvasOpenedFromId/user_groups"]},[mt.Mu]:{paths:["/:entityId/user_groups/:userGroupId","/:entityId/:timestamp/user_groups/:userGroupId","/:entityId/:viewName/user_groups/:userGroupId","/:entityId/:viewName/:invitationsTabId/user_groups/:userGroupId","/:entityId/:tabId/user_groups/:userGroupId","/:entityId/:draftId/user_groups/:userGroupId","/:entityId/:threadPageId/user_groups/:userGroupId","/:entityId/:searchQuery/user_groups/:userGroupId","/:entityId/:channelFilesId/user_groups/:userGroupId","/:entityId/:scTeamOrEnterpriseId/user_groups/:userGroupId","/:entityId/:listsViewName/user_groups/:userGroupId","/:entityId/:canvasOpenedFromId/user_groups/:userGroupId"]},[mt.Ns]:{paths:["/:entityId/whats_new","/:entityId/:timestamp/whats_new","/:entityId/:viewName/whats_new","/:entityId/:viewName/:invitationsTabId/whats_new","/:entityId/:tabId/whats_new","/:entityId/:draftId/whats_new","/:entityId/:threadPageId/whats_new","/:entityId/:searchQuery/whats_new","/:entityId/:channelFilesId/whats_new","/:entityId/:scTeamOrEnterpriseId/whats_new","/:entityId/:listsViewName/whats_new","/:entityId/:canvasOpenedFromId/whats_new"]},[mt.IN]:{paths:["/:entityId/shortcuts","/:entityId/:timestamp/shortcuts","/:entityId/:viewName/shortcuts","/:entityId/:viewName/:invitationsTabId/shortcuts","/:entityId/:tabId/shortcuts","/:entityId/:draftId/shortcuts","/:entityId/:threadPageId/shortcuts","/:entityId/:searchQuery/shortcuts","/:entityId/:channelFilesId/shortcuts","/:entityId/:scTeamOrEnterpriseId/shortcuts","/:entityId/:listsViewName/shortcuts","/:entityId/:canvasOpenedFromId/shortcuts"]},[mt.Q$]:{paths:["/:entityId/user_profile/:memberId","/:entityId/:timestamp/user_profile/:memberId","/:entityId/:viewName/user_profile/:memberId","/:entityId/:viewName/:invitationsTabId/user_profile/:memberId","/:entityId/:tabId/user_profile/:memberId","/:entityId/:draftId/user_profile/:memberId","/:entityId/:threadPageId/user_profile/:memberId","/:entityId/:searchQuery/user_profile/:memberId","/:entityId/:channelFilesId/user_profile/:memberId","/:entityId/:scTeamOrEnterpriseId/user_profile/:memberId","/:entityId/:listsViewName/user_profile/:memberId","/:entityId/:canvasOpenedFromId/user_profile/:memberId"]},[mt.E2]:{paths:["/:entityId/help","/:entityId/:timestamp/help","/:entityId/:viewName/help","/:entityId/:viewName/:invitationsTabId/help","/:entityId/:tabId/help","/:entityId/:draftId/help","/:entityId/:threadPageId/help","/:entityId/:searchQuery/help","/:entityId/:channelFilesId/help","/:entityId/:scTeamOrEnterpriseId/help","/:entityId/:listsViewName/help","/:entityId/:canvasOpenedFromId/help"]},[mt.vA]:{paths:["/:entityId/help/:articleId","/:entityId/:timestamp/help/:articleId","/:entityId/:viewName/help/:articleId","/:entityId/:viewName/:invitationsTabId/help/:articleId","/:entityId/:tabId/help/:articleId","/:entityId/:draftId/help/:articleId","/:entityId/:threadPageId/help/:articleId","/:entityId/:searchQuery/help/:articleId","/:entityId/:channelFilesId/help/:articleId","/:entityId/:scTeamOrEnterpriseId/help/:articleId","/:entityId/:listsViewName/help/:articleId","/:entityId/:canvasOpenedFromId/help/:articleId"]},[mt.Dn]:{paths:["/:entityId/rimeto_profile/:memberId","/:entityId/:timestamp/rimeto_profile/:memberId","/:entityId/:viewName/rimeto_profile/:memberId","/:entityId/:viewName/:invitationsTabId/rimeto_profile/:memberId","/:entityId/:tabId/rimeto_profile/:memberId","/:entityId/:searchQuery/rimeto_profile/:memberId","/:entityId/:draftId/rimeto_profile/:memberId","/:entityId/:threadPageId/rimeto_profile/:memberId","/:entityId/:channelFilesId/rimeto_profile/:memberId","/:entityId/:scTeamOrEnterpriseId/rimeto_profile/:memberId","/:entityId/:listsViewName/rimeto_profile/:memberId","/:entityId/:canvasOpenedFromId/rimeto_profile/:memberId"]},[mt.Ie]:{paths:["/:entityId/feedback","/:entityId/:timestamp/feedback","/:entityId/:viewName/feedback","/:entityId/:viewName/:invitationsTabId/feedback","/:entityId/:tabId/feedback","/:entityId/:draftId/feedback","/:entityId/:threadPageId/feedback","/:entityId/:searchQuery/feedback","/:entityId/:channelFilesId/feedback","/:entityId/:scTeamOrEnterpriseId/feedback","/:entityId/:listsViewName/feedback","/:entityId/:canvasOpenedFromId/feedback"]},[mt.Bh]:{paths:["/:channelId/huddle"]},[mt.Mv]:{paths:["/:entityId/huddles_captions","/:entityId/:timestamp/huddles_captions","/:entityId/:viewName/huddles_captions","/:entityId/:viewName/:invitationsTabId/huddles_captions","/:entityId/:tabId/huddles_captions","/:entityId/:draftId/huddles_captions","/:entityId/:threadPageId/huddles_captions","/:entityId/:searchQuery/huddles_captions","/:entityId/:channelFilesId/huddles_captions","/:entityId/:scTeamOrEnterpriseId/huddles_captions","/:entityId/:listsViewName/huddles_captions","/:entityId/:canvasOpenedFromId/huddles_captions"]},[mt.d2]:{paths:["/:entityId/contact_profile/:contactExternalId","/:entityId/:timestamp/contact_profile/:contactExternalId","/:entityId/:viewName/contact_profile/:contactExternalId","/:entityId/:viewName/:invitationsTabId/contact_profile/:contactExternalId","/:entityId/:tabId/contact_profile/:contactExternalId","/:entityId/:draftId/contact_profile/:contactExternalId","/:entityId/:threadPageId/contact_profile/:contactExternalId","/:entityId/:searchQuery/contact_profile/:contactExternalId","/:entityId/:channelFilesId/contact_profile/:contactExternalId","/:entityId/:scTeamOrEnterpriseId/contact_profile/:contactExternalId","/:entityId/:listsViewName/contact_profile/:contactExternalId","/:entityId/:canvasOpenedFromId/contact_profile/:contactExternalId"]},[mt.p$]:{paths:["/:entityId/record/:recordId","/:entityId/:timestamp/record/:recordId","/:entityId/:viewName/record/:recordId","/:entityId/:viewName/:invitationsTabId/record/:recordId","/:entityId/:tabId/record/:recordId","/:entityId/:draftId/record/:recordId","/:entityId/:threadPageId/record/:recordId","/:entityId/:searchQuery/record/:recordId","/:entityId/:channelFilesId/record/:recordId","/:entityId/:scTeamOrEnterpriseId/record/:recordId","/:entityId/:listsViewName/record/:recordId","/:entityId/:canvasOpenedFromId/record/:recordId"]},[mt.td]:{paths:["/:entityId/:tabId/:workflowTemplateId"]}};function _n(){(0,o.S2)(hn,Cn)}u(_n,"setRoutes");const Vn=u(rt=>{let{routeName:Et,params:Mt={}}=rt;const{entityId:kt}=Mt;return kt&&Tn(kt)?((0,o._U)(Et,{...Mt,entityId:mt.as[kt]},{shouldReplaceState:!0}),!1):!0},"maybe_redirect_entity");var Wn=e(7213691587),kn=e(109860581),Pn=e(3193155968),$t=e(7429662208);function $n(rt){let{prevTeamId:Et,nextTeamId:Mt}=rt;if(!Mt||Et===Mt)return;const kt=(0,a.getStoreInstanceByTeamId)(Mt),fn=kt.getState(),Gt=(0,$t.e6)(fn),In=(0,$t.Le)(fn,{tab:Gt});kt.dispatch((0,Wn.C)({prevViewSet:void 0,prevTab:void 0,nextViewSet:In,nextTab:Gt,windowId:Pn.N2,navigateParams:{},triggerType:kn.w.TEAM_SWITCH}))}u($n,"maybeRunTeamSwitchNavigateListeners");var De=e(6555262004),Ne=e(5078290763),Me=e(4656278360),Be=e(2567914105),ue=e(9003400431),ke=e(8243624171);function Xe(rt){let{nextTeamId:Et,prevTeamId:Mt}=rt;const{dispatch:kt,getState:fn}=(0,a.getStoreInstanceByTeamId)(Mt),Gt=fn();return(0,Be.iS)(Gt)?new w.S((wn,qn)=>{kt((0,Ne.P)({openModalProps:{isStackable:!0},onConfirmClose:()=>{kt((0,Me.U)(!1)),kt((0,ue.O)({closeAll:!0})),wn()},onCancelClose:()=>{qn()}}))}):(Mt&&!(0,ke.Vq)({teamId:Mt})&&kt(Et===Mt?(0,ue.O)({closeNamed:De.N}):(0,ue.O)({closeAll:!0})),!0)}u(Xe,"modalListenerBefore");var dt=e(6088404775);function bt(rt){const Et=(0,dt.h)();return Et!=null&&Et.onClose&&(Et==null||Et.onClose()),!0}u(bt,"pinsPopoverListenerAfter");var be=e(3982416567),U=e(1031947056),V=e(1466694191),ne=e(6078549397),ie=e(7307560139),Ue=e(6822097892),Qe=e(4033441523);const je=["comment_thread","activity_history","files","rimeto_profile","thread",mt.li,mt.lM,mt.De,mt.Dn,mt.Q$],ht=(0,U.Ay)("Post activity history routing side effects",(rt,Et,Mt)=>{let{params:kt,prevRouteInfo:fn,routeName:Gt}=Mt;var In;const wn=kt==null?void 0:kt.entityId,qn=fn==null||(In=fn.params)===null||In===void 0?void 0:In.entityId,es=Pn.N2;if(Gt===mt._G&&wn&&(0,V.A)(wn)){const{fileIdOrQuipThreadId:_o}=(0,ne.EX)(wn);je.includes(fn==null?void 0:fn.routeName)&&rt((0,Ue.A)({fileId:_o,windowId:es,source:Qe.f.QUIP_ACTIVITY_HISTORY_LISTENER,isFromCloseActivityHistory:!0}))}let Fs=wn,as=qn;(0,ce.Ay)(qn)&&(0,ce.Ay)(wn)&&(Fs=(0,ne.EX)(qn).fileIdOrQuipThreadId,as=(0,ne.EX)(wn).fileIdOrQuipThreadId),Fs!==as&&rt((0,ie.NA)({windowId:es}))});ht.meta={name:"createThunk",key:"createThunkpostQuipActivityHistoryRouting",description:"Post activity history routing side effects"};function ot(rt){let{params:Et,prevRouteInfo:Mt,routeName:kt,reason:fn}=rt;const Gt=Et.teamId||Et.teamOrEnterpriseId,{dispatch:In,getState:wn}=(0,a.getStoreInstanceByTeamId)(Gt);(0,be.O4)(wn())&&In(ht({routeName:kt,params:Et,prevRouteInfo:Mt,reason:fn}))}u(ot,"quipActivityHistoryListener");const gt=u(rt=>{let{nextTeamId:Et,routeName:Mt,params:kt}=rt;const fn={routeName:Mt,params:kt};return Et&&(0,J.t2)(Et,"lastRoute",fn),!0},"save_route_to_local_config");var wt=e(3080748521),Dn=e(9488048047),Nn=e(532953487),Sn=e(2939274763),Bn=e(832411022);const pn=u(rt=>{let{prevTeamId:Et,nextTeamId:Mt,params:kt={}}=rt;const{dispatch:fn,getState:Gt}=(0,a.getStoreInstanceByTeamId)(Mt),In=Gt();if(Et!==Mt)return;const wn=(0,wt.MC)(In),qn=wn.entityId,es=kt.entityId;qn===Bn.d$&&es===Bn.d$&&kt.searchQuery&&wn.searchQuery!==kt.searchQuery&&(0,Nn.$)(In)!==kt.searchQuery&&fn((0,Dn.z)({encodedSearchString:kt.searchQuery})),qn!==es&&es===Bn.d$&&(kt.searchQuery&&fn((0,Dn.z)({encodedSearchString:kt.searchQuery})),fn((0,Sn.s)())),qn!==es&&qn===Bn.d$&&fn((0,Sn.w)())},"search_page_listener");var yn=e(210422728),jn=e(9551235052);function Zn(rt){let{prevTeamId:Et}=rt;const Mt=(0,a.getStoreInstanceByTeamId)(Et);return(0,jn.J)(Mt.getState())&&(Mt.dispatch((0,yn.T)(!0)),re.g.delete("setNavigatedDuringWarmBoot")),w.S.resolve()}u(Zn,"setNavigatedDuringWarmBoot");var Es=e(6495946979),Us=e(8473952534),bs=e(8213251995),Ss=e(3977512448);function rs(rt){let{nextTeamId:Et,prevRouteInfo:Mt,params:kt}=rt;var fn;const Gt=(0,a.getStoreInstanceByTeamId)(Et),In=Gt.getState(),wn=(0,bs.c8)(In),qn=(0,et.OL)(In,kt.entityId),es=(Mt==null||(fn=Mt.params)===null||fn===void 0?void 0:fn.entityId)||"";(es===tt.eE.CHANNELS||es===Ss.b||es===Ss.Z1)&&(kt!=null&&kt.entityId)&&qn&&!(0,Es.b)(qn)&&Gt.dispatch((0,Us.Tm)({channelId:kt.entityId,prevRoute:es})),wn&&(Mt==null?void 0:Mt.routeName)==="ROUTE_ENTITY"&&(0,Ie.A)(es)&&Gt.dispatch((0,Us.Tm)({channelId:null,prevRoute:null}))}u(rs,"setPreviewingFromChannelBrowserOrLaunchpad");var H=e(1302213854);const me=u(rt=>{let{prevTeamId:Et,nextTeamId:Mt}=rt;return Et!==Mt?(0,a.dispatchForClientStore)((0,H.Mb)(!0)):(0,a.dispatchForClientStore)((0,H.Mb)(!1))},"set_should_log_team_switch_metrics");var Fe=e(9143148823),ut=e(8628205589),An=e(4529239752),vn=e(9795506498);function Hn(rt){let{nextTeamId:Et,uuid:Mt,shouldReplaceState:kt,reason:fn}=rt;var Gt;if(!Et||!Mt)return;if(fn!==o.GB)if(kt)(0,a.dispatchForClientStore)((0,ut.HQ)({windowId:Pn.N2,entry:{id:Mt,ts:Date.now(),teamId:Et,isIA4:!1}}));else{const es=(0,An.XG)((0,a.getStateForClientStore)());es>0&&(0,a.dispatchForClientStore)((0,ut.$E)({windowId:Pn.N2,index:es})),(0,a.dispatchForClientStore)((0,ut.y2)({windowId:Pn.N2,entry:{id:Mt,ts:Date.now(),teamId:Et,isIA4:!1}}))}const In=(0,a.getStoreInstanceByTeamId)(Et),wn=In.getState();if(!((Gt=window.history.state)===null||Gt===void 0)&&Gt.isIA4)return;const qn=(0,$t.Gl)(wn);In.dispatch((0,vn.A)({windowId:Pn.N2,entry:qn}))}u(Hn,"updateIA4History");var Kt=e(235108050);const ts=u(rt=>{let{prevTeamId:Et,nextTeamId:Mt}=rt;if(Et===Mt||!Mt)return;const kt=(0,J.W6)("recentlyUsedTeamIds")||Et&&[Et]||[];kt.unshift(Mt),(0,J.q9)("recentlyUsedTeamIds",(0,Kt.A)(kt)),(0,J.t2)(Mt,"mostRecentlyUsedDate",new Date)},"update_recently_used_teams");var _s=e(9399618736),ps;(function(rt){rt.JA_JP="ja-JP",rt.EN_US="en-US",rt.EN_GB="en-GB",rt.ES_ES="es-ES",rt.ES_LA="es-LA",rt.FR_FR="fr-FR",rt.DE_DE="de-DE",rt.PT_BR="pt-BR",rt.KO_KR="ko-KR",rt.IT_IT="it-IT",rt.ZH_CN="zh-CN",rt.ZH_TW="zh-TW"})(ps||(ps={}));const Rs=ps.EN_US;var gs=e(4423055085),is=e(9421999304),Is=e(571104883),Ge=e(9907843289),It=e(2554594353);function Ve(rt){let{nextTeamId:Et,routeName:Mt,params:kt}=rt;Et&&((0,a.dispatchForClientStore)((0,It.b)({teamId:Et,routeName:Mt,params:kt,fromNavigation:!0})),(0,a.getStoreInstanceByTeamId)(Et)&&(0,a.dispatchForTeamId)(Et,(0,yn.w)({routeName:Mt,params:kt})))}u(Ve,"syncRouteStoreWithUrl");function st(rt){return At.apply(this,arguments)}u(st,"navigateToLastSavedRoute");function At(){return At=(0,t.coroutine)(function*(rt){let{prevTeamId:Et,nextTeamId:Mt,navigationTimestamp:kt}=rt;const fn=(0,a.getStateForClientStore)();if(!Mt||(0,l.hasWorkspaceFailedToBoot)(fn,Mt)||(0,l.doesWorkspaceNeed2FASetup)(fn,Mt)||(0,l.isWorkspaceExpired)(fn,Mt)||(0,l.isWorkspacePendingAuth)(fn,Mt))return!0;const Gt=(0,a.getStoreInstanceByTeamId)(Mt),In=Gt&&Gt.getState(),wn=(0,wt.MC)(In),qn=(0,wt.D8)(In)||mt._G;if((0,Is.y3)()&&qn===r.o)return!0;const es=!Et;return yield(0,o._U)(qn,{...wn,teamId:Mt},{reason:"navigateToLastSavedRoute",shouldReplaceState:es,navigationTimestamp:kt}),!1}),At.apply(this,arguments)}u(At,"_navigateToLastSavedRoute");function St(rt){let{prevTeamId:Et,nextTeamId:Mt}=rt;if(!Et||!Mt||Et===Mt)return;const kt=xt(Mt);return w.S.resolve((0,is.xS)(kt,Mt)).then(()=>{})}u(St,"ensureCorrectLocaleForTeam");function Ot(rt){let{prevTeamId:Et,nextTeamId:Mt}=rt;if(!Et||!Mt||Et===Mt)return;const kt=xt(Mt);if(kt)return(0,is.zI)(kt)}u(Ot,"ensureCorrectLocaleForExternalLibs");function xt(rt){const Et=window.location.search.match(/[&?]locale=([a-zA-Z-]*)/),Mt=Et?Et[1]:(0,J._z)(rt,"user_locale");return Mt&&(0,Ge.YI)(Mt)?Mt:Rs}u(xt,"getLocaleForTeam");const tn=(0,Z.A)(En);function En(){re.g.set("maybeOpenOtherTeamInBrowser",(0,o.Y8)(ft)),re.g.set("modalListenerBefore",(0,o.Y8)(Xe)),re.g.set("maybeFinishSignin",(0,o.Y8)(Tt)),re.g.set("maybeRedirectEntity",(0,o.Y8)(Vn)),re.g.set("startTeamSwitchTiming",(0,o.Y8)(Fe.Ay)),re.g.set("navigateToLastSavedRoute",(0,o.Y8)(st,[r.o])),re.g.set("ensureChannel",(0,o.Y8)(ze,[])),re.g.set("draftsListenerBefore",(0,o.Y8)(Re)),re.g.set("ensureCorrectLocaleForExternalLibs",(0,o.Dd)(Ot)),re.g.set("searchPageListener",(0,o.Dd)(pn)),re.g.set("updateIA4History",(0,o.Dd)(Hn)),re.g.set("maybeRunTeamSwitchNavigateListeners",(0,o.Dd)($n)),re.g.set("setNavigatedDuringWarmBoot",(0,o.Dd)(Zn)),re.g.set("pinsPopoverListenerAfter",(0,o.Y8)(bt)),re.g.set("syncRouteStoreWithUrl",(0,o.Dd)(Ve)),re.g.set("ensureCorrectLocaleForTeam",(0,o.Dd)(St)),re.g.set("setShouldLogTeamSwitchMetrics",(0,o.Dd)(me)),re.g.set("setLocalConfigForTeamWithKey",(0,o.Dd)(gt)),re.g.set("dismissFloatingSidebar",(0,o.Dd)(q)),re.g.set("updateRecentlyUsedTeams",(0,o.Dd)(ts)),re.g.set("maybeFetchClientPermissions",(0,o.Dd)(He)),re.g.set("maybeIncrementHistoryLength",(0,o.Dd)(_s.Cu)),re.g.set("setPreviewingFromChannelBrowserOrLaunchpad",(0,o.Dd)(rs)),re.g.set("channelCanvasListener",(0,o.Dd)(Ce)),re.g.set("quipActivityHistoryListener",(0,o.Dd)(ot))}u(En,"registerRouteListenersInner"),(0,gs.ul)("router.listeners",()=>[...re.g.entries()]);const an={syncRouteStoreWithUrl:Ve,navigateToLastSavedRoute:st,ensureCorrectLocaleForTeam:St,ensureCorrectLocaleForExternalLibs:Ot,getLocaleForTeam:xt};Object.defineProperty(an,"syncRouteStoreWithUrl",{get:()=>Ve,set:rt=>{Ve=rt}}),Object.defineProperty(an,"navigateToLastSavedRoute",{get:()=>st,set:rt=>{st=rt}}),Object.defineProperty(an,"ensureCorrectLocaleForTeam",{get:()=>St,set:rt=>{St=rt}}),Object.defineProperty(an,"ensureCorrectLocaleForExternalLibs",{get:()=>Ot,set:rt=>{Ot=rt}}),Object.defineProperty(an,"getLocaleForTeam",{get:()=>xt,set:rt=>{xt=rt}});var Vt=e(3245843483);const dn=u(()=>({deviceId:Vt.iCQ}),"getSharedTracerTags");var Un=e(6338445630);const On=function(){var rt=(0,t.coroutine)(function*(){Vt.goh.isAvailable()&&(0,Vt.goh)().includes("DisableServiceWorker")&&(yield(0,Un._E)())});return u(function(){return rt.apply(this,arguments)},"disableServiceWorkerForClientConfig")}(),Fn=function(){var rt=(0,t.coroutine)(function*(){(0,Is.X5)()===Is.h5.SAFARI&&(yield(0,Un._E)())});return u(function(){return rt.apply(this,arguments)},"disableServiceWorkerForSafari")}(),xn=function(){var rt=(0,t.coroutine)(function*(){yield Fn(),yield On()});return u(function(){return rt.apply(this,arguments)},"maybeDisableServiceWorker")}();var ms=e(7139225017),Ut=e(844478244),ns=e(6123258136),Kn=e(1319016163);function Jn(rt){return zn.apply(this,arguments)}u(Jn,"setupOtherTeamsToBoot");function zn(){return zn=(0,t.coroutine)(function*(rt){let{contextualInfo:Et}=rt;return{contextualInfo:Et,otherTeamsToBoot:(0,Kn.gv)()}}),zn.apply(this,arguments)}u(zn,"_setupOtherTeamsToBoot");var ds=e(5695315324),mn=e(8148939499),ss=e(723189278),fs=e(4148579738),ls=e(4724591729),Xn=e(6968387112),Os=e(8848660647),Ls=e(7595282574),As=e(3803432550),Ps=e(2371143272);xn(),window.boot_html__initial_boot_duration=Date.now()-window.sonic_boot__phase_1_5__start,window.boot_render_start=Date.now();function Ms(rt){return rt.registerConfig({isPersistenceEnabled:!0,isMultiTeamEnabled:(0,vt.VA)()}),rt.registerErrorHandlers(v),rt.registerDynamicImportFns({data:()=>Promise.all([e.e("gantry-v2-vendors-async"),e.e("gantry-v2-shared-boot-async"),e.e("gantry-v2-vendors-async-client"),e.e("client-boot-styles"),e.e("gantry-v2-async-client-boot-data")]).then(e.bind(e,8407863082)),apis:()=>Promise.all([e.e("gantry-v2-shared-boot-async"),e.e("gantry-v2-async-client-boot-apis")]).then(e.bind(e,7413259139)),render:()=>Promise.all([e.e("gantry-v2-vendors-async"),e.e("gantry-v2-shared-boot-async"),e.e("gantry-v2-vendors-async-client"),e.e("client-boot-styles"),e.e("gantry-v2-async-client-boot-render")]).then(e.bind(e,4083282710)),deferred:()=>Promise.all([e.e("gantry-v2-vendors-async"),e.e("gantry-v2-shared-boot-async"),e.e("gantry-v2-vendors-async-client"),e.e("client-boot-styles"),e.e("gantry-v2-async-client-boot-deferred")]).then(e.bind(e,6826272268))}),rt.registerInitialApiCalls({experimentData:f.dC,featureFlagData:f.BG,clientBootData:F,viewData:j,allEnterpriseData:te,featureAccessData:f.jH}),fs.e.register(dn),(0,$.b)(rt),rt.hooks.beforeDynamicImportsStart.tap("Render Placeholder",function(){var Et=(0,t.coroutine)(function*(Mt){let{contextualInfo:kt}=Mt;return(0,i.Sp)({teamId:kt.teamOrEnterpriseBootId,showTeamSwitcher:(0,mn.A)().length>1}),{contextualInfo:kt}});return function(Mt){return Et.apply(this,arguments)}}()),rt.hooks.afterDynamicImportsStart.tap("Set routes",function(){var Et=(0,t.coroutine)(function*(Mt){let{contextualInfo:kt}=Mt;return _n(),{contextualInfo:kt}});return function(Mt){return Et.apply(this,arguments)}}()),rt.hooks.afterDynamicImportsStart.tap("Set up client store",function(){var Et=(0,t.coroutine)(function*(Mt){let{contextualInfo:kt}=Mt;return(0,As.x)(kt.teamId),{contextualInfo:kt}});return function(Mt){return Et.apply(this,arguments)}}()),rt.hooks.afterDynamicImportsStart.tap("Register route listeners",function(){var Et=(0,t.coroutine)(function*(Mt){let{contextualInfo:kt}=Mt;return tn(),{contextualInfo:kt}});return function(Mt){return Et.apply(this,arguments)}}()),rt.hooks.afterDynamicImportsStart.tap("Update last active team ID in localConfig",function(){var Et=(0,t.coroutine)(function*(Mt){let{contextualInfo:kt}=Mt;const{teamId:fn}=kt;return fn?(fn!==(0,J.W6)("lastActiveTeamId")&&(0,J.q9)("lastActiveTeamId",fn),{contextualInfo:kt}):{contextualInfo:kt}});return function(Mt){return Et.apply(this,arguments)}}()),rt.hooks.beforeInitializeTeam.tap("Halt further boot if client is reloading",function(){var Et=(0,t.coroutine)(function*(Mt){let{contextualInfo:kt}=Mt;return window.isReloading?((0,n.pq)("BOOT",`(${kt.teamId}) Ongoing reload detected; Cancelling boot.`),(0,ss.A)()):{contextualInfo:kt}});return function(Mt){return Et.apply(this,arguments)}}()),rt.hooks.beforeInitializeTeam.tap("Set tokens",function(){var Et=(0,t.coroutine)(function*(Mt){let{contextualInfo:kt}=Mt;return(0,ns.L)({contextualInfo:kt})});return function(Mt){return Et.apply(this,arguments)}}()),rt.hooks.beforeInitializeTeam.tap(" Kick off objectStore fetch for minChannelUpdated ",function(){var Et=(0,t.coroutine)(function*(Mt){let{contextualInfo:kt}=Mt;return(0,C.EZ)()&&(0,O.z6)({teamId:kt.teamId,userId:kt.userId}),{contextualInfo:kt}});return function(Mt){return Et.apply(this,arguments)}}()),rt.hooks.setupMultiTeam.tap("Set up all other teams to boot if in multi team mode",Jn),rt.run()}if(u(Ms,"boot"),!(0,ms.A)()){const rt=(0,Ut.z4)(ds.Y.CLIENT_V2);if(!(0,Ls.z$)()&&(0,ls.KV)()&&(0,Ps.b)()){const Et=e(8904626639);Et.init({dsn:`https://4162106b525941d087e5f8f5e446ae9b@app.${(0,Xn.Xk)()}/apps/sentryproxy/5865811`,release:`webapp@${(0,Os.HF)()}`,defaultIntegrations:!1,integrations:[Et.browserTracingIntegration({enableInp:!0}),Et.browserProfilingIntegration(),Et.httpContextIntegration()],sampleRate:1,tracesSampleRate:1,profilesSampleRate:1,tracePropagationTargets:[],replaysSessionSampleRate:0,replaysOnErrorSampleRate:0})}Ms(rt)}const xs={boot:Ms}},879418974:(z,A,e)=>{"use strict";e.d(A,{d:()=>a});var t=e(9289081806),n=e(8798294025),s=e(6113051341);function a(c){let{channels:o,selfId:r}=c;const l={};return o.some((_,d)=>{const i=_==null?void 0:_.id;return(0,s.N)(_)?(l.general=i,!0):((0,t.Ur)(_)&&(l.slackbot=i),r&&(0,n.e)(_)===r&&(l.self=i),d||(l.first=i),!1)}),l.general||l.slackbot||l.self||l.first}u(a,"getAnyChannelForRouting")},1460808057:(z,A,e)=>{"use strict";e.d(A,{E:()=>r});var t=e(9706240641),n=e.n(t),s=e(879418974),a=e(8959118205),c=e(9910898937),o=e(6533394955);function r(i){return l.apply(this,arguments)}u(r,"getRouteInfo");function l(){return l=(0,t.coroutine)(function*(i){let{contextualInfo:m,channels:h}=i;const{teamId:v,isForegroundTeam:y}=m,T=(0,o.getStoreInstanceByTeamId)(v),I=(0,c.Gf)({store:T,shouldSetFocus:y});return I||_({contextualInfo:m,channels:h})}),l.apply(this,arguments)}u(l,"_getRouteInfo");function _(i){let{contextualInfo:m,channels:h}=i;const{teamId:v}=m;if(!v)return null;const y=(0,c.lQ)(v);if(y)return y;if(h){const T=m.userId;return d({channels:h,selfId:T})}return null}u(_,"calculateRouteInfo");function d(i){let{channels:m,selfId:h}=i;if(!m.length)return null;const v={routeName:a._G,params:{}},y=(0,s.d)({channels:m,selfId:h});return y&&(v.params.entityId=y),v}u(d,"getRouteFromBootData")},2212859256:(z,A,e)=>{"use strict";e.d(A,{y:()=>c});var t=e(9706702639),n=e(2069372582),s=e(6533394955),a=e(1314103953);function c(o){if(!o)return;const r=(0,s.getStoreInstanceByTeamId)(o);r&&((0,n.pq)("BOOT",`(${o}) Boot complete`),t.g.delete("setNavigatedDuringWarmBoot"),r.dispatch((0,a.b)(!1)),r.dispatch((0,a.k)(!1)))}u(c,"markTeamBootCompleted")},4892637646:(z,A,e)=>{"use strict";e.d(A,{b:()=>r,h:()=>c});var t=e(9706240641),n=e.n(t),s=e(7906695911),a=e(2872463257);function c(d){return o.apply(this,arguments)}u(c,"collectInitialPageLoadMetrics");function o(){return o=(0,t.coroutine)(function*(d){let{contextualInfo:i}=d;const{getTraceMeta:m,isBootingWarm:h,appName:v}=i,{getTracer:y,tags:T}=m(),I=(yield h)?s.H.WARM:s.H.COLD,p=y().createTrace({traceName:s.S.BOOT_INITIAL_LOAD,tags:{boot_type:I,app_name:v,...T},autoCreateRootSpan:!1,samplingOptions:{sampleType:a.nl.ALWAYS}});p.startSpan(s.S.BOOT_INITIAL_LOAD,{setAsRootSpan:!0,startTime:performance.timing.fetchStart,closeTime:window.boot_render_start}),p.startSpan(s.S.BOOT_INITIAL_LOAD_HTML,{startTime:performance.timing.fetchStart,closeTime:performance.timing.fetchStart+window.sonic_boot__phase_1__duration}),p.startSpan(s.S.BOOT_INITIAL_LOAD_JS,{startTime:window.sonic_boot__phase_1_5__start,closeTime:window.sonic_boot__phase_1_5__start+window.boot_html__initial_boot_duration}),y().reportTrace(p)}),o.apply(this,arguments)}u(o,"_collectInitialPageLoadMetrics");function r(d){d.hooks.beforeDynamicImportsStart.addCallIntercept(i=>l(i)),d.hooks.renderApp.addCallIntercept(i=>_(i))}u(r,"setupBootMetricsTracing");function l(d){return i=>{const{getTracer:m,setTrace:h,rootTrace:v}=i.contextualInfo.getTraceMeta(),T=m().createTrace({traceName:s.S.BOOT_TIME_TO_START_RENDER,autoCreateRootSpan:!1,parentSpanId:v.getRootSpanId(),traceId:v.getTraceId()});return T.startSpan(s.S.BOOT_TIME_TO_START_RENDER,{setAsRootSpan:!0,startTimeMs:window.boot_render_start}),h(T),d(i)}}u(l,"startTimeToRenderTrace");function _(d){return function(){var i=(0,t.coroutine)(function*(m){const{isBootingWarm:h,getTraceMeta:v,isForegroundTeam:y}=m.contextualInfo,{getTracer:T,getTrace:I,setTrace:p,rootTrace:g}=v(),E=T(),f=I(),O=(yield h)?s.H.WARM:s.H.COLD;return f.addTags({boot_type:O,is_foreground_team:y}),E.reportTrace(f),p(g),d(m)});return function(m){return i.apply(this,arguments)}}()}u(_,"endTimeToRenderTrace")},7906695911:(z,A,e)=>{"use strict";e.d(A,{H:()=>n,S:()=>t});var t;(function(s){s.BOOT_INITIAL_LOAD="boot:initial_load",s.BOOT_INITIAL_LOAD_HTML="boot:initial_load:html",s.BOOT_INITIAL_LOAD_JS="boot:initial_load:js",s.BOOT_TIME_TO_START_RENDER="boot:time_to_start_render",s.BOOT_TIME_TO_MOUNT_CLIENT="boot:time_to_mount_client"})(t||(t={}));var n;(function(s){s.COLD="cold",s.WARM="warm"})(n||(n={}))},9706702639:(z,A,e)=>{"use strict";e.d(A,{g:()=>t});const t=new Map},1609960255:(z,A,e)=>{"use strict";e.d(A,{A:()=>n});var t=e(7114008777);const n=u((s,a,c)=>c&&a&&s===t.L.Replies?"chrono_unreads":c&&!a&&s===t.L.Replies?"chrono_reads_and_unreads":a&&s===t.L.Replies?"chrono_threads_unreads":s===t.L.Replies?"chrono_threads_reads_and_unreads":c&&a?"experimental_all_chrono_unreads_v1":c&&s===t.L.All?"experimental_all_chrono_reads_and_unreads_v1":a?"chrono_unreads":"chrono_reads_and_unreads","getFetchMode")},4577150972:(z,A,e)=>{"use strict";e.d(A,{c:()=>l});var t=e(3398586081),n=e(1609960255),s=e(7114008777),a=e(7156540029),c=e(8352634987),o=e(4256000139),r=e(6533394955);const l=(0,t.A)(function(){let _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:s.L.All,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return new c.Ay({storeKey:"activityIA4",fetch:i=>(0,r.dispatchForTeamId)(i,(0,o.Q)({limit:a.Q1,filter:_,fetchNew:!0,mode:(0,n.A)(_,d)})),isEnabled:()=>!0,metricsName:"activity",markStaleAfterSlowReconnect:()=>!0})})},1247361162:(z,A,e)=>{"use strict";e.d(A,{ES:()=>_,Eg:()=>h,Gt:()=>T,KD:()=>v,gW:()=>y,mt:()=>p,om:()=>I,rz:()=>d,sG:()=>i,ut:()=>m,yN:()=>g});var t=e(7114008777),n=e(6695353875),s=e(4577150972),a=e(5921578648),c=e(9829579108),o=e(8847766420);const r=u((E,f)=>{var O,C;const M=(0,n.kz)(f),D=(0,a.S)({filter:E,isUnreadMode:!!(!(f==null||(O=f.activityIA4)===null||O===void 0)&&O.filterUnreads),isFilteringRevampToggledOn:M});return(C=f.activityIA4)===null||C===void 0?void 0:C[D]},"getActivityListForFilter"),l=(0,c.Ay)(E=>{var f,O,C;const M=(0,o.ZT)(E),D=(f=E.activityIA4)===null||f===void 0?void 0:f.all;return((E==null||(O=E.activityIA4)===null||O===void 0?void 0:O.selectedTabId)===t.L.All||!(!(E==null||(C=E.activityIA4)===null||C===void 0)&&C.selectedTabId))&&(D!=null&&D.length)&&(0,s.c)(t.L.All,!1).maybeRefetch(M,t.N),E&&E.activityIA4&&D});l.meta={name:"createSelector",key:"createSelectorgetReadAndUnreadActivityList",description:E=>{var f,O,C;const M=(0,o.ZT)(E),D=(f=E.activityIA4)===null||f===void 0?void 0:f.all;return((E==null||(O=E.activityIA4)===null||O===void 0?void 0:O.selectedTabId)===t.L.All||!(!(E==null||(C=E.activityIA4)===null||C===void 0)&&C.selectedTabId))&&(D!=null&&D.length)&&(0,s.c)(t.L.All,!1).maybeRefetch(M,t.N),E&&E.activityIA4&&D}};const _=(0,c.Ay)(E=>{var f,O;const C=(0,o.ZT)(E),M=r(t.L.All,E);if(((E==null||(f=E.activityIA4)===null||f===void 0?void 0:f.selectedTabId)===t.L.All||!(!(E==null||(O=E.activityIA4)===null||O===void 0)&&O.selectedTabId))&&(M!=null&&M.length)){var D;(0,s.c)(t.L.All,(D=E.activityIA4)===null||D===void 0?void 0:D.filterUnreads).maybeRefetch(C,t.N)}return E&&E.activityIA4&&M});_.meta={name:"createSelector",key:"createSelectorgetActivityList",description:E=>{var f,O;const C=(0,o.ZT)(E),M=r(t.L.All,E);if(((E==null||(f=E.activityIA4)===null||f===void 0?void 0:f.selectedTabId)===t.L.All||!(!(E==null||(O=E.activityIA4)===null||O===void 0)&&O.selectedTabId))&&(M!=null&&M.length)){var D;(0,s.c)(t.L.All,(D=E.activityIA4)===null||D===void 0?void 0:D.filterUnreads).maybeRefetch(C,t.N)}return E&&E.activityIA4&&M}};const d=(0,c.Ay)(E=>{var f;const O=(0,o.ZT)(E),C=r(t.L.Mentions,E);if((E==null||(f=E.activityIA4)===null||f===void 0?void 0:f.selectedTabId)===t.L.Mentions&&C.length){var M;(0,s.c)(t.L.Mentions,(M=E.activityIA4)===null||M===void 0?void 0:M.filterUnreads).maybeRefetch(O,t.N)}return E&&E.activityIA4&&C});d.meta={name:"createSelector",key:"createSelectorgetActivityListMentions",description:E=>{var f;const O=(0,o.ZT)(E),C=r(t.L.Mentions,E);if((E==null||(f=E.activityIA4)===null||f===void 0?void 0:f.selectedTabId)===t.L.Mentions&&C.length){var M;(0,s.c)(t.L.Mentions,(M=E.activityIA4)===null||M===void 0?void 0:M.filterUnreads).maybeRefetch(O,t.N)}return E&&E.activityIA4&&C}};const i=(0,c.Ay)(E=>{var f;const O=(0,o.ZT)(E),C=r(t.L.Replies,E);if((E==null||(f=E.activityIA4)===null||f===void 0?void 0:f.selectedTabId)===t.L.Replies&&C.length){var M;(0,s.c)(t.L.Replies,(M=E.activityIA4)===null||M===void 0?void 0:M.filterUnreads).maybeRefetch(O,t.N)}return E&&E.activityIA4&&C});i.meta={name:"createSelector",key:"createSelectorgetActivityListReplies",description:E=>{var f;const O=(0,o.ZT)(E),C=r(t.L.Replies,E);if((E==null||(f=E.activityIA4)===null||f===void 0?void 0:f.selectedTabId)===t.L.Replies&&C.length){var M;(0,s.c)(t.L.Replies,(M=E.activityIA4)===null||M===void 0?void 0:M.filterUnreads).maybeRefetch(O,t.N)}return E&&E.activityIA4&&C}};const m=(0,c.Ay)(E=>{var f,O,C;const M=(0,o.ZT)(E),D=r(t.L.Reactions,E);if((E==null||(f=E.activityIA4)===null||f===void 0?void 0:f.selectedTabId)===t.L.Reactions&&(!(E==null||(O=E.activityIA4)===null||O===void 0||(C=O.reactions)===null||C===void 0)&&C.length)){var P;(0,s.c)(t.L.Reactions,(P=E.activityIA4)===null||P===void 0?void 0:P.filterUnreads).maybeRefetch(M,t.N)}return E&&E.activityIA4&&D});m.meta={name:"createSelector",key:"createSelectorgetActivityListReactions",description:E=>{var f,O,C;const M=(0,o.ZT)(E),D=r(t.L.Reactions,E);if((E==null||(f=E.activityIA4)===null||f===void 0?void 0:f.selectedTabId)===t.L.Reactions&&(!(E==null||(O=E.activityIA4)===null||O===void 0||(C=O.reactions)===null||C===void 0)&&C.length)){var P;(0,s.c)(t.L.Reactions,(P=E.activityIA4)===null||P===void 0?void 0:P.filterUnreads).maybeRefetch(M,t.N)}return E&&E.activityIA4&&D}};const h=(0,c.Ay)(E=>{var f;const O=(0,o.ZT)(E);if(!(E==null||(f=E.activityIA4)===null||f===void 0)&&f.filterUnreads){var C;(0,s.c)(t.L.Unreads,(C=E.activityIA4)===null||C===void 0?void 0:C.filterUnreads).maybeRefetch(O,t.N)}return E&&E.activityIA4&&E.activityIA4.unreads});h.meta={name:"createSelector",key:"createSelectorgetActivityListUnreads",description:E=>{var f;const O=(0,o.ZT)(E);if(!(E==null||(f=E.activityIA4)===null||f===void 0)&&f.filterUnreads){var C;(0,s.c)(t.L.Unreads,(C=E.activityIA4)===null||C===void 0?void 0:C.filterUnreads).maybeRefetch(O,t.N)}return E&&E.activityIA4&&E.activityIA4.unreads}};const v=(0,c.Ay)(E=>{var f;const O=(0,o.ZT)(E),C=r(t.L.Apps,E);if((E==null||(f=E.activityIA4)===null||f===void 0?void 0:f.selectedTabId)===t.L.Apps&&C.length){var M;(0,s.c)(t.L.Apps,(M=E.activityIA4)===null||M===void 0?void 0:M.filterUnreads).maybeRefetch(O,t.N)}return E&&E.activityIA4&&C});v.meta={name:"createSelector",key:"createSelectorgetActivityListApps",description:E=>{var f;const O=(0,o.ZT)(E),C=r(t.L.Apps,E);if((E==null||(f=E.activityIA4)===null||f===void 0?void 0:f.selectedTabId)===t.L.Apps&&C.length){var M;(0,s.c)(t.L.Apps,(M=E.activityIA4)===null||M===void 0?void 0:M.filterUnreads).maybeRefetch(O,t.N)}return E&&E.activityIA4&&C}};const y=(0,c.Ay)(E=>{var f;const O=(0,o.ZT)(E),C=r(t.L.Channels,E);if((E==null||(f=E.activityIA4)===null||f===void 0?void 0:f.selectedTabId)===t.L.Channels&&C.length){var M;(0,s.c)(t.L.Channels,(M=E.activityIA4)===null||M===void 0?void 0:M.filterUnreads).maybeRefetch(O,t.N)}return E&&E.activityIA4&&C});y.meta={name:"createSelector",key:"createSelectorgetActivityListChannels",description:E=>{var f;const O=(0,o.ZT)(E),C=r(t.L.Channels,E);if((E==null||(f=E.activityIA4)===null||f===void 0?void 0:f.selectedTabId)===t.L.Channels&&C.length){var M;(0,s.c)(t.L.Channels,(M=E.activityIA4)===null||M===void 0?void 0:M.filterUnreads).maybeRefetch(O,t.N)}return E&&E.activityIA4&&C}};const T=(0,c.Ay)(E=>{var f;const O=(0,o.ZT)(E),C=r(t.L.Priority,E);if((E==null||(f=E.activityIA4)===null||f===void 0?void 0:f.selectedTabId)===t.L.Priority&&C.length){var M;(0,s.c)(t.L.Priority,(M=E.activityIA4)===null||M===void 0?void 0:M.filterUnreads).maybeRefetch(O,t.N)}return E&&E.activityIA4&&C});T.meta={name:"createSelector",key:"createSelectorgetActivityListPriority",description:E=>{var f;const O=(0,o.ZT)(E),C=r(t.L.Priority,E);if((E==null||(f=E.activityIA4)===null||f===void 0?void 0:f.selectedTabId)===t.L.Priority&&C.length){var M;(0,s.c)(t.L.Priority,(M=E.activityIA4)===null||M===void 0?void 0:M.filterUnreads).maybeRefetch(O,t.N)}return E&&E.activityIA4&&C}};const I=(0,c.Ay)(E=>{var f;const O=(0,o.ZT)(E),C=r(t.L.EverythingElse,E);if((E==null||(f=E.activityIA4)===null||f===void 0?void 0:f.selectedTabId)===t.L.EverythingElse&&C.length){var M;(0,s.c)(t.L.EverythingElse,(M=E.activityIA4)===null||M===void 0?void 0:M.filterUnreads).maybeRefetch(O,t.N)}return E&&E.activityIA4&&C});I.meta={name:"createSelector",key:"createSelectorgetActivityListEverythingElse",description:E=>{var f;const O=(0,o.ZT)(E),C=r(t.L.EverythingElse,E);if((E==null||(f=E.activityIA4)===null||f===void 0?void 0:f.selectedTabId)===t.L.EverythingElse&&C.length){var M;(0,s.c)(t.L.EverythingElse,(M=E.activityIA4)===null||M===void 0?void 0:M.filterUnreads).maybeRefetch(O,t.N)}return E&&E.activityIA4&&C}};const p=(0,c.Ay)(E=>{var f;const O=(0,o.ZT)(E),C=r(t.L.DMS,E);if((E==null||(f=E.activityIA4)===null||f===void 0?void 0:f.selectedTabId)===t.L.DMS&&C.length){var M;(0,s.c)(t.L.DMS,(M=E.activityIA4)===null||M===void 0?void 0:M.filterUnreads).maybeRefetch(O,t.N)}return E&&E.activityIA4&&C});p.meta={name:"createSelector",key:"createSelectorgetActivityListDms",description:E=>{var f;const O=(0,o.ZT)(E),C=r(t.L.DMS,E);if((E==null||(f=E.activityIA4)===null||f===void 0?void 0:f.selectedTabId)===t.L.DMS&&C.length){var M;(0,s.c)(t.L.DMS,(M=E.activityIA4)===null||M===void 0?void 0:M.filterUnreads).maybeRefetch(O,t.N)}return E&&E.activityIA4&&C}};const g=(0,c.Ay)(E=>{var f;const O=(0,o.ZT)(E),C=r(t.L.Invitations,E);if((E==null||(f=E.activityIA4)===null||f===void 0?void 0:f.selectedTabId)===t.L.Invitations&&(C!=null&&C.length)){var M;(0,s.c)(t.L.Invitations,(M=E.activityIA4)===null||M===void 0?void 0:M.filterUnreads).maybeRefetch(O,t.N)}return E&&E.activityIA4&&C});g.meta={name:"createSelector",key:"createSelectorgetActivityListInvitations",description:E=>{var f;const O=(0,o.ZT)(E),C=r(t.L.Invitations,E);if((E==null||(f=E.activityIA4)===null||f===void 0?void 0:f.selectedTabId)===t.L.Invitations&&(C!=null&&C.length)){var M;(0,s.c)(t.L.Invitations,(M=E.activityIA4)===null||M===void 0?void 0:M.filterUnreads).maybeRefetch(O,t.N)}return E&&E.activityIA4&&C}}},5921578648:(z,A,e)=>{"use strict";e.d(A,{S:()=>s});var t=e(5235917009),n=e(7114008777);const s=u(a=>{let{filter:c,isUnreadMode:o,isFilteringRevampToggledOn:r}=a;return c===n.L.Reactions?c:o&&c===n.L.EverythingElse?`unread${c.charAt(0).toUpperCase()+c.slice(1)}`:o&&r?`unread${(0,t.A)(c)}`:!r&&o?"unreads":c},"getFilterForSelectedMode")},4256000139:(z,A,e)=>{"use strict";e.d(A,{Q:()=>x});var t=e(3290693121),n=e(7114008777),s=e(6422693406),a=e(9694536345),c=e(9648131521),o=e(3622175906),r=e(169770637),l=e(4875732686),_=e(796111729),d=e(3855029223),i=e(6695353875),m=e(9006747218),h=e(4577150972),v=e(5921578648),y=e(6845763719);const T=["external_channel_invite","shared_workspace_invite","external_dm_invite"],I=["at_user","at_user_group","at_channel","at_everyone","keyword","list_record_assigned","list_user_mentioned"],p=u((F,W)=>{let{experimentBundleAppsActivityWithBEGroupOn:Y,isInbox:S,mode:L}=W;const w=Y?"bot_dm_bundle":"bot_dm";let J=["thread_reply","message_reaction","internal_channel_invite","list_record_edited",w,...I,...T];const G=F.toLowerCase();if(!(L==="experimental_all_chrono_unreads_v1"||L==="experimental_all_chrono_reads_and_unreads_v1"||L==="experimental_priority_unreads_v1"||L==="experimental_everything_else_reads_and_unreads_v1"||L==="experimental_everything_else_unreads_v1"))return G.includes("mentions")&&(J=I),G.includes("apps")&&(J=[w]),G.includes("replies")&&(J=void 0),S&&G.includes("replies")&&(J=["experimental_thread"]),G.includes("reactions")&&(J=["message_reaction"]),G.includes("unreads")&&(J=[w,"thread_reply","internal_channel_invite",...I,...T]),G.includes("invitations")&&(J=["internal_channel_invite",...T]),S&&G.includes("channels")&&(J=["experimental_channels"]),S&&G.includes("dms")&&(J=["experimental_dms"]),S&&J&&(G.includes("all")||G.includes("unreads"))&&(J.push("experimental_dms"),J.push("experimental_channels")),J},"getActivityTypes");var g=e(1031947056),E=e(8847766420),f=e(3694676182),O=e(1496122061),C=e(6111266013),M=e(2479677519),D=e(1392261213),P=e(3683482182);const k={"action-items":!0},x=(0,g.Ay)("Fetch user activity",function(F,W){let{limit:Y,filter:S,mode:L,fetchNew:w,isUnreadMode:J,isInbox:G,types:X}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{limit:20,mode:"chrono_reads_and_unreads",filter:n.L.All,isInbox:!1};F((0,m.G3)(!0));const te=W(),le=(0,E.ZT)(te),ve=(0,y.F)(te),Q=(0,y.S1)(te),Ae=(0,y.d5)(te),ae=(0,y.hT)(te),he=(0,l.y)(te),_e=(0,i.UU)(te),ee=(0,i.kz)(te),de=(0,t.a)(te),Ie=(0,v.S)({filter:S,isUnreadMode:J!==void 0?J:ae,isFilteringRevampToggledOn:ee}),ce=ve==null?void 0:ve[Ie],j=X||p(Ie,{experimentBundleAppsActivityWithBEGroupOn:_e,isInbox:G,mode:L});return k!=null&&k[S]||!w&&!ce?(F((0,m.G3)(!1)),s.S.resolve()):((0,h.c)(S,ae).markObjectsAsFresh(le,[n.N]),F((0,c.X)({limit:Y,reason:"fetchActivityFeed",types:j,mode:L,cursor:w?void 0:ce,isInbox:G})).then(N=>{var b;if(!N.items)return;if(F((0,m.bl)({nextCursor:N==null||(b=N.response_metadata)===null||b===void 0?void 0:b.next_cursor,items:N.items,filter:Ie,refreshItems:de&&w})),L==="chrono_unreads"){const K=(0,y.cJ)(W()),B=(0,P.xY)(W());N.items.length!==K&&F((0,a.O)()).then($=>{F((0,f.Q7)($));const Z=(0,d.E)({state:te}),re=(0,_.Ay)({getState:W,label:"ACTIVITY_BADGING"});try{const Te=Z.createSpan({name:"ia4client_activity_badge:mismatch",samplingOptions:{sampleType:r.tS.ALWAYS},options:{tags:{num_unread_activity_items:N.items.length,old_activity_badge_count:K,new_channel_badges:JSON.stringify($.channelBadges),old_channel_badges:JSON.stringify(B)}}});Te.close(),Z.reportSpans([Te]),re.info(`Activity badge mismatch. number of unread activity.feed items: ${N.items.length} activityBadgeCount: ${K}: counts.channelBadges: ${JSON.stringify($==null?void 0:$.channelBadges)} old channelBadges: ${JSON.stringify(B)}`)}catch{}})}const R="slack-connect-fetch-invites-for-activity-feed";if(w&&!Q&&["all","invitations","unreadAll","unreadInvitations"].includes(S)&&N.items.some(K=>{let{item:B}=K;return T.includes(B.type)})){const K=F((0,C.p)({direction:o.D.Incoming,reason:R})),B=he?F((0,D.A)({reason:R})):s.S.resolve({inboundConnectInvites:[],outboundConnectInvites:[]});s.S.all([K,B]).then(()=>F((0,m.xv)(!0)))}if(w&&!Ae&&["all","invitations","unreadAll","unreadInvitations"].includes(S)){const K=F((0,O.d)({reason:R})),B=he?F((0,M.A)({reason:R})):s.S.resolve({inboundConnectInvites:[],outboundConnectInvites:[]});s.S.all([K,B]).then(()=>F((0,m.ae)(!0)))}}).finally(()=>F((0,m.G3)(!1))))});x.meta={name:"createThunk",key:"createThunkfetchActivityFeed",description:"Fetch user activity"}},2051872845:(z,A,e)=>{"use strict";e.d(A,{A:()=>pl});var t=e(1416482128),n=e(7763652800),s=e(796111729),a=e(4423055085),c=e(4724591729),o=e(8520727613),r=e(2791814261),l=e(1535672935),_=e(1031947056),d=e(6776011876),i=e(6533394955);const m=(0,_.Ay)("maybeDisableDebugger side effect handler",()=>{if((0,c.Yj)()||(0,c.Cu)()||(0,c.$i)())return;const Ee=(0,i.getStateForClientStore)();if((0,r.c)()&&!(0,o.A)(Ee,"disable_tinyspeck_slackdebug_enforcement","treatment")){(0,a.Jb)();return}(0,a.CP)()||(0,a.YF)()});m.meta={name:"createThunk",key:"createThunkmaybeDisableDebugger",description:"maybeDisableDebugger side effect handler"};const h=(0,d.kt)([l.setDidBootAllWorkspaces],m);var v=e(3571452446),y=e(3245843483),T;(function(Ee){Ee.DOGFOOD="dogfood",Ee.BETA="beta",Ee.PROD="prod"})(T||(T={}));var I;(function(Ee){Ee.BETA="beta",Ee.PROD="prod"})(I||(I={}));const p=u(Ee=>Ee!==T.PROD,"isPreRelease");var g;(function(Ee){Ee.NIGHTLY="nightly",Ee.ALPHA="alpha",Ee.ETA="eta",Ee.PILOT="pilot",Ee.BETA="beta",Ee.PROD="prod"})(g||(g={}));var E;(function(Ee){Ee.BETA="beta",Ee.PROD="prod"})(E||(E={}));const f=[g.ALPHA,g.ETA,g.BETA,g.PILOT,g.PROD],O=u(Ee=>Ee!==g.PROD,"release_channels_4_31_0_isPreRelease");var C=e(1583163054),M=e(571104883),D=e(4096483543),P=e(9012396182),k=e(3677514771);const x=(0,_.Ay)("maybeSetReleaseChannelOverrideHandler",(Ee,oe,ye)=>{!(0,M.y3)()||!(0,y.g9M)()||Y(oe)});x.meta={name:"createThunk",key:"createThunkmaybeSetReleaseChannelOverrideHandler",description:"maybeSetReleaseChannelOverrideHandler"};const F=(0,d.kt)([l.setDidBootAllWorkspaces],x),W="nightly-promotion-state";function Y(Ee){const oe=(0,y.oQe)("environment","releaseChannel"),ye=(0,y.oQe)("settings","releaseChannelOverride");let Se=ye;if(!Se&&(oe==="beta"||oe==="alpha")&&(Se=oe),Se==="eta"&&(Se=T.BETA),(0,D.A)()&&(0,M.dY)("4.31.150")){const qe=Ee();if((0,o.A)(qe,"ssb_dogfood_automatic_promotion","on")&&(0,r.c)()&&Se!==C.zS)try{window.localStorage.getItem(W)!=="2"&&(Se=C.zS,window.localStorage.setItem(W,"1"))}catch{}Se==="alpha"&&(Se=T.BETA)}Se!==ye&&((0,y.cGU)({name:"releaseChannelOverride",value:Se}),y.NjF.cache&&y.NjF.cache.clear())}u(Y,"maybeSetReleaseChannelOverride");const S=["domain","enterprise_id","enterprise_name","id","icon","name","url","variant"],L=(0,_.Ay)("Sync workspaces state with desktop",(Ee,oe)=>{if(!(0,M.y3)())return;const ye=oe(),Se=(0,P.getBootedWorkspaces)(ye),qe=(0,P.getAllWorkspaces)(ye);var $e;const Ct=($e=(0,P.getWorkspacesMeta)(ye))!==null&&$e!==void 0?$e:{},Ze=Se==null?void 0:Se.reduce((Jt,Rn)=>{const Yn=(0,i.getStateByTeamId)(Rn),en={...(0,k._J)(Yn,Rn,!1),...Ct==null?void 0:Ct[Rn]};return Jt[Rn]={...(0,v.A)(en,S),order:qe.indexOf(Rn)},Jt},{});(0,y.CIW)(Ze)});L.meta={name:"createThunk",key:"createThunksyncWorkspacesToDesktop",description:"Sync workspaces state with desktop"};const w=(0,_.Ay)("Sync workspaces state with desktop when a new team has booted",(Ee,oe)=>{if(!(0,M.y3)())return;const ye=oe();(0,P.didBootAllWorkspaces)(ye)&&Ee(L())});w.meta={name:"createThunk",key:"createThunksyncWorkspacesToDesktopOnAdditionalTeamBoot",description:"Sync workspaces state with desktop when a new team has booted"};const J=(0,d.kt)([l.setDidBootAllWorkspaces,l.setWorkspaceOrder],L),G=(0,d.kt)([l.setWorkspaceBooted],w);var X=e(4932704503),te=e(1378315125);const le="DESKTOP-SIDE-EFFECT",ve=(0,_.Ay)("logUpdateFromDesktop",(Ee,oe,ye)=>{(0,s.Wo)().info(le,"Update from desktop for keys ",Object.keys(ye.payload))});ve.meta={name:"createThunk",key:"createThunklogUpdateFromDesktop",description:"logUpdateFromDesktop"};const Q=(0,d.kt)([te.Ez],ve),Ae=(0,_.Ay)("maybeHandleWindowFocusEvent",(Ee,oe,ye)=>{(0,D.A)()&&ye.payload&&ye.payload.windows&&Ee((0,X.pz)({isFocused:document.hasFocus()}))});Ae.meta={name:"createThunk",key:"createThunkmaybeHandleWindowFocusEvent",description:"maybeHandleWindowFocusEvent"};const ae=(0,d.kt)([te.Ez],Ae);var he=e(3398586081),_e=e(8646192222),ee=e(8439865561),de=e(5105455463);(0,he.A)(()=>{if((0,_e.Nu)())try{window.matchMedia(de.og).onchange=Ee=>{const oe=(0,i.getClientStoreInstance)();oe&&oe.dispatch((0,ee.N)(Ee.matches))}}catch(Ee){(0,s.Wo)().warn("ACCESSIBILITY-STORE","window.matchMedia hook failed; system high contrast theme will not be updated.",Ee)}})();const ce=(0,_.Ay)("maybeUpdateShouldUseHighContrastColors",(Ee,oe,ye)=>{if(!(0,_e.Nu)()&&(0,_e.hk)()){var Se,qe;const $e=ye==null||(Se=ye.payload)===null||Se===void 0||(qe=Se.settings)===null||qe===void 0?void 0:qe.shouldUseHighContrastColors;$e!==void 0&&Ee((0,ee.N)($e))}});ce.meta={name:"createThunk",key:"createThunkmaybeUpdateShouldUseHighContrastColors",description:"maybeUpdateShouldUseHighContrastColors"};const j=(0,d.kt)([te.Ez],ce);var N=e(1703559452),b=e(8170643398),R=e(6839188756),K=e(3270010894),B=e(6449156268),$=e(8276911661),Z=e(9733150292);const re=(0,he.A)(()=>{const Ee=Object.values((0,i.getStoreInstanceMap)());let oe=0,ye=0;return(0,N.A)(Ee,Se=>{if(!Se)return!1;const qe=Se.getState(),$e=(0,$.cA)(qe),Ct=(0,b.yF)($e),Ze=Ct&&(0,K.KR)((0,B.A)().toDate(),B.A.unix(Ct).toDate());return Ze&&Ze>30&&(ye+=1),(0,R.qR)((0,k.H7)(qe))&&(oe+=1),oe>1&&ye>0})}),Te=u(()=>{(0,Z.q9)("hasSeenWorkspaceSwitcherAwareness",!0)},"markWorkspaceSwitcherAwarenessAsSeen"),Ce=u(()=>(0,Z.W6)("hasSeenWorkspaceSwitcherAwareness"),"hasSeenWorkspaceSwitcherAwareness"),Pe=u(()=>re(),"isEligibleForWorkspaceSwitcherAwareness");var fe=e(4766735965),pe=e(6290537170);const q=(0,_.Ay)("Opens workspace switcher if the user is part of experiment",(Ee,oe)=>{const ye=oe();(0,M.y3)()&&!Ce()&&!(0,pe.v8)(ye)&&Pe()&&(Ee((0,fe.A)()),Te())});q.meta={name:"createThunk",key:"createThunkmaybeToggleWorkspaceSwitcherForAwarenessThunk",description:"Opens workspace switcher if the user is part of experiment"};const se=(0,d.kt)([l.setDidBootAllWorkspaces],q);var ge=e(6766954308),Oe=e(2633701976),Le=e(2047021170);const We=(0,_.Ay)("Transition the a11y_read_out_incoming_dm user pref to its new corresponding client pref",(Ee,oe)=>{var ye;const Se=oe(),qe=(0,P.getFocusedWorkspace)(Se),$e=(0,i.getStoreInstanceByTeamId)(qe),Ct=$e==null||(ye=$e.getState)===null||ye===void 0?void 0:ye.call($e);if(!Ct||(0,ge.gR)(Se)!==void 0)return;const Jt=(0,Le.ty)(Ct,"a11y_read_out_incoming_dm");if(Jt!==void 0){Ee((0,Oe.p)(Jt));return}Ee((0,Oe.p)(!0))});We.meta={name:"createThunk",key:"createThunkmaybeMigrateDmAnnouncementPref",description:"Transition the a11y_read_out_incoming_dm user pref to its new corresponding client pref"};const Re=(0,d.kt)([l.setDidBootAllWorkspaces],We);var we=e(2517531287);const Je=(0,_.Ay)("Transition the a11y_play_sound_for_incoming_dm_choice and a11y_play_sound_for_sent_dm_choice user prefs to their new corresponding client prefs",(Ee,oe)=>{var ye;const Se=oe(),qe=(0,P.getFocusedWorkspace)(Se),$e=(0,i.getStoreInstanceByTeamId)(qe),Ct=$e==null||(ye=$e.getState)===null||ye===void 0?void 0:ye.call($e);if(!Ct)return;if((0,ge.u$)(Se)===""){const Rn=(0,Le.ty)(Ct,"a11y_play_sound_for_incoming_dm_choice"),Yn=Rn??"";Ee((0,we.R)(Yn))}if((0,ge.kd)(Se)===""){const Rn=(0,Le.ty)(Ct,"a11y_play_sound_for_sent_dm_choice"),Yn=Rn??"";Ee((0,we.r)(Yn))}});Je.meta={name:"createThunk",key:"createThunkmaybeMigrateDmSoundPrefs",description:"Transition the a11y_play_sound_for_incoming_dm_choice and a11y_play_sound_for_sent_dm_choice user prefs to their new corresponding client prefs"};const it=(0,d.kt)([l.setDidBootAllWorkspaces],Je);var et=e(6422693406),lt=e(3297051565),nt=e.n(lt),at=e(9113979368),ze=e(5257368278),Ke=e(1269227002),He=e(9829579108);const Ye=(0,He.Ay)(Ee=>Ee&&Ee.persistedApiCalls);Ye.meta={name:"createSelector",key:"createSelectorgetPersistedApiCalls",description:Ee=>Ee&&Ee.persistedApiCalls};var _t=e(4294892493),vt=e(1874577777);const Tt="OFFLINE",Lt=(0,ze.A)("Replay persisted API calls",function(Ee,oe){let ye=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ye(oe());const Se=oe();if(!(0,vt.A)(Se)||(0,at.A)(ye))return;const qe=(0,s.Ay)({state:Se});qe.info(Tt,"replayPersistedApiCalls called after workspace booted");const $e=Object.keys(ye).sort().map(Ct=>ye[Ct]);et.K.each($e,Ct=>Ee((0,Ke.apiCall)(Ct)).catch(Ze=>{qe.error(Tt,`Error replaying ${Ct.method} (${Ct.persistKey})`,Ze)}).finally(()=>{qe.info(Tt,`Clearing persisted payload for ${Ct.method} (${Ct.persistKey})`),Ee((0,_t.M)(Ct.persistKey))}))});Lt.meta={name:"createFetcher",key:"createFetcherreplayPersistedApiCalls",description:"Replay persisted API calls"},Lt.propTypes=nt().object;const ft=(0,_.Ay)("triggerReplayPersistedApiCalls",(Ee,oe,ye)=>{const Se=ye.payload;(0,i.dispatchForTeamId)(Se,Lt())});ft.meta={name:"createThunk",key:"createThunktriggerReplayPersistedApiCalls",description:"triggerReplayPersistedApiCalls"};const mt=(0,d.kt)([l.setWorkspaceBooted],ft);var Yt=e(859310680),nn=e(3855029223),jt=e(2872463257);const gn=(0,_.Ay)("recordExperimentGroupsAsTrace side effect handler",(Ee,oe,ye)=>{const Se=(0,i.getStateForClientStore)(),qe=(0,P.getBootedWorkspaces)(Se)||[];try{const $e=jt.nl.ALWAYS;qe.forEach(Ct=>{const Ze=(0,i.getStateByTeamId)(Ct),Jt=(0,Yt.xy)(Ze),Rn=JSON.stringify(Jt),Yn=(0,nn.E)({state:Ze}),hs=Yn.createSpan({name:"experiment_groups",options:{tags:{experiment_groups:Rn}},samplingOptions:{sampleType:$e}});hs.close(),Yn.reportSpans([hs])})}catch($e){(0,s.Wo)().warn("BOOT-TEAM","could not report experiment groups in trace",$e)}});gn.meta={name:"createThunk",key:"createThunkrecordExperimentGroupsAsTrace",description:"recordExperimentGroupsAsTrace side effect handler"};const on=(0,d.kt)([l.setDidBootAllWorkspaces],gn);var Xt=e(5613323535);const rn=(0,_.Ay)("setAutoTracerTagProvider side effect handler",(Ee,oe,ye)=>{Xt.LI.isEnabled()&&Xt.LI.setTagProvider(Se=>Se?(0,Yt.go)(Se):{})});rn.meta={name:"createThunk",key:"createThunksetAutoTracerTagProvider",description:"setAutoTracerTagProvider side effect handler"};const Zt=(0,d.kt)([l.setDidBootAllWorkspaces],rn);var Ht=e(3317091632),Bt=e(3530725200),Qt=e(7446225280),sn=e(6244014364),Mn=e(56548687),ct=e(268083624),yt=e(5795074931);const Rt=(0,_.Ay)("Clog experiment related meta data for session toggles",(Ee,oe,ye)=>{let{experimentNames:Se}=ye;const qe=(0,ct.v8)(ct.i$),$e=(0,y.sST)(),Ct=(0,i.getClientStoreInstance)(),Ze=(0,P.getBootedWorkspaces)(Ct.getState()),Jt=Ze.join(","),Rn=Ze.map(Yn=>{var hs;const en=(hs=(0,i.getStoreInstanceByTeamId)(Yn))===null||hs===void 0?void 0:hs.getState();return(0,yt.WR)(en)}).join(",");Se.forEach(Yn=>{const hs=(0,Bt.B9)(Yn);(hs===Qt.dw.Control||hs===Qt.dw.Treatment||hs===Qt.dw.On)&&(0,Mn.e)().track(sn.EventId.CLIENT_SESSION_TOGGLE_CLOG,{contexts:{experimentName:Yn,experimentGroup:hs,teamIds:Jt,userIds:Rn,visitorCookie:qe,clientId:$e}})})});Rt.meta={name:"createThunk",key:"createThunkclogDataForSessionToggles",description:"Clog experiment related meta data for session toggles"};var xe=e(306687250),Nt=e(5320724941),Ft=e(9681594967),qt=e(2325478352),un=e(9272190578),tt=e(7002741921),pt=e(6209625934),Dt=e(4761125736);function Wt(Ee,oe){const ye=Object.values((0,i.getStoreInstanceMap)());for(const Se of ye){if(!Se)continue;const qe=Se.getState(),$e=(0,Dt.KK)(qe,Ee);$e&&$e.log_exposures&&oe===$e.group&&(0,pt.K)(Ee,$e,qe)}}u(Wt,"logExposuresForSession");function zt(Ee,oe){if((0,Qt.SC)(Ee),oe)try{oe()}catch(ye){(0,s.Wo)().error(`caught error from cleanupCallback: ${ye}`)}}u(zt,"rollbackToggle");function ln(Ee){let{toggleName:oe,toggleGroup:ye}=Ee;return(0,tt.A)(oe,ye,!1)}u(ln,"defaultToggleGroupMatcher");function Tn(Ee,oe){var ye;const Se=(ye=oe==null?void 0:oe.customToggleGroupMatcher)!==null&&ye!==void 0?ye:ln,qe=(0,Qt.M_)(Ee),$e=cn(Ee,qe,Se);if(qe===null&&$e!==Qt.dw.NoGroup){(0,Qt.jc)(Ee,$e);return}$e===Qt.dw.NoGroup?qe===Qt.dw.Treatment||qe===Qt.dw.On?(zt(Ee,oe==null?void 0:oe.cleanupCallback),(0,un.As)({reason:`Rolling back ${Ee} toggle`,reasonKey:`rollback_${Ee}_toggle`})):(qe===Qt.dw.Control||qe===Qt.dw.Off)&&zt(Ee,oe==null?void 0:oe.cleanupCallback):$e!==qe?(0,Qt.jc)(Ee,$e):$e===qe&&Wt(Ee,qe)}u(Tn,"setToggleGroupForNextSession");function cn(Ee,oe,ye){const Se=ye({toggleName:Ee,toggleGroup:Qt.dw.Treatment}),qe=ye({toggleName:Ee,toggleGroup:Qt.dw.Control}),$e=ye({toggleName:Ee,toggleGroup:Qt.dw.On}),Ct=ye({toggleName:Ee,toggleGroup:Qt.dw.Off});return Se&&qe?oe===Qt.dw.Treatment?Qt.dw.Treatment:oe===Qt.dw.Control?Qt.dw.Control:Math.random()<.5?Qt.dw.Treatment:Qt.dw.Control:$e&&Ct?oe===Qt.dw.On?Qt.dw.On:oe===Qt.dw.Off?Qt.dw.Off:Math.random()<.5?Qt.dw.On:Qt.dw.Off:Se?Qt.dw.Treatment:qe?Qt.dw.Control:$e?Qt.dw.On:Ct?Qt.dw.Off:Qt.dw.NoGroup}u(cn,"getCurrentToggleGroup");const hn={getCurrentToggleGroup:cn};(0,a.ul)("setToggleGroupForNextSession",Ee=>Tn(Ee));var Cn=e(2371143272),_n=e(9119648438);const Vn=u(()=>{try{Ft.qV.deleteDatabase()}catch(Ee){Ft.qV.getLogger().error(`caught error from deleteDatabase: ${Ee}`)}},"objectStoreCallback"),Wn={[qt.Wv]:{cleanupCallback:Vn},[Nt.f]:{},[_n.Pt]:{},[xe.z]:{},[Ht.n]:{},[Cn.i]:{}},kn=(0,_.Ay)("setToggleGroupsForNextSession",(Ee,oe,ye)=>{Ee(Rt({experimentNames:Object.keys(Wn)})),Object.entries(Wn).forEach(Se=>{let[qe,$e]=Se;Tn(qe,$e)})});kn.meta={name:"createThunk",key:"createThunksetToggleGroupsForNextSession",description:"setToggleGroupsForNextSession"};const Pn=(0,d.kt)([l.setDidBootAllWorkspaces],kn);var $t=e(4250409994),$n=e(2766373332);const De=(0,_.Ay)("maybeToggleGlobalMuteShortcutHandler",(Ee,oe,ye)=>(0,$n.N$)(ye.payload));De.meta={name:"createThunk",key:"createThunkmaybeToggleGlobalMuteShortcutHandler",description:"maybeToggleGlobalMuteShortcutHandler"};const Ne=(0,d.kt)([$t.Bk],De);var Me=e(8365110903),Be=e(25586007);const ue=(0,_.Ay)("Transition the up_to_browse_kb_shortcut user pref to the new client pref",(Ee,oe)=>{var ye;const Se=oe(),qe=(0,P.getFocusedWorkspace)(Se),$e=(0,i.getStoreInstanceByTeamId)(qe),Ct=$e==null||(ye=$e.getState)===null||ye===void 0?void 0:ye.call($e);if(!Ct||(0,ge.jX)(Se)!==void 0)return;const Jt=(0,Le.ty)(Ct,"up_to_browse_kb_shortcut"),{LIST:Rn,EDIT:Yn}=Be.v,hs=Jt?Rn:Yn;Ee((0,Me.T)(hs))});ue.meta={name:"createThunk",key:"createThunkmaybeTransitionUpToBrowsePreference",description:"Transition the up_to_browse_kb_shortcut user pref to the new client pref"};const ke=(0,d.kt)([l.setWorkspaceBooted],ue),Xe=(0,_.Ay)("updateLocalConfigOrderedTeamIds side effect handler",(Ee,oe,ye)=>{const Se=(0,s.Wo)({label:Z.o7}),qe=(0,i.getStateForClientStore)(),$e=(0,P.getAllWorkspaces)(qe);(!$e||$e.length===0)&&Se.warn("Skipping update to orderedTeamIds, allWorkspaces is empty"),Se.info(`Updating orderedTeamIds to ${$e.join(",")}`),(0,Z.q9)("orderedTeamIds",$e)});Xe.meta={name:"createThunk",key:"createThunkupdateLocalConfigOrderedTeamIds",description:"updateLocalConfigOrderedTeamIds side effect handler"};const dt=(0,d.kt)([l.addWorkspace],Xe);var bt=e(2250002584);const be=(0,_.Ay)("recordWssRailVisibility side effect handler",(Ee,oe)=>{const ye=(0,bt.F)(),Se=oe(),qe=(0,pe.v8)(Se)?1:0,$e=ye.createMetricsTrace({samplingOptions:{sampleType:jt.nl.SESSION}});$e.store({name:"wss_rail:visible",value:qe}),ye.reportTrace($e)});be.meta={name:"createThunk",key:"createThunkrecordWssRailVisibility",description:"recordWssRailVisibility side effect handler"};const U=(0,d.kt)([l.setDidBootAllWorkspaces],be);var V=e(3875705815),ne=e(4134037340),ie=e(2413251042),Ue=e(6303140164);const Qe=(0,_.Ay)("Set zoom value for client before starting BBM",(Ee,oe,ye)=>{const{error:Se}=(0,s.Wo)();(0,ne.A)(oe())||Se(new Error("you must call setZoom for a client store"));try{(0,Z.q9)(Ue.UY,ye)}catch(qe){Se(new Error(`failed to store zoom in local storage: ${qe}`))}Ee((0,ie.x8)(ye))});Qe.meta={name:"createThunk",key:"createThunksetZoom",description:"Set zoom value for client before starting BBM"};var je=e(6696292586);function ht(){let Ee;return oe=>oe===Ee?!1:(Ee=oe,!0)}u(ht,"getDidUpdate");const ot=ht(),gt=(0,_.Ay)("updateFromDesktop side effect handler",(Ee,oe,ye)=>{var Se;const qe=oe(),$e=P.getFocusedWorkspace===null||P.getFocusedWorkspace===void 0?void 0:(0,P.getFocusedWorkspace)(qe);if(!$e)return;const Ct=(0,i.getStateByTeamId)($e);if((0,V.V)(Ct))return;const Ze=(Se=ye.payload.settings)===null||Se===void 0?void 0:Se.zoomLevel;(0,je.A)(Ze)&&ot(Ze)&&(0,i.dispatchForClientStore)(Qe(Ze))});gt.meta={name:"createThunk",key:"createThunkonUpdateFromDesktop",description:"updateFromDesktop side effect handler"};const wt=(0,d.kt)([te.Ez],gt),Dn=[h,Q,ae,mt,Zt,j,Pn,J,G,on,Ne,F,ke,it,Re,U,dt,wt,se];var Nn=e(4900557724);const Sn=50,Bn="recents";var pn=e(8628205589),yn=e(2384831516);let jn;function Zn(Ee){jn&&(0,Nn.GP)(jn),jn=(0,Nn.BB)(()=>{jn=void 0,(0,Z.q9)(Bn,Ee)})}u(Zn,"persistRecents");function Es(){var Ee;return(Ee=(0,Z.W6)(Bn))!==null&&Ee!==void 0?Ee:[]}u(Es,"loadRecents");const Us=Es(),Ss=(0,yn.vy)({},Us,{persistenceEnabled:!1,storeKey:"recents"}).on(pn.y2,(Ee,oe)=>{let{entry:ye}=oe;const Se=[ye,...Ee].slice(0,Sn);return Zn(Se),Se}).on(pn.HQ,(Ee,oe)=>{let{entry:ye}=oe;const Se=[ye,...Ee.slice(1)].slice(0,Sn);return Zn(Se),Se}).on(pn.TP,Ee=>{const oe=Ee.slice(0,1);return Zn(oe),oe});var rs=e(3193155968),H=e(9936094925);const me={[rs.N2]:{index:0,previousIndex:null,stack:[]}},Fe={persistenceEnabled:!1,storeKey:"mainWindowHistory"},An=(0,yn.vy)({},me,Fe).on(pn.y2,(Ee,oe)=>{let{windowId:ye,entry:Se}=oe;return{...Ee,[ye]:(0,H.wg)({windowState:Ee[ye],entry:Se})}}).on(pn.jW,()=>me).on(pn.cM,(Ee,oe)=>{let{windowId:ye,index:Se,previousIndex:qe}=oe;return{...Ee,[ye]:(0,H.ds)({windowState:Ee[ye],index:Se,previousIndex:qe})}}).on(pn.$E,(Ee,oe)=>{let{windowId:ye,index:Se}=oe;return{...Ee,[ye]:(0,H.cB)({windowState:Ee[ye],index:Se})}}).on(pn.HQ,(Ee,oe)=>{let{windowId:ye,entry:Se}=oe;return{...Ee,[ye]:(0,H.w9)({windowState:Ee[ye],entry:Se})}});(0,a.ul)("mainWindowHistory",{getState:()=>(0,i.getStateForClientStore)().mainWindowHistory[rs.N2]});var vn=e(7715417323);function Hn(){let{state:Ee,prevState:oe,workspaces:ye=[],broadcastSelector:Se=vn.A,broadcastAction:qe=vn.A}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const $e=Se(Ee),Ct=Se(oe);$e!==Ct&&ye.forEach(Ze=>{(0,i.dispatchForTeamId)(Ze,qe($e))})}u(Hn,"maybeBroadcastStateToWorkspaces");const Kt=Hn;var ts=e(1527536225);const _s=(0,ts.Ay)("Broadcast accessibility state to other stores",(Ee,oe,ye)=>{const Se=Ee.getState(),qe=oe(ye),$e=Ee.getState(),Ct=(0,P.getBootedWorkspaces)($e);return Kt({state:$e,prevState:Se,workspaces:Ct,broadcastSelector:Ze=>(0,ge.VH)(Ze),broadcastAction:Ze=>(0,ee.Jq)(Ze)}),Kt({state:$e,prevState:Se,workspaces:Ct,broadcastSelector:Ze=>(0,ge.nQ)(Ze),broadcastAction:Ze=>(0,ee.N)(Ze)}),Kt({state:$e,prevState:Se,workspaces:Ct,broadcastSelector:Ze=>(0,ge.dF)(Ze),broadcastAction:Ze=>(0,ee.KQ)(Ze)}),Kt({state:$e,prevState:Se,workspaces:Ct,broadcastSelector:Ze=>(0,ge.jX)(Ze),broadcastAction:Ze=>(0,ee.Tv)(Ze)}),Kt({state:$e,prevState:Se,workspaces:Ct,broadcastSelector:Ze=>(0,ge.gb)(Ze),broadcastAction:Ze=>(0,ee.C_)(Ze)}),Kt({state:$e,prevState:Se,workspaces:Ct,broadcastSelector:Ze=>(0,ge.zm)(Ze),broadcastAction:Ze=>(0,ee.XE)(Ze)}),Kt({state:$e,prevState:Se,workspaces:Ct,broadcastSelector:Ze=>(0,ge.K9)(Ze),broadcastAction:Ze=>(0,ee.Mq)(Ze)}),Kt({state:$e,prevState:Se,workspaces:Ct,broadcastSelector:Ze=>(0,ge.u$)(Ze),broadcastAction:Ze=>(0,ee.Sr)(Ze)}),Kt({state:$e,prevState:Se,workspaces:Ct,broadcastSelector:Ze=>(0,ge.kd)(Ze),broadcastAction:Ze=>(0,ee.mw)(Ze)}),Kt({state:$e,prevState:Se,workspaces:Ct,broadcastSelector:Ze=>(0,ge.gR)(Ze),broadcastAction:Ze=>(0,ee.Ap)(Ze)}),Kt({state:$e,prevState:Se,workspaces:Ct,broadcastSelector:Ze=>(0,ge.u)(Ze),broadcastAction:Ze=>(0,ee.V_)(Ze)}),qe});_s.meta={name:"createMiddleware",key:"createMiddlewarebroadcastAccessibilityMiddleware",description:"Broadcast accessibility state to other stores"};const ps=_s;var Rs=e(1004520977),gs=e(9234290540);const is=(0,ts.Ay)("Broadcast accessibility persistent state to other stores",(Ee,oe,ye)=>{const Se=Ee.getState(),qe=oe(ye),$e=Ee.getState(),Ct=(0,P.getBootedWorkspaces)($e);return Kt({state:$e,prevState:Se,workspaces:Ct,broadcastSelector:Ze=>(0,gs.i)(Ze),broadcastAction:Ze=>(0,Rs.w)(Ze)}),qe});is.meta={name:"createMiddleware",key:"createMiddlewarebroadcastAccessibilityPersistentMiddleware",description:"Broadcast accessibility persistent state to other stores"};const Is=is;var Ge=e(3749529250);const It=(0,ts.Ay)("Broadcast big button mode state to other stores",(Ee,oe,ye)=>{const Se=Ee.getState(),qe=oe(ye),$e=Ee.getState(),Ct=(0,P.getBootedWorkspaces)($e).filter(Ze=>(0,_e.mL)((0,i.getStateByTeamId)(Ze)));return Kt({state:$e,prevState:Se,workspaces:Ct,broadcastSelector:Ze=>(0,V.V)(Ze),broadcastAction:Ze=>Ze?(0,Ge.z)():(0,Ge.K)()}),qe});It.meta={name:"createMiddleware",key:"createMiddlewarebroadcastBBMMiddleware",description:"Broadcast big button mode state to other stores"};var Ve=e(2456103428),st=e(6728717861);const At=(0,ts.Ay)("Broadcast connectivity state to other stores",(Ee,oe,ye)=>{const Se=Ee.getState(),qe=oe(ye),$e=Ee.getState(),Ct=(0,P.getBootedWorkspaces)($e);return Kt({state:$e,prevState:Se,workspaces:Ct,broadcastSelector:Ze=>(0,st.Pb)(Ze),broadcastAction:Ze=>(0,Ve.p9)(Ze)}),Kt({state:$e,prevState:Se,workspaces:Ct,broadcastSelector:Ze=>(0,st.XQ)(Ze),broadcastAction:Ze=>(0,Ve.pm)(Ze)}),qe});At.meta={name:"createMiddleware",key:"createMiddlewarebroadcastConnectivityMiddleware",description:"Broadcast connectivity state to other stores"};const St=At;var Ot=e(848813706),xt=e(5223893135),tn=e(5095654950);const En=(0,ts.Ay)("Broadcast fullscreen state to other stores",(Ee,oe,ye)=>{const Se=Ee.getState(),qe=oe(ye),$e=Ee.getState(),Ct=(0,P.getBootedWorkspaces)($e).filter(Ze=>(0,_e.iB)((0,i.getStateByTeamId)(Ze)));return Kt({state:$e,prevState:Se,workspaces:Ct,broadcastSelector:Ze=>(0,xt.V)(Ze),broadcastAction:Ze=>Ze?(0,tn.J)():(0,Ot.sM)()}),qe});En.meta={name:"createMiddleware",key:"createMiddlewarebroadcastFullscreenMiddleware",description:"Broadcast fullscreen state to other stores"};var an=e(4309043566);const Vt=(0,yn.Ny)("Broadcasts overlays state from client store to workspace stores",(Ee,oe,ye)=>{const Se=Ee.getState(),qe=oe(ye),$e=Ee.getState(),Ct=(0,P.getBootedWorkspaces)($e);return Kt({state:$e,prevState:Se,workspaces:Ct,broadcastSelector:Ze=>Ze.overlays,broadcastAction:an.l}),qe});Vt.meta={name:"createMiddleware",key:"createMiddlewarebroadcastOverlaysMiddleware",description:"Broadcasts overlays state from client store to workspace stores"};var dn=e(9083290776);const Un=(0,ts.Ay)("Broadcast workspaces state to other stores",(Ee,oe,ye)=>{const Se=Ee.getState(),qe=oe(ye),$e=Ee.getState(),Ct=(0,P.getBootedWorkspaces)($e),Ze=Se&&(0,P.getBootedWorkspaces)(Se),Jt=(0,P.getAllWorkspaces)($e),Rn=(0,P.getAllWorkspaces)(Se),Yn=!Rn||Jt.some((Ln,bn)=>Ln!==Rn[bn]),hs=(0,P.getRecentlyFocusedWorkspaces)($e),en=Se&&(0,P.getRecentlyFocusedWorkspaces)(Se);return(Ze!==Ct||Yn||en!==hs)&&On(Ct,hs),qe});Un.meta={name:"createMiddleware",key:"createMiddlewarebroadcastWorkspacesMiddleware",description:"Broadcast workspaces state to other stores"};function On(Ee,oe){const ye=oe[0];ye&&(Ee==null||Ee.forEach(Se=>{(0,i.dispatchForTeamId)(Se,(0,dn.K$)(oe)),(0,i.dispatchForTeamId)(Se,(0,dn.fw)(oe))}),(0,y.ny2)(ye))}u(On,"broadcastFocusedWorkspaces");const Fn=Un;var xn=e(252549317),ms=e(9042410435),Ut=e(8736071954),ns=e(4103673490),Kn=e(5470425448),Jn=e(5071086688),zn=e(6117529990);function ds(Ee){switch((0,Dt._Z)(Ee,"calls_transport_type")){case"udp":return["udp"];case"tls":return["tls"];case"tcp_tls":return["tcp","tls"];case"udp_tls":return["udp","tls"];case"disabled":default:return["udp","tcp","tls"]}}u(ds,"getAllowedTurnTransportTypes");var mn=e(5332875232);function ss(){return!(!("MediaStreamTrackProcessor"in globalThis)||!("MediaStreamTrackGenerator"in globalThis)||!("OffscreenCanvas"in globalThis)||!("ImageBitmap"in globalThis)||!("createImageBitmap"in globalThis))}u(ss,"isHuddlesBackgroundWorkerSupported");const fs=(0,s.Wo)({label:"HUDDLE-INIT-OPTIONS"}),ls=u((Ee,oe)=>{let{server:ye,isPrejoin:Se}=oe;if(!Ee){fs.error("teamState is not defined. Returning empty init options");return}const qe={};return qe.serverConfig={...ye,transportProtocols:ds(Ee)},qe.isPrejoin=Se,qe.useChimeSdkExp=(0,zn.OV)(Ee),qe.useDevicesExp=(0,mn.ZI)(Ee),qe.useH264BaselineScreenshare=(0,zn.OV)(Ee)&&(0,mn.RM)(Ee),qe.useH264Baseline=(0,zn.OV)(Ee)&&(0,mn.er)(Ee),qe.useAv1Screenshare=(0,mn.Cu)(Ee),qe.huddlesJukeboxEnabled=(0,mn.lV)(Ee),qe.disableAudioRedundancy=(0,mn.JQ)(Ee),qe.useSimulcast=!1,qe.usePriorityDownlinkPolicy=(0,M.gm)()?!1:(0,mn.bw)(Ee),qe.useGetMediaAccessCheckForWindows=(0,mn.jP)(Ee),qe.enableExperimentalConnectionHealthPolicyConfig=(0,mn.bb)(Ee),qe.voiceFocusMaxModelsEnabled=(0,mn.Hh)(Ee),qe.disableVp9=(0,mn.lH)(Ee),qe.useHuddlesFilterWorker=ss()&&(0,mn.lz)(Ee),fs.info("returning init options: ",qe),qe},"getSdkInitOptions");var Xn=e(6246464105),Os=e(8872167513),Ls=e(2709531527),As=e(164795489),Ps=e(3300324857),Ms=e(4708000837),xs=e(1371073900),rt=e(2457673737),Et=e(6664301844),Mt=e(6310192986),kt=e(7366481123),fn=e(5253428843),Gt=e(3065433701),In=e(5378147939);const wn=(0,_.Ay)("Resolve a pending huddle",(Ee,oe,ye)=>(0,In.A)().resolvePendingJoin(ye));wn.meta={name:"createThunk",key:"createThunkresolvePendingHuddle",description:"Resolve a pending huddle"};const qn=wn;var es=e(2778217221),Fs=e(6694086724),as=e(5286203919),_o=e(9548972574),Mo=e(3474336343),Ya=e(3263322402),Qo=e(3977512448);const Co=(0,_.Ay)("update client huddle membership timers join",(Ee,oe)=>{const ye=oe(),Se=(0,s.Ay)({state:ye}),qe=(0,i.getStateForClientStore)(),$e=(0,as.Ak)(qe),Ct=(0,Mo.Wg)(ye,{tip:Qo.ml.Huddles});if(!$e){Se.warn(es.o7,"no active huddle found, cannot update state to together or alone");return}const Ze=(0,_o.Sx)(ye);if(Ze===0){(0,In.A)().setAloneInHuddle();return}Ze>0&&(Ct&&Ee((0,Ya._A)(!0)),(0,In.A)().setOthersInHuddle(),Ee((0,Fs.e)({clearOnEndedCallback:!0,logContext:"on-peer-joined"})))});Co.meta={name:"createThunk",key:"createThunkupdateAloneOrTogetherInHuddle",description:"update client huddle membership timers join"};var Oo=e(9706240641),Qn=e(3134334389),Qa=e(4332857818),$a=e(862210999),Ja=e(8645544190),Xa=e(8921478798),$o=e(1641606663),mo=e(735940183),Za=e(8847766420),Gn=e(387328355),qs=e(6839101721),qa=e(5323669031),ho=e(2825968873),er=e(3094144240),tr=e(9477894139),Do=e(9418991940),So=e(9391594207),Qs=e(5255740490),nr=e(3534324375),Jo=e(8869734951);let Xo=u(class extends Qn.PureComponent{static getDerivedStateFromProps(oe,ye){return oe.mediaStream!==ye.currentMediaStream?oe.mediaStream&&ye.currentMediaStream&&oe.mediaStream.id===ye.currentMediaStream.id?{currentMediaStream:oe.mediaStream,isFlipped:oe.isFlipped,isCurrentMediaStreamReady:!1,prevMediaStream:void 0}:{prevMediaStream:oe.mediaStream?ye.currentMediaStream:void 0,currentMediaStream:oe.mediaStream,isFlipped:oe.isFlipped,wasFlipped:ye.isFlipped,isCurrentMediaStreamReady:!1}:null}componentDidMount(){this.setupMedia()}componentDidUpdate(){this.setupMedia()}componentWillUnmount(){const oe=this.videoRef.current,ye=this.prevVideoRef.current;oe&&(oe.removeEventListener("canplay",this.onCanPlay),oe.removeEventListener("pause",this.onPause),oe.removeEventListener("resize",this.onResize)),ye&&(ye.removeEventListener("canplay",this.onCanPlay),ye.removeEventListener("pause",this.onPause),ye.removeEventListener("resize",this.onResize)),this.props.onVideoReady&&this.props.onVideoReady(!1)}onCanPlay(){const{currentMediaStream:oe}=this.state,ye=oe&&oe.getVideoTracks()[0];this.isDataStopped&&ye&&ye.readyState==="live"&&(this.props.onVideoReady&&this.props.onVideoReady(!0),this.setState(()=>({isCurrentMediaStreamReady:!0})))}onPause(oe){this.state.currentMediaStream&&oe.target.srcObject instanceof MediaStream&&oe.target.srcObject.id===this.state.currentMediaStream.id&&(this.props.onVideoReady&&this.props.onVideoReady(!1),this.isDataStopped=!0)}setupMedia(){const{currentMediaStream:oe,prevMediaStream:ye}=this.state,Se=this.videoRef.current,qe=this.prevVideoRef.current;Se&&(Se.muted=!0,Se.srcObject!==oe&&(Se.addEventListener("canplay",this.onCanPlay),Se.addEventListener("pause",this.onPause),Se.addEventListener("resize",this.onResize),Se.srcObject=oe||null)),qe&&(qe.muted=!0,qe.srcObject!==ye&&(qe.removeEventListener("canplay",this.onCanPlay),qe.removeEventListener("pause",this.onPause),qe.removeEventListener("resize",this.onResize),qe.srcObject=ye||null))}onResize(){const oe=this.videoRef.current;oe&&(this.props.isSharingScreen?oe.style.objectFit="contain":oe.style.objectFit=oe.videoWidth>oe.videoHeight?"cover":"contain")}render(){const{className:oe,isFlipped:ye,refToForward:Se}=this.props,{currentMediaStream:qe,prevMediaStream:$e,isCurrentMediaStreamReady:Ct,wasFlipped:Ze}=this.state;return Qn.createElement(Qn.Fragment,null,!Ct&&$e&&Qn.createElement("video",{key:$e&&$e.id,className:(0,Qs.A)("p-calls_video",oe,{flipped:Ze}),ref:this.prevVideoRef,autoPlay:!0}),Qn.createElement("video",{className:(0,Qs.A)("p-calls_video",oe,{flipped:ye,hidden:!Ct}),ref:(0,Jo.P)(this.videoRef,Se),autoPlay:!0,key:qe&&qe.id}))}constructor(oe){super(oe),this.prevVideoRef=Qn.createRef(),this.videoRef=Qn.createRef(),this.isDataStopped=!0,this.state={isCurrentMediaStreamReady:!1,isFlipped:!1,wasFlipped:!1},this.onCanPlay=this.onCanPlay.bind(this),this.onPause=this.onPause.bind(this),this.onResize=this.onResize.bind(this)}},"CallsOriginalVideoElement");Xo.displayName="CallsOriginalVideoElement";function Po(){return Po=Object.assign||function(Ee){for(var oe=1;oe<arguments.length;oe++){var ye=arguments[oe];for(var Se in ye)Object.prototype.hasOwnProperty.call(ye,Se)&&(Ee[Se]=ye[Se])}return Ee},Po.apply(this,arguments)}u(Po,"_extends");const sr=u((Ee,oe)=>{const ye=(0,Gn.JZ)(Ee,oe.id);return{mediaStream:ye.mediaStream,isFlipped:(0,Gn.fy)(ye)&&!ye.isScreenshareEnabled,isSharingScreen:ye.isScreenshareEnabled}},"mapStateToProps"),or=(0,So.N)(sr)(Xo),ar=Qn.forwardRef((Ee,oe)=>Qn.createElement(or,Po({},Ee,{refToForward:oe})));var rr=e(4775127335),ir=e(6308822),Ro=e(7299481592),lr=e(5956851410),cr=e(6909784049),dr=e(8558782493),Zo=e(1975685771);function ur(Ee,oe){const ye=Math.min(oe.width,oe.height*Ee),Se=Math.min(oe.height,oe.width/Ee);return{top:oe.top+(oe.height-Se)/2,left:oe.left+(oe.width-ye)/2,width:ye,height:Se}}u(ur,"getLargestRectForAspectRatioCenteredWithinRect");let Lo=u(class extends Qn.PureComponent{detectDifference(oe,ye){return Math.abs(oe-ye)>1}componentDidMount(){var oe;(0,ho.tZ)("GUEST-DRAW-WINDOW").info("Guest draw window mounted"),(0,dr.k)(sn.EventId.CALLS_GUEST_DRAW_ACTIVATED,{}),(oe=this.context.windowRef.deref())===null||oe===void 0||oe.addEventListener("resize",this.onResize),(0,Zo.Z)(this.videoRef.current,"Expected videoRef to be bound after mounting")&&(this.props.addEventListeners&&this.props.addEventListeners(this.videoRef,this.onResize,!0),this.onResize(),this.resizeTimeout=window.setTimeout(()=>{this.onResize()},4e3),this.videoRef.current.dispatchEvent(new Event("resize")))}componentDidUpdate(oe){let{isVideoReady:ye}=oe;!ye&&this.props.isVideoReady&&this.onResize()}componentWillUnmount(){var oe;this.props.removeEventListeners&&this.props.removeEventListeners(this.videoRef,this.onResize,!0),(oe=this.context.windowRef.deref())===null||oe===void 0||oe.removeEventListener("resize",this.onResize),window.clearTimeout(this.resizeTimeout)}onResize(){if(!(0,Zo.Z)(this.videoRef.current,"Expected videoRef to be bound on resize"))return;const oe=this.videoRef.current;!oe||oe.videoHeight===0||this.setState(()=>({videoRect:ur(oe.videoWidth/oe.videoHeight,oe.getBoundingClientRect())}))}render(){const oe=Qn.Children.only(this.props.children),ye=Qn.cloneElement(oe,{ref:(0,Jo.N)(this.videoRef,oe)});return Qn.createElement(Qn.Fragment,null,ye,this.state.videoRect&&Qn.createElement(lr.u,{ref:this.drawRenderRef,isHidden:!this.props.isScreenShareEnabled,targetRect:this.state.videoRect}),this.props.isDrawEnabled&&this.state.videoRect&&Qn.createElement(cr.o,{ref:this.drawTargetRef,targetRect:this.state.videoRect}))}constructor(oe){super(oe),this.videoRef=Qn.createRef(),this.drawTargetRef=Qn.createRef(),this.drawRenderRef=Qn.createRef(),this.onResize=this.onResize.bind(this),this.state={}}},"GuestDraw");Lo.displayName="GuestDraw",Lo.contextType=$o.M;const _r=u((Ee,oe)=>{const ye=(0,Gn.gl)(Ee);if(!ye)throw Error("Guest draw should not be mounted without an active peer");const Se=(0,Gn.JZ)(Ee,ye);return{isDrawEnabled:!!Se.isScreenshareEnabled&&!!Se.isDrawEnabled,isScreenShareEnabled:!!Se.isScreenshareEnabled}},"guest_draw_mapStateToProps"),qo=(0,So.N)(_r)(Lo),mr={isVideoReady:!1};let ea=u(class extends Qn.PureComponent{onVideoReady(oe){this.setState(ye=>({...ye,isVideoReady:oe}))}renderVideo(){const{id:oe,renderVideo:ye,tileId:Se}=this.props;if(ye)return ye(this.isVideoEnabledAndReady());if(!oe){(0,Ro.M)("Cannot render video without a peer id");return}return Qn.createElement(qo,{isVideoReady:this.state.isVideoReady},Qn.createElement(ar,{id:oe,tileId:Se,onVideoReady:this.onVideoReady,className:(0,Qs.A)({hidden:!this.state.isVideoReady})}))}renderImage(){const{isSpinning:oe,prefCompliantUserName:ye,member:Se}=this.props;return Qn.createElement("div",{className:(0,Qs.A)({hidden:this.state.isVideoReady})},Qn.createElement("div",{className:"p-active_speaker__member_image_wrapper"},Qn.createElement(rr.Ay,{className:(0,Qs.A)({"p-active_speaker__member_image--spinning":oe}),size:180,userId:Se&&Se.id,isInteractive:!1,tabIndex:-1}),oe&&Qn.createElement("div",{className:"p-active_speaker__member_image__spinner_wrapper"},Qn.createElement(ir.A,{color:"white"}))),Qn.createElement("div",{className:"p-active_speaker__member_name"},ye))}isVideoEnabledAndReady(){const{isVideoEnabled:oe,isVideoEnabledAndReady:ye}=this.props;return ye?ye(oe):!!(oe&&this.state.isVideoReady)}render(){const{isVideoEnabled:oe}=this.props,ye=(0,Qs.A)("p-active_speaker",{"p-active_speaker--video_enabled":this.isVideoEnabledAndReady()});return Qn.createElement("div",{"data-qa":"active-speaker",className:ye},oe&&this.renderVideo(),!this.isVideoEnabledAndReady()&&this.renderImage())}constructor(oe){super(oe),this.state=mr,this.onVideoReady=this.onVideoReady.bind(this)}},"ActiveSpeaker");ea.displayName="ActiveSpeaker";function hr(Ee,oe){const ye=(0,$.nv)(Ee,oe),Se=(0,nr.sE)(Ee,ye);return{member:ye,prefCompliantUserName:Se}}u(hr,"mapCommonMemberState");const Er=u((Ee,oe)=>{const ye=(0,Gn.JZ)(Ee,oe.id),Se=ye.isCameraEnabled,qe=ye.isScreenshareEnabled,$e=(0,Gn.fy)(ye)?(0,yt.WR)(Ee):ye.userId;return{tileId:oe.tileId,isVideoEnabled:Se||qe,isSpinning:ye.isConnected===!1,...hr(Ee,$e)}},"active_speaker_mapStateToProps"),vr=(0,So.N)(Er)(ea);var fr=e(1429018002);function Uo(){return Uo=Object.assign||function(Ee){for(var oe=1;oe<arguments.length;oe++){var ye=arguments[oe];for(var Se in ye)Object.prototype.hasOwnProperty.call(ye,Se)&&(Ee[Se]=ye[Se])}return Ee},Uo.apply(this,arguments)}u(Uo,"with_free_willy_guest_draw_extends");const ta=u(Ee=>u(class extends Qn.PureComponent{addEventListeners(ye,Se,qe){ye.current&&(ye.current.addEventListener("canplay",Se),qe&&ye.current.addEventListener("resize",Se))}removeEventListeners(ye,Se,qe){ye.current&&(ye.current.removeEventListener("canplay",Se),qe&&ye.current.removeEventListener("resize",Se))}render(){return Qn.createElement(Ee,Uo({},this.props,{addEventListeners:this.addEventListeners,removeEventListeners:this.removeEventListeners}))}},"WithFreeWillyGuestDraw"),"withFreeWillyGuestDraw");ta.displayName="withFreeWillyGuestDraw";const pr=ta;function bo(){return bo=Object.assign||function(Ee){for(var oe=1;oe<arguments.length;oe++){var ye=arguments[oe];for(var Se in ye)Object.prototype.hasOwnProperty.call(ye,Se)&&(Ee[Se]=ye[Se])}return Ee},bo.apply(this,arguments)}u(bo,"with_free_willy_active_speaker_extends");const gr=pr(qo),na=u(Ee=>u(class extends Qn.PureComponent{isVideoEnabledAndReady(ye){return ye}renderVideo(ye){const{id:Se,tileId:qe}=this.props;if(!Se){(0,Ro.M)("Cannot render video without a peer id");return}return Qn.createElement(gr,{isVideoReady:ye},Qn.createElement(fr.A,{id:Se,tileId:qe,shouldAttachStream:!0,"data-qa":"free-willy-peer-video-element"}))}render(){return Qn.createElement(Ee,bo({},this.props,{renderVideo:this.renderVideo,isVideoEnabledAndReady:this.isVideoEnabledAndReady}))}constructor(ye){super(ye),this.isVideoEnabledAndReady=this.isVideoEnabledAndReady.bind(this),this.renderVideo=this.renderVideo.bind(this)}},"WithFreeWillyActiveSpeaker"),"withFreeWillyActiveSpeaker");na.displayName="withFreeWillyActiveSpeaker";const Ar=na;var Tr=e(8300007136),yr=e(6084388622),sa=e(1049642794),Ir=e(5043394918);const Mr=new mo.Ay("huddles"),oa=u(()=>{const Ee=(0,Tr.wA)(),oe=(0,Do.d4)(Se=>!!(0,Gn.WQ)(Se,"isMicrophoneEnabled")),ye=(0,Qn.useCallback)(()=>{Ee((0,sa.A)(!oe))},[oe,Ee]);return Qn.createElement("div",{className:"p-huddle_screen_viewer__mic_button_container"},Qn.createElement(yr.Ay,{className:(0,Qs.A)("p-huddle_screen_viewer__mic_button p-huddle_screen_viewer__mic_button--mute",{"p-huddle_screen_viewer__mic_button--active":oe}),onClick:ye,type:"outline",role:"switch",size:"large","aria-label":Mr.t("Microphone"),"aria-checked":oe,disabled:!self},Qn.createElement(Ir.A,{peerId:"self",isMicrophoneEnabled:oe,allowMuteIconAnimation:!0})))},"HuddleScreenViewerMicButton");oa.displayName="HuddleScreenViewerMicButton";const Cr=oa,Or=Ar(vr),Dr=new mo.Ay("huddles");function aa(Ee){const{peerId:oe,isError:ye}=Ee,Se=(0,Do.d4)(Gn.vz),qe=(0,Do.d4)(Rn=>oe?(0,Gn.JZ)(Rn,oe):null);let $e;if(Se){var Ct,Ze;$e=qe!=null&&qe.isScreenshareEnabled?qe==null||(Ct=qe.tileIds)===null||Ct===void 0||(Ze=Ct.screenshare)===null||Ze===void 0?void 0:Ze.tileId:null}const Jt=Qn.createElement("span",{className:"p-huddle_screen_viewer__error"},Dr.t("The screen share has ended."));return Qn.createElement("div",{className:"p-huddle_screen_viewer__container"},oe&&!ye&&Qn.createElement(Or,{id:oe,tileId:$e}),ye?Jt:Qn.createElement(Cr,null))}u(aa,"HuddleScreenViewer"),aa.displayName="HuddleScreenViewer";var Sr=e(4385664584),Pr=e(4675837085);const vs={childWindow:void 0,childWindowToken:void 0,container:void 0,containerTileId:void 0},Al=null,ra=new mo.Ay("huddles"),Rr=u(Ee=>{var oe;const ye=Ee==null||(oe=Ee.document)===null||oe===void 0?void 0:oe.querySelectorAll(".p-huddle_screen_viewer__container"),Se=ye?ye.length:0,qe=(0,ho.tZ)("SCREENSHARE-VIEWER-APP");Se>1?qe.info("Multiple containers rendered in viewing window. Shared stream may be hidden from view."):qe.info(`${Se} containers rendered in viewing window.`)},"logRenderedApplicationsCount"),Eo=u(()=>{const{container:Ee,childWindow:oe}=vs;Ee&&(Qa.unmountComponentAtNode(Ee),vs.containerTileId=void 0,vs.container=void 0),oe&&(oe.removeEventListener("beforeunload",Eo),oe.close(),vs.childWindow=void 0,vs.childWindowToken=void 0)},"closeScreenShareWindow"),Lr=(0,_.Ay)("Launch the window that renders screen share media",function(){var Ee=(0,Oo.coroutine)(function*(oe,ye,Se){var qe,$e,Ct;const Ze=ye(),Jt=(0,s.Ay)({state:Ze}),Rn=Se!=null&&Se.screenSharePeerId?Se.screenSharePeerId:(0,Gn.vN)(Ze);let Yn=!1;const{container:hs,containerTileId:en}=vs;Rn||(Jt.warn(es.o7,"lastRemoteScreensharePeerId is not found"),Yn=!0);const Ln=(0,Gn.JZ)(Ze,Rn||""),bn=Ln.userId?(0,Xa.I)(Ze,Ln.userId):"";let os=ra.t("Screen share");bn&&(os=ra.t("{memberName} screen share",{memberName:(0,mo.nr)(bn)}));const cs={...er.P,backgroundColor:"black",title:os,type:"huddle-call-screen-share"},us=(0,i.getStateForClientStore)();(0,as.Ak)(us)||(Jt.warn(es.o7,"no active huddle found"),Yn=!0);const Ns=(Ln==null||(qe=Ln.tileIds)===null||qe===void 0||($e=qe.screenshare)===null||$e===void 0?void 0:$e.tileId)||0;(0,i.dispatchForClientStore)((0,qs.cn)({tileId:Ns}))||(Jt.warn(es.o7,"video tile does not have stream"),Yn=!0);const zs=!vs.childWindow||vs.childWindow.closed;if(zs&&(0,M.y3)()){const{window:Xs,windowToken:co}=yield(0,Ja.wK)("",cs);vs.childWindow=Xs,vs.childWindowToken=co}else zs&&(vs.childWindow=window.open("",os,"toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=780,height=480")||void 0);if(!vs.childWindow){Jt.warn(es.o7,"No child window available. Exiting screen share window launch");return}const ws=(0,Za.ZT)(Ze);vs.childWindow.document&&(vs.childWindow.document.body.style.background="black");const io={windowRef:(0,Pr.O)(vs.childWindow),windowToken:vs.childWindowToken};if(zs&&(vs.childWindow.addEventListener("beforeunload",Eo),window.addEventListener("beforeunload",Eo)),!(hs&&en===Ns)||zs){vs.containerTileId=Ns;const Xs=(0,i.getStoreInstanceByTeamId)(ws);vs.container=yield(0,qa.s)(vs.childWindow,Qn.createElement(Sr.A,{store:Xs},Qn.createElement($o.M.Provider,{value:io},Qn.createElement(tr.A,{shouldStopHuddle:!0},Qn.createElement(aa,{peerId:Rn,isError:Yn})))),{useContainer:!0})}const lo=(Ct=vs.childWindow)===null||Ct===void 0?void 0:Ct.browserWindowId;lo?(0,y.hN0)(lo):(0,$a.A)(vs.childWindow.focus)&&vs.childWindow.focus(),Rr(vs.childWindow)});return function(oe,ye,Se){return Ee.apply(this,arguments)}}());Lr.meta={name:"createThunk",key:"createThunklaunchScreenShareWindow",description:"Launch the window that renders screen share media"};var ko=e(9712681361),Ur=e(5761207079);const ia=(0,_.Ay)("alerts if a user joins the huddle and the current user has hidden that user",(Ee,oe,ye)=>{let{userId:Se}=ye;const qe=oe();(0,Ur.a)(qe,Se)&&Ee((0,kt.Iw)(kt.vT.HiddenUserJoinedHuddle))});ia.meta={name:"createThunk",key:"createThunkmaybeAlertHiddenUserJoinedHuddle",description:"alerts if a user joins the huddle and the current user has hidden that user"};var Cs=e(462591818),la=e(9640070512),ca=e(2527782504),da=e(5954792826),ks=e(700984029),vo=e(1829947126),br=e(9009528296),kr=e(1289024643),to=e(9853754481),ua=e(9372409576);const _a=(0,_.Ay)("Send call analytics to the server",(Ee,oe,ye)=>{const Se=oe().activeCall;let qe;if(ye&&ye.callId?qe=ye.callId:Se&&Se.id&&(qe=Se.id),!qe){(0,Ro.M)("There should be an active call in progress in order to send analytics.");return}const $e=Br(new ua.$.calls.analytics.Report(ye.stats),oe()),Ct=ua.$.calls.analytics.Report.encode($e).finish(),Ze=String.fromCharCode(...Ct);return Ee((0,Ke.apiCall)({method:"screenhero.rooms.postAnalytics",args:{room:qe,analytics:btoa(Ze)},reason:"calls-analytics"}))});_a.meta={name:"createThunk",key:"createThunksendAnalytics",description:"Send call analytics to the server"};function Br(Ee,oe){const ye=Ee;return ye.recv=Ee.recv.map(Se=>{if(Se.peerId){const qe=(0,Gn.C1)(oe,Se.peerId);if(qe){const $e=Se;$e.userId=qe.userId}}if(Se.peerIdString){const qe=(0,Gn.C1)(oe,Se.peerIdString);if(qe){const $e=Se;$e.userId=qe.userId}}return Se}),ye.recv=ye.recv.filter(Se=>!!Se.userId),Ee}u(Br,"mapPeerIdsToUserIds");var Nr=e(5046160032),ma=e(8848660647),Wr=e(4914127094),Bo=e(8935621861),no=e(415910655);const xr=(0,s.Wo)({label:"SEND-MEETING-EVENTS-LOGGER"}),ha="screenhero.rooms.proxyMeetingEvents",Ea=(0,_.Ay)("Send meeting events to the server",function(){var Ee=(0,Oo.coroutine)(function*(oe,ye,Se){let qe;try{qe=JSON.stringify(Se.events)}catch(Jt){xr.error(Jt.message);return}const{metrics:$e,teamId:Ct}=Fr();if(Se.isUnloading){const Jt={app:Se.app,meeting_id:Se.meetingId,media_region:Se.mediaRegion,attendee_id:Se.attendeeId,call_id:Se.callId,ua:window.navigator.userAgent,event_type:"calls-chime-events",encoding:"none",events:qe,preferred_media_region:yield Bo.A.getInstance().getNearestChimeMediaRegion(Ct),audio_connected_time:($e==null?void 0:$e.audioConnectedTime)||0,first_presence_time:($e==null?void 0:$e.firstPresenceTime)||0,rooms_join_time:($e==null?void 0:$e.roomsJoinTime)||0,sdk_initialized_time:($e==null?void 0:$e.sdkInitializedTime)||0,chime_attendee_presence_time:Se.attendeePresenceDuration?Se.attendeePresenceDuration:($e==null?void 0:$e.attendeePresenceDuration)||0,chime_meeting_start_time:Se.meetingStartDuration?Se.meetingStartDuration:($e==null?void 0:$e.meetingStartDuration)||0,chime_signaling_open_time:Se.signalingOpenDuration?Se.signalingOpenDuration:($e==null?void 0:$e.signalingOpenDuration)||0,chime_ice_gathering_time:Se.iceGatheringDuration?Se.iceGatheringDuration:($e==null?void 0:$e.iceGatheringDuration)||0,voice_focus_init_time:($e==null?void 0:$e.voiceFocusInitializedTime)||0,creds_to_voice_focus_init_time:($e==null?void 0:$e.credentialsToVoiceFocusInitializedTime)||0};return(0,Nr.A)({apiUrl:"/api/",method:ha,token:(0,Wr.F)(ye()),versionTs:(0,ma.HF)(),versionUid:(0,ma.X3)(),args:Jt})?et.S.resolve():et.S.reject(new Error("sendMeetingEvents: beacon failed"))}const Ze=Se.isEnding?{app:Se.app,meeting_id:Se.meetingId,media_region:Se.mediaRegion,attendee_id:Se.attendeeId,events:qe,call_id:Se.callId,preferred_media_region:yield Bo.A.getInstance().getNearestChimeMediaRegion(Ct),audio_connected_time:($e==null?void 0:$e.audioConnectedTime)||0,first_presence_time:($e==null?void 0:$e.firstPresenceTime)||0,rooms_join_time:($e==null?void 0:$e.roomsJoinTime)||0,sdk_initialized_time:($e==null?void 0:$e.sdkInitializedTime)||0,chime_attendee_presence_time:Se.attendeePresenceDuration?Se.attendeePresenceDuration:($e==null?void 0:$e.attendeePresenceDuration)||0,chime_meeting_start_time:Se.meetingStartDuration?Se.meetingStartDuration:($e==null?void 0:$e.meetingStartDuration)||0,chime_signaling_open_time:Se.signalingOpenDuration?Se.signalingOpenDuration:($e==null?void 0:$e.signalingOpenDuration)||0,chime_ice_gathering_time:Se.iceGatheringDuration?Se.iceGatheringDuration:($e==null?void 0:$e.iceGatheringDuration)||0,voice_focus_init_time:($e==null?void 0:$e.voiceFocusInitializedTime)||0,creds_to_voice_focus_init_time:($e==null?void 0:$e.credentialsToVoiceFocusInitializedTime)||0}:{app:Se.app,meeting_id:Se.meetingId,media_region:Se.mediaRegion,attendee_id:Se.attendeeId,events:qe,call_id:Se.callId};return oe((0,Ke.apiCall)({method:ha,args:Ze,reason:"calls-chime-events"}))});return function(oe,ye,Se){return Ee.apply(this,arguments)}}());Ea.meta={name:"createThunk",key:"createThunksendMeetingEvents",description:"Send meeting events to the server"};function Fr(){const Ee=(0,i.getStateForClientStore)(),{teamId:oe}=(0,as.Qn)(Ee)||{};return{metrics:(0,no.s2)(),teamId:oe}}u(Fr,"getCallMetricsAndTeamId");const Kr=(0,s.Wo)({label:"HANDLE-MEETING-EVENTS-LOGGER"}),va=(0,_.Ay)("Handle Chime meeting events",(Ee,oe,ye)=>{let{events:Se,callId:qe,meetingId:$e,mediaRegion:Ct,attendeeId:Ze,isUnloading:Jt,isEnding:Rn}=ye;const Yn=Hr(Se);!(0,at.A)(Yn)&&!Jt&&!Rn&&(0,no.jm)(Yn),Ee(Ea({events:Se,app:"huddles",callId:qe,meetingId:$e,mediaRegion:Ct,attendeeId:Ze,isUnloading:Jt,isEnding:Rn,attendeePresenceDuration:Yn.attendeePresenceDuration,signalingOpenDuration:Yn.signalingOpenDuration,iceGatheringDuration:Yn.iceGatheringDuration,meetingStartDuration:Yn.meetingStartDuration}))});va.meta={name:"createThunk",key:"createThunkhandleMeetingEvents",description:"Handle Chime meeting events"};function Hr(Ee){const oe={};return Ee.forEach(ye=>{let{message:Se}=ye;try{const Jt=JSON.parse(Se);switch(Jt.name){case"attendeePresenceReceived":var qe;oe.attendeePresenceDuration=(qe=Jt.attributes)===null||qe===void 0?void 0:qe.attendeePresenceDurationMs;break;case"meetingStartSucceeded":var $e,Ct,Ze;oe.signalingOpenDuration=($e=Jt.attributes)===null||$e===void 0?void 0:$e.signalingOpenDurationMs,oe.iceGatheringDuration=(Ct=Jt.attributes)===null||Ct===void 0?void 0:Ct.iceGatheringDurationMs,oe.meetingStartDuration=(Ze=Jt.attributes)===null||Ze===void 0?void 0:Ze.meetingStartDurationMs;break;default:break}}catch(Jt){Kr.error("Invalid JSON in meeting event",Jt)}}),oe}u(Hr,"parseMeetingEventMetrics");const wr=va;var Ks=e(6758774099),Vr=e(4988306802);const fa=(0,_.Ay)("Process AWS transcript event",(Ee,oe,ye)=>{var Se;if((0,Et.VW)(ye))return;const qe=ye.results[0];if(!(qe!=null&&qe.resultId)||!(0,Vr.TP)(oe()))return;const $e=(Se=qe.alternatives[0])===null||Se===void 0?void 0:Se.items;if(!($e!=null&&$e.length)){Ee((0,Ks.h2)({resultId:qe.resultId,transcriptions:[]}));return}const Ct=[];$e.forEach(Ze=>{var Jt;const Rn=Ct[Ct.length-1],Yn=(0,da.l)((Jt=Ze.attendee)===null||Jt===void 0?void 0:Jt.externalUserId);Yn&&(Ze.type===Et.E9.PUNCTUATION?Rn&&(Rn.content=`${Rn.content}${Ze.content}`,Rn.endTimeMs=Ze.endTimeMs):Ct.push({memberId:Yn,timestampMs:Ze.startTimeMs,endTimeMs:Ze.endTimeMs||Date.now(),content:Ze.content}))}),Ee((0,Ks.h2)({resultId:qe.resultId,transcriptions:Ct}))});fa.meta={name:"createThunk",key:"createThunkprocessAwsTranscription",description:"Process AWS transcript event"};const jr=fa;var $s=e(8783285437),Gr=e(6155974509);const pa=(0,_.Ay)("Maybe disable the screen share",function(){var Ee=(0,Oo.coroutine)(function*(oe,ye){const Se=(0,ho.tZ)("CALLS-REDUX");ye().peers.self.isScreenshareEnabled&&(Se.info("Attempted to turn off screen sharing"),oe((0,Gn.kT)({id:"self",isScreenshareEnabled:!1,selectedScreenId:void 0}))),(0,Gr.a)()});return function(oe,ye){return Ee.apply(this,arguments)}}());pa.meta={name:"createThunk",key:"createThunkdisableScreenShareIfEnabled",description:"Maybe disable the screen share"};var Js=e(9190452268),Ts=e(9680914051),Vs=e(1990810649),ga=e(5145584581),zr=e(9365970888),fo=e(7592559649),Yr=e(6251210828);let Qr=u(class{onPeerMuted(oe,ye){this.dispatch((0,Gn.kT)({id:oe,isMicrophoneEnabled:!ye}))}onPeerJoined(oe,ye){if(this.maybeRecordFirstPresenceTime(),ye&&oe){this.dispatch((0,Gn.Uu)({id:oe,userId:ye,isMicrophoneEnabled:!0})),this.dispatch(Co());const Se=(0,Gn.Ng)(this.store.getState());(0,i.dispatchForClientStore)((0,$t.Rr)({isDrawEnabled:Se.isDrawEnabled||!1})),this.dispatch((0,Ks.U$)({type:$s.v.JOIN,memberId:ye,timestampMs:Date.now()})),this.maybeRemoveUserAsPending(ye),this.dispatch(ia({userId:ye}))}}onPeerLeft(oe){var ye;const Se=(ye=(0,Gn.jB)(this.store.getState(),oe))===null||ye===void 0?void 0:ye.userId;Se&&(this.callLogger.info(`Peer left the huddle. userId=${Se} peerId=${oe}`),this.dispatch((0,Ks.U$)({type:$s.v.LEAVE,memberId:Se,timestampMs:Date.now()}))),this.dispatch((0,Gn.xx)(oe)),this.dispatch(Co())}onSelfJoined(){const oe=this.recordTiming(Ts.qK);this.maybeRecordFirstPresenceTime(),this.dispatch(qn(oe))}onSelfLeft(){this.dispatch((0,kt.LL)(Gt.vT.HiddenUserJoinedHuddle))}onNewActiveSpeaker(oe){this.dispatch((0,Gn.FX)(oe))}onPeerReacji(oe,ye,Se,qe){var $e;this.dispatch((0,Gn._x)({peerId:oe,emoji:ye,isEmoji:Se,reactionType:qe}));const Ct=($e=(0,Gn.jB)(this.store.getState(),oe))===null||$e===void 0?void 0:$e.userId;Ct&&this.dispatch((0,Ks.U$)({type:$s.v.SEND_REACTION,memberId:Ct,timestampMs:Date.now(),emoji:ye}))}onPeerMuteRequest(oe,ye){ye===this.selfAttendeeId&&(this.dispatch((0,sa.A)(!1)),this.dispatch((0,Gt.CE)({alert:Gt.vT.PeerMuteRequest,peerId:oe})),this.callLogger.info(`Peer muted self microphone : peerId:${oe}`))}onError(oe,ye){let Se;ye===Et.b9[Et.b9.AudioJoinedFromAnotherDevice]?Se=ko.M6.AudioJoinedFromAnotherDevice:ye===Et.b9[Et.b9.MeetingEnded]&&(Se=ko.M6.ChimeMeetingEnded),this.dispatch((0,fn.A)({terminalState:Se||oe})),this.callLogger.info(`tearDown executed: terminalState: ${oe}, statusCodeName: ${ye} tearDownState: ${Se}`)}onClogError(oe){}onMeetingSessionInitialized(){this.recordTiming(Ts.W_);const oe=(0,Js.Cy)({state:this.store.getState()}),ye=oe.measure(Ts.Bq,Ts.CY);oe.count(Ts.CY,ye),(0,no.jm)({sdkInitializedTime:ye})}onSelfPermissionUpdated(oe,ye){this.callLogger.info(`Received permission update from type:${ye}, isDenied: ${oe}`);let Se;(0,M.y3)()?Se=ye===Ut.lW.Microphone?Gt.vT.NoSystemAudio:Gt.vT.NoSystemVideo:Se=ye===Ut.lW.Microphone?Gt.vT.NoBrowserAudioPermission:Gt.vT.NoBrowserVideoPermission,oe?this.dispatch((0,Gt.CE)({alert:Se})):this.dispatch((0,Gt.Gu)(Se))}onSelfVideoTileUpdate(oe){if(!oe.tileId)return;const ye=(0,Gn.Ng)(this.getState());if(!oe.isContent&&!ye.isCameraEnabled)return;if(!(0,Gn.vz)(this.getState()))this.dispatch((0,Ks.U$)({type:$s.v.SCREENSHARE_START,memberId:(0,yt.WR)(this.getState()),timestampMs:Date.now()})),this.dispatch((0,Gn.kT)({id:"self",tileId:oe.tileId,isScreenshareEnabled:!!oe.isContent}));else if(oe.isContent){var qe,$e;this.dispatch((0,Ks.U$)({type:$s.v.SCREENSHARE_START,memberId:(0,yt.WR)(this.getState()),timestampMs:Date.now()}));const Ct=(0,Gn.JC)(this.getState());((qe=ye.tileIds)===null||qe===void 0||($e=qe.screenshare)===null||$e===void 0?void 0:$e.tileId)!==oe.tileId&&Ct!==Vs.cM.Screenshare&&this.dispatch((0,ga.x)({peerId:"self",contentViewType:Vs.cM.None,contentViewConfig:{}})),this.dispatch((0,Gn.kT)({id:"self",tileId:oe.tileId,isScreenshareEnabled:!!oe.isContent}))}else this.dispatch((0,Gn.kT)({id:"self",tileId:oe.tileId,isCameraEnabled:!0}))}onPeerVideoTileUpdate(oe,ye){if(!ye.tileId)return;const Se=ye.boundExternalUserId&&(0,da.l)(ye.boundExternalUserId);ye.isContent&&Se&&(this.callLogger.info(`Peer screenshare started: userId=${Se}`),this.dispatch((0,Ks.U$)({type:$s.v.SCREENSHARE_START,memberId:Se,timestampMs:Date.now()}))),this.dispatch((0,Gn.BD)({id:oe,tileId:ye.tileId,isContent:ye.isContent,isPaused:ye.paused}))}onVideoTileRemoved(oe){var ye,Se;const qe=this.store.getState(),$e=(0,Gn.v2)(qe,oe);$e&&(this.callLogger.info(`Peer screenshare stopped: userId=${$e}`),this.dispatch((0,Ks.U$)({type:$s.v.SCREENSHARE_STOP,memberId:$e,timestampMs:Date.now()}))),this.dispatch((0,Gn.Qr)({tileId:oe})),Eo();const Ct=(0,Gn.Ng)(qe);((ye=Ct.tileIds)===null||ye===void 0||(Se=ye.screenshare)===null||Se===void 0?void 0:Se.tileId)===oe&&Ct.contentViewType===Vs.cM.Screenshare&&this.dispatch((0,ga.x)({peerId:"self",contentViewType:Vs.cM.None,contentViewConfig:{}}))}onVideoTileWillPause(oe){this.dispatch((0,Gn.K3)({tileId:oe}))}onVideoTileWillUnpause(oe){this.dispatch((0,Gn.XS)({tileId:oe}))}onDeviceAccessApproved(oe){switch(oe){case Cs.mT.MICROPHONE:{(0,M.y3)()?(this.dispatch((0,Gt.Gu)(Gt.vT.NoSystemAudio)),this.dispatch((0,ks.er)())):(this.dispatch((0,Gt.Gu)(Gt.vT.NoBrowserAudioPermission)),this.dispatch((0,ks.ZY)()));break}case Cs.mT.CAMERA:{(0,M.y3)()?(this.dispatch((0,Gt.Gu)(Gt.vT.NoSystemVideo)),this.dispatch((0,ks.NH)())):(this.dispatch((0,Gt.Gu)(Gt.vT.NoBrowserVideoPermission)),this.dispatch((0,ks.in)()));break}default:}}onCheckSystemMediaAccess(oe){switch(oe){case Cs.mT.MICROPHONE:{this.dispatch((0,ks.tG)()),this.dispatch((0,Gt.CE)({alert:Gt.vT.NoSystemAudio}));break}case Cs.mT.CAMERA:{this.dispatch((0,ks.Yr)()),this.dispatch((0,Gt.CE)({alert:Gt.vT.NoSystemVideo}));break}case Cs.mT.SCREEN:{this.dispatch((0,ks.J3)()),this.dispatch((0,Gt.CE)({alert:Gt.vT.NoSystemScreenShare}));break}default:}}onBrowserMediaDeviceAccessDenied(oe){switch(this.callLogger.error(`Self ${oe} device access denied`),oe){case Cs.mT.MICROPHONE:{this.dispatch((0,ks.cH)()),this.dispatch((0,Gt.CE)({alert:Gt.vT.NoBrowserAudioPermission}));break}case Cs.mT.CAMERA:{this.dispatch((0,ks.px)()),this.dispatch((0,Gt.CE)({alert:Gt.vT.NoBrowserVideoPermission}));break}default:}}onStartSessionTimeout(){}onSetNoMediaInput(oe){switch(oe){case Cs.mT.MICROPHONE:{this.dispatch((0,Gt.CE)({alert:Gt.vT.NoUserAudioStream}));break}case Cs.mT.CAMERA:{const ye=(0,zr.ly)(this.getState());if((0,i.dispatchForClientStore)((0,$t.WM)({setVideoEnabled:!1})),!(0,M.y3)()&&ye)break;this.dispatch((0,Gt.CE)({alert:Gt.vT.NoUserVideoStream}));break}default:}}onClearNoMediaInput(oe){switch(oe){case Cs.mT.MICROPHONE:{this.dispatch((0,Gt.Gu)(Gt.vT.NoUserAudioStream));break}case Cs.mT.CAMERA:{this.dispatch((0,Gt.Gu)(Gt.vT.NoUserVideoStream));break}default:}}onSetNoAudioOutput(oe){switch(oe){case Cs.NS.AUDIO_ELEMENT_ERROR:{this.dispatch((0,Gt.CE)({alert:Gt.vT.NoAudioOutputAudioElementError}));break}case Cs.NS.AUDIO_LEVEL_ERROR:{this.dispatch((0,Gt.CE)({alert:Gt.vT.NoAudioOutputAudioLevelError}));break}default:}}onClearNoAudioOutput(oe){switch(oe){case Cs.NS.AUDIO_ELEMENT_ERROR:{this.dispatch((0,Gt.Gu)(Gt.vT.NoAudioOutputAudioElementError));break}case Cs.NS.AUDIO_LEVEL_ERROR:{this.dispatch((0,Gt.Gu)(Gt.vT.NoAudioOutputAudioLevelError));break}default:}}onSelfConnected(){this.callLogger.info("Self connected to chime media server"),this.dispatch((0,Gn.kT)({id:"self",isConnected:!0,noInternet:!1}))}onSelfDisconnected(){this.callLogger.info("Self disconnected from chime media server"),this.dispatch((0,Gn.kT)({id:"self",isConnected:!1})),Jn.A.publish({type:Kn.lx.NetworkDisconnect,update:{peerId:"self"}})}onSelfConnectionQualityChanged(oe,ye){this.callLogger.info(`${oe} audio packet loss changed to: ${ye}`)}onPeerConnected(oe){this.dispatch((0,Gn.E3)({id:oe,isConnected:!0}))}onPeerDisconnected(oe){this.callLogger.info(`peer disconnected from chime media server ${oe}`),this.dispatch((0,Gn.E3)({id:oe,isConnected:!1}))}onPeerConnectionQualityChanged(oe,ye,Se){}onSelfMediaStreamChanged(oe){}onNewPeerMediaStream(oe,ye){}onScreenThumbnails(oe){}onUpdatedSelfAudioLevel(oe){vo.A.publish("self",oe/to.Ep),br.A.publish(oe/to.Ep);const ye=this.store.getState();(0,mn.lV)(ye)&&vo.A.publishAll("self",oe/to.Ep)}onUpdatedPeerAudioLevels(oe){const ye=this.store.getState();Object.entries(oe).forEach(qe=>{let[$e,Ct]=qe;vo.A.publish($e,Ct/to.Ep)}),(0,mn.lV)(ye)&&Object.entries(oe).forEach(qe=>{let[$e,Ct]=qe;vo.A.publishAll($e,Ct/to.Ep)})}onPeerCameraActive(oe,ye){const Se=oe==="self";this.callLogger.info(`${Se?"Self":`Peer (${oe})`} camera turned ${ye?"on":"off"}`),this.dispatch((0,Gn.kT)({id:oe,isCameraEnabled:ye}))}onPeerScreenShareActive(oe,ye){const Se=oe==="self";this.callLogger.info(`${Se?"Self":`Peer (${oe})`} screenshare ${ye?"started":"stopped"}`)}onPeerDrawMessage(oe,ye){Ps.A.publish({id:oe,...ye})}onPeerDrawEnabled(oe,ye){this.dispatch((0,Gn.kT)({id:oe,isDrawEnabled:ye}))}onMediaStats(oe,ye){this.dispatch(_a({stats:oe,callId:ye}))}onAppMetrics(oe){let{appMetrics:ye,clientMetricReport:Se,screenshareRtcStats:qe}=oe;const $e=(0,Mt.Ay)({state:this.getState(),appMetrics:ye});Jn.A.publish({type:Kn.lx.AppMetrics,update:{huddleStateSnapshot:$e,clientMetricReport:Se,screenshareRtcStats:qe}})}onDevicesUpdated(oe){this.dispatch((0,ks.Fb)(oe))}onOutputDeviceChanged(oe){this.callLogger.info(`Self audio output device changed: device: ${oe.id}`),this.dispatch((0,ks.AS)(oe))}onDeviceTypeBlocked(oe){}onTokenRefreshRequest(){}onScreenShareStopped(){this.dispatch(pa());const ye=(0,i.getClientStoreInstance)().getState(),Se=(0,as.Ak)(ye);!Se||(0,at.A)(Se)||Se.huddleState===ko.RJ.ENDING||this.dispatch((0,la.H)({focusKey:ca.Ay.HUDDLE_SIDEBAR_FOOTER}))}onScreenShareStarted(){this.callLogger.info("Self screenshare started"),this.dispatch((0,la.H)({focusKey:ca.Ay.HUDDLE_SIDEBAR_FOOTER}))}onSetNoOrLowInputAudioLevel(){Jn.A.publish({type:Kn.lx.NoAudio,update:{direction:"send",noAudio:!0}})}onClearNoOrLowInputAudioLevel(){Jn.A.publish({type:Kn.lx.NoAudio,update:{direction:"send",noAudio:!1}})}onSetNoOrLowOutputAudioLevel(){Jn.A.publish({type:Kn.lx.NoAudio,update:{direction:"recv",noAudio:!0}})}onClearNoOrLowOutputAudioLevel(){Jn.A.publish({type:Kn.lx.NoAudio,update:{direction:"recv",noAudio:!1}})}onAudioVideoDidStartConnecting(){this.recordTiming(Ts.dk)}onStart(){this.recordTiming(Ts.Nh)}onAudioVideoDidStart(){this.recordTiming(Ts.ck),(0,i.dispatchForClientStore)((0,$t._U)(Date.now()))}onAudioVideoDidStop(){const oe=(0,i.getClientStoreInstance)(),ye=(0,as.cN)(oe==null?void 0:oe.getState()),Se=Date.now(),qe=Se-ye;(0,i.dispatchForClientStore)((0,$t.bV)(Se)),(0,i.dispatchForClientStore)((0,$t.qr)(qe))}onInit(){this.recordTiming(Ts.cP)}onVoiceFocusLoaded(){const oe=(0,Js.Cy)({state:this.store.getState()}),ye=oe.measure(Ts.aN,Ts.pz);oe.count(Ts.pz,ye),this.recordTiming(Ts.qb)}onVoiceFocusStartLoading(){(0,Js.Cy)({state:this.store.getState()}).mark(Ts.aN)}recordTiming(oe){const ye=(0,Js.Cy)({state:this.store.getState()}),Se=ye.measure(Ts.qr,oe);return ye.count(oe,Se),Se}onMeetingEvents(oe,ye,Se,qe,$e,Ct,Ze){this.dispatch(wr({events:$e,callId:qe,meetingId:oe,mediaRegion:ye,attendeeId:Se,isUnloading:Ct,isEnding:Ze}))}onMaybeVoiceFocusInitialized(oe){const Se=(0,Js.Cy)({state:this.store.getState()}).measure(Ts.Bq,Ts.bv);(0,no.jm)({voiceFocusInitializedTime:oe,credentialsToVoiceFocusInitializedTime:Se})}onScreenShareError(oe){switch(this.callLogger.error(`an error occurred while initiating a screenshare: type: ${oe}`),oe){case Cs.lD.NOT_FOUND_ERROR:{this.dispatch((0,Gt.CE)({alert:Gt.vT.SSNotFoundError}));break}case Cs.lD.NOT_READABLE_ERROR:{this.dispatch((0,Gt.CE)({alert:Gt.vT.SSNotReadableError}));break}case Cs.lD.ERROR:{this.dispatch((0,Gt.CE)({alert:Gt.vT.ScreenShareError}));break}default:break}}onNoiseSuppressionCPUThrottled(){this.dispatch((0,Gt.CE)({alert:Gt.vT.NoiseSuppressionCPUThrottled}))}onTranscriptionEvent(oe){this.dispatch(jr(oe))}setSelfAttendeeId(oe){this.selfAttendeeId=oe}maybeRecordFirstPresenceTime(){this.firstPresenceTimeMs>0||(this.firstPresenceTimeMs=this.recordTiming(Ts.dP),(0,no.jm)({firstPresenceTime:this.firstPresenceTimeMs}))}onAudioInputTrackMuted(){this.dispatch((0,Gt.CE)({alert:Gt.vT.AudioInputTrackMuted}))}onAudioInputTrackUnMuted(){this.dispatch((0,Gt.Gu)(Gt.vT.AudioInputTrackMuted))}onJukeboxRequest(oe){if(!(0,mn.lV)(this.getState()))return;const Se=this.isDj(),$e=(0,Yr.Rl)(this.getState())[oe];!Se||!$e||((0,i.dispatchForClientStore)((0,$t.bk)({song:$e})),(0,i.dispatchForClientStore)((0,$t._u)({song:$e})),(0,i.dispatchForClientStore)((0,$t.WY)($e)))}onJukeboxStopRequest(){!(0,mn.lV)(this.getState())||!this.isDj()||((0,i.dispatchForClientStore)((0,$t.JM)()),(0,i.dispatchForClientStore)((0,$t._u)({song:void 0})))}isDj(){var oe;const ye=(0,yt.WR)(this.getState()),Se=(0,i.getClientStoreInstance)(),qe=(oe=(0,as.Qn)(Se==null?void 0:Se.getState()))===null||oe===void 0?void 0:oe.callId,$e=(0,fo.gV)(this.getState(),{callId:qe}),Ct=(0,fo.gV)(this.getState(),{callId:qe,userId:ye});return!$e||!!Ct}maybeRemoveUserAsPending(oe){const ye=(0,i.getClientStoreInstance)(),Se=(0,as.E9)(ye==null?void 0:ye.getState());Se&&this.dispatch((0,kr.r_)({callId:Se,userId:oe}))}onContentShareDetailsUpdate(oe,ye,Se){this.dispatch((0,Gn.kT)({id:oe,isDrawEnabled:ye,contentShareSource:Se}))}constructor(oe){this.firstPresenceTimeMs=0,this.callLogger=(0,ho.Jt)("HUDDLE-DISPATCHER"),this.selfAttendeeId=void 0,this.dispatch=oe.dispatch,this.getState=oe.getState,this.store=oe}},"HuddleActionDispatcher");var $r=e(5741354339),Jr=e(7439555287),so=e(4066669727),js=e(8778137680),Xr=e(7434063642),Aa=e(4156857608);let Pt,No,Gs;const Zr="HUDDLE-SDK",qr="HUDDLE-CLIENT-MIDDLEWARE",Bs=(0,s.Wo)({label:qr}),Ta=u(Ee=>{Ee.id==="self"&&(Pt==null||Pt.sendDrawMessage(Ee))},"onPeerDrawPublish");function Wo(Ee,oe,ye,Se){const qe=(0,as.E9)(Ee),$e=(0,as.l4)(Ee),Ct=$e?(0,i.getStoreInstanceByTeamId)($e):void 0,Ze=Ct?Ct.getState():void 0,Jt=Ze?(0,yt.WR)(Ze):void 0;qe&&Jt&&(Ct==null||Ct.dispatch(oe({user:Jt,channel:qe,fieldValue:ye,experimentHuddlesMultiDeviceGroupOn:Se})))}u(Wo,"maybeDispatchAwarenessUpdate");function oo(Ee,oe,ye){const Se=(0,as.E9)(Ee),qe=(0,as.l4)(Ee),$e=qe?(0,i.getStoreInstanceByTeamId)(qe):void 0,Ct=$e?$e.getState():void 0,Ze=Ct?(0,yt.WR)(Ct):void 0;Se&&Ze&&($e==null||$e.dispatch(oe({user:Ze,channel:Se,experimentHuddlesMultiDeviceGroupOn:ye})))}u(oo,"maybeDispatchAwarenessRemove");const ya=(0,ts.Ay)("dispatches actions to huddles SDK",(Ee,oe,ye)=>{const Se=Ee.getState(),qe=u(()=>{const en=(0,as.l4)(Se),Ln=(0,i.getStoreInstanceByTeamId)(en);if(!Ln)return{};const bn=Ln==null?void 0:Ln.getState();if(!bn)return{};const os=(0,Gn.Ng)(bn)||{};return{huddlesVideoActive:(0,Gn.vz)(bn),self:os}},"getIsHuddlesVideoActive");switch(ye.type){case $t.kn.getType():{var $e;const en=ye.payload;No=en==null||($e=en.audioOutputRef)===null||$e===void 0?void 0:$e.current,Bo.A.getInstance().init();break}case $t.Sd.getType():{const{huddlesVideoActive:en,self:Ln}=qe();Pt&&Pt.hasSession()&&(en?Pt.selfVideoEnabled(!0,!!(Ln!=null&&Ln.isScreenshareEnabled)):Pt.selfVideoEnabled(!0,!1));break}case $t._I.getType():{const{huddlesVideoActive:en,self:Ln}=qe();Pt&&Pt.hasSession()&&(en?Pt.selfVideoEnabled(!1,!!(Ln!=null&&Ln.isScreenshareEnabled)):Pt.selfVideoEnabled(!1,!1));break}case $t.qW.getType():{Bs.info("BOOT","user agent:",navigator.userAgent);const en=ye.payload;let Ln=en.isStartMuted;if(!No){Bs.error("Missing audio output element");return}const{server:bn,roomId:os}=en.callResult,cs=bn.attendee.AttendeeId,us=en.waitForHuddleStart,ys=en.isPrejoin;(0,i.dispatchForClientStore)((0,$t.og)(ys));const Ns=ys?(0,as.Qn)(Se):(0,as.Ak)(Se),{teamId:jo}=Ns||{},zs=(0,P.getFocusedWorkspace)(Se),ws=(0,i.getStoreInstanceByTeamId)(jo||zs),io=ws?ws.getState():void 0;if(!io){Bs.error("team state not available while initializing huddlesSdk. Returning early");return}Bs.info("client-huddles-middleware: Dispatching resetPeersStore"),ws.dispatch((0,Gn.VL)({huddlesVideoActive:!0})),ws.dispatch((0,Xr.X6)({})),Ln=Ln||(0,Le.ty)(io,"huddles_mute_by_default"),Ln&&(Bs.info("Start huddle as muted as specified in user prefs"),ws.dispatch((0,Gn.kT)({id:"self",isMicrophoneEnabled:!1}))),Gs&&Gs.stop(!0),(0,Jr.Gc)(zs),Gs=new As.w,Gs.start(os);const Go=(0,$r.u)();Go.then(Ys=>{Ys&&(Bs.info("Log reporter stopped"),Gs==null||Gs.stop(!0,!1),Gs=void 0)});const lo=new Qr(ws),{ttiTrace:Xs}=(0,Os.A)().getAllTraceHandlers();Pt=new ns.Y(lo,No,Zr),(0,Xn.Y)({name:Xn.R1.HuddlesSdk,ref:Pt});const co=(0,Ms.Y)(bn.attendee.ExternalUserId),Va=ls(io,{server:bn,isPrejoin:ys});if(!Va){Bs.error("sdk options not available. Returning early");return}const zo=[],Io=jo||zs;if(co&&Io){const Ys=new so.SV({teamId:Io,peerId:cs,topicId:co,isHuddlesAwarenessTimestampEnabled:(0,mn.gG)(ws.getState())});zo.push(Ys);const ja=new so.MC({teamId:Io});zo.push(ja),so.PL.watch(Io,co,Ys),(0,Xn.Y)({name:Xn.R1.ChimeChannelListener,ref:ja}),(0,Xn.Y)({name:Xn.R1.ChimeChannelBroadcaster,ref:Ys})}Pt.initialize(Va,[Cs.mT.MICROPHONE],!!Ln,us,Go,zo).then(()=>{const Ys=Pt==null?void 0:Pt.getMeetingMediaRegion();Xs==null||Xs.setMediaRegionTag(Ys),Jn.A.publish({type:Kn.lx.SelectedMediaRegion,update:{mediaRegionSelected:Ys}}),Pt&&!ys&&(Pt==null||Pt.maybeBindAudioOutputElement(),Pt==null||Pt.setIncludeSelfAndNoneActiveSpeaker(!0,!0))}),lo.setSelfAttendeeId(cs),Ps.A.subscribe(Ta),Bs.info("User started huddle");break}case $t.pl.getType():{const en=ye.payload;if(Pt){const{waitForHuddleEnd:Ln}=en;Pt.shutdown(()=>{Ln.resolve()});const bn=(0,P.getFocusedWorkspace)(Se),os=(0,i.getStoreInstanceByTeamId)(bn);os==null||os.dispatch((0,kt.LL)(kt.vT.SpeakingWhenMuted));const cs=(0,mn.pL)(os==null?void 0:os.getState()),us=(0,as.E9)(Se);us&&(oo(Se,js.RZ,cs),oo(Se,js.Lm,cs),so.PL.unwatch(us)),Ps.A.unsubscribe(Ta),Bs.info("User left huddle")}Pt=void 0,so.PL.unwatchAll(),(0,Xn.N5)();break}case $t.I9.getType():{const en=ye.payload;if(Pt&&Pt.hasSession()&&(Pt.selfMicrophoneEnabled(en),en)){const Ln=(0,P.getFocusedWorkspace)(Se),bn=(0,i.getStoreInstanceByTeamId)(Ln);bn==null||bn.dispatch((0,kt.LL)(kt.vT.SpeakingWhenMuted))}break}case $t.nU.getType():{const en=ye.payload;Pt&&Pt.hasSession()&&Pt.sendReacji(en.emoji,en.reactionType);break}case $t.M4.getType():{const en=ye.payload;if(Pt&&Pt.hasSession()){const Ln=(0,as.l4)(Se),bn=(0,i.getStoreInstanceByTeamId)(Ln);if(!bn)return;const os=(0,mn.pL)(bn.getState()),cs=(0,as.E9)(Se),us=(0,yt.WR)(bn.getState());if(cs){var Ct;if(((Ct=(0,fo.Fb)(bn.getState(),cs,us,os?"self":void 0))===null||Ct===void 0?void 0:Ct.field_value)===en)oo(Se,js.RZ,os),(0,as.Rv)(Se)&&en!=="speaker"&&(bn==null||bn.dispatch((0,Aa.a)({emoji:"speaker",reactionType:Vs.o.Sticker})));else{Wo(Se,js.z7,en,os);const{huddleEventsTrace:Ns}=(0,Os.A)().getAllTraceHandlers();Ns==null||Ns.update({name:Ls.p.REACTION,type:Ls.G.ONCE,tags:{reactionType:Vs.o.Sticker}})}}}break}case $t.so.getType():{const en=ye.payload;Pt&&Pt.hasSession()&&Pt.sendMuteRequest(en);break}case $t.ol.getType():{const en=ye.payload;Pt&&Pt.hasSession()&&Pt.setAGC(en);break}case $t.HC.getType():{const en=ye.payload;Pt&&Pt.hasSession()&&Pt.setNewPreferredDevice(en==null?void 0:en.id,en==null?void 0:en.type);break}case $t.yR.getType():{const en=ye.payload;Pt&&Pt.hasSession()&&Pt.setNoiseSuppression(en);break}case $t.Rb.getType():{const en=ye.payload;Pt&&Pt.hasSession()&&Pt.setVideoBackgroundEffect(en);break}case $t.YA.getType():{const{huddlesVideoActive:en,self:Ln}=qe(),bn=ye.payload,os=!!(Ln!=null&&Ln.isCameraEnabled);if(Pt&&Pt.hasSession()){var Ze,Jt;const cs=(0,as.l4)(Se),us=(0,i.getStoreInstanceByTeamId)(cs);en?Pt.selfVideoEnabled(os,!0,bn==null?void 0:bn.mediaSourceId,bn):Pt.selfVideoEnabled(!1,!0,bn==null?void 0:bn.mediaSourceId,bn);let ys=(bn==null||(Ze=bn.mediaSourceId)===null||Ze===void 0?void 0:Ze.startsWith("screen:"))||!1;!(bn==null||(Jt=bn.mediaSourceId)===null||Jt===void 0)&&Jt.startsWith("window:")&&(0,xn.LD)()&&(ys=!0),Pt.selfDrawEnabled((0,xs.A)()&&ys);const Ns=(0,xn.k0)((bn==null?void 0:bn.mediaSourceId)||"");Pt.sendContentShareDetails(Ns),us==null||us.dispatch((0,Gn.kT)({id:"self",isDrawEnabled:ys,isCameraEnabled:os,contentShareSource:Ns}))}break}case $t.QZ.getType():{const{huddlesVideoActive:en,self:Ln}=qe(),bn=en?Ln.isCameraEnabled:!1;if(Pt&&Pt.hasSession()){const os=(0,as.l4)(Se),cs=(0,i.getStoreInstanceByTeamId)(os);Pt.selfVideoEnabled(!!bn,!1),cs==null||cs.dispatch((0,Gn.kT)({id:"self",isDrawEnabled:!1,contentShareSource:void 0}))}break}case ks.Oh.getType():return Pt&&Pt.hasSession()?Pt.getScreenThumbnails():et.S.resolve(null);case $t.nI.getType():{const en=ye.payload;if(Pt&&Pt.hasSession()){var Rn;const Ln=(0,as.l4)(Se),bn=(0,i.getStoreInstanceByTeamId)(Ln);if(!bn)return;const os=(0,mn.pL)(bn.getState()),cs=(0,as.E9)(Se),us=(0,yt.WR)(bn.getState());if(!cs)return;const ys=(Rn=(0,fo.Fb)(bn.getState(),cs,us,os?"self":void 0))===null||Rn===void 0?void 0:Rn.field_value;return(en||ys==="speaker")&&(0,i.dispatchForClientStore)((0,Aa.a)({emoji:"speaker",reactionType:Vs.o.Sticker})),Pt.toggleAllIncomingVideo(en)}return et.S.resolve(null)}case $t.WY.getType():{const en=ye.payload;if(Pt&&Pt.hasSession()){const Ln=(0,as.l4)(Se);if(!(0,i.getStoreInstanceByTeamId)(Ln))return;(0,as.E9)(Se)&&Wo(Se,js.yT,en.key)}break}case $t.Lx.getType():{const en=ye.payload;Pt&&Pt.hasSession()&&Pt.sendJukeboxRequest(en.key);break}case $t.OA.getType():{Pt&&Pt.hasSession()&&Pt.sendJukeboxStopRequest();break}case $t.Db.getType():{Pt&&Pt.hasSession()&&Pt.sendRecordingStartNotification();break}case $t.bk.getType():{const en=ye.payload;if(Pt&&Pt.hasSession()){const Ln=(0,as.l4)(Se),bn=(0,i.getStoreInstanceByTeamId)(Ln);if(!(0,mn.lV)(bn.getState()))return;Pt.startContentShareJukebox({song:en.song})}break}case $t.JM.getType():{if(Pt&&Pt.hasSession()){const en=(0,as.l4)(Se),Ln=(0,i.getStoreInstanceByTeamId)(en);if(!Ln||!(0,mn.lV)(Ln.getState()))return;Pt.selfStopJukebox(),oo(Se,js.S)}break}case ks.e$.getType():{if(Pt&&Pt.hasSession()){const en=ye.payload.mediaResourceType;return Pt.maybeCheckSystemMediaAccess(en)}return et.S.resolve(null)}case qs.d2.getType():{if(Pt&&Pt.hasSession()){const{payload:{tileId:en,videoRef:Ln,shouldAttachStream:bn}}=ye;Pt.bindVideo(en,Ln.current,bn)}break}case qs.gJ.getType():{if(Pt&&Pt.hasSession()){const{payload:{tileId:en,videoRef:Ln,shouldDetachStream:bn}}=ye;Pt.unbindVideo(en,Ln.current,bn)}break}case qs.WY.getType():{if(Pt&&Pt.hasSession()){const{payload:{tileId:en}}=ye;Pt.pauseVideo(en)}break}case qs.D8.getType():{if(Pt&&Pt.hasSession()){const{payload:{tileId:en}}=ye;Pt.unpauseVideo(en)}break}case $t.WM.getType():{const en=ye.payload;if(Pt&&Pt.hasSession()){const Ln=(0,as.l4)(Se),bn=(0,i.getStoreInstanceByTeamId)(Ln),os=bn==null?void 0:bn.getState();if(!bn){Bs.info("client-huddles-middleware","no team store found when user toggles video");return}if(!os){Bs.info("client-huddles-middleware","no team state found when user toggles video");return}const{huddlesVideoActive:cs}=qe(),us=(0,Gn.Ng)(os);let ys;(en==null?void 0:en.setVideoEnabled)!==void 0?ys=en.setVideoEnabled:ys=!(us!=null&&us.isCameraEnabled),ys?(Bs.info("client-huddles-middleware","user toggling ON video"),Pt.setCameraQuality(...(0,rt.cg)()),cs?Pt.maybeEnableSelfCamera({isScreenshareEnabled:us.isScreenshareEnabled}):Pt.maybeEnableSelfCamera()):(Bs.info("client-huddles-middleware","user toggling OFF video"),cs?Pt.selfVideoEnabled(!1,!!(us!=null&&us.isScreenshareEnabled)):Pt.selfVideoEnabled(!1,!1),bn.dispatch((0,Gn.kT)({id:"self",isCameraEnabled:!1})))}break}case qs.cn.getType():{if(Pt&&Pt.hasSession()){const{payload:{tileId:en}}=ye;return(Pt==null?void 0:Pt.videoTileHasStream(en))||!1}return et.S.resolve(!1)}case Gn.xz.getType():{const{huddlesVideoActive:en,self:Ln}=qe();Pt&&ye.payload.isContent&&(en?Pt.selfVideoEnabled(!!(Ln!=null&&Ln.isCameraEnabled),!1):Pt.selfVideoEnabled(!1,!1));break}case $t.Dj.getType():{Pt!=null&&Pt.hasSession()&&(Pt==null||Pt.initVideoPermission());break}case $t._H.getType():{if(Pt!=null&&Pt.hasSession()){const{videoElement:en,deviceId:Ln}=ye.payload;Pt.stopVideoPreviewForVideoInput(en),Pt.setCameraQuality(...(0,rt.cg)()),Pt.requestPreviewStreamForDeviceId(Ln,Ut.lW.Camera,en)}break}case $t.yi.getType():{if(Pt!=null&&Pt.hasSession()){const en=ye.payload;Pt.stopVideoPreviewForVideoInput(en)}break}case $t.Rr.getType():{const{self:en}=qe();if(Pt&&Pt.hasSession()){const Ln=(en==null?void 0:en.contentShareSource)||ms.R.Unknown;if(Ln!==ms.R.Unknown){const bn=(en==null?void 0:en.isDrawEnabled)||!1;Pt.selfDrawEnabled((0,xs.A)()&&bn),Pt.sendContentShareDetails(Ln);const os=(0,i.getStoreInstanceByTeamId)(ye.payload.teamId);os==null||os.dispatch((0,Gn.kT)({id:"self",isDrawEnabled:bn}))}}break}case $t.HF.getType():{const en=ye.payload.isHostDrawEnabled,Ln=(0,i.getStoreInstanceByTeamId)(ye.payload.teamId);Ln==null||Ln.dispatch((0,Gn.kT)({id:"self",isHostDrawEnabled:en}));break}case $t.B5.getType():{Pt==null||Pt.handleClientOffline();break}case $t.f2.getType():{const en=ye.payload,{isStartMuted:Ln}=en,{teamId:bn}=(0,as.Ak)(Se)||{},os=(0,P.getFocusedWorkspace)(Se),cs=(0,i.getStoreInstanceByTeamId)(bn||os),{ttiTrace:us}=(0,Os.A)().getAllTraceHandlers();if(us==null||us.setMediaRegionTag(Pt==null?void 0:Pt.getMeetingMediaRegion()),cs&&Ln&&Pt)return Pt.completePrejoin(en).then(()=>{cs.dispatch((0,Gn.kT)({id:"self",isMicrophoneEnabled:!1}))});if(Pt)return Pt.completePrejoin({});break}case $t.xq.getType():{const en=ye.payload.contentViewType,Ln=ye.payload.contentViewConfig;if(Pt&&Pt.hasSession()&&(0,as.E9)(Se)){var Yn;const os=(0,as.l4)(Se),cs=(0,i.getStoreInstanceByTeamId)(os);if(!cs)return;const us=(0,mn.pL)(cs.getState());if(en!==Vs.cM.Screenshare)oo(Se,js.Lm,us);else if(!(Ln==null||(Yn=Ln.item)===null||Yn===void 0)&&Yn.id){let ys;if(Ln.item.id==="self")ys=(0,yt.WR)(cs.getState());else{var hs;ys=(hs=(0,Gn.jB)(cs.getState(),Ln.item.id))===null||hs===void 0?void 0:hs.userId}Wo(Se,js.fv,ys,us)}}break}default:return oe(ye)}return null});ya.meta={name:"createMiddleware",key:"createMiddlewareclientHuddlesMiddleware",description:"dispatches actions to huddles SDK"};const ei=ya;Object.defineProperty({huddlesSdk:Pt},"huddlesSdk",{get:()=>Pt,set:Ee=>{Pt=Ee}});var po=e(4653418008),go=e(3328068409);const Ia=(0,ts.Ay)("Broadcast client theme state to other stores",(Ee,oe,ye)=>{const Se=Ee.getState(),qe=oe(ye),$e=Ee.getState(),Ct=(0,P.getBootedWorkspaces)($e);return Kt({state:$e,prevState:Se,workspaces:Ct,broadcastSelector:Ze=>(0,go.to)(Ze),broadcastAction:Ze=>(0,po.yg)(Ze)}),Kt({state:$e,prevState:Se,workspaces:Ct,broadcastSelector:Ze=>(0,go.FW)(Ze),broadcastAction:Ze=>(0,po.kl)(Ze)}),Kt({state:$e,prevState:Se,workspaces:Ct,broadcastSelector:Ze=>(0,go.VD)(Ze),broadcastAction:Ze=>(0,po.LA)(Ze)}),Kt({state:$e,prevState:Se,workspaces:Ct,broadcastSelector:Ze=>(0,go.pg)(Ze),broadcastAction:Ze=>(0,po.Th)(Ze)}),qe});Ia.meta={name:"createMiddleware",key:"createMiddlewarebroadcastClientThemeMiddleware",description:"Broadcast client theme state to other stores"};const ti=Ia;var ni=e(1201539379),si=e(4172221507),oi=e(7331033739),ai=e(8707579690),ri=e(2779520532),ii=e(7128275929),li=e(9341298);const Ma=(0,ts.Ay)("Broadcast view layout state across all teams",(Ee,oe,ye)=>{const Se=Ee.getState(),qe=oe(ye),$e=Ee.getState(),Ct=(0,P.getBootedWorkspaces)($e);return Kt({state:$e,prevState:Se,workspaces:Ct,broadcastSelector:Ze=>{var Jt,Rn;return`${Ze==null||(Jt=Ze.viewLayout)===null||Jt===void 0?void 0:Jt.sidebarWidthIntent}-${Ze==null||(Rn=Ze.viewLayout)===null||Rn===void 0?void 0:Rn.sidebarWidthMode}`},broadcastAction:Ze=>{const Jt=Ze.split("-");return(0,ri.R)({sidebarWidthIntent:Number(Jt[0]),sidebarWidthMode:Jt[1]})}}),Kt({state:$e,prevState:Se,workspaces:Ct,broadcastSelector:Ze=>{var Jt,Rn;return`${Ze==null||(Jt=Ze.viewLayout)===null||Jt===void 0?void 0:Jt.sidebarWideWidthIntent}-${Ze==null||(Rn=Ze.viewLayout)===null||Rn===void 0?void 0:Rn.sidebarWideWidthMode}`},broadcastAction:Ze=>{const Jt=Ze.split("-");return(0,li.q)({sidebarWideWidthIntent:Number(Jt[0]),sidebarWideWidthMode:Jt[1]})}}),Kt({state:$e,prevState:Se,workspaces:Ct,broadcastSelector:Ze=>{var Jt,Rn;return`${Ze==null||(Jt=Ze.viewLayout)===null||Jt===void 0?void 0:Jt.sidebarExtraWideWidthIntent}-${Ze==null||(Rn=Ze.viewLayout)===null||Rn===void 0?void 0:Rn.sidebarExtraWideWidthMode}`},broadcastAction:Ze=>{const Jt=Ze.split("-");return(0,ii.a)({sidebarExtraWideWidthIntent:Number(Jt[0]),sidebarExtraWideWidthMode:Jt[1]})}}),Kt({state:$e,prevState:Se,workspaces:Ct,broadcastSelector:Ze=>(0,pe.Vo)(Ze),broadcastAction:Ze=>(0,si.F)(Ze)}),Kt({state:$e,prevState:Se,workspaces:Ct,broadcastSelector:Ze=>(0,pe.v8)(Ze),broadcastAction:Ze=>(0,ni.mV)(Ze)}),Kt({state:$e,prevState:Se,workspaces:Ct,broadcastSelector:Ze=>(0,pe.r8)(Ze),broadcastAction:Ze=>(0,oi.v)(Ze)}),Kt({state:$e,prevState:Se,workspaces:Ct,broadcastSelector:Ze=>{var Jt,Rn;return`${Ze==null||(Jt=Ze.viewLayout)===null||Jt===void 0?void 0:Jt.secondaryWidthIntent}-${Ze==null||(Rn=Ze.viewLayout)===null||Rn===void 0?void 0:Rn.secondaryWidthMode}`},broadcastAction:Ze=>{const Jt=Ze.split("-");return(0,ai.J)({secondaryWidthIntent:Number(Jt[0]),secondaryWidthMode:Jt[1]})}}),qe});Ma.meta={name:"createMiddleware",key:"createMiddlewarebroadcastViewLayoutMiddleware",description:"Broadcast view layout state across all teams"};const ci=Ma;var ao=e(2591023465),xo=e(3674298388),eo=e(965001959);const Ca=(0,_.Ay)("Set the user-specified sidebar width and mode",(Ee,oe,ye)=>{let{inspectorWidthIntent:Se,inspectorWidthMode:qe}=ye;(0,Z.q9)(eo.j0,Se),(0,Z.q9)(eo.mu,qe),Ee((0,ao.lT)({inspectorWidthIntent:Se,inspectorWidthMode:qe}))});Ca.meta={name:"createThunk",key:"createThunksetInspectorColumn",description:"Set the user-specified sidebar width and mode"};const Oa=(0,_.Ay)("Sets whether or not the sidebar is part of the grid layout at normal window sizes",(Ee,oe,ye)=>{(0,Z.q9)(eo.jG,ye),Ee((0,ao.KY)(ye))});Oa.meta={name:"createThunk",key:"createThunksetIsSidebarVisible",description:"Sets whether or not the sidebar is part of the grid layout at normal window sizes"};const Da=(0,_.Ay)("Set the user-specified sidebar width and mode",(Ee,oe,ye)=>{let{sidebarWidthIntent:Se,sidebarWidthMode:qe}=ye;(0,Z.q9)(eo.ke,Se),(0,Z.q9)(eo.ts,qe),Ee((0,ao.SP)({sidebarWidthIntent:Se,sidebarWidthMode:qe}))});Da.meta={name:"createThunk",key:"createThunksetSidebarColumn",description:"Set the user-specified sidebar width and mode"};const Sa=(0,_.Ay)("Sets whether or not the user prefers a responsive sidebar",(Ee,oe,ye)=>{(0,ne.A)(oe())&&(0,Z.q9)(eo.Lb,ye),Ee((0,ao.iJ)(ye))});Sa.meta={name:"createThunk",key:"createThunksetUserPrefersResponsiveSidebar",description:"Sets whether or not the user prefers a responsive sidebar"};const Pa=(0,ts.Ay)("Broadcast client theme state to other stores",(Ee,oe,ye)=>{const Se=Ee.getState(),qe=oe(ye),$e=Ee.getState(),Ct=(0,P.getBootedWorkspaces)($e);return Kt({state:$e,prevState:Se,workspaces:Ct,broadcastSelector:Ze=>{var Jt,Rn;return`${Ze==null||(Jt=Ze.workspaceLayout)===null||Jt===void 0?void 0:Jt.sidebarWidthIntent}-${Ze==null||(Rn=Ze.workspaceLayout)===null||Rn===void 0?void 0:Rn.sidebarWidthMode}`},broadcastAction:Ze=>{const Jt=Ze.split("-");return Da({sidebarWidthIntent:Number(Jt[0]),sidebarWidthMode:Jt[1]})}}),Kt({state:$e,prevState:Se,workspaces:Ct,broadcastSelector:Ze=>(0,xo.Vo)(Ze),broadcastAction:Ze=>Oa(Ze)}),Kt({state:$e,prevState:Se,workspaces:Ct,broadcastSelector:Ze=>(0,xo.r8)(Ze),broadcastAction:Ze=>(0,ao.vm)(Ze)}),Kt({state:$e,prevState:Se,workspaces:Ct,broadcastSelector:Ze=>(0,xo.xx)(Ze),broadcastAction:Ze=>Sa(Ze)}),Kt({state:$e,prevState:Se,workspaces:Ct,broadcastSelector:Ze=>{var Jt,Rn;return`${Ze==null||(Jt=Ze.workspaceLayout)===null||Jt===void 0?void 0:Jt.inspectorWidthIntent}-${Ze==null||(Rn=Ze.workspaceLayout)===null||Rn===void 0?void 0:Rn.inspectorWidthMode}`},broadcastAction:Ze=>{const Jt=Ze.split("-");return Ca({inspectorWidthIntent:Number(Jt[0]),inspectorWidthMode:Jt[1]})}}),qe});Pa.meta={name:"createMiddleware",key:"createMiddlewarebroadcastWorkspaceLayoutMiddleware",description:"Broadcast client theme state to other stores"};const di=Pa;var ui=e(9524650809),Ra=e(1649982175),La=e(352142497),ro=e(2870224675),_i=e(9932860381),Ua=e(3034856104);const mi=50;function ba(){return(0,ui.A)("tabSoda_")}u(ba,"generateTabSodaTabId");function hi(){return{activeTab:void 0,tabs:{},tabOrder:[]}}u(hi,"getInitialState");function Ei(Ee,oe){if(Ee&&oe){var ye,Se,qe,$e;const Jt=(ye=Ee[Ee[rs.jf]])===null||ye===void 0?void 0:ye.primary,Rn=(Se=Ee[Ee[rs.jf]])===null||Se===void 0?void 0:Se.secondary,Yn=(qe=oe[oe[rs.jf]])===null||qe===void 0?void 0:qe.primary,hs=($e=oe[oe[rs.jf]])===null||$e===void 0?void 0:$e.secondary;if(Ee.teamId===oe.teamId&&Ee[rs.jf]===oe[rs.jf]&&(Jt==null?void 0:Jt.id)===(Yn==null?void 0:Yn.id)&&(Rn==null?void 0:Rn.id)===(hs==null?void 0:hs.id)){var Ct,Ze;return!((Jt==null?void 0:Jt.viewType)===La.D.Thread&&(Yn==null?void 0:Yn.viewType)===La.D.Thread&&(Jt==null||(Ct=Jt.params)===null||Ct===void 0?void 0:Ct.threadId)!==(Yn==null||(Ze=Yn.params)===null||Ze===void 0?void 0:Ze.threadId))}}return!1}u(Ei,"areViewsSame");function ka(Ee){let{reducerState:oe,entry:ye,eventType:Se}=Ee,qe=oe.activeTab,$e=[...oe.tabOrder];qe||(qe=ba(),$e.push(qe));const Ct=oe.tabs[qe]||[];let Ze={...oe.tabs};if(Ze[qe]=[ye,...Se==="replace"?Ct.slice(1):Ct].slice(0,mi),!Ct.length){const Jt=oe.tabOrder.find(Rn=>{var Yn;return Ei(ye,(Yn=oe.tabs[Rn])===null||Yn===void 0?void 0:Yn[0])});Jt&&qe!==Jt&&($e=oe.tabOrder.filter(Rn=>Rn!==qe),Ze=(0,Ra.A)(oe.tabs,qe),qe=Jt)}return{activeTab:qe,tabs:Ze,tabOrder:$e}}u(ka,"getTabSodaStateFromWindowHistoryEvent");const vi=hi(),fi=(0,yn.vy)({},vi,{persistenceEnabled:!1,storeKey:"tabSoda"}).on(ro.nz,(Ee,oe)=>{let{setAsActive:ye}=oe;const Se=ba(),qe={...Ee.tabs,[Se]:[]},$e=[...Ee.tabOrder],Ct=Ee.activeTab?$e.indexOf(Ee.activeTab):-1;return $e.splice(Ct+1,0,Se),{activeTab:ye?Se:Ee.activeTab,tabs:qe,tabOrder:$e}}).on(ro.yw,(Ee,oe)=>({...Ee,activeTab:oe})).on(ro.oT,(Ee,oe)=>{const{activeTab:ye,tabs:Se,tabOrder:qe}=Ee;let $e=ye;oe===ye&&($e=(0,_i.fe)(ye,qe));const Ct=[...qe],Ze=qe.indexOf(oe);Ct.splice(Ze,1);const Jt={...Se};return delete Jt[oe],{tabs:Jt,tabOrder:Ct,activeTab:$e}}).on(ro.ez,(Ee,oe)=>{const ye=Ee.tabs[oe]||[],Se={...Ee.tabs,[oe]:[...ye.slice(1)]};return{...Ee,tabs:Se}}).on(ro.Uz,(Ee,oe)=>({...Ee,tabOrder:oe})).on(pn.y2,(Ee,oe)=>{let{entry:ye}=oe;return(0,Ua.H)(ye)?ka({eventType:"push",reducerState:Ee,entry:ye}):Ee}).on(pn.HQ,(Ee,oe)=>{let{entry:ye}=oe;return(0,Ua.H)(ye)?ka({eventType:"replace",reducerState:Ee,entry:ye}):Ee});var pi=e(6027162153),gi=e(9087248458),Ai=e(5503876160),Hs=e(1185969935);const Ti={bootedWorkspaces:[],failedToBootWorkspaces:[],needs2FASetup:[],needsToAcceptCustomTOS:[],userNotMemberOfAnyWorkspaceInOrg:[],migratingWorkspaces:{},completedMigrationWorkspaces:[],accessLimitedWorkspaces:[],recentlyFocusedWorkspaces:[],navigateToUnbootedWorkspace:{},removedWorkspaces:[]},yi="WORKSPACES",Ba=16,Ii=(0,Hs.Ay)({},Ti,{storeKey:"workspaces",persistenceEnabled:!0}).on(l.initialize,(Ee,oe)=>Mi(Ee,oe)).on(l.setDidBootAllWorkspaces,Ee=>({...Ee,didBootAllWorkspaces:!0})).on(l.setWorkspaceOrder,(Ee,oe)=>Ci(Ee,oe)).on(l.setWorkspaceBooted,(Ee,oe)=>Oi(Ee,oe)).on(l.setWorkspaceFailedToBoot,(Ee,oe)=>Di(Ee,oe)).on(l.setWorkspaceNeeds2FASetup,(Ee,oe)=>Si(Ee,oe)).on(l.setWorkspaceNeedsToAcceptCustomTOS,(Ee,oe)=>Pi(Ee,oe)).on(l.setNavigateToUnbootedWorkspace,(Ee,oe)=>({...Ee,navigateToUnbootedWorkspace:oe})).on(l.setWorkspaceIsMigrating,(Ee,oe)=>Ri(Ee,oe)).on(l.setWorkspaceMigrationIsComplete,(Ee,oe)=>Li(Ee,oe)).on(l.setWorkspaceIsAccessLimited,(Ee,oe)=>Ui(Ee,oe)).on(l.setUserNotMemberOfAnyWorkspaceInOrg,(Ee,oe)=>bi(Ee,oe)).on(l.addWorkspace,function(Ee){let{id:oe,meta:ye}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!oe||!ye)throw new Error("'id' and 'meta' are both required when adding a workspace");if(Ee.allWorkspaces.includes(oe))return(0,s.Wo)({label:yi}).warn(`Cannot add workspace; it is already present: ${oe}`),Ee;const{allWorkspaces:Se,workspacesMeta:qe}=Ee;return{...Ee,allWorkspaces:[...Se,oe],workspacesMeta:{...qe,[oe]:ye}}}).on(l.updateWorkspaceMeta,function(Ee){let{id:oe,meta:ye}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{workspacesMeta:Se}=Ee;if(!Se[oe])throw new Error(`Cannot update workspace meta for ${oe}; no such team`);return{...Ee,workspacesMeta:{...Se,[oe]:ye}}}).on(l.internalSetFocusedWorkspaceType,(Ee,oe)=>({...Ee,focusedWorkspace:oe,recentlyFocusedWorkspaces:ki(Ee.recentlyFocusedWorkspaces,oe)})).on(l.internalRemoveWorkspaceType,(Ee,oe)=>({...Ee,allWorkspaces:(0,pi.A)(Ee.allWorkspaces,oe)})).on(l.addRemovedWorkspace,(Ee,oe)=>Bi(Ee,oe));function Mi(Ee){let{focusedWorkspace:oe,allWorkspaces:ye,workspacesMeta:Se}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Ee.allWorkspaces)throw new Error("workspaces-store:initialize cannot be called more than once");if(!oe)throw new Error("workspaces-store:initialize must be given a focusedWorkspace");if(!ye)throw new Error("workspaces-store:initialize must be given an array of workspaces");if(ye.indexOf(oe)<0)throw new Error(`workspaces-store:initialize ${oe} is not one of the valid workspaces: ${ye}`);return{...Ee,focusedWorkspace:oe,allWorkspaces:ye,workspacesMeta:Se,recentlyFocusedWorkspaces:[oe]}}u(Mi,"initializeWorkspacesState");function Ci(Ee,oe){const ye=Ee.allWorkspaces;if((0,gi.A)(ye,oe).length!==ye.length)throw new Error("workspaces-store:setWorkspaceOrder can only re-order items in the array; additions or removals are not allowed");return(0,Z.q9)("orderedTeamIds",oe),{...Ee,allWorkspaces:oe}}u(Ci,"updateWorkspaceOrder");function Oi(Ee,oe){const ye=Ee.bootedWorkspaces.includes(oe)?Ee.bootedWorkspaces:[...Ee.bootedWorkspaces,oe];return{...Ee,bootedWorkspaces:ye}}u(Oi,"updateWorkspaceBooted");function Di(Ee,oe){if(!oe)return Ee;const ye=Ee.failedToBootWorkspaces.includes(oe)?Ee.failedToBootWorkspaces:[...Ee.failedToBootWorkspaces,oe];return{...Ee,failedToBootWorkspaces:ye}}u(Di,"updateWorkspaceFailedToBoot");function Si(Ee,oe){if(!oe)return Ee;const ye=Ee.needs2FASetup.includes(oe)?Ee.needs2FASetup:[...Ee.needs2FASetup,oe];return{...Ee,needs2FASetup:ye}}u(Si,"updateWorkspaceNeeds2FASetup");function Pi(Ee,oe){if(!oe)return Ee;const ye=Ee.needsToAcceptCustomTOS.find(Se=>{let{teamId:qe}=Se;return oe.teamId===qe})?Ee.needsToAcceptCustomTOS:[...Ee.needsToAcceptCustomTOS,oe];return{...Ee,needsToAcceptCustomTOS:ye}}u(Pi,"updateWorkspaceNeedsToAcceptCustomTOS");function Ri(Ee,oe){let{teamId:ye,migrationId:Se,canViewMigrationStatus:qe}=oe;if(!ye)return Ee;const{migratingWorkspaces:$e}=Ee;return{...Ee,migratingWorkspaces:{...$e,[ye]:{migrationId:Se,canViewMigrationStatus:qe}}}}u(Ri,"updateWorkspaceIsMigrating");function Li(Ee,oe){if(!oe)return Ee;const ye=Ee.completedMigrationWorkspaces.includes(oe)?Ee.completedMigrationWorkspaces:[...Ee.completedMigrationWorkspaces,oe];return{...Ee,completedMigrationWorkspaces:ye}}u(Li,"updateWorkspaceMigrationIsComplete");function Ui(Ee,oe){if(!oe)return Ee;const ye=Ee.accessLimitedWorkspaces.includes(oe)?Ee.accessLimitedWorkspaces:[...Ee.accessLimitedWorkspaces,oe];return{...Ee,accessLimitedWorkspaces:ye}}u(Ui,"updateWorkspaceIsAccessLimited");function bi(Ee,oe){if(!oe)return Ee;const ye=Ee.userNotMemberOfAnyWorkspaceInOrg.includes(oe)?Ee.userNotMemberOfAnyWorkspaceInOrg:[...Ee.userNotMemberOfAnyWorkspaceInOrg,oe];return{...Ee,userNotMemberOfAnyWorkspaceInOrg:ye}}u(bi,"updateUserNotMemberOfAnyWorkspaceInOrg");function ki(Ee,oe){const ye=[oe,...Ee.filter(Se=>Se!==oe)];return ye.length>Ba?(0,Ai.A)(ye,Ba):ye}u(ki,"updateRecentlyFocusedWorkspaces");function Bi(Ee,oe){if(!oe)return Ee;const ye=Ee.removedWorkspaces.includes(oe)?Ee.removedWorkspaces:[...Ee.removedWorkspaces,oe];return{...Ee,removedWorkspaces:ye}}u(Bi,"updateRemovedWorkspaces");var Ni=e(8749931423),Wi=e(7206394193),xi=e(773865333),Fi=e(7156104699),Ki=e(8333842125),Hi=e(582577127),wi=e(2732935554),Vi=e(3034787354),ji=e(4614661813),Gi=e(2140362605);const Fo=(0,Gi.Ay)("sets the client side effect map on the store");Fo.meta={name:"createAction",key:"createActionsetClientSideEffectsMap",description:"sets the client side effect map on the store"};const zi={clientSideEffectsMap:{}},Yi=(0,Hs.Ay)({},zi,{storeKey:"clientSideEffects",persistenceEnabled:!1}).on(Fo,(Ee,oe)=>({...Ee,clientSideEffectsMap:oe}));var Qi=e(5923036663),$i=e(6168781067),Ji=e(7902571278),Xi=e(56562029);const Zi={isHuddlesEnabled:!1,channelToJoinCredentials:{},showDiscoveryBanner:!1,screenshareActivePanel:0,songPlaying:void 0,jukeboxLocalVolume:1,canRenderActiveInviteCardInSidebar:!0,isHuddleWindowFocused:!1,isHuddleWindowOpen:!1,isHuddleMiniPlayerHidden:!1,isAudioOnlyModeEnabled:!1,wasCameraEnabledWhenAudioOnlyModeWasActivated:!1,wasJoinedFromPrejoin:!1,unreadInvites:[]},qi=(0,Hs.Ay)({},Zi,{storeKey:"clientHuddles",persistenceEnabled:!1}).on($t.VU,(Ee,oe)=>Ee.isHuddlesEnabled?Ee:{...Ee,isHuddlesEnabled:oe}).on($t.xf,(Ee,oe)=>({...Ee,mostRecentHuddle:oe})).on($t.Rh,(Ee,oe)=>{const{mostRecentHuddle:ye}=Ee;if(!ye||oe.teamId&&oe.teamId!==ye.teamId||oe.channelId&&oe.channelId!==ye.channelId)return Ee;const Se={...Ee,mostRecentHuddle:{...ye,...oe}},qe=Se.mostRecentHuddle;return qe&&(0,s.Wo)().info(es.o7,`updateActiveHuddleReference huddleState ${qe.huddleState}, substate ${qe.huddleSubState}, optimisticState ${qe.optimisticHuddleState}`),Se}).on($t.Jc,(Ee,oe)=>{const{mostRecentHuddle:ye}=Ee;return!ye||oe===ye.channelId?Ee:{...Ee,mostRecentHuddle:{...ye,channelId:oe}}}).on($t.hB,(Ee,oe)=>({...Ee,activeInvite:oe,unreadInvites:[...Ee.unreadInvites,{invite:oe,receivedTimestampMs:Date.now()}]})).on($t.fP,(Ee,oe)=>{let{teamId:ye,markBeforeMs:Se}=oe;const qe=Ee.unreadInvites.filter($e=>$e.invite.teamId!==ye||$e.receivedTimestampMs>Se);return Ee.unreadInvites.length===qe.length?Ee:{...Ee,unreadInvites:qe}}).on($t.u8,(Ee,oe)=>{var ye;return{...Ee,unreadInvites:Ee.unreadInvites.filter(Se=>Se.invite.channelId!==oe),activeInvite:((ye=Ee.activeInvite)===null||ye===void 0?void 0:ye.channelId)!==oe?Ee.activeInvite:void 0}}).on($t.Ko,(Ee,oe)=>Ee.forceMiniPanelVisible===oe?Ee:{...Ee,forceMiniPanelVisible:oe}).on($t.Yi,(Ee,oe)=>{let{channelId:ye,joinCredentials:Se,expiry:qe,fromInvite:$e}=oe;var Ct;if(!ye||!Se)return Ee;const Ze=Ee.channelToJoinCredentials;Ze[ye]={credentials:Se,expiry:qe,fromInvite:$e};const Jt=(Ct=Ee.activeInvite)===null||Ct===void 0?void 0:Ct.teamId;return Jt&&(0,Js.Cy)({state:(0,i.getStateByTeamId)(Jt)}).count(Ts.ir),{...Ee,channelToJoinCredentials:Ze}}).on($t.WB,(Ee,oe)=>{let{channelId:ye}=oe;if(!ye)return Ee;if(Ee.channelToJoinCredentials[ye]){var Se;const qe=(Se=Ee.activeInvite)===null||Se===void 0?void 0:Se.teamId;qe&&(0,Js.Cy)({state:(0,i.getStateByTeamId)(qe)}).count(Ts.sQ)}return{...Ee,channelToJoinCredentials:(0,Ra.A)(Ee.channelToJoinCredentials,[ye])}}).on($t.aO,(Ee,oe)=>Ee.showDiscoveryBanner===oe?Ee:{...Ee,showDiscoveryBanner:oe}).on($t.Ag,(Ee,oe)=>Ee.isLoungeMusicPlaying===oe?Ee:{...Ee,isLoungeMusicPlaying:!!oe}).on($t._U,(Ee,oe)=>Ee.lastStartTs===oe?Ee:{...Ee,lastStartTs:oe}).on($t.bV,(Ee,oe)=>Ee.lastEndTs===oe?Ee:{...Ee,lastEndTs:oe}).on($t.qr,(Ee,oe)=>Ee.lastDurationTs===oe?Ee:{...Ee,lastDurationTs:oe}).on($t.Gx,(Ee,oe)=>Ee.screenshareActivePanel===oe?Ee:{...Ee,screenshareActivePanel:oe}).on($t.cx,Ee=>({...Ee,screenshareActivePanel:0,songPlaying:void 0,isHuddleWindowFocused:!1,isHuddleWindowOpen:!1,isHuddleMiniPlayerHidden:!1,isAudioOnlyModeEnabled:!1,wasCameraEnabledWhenAudioOnlyModeWasActivated:!1,wasJoinedFromPrejoin:!1})).on($t._u,(Ee,oe)=>{let{song:ye}=oe;return Ee.songPlaying===(ye==null?void 0:ye.key)?Ee:{...Ee,songPlaying:ye==null?void 0:ye.key}}).on($t.nw,(Ee,oe)=>Ee.canRenderActiveInviteCardInSidebar===oe?Ee:{...Ee,canRenderActiveInviteCardInSidebar:oe}).on($t.o9,(Ee,oe)=>Ee.isHuddleWindowFocused===oe?Ee:{...Ee,isHuddleWindowFocused:oe}).on($t.TK,(Ee,oe)=>Ee.isHuddleWindowOpen===oe?Ee:{...Ee,isHuddleWindowOpen:oe}).on($t.kg,(Ee,oe)=>Ee.isAudioOnlyModeEnabled===oe?Ee:{...Ee,isAudioOnlyModeEnabled:oe}).on($t.Hg,(Ee,oe)=>Ee.wasCameraEnabledWhenAudioOnlyModeWasActivated===oe?Ee:{...Ee,wasCameraEnabledWhenAudioOnlyModeWasActivated:oe}).on($t.t2,(Ee,oe)=>Ee.isHuddleMiniPlayerHidden===oe?Ee:{...Ee,isHuddleMiniPlayerHidden:!!oe}).on($t.og,(Ee,oe)=>Ee.wasJoinedFromPrejoin===oe?Ee:{...Ee,wasJoinedFromPrejoin:!!oe}),Ol=100,Na="client-ia-history",el=[...Object.values(Qo.mH)||[]];var Ao=e(1521690892);const tl=u(()=>{try{const Ee=localStorage.getItem(Na);return Ee?JSON.parse(Ee):[]}catch(Ee){return(0,s.Wo)().error("Failed to read IA history from storage",Ee),[]}},"readStackFromStorage"),To=u(Ee=>{try{localStorage.setItem(Na,JSON.stringify(Ee))}catch(oe){(0,s.Wo)().error("Failed to write IA history to storage",oe)}},"writeStackToStorage"),nl=(0,Hs.Ay)({},{stack:tl()},{storeKey:"iaHistory",persistenceEnabled:!1}).on(Ao.nb,(Ee,oe)=>{if(!oe||el.includes(oe==null?void 0:oe.primaryView))return Ee;const ye=1e3,Se=[oe].concat(Ee.stack).slice(0,ye);return window.setTimeout(()=>To(Se),0),{stack:Se}}).on(Ao.JG,(Ee,oe)=>{const ye=Ee.stack.indexOf(oe);if(ye===-1)return Ee;const Se=Ee.stack.slice();return Se.splice(ye,1),window.setTimeout(()=>To(Se),0),{stack:Se}}).on(Ao.Si,Ee=>{if(!Ee.stack)return Ee;const oe=Ee.stack.slice(0,1);return window.setTimeout(()=>To(oe),0),{stack:oe}}).on(Ao.kM,()=>{const Ee=[];return To(Ee),{stack:Ee}}),sl=!0,Wa=(0,Hs.Ay)({},sl,{storeKey:"isClient",persistenceEnabled:!1});Wa.meta={name:"createReducer",key:"createReducerisClientReducer"};const ol=Wa;var al=e(8572697916);const rl={navigateListenersRunOnClientMount:0},il=(0,Hs.Ay)({},rl,{storeKey:"navigate",persistenceEnabled:!1}).on(al.C,Ee=>({...Ee,navigateListenersRunOnClientMount:Ee.navigateListenersRunOnClientMount+1}));let xa;try{var Ko;xa=(Ko=(0,Z.W6)(Ue.Vb))!==null&&Ko!==void 0?Ko:void 0}catch{}let Fa;try{var Ho;Fa=(Ho=(0,Z.W6)(Ue._J))!==null&&Ho!==void 0?Ho:void 0}catch{}let Ka;try{var wo;Ka=(wo=(0,Z.W6)(Ue.UY))!==null&&wo!==void 0?wo:void 0}catch{}const ll={invertedSidebar:xa,peeksEnabledOnMouseEnter:Fa,zoom:Ka},cl=(0,Hs.Ay)({},ll,{storeKey:"nonBBMSettings",persistenceEnabled:!1}).on(ie.p$,(Ee,oe)=>({...Ee,invertedSidebar:oe})).on(ie.rB,(Ee,oe)=>({...Ee,peeksEnabledOnMouseEnter:oe})).on(ie.x8,(Ee,oe)=>({...Ee,zoom:oe}));var dl=e(1838435986),ul=e(3180420025),yo=e(1302213854);const _l={shouldLogAppBootMetrics:!0,shouldLogTeamSwitchMetrics:!1,shouldLogTTVMetrics:!0,shouldLogTTUMetrics:!0},ml=(0,Hs.Ay)({},_l,{storeKey:"telemetry",persistenceEnabled:!0}).on(yo.C7,(Ee,oe)=>({...Ee,shouldLogAppBootMetrics:oe})).on(yo.Mb,(Ee,oe)=>({...Ee,shouldLogTeamSwitchMetrics:oe})).on(yo.Ln,(Ee,oe)=>({...Ee,shouldLogTTVMetrics:oe})).on(yo.UM,(Ee,oe)=>({...Ee,shouldLogTTUMetrics:oe}));var Vo=e(2696160384);const Ha={isDocked:!1,miniPlayerConfig:{fileId:""}},hl=(0,Hs.Ay)({},Ha,{storeKey:"videoClips",persistenceEnabled:!1}).on(Vo.FI,(Ee,oe)=>({...Ee,isDocked:oe})).on(Vo.D_,(Ee,oe)=>{let{fileId:ye,teamId:Se,mediaId:qe,channelId:$e,threadTs:Ct,timeElapsed:Ze,isPlaying:Jt}=oe;return{...Ee,miniPlayerConfig:{fileId:ye,teamId:Se,mediaId:qe,channelId:$e,threadTs:Ct,timeElapsed:Ze,isPlaying:Jt}}}).on(Vo.Sr,Ee=>({...Ee,...Ha}));var El=e(9813790040),vl=e(4256476552),fl=e(894072650);function wa(){let{extraMiddlewares:Ee=[],customEnhancers:oe=[]}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const ye=(0,Ki.A)({teamOrEnterpriseId:"client",middlewares:[...Ee,Wi.A,n.P,xi.A,Fn,St,ti,di,ci,ps,Is,Vt,En,It,Fi.N,ei],customEnhancers:oe}),Se=(0,Ni.A)({workspaces:Ii,window:vl.A,telemetry:ml,connectivity:$i.A,accessibility:Vi.A,accessibilityPersistent:wi.A,desktop:Ji.A,clientTheme:Qi.A,iaHistory:nl,mainWindowHistory:An,isClient:ol,workspaceLayout:fl.A,viewLayout:El.A,noop:dl.A,navigate:il,clientHuddles:qi,clientSideEffects:Yi,recents:Ss,overlays:ul.y,tabSoda:fi,fullscreen:Xi.G,bbm:ji.Y,videoClips:hl,nonBBMSettings:cl});return(0,t.Yl)(Se,ye)}u(wa,"createClientStore");function pl(){const Ee=(0,i.getClientStoreInstance)();if(Ee)return(0,s.Wo)().warn("[CLIENT-STORE]","we\u2019ve called configureClientStore before and already have an instance. This is likely a programming error."),Ee;const oe=wa();(0,i.setClientStoreInstance)(oe);const{clientSideEffectsMap:ye,sideEffectsMap:Se}=(0,Hi.g)(Dn);if(Object.keys(Se).length)throw new Error("Passed non-client side effects into client store. This is a programming error and the app will not work properly.");return oe.dispatch(Fo(ye)),oe}u(pl,"configureClientStore");const Ll={createClientStore:wa}},3803432550:(z,A,e)=>{"use strict";e.d(A,{x:()=>_});var t=e(8148939499),n=e(6508028729),s=e(4423055085),a=e(4496040127),c=e(2051872845),o=e(1535672935),r=e(9012396182),l=e(6533394955);function _(i){if(!i||(0,l.getClientStoreInstance)())return;const m=(0,c.A)(),h=(0,a.VA)()?(0,t.A)():[i],v=(0,n.A)();m.dispatch((0,o.initialize)({focusedWorkspace:i,allWorkspaces:h,workspacesMeta:v})),d(m)}u(_,"initializeClientStore");function d(i){(0,s.ul)("clientStore",i),(0,s.zv)("teamIds",()=>{const h=i.getState();return r.getAllWorkspaces(h)}),(0,s.zv)("activeTeam",()=>{const h=i.getState(),v=r.getFocusedWorkspace(h);return window.slackDebug[v]}),(0,s.zv)("activeTeamId",()=>{const h=i.getState();return r.getFocusedWorkspace(h)}),(0,s.zv)("activeEnterprise",()=>{var h,v;const y=i.getState(),T=(h=r.getWorkspacesMeta(y))===null||h===void 0||(v=h[r.getFocusedWorkspace(y)])===null||v===void 0?void 0:v.enterprise_id;return window.slackDebug[T]});const m={};Object.keys(o).forEach(h=>{m[h]=function(){for(var v=arguments.length,y=new Array(v),T=0;T<v;T++)y[T]=arguments[T];return i.dispatch(o[h](...y))}}),Object.keys(r).forEach(h=>{m[h]=function(){for(var v=arguments.length,y=new Array(v),T=0;T<v;T++)y[T]=arguments[T];return r[h](i.getState(),...y)}}),(0,s.ul)("clientStore.workspaces",m)}u(d,"setupClientStoreDebugger")},2870224675:(z,A,e)=>{"use strict";e.d(A,{Uz:()=>o,ez:()=>s,nz:()=>n,oT:()=>c,yw:()=>a});var t=e(2140362605);const n=(0,t.Ay)("Adds a new emtpy tab-soda tab");n.meta={name:"createAction",key:"createActiontabSodaAddNewTab",description:"Adds a new emtpy tab-soda tab"};const s=(0,t.Ay)("Removes the recent history entry from a tab soda tab");s.meta={name:"createAction",key:"createActiontabSodaPopHistoryForTab",description:"Removes the recent history entry from a tab soda tab"};const a=(0,t.Ay)("Select a tab by id");a.meta={name:"createAction",key:"createActiontabSodaSelectTab",description:"Select a tab by id"};const c=(0,t.Ay)("Remove a tab soda tab");c.meta={name:"createAction",key:"createActiontabSodaRemoveTab",description:"Remove a tab soda tab"};const o=(0,t.Ay)("Re-order tab soda tabs");o.meta={name:"createAction",key:"createActiontabSodaReorderTabs",description:"Re-order tab soda tabs"}},9932860381:(z,A,e)=>{"use strict";e.d(A,{Fp:()=>o,Xy:()=>c,fe:()=>a});var t=e(6471801899),n=e(8040098042),s=e(2960290117);function a(r,l){const _=l.indexOf(r),d=_<l.length-1?_+1:_-1;return d>=0?l[d]:void 0}u(a,"tabSodaGetNextActiveTab");function c(r){return(0,n.A)(r)||r==="thread"}u(c,"canOpenInTabSodaTab");function o(r){return(0,s.Ay)(r)||(0,t.pI)(r)||(0,t.or)(r)||(0,n.A)(r)||r==="thread"||r==="comment_thread"}u(o,"tabSodaCanViewBeEjected")},7176966205:(z,A,e)=>{"use strict";e.d(A,{$:()=>h});var t=e(5267010247),n=e(8822892075),s=e(395285811),a=e(2188787324),c=e(3634593162),o=e(3110884894),r=e(5333401344),l=e(8040098042),_=e(2870224675),d=e(1031947056),i=e(6533394955),m=e(937317117);const h=(0,d.Ay)("Opens a view in a new tab",function(v,y){let{viewId:T,params:I}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const p=y(),g=(0,_.nz)({setAsActive:!0});if(!T)return(0,i.dispatchForClientStore)(g);if(T&&(0,l.A)(T))return(0,i.dispatchForClientStore)(g),v((0,t.o)((0,n.pr)(T)));if(T==="thread"&&(I!=null&&I.threadId)){const{channelId:E,threadTs:f}=(0,o.Sb)(I==null?void 0:I.threadId);if(E&&f){if((0,i.dispatchForClientStore)(g),(0,s.OR)(p,E)){const P=(0,c.l)(E),k=(0,m.Lp)(p,P);if(k&&(0,r.uz)(k)&&(0,a.DQ)(k))return v((0,t.o)((0,n.m3)({channelId:E,threadTs:f})))}const{replyTs:C,highlightRoot:M,dangerouslyOverrideRouting:D}=I;return v((0,t.o)((0,n.UX)({channelId:E,threadTs:f,replyTs:C,highlightRoot:M,dangerouslyOverrideRouting:D})))}}});h.meta={name:"createThunk",key:"createThunkmaybeOpenInTabSodaTab",description:"Opens a view in a new tab"}},4326266690:(z,A,e)=>{"use strict";e.d(A,{B:()=>c,fK:()=>a,lw:()=>r,ud:()=>o});var t=e(9932860381),n=e(2384831516),s=e(3193155968);const a=(0,n.Mz)(l=>l.tabSoda);a.meta={name:"createSelector",key:"createSelectorgetTabSoda",description:l=>l.tabSoda};const c=(0,n.Mz)(l=>{const _=a(l);return _.activeTab?_.tabs[_.activeTab]:[]});c.meta={name:"createSelector",key:"createSelectortabSodaGetRecentsForActiveTab",description:l=>{const _=a(l);return _.activeTab?_.tabs[_.activeTab]:[]}};const o=(0,n.Mz)(l=>{const _=a(l);return _.activeTab?_.tabs[_.activeTab].length<2:!1});o.meta={name:"createSelector",key:"createSelectortabSodaIsBackDisabledForActiveTab",description:l=>{const _=a(l);return _.activeTab?_.tabs[_.activeTab].length<2:!1}};const r=(0,n.Mz)((l,_)=>{var d,i,m;const v=(d=a(l).tabs[_])===null||d===void 0?void 0:d[0],y=v==null?void 0:v.teamId;if(!v||!y)return!1;const T=v==null?void 0:v[s.jf],I=v==null||(i=v[T])===null||i===void 0||(m=i[s.mq.Primary])===null||m===void 0?void 0:m.id;return!!I&&(0,t.Fp)(I)});r.meta={name:"createSelector",key:"createSelectortabSodaCanEjectTab",description:(l,_)=>{var d,i,m;const v=(d=a(l).tabs[_])===null||d===void 0?void 0:d[0],y=v==null?void 0:v.teamId;if(!v||!y)return!1;const T=v==null?void 0:v[s.jf],I=v==null||(i=v[T])===null||i===void 0||(m=i[s.mq.Primary])===null||m===void 0?void 0:m.id;return!!I&&(0,t.Fp)(I)}}},8620339321:(z,A,e)=>{"use strict";e.d(A,{UN:()=>m,oX:()=>v,wm:()=>h});var t=e(7213691587),n=e(109860581),s=e(2870224675),a=e(9932860381),c=e(1031947056),o=e(6533394955),r=e(9108490430),l=e(3193155968),_=e(9012396182),d=e(2554594353);const i=(0,c.Ay)("Update currently visible viewset as part of TabSoda tab switching",(y,T,I)=>{(0,o.dispatchForTeamId)(I.teamId,(0,r.cQ)(I)),_.getFocusedWorkspace&&d.b&&(0,_.getFocusedWorkspace)(T())!==I.teamId&&y((0,d.b)({teamId:I.teamId,fromNavigation:!0}));const{tabSoda:p}=T(),g=p.activeTab;if(g){const E=p.tabs[g][0],f=E[l.jf],O=E[f],C=I[l.jf],M=I[C];if(!M)return;(0,o.dispatchForTeamId)(I.teamId,(0,t.C)({prevViewSet:O,prevTab:f,nextViewSet:M,nextTab:C,windowId:l.N2,navigateParams:{},triggerType:n.w.HISTORY_NAVIGATION}))}});i.meta={name:"createThunk",key:"createThunkupdateVisibleView",description:"Update currently visible viewset as part of TabSoda tab switching"};const m=(0,c.Ay)("Switch current TabSoda tab",(y,T,I)=>{let{tabId:p}=I;const{tabSoda:g}=T();if(g.activeTab===p)return;const E=g.tabs[p][0];y(i(E)),y((0,s.yw)(p))});m.meta={name:"createThunk",key:"createThunktabSodaSwitchTab",description:"Switch current TabSoda tab"};const h=(0,c.Ay)("Close active TabSoda tab and switch to the nearest open tab",(y,T,I)=>{let{tabId:p}=I;const{tabSoda:g}=T(),E=g.activeTab,f=(0,a.fe)(E,g.tabOrder);if(p===E&&f){const O=g.tabs[f][0];y(i(O))}y((0,s.oT)(p))});h.meta={name:"createThunk",key:"createThunktabSodaCloseTab",description:"Close active TabSoda tab and switch to the nearest open tab"};const v=(0,c.Ay)("Go back in history in a currently active TabSoda tab",(y,T)=>{const{tabSoda:I}=T(),p=I.activeTab;if(I.tabs[p].length<2)return;const g=I.tabs[p][1];y(i(g)),y((0,s.ez)(p))});v.meta={name:"createThunk",key:"createThunktabSodaGoBackInActiveTab",description:"Go back in history in a currently active TabSoda tab"}},4766735965:(z,A,e)=>{"use strict";e.d(A,{A:()=>I});var t=e(8737667238),n=e(9121100949),s=e(2527782504),a=e(2495064448),c=e(5751973043),o=e(735940183),r=e(4496040127),l=e(9012396182),_=e(1031947056),d=e(6533394955),i=e(8439865561),m=e(1201539379),h=e(6290537170),v=e(9733150292);const y=new o.Ay("team_picker"),T=(0,_.Ay)("Sets whether or not the protype full rail workspace switcher is showing",function(p,g){let{shouldTransitionFocus:E=!1,shouldAnnounceStateChange:f=!1}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},O=arguments.length>3?arguments[3]:void 0;const C=g();if(!(0,r.VA)())return;const M=(0,d.getClientStoreInstance)().getState();var D;if(((D=(0,l.getAllWorkspaces)(M))!==null&&D!==void 0?D:c.Ml).length<=1)return;const k=(0,h.v8)(C),x=!k;(0,v.q9)(n.WU,x),p((0,m.mV)(x)),(0,d.dispatchForClientStore)((0,m.mV)(x));const F=y.t("Workspaces tablist expanded"),W=y.t("Workspaces tablist collapsed");if(f&&p((0,i.rl)({message:k?W:F,uuid:(0,t.A)()})),!E)return;const{transitionFocusTo:Y}=(0,a.$P)(g(),O),S=k?s.Ay.WORKSPACE_SWITCHER_MENU_BUTTON:s.Ay.WORKSPACE_SWITCHER_TAB_LIST;Y({focusKey:S})});T.meta={name:"createThunk",key:"createThunktoggleWorkspaceSwitcherVisibility",description:"Sets whether or not the protype full rail workspace switcher is showing"};const I=T},9143148823:(z,A,e)=>{"use strict";e.d(A,{Ay:()=>a,c:()=>s});var t=e(6422693406);let n=null;function s(){return n}u(s,"getLastTeamSwitchTimestamp");const a=u(o=>{let{prevTeamId:r,nextTeamId:l,navigationTimestamp:_}=o;return r===l||!_||(n=_),t.S.resolve()},"__WEBPACK_DEFAULT_EXPORT__");Object.defineProperty({lastTeamSwitchTimestamp:null},"lastTeamSwitchTimestamp",{get:()=>n,set:o=>{n=o}})},859310680:(z,A,e)=>{"use strict";e.d(A,{go:()=>ve,xy:()=>G});var t=e(8426925643),n=e(9733150292),s=e(4588514760),a=e(4423055085),c=e(9421999304),o=e(9681594967),r=e(2325478352),l=e(3530725200),_=e(7770551414),d=e(6470070112),i=e(6774225263),m=e(796111729),h=e(2250002584),v=e(6695353875),y=e(2568070692),T=e(264208541),I=e(9012396182),p=e(8847766420),g=e(5583430912),E=e(6533394955),f=e(9101533895),O=e(7765212398),C=e(4761125736),M=e(8276911661),D=e(7115106069),P=e(8233775522);function k(){var Q,Ae;return{hardware_concurrency:(Q=window.navigator)===null||Q===void 0?void 0:Q.hardwareConcurrency,device_memory:(Ae=window.navigator)===null||Ae===void 0?void 0:Ae.deviceMemory}}u(k,"getDeviceStats");function x(){const Q=localStorage==null?void 0:localStorage.getItem("client_metrics_client_redux_size"),Ae=(0,T.Hn)(),ae=(0,T.Ey)(),he=Ae&&ae?(Ae/ae).toPrecision(4):null;return{total_client_redux_size:Q,js_heap_used:Ae,js_heap_total:ae,js_heap_used_percentage:he}}u(x,"getPerfMemoryStats");function F(){const Q=localStorage==null?void 0:localStorage.getItem("client_metrics_app_stats");if(!Q)return{};try{return JSON.parse(Q)}catch(Ae){return(0,m.Wo)().warn("Error parsing appStats in localStorage:",Q,Ae),{}}}u(F,"getDesktopAppStats");function W(){return{...(0,t.JP)(),num_started_sockets:(0,_.eK)(),frontend_build_type:(0,i.JS)(),object_store_redux_group:(0,l.B9)(r.Wv)}}u(W,"getClientStateTags");function Y(Q,Ae){const ae=Ae.startSpan("add_tags:channels_info",{tags:{_auto_analytics:""}}),he=Object.values((0,f.DM)(Q)).length,_e=Object.values((0,f.h3)(Q)).length,ee=Object.values((0,f._B)(Q)).length,de=Object.values((0,f.FS)(Q)).length;return ae.close(),{num_channels_in_redux:he,num_all_channels_user_is_in:_e,num_dms_user_is_in:ee,num_group_dms_user_is_in:de}}u(Y,"getChannelInfoTags");function S(Q,Ae){const ae=Ae.startSpan("add_tags:drafts_info",{tags:{_auto_analytics:""}}),he=Object.keys((0,O.Hw)(Q)||{}).length,_e=(0,y.sZ)((0,O.my)(Q));return ae.close(),{num_drafts:he,drafts_store_size:_e}}u(S,"getDraftsInfoTags");function L(Q){return{user_locale:(0,c.JK)({teamOrEnterpriseId:(0,p.JY)(Q)})}}u(L,"getLocaleTags");function w(Q){return{active_collab_instance_count:(0,g.Ui)(),open_quip_embed_instance_count:(0,D.oj)(Q).length,canvas_child_window_count:(0,s.CJ)()}}u(w,"getCanvasTags");const J=u(Q=>{const Ae=["spaceship_beyond_iframes","selector_memo","cfm_by_store"],ae={};return Ae.forEach(_e=>{const ee=(0,C._Z)(Q,_e,!1);ee&&(ae[_e]=ee)}),["redux_slice_tracker"].forEach(_e=>{const ee=(0,l.B9)(_e);ee!==l.dw.NoGroup&&(ae[_e]=ee)}),ae.ia4=(0,v.cc)(Q)?"on":"off",ae},"getExperimentTagsForTraces"),G=u((Q,Ae)=>{const ae=Ae??["desktop_flannel_emoji"],he={},_e=(0,C.Vs)(Q),ee=Date.now()/1e3,de=60*60*24*7*4;for(const[Ie,ce]of Object.entries(_e)){const{trigger:j,schedule_ts:N}=ce;(ae.includes(Ie)||j&&N&&j!=="finished"&&j!=="force_debug"&&N>ee-de)&&(he[Ie]=ce.group)}return he},"getExperimentTags");function X(Q){return{num_members_in_redux:(0,M.I_)(Q).length}}u(X,"getMembersTags");function te(Q){const Ae=(0,n.W6)("lastColdBootTs"),ae=(0,P.pp)(Q);return{last_cold_boot_ts:Ae,boot_type:ae}}u(te,"getConfigTags");function le(){return{is_in_active_huddle:(0,d.NZ)()}}u(le,"getHuddleTags");function ve(Q){const Ae=(0,E.getStateForClientStore)();if(!Ae)return{};const ae=Q??(0,I.getFocusedWorkspace)(Ae),he=(0,E.getStateByTeamId)(ae),_e=(0,h.F)(),ee=_e.createTrace({traceName:"add_tags:performance_tracing_tags"}),de=(0,t.Kh)(ae),Ie=W(),ce=Y(he,ee),j=S(he,ee),N=k(),b=x(),R=F(),K=L(he),B=X(he),$=te(he),Z=o.qV.getTraceTags(),re=J(he),Te=w(he),Ce=le(),Pe={...de,...Ie,...ce,...j,...N,...b,...R,...K,...B,...$,...Z,...re,...Te,...Ce};return _e.reportTrace(ee),Pe}u(ve,"getPerformanceTracingTags"),(0,a.zv)("performanceTracingTags",ve)},2542612541:(z,A,e)=>{"use strict";e.d(A,{A:()=>Mn});var t=e(3134334389),n=e(6422693406),s=e(9733150292),a=e(4979734995),c=e(348699080),o=e(581167618),r=e(2301861866),l=e.n(r),_=e(5255740490),d=e(6764196364),i=e(735940183),m=e(8739505998),h=e(6176558010),v=e(2527471159),y=e.n(v),T=e(7972463975),I=e.n(T),p=e(9994038664),g=e.n(p),E=e(8214116048);const f=new i.Ay("refreshed_header"),O={elementName:"header_slack_logo",onClick:{enableClogAction:!0}},C={elementName:"header_signin",onClick:{enableClogAction:!0}},M={elementName:"header_create_account",onClick:{enableClogAction:!0}},D={elementName:"header_create_workspace",onClick:{enableClogAction:!0}},P=y()&&I()?`${y()}, ${I()} 2x`:void 0,x=u(ct=>{let{showSignInLink:yt=!1,showCreateAccountLink:Rt=!1,showCreateWorkspaceLink:xe=!1,showHorchataBackground:Nt=!1,confirmedEmailPill:Ft,hideLogo:qt=!1,isSSBBrowserSignin:un=!1,showSfLogo:tt=!1,isWarningBannerDisplayed:pt=!1,govSlackTheme:Dt=!1,isLandingPage:Wt=!1,clientTheme:zt,joinerRedesignTreatment:ln=!1}=ct;return t.createElement("header",{className:(0,_.A)("p-refreshed_page__header",{"p-refreshed_page__header--should_wrap":!!Ft,"p-refreshed_page__header--is_horchata_landing_bg":Nt,"p-refreshed_page__header--no_logo":!!qt,"p-refreshed_page__header--sf_slack_logo":tt,"p-refreshed_page__header--display_warning_banner":pt,"p-refreshed_page__header--gov_slack":Dt,"p-refreshed_page__header--landing":Wt,"p-refreshed_page__full_background":ln})},t.createElement("div",{className:"left-col"}),t.createElement("div",{className:"center-col"},tt&&qt&&t.createElement("img",{srcSet:P??void 0,src:y(),alt:""}),!qt&&t.createElement(m.A,{href:(0,d.A)(),autoClogProps:O,target:"_self"},t.createElement("img",{alt:"Slack",src:Dt||zt===E.Sx.Dark?g():l(),height:"26",title:"Slack"})),Ft),t.createElement("div",{className:"right-col"},yt&&t.createElement("div",{className:"p-refreshed_page__header_sidelink"},f.t("Already have an account?"),t.createElement("br",null),t.createElement(m.A,{href:"/signin",className:"bold",autoClogProps:C,target:"_self"},f.t("Sign in instead"))),Rt&&t.createElement("div",{className:"p-refreshed_page__header_sidelink"},f.t("Don\u2019t have an account yet?"),t.createElement("br",null),t.createElement(m.A,{href:`/signup${window.location.search}`,className:"bold",autoClogProps:M,target:"_self"},f.t("Create an account"))),xe&&t.createElement("div",{className:"p-refreshed_page__header_sidelink"},f.t("New to Slack?",{fallbackHash:"2f63cb0ff8e7e3d18574aa36be246a7723cef6fc"}),t.createElement("br",null),t.createElement(m.A,{href:`${un?"/ssb":""}/get-started${window.location.search}#${h.EU.CreateNew}`,className:"bold",autoClogProps:D,target:"_self"},f.t("Create an account")))))},"RefreshedHeader");var F=e(2180140255),W=e(8178126019),Y=e(7216810781);const S=u(ct=>{let{inviteDetails:yt,children:Rt}=ct;return!yt||!(0,W.YB)(yt)?Rt:t.createElement("div",{className:"p-external_workspace_invite_branding_wrapper__container"},t.createElement(Y.z,{invite:yt,bottomMargin:!0}),t.createElement("div",{className:"p-external_workspace_invite_branding_wrapper__contents"},Rt))},"ExternalWorkspaceInviteBrandingWrapper");S.displayName="ExternalWorkspaceInviteBrandingWrapper";const L=S,w=u(ct=>{let{children:yt,showHorchataBackground:Rt,showSignInLink:xe,showCreateAccountLink:Nt,showCreateWorkspaceLink:Ft,hideRegionPicker:qt,clientTheme:un,hideFooter:tt=!1,confirmedEmailPill:pt,hideHeader:Dt=!1,isSSBBrowserSignin:Wt=!1,showSfLogo:zt=!1,isWarningBannerDisplayed:ln=!1,govSlackTheme:Tn=!1,isLandingPage:cn=!1,joinerRedesignTreatment:hn=!1,inviteDetails:Cn}=ct;return t.createElement(L,{inviteDetails:Cn},t.createElement(t.Fragment,null,!Dt&&t.createElement(x,{showSignInLink:xe,showCreateAccountLink:Nt,showCreateWorkspaceLink:Ft,showHorchataBackground:Rt,confirmedEmailPill:pt,isSSBBrowserSignin:Wt,showSfLogo:zt,hideLogo:zt,isWarningBannerDisplayed:ln,govSlackTheme:Tn,isLandingPage:cn,clientTheme:un,joinerRedesignTreatment:hn}),Tn?t.createElement("div",{className:"p-refreshed_page_layout__children--gov_slack"},yt):yt,!tt&&t.createElement(F.A,{hideRegionPicker:qt,govSlackTheme:Tn,joinerRedesignTreatment:hn})))},"RefreshedPageLayout");w.displayName="RefreshedPageLayout";const J=w;var G=e(2308565927),X=e(6084388622);const te=new i.Ay("sign_in");function le(ct){const{isSSB:yt,isSSBSignIn:Rt,hasPromoOffer:xe,shouldRedirect:Nt,redirectURL:Ft,loggedInTeams:qt,entryPoint:un=""}=ct;return t.createElement("div",{className:"align_center","data-qa":"signedin_workspaces"},!xe&&!yt&&t.createElement("p",{className:"small_bottom_margin"},te.t("You're already signed in to {loggedInTeams, plural, =1 {this workspace} other {these workspaces}}:",{loggedInTeams:qt})),t.createElement("p",{className:"col span_4_of_6 margin_auto float_none"},qt.map((tt,pt)=>t.createElement(X.z9,{key:tt.id,"data-qa":`signedin_workspace_link_${pt+1}`,className:"team-signin-link small_margin","data-team-id":tt.id,autoClogProps:{elementName:"team_domain",elementValue:tt.id.toString(),entryPoint:un,onClick:{enableClogAction:!0}},href:Rt?`${tt.url}ssb/signin_redirect`:`${tt.url}${Nt?`?redir=${Ft}`:""}`,"aria-label":te.t("Go to {teamName} on Slack",{teamName:tt.name}),type:"outline"},tt.name))))}u(le,"SignedInWorkspaces");var ve=e(6244014364),Q=e(4481313819),Ae=e(1610251172),ae=e(6968387112),he;(function(ct){ct.INVALID_CODE="invalid_pin",ct.RATE_LIMITED="ratelimited",ct.SMS_RATE_LIMITED="two_factor_sms_rate_limited",ct.TOO_MANY_ATTEMPTS="two_factor_too_many_attempts",ct.INTERNAL_ERROR="internal_error"})(he||(he={}));var _e;(function(ct){ct.SMS="sms",ct.APP="app",ct.EMAIL="email",ct.EMERGENCY="emergency"})(_e||(_e={}));var ee;(function(ct){ct.REQUEST_CODE="request_primary",ct.REQUEST_BACKUP="request_backup",ct.SUBMIT_PRIMARY="submit_primary",ct.SUBMIT_BACKUP="submit_backup",ct.SUBMIT_EMERGENCY="submit_emergency"})(ee||(ee={}));const de=new i.Ay("sign_in"),Ie={elementName:"help_button",onClick:{enableClogAction:!0}},ce=u(ct=>{const yt=ct.action===ee.REQUEST_BACKUP||ct.action===ee.SUBMIT_BACKUP;return yt&&ct.twoFactorBackupType===_e.APP||!yt&&ct.twoFactorType===_e.APP},"currentMethodIsApp"),j=u(ct=>ce(ct)?de.t("Problems with your authentication app?"):de.t("Problems with your code?"),"renderProblemsString"),N=u(ct=>ce(ct)?t.createElement("div",{className:"subtle_silver small medium_top_margin"},t.createElement("p",{className:"no_bottom_margin"},de.t("Check your authentication app for your code.")),t.createElement("p",null,de.rt("<a>Having trouble finding your code?</a>",null,yt=>{let{tag:Rt,text:xe}=yt;return Rt==="a"?t.createElement(m.A,{href:`https://${(0,ae.qF)()}/help/articles/204509068-Enabling-two-factor-authentication`,target:"_blank"},xe):null})),t.createElement("p",null,de.rt("If your app is unavailable, use a <a>backup code</a>.",null,yt=>{let{tag:Rt,text:xe}=yt;return Rt==="a"?t.createElement(m.A,{href:`https://${(0,ae.qF)()}/help/articles/204509068#troubleshoot-2fa`,target:"_blank"},xe):null}))):t.createElement("p",{className:"align_left subtle_silver small"},de.rt("You can also try a backup code, if you have one. For other issues, read more about <a>two-factor authentication</a>, or contact your workspace administrator for help.",null,yt=>{let{tag:Rt,text:xe}=yt;return Rt==="a"?t.createElement(m.A,{href:`https://${(0,ae.qF)()}/help/articles/204509068-Enabling-two-factor-authentication`,target:"_blank"},xe):null})),"renderProblems");N.displayName="renderProblems";const b=u(ct=>{const[yt,Rt]=(0,t.useState)(!1);return t.createElement("div",{className:"p-enter-code__help_button"},t.createElement(m.A,{tabIndex:0,className:"p-enter-code__get_help_link",onClick:()=>Rt(!yt),autoClogProps:Ie},t.createElement(Ae.A,{type:"question-circle"})," ",j(ct)),yt&&t.createElement("div",{className:"send_code_block"},ct.children,t.createElement("div",{className:"col span_4_of_6 float_none margin_auto"},t.createElement("hr",{className:"medium_bottom_margin"}),N(ct))))},"GetHelpButton");b.displayName="GetHelpButton";var R=e(9867500491),K=e(4505564445),B=e(219228829),$=e(3700949338);function Z(){return Z=Object.assign||function(ct){for(var yt=1;yt<arguments.length;yt++){var Rt=arguments[yt];for(var xe in Rt)Object.prototype.hasOwnProperty.call(Rt,xe)&&(ct[xe]=Rt[xe])}return ct},Z.apply(this,arguments)}u(Z,"_extends");let re=u(class extends t.Component{render(){const{ariaDescribedBy:yt}=this.props;return t.createElement("div",{className:(0,_.A)("two_factor_input_item",{focused:this.props.hasFocus})},t.createElement("input",{autoComplete:this.props.autocomplete,ref:this.props.refToForward,type:"text",inputMode:"numeric",pattern:"\\d*",value:this.props.value,"aria-disabled":this.props.disabled,disabled:this.props.disabled,maxLength:1,onKeyDown:this.onKeyDown,onKeyPress:this.onKeyPress,onChange:this.onChange,onFocus:this.props.onFocus,onBlur:this.props.onBlur,onPaste:this.onPaste,"aria-label":this.props.ariaLabel,"aria-describedby":yt}))}constructor(...yt){super(...yt),this.onKeyDown=Rt=>{switch(Rt.keyCode){case K.G_:{Rt.currentTarget.value||this.props.moveLeft();return}case K.UQ:return Rt.preventDefault(),this.props.moveLeft();case K.LE:return Rt.preventDefault(),this.props.moveRight();default:break}},this.onKeyPress=Rt=>{!(0,$.A)(Rt.which)&&Rt.charCode&&!(0,B.A)(Rt)&&Rt.preventDefault()},this.onChange=Rt=>{const xe=Rt.target.value;(/^[0-9]$/.test(xe)||xe==="")&&this.props.onChange(xe)},this.onPaste=Rt=>{Rt.preventDefault();const xe=window.clipboardData||Rt.clipboardData,Nt=xe.getData("text")||xe.getData("text/plain"),Ft=/\D/g,qt=Nt.replace(Ft,"");this.props.onPaste(qt)}}},"TwoFactorDigitInput");re.displayName="TwoFactorDigitInput";const Te=t.forwardRef((ct,yt)=>t.createElement(re,Z({},ct,{refToForward:yt}))),Ce=new i.Ay("team_creation");let Pe=u(class extends t.Component{focusInput(yt){const Rt=this.inputRefs[yt];Rt!=null&&Rt.current&&Rt.current.focus()}moveLeft(yt){yt<=0||this.focusInput(yt-1)}moveRight(yt){yt>=this.state.values.length-1||this.focusInput(yt+1)}isComplete(yt){return!yt.some(Rt=>!Rt)}clear(){this.setState(yt=>({values:yt.values.map(()=>""),focusedInputIndex:0})),this.focusInput(0)}onChange(yt,Rt){const xe=this.state.values.slice();xe[yt]=Rt,this.setState(()=>({values:xe}),()=>{Rt&&!this.isComplete(this.state.values)&&this.moveRight(yt)})}componentDidUpdate(yt,Rt){var xe;if(this.state.focusedInputIndex!==-1&&document.activeElement!==((xe=this.inputRefs[this.state.focusedInputIndex])===null||xe===void 0?void 0:xe.current)&&this.focusInput(this.state.focusedInputIndex),this.props.codeLength!==yt.codeLength&&this.onCodeLengthChange(Rt),!this.isComplete(Rt.values)&&this.isComplete(this.state.values)||this.isComplete(this.state.values)&&Rt.values.join("")!==this.state.values.join("")){const Nt=this.state.values.join("");this.props.onFillCode(Nt)}else Rt.values.join(",")!==this.state.values.join(",")&&this.props.onChange()}componentDidMount(){this.focusInput(0)}renderInputs(yt,Rt){return this.state.values.slice(yt,Rt).map((xe,Nt)=>{const Ft=Nt+yt;return t.createElement(Te,{autocomplete:Ft===0?"one-time-password":"off",key:Ft,ref:this.inputRefs[Ft],moveLeft:()=>this.moveLeft(Ft),moveRight:()=>this.moveRight(Ft),onChange:qt=>this.onChange(Ft,qt),onPaste:this.onPaste,onFocus:()=>{this.setState(()=>({focusedInputIndex:Ft}))},onBlur:()=>this.setState(()=>({focusedInputIndex:-1})),hasFocus:this.state.focusedInputIndex===Ft,value:this.state.values[Ft],ariaLabel:Ce.t("digit {inputIndex} of {numberOfInputs}",{inputIndex:Ft+1,numberOfInputs:this.state.values.length}),ariaDescribedBy:this.props.ariaDescribedBy,disabled:this.props.disabled})})}render(){return t.createElement("div",{className:"display_flex align_items_center margin_bottom_50","data-qa":"confirmation_code_input"},t.createElement("div",{className:"display_flex"},this.renderInputs(0,this.props.codeLength)))}constructor(yt){super(yt),this.onPaste=Rt=>{const xe=this.state.focusedInputIndex;if(xe===-1)return;const Nt=this.state.values.length-xe,Ft=Rt.substring(0,Nt).split(""),qt=this.state.values.slice();Ft.forEach((un,tt)=>{const pt=tt+xe;qt[pt]=un}),this.setState(()=>({values:qt}),()=>{this.focusInput(Math.min(this.state.values.length-1,xe+Ft.length))})},this.onCodeLengthChange=Rt=>{const xe=(0,R.A)(this.props.codeLength,()=>"");Rt.values.forEach((Nt,Ft)=>{Ft<xe.length&&(xe[Ft]=Nt)}),this.setState(()=>({values:xe})),this.inputRefs=xe.map(()=>t.createRef())},this.state={values:(0,R.A)(yt.codeLength,()=>""),focusedInputIndex:-1},this.inputRefs=this.state.values.map(()=>t.createRef())}},"TwoFactorCodeInput");Pe.displayName="TwoFactorCodeInput",Pe.defaultProps={isNumbersOnly:!0};const fe=new i.Ay("sign_in");function pe(ct){let yt=null;return ct.error===he.SMS_RATE_LIMITED?yt=fe.rt("Apologies! There were too many SMS message requests in a short period, so you\u2019ll have to wait a moment to try again."):ct.error===he.INVALID_CODE?yt=fe.rt("Your two-factor authentication code was incorrect. Please try again."):ct.error===he.RATE_LIMITED?yt=fe.rt("You\u2019ve been trying to log in too often. Wait a few minutes and try again."):ct.error===he.TOO_MANY_ATTEMPTS?yt=fe.rt("We\u2019ve detected too many failed attempts to enter a code. For safety we\u2019ve reset your password. Please check your email for further information.",{fallbackHash:"7773426b227dec3b18a254adf97a7e212e998276"}):yt=fe.rt("An unknown error occurred."),t.createElement(o.Ay,{className:"p-enter-code-error__alert",type:o.QE.boxed,icon:"lock-o",level:o.A_.error,align:o.AO.left,"data-qa":"2fa_code_error_alert"},t.createElement("span",null,yt))}u(pe,"EnterCodeError");var q=e(9418991940),se=e(3328068409),ge=e(1236965385);function Oe(){return Oe=Object.assign||function(ct){for(var yt=1;yt<arguments.length;yt++){var Rt=arguments[yt];for(var xe in Rt)Object.prototype.hasOwnProperty.call(Rt,xe)&&(ct[xe]=Rt[xe])}return ct},Oe.apply(this,arguments)}u(Oe,"enter_code_root_extends");const Le=new i.Ay("sign_in"),We=5*60*1e3,Re={elementName:"resend_button",onClick:{enableClogAction:!0}},we={elementName:"backup_button",onClick:{enableClogAction:!0}},Je={elementName:"emergency_backup_button",onClick:{enableClogAction:!0}},it="two_factor_form",et="enter-code",lt=6;var nt;(function(ct){ct.Request="request_primary",ct.RequestBackup="request_backup",ct.SubmitPrimary="submit_primary",ct.SubmitBackup="submit_backup",ct.SubmitEmergency="submit_emergency",ct.None="none"})(nt||(nt={}));function at(ct){const[yt,Rt]=(0,t.useState)(ct.twoFactorType),[xe,Nt]=(0,t.useState)("");var Ft;const[qt,un]=(0,t.useState)((Ft=ct.action)!==null&&Ft!==void 0?Ft:nt.None),[tt,pt]=(0,t.useState)(!1),[Dt,Wt]=(0,t.useState)(lt),[zt,ln]=(0,t.useState)(!1),Tn=t.useRef(null),cn=t.createRef(),hn=ct.submitOverride,{trackClogAuthRef:Cn,clogAuthLoginClick:_n,trackClog:Vn}=(0,ge.$A)(),Wn=Cn({eventId:ve.EventId.AUTH_WORKSPACE_ENTER_CODE,uiPage:et});(0,t.useEffect)(()=>{if(tt){var be,U;if((be=Vn.current)===null||be===void 0||(U=be.track)===null||U===void 0||U.call(be,{elementName:it,elementValue:qt}),_n({eventId:ve.EventId.AUTH_WORKSPACE_ENTER_CODE,elementName:it,uiPage:et,elementValue:qt})(),hn&&cn.current)pt(!1),ln(!0),hn(xe,qt,ct.magicLogin).then(()=>{var ne;(ne=Tn.current)===null||ne===void 0||ne.clear(),ln(!1)});else{var V;(V=cn.current)===null||V===void 0||V.submit()}}},[qt,tt,cn,Vn,xe,hn,ct.magicLogin,_n]),(0,t.useEffect)(()=>{(ct.error===he.RATE_LIMITED||ct.error===he.TOO_MANY_ATTEMPTS)&&ln(!0),ct.error===he.RATE_LIMITED&&setTimeout(()=>{ln(!1)},We)},[ct.error]);const kn=yt===_e.EMERGENCY,Pn=qt===nt.RequestBackup||qt===nt.SubmitBackup,$t=!kn&&(Pn&&ct.twoFactorBackupType===_e.SMS||!Pn&&ct.twoFactorType===_e.SMS||ct.twoFactorType===_e.EMAIL),$n=ct.twoFactorType===_e.EMAIL,De=ct.twoFactorType===_e.SMS?Le.rt("Send Code to Primary Phone"):Le.rt("Use Authentication App"),Ne=ct.twoFactorBackupType===_e.SMS?Le.rt("Send Code to Backup Phone"):Le.rt("Use Backup Authentication App"),Me=u(()=>t.createElement(X.$n,{type:"outline",onClick:()=>{un(Pn?nt.RequestBackup:nt.Request),pt(!0)},autoClogProps:Re},Pn?Le.rt("Resend Code to Backup Phone"):Le.rt("Resend Code")),"ResendButton"),Be=u(()=>t.createElement(X.$n,{type:"outline",onClick:()=>{un(Pn?nt.Request:nt.RequestBackup),pt(!0)},autoClogProps:we},Pn?De:Ne),"BackupButton");Be.displayName="BackupButton";const ue=u(()=>{let be;return kn?be=Pn?Ne:De:be=Le.rt("Use Emergency Backup Code",{fallbackHash:"722971c61482e6fdf1d0c37abc0d6505ac884e0c"}),t.createElement(X.$n,{type:"outline",onClick:()=>{kn?(Rt(ct.twoFactorType),Wt(lt)):(Rt(_e.EMERGENCY),Wt(ct.emergencyCodeLength))},autoClogProps:Je},be)},"EmergencyButton");ue.displayName="EmergencyButton";const ke=u(()=>ct.twoFactorType===_e.EMAIL?ct.isClientApp?Le.rt("We don\u2019t recognize this device",{fallbackHash:"c7a15a747957cbfe27c485a1f69bd93d726680b6"}):Le.rt("We don\u2019t recognize this browser",{fallbackHash:"c7a15a747957cbfe27c485a1f69bd93d726680b6"}):Le.rt("Enter your authentication code"),"GetHeader"),Xe=u(()=>{if(kn)return Le.rt("Check the list of emergency backup codes provided when setting up 2FA.",{fallbackHash:"722971c61482e6fdf1d0c37abc0d6505ac884e0c"});if(Pn)return ct.twoFactorBackupType===_e.APP?Le.rt("Check your authentication app for your code."):Le.rt("We\u2019ve sent an authentication code to your backup phone <br></br> for signing into <strong>{teamName}</strong>.",{teamName:ct.teamName});switch(ct.twoFactorType){case _e.APP:return Le.rt("Check your authentication app for your code.");case _e.EMAIL:return Le.rt("We hate to be a bother, but we need to do our due diligence to keep your account safe. Please enter the code we\u2019ve just sent to {emailAddress} below to complete your sign-in.",{teamName:ct.teamName,emailAddress:ct.emailAddress,fallbackHash:"482df38f5efc61b851c499bff4080846e0f2b65b"});default:return Le.rt("We\u2019ve sent an authentication code to your phone for signing into <strong>{teamName}</strong>.",{teamName:ct.teamName})}},"GetSubheader"),dt=u(be=>{let U;kn?U=nt.SubmitEmergency:U=Pn?nt.SubmitBackup:nt.SubmitPrimary,Nt(be),un(U),pt(!0)},"onFillCode"),bt=(0,q.d4)(se.to);return t.createElement(Q.A,{eventId:ve.EventId.TWO_FACTOR_AUTH,uiPage:et,trackClogRef:Wn},t.createElement(J,{clientTheme:bt},t.createElement(G.A,{heading:ke(),subHeading:Xe(),subHeadingClassName:"p-enter_code_app__view_sub_header"},ct.codeResent&&t.createElement(o.Ay,{className:"p-enter-code-error__alert",type:o.QE.boxed,icon:"paper-plane",level:o.A_.info,align:o.AO.left,"data-qa":"2fa_code_resent_alert"},$n?Le.rt("We\u2019ve sent a fresh code to {emailAddress} for signing into <strong>{teamName}</strong>.",{teamName:ct.teamName,emailAddress:ct.emailAddress,fallbackHash:"ed10973da08d5a9563d5aa07b51e6771457ef6b0",fallbackHashNs:"find_team"}):Le.rt("We\u2019ve sent a fresh code to your phone for signing into <strong>{teamName}</strong>.",{teamName:ct.teamName})),ct.error&&t.createElement(pe,{error:ct.error}),t.createElement("form",{ref:cn,className:"p-enter_code",method:"POST"},t.createElement("div",{className:"p-enter_code__input_container"},t.createElement("fieldset",{className:"p-enter_code__input_fieldset"},t.createElement("legend",{className:"offscreen"},Le.rt("{codeLength}-digit confirmation code",{codeLength:Dt,fallbackHash:"0279e13b54733feec1317a9d5a3f36bfe1b56e30"})),t.createElement(Pe,{ref:Tn,onFillCode:dt,onChange:()=>{},hideDash:!0,error:ct.error,disabled:zt,codeLength:Dt}),t.createElement("input",{type:"hidden",name:"2fa_magiclogin",value:ct.magicLogin}),ct.redir.length>0&&t.createElement("input",{type:"hidden",name:"redir",value:ct.redir}),t.createElement("input",{type:"hidden",name:"remember",value:ct.remember?"1":"0"}),t.createElement("input",{type:"hidden",name:"has_remember",value:ct.hasRemember}),t.createElement("input",{type:"hidden",name:"2fa_code",value:xe}),t.createElement("input",{type:"hidden",name:"2fa_action",value:qt})))),t.createElement(b,Oe({},ct),t.createElement("div",{className:"p-enter-code__button"},$t&&t.createElement(Me,null),ct.twoFactorBackupType&&!kn&&t.createElement(Be,null),!$n&&t.createElement(ue,null))),ct.loggedInTeams.length>0&&t.createElement("div",{className:"p-enter-code__logged_in_teams"},t.createElement(le,Oe({},ct))))))}u(at,"EnterCodeRoot");var ze=e(7515251865),Ke=e(4979382452),He=e(3602521375),Ye=e(4636370173),_t=e(2465132699),vt=e(8523371695),Tt=e(3606117573),Lt=e(8029613601),ft=e(4947127560),mt=e(9310872914),Yt=e(6533394955),nn=e(3051824855);function jt(){return jt=Object.assign||function(ct){for(var yt=1;yt<arguments.length;yt++){var Rt=arguments[yt];for(var xe in Rt)Object.prototype.hasOwnProperty.call(Rt,xe)&&(ct[xe]=Rt[xe])}return ct},jt.apply(this,arguments)}u(jt,"enter_2fa_code_modal_extends");const gn=new i.Ay("2fa_modal"),on={enter2faCodeModal:"enter_2fa_code_modal",cancelButton:"enter_2fa_code_modal_cancel_button"},Xt={isSSB:!0,isSSBSignIn:!0,hasPromoOffer:!1,shouldRedirect:!1,redirectURL:"",loggedInTeams:[],remember:!1,hasRemember:"",children:void 0,isOpen:!0};function rn(ct,yt){const Rt=(0,s.vS)();if(ct!==void 0){const Nt=Rt[ct].two_factor_magic_login;Nt!==void 0&&Nt.token&&(Nt.token=yt),(0,s.q9)("pendingAuthTeams",Rt)}}u(rn,"updateLocalConfig2fa");function Zt(ct){const yt=(0,s.vS)();if(ct!==void 0){const Rt=yt[ct];Rt.two_factor_magic_login=void 0,(0,s.q9)("pendingAuthTeams",yt)}}u(Zt,"clearLocalConfig2faMagicLogin");function Ht(ct){let{magicLogin:yt,teamId:Rt,type:xe,backupType:Nt,emergencyLength:Ft,emailAddress:qt,teamName:un,currentTeamId:tt,isOpen:pt,closeModal:Dt}=ct;const[Wt,zt]=(0,t.useState)(yt),[ln,Tn]=(0,t.useState)(null),[cn,hn]=(0,t.useState)(!1),Cn=tt?(0,Yt.getStoreInstanceByTeamId)(tt):void 0,_n=(0,t.useCallback)((Wn,kn,Pn)=>{const $t={magic_token:Pn,ssb:!0,two_factor_native_supported_v2:!0,two_factor_pin:Wn,two_factor_is_backup:kn===ee.REQUEST_BACKUP||kn===ee.SUBMIT_BACKUP};return kn===ee.REQUEST_CODE||kn===ee.REQUEST_BACKUP?($t.two_factor_pin="",hn(!0)):hn(!1),new n.S($n=>{(0,a.j)("auth.loginMagic",$t,(De,Ne)=>{if(De&&Ne.refreshed_magic_login){var Me;zt(Ne.refreshed_magic_login),rn(Rt,Ne.refreshed_magic_login),!((Me=Ne.reason)===null||Me===void 0)&&Me.match(/^missing_/)||Tn(Ne.reason),$n(De)}else De&&Ne.team?(0,mt.A)({currentTeamStore:Cn,newWorkspaceId:Rt,navigateToRouteProps:{routeName:ze.o},shouldAutoSignIn:!0}).then(()=>{Dt(),$n(De)}):(Zt(Rt),(0,mt.A)({currentTeamStore:Cn,newWorkspaceId:Rt,navigateToRouteProps:{routeName:ze.o}}).then(()=>{Dt(),$n(De)}))})})},[Rt,Cn,Dt]);(0,c.A)(()=>{_n("",ee.SUBMIT_PRIMARY,Wt??"")},[]);const Vn=gn.t("Finish signing into {teamName}",{teamName:un,fallbackHash:"e27938a88eacaa79d651d3aeb0bc39d128f0dd6c",fallbackHashNs:"team_picker"});return t.createElement(Ke.A,{isOpen:pt,contentLabel:"two_factor",maxWidth:"800px",centered:!0,closeModal:Dt,dataQa:on.enter2faCodeModal},t.createElement(Lt.A,null,t.createElement(ft.A,{title:Vn})),t.createElement(Ye.A,null,t.createElement(_t.A,null,t.createElement("div",{id:"enter-code-app-root"},t.createElement(at,jt({},Xt,{teamName:un,error:ln,action:null,magicLogin:Wt||"",twoFactorType:xe,twoFactorBackupType:Nt,emailAddress:qt,codeResent:cn,redir:"",emergencyCodeLength:Ft,isClientApp:!0,submitOverride:_n}))))),t.createElement(vt.A,null,t.createElement(Tt.A,null,t.createElement(He.A,{type:"outline","data-qa":on.cancelButton},gn.t("Cancel",{fallbackHash:"77dfd2135f4db726c47299bb55be26f7f4525a46",fallbackHashNs:"admin"})))))}u(Ht,"TwoFAModal"),Ht.displayName="TwoFAModal";const Bt=(0,nn.e)(Ht);var Qt=e(796111729),sn=e(9012396182);function Mn(ct,yt){const Rt=(0,Yt.getStateForClientStore)();if(!(0,sn.isWorkspacePendingTwoFactor)(Rt,ct))return!1;const xe=(0,sn.getWorkspacesMeta)(Rt),Nt=xe==null?void 0:xe[ct],{two_factor_magic_login:Ft,name:qt}=Nt,{token:un,user_2fa_type:tt,user_2fa_backup_type:pt,user_emergency_code_length:Dt,email:Wt}=Ft;let zt;return yt?zt=(0,Yt.getStoreInstanceByTeamId)(yt):zt=(0,Yt.getStoreInstanceByTeamId)((0,sn.getFocusedWorkspace)(Rt)),zt?(zt.dispatch(Bt({magicLogin:un,teamId:ct,type:tt,backupType:pt,emergencyLength:Dt,teamName:qt,currentTeamId:yt,emailAddress:Wt})),!0):((0,Qt.Wo)().error("TWO_FACTOR_SSB",`${ct} is pending 2fa, but no store for ${yt}, falling back to openSignIn()`),!1)}u(Mn,"maybeRenderTwoFactorModal")},4626613428:(z,A,e)=>{"use strict";e.d(A,{S4:()=>h,Ty:()=>D,ez:()=>m,lf:()=>M});var t=e(6839188756),n=e(5751973043),s=e(1247361162),a=e(9829579108),c=e(9186462665),o=e(2047021170),r=e(7268021173),l=e(6827180593),_=e(772817784),d=e(117899263),i=e(3677514771),m;(function(P){P.HAS_MENTIONS="has_mentions",P.HAS_SLACK_CONNECT_INVITE="has_slack_connect_invite",P.HAS_THREADS="has_threads",P.IS_ENTERPRISE="is_enterprise",P.IS_EXISTING_JOINER="is_existing_joiner",P.IS_IN_TRIAL="is_in_trial",P.IS_ONBOARDING_COMPLETED="is_onboarding_completed",P.IS_OVER_TWO_WEEKS_OLD="is_over_two_weeks_old",P.IS_USER_PREF_ENABLED="is_user_pref_enabled"})(m||(m={}));const h="should_show_ia4_tabs",v={reason:m.IS_ENTERPRISE,shouldShowTabs:!0},y={reason:m.IS_EXISTING_JOINER,shouldShowTabs:!0},T={reason:m.IS_USER_PREF_ENABLED,shouldShowTabs:!0},I={reason:m.HAS_MENTIONS,shouldShowTabs:!0},p={reason:m.HAS_THREADS,shouldShowTabs:!0},g={reason:m.HAS_SLACK_CONNECT_INVITE,shouldShowTabs:!0},E={reason:m.IS_IN_TRIAL,shouldShowTabs:!0},f={reason:m.IS_ONBOARDING_COMPLETED,shouldShowTabs:!0},O={shouldShowTabs:!0,reason:m.IS_OVER_TWO_WEEKS_OLD},C={shouldShowTabs:!1},M=(0,a.Ay)(P=>{const k=(0,i.H7)(P);if((0,t.r7)(k))return v;const F=(0,_.w)(P);if(!(0,d._)(P)&&F)return y;if((0,o.ty)(P,h))return T;var S;if(((S=(0,s.rz)(P))!==null&&S!==void 0?S:n.Ml).length>0)return I;var w;return((w=(0,s.sG)(P))!==null&&w!==void 0?w:n.Ml).length>0?p:(0,c.RU)(P)?g:(0,r.iH)(P)?E:(0,o.ty)(P,"onboarding_complete")?f:(0,l.H)(P)>=14?O:C});M.meta={name:"createSelector",key:"createSelectorshouldShowTabsWithReason",description:P=>{const k=(0,i.H7)(P);if((0,t.r7)(k))return v;const F=(0,_.w)(P);if(!(0,d._)(P)&&F)return y;if((0,o.ty)(P,h))return T;var S;if(((S=(0,s.rz)(P))!==null&&S!==void 0?S:n.Ml).length>0)return I;var w;return((w=(0,s.sG)(P))!==null&&w!==void 0?w:n.Ml).length>0?p:(0,c.RU)(P)?g:(0,r.iH)(P)?E:(0,o.ty)(P,"onboarding_complete")?f:(0,l.H)(P)>=14?O:C}};const D=(0,a.Ay)(P=>M(P).shouldShowTabs);D.meta={name:"createSelector",key:"createSelectorshouldShowTabs",description:P=>M(P).shouldShowTabs}},3126601217:(z,A,e)=>{"use strict";e.d(A,{A4:()=>r,BI:()=>s,O4:()=>l,QW:()=>c,cS:()=>o,uS:()=>a,vh:()=>n});var t=e(9552526132);const n={...t.M,HermesWebhook:"hermes_webhook",HermesScheduled:"hermes_scheduled"},s=u(_=>_.type===n.Shortcut,"isShortcutTrigger"),a=u(_=>_.type===n.Scheduled||_.type===n.HermesScheduled,"isScheduledTrigger"),c=u(_=>_.type===n.Event,"isNativeEventTrigger"),o=u(_=>_.type===n.Webhook||_.type===n.HermesWebhook,"isWebhookTrigger"),r=u(_=>_.type===n.External,"isExternalEventTrigger"),l=u(_=>_.type===n.Service,"isServiceTrigger")},9121100949:(z,A,e)=>{"use strict";e.d(A,{$D:()=>d,OR:()=>o,RC:()=>h,Ts:()=>l,WU:()=>m,gN:()=>r,jG:()=>i,jr:()=>v,jt:()=>c,ke:()=>t,qD:()=>_,r1:()=>a,ts:()=>n,u1:()=>s});const t="viewLayoutSidebarWidthIntent",n="viewLayoutSidebarWidthMode",s="viewLayoutSidebarWideWidthIntent",a="viewLayoutSidebarWideWidthMode",c="viewLayoutSidebarExtraWideWidthIntent",o="viewLayoutSidebarExtraWideWidthMode",r="viewLayoutSecondaryWidthIntent",l="viewLayoutSecondaryWidthMode",_="viewLayoutSplitWidthIntent",d="viewLayoutSplitWidthMode",i="viewLayoutIsSidebarVisible",m="viewLayoutIsWorkspaceSwitcherVisible",h="viewLayoutCompactModeEnabled",v="viewLayoutLastSidebarWidth"}},z=>{var A=u(t=>z(z.s=t),"__webpack_exec__");z.O(0,["gantry-v2-vendors","gantry-v2-vendors-client","gantry-v2-shared","client-boot-styles"],()=>A(1486505410));var e=z.O()}]);})();

//# sourceMappingURL=https://slack.com/source-maps/bv1-13/client-boot.0a573882c4edaf4359c1.min.js.map